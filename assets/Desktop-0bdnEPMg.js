import{C as d,Et as $,G as j,J as o,K as A,Ot as V,S as p,T as C,Tt as e,X as D,c as G,ct as w,g as O,gt as I,j as Y,k as S,ot as f,w as M,x as i,yt as U}from"./i18n-Bgv5p1Yb.js";import"./ionic-B1wlflFe.js";import{C as X,G as J,U as K,_ as q}from"./vue-core-Dey0Eikg.js";import"./primevue-CuC2W_MW.js";import"./query-xyWPY_A0.js";import{t as Q}from"./esm-3I1MKnNw.js";import{Bn as Z,Rr as ee,Vi as B,Vn as z,Wn as te,Xn as v,Y as T,Yn as h,hi as ae,zn as se}from"./index-D14P6RIp.js";import"./DropdownMenu-DRQR9gYZ.js";import"./useInfiniteServerClient-BvrBZ7fp.js";import{t as re}from"./useServerClient-J-0fKr_R.js";import{t as le}from"./ScrollContainer-B62Mw8yN.js";import"./MusicButton-BayrY53m.js";import"./BannerButton-B_WfwZA1.js";import"./MediaLikeButton-DLX0tgZG.js";import"./Marquee-BLso01lo.js";import"./TrackLinks-CHGonGWp.js";import"./BigPlayButton-CwEYoBQF.js";import"./EqSpinner-BmuqJfuE.js";import{t as oe}from"./NotFound-DYgy2sMA.js";import"./ShareButton-BfixN5iN.js";import{i as ie,n as ue,r as ne,t as de}from"./TrackRow-GFugaIVM.js";G();K();var me={key:0,ref:"main",class:"flex flex-col w-available h-available sm:rounded-2xl"},ce={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},pe=Y({__name:"Desktop",setup(fe){const l=J(),y=i(()=>l.path.startsWith("/music/album")),_=i(()=>l.path.startsWith("/music/artist")),g=i(()=>l.path.startsWith("/music/playlists")),k=i(()=>l.path.startsWith("/music/tracks")),x=i(()=>l.path.startsWith("/music/genres")),R=i(()=>y.value?"album":_.value?"artist":g.value?"playlist":k.value?"favorite":x.value?"genre":"unknown"),W=i(()=>String(l.params.id??"")),{data:s,isError:N}=re({path:l.fullPath}),u=U([]),n=I(""),E=Q(i(()=>{const t=se.value??null;return{count:u.value?.length??0,getScrollElement:()=>t,estimateSize:()=>64,overscan:10,initialRect:{width:0,height:800}}}));f(s,t=>{t&&(ae(t?.name??null),m(t?.tracks??[],v.value,h.value,n.value),z(t?.color_palette?.cover))},{immediate:!0}),f(h,t=>{m(s.value?.tracks??[],v.value,t,n.value)}),f(v,t=>{m(s.value?.tracks??[],t,h.value,n.value)}),f(n,t=>{m(s.value?.tracks??[],v.value,h.value,t)});function m(t,r,a,c){const H=ee(t??[],r,a,te);c===""?u.value=H:u.value=H?.filter(b=>b.name?.toLowerCase().includes(c?.toLowerCase?.())||b.artist_track?.some(F=>F.name.toLowerCase().includes(c?.toLowerCase?.()))||b.album_track?.[0]?.name.toLowerCase().includes(c?.toLowerCase?.()))??[]}j(()=>{s.value?.color_palette?.cover&&z(s.value?.color_palette?.cover)}),A(()=>{document.getElementById("navbar")&&(document.getElementById("navbar").style.display="flex"),z(null),Z(null)});const L=I();function P(){const r=L.value?.$el,a=r?.firstChild;!r||!a||(Math.ceil(r.getBoundingClientRect()?.top??500)<=67?(a.style.background="var(--color-theme-8)",r.style.color="white"):(a.style.background="",r.style.color=""))}return(t,r)=>(o(),d(e(X),null,{default:w(()=>[S(e(q),{fullscreen:!0,class:"flex"},{default:w(()=>[e(N)&&!e(s)?(o(),d(oe,{key:0})):(o(),d(le,{key:1,"auto-hide":!0,static:!0,onScroll:P},{default:w(()=>[!e(l).params.id||e(l).params.id&&e(s)?.id===e(l).params.id?(o(),C("div",me,[S(ne,{data:e(s)},null,8,["data"]),p("div",ce,[r[1]||(r[1]=p("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),(o(),d(ie,{key:e(s)?.id,data:e(s),filter:n.value,onFilterChange:r[0]||(r[0]=a=>n.value=a)},null,8,["data","filter"])),p("div",{class:$([{"pb-24":e(B)&&!e(T),"pb-40":e(B)&&e(T),"pb-4 sm:pb-4":!e(B)&&e(T)},"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-3 flex-grow-1 gap-0.5 sm:p-4"])},[(o(),d(ue,{key:e(s)?.id,ref_key:"sortHeader",ref:L,"is-album-route":y.value,"is-artist-route":_.value,"is-playlists-route":g.value,"is-favorites-route":k.value,"is-genres-route":x.value},null,8,["is-album-route","is-artist-route","is-playlists-route","is-favorites-route","is-genres-route"])),p("div",{style:V({height:`${e(E).getTotalSize()}px`,width:"100%",position:"relative"})},[(o(!0),C(O,null,D(e(E).getVirtualItems(),a=>(o(),C("div",{key:u.value[a.index]?.id+u.value[a.index]?.favorite,style:V({position:"absolute",top:0,left:0,width:"100%",height:`${a.size}px`,transform:`translateY(${a.start}px)`})},[S(de,{data:u.value[a.index],"display-list":u.value,index:a.index,"is-album-route":y.value,"is-artist-route":_.value,"is-playlists-route":g.value,"is-favorites-route":k.value,"is-genres-route":x.value,"route-type":R.value,"route-param-id":W.value},null,8,["data","display-list","index","is-album-route","is-artist-route","is-playlists-route","is-favorites-route","is-genres-route","route-type","route-param-id"])],4))),128))],4)],2)])],512)):M("",!0)]),_:1}))]),_:1})]),_:1}))}}),Ne=pe;export{Ne as default};
