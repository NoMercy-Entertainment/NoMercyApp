import{aw as Z,c7 as q,bt as A,I as m,J as B,az as G,aD as z,aE as K,eu as y,ev as w,e as C,a7 as V,aB as r,ew as Q,bZ as U,ex as X,o as f,v as S,c as j,a as p,z as N,aM as Y,c0 as ee,F as te,u as ae,h as se,bE as oe,bF as re}from"./index-DUg1VFYi.js";import{_ as le,a as ne,b as ie,c as ce}from"./TrackRow.vue_vue_type_script_setup_true_lang-C-jieBO4.js";import{_ as de}from"./NotFound.vue_vue_type_script_setup_true_lang-DW_zgQpl.js";import"./BigPlayButton.vue_vue_type_script_setup_true_lang-B5DbV4s-.js";import"./FavoriteImage.vue_vue_type_script_setup_true_lang-_IaKD7v4.js";import"./BannerButton.vue_vue_type_script_setup_true_lang-DvXH9IPI.js";const ue={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},fe=["innerHTML"],pe={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-slate-dark-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},he=Z({__name:"Mobile",setup(me){const L=q(),{data:s,isError:P}=A({path:L.currentRoute.value.fullPath,keepForever:!0}),O=m(null),T=m(),c=m("");B(s,t=>{var e;U((t==null?void 0:t.name)??null),g((t==null?void 0:t.tracks)??[],w.value,y.value,c.value),z((e=t==null?void 0:t.color_palette)==null?void 0:e.cover)}),B(y,t=>{var e;g(((e=s.value)==null?void 0:e.tracks)??[],w.value,t,c.value)}),B(w,t=>{var e;g(((e=s.value)==null?void 0:e.tracks)??[],t,y.value,c.value)}),B(c,t=>{var e;g(((e=s.value)==null?void 0:e.tracks)??[],w.value,y.value,t)});const g=(t,e,l,a)=>{const o=Q(t??[],e,l,X);a==""?T.value=o:T.value=(o==null?void 0:o.filter(i=>{var n,u,v,k,_,x;return((u=i.name)==null?void 0:u.toLowerCase().includes((n=a==null?void 0:a.toLowerCase)==null?void 0:n.call(a)))||((v=i.artist_track)==null?void 0:v.some($=>{var h;return $.name.toLowerCase().includes((h=a==null?void 0:a.toLowerCase)==null?void 0:h.call(a))}))||((x=(k=i.album_track)==null?void 0:k[0])==null?void 0:x.name.toLowerCase().includes((_=a==null?void 0:a.toLowerCase)==null?void 0:_.call(a)))}))??[]};G(()=>{var t,e,l,a;(e=(t=s.value)==null?void 0:t.color_palette)!=null&&e.cover&&z((a=(l=s.value)==null?void 0:l.color_palette)==null?void 0:a.cover)}),K(()=>{var t,e,l,a,o;g(((t=s==null?void 0:s.value)==null?void 0:t.tracks)??[],w.value,y.value,c.value),(l=(e=s.value)==null?void 0:e.color_palette)!=null&&l.cover&&z((o=(a=s.value)==null?void 0:a.color_palette)==null?void 0:o.cover)});const D=()=>{window.history.back()},b=m(!1),J=m(!1),d=m(),W=t=>{var o,i,n,u,v,k,_,x,$,h,H,R,E,F,I,M;console.log((i=(o=d.value)==null?void 0:o.$el)==null?void 0:i.getBoundingClientRect().top);const e=290,l=310,a=88;b.value=((n=t.detail)==null?void 0:n.scrollTop)>=e,J.value=((u=t.detail)==null?void 0:u.scrollTop)>=l,((k=(v=d.value)==null?void 0:v.$el)==null?void 0:k.getBoundingClientRect().top)==a?((x=(_=d.value)==null?void 0:_.$el)==null||x.classList.add("!bg-focus"),(H=(h=($=d.value)==null?void 0:$.$el)==null?void 0:h.firstChild)==null||H.classList.add("!bg-slate-light-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")):((E=(R=d.value)==null?void 0:R.$el)==null||E.classList.remove("!bg-focus"),(M=(I=(F=d.value)==null?void 0:F.$el)==null?void 0:I.firstChild)==null||M.classList.remove("!bg-slate-light-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]"))};return(t,e)=>(f(),C(r(re),null,{default:V(()=>[S(r(oe),{fullscreen:!0,onIonScroll:W,scrollEvents:!0},{default:V(()=>{var l,a,o,i;return[r(P)?(f(),C(de,{key:0})):!r(L).currentRoute.value.params.id||r(L).currentRoute.value.params.id&&((l=r(s))==null?void 0:l.id)==r(L).currentRoute.value.params.id?(f(),j("div",{key:1,ref_key:"main",ref:O,class:"flex flex-col overflow-x-clip w-available h-min sm:rounded-2xl -mt-safe-offset-12 bg-[rgb(var(--background-auto))]"},[S(le,{data:r(s)},null,8,["data"]),p("div",ue,[e[2]||(e[2]=p("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom bg-focus"},null,-1)),p("div",{id:"navbar",class:N(["fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-slate-light-11 dark:bg-slate-dark-1 top-0 pt-safe-offset-4 transition-opacity duration-300",{"opacity-0 pointer-events-none":!b.value,"opacity-100 pointer-events-auto":b.value}])},[e[1]||(e[1]=p("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-transform duration-300 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),p("button",{onClick:D,class:"z-30 flex h-10 w-12 items-center justify-center rounded-md"},[S(Y,{icon:"arrowLeft"})]),p("div",{id:"navText",class:N(["pointer-events-none whitespace-pre text-left relative z-20 h-auto line-clamp-2 w-full self-center text-xl font-bold leading-none transition-opacity duration-300",{"opacity-0 pointer-events-none":!b.value,"opacity-100 pointer-events-auto":b.value}]),innerHTML:r(ee)(((a=r(s))==null?void 0:a.name)??"Songs you like","text-sm line-clamp-2")},null,10,fe)],2),(f(),C(ne,{key:(o=r(s))==null?void 0:o.id,data:r(s),filter:c.value,onFilterChange:e[0]||(e[0]=n=>c.value=n)},null,8,["data","filter"])),p("div",pe,[(f(),C(ie,{ref_key:"sortHeader",ref:d,key:(i=r(s))==null?void 0:i.id})),(f(!0),j(te,null,ae(T.value,(n,u)=>(f(),C(ce,{key:n.id,data:n,displayList:T.value,index:u},null,8,["data","displayList","index"]))),128))])])],512)):se("",!0)]}),_:1})]),_:1}))}});export{he as default};
//# sourceMappingURL=Mobile-CBSfoNsX.js.map
