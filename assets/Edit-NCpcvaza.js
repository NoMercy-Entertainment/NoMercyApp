import{I,du as M,f as B,d as S,o as q,s,a as t,t as u,j as a,q as g,O as R,dv as U,$ as O,l as d,V as Q,E as j,w as D,b as A,K as i,R as $}from"./index-BzddMR-Z.js";import{u as F}from"./useServerClient-Q1lUvFmE.js";import{_ as L}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-vK8EIFbp.js";import{u as P}from"./useQueryClient-CScaY66s.js";import{_ as z}from"./Modal.vue_vue_type_script_setup_true_lang-BvrA8NPy.js";import{_ as C}from"./Button.vue_vue_type_script_setup_true_lang-Doyr5lyq.js";import{a as b}from"./index-OEs0r1HF.js";import"./useQuery-Cjmb8-YN.js";import"./useBaseQuery-FjCDbk8j.js";import"./useInfiniteServerClient-Bd554tV4.js";import"./useMounted-BGEd2k6F.js";import"./HubConnection-CMQnVIkW.js";import"./FloatingBackButton.vue_vue_type_script_setup_true_lang-CwGGtWHY.js";import"./OptimizedIcon.vue_vue_type_script_setup_true_lang-BC8tj0dR.js";import"./ScrollContainer.vue_vue_type_script_setup_true_lang-Duu3RqA5.js";import"./RipperOverlay.vue_vue_type_script_setup_true_lang-L5GuUkgd.js";import"./ripperSocket-E1AbDBoD.js";import"./Shadow-B5L7gSR3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-1OIG4w3U.js";import"./index-ZhWAdK_X.js";const G={class:"my-6 text-sm text-auto-10"},H=I({__name:"DeleteSpecialModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},name:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},setup(c){const n=c,p=P(),h=M();function k(){R().delete(`dashboard/specials/${n.id}`).then(({data:l})=>{h.add({severity:l.status==="ok"?"success":"error",summary:U(l.status==="ok"?"Success":"Error"),detail:U(l.message,...l.args??[]),life:5e3}),p.invalidateQueries({queryKey:["dashboard","specials"]}),!n.noRedirect&&window.history.back()}),n.close()}return(l,x)=>{const w=B("Button");return q(),S(z,{close:c.close,open:c.open,"max-width":"max-w-xl",params:{special:n.name},title:"Delete special {{special}}"},{actions:s(()=>[a(w,{id:"yes",onclick:k,"end-icon":"trash",color:"red",type:"button"},{default:s(()=>[g(u(l.$t("Delete")),1)]),_:1}),a(w,{id:"no",onclick:c.close,type:"button",color:"auto-alpha",variant:"text"},{default:s(()=>[g(u(l.$t("Cancel")),1)]),_:1},8,["onclick"])]),default:s(()=>[t("div",G,u(l.$t("Are you sure you want to delete this special?")),1)]),_:1},8,["close","open","params"])}}}),J={class:"flex flex-col gap-5 col-span-5 col-start-1 2xl:col-start-1"},W={class:"flex flex-col gap-2"},X={class:"flex flex-col gap-2"},Y={class:"flex gap-4 w-full"},Z={class:"flex flex-col gap-4 w-full"},ee={class:"flex flex-col gap-2"},le={class:"flex flex-col gap-4 w-full"},oe={class:"flex flex-col gap-2"},te={class:"flex flex-col gap-4 col-span-2 row-start-1 col-start-1 2xl:col-start-6"},ae={class:"flex flex-col gap-5"},se={class:"flex flex-col gap-2"},Be=I({__name:"Edit",setup(c){const n=O(),{data:p,error:h,refetch:k}=F({path:"dashboard/specials",queryKey:["dashboard","specials"]}),l=d();Q(()=>{k()}),j(()=>{p.value&&(l.value=p.value.find(o=>o.id===n.params.id))}),D(p,o=>{o&&(l.value=o.find(e=>e.id===n.params.id))});const x=d(!1);function w(){x.value=!0}function N(){x.value=!1}function T(){window.history.back()}const y=d(l.value?.title||""),_=d(l.value?.overview||""),m=d(l.value?.backdrop||""),v=d(l.value?.poster||""),f=d(l.value?.logo||"");D(l,o=>{o&&(y.value=o?.title,_.value=o?.overview,m.value=o?.backdrop,v.value=o?.poster,f.value=o?.logo)});function E(){R().patch(`/dashboard/specials/${l.value?.id}`,{title:y.value,overview:_.value,backdrop:m.value,poster:v.value,logo:f.value}).then(({data:o})=>{console.log(o)})}return(o,e)=>{const K=B("Textarea"),V=B("Image");return q(),S(L,{"grid-style":1,error:i(h),title:"Special: {{title}}",params:{title:l.value?.title}},{cta:s(()=>[...e[5]||(e[5]=[])]),actions:s(()=>[a(C,{id:"remove",type:"button",variant:"text","start-icon":"folderRemove",class:"children:text-gray-400 children:transition-colors children:duration-100 children:hover:text-red-dark-8",color:"auto-alpha",onClick:w},{default:s(()=>[g(u(o.$t("Remove")),1)]),_:1}),a(C,{id:"cancel",type:"button",variant:"text",color:"white",onClick:T},{default:s(()=>[g(u(o.$t("Cancel")),1)]),_:1}),a(C,{id:"save",type:"button",class:"ml-auto",color:"theme",onClick:E},{default:s(()=>[g(u(o.$t("Save")),1)]),_:1})]),default:s(()=>[t("div",J,[t("div",W,[e[6]||(e[6]=t("label",{for:"name"},"Name",-1)),a(i(b),{id:"name",modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=r=>y.value=r),variant:"filled",class:"w-full"},null,8,["modelValue"])]),t("div",X,[e[7]||(e[7]=t("label",{for:"overview"},"Overview",-1)),a(K,{id:"overview",modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=r=>_.value=r),variant:"filled",rows:8,class:"w-full"},null,8,["modelValue"])]),t("div",Y,[t("div",Z,[t("div",ee,[e[8]||(e[8]=t("label",{for:"backdrop"},"Backdrop",-1)),a(i(b),{id:"backdrop",modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=r=>m.value=r),variant:"filled",class:"w-full"},null,8,["modelValue"])]),a(V,{src:`${i($)?.serverBaseUrl}/images/original${m.value}`,alt:"Image",width:"100%",class:"mx-2",preview:""},null,8,["src"])]),t("div",le,[t("div",oe,[e[9]||(e[9]=t("label",{for:"logo"},"Logo",-1)),a(i(b),{id:"logo",modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=r=>f.value=r),variant:"filled",class:"w-full"},null,8,["modelValue"])]),a(V,{src:`${i($)?.serverBaseUrl}/images/original${f.value}`,alt:"Image",width:"100%",class:"mx-2",preview:""},null,8,["src"])])])]),t("div",te,[t("div",ae,[t("div",se,[e[10]||(e[10]=t("label",{for:"poster"},"Poster",-1)),a(i(b),{id:"poster",modelValue:v.value,"onUpdate:modelValue":e[4]||(e[4]=r=>v.value=r),variant:"filled",class:"w-full"},null,8,["modelValue"])]),a(V,{src:`${i($)?.serverBaseUrl}/images/original${v.value}`,alt:"Image",width:"100%",class:"mx-2",preview:""},null,8,["src"])])]),l.value?.id?(q(),S(H,{key:0,id:l.value?.id,name:l.value?.title,close:N,open:x.value},null,8,["id","name","open"])):A("",!0)]),_:1},8,["error","params"])}}});export{Be as default};
