import{$ as Q,d as R,w as $,f as q,aJ as z,c as E,o as G,l as H,y as L,a0 as V,au as W,i as X,ar as Y,Q as t}from"./vue-ionic-Ct1zWn9G.js";import{g as u}from"./imageModal-gwGEKhqd.js";import{V as Z,A as ee,S as oe}from"./videoNoMercyConnectPlugin-CwyXB-yr.js";import"./vendor-BO8Pa1dw.js";import{D as ae}from"./desktopUIPlugin-BPDadw1Z.js";import{n as ne,O as le}from"./video-player-DoGKC6Gh.js";import{u as l,j as se,h as re,r as F}from"./index-Bgdd4Jwi.js";import{K as te}from"./keyHandlerPlugin-DR6Aq3px.js";import{u as ue}from"./useServerClient-D1Lq9BM0.js";import"./media-C2AqgyMX.js";import"./icons-BW5E66pf.js";import"./api-BBofn2cc.js";import"./swiper-D00Cnjmx.js";import"./buttons-DnucOQvv.js";import"./rxjs-BCp2L9Rn.js";import"./baseUIPlugin-DhmTOkCr.js";import"./subtitles-octopus-By2PrHjB.js";import"./music-player-DBCNDz4q.js";import"./useInfiniteServerClient-BUoehDrS.js";const he=Q({__name:"Desktop",setup(ie){var c;const{data:i}=ue({enabled:!((c=l.value.features)!=null&&c.nomercyConnect)}),e=R();function s(o){var p,m,d,f,g,y,v,P,k,C,b,w,S,M,_,U,I,N,h,x,B,D,T;const n={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:(o==null?void 0:o.filter(a=>!!a.id))??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:(p=l.value)==null?void 0:p.accessToken,basePath:(m=re.value)==null?void 0:m.serverBaseUrl,forceTvMode:(t("android")||t("ios"))&&!t("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||t("capacitor"),renderAhead:100,disableAutoPlayback:(d=l.value.features)==null?void 0:d.nomercyConnect};if(e.value=ne("player1").setup(n),(f=e.value)==null||f.once("back",()=>{F.back()}),(g=l.value.features)!=null&&g.nomercyConnect){const a=new Z;(y=e.value)==null||y.registerPlugin("videoNoMercyConnect",a),(v=e.value)==null||v.usePlugin("videoNoMercyConnect")}const K=new ae;(P=e.value)==null||P.registerPlugin("desktopUI",K),(k=e.value)==null||k.usePlugin("desktopUI");const O=new ee;(C=e.value)==null||C.registerPlugin("autoSkip",O),(b=e.value)==null||b.usePlugin("autoSkip");const j=new te;if((w=e.value)==null||w.registerPlugin("keyHandler",j),(S=e.value)==null||S.usePlugin("keyHandler"),!((M=l.value.features)!=null&&M.nomercyConnect)){const a=new oe;(_=e.value)==null||_.registerPlugin("sync",a),(U=e.value)==null||U.usePlugin("sync")}const J=new le;(I=e.value)==null||I.registerPlugin("octopus",J),(N=e.value)==null||N.usePlugin("octopus"),(h=e.value)==null||h.once("play",()=>{var a;(a=e.value)==null||a.enterFullscreen()}),(x=e.value)==null||x.on("playlistComplete",()=>{console.log("Playlist complete"),F.back()}),(B=e.value)==null||B.on("play",()=>{u(!0)}),(D=e.value)==null||D.on("pause",()=>{u(!1)}),(T=e.value)==null||T.on("fullscreen",a=>{var r,A;(A=(r=window.external)==null?void 0:r.sendMessage)==null||A.call(r,a?"enterFullscreen":"exitFullscreen")})}return $(i,o=>{var n;(n=l.value.features)!=null&&n.nomercyConnect?s():s(o)}),q(()=>{var o;se.stop(),(o=l.value.features)!=null&&o.nomercyConnect?s():s(i.value)}),z(()=>{var o;console.log("Unmounting player"),(o=e.value)==null||o.dispose(),u(!1)}),(o,n)=>(G(),E(V(Y),null,{default:H(()=>[L(V(W),{fullscreen:!0},{default:H(()=>n[0]||(n[0]=[X("div",{id:"player1",class:"group nomercyplayer"},null,-1)])),_:1})]),_:1}))}});export{he as default};
