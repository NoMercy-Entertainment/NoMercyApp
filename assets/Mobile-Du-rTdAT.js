import"./useBaseQuery-BpQmVyGr.js";import"./useInfiniteServerClient-CmF5E4L1.js";import"./useQueryClient-uPahzja3.js";import"./useQuery-Djpo7kUO.js";import{Ci as P,Co as _,Ec as C,Gs as p,Ha as d,Hc as h,Hs as w,Ks as v,Lo as I,Ns as M,Oc as f,Pc as S,Qs as N,Ro as T,Ss as n,U as m,Vc as u,aa as U,ec as V,hc as g,ho as x,i as a,ia as B,la as D,lo as A,ta as s,ua as L}from"./index-BK3EmIoe.js";import{s as c}from"./imageModal-B3ZSWg_0.js";import{t as H}from"./useServerClient-tUZ9DQel.js";import{i as z,n as E,o as R,r as j,s as F}from"./VideoPlayer-DldmQMeT.js";import"./buttons-CU4wCn28.js";import{t as G}from"./videoNoMercyConnectPlugin-gokIcOE2.js";M();var K=V({__name:"Mobile",setup(O){const{data:r}=H({enabled:!s.value.features?.nomercyConnect}),e=S();function i(o){const t={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:o?.filter(l=>!!l.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:s.value?.accessToken||localStorage.getItem("access_token")||"",basePath:P.value?.serverBaseUrl,forceTvMode:(n("android")||n("ios"))&&!n("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||n("capacitor"),renderAhead:100,disableAutoPlayback:s.value.features?.nomercyConnect};if(e.value=j("player1").setup(t),e.value?.once("back",()=>{history.state.back?a.back():a.replace("/")}),s.value.features?.nomercyConnect){const l=new G;e.value?.registerPlugin("videoNoMercyConnect",l),e.value?.usePlugin("videoNoMercyConnect")}const y=new z;e.value?.registerPlugin("desktopUI",y),e.value?.usePlugin("desktopUI");const b=new R;if(e.value?.registerPlugin("autoSkip",b),e.value?.usePlugin("autoSkip"),!s.value.features?.nomercyConnect){const l=new F;e.value?.registerPlugin("sync",l),e.value?.usePlugin("sync")}const k=new E;e.value?.registerPlugin("octopus",k),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?a.back():a.replace("/")}),e.value?.on("dispose",()=>{L(),B(),history.state.back?a.back():a.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{c(!0)}),e.value?.on("pause",()=>{c(!1)}),e.value?.on("ready",()=>{D(),U(),m.stop()}),e.value?.on("item",()=>{e.value?.play()}),A.addListener("backButton",()=>{e.value?.emit("back-button-hyjack"),e.value?.dispose()})}return C(r,o=>{o?.length&&i(o)}),I(()=>{m.stop(),s.value.features?.nomercyConnect?i():r.value?.length&&i(r.value)}),T(()=>{e.value?.dispose(),c(!1)}),(o,t)=>(g(),v(u(_),null,{default:f(()=>[N(u(x),{fullscreen:!0},{default:f(()=>[(g(),v(w,{to:"body"},[p("div",{class:h([{"mb-28":u(d),"mb-0":!u(d)},"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"])},[...t[0]||(t[0]=[p("div",{id:"player1",class:"group nomercyplayer"},null,-1)])],2)]))]),_:1})]),_:1}))}}),se=K;export{se as default};
