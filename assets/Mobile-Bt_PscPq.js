import{aw as D,c8 as G,bu as J,I as m,J as B,az as W,aD as $,aE as X,ei as y,ej as w,e as C,a7 as F,aB as r,ek as q,b_ as A,el as K,o as f,v as z,c as I,a as u,z as M,aM as Q,dX as U,F as Y,u as Z,h as ee,bF as te,bG as ae}from"./index-ByXhQ52S.js";import{_ as se,a as oe,S as re,b as le}from"./TrackRow.vue_vue_type_script_setup_true_lang-CXi3_p2a.js";import{_ as ne}from"./NotFound.vue_vue_type_script_setup_true_lang-a0qvuzHU.js";import"./BigPlayButton.vue_vue_type_script_setup_true_lang-CZx5ysvY.js";import"./FavoriteImage.vue_vue_type_script_setup_true_lang-BCpugS2r.js";import"./BannerButton.vue_vue_type_script_setup_true_lang-5JnXbm2-.js";const ie={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},ce=["innerHTML"],de={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-slate-dark-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},ke=D({__name:"Mobile",setup(fe){const T=G(),{data:s,isError:j}=J({path:T.currentRoute.value.fullPath,keepForever:!0}),V=m(null),L=m(),c=m("");B(s,a=>{var e;A((a==null?void 0:a.name)??null),b((a==null?void 0:a.tracks)??[],w.value,y.value,c.value),$((e=a==null?void 0:a.color_palette)==null?void 0:e.cover)}),B(y,a=>{var e;b(((e=s.value)==null?void 0:e.tracks)??[],w.value,a,c.value)}),B(w,a=>{var e;b(((e=s.value)==null?void 0:e.tracks)??[],a,y.value,c.value)}),B(c,a=>{var e;b(((e=s.value)==null?void 0:e.tracks)??[],w.value,y.value,a)});const b=(a,e,l,t)=>{const o=q(a??[],e,l,K);t==""?L.value=o:L.value=(o==null?void 0:o.filter(i=>{var n,d,g,k,x,_;return((d=i.name)==null?void 0:d.toLowerCase().includes((n=t==null?void 0:t.toLowerCase)==null?void 0:n.call(t)))||((g=i.artist_track)==null?void 0:g.some(S=>{var h;return S.name.toLowerCase().includes((h=t==null?void 0:t.toLowerCase)==null?void 0:h.call(t))}))||((_=(k=i.album_track)==null?void 0:k[0])==null?void 0:_.name.toLowerCase().includes((x=t==null?void 0:t.toLowerCase)==null?void 0:x.call(t)))}))??[]};W(()=>{var a,e,l,t;(e=(a=s.value)==null?void 0:a.color_palette)!=null&&e.cover&&$((t=(l=s.value)==null?void 0:l.color_palette)==null?void 0:t.cover)}),X(()=>{var a,e,l,t,o;b(((a=s==null?void 0:s.value)==null?void 0:a.tracks)??[],w.value,y.value,c.value),(l=(e=s.value)==null?void 0:e.color_palette)!=null&&l.cover&&$((o=(t=s.value)==null?void 0:t.color_palette)==null?void 0:o.cover)});const N=()=>{window.history.back()},v=m(!1),P=m(!1),p=m(),O=a=>{var i,n,d,g,k,x,_,S,h,H,R,E;const o=(n=(i=p.value)==null?void 0:i.$el)==null?void 0:n.getBoundingClientRect().top;o&&(v.value=o<=170,P.value=o<=160,o==64?((g=(d=p.value)==null?void 0:d.$el)==null||g.classList.add("!bg-focus"),(_=(x=(k=p.value)==null?void 0:k.$el)==null?void 0:x.firstChild)==null||_.classList.add("!bg-slate-light-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")):((h=(S=p.value)==null?void 0:S.$el)==null||h.classList.remove("!bg-focus"),(E=(R=(H=p.value)==null?void 0:H.$el)==null?void 0:R.firstChild)==null||E.classList.remove("!bg-slate-light-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")))};return(a,e)=>(f(),C(r(ae),null,{default:F(()=>[z(r(te),{fullscreen:!0,onIonScroll:O,scrollEvents:!0},{default:F(()=>{var l,t,o,i;return[r(j)?(f(),C(ne,{key:0})):!r(T).currentRoute.value.params.id||r(T).currentRoute.value.params.id&&((l=r(s))==null?void 0:l.id)==r(T).currentRoute.value.params.id?(f(),I("div",{key:1,ref_key:"main",ref:V,class:"flex flex-col overflow-x-clip w-available h-min sm:rounded-2xl -mt-safe-offset-12 bg-[rgb(var(--background-auto))]"},[z(se,{data:r(s)},null,8,["data"]),u("div",ie,[e[2]||(e[2]=u("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom bg-focus"},null,-1)),u("div",{id:"navbar",class:M(["fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-slate-light-11 dark:bg-slate-dark-1 top-0 pt-safe-offset-4 transition-opacity duration-300",{"opacity-0 pointer-events-none":!v.value,"opacity-100 pointer-events-auto":v.value}])},[e[1]||(e[1]=u("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-transform duration-300 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),u("button",{onClick:N,class:"z-30 flex h-10 w-11 items-center justify-center rounded-md"},[z(Q,{icon:"arrowLeft"})]),u("div",{id:"navText",class:M(["pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-opacity duration-300 w-[70%] overflow-clip text-xl",{"opacity-0 pointer-events-none":!v.value,"opacity-100 pointer-events-auto":v.value}]),innerHTML:r(U)(((t=r(s))==null?void 0:t.name)??"Songs you like","text-xs line-clamp-1")},null,10,ce)],2),(f(),C(oe,{key:(o=r(s))==null?void 0:o.id,data:r(s),filter:c.value,onFilterChange:e[0]||(e[0]=n=>c.value=n)},null,8,["data","filter"])),u("div",de,[(f(),C(re,{ref_key:"sortHeader",ref:p,key:(i=r(s))==null?void 0:i.id})),(f(!0),I(Y,null,Z(L.value,(n,d)=>(f(),C(le,{key:n.id,data:n,displayList:L.value,index:d},null,8,["data","displayList","index"]))),128))])])],512)):ee("",!0)]}),_:1})]),_:1}))}});export{ke as default};
//# sourceMappingURL=Mobile-Bt_PscPq.js.map
