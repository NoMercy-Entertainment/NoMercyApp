import{I as N,Y as R,D as U,a5 as $,w as G,l as q,ch as Y,d as z,o as f,s as i,j as s,K as e,bu as J,c as b,z as O,cT as F,a as u,R as Q,em as L,en as g,eo as v,b as S,bm as W,t as h,bE as X,F as Z,h as ee,bB as te,bH as ae,n as se,a1 as k,ai as le,ep as j,H as P,bh as oe,af as ie,bz as ne,ak as re}from"./index-C_qNKMWs.js";import{u as ce}from"./useServerClient-abD0VdnA.js";import{_ as B}from"./CoverImage.vue_vue_type_script_setup_true_lang-DMVjTCL6.js";import{_ as ue}from"./OptimizedIcon.vue_vue_type_script_setup_true_lang-CJu-NfRn.js";import{_ as de}from"./BigPlayButton.vue_vue_type_script_setup_true_lang-EADX2QSh.js";import{_ as fe}from"./MusicButton.vue_vue_type_script_setup_true_lang-Baq5bHoA.js";import{_ as me}from"./TrackLinks.vue_vue_type_script_setup_true_lang-XCBmMBQk.js";import{E as pe}from"./EqSpinner-D9yqsGLY.js";import{M as V}from"./MediaLikeButton-CTCt_oyX.js";import{_ as be}from"./Marquee.vue_vue_type_script_setup_true_lang-ZgkJIndM.js";import{_ as _e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useQuery-DTS8T947.js";import"./useBaseQuery-vm7BPSk-.js";import"./useQueryClient-C4PrSAx1.js";import"./useInfiniteServerClient-BbeQXtgw.js";import"./AppLogoSquare-C46FQJ-V.js";import"./PlayerIcon.vue_vue_type_script_setup_true_lang-B9358Fpg.js";import"./index-B8V6bTi4.js";import"./index-BCiRI5vG.js";import"./index-Be1fzYNM.js";import"./index-DCNqR-Sw.js";import"./index-DVzuI2el.js";const xe={class:"w-available h-available absolute left-[202px] top-0 overflow-hidden bg-focus"},we=["src"],ve={class:"flex justify-center w-available aspect-square my-8 ml-8 mr-16"},ye={key:0,class:"relative mb-8 flex w-full flex-1 flex-shrink-0 flex-col items-start justify-start gap-4 flex-grow-1 text-left"},he=["innerHTML"],ke={key:1,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap"},ge={class:"flex items-center h-8 gap-2 self-stretch w-full text-xs font-medium text-left"},Se={key:0,class:"flex gap-2"},Ie={key:1,class:"flex gap-2"},Ce={class:"flex gap-2 items-center justify-between w-full"},Te=["data-index","data-id","onClick"],$e={class:"flex w-available overflow-clip items-end"},qe=N({__name:"Tv",setup(ze){const I=R(),{data:l}=ce({path:I.fullPath,keepForever:!0});U(()=>{var a,t,n,o;(t=(a=l.value)==null?void 0:a.color_palette)!=null&&t.cover&&$((o=(n=l.value)==null?void 0:n.color_palette)==null?void 0:o.cover),setTimeout(()=>{const c=document.querySelector(".focusable");c&&c.focus()},100)}),G(l,a=>{var t,n;(t=a==null?void 0:a.color_palette)!=null&&t.cover&&$((n=a==null?void 0:a.color_palette)==null?void 0:n.cover),setTimeout(()=>{const o=document.querySelector(".focusable");o&&o.focus()},100)});const C=q(),M=q();Y(()=>{setTimeout(()=>{const a=document.querySelector(".focusable");a&&a.focus()},100)});function D(a){var c;const t=a.target,n=((c=C.value)==null?void 0:c.getAttribute("data-index"))??0,o=t.querySelector(`[data-index="${n}"] .focusable`);o&&o.focus()}function E(a){var c;const t=a.target;C.value=t,t&&t.scrollIntoView({behavior:"smooth",block:"center"});const n=(c=t.closest("[data-id]"))==null?void 0:c.getAttribute("data-id"),o=t.querySelector(`[data-index="${n}"] .focusable`);o&&o.focus()}function H(a){var n,o;const t=a.target;if(a.key==="ArrowUp"){const d=((n=t.closest("ion-item"))==null?void 0:n.previousSibling).querySelector(".focusable");d&&(d.focus(),d.scrollIntoView({behavior:"smooth",block:"center"}))}else if(a.key==="ArrowDown"){const d=((o=t.closest("ion-item"))==null?void 0:o.nextSibling).querySelector(".focusable");d&&(d.focus(),d.scrollIntoView({behavior:"smooth",block:"center"}))}}function A(){re(I.fullPath)}function K(a){var t;k.value||A(),ie.playTrack(a,((t=l.value)==null?void 0:t.tracks)??[]),ne()}return(a,t)=>(f(),z(e(oe),null,{default:i(()=>[s(e(J),{fullscreen:!0},{default:i(()=>{var n,o,c,d;return[(f(),b("div",{key:(n=e(l))==null?void 0:n.id,class:"w-full h-full absolute left-0 top-0 bg-[#131314] pointer-events-none -z-10",style:O(e(F)?`--color-focus: ${e(F)}`:"")},[u("div",xe,[u("img",{class:"w-available h-available absolute left-[-0.39px] top-[-0.39px] opacity-40 object-cover object-center",src:`${(o=e(Q))==null?void 0:o.serverBaseUrl}${((c=e(l))==null?void 0:c.backdrop)??((d=e(l))==null?void 0:d.cover)}`,alt:""},null,8,we),t[5]||(t[5]=u("div",{class:"w-[150vw] h-[150vw] absolute left-[-30%] bottom-[-50%]",style:{background:`radial-gradient(
                closest-side,
                rgba(19, 19, 20, 0.1) 0%,
                rgba(19, 19, 20, 1) 70.73974609375%
              )`}},null,-1))])],4)),s(e(L),null,{default:i(()=>[s(e(g),{class:"ion-align-items-end"},{default:i(()=>[s(e(v),{size:"3"},{default:i(()=>{var p,r,_,m,x,w,y,T;return[u("div",ve,[s(B,{data:e(l),alt:(p=e(l))==null?void 0:p.name,class:"w-auto h-full aspect-square"},null,8,["data","alt"])]),(r=e(l))!=null&&r.name?(f(),b("div",ye,[e(l).name.length>50?(f(),b("div",{key:0,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap",innerHTML:e(W)(((_=e(l))==null?void 0:_.name)??"Songs you like","text-xs line-clamp-1")},null,8,he)):(f(),b("p",ke,h((m=e(l))==null?void 0:m.name),1)),u("div",ge,[(x=e(l))!=null&&x.type?(f(),b("span",Se,[u("span",null,h((w=e(l))==null?void 0:w.type.replace(/s$/u,"").toTitleCase()),1)])):S("",!0),(y=e(l))!=null&&y.tracks?(f(),b("span",Ie,[t[6]||(t[6]=u("span",null,"â€¢",-1)),u("span",null,h((T=e(l))==null?void 0:T.tracks.length)+" "+h(a.$t("tracks")),1)])):S("",!0)]),u("div",Ce,[s(V,{data:e(l)},null,8,["data"]),s(de,{data:e(l),class:"w-12 h-12 ml-auto"},null,8,["data"])])])):S("",!0)]}),_:1}),s(e(v),{ref_key:"scrollContainer",ref:M,size:"6",tabindex:"0",class:"w-full h-available overflow-auto scroll-smooth",onFocus:t[4]||(t[4]=p=>D(p))},{default:i(()=>[s(e(X),{mode:"md",lines:"none"},{default:i(()=>{var p;return[(f(!0),b(Z,null,ee((p=e(l))==null?void 0:p.tracks,(r,_)=>(f(),z(e(te),{key:r.id,tabindex:"-1",mode:"md",class:"group/track focus-within:bg-white/4 rounded-md overflow-clip"},{default:i(()=>[s(e(L),null,{default:i(()=>[s(e(g),{"data-index":_,"data-id":r.id,tabindex:"-1",class:"items-center !rounded-md !overflow-clip"},{default:i(()=>[s(e(v),{size:"2",tabindex:"-1"},{default:i(()=>[u("button",{tabindex:"0","data-index":_,"data-id":r.id,class:"focusable flex justify-center w-full aspect-video focus:outline outline-focus outline-2 outline-offset-2 mr-2 overflow-clip",onFocus:t[0]||(t[0]=m=>E(m)),onClick:m=>K(r)},[s(B,{data:r,alt:r.name,class:"w-auto h-full aspect-square"},null,8,["data","alt"])],40,Te)]),_:2},1024),s(e(v),{size:"8",tabindex:"-1",class:"my-auto mt-2"},{default:i(()=>[s(e(ae),{tabindex:"-1"},{default:i(()=>{var m,x,w;return[u("div",$e,[u("div",{class:se(["flex items-center justify-center h-full aspect-square overflow-clip transition-width duration-200",{"w-0":((m=e(k))==null?void 0:m.id)!==r.id,"w-6 mr-1":((x=e(k))==null?void 0:x.id)===r.id}])},[s(pe,{playing:e(le)},null,8,["playing"])],2),s(be,{playing:!!((w=e(k))!=null&&w.id),text:r.name,class:"!w-[calc(100%-30px)] text-auto-12 children:leading-none w-available overflow-clip"},null,8,["playing","text"])]),s(me,{id:r.id,data:r.artist_track,type:"artists",suffix:"track",onKeydown:[t[1]||(t[1]=j(P(()=>{},["prevent"]),["up"])),t[2]||(t[2]=j(P(()=>{},["prevent"]),["down"]))],onKeyup:t[3]||(t[3]=y=>H(y))},null,8,["id","data"])]}),_:2},1024)]),_:2},1024),s(e(v),{size:"2",tabindex:"-1",class:"opacity-0 group-focus-within/track:opacity-100 -ml-2"},{default:i(()=>[s(e(g),{tabindex:"-1",class:"flex flex-nowrap"},{default:i(()=>[s(V,{data:r},null,8,["data"]),s(fe,{label:"",tabindex:"0",onclick:()=>{},class:"!bg-transparent mr-2"},{default:i(()=>[s(ue,{icon:"menuDotsHorizontal",class:"text-white"})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1032,["data-index","data-id"])]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1},512)]),_:1})]),_:1})]}),_:1})]),_:1}))}}),Ze=_e(qe,[["__scopeId","data-v-b04b2633"]]);export{Ze as default};
