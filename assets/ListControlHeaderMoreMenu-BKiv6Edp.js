import{Ac as C,Bs as W,Dc as q,Gc as x,Gs as F,Js as Q,Ks as B,Na as L,Nc as G,Ns as O,Oc as k,Ps as J,Qs as w,Rc as S,Ws as h,_c as Z,ac as X,cc as R,ec as P,fc as Y,gc as ee,hc as E,pc as te,vc as $}from"./index-DuecWh8q.js";import{_ as A,a as _,c as ae,d as j,f as le,g as ne,h as re,i as f,l as se,m as oe,n as I,o as ue,p as V,r as ie,s as ce,t as de,u as ve}from"./use-text-value-CZlQHyA_.js";import{a as pe,c as m,r as K,s as fe,t as D}from"./render-1SCBX0wV.js";import{t as H}from"./MoooomIcon-BMyo-Lja.js";O();function me({container:a,accept:c,walk:b,enabled:i}){q(()=>{let v=a.value;if(!v||i!==void 0&&!i.value)return;let p=pe(a);if(!p)return;let e=Object.assign(r=>c(r),{acceptNode:c}),s=p.createTreeWalker(v,NodeFilter.SHOW_ELEMENT,e,!1);for(;s.nextNode();)b(s.currentNode)})}O();var be=(a=>(a[a.Open=0]="Open",a[a.Closed=1]="Closed",a))(be||{}),ge=(a=>(a[a.Pointer=0]="Pointer",a[a.Other=1]="Other",a))(ge||{});function Ie(a){requestAnimationFrame(()=>requestAnimationFrame(a))}var z=Symbol("MenuContext");function N(a){let c=X(z,null);if(c===null){let b=new Error(`<${a} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(b,N),b}return c}var ye=P({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(a,{slots:c,attrs:b}){let i=S(1),v=S(null),p=S(null),e=S([]),s=S(""),r=S(null),y=S(1);function M(t=n=>n){let n=r.value!==null?e.value[r.value]:null,l=le(t(e.value.slice()),g=>m(g.dataRef.domRef)),u=n?l.indexOf(n):null;return u===-1&&(u=null),{items:l,activeItemIndex:u}}let o={menuState:i,buttonRef:v,itemsRef:p,items:e,searchQuery:s,activeItemIndex:r,activationTrigger:y,closeMenu:()=>{i.value=1,r.value=null},openMenu:()=>i.value=0,goToItem(t,n,l){let u=M(),g=ie(t===I.Specific?{focus:I.Specific,id:n}:{focus:t},{resolveItems:()=>u.items,resolveActiveIndex:()=>u.activeItemIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.disabled});s.value="",r.value=g,y.value=l??1,e.value=u.items},search(t){let n=s.value!==""?0:1;s.value+=t.toLowerCase();let l=(r.value!==null?e.value.slice(r.value+n).concat(e.value.slice(0,r.value+n)):e.value).find(g=>g.dataRef.textValue.startsWith(s.value)&&!g.dataRef.disabled),u=l?e.value.indexOf(l):-1;u===-1||u===r.value||(r.value=u,y.value=1)},clearSearch(){s.value=""},registerItem(t,n){let l=M(u=>[...u,{id:t,dataRef:n}]);e.value=l.items,r.value=l.activeItemIndex,y.value=1},unregisterItem(t){let n=M(l=>{let u=l.findIndex(g=>g.id===t);return u!==-1&&l.splice(u,1),l});e.value=n.items,r.value=n.activeItemIndex,y.value=1}};return ve([v,p],(t,n)=>{var l;o.closeMenu(),ne(n,oe.Loose)||(t.preventDefault(),(l=m(v))==null||l.focus())},h(()=>i.value===0)),ee(z,o),ce(h(()=>fe(i.value,{0:_.Open,1:_.Closed}))),()=>{let t={open:i.value===0,close:o.closeMenu};return D({ourProps:{},theirProps:a,slot:t,slots:c,attrs:b,name:"Menu"})}}}),Me=P({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(a,{attrs:c,slots:b,expose:i}){var v;let p=(v=a.id)!=null?v:`headlessui-menu-button-${A()}`,e=N("MenuButton");i({el:e.buttonRef,$el:e.buttonRef});function s(o){switch(o.key){case f.Space:case f.Enter:case f.ArrowDown:o.preventDefault(),o.stopPropagation(),e.openMenu(),R(()=>{var t;(t=m(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(I.First)});break;case f.ArrowUp:o.preventDefault(),o.stopPropagation(),e.openMenu(),R(()=>{var t;(t=m(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(I.Last)});break}}function r(o){switch(o.key){case f.Space:o.preventDefault();break}}function y(o){a.disabled||(e.menuState.value===0?(e.closeMenu(),R(()=>{var t;return(t=m(e.buttonRef))==null?void 0:t.focus({preventScroll:!0})})):(o.preventDefault(),e.openMenu(),Ie(()=>{var t;return(t=m(e.itemsRef))==null?void 0:t.focus({preventScroll:!0})})))}let M=se(h(()=>({as:a.as,type:c.type})),e.buttonRef);return()=>{var o;let t={open:e.menuState.value===0},{...n}=a,l={ref:e.buttonRef,id:p,type:M.value,"aria-haspopup":"menu","aria-controls":(o=m(e.itemsRef))==null?void 0:o.id,"aria-expanded":e.menuState.value===0,onKeydown:s,onKeyup:r,onClick:y};return D({ourProps:l,theirProps:n,slot:t,attrs:c,slots:b,name:"MenuButton"})}}}),Se=P({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(a,{attrs:c,slots:b,expose:i}){var v;let p=(v=a.id)!=null?v:`headlessui-menu-items-${A()}`,e=N("MenuItems"),s=S(null);i({el:e.itemsRef,$el:e.itemsRef}),me({container:h(()=>m(e.itemsRef)),enabled:h(()=>e.menuState.value===0),accept(t){return t.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:t.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(t){t.setAttribute("role","none")}});function r(t){var n;switch(s.value&&clearTimeout(s.value),t.key){case f.Space:if(e.searchQuery.value!=="")return t.preventDefault(),t.stopPropagation(),e.search(t.key);case f.Enter:if(t.preventDefault(),t.stopPropagation(),e.activeItemIndex.value!==null){let l=e.items.value[e.activeItemIndex.value];(n=m(l.dataRef.domRef))==null||n.click()}e.closeMenu(),V(m(e.buttonRef));break;case f.ArrowDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(I.Next);case f.ArrowUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(I.Previous);case f.Home:case f.PageUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(I.First);case f.End:case f.PageDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(I.Last);case f.Escape:t.preventDefault(),t.stopPropagation(),e.closeMenu(),R(()=>{var l;return(l=m(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})});break;case f.Tab:t.preventDefault(),t.stopPropagation(),e.closeMenu(),R(()=>re(m(e.buttonRef),t.shiftKey?j.Previous:j.Next));break;default:t.key.length===1&&(e.search(t.key),s.value=setTimeout(()=>e.clearSearch(),350));break}}function y(t){switch(t.key){case f.Space:t.preventDefault();break}}let M=ue(),o=h(()=>M!==null?(M.value&_.Open)===_.Open:e.menuState.value===0);return()=>{var t,n;let l={open:e.menuState.value===0},{...u}=a,g={"aria-activedescendant":e.activeItemIndex.value===null||(t=e.items.value[e.activeItemIndex.value])==null?void 0:t.id,"aria-labelledby":(n=m(e.buttonRef))==null?void 0:n.id,id:p,onKeydown:r,onKeyup:y,role:"menu",tabIndex:0,ref:e.itemsRef};return D({ourProps:g,theirProps:u,slot:l,attrs:c,slots:b,features:K.RenderStrategy|K.Static,visible:o.value,name:"MenuItems"})}}}),he=P({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(a,{slots:c,attrs:b,expose:i}){var v;let p=(v=a.id)!=null?v:`headlessui-menu-item-${A()}`,e=N("MenuItem"),s=S(null);i({el:s,$el:s});let r=h(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===p:!1),y=de(s),M=h(()=>({disabled:a.disabled,get textValue(){return y()},domRef:s}));Y(()=>e.registerItem(p,M)),te(()=>e.unregisterItem(p)),q(()=>{e.menuState.value===0&&r.value&&e.activationTrigger.value!==0&&R(()=>{var d,T;return(T=(d=m(s))==null?void 0:d.scrollIntoView)==null?void 0:T.call(d,{block:"nearest"})})});function o(d){if(a.disabled)return d.preventDefault();e.closeMenu(),V(m(e.buttonRef))}function t(){if(a.disabled)return e.goToItem(I.Nothing);e.goToItem(I.Specific,p)}let n=ae();function l(d){n.update(d)}function u(d){n.wasMoved(d)&&(a.disabled||r.value||e.goToItem(I.Specific,p,0))}function g(d){n.wasMoved(d)&&(a.disabled||r.value&&e.goToItem(I.Nothing))}return()=>{let{disabled:d,...T}=a,U={active:r.value,disabled:d,close:e.closeMenu};return D({ourProps:{id:p,ref:s,role:"menuitem",tabIndex:d===!0?void 0:-1,"aria-disabled":d===!0?!0:void 0,onClick:o,onFocus:t,onPointerenter:l,onMouseenter:l,onPointermove:u,onMousemove:u,onPointerleave:g,onMouseleave:g},theirProps:{...b,...T},slot:U,attrs:b,slots:c,name:"MenuItem"})}}});O();var xe={class:"relative flex flex-1 items-center justify-start gap-2 text-base font-semibold"},Re={class:"flex flex-1 w-full whitespace-nowrap"},ke=P({__name:"ListControlHeaderMoreMenu",props:{items:{type:Array,required:!0},className:{type:String,required:!1,default:""},title:{type:String,required:!1,default:"More options"}},setup(a){return(c,b)=>(E(),B(x(ye),{as:"div",class:"relative select-none z-[150]"},{default:k(()=>[w(x(Me),{"aria-label":c.$t(a.title),class:C({[x(L)]:!0})},{default:k(()=>[$(c.$slots,"button",{},()=>[w(H,{icon:"menuDotsHorizontal"})])]),_:3},8,["aria-label","class"]),w(J,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"scale-95 transform opacity-0","enter-to-class":"scale-100 transform opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"scale-100 transform opacity-100","leave-to-class":"scale-95 transform opacity-0"},{default:k(()=>[w(x(Se),{class:C([a.className,"absolute z-10 m-2 ml-8 flex w-min origin-top-right -translate-x-full flex-col gap-2 rounded-xl p-1 shadow-lg bg-surface-3 dark:bg-surface-1 border-1 border-surface-8/11"])},{default:k(()=>[$(c.$slots,"default"),(E(!0),Q(W,null,Z(a.items,(i,v)=>(E(),B(x(he),{key:v,class:C([x(L).replace("sm:bg-surface-12/2",""),"w-60 min-w-60 !flex"]),as:"div",onClick:i.onclick},{default:k(()=>[F("span",xe,[w(H,{icon:i.icon,title:i.title},null,8,["icon","title"]),F("span",Re,G(c.$t(i.title)),1)])]),_:2},1032,["class","onClick"]))),128))]),_:3},8,["class"])]),_:3})]),_:3}))}}),De=ke;export{Me as n,he as r,De as t};
