import{$ as L,W as k,ab as w,f as E,aG as K,w as d,a6 as M,h as f,b as I,a0 as u,o as m,z as S,aX as x,q as C,c as B,t as D,m as F,F as N}from"./vue-ionic-Db_NiJFp.js";import{q as v,g as O,a as V,b as H}from"./routerHelper-CYxjoUvJ.js";import{r as P}from"./index-C7Gmekvn.js";const W={key:0,class:"grid w-available h-available place-items-center"},G=L({__name:"NMComponent",props:{path:{type:String,required:!1,default:void 0},options:{type:Object,required:!1,default:()=>({keepForever:!0,queryKey:v()})}},setup(y){const r=y,s=r.options.queryKey??v(),h=O({queryKey:s,path:r.path}),{data:t,isLoading:g}=V({queryKey:s,path:r.path}),{data:q,mutate:i}=H({queryKey:s,homeData:t}),o=k(),c=w();function l(){if(!t.value||!o.value)return;const a=t.value.filter(n=>{var e;return((e=n==null?void 0:n.update)==null?void 0:e.when)==="pageLoad"})??[];i(a)}function _(){if(!t.value||!o.value)return;const a=t.value.filter(n=>{var e;return((e=n==null?void 0:n.update)==null?void 0:e.when)==="online"})??[];i(a)}function p(a){if(!t.value||!o.value)return;const n=t.value.filter(e=>(e==null?void 0:e.id)===a.detail.id)??[];i(n)}return E(()=>{document.addEventListener("mutateId",p),t.value&&o.value&&l()}),K(()=>{document.removeEventListener("mutateId",p)}),d(o,a=>{a&&_()}),d(t,a=>{a&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),P.beforeEach(a=>{!t.value||a.name!=="Home"&&a.name!=="Libraries"&&a.name!=="Music Start"||o.value&&l()}),M(()=>{!t.value||c.name!=="Home"&&c.name!=="Libraries"&&c.name!=="Music Start"||o.value&&l()}),(a,n)=>u(g)?(m(),f("div",W,[S(u(x),{name:"crescent",class:"ion-padding"})])):!u(h)||!u(o)?(m(!0),f(N,{key:1},C(u(q)??u(t)??[],(e,b)=>(m(),B(D(e==null?void 0:e.component),F({key:e.id,index:b,ref_for:!0},e.props),null,16,["index"]))),128)):I("",!0)}});export{G as _};
