import{Dt as $,Et as A,K as N,Q as V,S as O,T as z,Y as D,_t as k,bt as U,c as Y,j,q as K,w as P}from"./i18n-DBb78QAI.js";import{Un as Q,ht as G,v as J}from"./index-A9ZXfM_l.js";Y();var W=["data-music"],X=j({__name:"ScrollContainer",props:{autoHide:{type:Boolean,default:!1},className:{type:String,required:!1,default:""},static:{type:Boolean,default:!0},frame:{type:Boolean,default:!1}},emits:["scroll"],setup(d){const m=d,H=U();function R(e){const t=e;H.value=t??void 0,m.static&&(Q.value=t??void 0)}const i=k(),s=k();let o=null,l=null,a=null,c=null,v=!1,n=null;const f={containerH:0,scrollH:0,barH:0};function p(){const e=s.value;!n||!e||(f.containerH=n.clientHeight,f.scrollH=n.scrollHeight,f.barH=e.clientHeight)}function _(){const e=s.value;e&&(e.style.opacity="1")}function y(){if(v)return;const e=s.value;e&&(e.style.opacity="0")}function C(){l!==null&&clearTimeout(l),l=window.setTimeout(y,1200)}function h(){const e=i.value;if(!n||!e)return;const{containerH:t,scrollH:r,barH:u}=f;if(r<=t){y();return}const E=n.scrollTop,S=Math.ceil(t/r*t),I=u-S,T=r-t,M=T>0?E/T:0;e.style.height=`${S}px`,e.style.translate=`0 ${M*I}px`,_(),C()}function q(){o===null&&(o=requestAnimationFrame(()=>{o=null,h()}))}function L(){v=!0,_()}function w(){v=!1,C()}function x(e){e.preventDefault(),document.addEventListener("mousemove",g),document.addEventListener("mouseup",b)}function b(){document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",b)}function g(e){e.preventDefault();const t=i.value,r=s.value;if(!t||!r||!n)return;const u=r.getBoundingClientRect(),E=Math.min(Math.max(0,e.clientY-u.top),u.height)-t.clientHeight/2;n.scrollTop=(n.scrollHeight-n.clientHeight)*(E/(u.height-t.clientHeight))}function F(){B();const e=H.value,t=i.value;!e||!t||(n=e,e.scrollTop=0,p(),requestAnimationFrame(()=>{p(),h()}),a=new ResizeObserver(()=>{p(),h()}),a.observe(e),e.firstElementChild&&a.observe(e.firstElementChild),c=q,e.addEventListener("scroll",c,{passive:!0}),e.addEventListener("pointerenter",L),e.addEventListener("pointerleave",w),t.addEventListener("mousedown",x))}function B(){o!==null&&(cancelAnimationFrame(o),o=null),l!==null&&(clearTimeout(l),l=null),a&&(a.disconnect(),a=null),n&&(c&&n.removeEventListener("scroll",c),n.removeEventListener("pointerenter",L),n.removeEventListener("pointerleave",w)),n=null,c=null;const e=i.value;e&&e.removeEventListener("mousedown",x),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",b)}return N(()=>{m.static||F()}),K(()=>{m.static||B()}),(e,t)=>(D(),z("div",{ref:R,class:$([{"group/scrollContainer":!d.frame,"group/scrollContainer-frame":d.frame},"flex flex-1 h-available z-0 isolate overflow-auto will-change-scroll w-full flex-col scrollbar-none scroll-container text-surface-12"]),"data-music":A(G),tabindex:"1",onScroll:t[0]||(t[0]=r=>e.$emit("scroll",r))},[V(e.$slots,"default",{},void 0,!0),d.static?P("",!0):(D(),z("div",{key:0,ref_key:"refBar",ref:s,class:"group/bar absolute top-2 mr-1 z-10 right-0 bottom-2 hidden rounded-full border-r-2 border-l-4 border-transparent w-3.5 hover:bg-surface-12/6 sm:flex transition-opacity duration-200","data-scrollbar":"",style:{opacity:"0"}},[O("span",{ref_key:"refHandle",ref:i,class:"scrollbar-handle absolute top-0 z-10 h-available right-0 bottom-0 hidden rounded-full border-r-2 border-l-4 border-transparent w-2.5 bg-surface-12/11 sm:flex","data-scrollbar":"",draggable:"true"},null,512)],512))],42,W))}}),te=J(X,[["__scopeId","data-v-8c3c99df"]]);export{te as t};
