import{r as L,$ as H}from"./index-dhF1HRpl.js";import{$,d as f,f as M,aG as S,h as E,o as g,a0 as C,v as u,a as T,c as z,T as N,j as b,G as q}from"./vue-ionic-Db_NiJFp.js";const A=["data-music"],G=$({__name:"ScrollContainer",props:{autoHide:{type:Boolean,default:!1},className:{type:String,required:!1,default:""},static:{type:Boolean,default:!0},frame:{type:Boolean,default:!1}},emits:["scroll"],setup(n){const l=f(),i=f(),o=f(!1),m=f();function p(){const t=l.value,a=i.value,e=m.value;if(!t||!e||!a)return;e.scrollTop=0;const r=()=>{var c;if(!e)return;const s=Math.ceil(e.clientHeight/e.scrollHeight*e.clientHeight);t.style.height=`${s}px`;const d=e.scrollTop/e.scrollHeight;t.style.top=`${d*100}%`,((c=e.firstElementChild)==null?void 0:c.scrollHeight)>s||e.scrollHeight>s?o.value=!0:o.value=!1,requestAnimationFrame(r)};requestAnimationFrame(r),t.addEventListener("mousedown",y)}function v(){document.removeEventListener("mouseup",v),document.removeEventListener("mousemove",h)}function y(t){t.preventDefault(),document.addEventListener("mouseup",v),document.addEventListener("mousemove",h)}function w(t,a,e){return Math.min(Math.max(t,a),e)}function h(t){var d,c;t.preventDefault();const a=l.value,e=i.value,r=m.value;if(!a||!r||!e||(c=(d=t.target)==null?void 0:d.dataset)!=null&&c.scrollbar)return;const s=w(0,t.clientY-e.getBoundingClientRect().top,e.clientHeight)-a.clientHeight/2;r.scrollTop=(r.scrollHeight-r.clientHeight)*(s/(e.clientHeight-a.clientHeight))}function B(){const t=l.value,a=i.value,e=m.value;!t||!e||!a||(t.removeEventListener("mousedown",y),document.removeEventListener("mouseup",v),document.removeEventListener("mousemove",h))}M(()=>{p()}),S(()=>{B()}),L.afterEach(p);function k(){o.value=!0}function x(){o.value=!1}return(t,a)=>(g(),E("div",{ref_key:"scrollContainerElement",ref:m,class:u(["flex flex-1 h-available music-showing:h-[calc(100vh-7rem)] z-0 isolate overflow-auto will-change-scroll w-full flex-col scrollbar-none pb-2 scroll-container min-h-[91.2%]",{"group/scrollContainer":!n.frame,"group/scrollContainer-frame":n.frame}]),"data-music":C(H),onScroll:a[0]||(a[0]=e=>t.$emit("scroll",e)),onMousemove:k,onMouseleave:x},[T(t.$slots,"default"),n.static?(g(),z(N,{key:0,to:"body"},[b("div",{ref_key:"refBar",ref:i,"data-scrollbar":"",style:q(`position: ${n.static?"fixed":"absolute"}`),class:u([{"opacity-100":o.value,"opacity-0 pointer-events-none":!o.value,"top-16 mr-1":n.static,"top-0 mr-1":!n.static,"bottom-20":C(H)==="showing",className:n.className},"right-0 bottom-0 mt-2 mb-2 hidden rounded-full border-r-2 border-l-4 border-transparent w-3.5 group-active/scrollContainer-frame:bg-auto-2/9 hover:bg-auto-2/9 sm:flex"])},[b("span",{ref_key:"refHandle",ref:l,draggable:"true","data-scrollbar":"",class:u([{"opacity-0 group-hover/scrollContainer-frame:opacity-100":n.autoHide&&!o.value,"!transition-none":!o.value},"absolute w-2 rounded-full transition-all right-[1px] bg-auto-12/11 active:opacity-100 [transition-duration:75ms] [animation-duration:75ms] active:[transition-duration:0ms] active:[animation-duration:0ms]"])},null,2)],6)])):(g(),E("div",{key:1,ref_key:"refBar",ref:i,"data-scrollbar":"",class:u(["absolute top-2 mr-1 z-10 h-available right-0 bottom-6 hidden rounded-full border-r-2 border-l-4 border-transparent w-3.5 hover:bg-auto-2/9 sm:flex",{"opacity-100":o.value,"opacity-0 pointer-events-none":!o.value}])},[b("span",{ref_key:"refHandle",ref:l,draggable:"true","data-scrollbar":"",class:u([{"opacity-0 group-hover/scrollContainer:opacity-100 group-active/scrollContainer:bg-auto-2/9":!n.static&&n.autoHide,"!transition-none":!o.value},"absolute w-2 rounded-full transition-all right-[1px] bg-auto-12/11 active:opacity-100 [transition-duration:75ms] [animation-duration:75ms] active:[transition-duration:0ms] active:[animation-duration:0ms]"])},null,2)],2))],42,A))}});export{G as _};
