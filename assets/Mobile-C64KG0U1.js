import{Bt as q,Gt as g,I,Ln as o,M as A,Mt as R,Rn as T,Rt as s,T as V,Tt as $,Vt as L,an as N,cn as n,i as P,kn as p,mt as j,qt as E,u as O,un as G,xn as S,yn as _,zt as x}from"./index-CJ3av9Nr.js";import"./dist-D2KbJ9bQ.js";import"./esm-BuMAAPtG.js";import"./esm-CHsjyJtd.js";import"./dist-C-vUBecy.js";import"./focus-visible-DPfccteu.js";import"./index5-DoEihQ4z.js";import"./client-wU_plCmB.js";import"./ionic-global-Dr2Ll5pB.js";import"./hardware-back-button-CHEiPn5H.js";import"./index3-DyhEBoCL.js";import"./helpers-WTIhTost.js";import"./index6-3cPFhgM2.js";import"./index8-_cfIjXvh.js";import"./keyboard-D6ipGNt8.js";import"./index2-DvhiMdzo.js";import"./ios.transition-CXaFvcuP.js";import"./keyboard2-D5yf7Lat.js";import"./md.transition-DZtzVTV5.js";import"./dir-DrmvtQ_Q.js";import"./basecomponent-DVHu1DCt.js";import"./classnames-C7QsyfAI.js";import"./button-f9Fw4Iaj.js";import"./baseicon-DamtKEYd.js";import"./times-bln7PGWn.js";import{l as W,m as c,o as y,p as d}from"./ui-BSE92Oro.js";import"./client-CPKuC57Q.js";import{v as D,x as J}from"./currentServer-DQ7i6d_b.js";import"./config-BZ-AEJ_J.js";import"./core-xCqnf7Bb.js";import"./esm-DLDUH9kj.js";import"./global-Cds4NWlw.js";import"./esm-DcigU03k.js";import"./bundle-mjs-BeXi21kK.js";import"./user-Creb9Pvq.js";import"./serverClient-Jb_BGG0d.js";import{t as K}from"./router-c8xd29EB.js";import"./utils-Cpofav5o.js";import"./useBaseQuery-D_SazeaR.js";import"./useInfiniteServerClient-D_hphnUM.js";import"./SocketClient-KaSDTymP.js";import"./useQueryClient-C-VM74mz.js";import"./useQuery-CR36PjxI.js";import"./apiClient-2-R0Hhnf.js";import"./notifications-BNlqfMjP.js";import"./utils-DY83qGh1.js";import"./deviceInfo-CVfVbLsA.js";import"./auth-BpTUxzzw.js";import"./musicPlaylists-COlXsUrd.js";import"./esm-D3NOV4Cc.js";import"./contextMenuItems-Ci0VKSAK.js";import"./_plugin-vue_export-helper-pDp7unP0.js";import"./AppLogoSquare-CX-E5xQc.js";import{t as Q}from"./MoooomIcon-C2SwTMe7.js";import"./DropdownMenu-Dk9B9-Ms.js";import"./dist-DpPFups2.js";import"./fileupload-DC2frNAp.js";import{t as U}from"./useServerClient-DftYwK_V.js";import"./Button-B0as3fug.js";import"./CoverImage-3Yd8OnC5.js";import"./MusicButton-CsRZT_rH.js";import"./BannerButton-ovjfP-l1.js";import"./MediaLikeButton-DlxHvzv6.js";import"./PlayerIcon-fqXue5Ol.js";import{t as X}from"./Marquee-BRg3kZGQ.js";import"./Modal-C8jzfBCN.js";import"./BigPlayButton-DUjBHOtM.js";import"./EqSpinner-BVEJIgKv.js";import{t as Y}from"./NotFound-ByvOapu3.js";import"./ShareButton-CNes20wT.js";import"./ClickUploadModal-DlOYtlN3.js";import{i as Z,n as tt,r as et,t as ot}from"./TrackRow-CsxVrPIq.js";$();A();var rt={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},at={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},lt=E({__name:"Mobile",setup(it){const k=I(),{data:t,isError:B}=U({path:k.fullPath,data:{version:"lolomo"}}),z=p(null),b=p(),i=p("");_(t,e=>{D(e?.name??null),u(e?.tracks??[],c.value,d.value,i.value),y(e?.color_palette?.cover)}),_(d,e=>{u(t.value?.tracks??[],c.value,e,i.value)}),_(c,e=>{u(t.value?.tracks??[],e,d.value,i.value)}),_(i,e=>{u(t.value?.tracks??[],c.value,d.value,e)});function u(e,a,l,r){const C=J(e??[],a,l,W);r===""?b.value=C:b.value=C?.filter(w=>w.name?.toLowerCase().includes(r?.toLowerCase?.())||w.artist_track?.some(F=>F.name.toLowerCase().includes(r?.toLowerCase?.()))||w.album_track?.[0]?.name.toLowerCase().includes(r?.toLowerCase?.()))??[]}N(()=>{u(t?.value?.tracks??[],c.value,d.value,i.value),t.value?.color_palette?.cover&&y(t.value?.color_palette?.cover)}),V(()=>{u(t?.value?.tracks??[],c.value,d.value,i.value),t.value?.color_palette?.cover&&y(t.value?.color_palette?.cover)});function H(){K.back()}const f=p(!1),M=p(!1),m=p(),h=p();function v(){const l=j("capacitor")?88:64,r=m.value?.$el?.getBoundingClientRect().top;if(!r){requestAnimationFrame(v);return}if(f.value=r<=170,M.value=r<=160,window.CSS.supports("container-type","scroll-state")){requestAnimationFrame(v);return}r===l?(m.value?.$el?.classList.add("!bg-focus"),m.value?.$el?.firstChild?.classList.add("!bg-surface-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")):(m.value?.$el?.classList.remove("!bg-focus"),m.value?.$el?.firstChild?.classList.remove("!bg-surface-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")),requestAnimationFrame(v)}return _(h,()=>{requestAnimationFrame(v)}),(e,a)=>(n(),x(o(O),null,{default:S(()=>[g(o(P),{ref_key:"container",ref:h,"scroll-events":!0,onIonScroll:v},{default:S(()=>[o(B)&&!o(t)?(n(),x(Y,{key:0})):!o(k).params.id||o(k).params.id&&o(t)?.id===o(k).params.id?(n(),L("div",{key:1,ref_key:"main",ref:z,class:"flex flex-col h-auto overflow-x-clip w-available sm:rounded-2xl -mt-6 text-surface-12"},[g(et,{data:o(t)},null,8,["data"]),s("div",rt,[a[2]||(a[2]=s("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),s("div",{id:"navbar",class:T([{"opacity-0 pointer-events-none":!f.value,"opacity-100 pointer-events-auto":f.value},"fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-surface-11 dark:bg-surface-1 top-0 pt-4 transition-all duration-200"])},[a[1]||(a[1]=s("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-all duration-200 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),s("button",{class:"z-30 flex h-10 w-11 items-center justify-center rounded-md",onClick:H},[g(Q,{icon:"arrowLeft"})]),s("div",{id:"navText",class:T([{"opacity-0 pointer-events-none":!f.value,"opacity-100 pointer-events-auto":f.value},"pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-all duration-200 w-[70%] overflow-clip text-xl"])},[g(X,{text:o(t)?.name},null,8,["text"])],2)],2),(n(),x(Z,{key:o(t)?.id,data:o(t),filter:i.value,onFilterChange:a[0]||(a[0]=l=>i.value=l)},null,8,["data","filter"])),s("div",at,[(n(),x(tt,{key:o(t)?.id,ref_key:"sortHeader",ref:m})),(n(!0),L(R,null,G(b.value,(l,r)=>(n(),x(ot,{key:l.id+l?.favorite,data:l,"display-list":b.value,index:r},null,8,["data","display-list","index"]))),128))])])],512)):q("",!0)]),_:1},512)]),_:1}))}}),Te=lt;export{Te as default};
