import{Bt as q,Gt as g,I,Ln as r,M as A,Mt as R,Rn as T,Rt as s,T as V,Tt as $,Vt as L,an as N,cn as n,i as P,kn as u,mt as j,qt as E,u as O,un as G,xn as S,yn as _,zt as x}from"./index-cywnPOBC.js";import"./dist-yzM0QGvF.js";import"./esm-CsGjMs42.js";import"./esm-D4f7ygqA.js";import"./dist-CG1k-g7C.js";import"./focus-visible-dQviwWa0.js";import"./index5-DWzlHdCO.js";import"./client-D7oxUmH6.js";import"./ionic-global-DCe2g38l.js";import"./hardware-back-button-Bqrrbg0Z.js";import"./index3-bIbYCfqw.js";import"./helpers-BGGXVDsd.js";import"./index6-vUi4VFUZ.js";import"./index8-5IzBz0Dr.js";import"./keyboard-CAPY05Np.js";import"./index2-DsYXeg3E.js";import"./ios.transition-DeZfFnMt.js";import"./keyboard2-CYwkuq6R.js";import"./md.transition-CoCDKCK7.js";import"./dir-VVnELOav.js";import"./basecomponent-Dn_g4DAz.js";import"./classnames-C7QsyfAI.js";import"./button-n8IYfWnY.js";import"./baseicon-DTjMEpRe.js";import{l as W,m as c,o as y,p as d}from"./ui-C0FA7XgL.js";import"./client-TRoQZYEY.js";import{v as D,x as J}from"./currentServer-ns-65dJg.js";import"./config-BZ-AEJ_J.js";import"./core-Byg9KrIc.js";import"./esm-D9ex0nT9.js";import"./global-oyc8MvKQ.js";import"./esm-B2mzPl6v.js";import"./bundle-mjs-BuAB9hD1.js";import"./user-DdN2xDWa.js";import"./serverClient-h83xvsoB.js";import{t as K}from"./router-b6Y7vD7A.js";import"./utils-CfbU6uFB.js";import"./useBaseQuery--g5SyDb6.js";import"./useInfiniteServerClient-DYu8wLRM.js";import"./SocketClient-BXQHVNG_.js";import"./useQueryClient-CeysrMlA.js";import"./useQuery-BSaIeQ43.js";import"./apiClient-cmnl9Hzw.js";import"./notifications-Cig9DoL1.js";import"./utils-D5nhA-44.js";import"./deviceInfo-D74C9RbC.js";import"./auth-Bz7Q9vHJ.js";import"./musicPlaylists-CRSZ6nMQ.js";import"./esm-DZQicoaf.js";import"./contextMenuItems-CnT1Q0_S.js";import"./_plugin-vue_export-helper-pDp7unP0.js";import"./AppLogoSquare-BPMeAXGY.js";import{t as Q}from"./MoooomIcon-DKjYVqpr.js";import"./DropdownMenu-DahWlyk2.js";import"./dist-DxpR9Lgz.js";import{t as U}from"./useServerClient-BCJ_nw8c.js";import"./CoverImage-5Kr6U9m2.js";import"./MusicButton-DNSqRPtJ.js";import"./BannerButton-D551V_yc.js";import"./MediaLikeButton-BxCAAXfp.js";import"./PlayerIcon-Box4yPCR.js";import{t as X}from"./Marquee-D5BdhaYU.js";import"./BigPlayButton-BZO__rjN.js";import"./EqSpinner-C3RZ5e3G.js";import{t as Y}from"./NotFound-Cf7-T-fR.js";import"./ShareButton-D4ftU7kH.js";import{i as Z,n as ee,r as te,t as re}from"./TrackRow-DOJVWnHp.js";$();A();var oe={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},ae={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},le=E({__name:"Mobile",setup(ie){const k=I(),{data:e,isError:B}=U({path:k.fullPath}),z=u(null),b=u(),i=u("");_(e,t=>{D(t?.name??null),p(t?.tracks??[],c.value,d.value,i.value),y(t?.color_palette?.cover)}),_(d,t=>{p(e.value?.tracks??[],c.value,t,i.value)}),_(c,t=>{p(e.value?.tracks??[],t,d.value,i.value)}),_(i,t=>{p(e.value?.tracks??[],c.value,d.value,t)});function p(t,a,l,o){const C=J(t??[],a,l,W);o===""?b.value=C:b.value=C?.filter(w=>w.name?.toLowerCase().includes(o?.toLowerCase?.())||w.artist_track?.some(F=>F.name.toLowerCase().includes(o?.toLowerCase?.()))||w.album_track?.[0]?.name.toLowerCase().includes(o?.toLowerCase?.()))??[]}N(()=>{p(e?.value?.tracks??[],c.value,d.value,i.value),e.value?.color_palette?.cover&&y(e.value?.color_palette?.cover)}),V(()=>{p(e?.value?.tracks??[],c.value,d.value,i.value),e.value?.color_palette?.cover&&y(e.value?.color_palette?.cover)});function H(){K.back()}const f=u(!1),M=u(!1),m=u(),h=u();function v(){const l=j("capacitor")?88:64,o=m.value?.$el?.getBoundingClientRect().top;if(!o){requestAnimationFrame(v);return}if(f.value=o<=170,M.value=o<=160,window.CSS.supports("container-type","scroll-state")){requestAnimationFrame(v);return}o===l?(m.value?.$el?.classList.add("!bg-focus"),m.value?.$el?.firstChild?.classList.add("!bg-surface-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")):(m.value?.$el?.classList.remove("!bg-focus"),m.value?.$el?.firstChild?.classList.remove("!bg-surface-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")),requestAnimationFrame(v)}return _(h,()=>{requestAnimationFrame(v)}),(t,a)=>(n(),x(r(O),null,{default:S(()=>[g(r(P),{ref_key:"container",ref:h,"scroll-events":!0,onIonScroll:v},{default:S(()=>[r(B)&&!r(e)?(n(),x(Y,{key:0})):!r(k).params.id||r(k).params.id&&r(e)?.id===r(k).params.id?(n(),L("div",{key:1,ref_key:"main",ref:z,class:"flex flex-col h-auto overflow-x-clip w-available sm:rounded-2xl -mt-6 text-surface-12"},[g(te,{data:r(e)},null,8,["data"]),s("div",oe,[a[2]||(a[2]=s("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),s("div",{id:"navbar",class:T([{"opacity-0 pointer-events-none":!f.value,"opacity-100 pointer-events-auto":f.value},"fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-surface-11 dark:bg-surface-1 top-0 pt-4 transition-all duration-200"])},[a[1]||(a[1]=s("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-all duration-200 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),s("button",{class:"z-30 flex h-10 w-11 items-center justify-center rounded-md",onClick:H},[g(Q,{icon:"arrowLeft"})]),s("div",{id:"navText",class:T([{"opacity-0 pointer-events-none":!f.value,"opacity-100 pointer-events-auto":f.value},"pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-all duration-200 w-[70%] overflow-clip text-xl"])},[g(X,{text:r(e)?.name},null,8,["text"])],2)],2),(n(),x(Z,{key:r(e)?.id,data:r(e),filter:i.value,onFilterChange:a[0]||(a[0]=l=>i.value=l)},null,8,["data","filter"])),s("div",ae,[(n(),x(ee,{key:r(e)?.id,ref_key:"sortHeader",ref:m})),(n(!0),L(R,null,G(b.value,(l,o)=>(n(),x(re,{key:l.id+l?.favorite,data:l,"display-list":b.value,index:o},null,8,["data","display-list","index"]))),128))])])],512)):q("",!0)]),_:1},512)]),_:1}))}}),gt=le;export{gt as default};
