import{aG as q,bf as he,ax as B,c as w,o as s,a as i,j as g,h,x as m,aS as z,aT as pe,aI as t,eN as ke,de as we,a7 as _,C as $,bx as C,F as ge,bd as p,b7 as ye,K as P,L as D,az as ve,v as xe,bb as O,e8 as ie,t as T,eO as ne,a6 as be,cf as Se,eP as $e,eJ as H,eQ as j,eK as R,eR as E,eM as le,eS as Te,eT as N,b6 as Ce,bi as M,bj as _e,bh as oe,dd as re,av as Ee,bk as je,eF as de,w as Re,aK as Ae,aQ as ce,bl as ze,bm as qe,bc as Le,be as Ne}from"./index-BHh9T-m2.js";import{_ as ue}from"./BigPlayButton.vue_vue_type_script_setup_true_lang-7ESK9j_i.js";import{_ as me}from"./ShareButton.vue_vue_type_script_setup_true_lang-zlwycpul.js";import{_ as Pe}from"./FavoriteImage.vue_vue_type_script_setup_true_lang-CbShR8pT.js";import{_ as fe}from"./TrackLinks.vue_vue_type_script_setup_true_lang-DA3MiNIn.js";import{_ as De}from"./BannerButton.vue_vue_type_script_setup_true_lang-DvrIeuCT.js";const He={class:"flex sm:gap-4 items-center py-4 px-4 sm:px-8 w-full pl-3 pr-4 sm:pr-10 h-20 z-40","data-index":"1"},Me={class:"relative hidden h-fit cursor-pointer items-center justify-center text-auto-12/11 focus-within:text-auto sm:flex mr-auto"},Be=["value"],Oe={class:"absolute top-2 right-2 bottom-2 flex items-center justify-center"},bt=q({__name:"ControlHeader",props:{data:{type:Object,required:!1},filter:{type:String,required:!0}},emits:["filter-change"],setup(e){const d=e,b=he(),c=()=>{var r;p.setQueue(((r=d.data)==null?void 0:r.tracks)??[])},f=B(()=>{var r;return{title:((r=d.data)==null?void 0:r.name)??"",url:"https://app.nomercy.tv"+b.fullPath}});return(r,y)=>{var a,l;return s(),w(ge,null,[y[1]||(y[1]=i("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom bg-focus"},null,-1)),i("div",He,[(a=e.data)!=null&&a.tracks?(s(),g(ue,{key:0,data:e.data,class:"hidden sm:flex"},null,8,["data"])):h("",!0),i("div",Me,[i("input",{id:"search",value:e.filter,class:"bg-transparent border-auto-12/5 border-2 rounded-md focus-visible:!border-auto-12/9 focus-visible:text-current placeholder-current p-2",placeholder:"Filter…",type:"text",onInput:y[0]||(y[0]=o=>{var n;return r.$emit("filter-change",(n=o.target)==null?void 0:n.value)}),name:"search"},null,40,Be),i("div",Oe,[m(z,{icon:"searchMagnifyingGlass",class:"!w-7"})])]),m(me,{shareData:f.value,class:"!p-0 text-white hidden sm:flex sm:ml-auto"},null,8,["shareData"]),m(pe,{data:e.data,color:"var(--color-focus)",className:"!w-8 !h-8"},null,8,["data"]),m(me,{class:"!p-0 text-white sm:hidden"}),t(ke)?(s(),g(we,{key:1,id:"add",onclick:c,class:"",label:"add"},{default:_(()=>[m(z,{icon:"add",class:"!w-7"})]),_:1})):h("",!0)]),i("div",{class:$(["sm:hidden sticky left-full -mt-16 z-1199 flex justify-center items-center gap-2 mr-4 h-auto",{"top-safe-offset-11":!t(C)("capacitor"),"top-safe-offset-3":t(C)("capacitor")}]),style:{"box-shadow":"0 1px 2px 0 rgba(16,24,40,0.05)"}},[(l=e.data)!=null&&l.tracks?(s(),g(ue,{key:0,data:e.data},null,8,["data"])):h("",!0)],2)],64)}}}),Fe={key:0,class:"relative my-4 flex w-full flex-1 flex-shrink-0 flex-col items-start justify-start gap-4 flex-grow-1 sm:hidden"},Ge=["innerHTML"],Ie={class:"relative hidden flex-1 flex-shrink-0 flex-col items-start justify-start gap-1 flex-grow-1 sm:flex"},Ve={class:"text-left font-semibold uppercase text-white"},Ke=["innerHTML"],Ue={class:"relative flex items-center justify-start gap-2"},Qe={key:0,class:"flex items-center gap-4 text-sm font-medium"},We={key:0,class:"relative aspect-square h-12 w-12 overflow-clip rounded-full min-w-12"},Je={key:1,class:"text-left text-sm font-medium text-white"},Xe={class:"text-left text-sm font-medium text-white"},Ye={key:2,class:"text-left text-sm font-medium text-white"},Ze={class:"text-left text-sm font-medium text-white"},kt=q({__name:"ArtistHeader",props:{data:{type:Object,required:!1}},setup(e){const d=e,{t:b}=ye(),c=P(""),f=P(),r=P(),y=a=>{var l;if(a)return Se(b,((l=a==null?void 0:a.tracks)==null?void 0:l.map(o=>$e(o.duration)).reduce((o,n)=>o+n,0))??0)};return D(d,a=>{a&&(c.value=y(a.data))}),ve(()=>{c.value=y(d.data)}),D(f,a=>{if(!a)return;const l=a.getContext("2d",{willReadFrequently:!0,desynchronized:!0}),o=()=>{var u,v,S,k;const n=(v=(u=p._audioElement1)==null?void 0:u.motion)==null?void 0:v.canvas;n&&r.value&&(p._audioElement1.isPlaying()?((S=p._audioElement1)==null||S.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(r.value).backgroundColor]}),p._audioElement1.motion.gradient="theme",a.width=n.width,a.height=n.height,l.clearRect(0,0,a.width,a.height),l.drawImage(n,0,0,a.width,a.height)):p._audioElement2.isPlaying()&&((k=p._audioElement2)==null||k.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(r.value).backgroundColor]}),p._audioElement2.motion.gradient="theme",a.width=n.width,a.height=n.height,l.clearRect(0,0,a.width,a.height),l.drawImage(n,0,0,a.width,a.height))),requestAnimationFrame(o)};o()}),D(r,a=>{var l,o,n,u;!a||!((l=p._audioElement1)!=null&&l.motion)||!((o=p._audioElement2)!=null&&o.motion)||((n=p._audioElement1)==null||n.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(a).backgroundColor]}),p._audioElement1.motion.gradient="theme",(u=p._audioElement2)==null||u.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(a).backgroundColor]}),p._audioElement2.motion.gradient="theme")}),(a,l)=>{var n,u,v,S,k,x,L,F,G,I,V,K,U,Q,W,J,X,Y,Z,ee;const o=xe("RouterLink");return s(),w("div",{id:"artist-header",class:$(["relative z-0 flex flex-col items-end justify-start text-white sm:flex-row sm:gap-9 sm:pt-8 sm:pb-8 sm:px-8",{"pt-safe-offset-12 px-8 gap-4":t(C)("capacitor"),"pt-24 px-6 gap-2 sm:gap-12":!t(C)("capacitor")}])},[i("div",{ref_key:"audioColor",ref:r,id:"audio-color",class:"absolute top-0 left-0 h-full w-full overflow-clip bg-focus"},null,512),l[0]||(l[0]=i("div",{class:"absolute top-0 left-0 h-full w-full overflow-clip bg-black/50"},null,-1)),i("div",{class:$(["frosting relative mx-auto flex aspect-square w-80 max-w-[90%] flex-col items-center justify-center overflow-clip rounded-xl bg-gradient-to-br min-w-64 bg-theme-7 from-theme-5 via-theme-7 to-theme-11 shadow",{"-mt-4":t(C)("capacitor"),"":!t(C)("capacitor")}])},[(n=e.data)!=null&&n.cover?(s(),g(O,{key:0,id:"image",data:e.data,size:250,className:"aspect-square rounded-xl w-full",loading:"eager"},null,8,["data"])):(u=e.data)!=null&&u.id?(s(),g(Pe,{key:1,id:e.data.id,type:e.data.type,class:"aspect-square rounded-xl w-full"},null,8,["id","type"])):h("",!0)],2),(v=e.data)!=null&&v.name?(s(),w("div",Fe,[i("div",{class:"w-full text-2xl font-semibold whitespace-pre-line",innerHTML:t(ie)(((S=e.data)==null?void 0:S.name)??"Songs you like","text-sm line-clamp-1")},null,8,Ge)])):h("",!0),i("div",Ie,[i("p",Ve,T((x=(k=e.data)==null?void 0:k.type)==null?void 0:x.replace(/s$/u,"")),1),i("div",{class:"w-full text-5xl font-semibold line-clamp-2 leading-[130%] whitespace-pre",innerHTML:t(ie)(((L=e.data)==null?void 0:L.name)??"Songs you like","text-2xl line-clamp-1")},null,8,Ke),i("div",Ue,[t(ne)?(s(),w("div",Qe,[((G=(F=e.data)==null?void 0:F.artists)==null?void 0:G.length)==1&&((V=(I=e.data)==null?void 0:I.artists)!=null&&V[0].cover)?(s(),w("div",We,[m(O,{id:"image",data:(U=(K=e.data)==null?void 0:K.artists)==null?void 0:U[0],size:250,className:"h-full w-full",loading:"eager"},null,8,["data"])])):h("",!0),m(o,{to:((W=(Q=e.data)==null?void 0:Q.artists)==null?void 0:W[0].link)??"#",class:"text-sm empty:hidden"},{default:_(()=>{var te,ae,se;return[be(T(((se=(ae=(te=e.data)==null?void 0:te.artists)==null?void 0:ae[0])==null?void 0:se.name)??"Various artists"),1)]}),_:1},8,["to"])])):h("",!0),(J=e.data)!=null&&J.tracks&&t(ne)?(s(),w("p",Je,"•")):h("",!0),i("p",Xe,T((Y=(X=e.data)==null?void 0:X.tracks)==null?void 0:Y.length)+" "+T(((ee=(Z=e.data)==null?void 0:Z.tracks)==null?void 0:ee.length)==1?t(b)("song"):t(b)("songs")),1),c.value?(s(),w("p",Ye,"•")):h("",!0),i("p",Ze,T(c.value),1)])])],2)}}}),et=["onclick"],tt={class:""},A=q({__name:"SortButton",props:{name:{type:String,required:!0},sortingType:{type:String,required:!0},iconSpacer:{type:String,default:""}},setup(e){const{t:d}=ye(),b=f=>{console.log("handleSortChange",f),R.value==f?le(H.value==j.asc?j.desc:j.asc):le(j.asc),Te(f)},c=f=>{var y,a,l,o,n,u,v,S;const r=f.target;if(f.key=="ArrowUp"){const k=(a=(y=r.parentElement)==null?void 0:y.parentElement)==null?void 0:a.previousElementSibling;k&&k.nodeName=="BUTTON"||k.nodeName=="A"?k.focus():(l=document.querySelector("#playList"))==null||l.focus()}else f.key=="ArrowDown"?(u=(n=(o=r.parentElement)==null?void 0:o.parentElement)==null?void 0:n.nextElementSibling)==null||u.focus():f.key=="ArrowLeft"?(v=r.previousElementSibling)==null||v.focus():f.key=="ArrowRight"&&((S=r.nextElementSibling)==null||S.focus())};return(f,r)=>(s(),w("button",{"no-ring":"",class:"relative cursor-pointer items-center focus-visible:underline focus-visible:underline-offset-2",onclick:()=>b(e.sortingType),onkeyup:c},[i("span",tt,T(t(d)(e.name)),1),t(H)==t(j).asc&&t(R)==e.sortingType&&t(R)!=t(E).index?(s(),g(z,{key:0,icon:"chevronUp",class:$(`w-6 h-6 ${e.iconSpacer}`)},null,8,["class"])):t(H)==t(j).desc&&t(R)==e.sortingType&&t(R)!=t(E).index?(s(),g(z,{key:1,icon:"chevronDown",class:$(`w-6 h-6 ${e.iconSpacer}`)},null,8,["class"])):h("",!0)],8,et))}}),at=q({__name:"SortHeader",setup(e){return(d,b)=>(s(),w("div",{id:"sortHeaderElement",class:$(["sticky -mx-4 px-4 z-30 mt-4 block h-10 content-center items-center justify-start self-stretch bg-transparent text-sm font-medium transition-all duration-200 w-available group/track sm:w-available sm:-top-px",{"top-safe-offset-10":t(C)("capacitor"),"top-safe-offset-16":!t(C)("capacitor")}])},[b[0]||(b[0]=i("span",{id:"sorterChild",class:"absolute inset-0 h-10 sm:rounded-t-2xl overflow-clip w-full transition-all duration-200"},null,-1)),i("span",{class:$([{"album-grid":t(N),"artist-grid":!t(N)},"grid justify-start items-center self-stretch pr-3 sm:px-3 rounded-lg sm:hover:bg-slate-lightA-6 dark:hover:bg-slate-darkA-6 text-auto-12 group/track text-sm font-medium py-2 z-0 group/track gap-2"])},[m(A,{id:"sortIndex","aria-label":d.$t("Sort by index"),sortingType:t(E).index,class:"!flex justify-center",iconSpacer:"absolute left-6",name:"#"},null,8,["aria-label","sortingType"]),m(A,{"aria-label":d.$t("Sort by name"),sortingType:t(E).name,class:"flex sm:flex",iconSpacer:"w-6 h-6",name:"Title"},null,8,["aria-label","sortingType"]),m(A,{"aria-label":d.$t("Sort by album"),sortingType:t(E).album,class:$(["!hidden sm:!flex",{"opacity-0":!t(N),"opacity-100":t(N)}]),iconSpacer:"w-6 h-6",name:"Album"},null,8,["aria-label","sortingType","class"]),m(A,{name:"Release date","aria-label":d.$t("Sort by date"),sortingType:t(E).date,class:"!hidden sm:!flex",iconSpacer:"w-6 h-6"},null,8,["aria-label","sortingType"]),m(A,{"aria-label":d.$t("Sort by duration"),sortingType:t(E).duration,class:"!hidden sm:!flex gap-2 flex-row-reverse pr-[4.5rem]",iconSpacer:"w-6 h-6",name:"Duration"},null,8,["aria-label","sortingType"])],2)],2))}}),wt=Ce(at,[["__scopeId","data-v-7c19c894"]]),st=["data-track-id"],it={class:"flex justify-center text-center"},nt={key:0,class:"group-focus-visible/track:sm:hidden group-hover/track:sm:hidden"},lt={class:"flex h-12 items-center gap-2 overflow-hidden w-available sm:gap-4"},ot={class:"flex h-full flex-col justify-evenly overflow-clip w-inherit"},rt={class:"flex h-6 flex-nowrap overflow-clip text-left line-clamp-1 w-inherit tracking-wide leading-6 px-2 py-1 -ml-2"},dt=["data-size"],ct={class:"flex whitespace-nowrap"},ut={class:"hidden sm:flex invisible max-h-12 md:visible"},mt={class:"hidden sm:flex mr-4 monospace sm:mr-0"},vt=q({__name:"TrackRow",props:{data:{type:Object,required:!0},index:{type:Number,required:!0},displayList:{type:Array,required:!0}},setup(e){const d=e,b=he(),c=B(()=>b.path.startsWith("/music/album")),f=B(()=>b.path.startsWith("/music/artist")),r=()=>{var y,a,l,o,n,u;if(!((y=Le.value.features)!=null&&y.nomercyConnect)){p.playTrack(d.data,d.displayList);return}(u=Ne.value)==null||u.invoke("StartPlaybackCommand",c.value?"album":"artist",c.value?(l=(a=d.data)==null?void 0:a.album_track.at(0))==null?void 0:l.id:(n=(o=d.data)==null?void 0:o.artist_track.at(0))==null?void 0:n.id,d.data.id)};return(y,a)=>{var o,n,u,v,S,k;const l=xe("RouterLink");return s(),w("button",{"data-track-id":(o=e.data)==null?void 0:o.id,onclick:r,onContextmenu:a[1]||(a[1]=x=>t(qe)(x,e.data)),class:$(["grid justify-start children:pointer-events-none items-center self-stretch text-auto-12 pr-3 sm:px-3 rounded-lg sm:hover:bg-slate-lightA-6 dark:sm:hover:bg-slate-darkA-6 group/track text-sm font-medium py-2 z-10",{"album-grid":c.value,"artist-grid":!c.value}]),"data-target":"track",tabindex:"0"},[i("span",it,[((n=t(M))==null?void 0:n.id)!=e.data.id?(s(),w("span",nt,T(e.index+1),1)):h("",!0),((u=t(M))==null?void 0:u.id)==e.data.id?(s(),g(_e,{key:1,color:"rgb(var(--color-focus))",playing:t(oe),class:"hidden group-focus-visible/track:sm:!hidden group-hover/track:sm:!hidden"},null,8,["playing"])):h("",!0),((v=t(M))==null?void 0:v.id)==e.data.id&&t(oe)?(s(),g(re,{key:2,icon:"nmPause",class:"hidden h-6 w-6 group-focus-visible/track:sm:block group-hover/track:sm:block"})):(s(),g(re,{key:3,icon:"nmPlay",class:"hidden h-6 w-6 group-focus-visible/track:sm:block group-hover/track:sm:block"}))]),i("span",lt,[c.value?(s(),g(O,{key:0,data:e.data,size:100,style:Ee({display:c.value?"none":""}),className:"relative hidden h-12 w-12 overflow-hidden min-w-[3rem] sm:block",loading:"eager"},null,8,["data","style"])):h("",!0),i("span",ot,[i("span",rt,T(e.data.name),1),i("span",{"data-size":t(je),class:"inline-flex h-6 w-available gap-1 overflow-hidden whitespace-nowrap text-slate-light-3 dark:slate-dark-3 line-clamp-1 text-2xs hover:animate-pause leading-6"},[m(de,null,{default:_(()=>[e.data&&!f.value?(s(),g(fe,{key:0,id:e.data.id,data:e.data.artist_track,onclick:x=>x.stopPropagation(),"data-target":"artist",type:"artists"},null,8,["id","data","onclick"])):h("",!0),e.data&&!c.value?(s(),g(fe,{key:1,id:e.data.id,data:e.data.album_track,onclick:x=>x.stopPropagation(),"data-target":"album",type:"albums"},null,8,["id","data","onclick"])):h("",!0)]),_:1})],8,dt)])]),(s(!0),w(ge,null,Re(e.data.album_track,x=>(s(),w("span",{key:x.id,class:$(["hidden items-center overflow-clip pr-2 line-clamp-2 h-inherit w-inherit sm:flex",{"opacity-0":!c.value,"opacity-100":c.value}]),onClick:a[0]||(a[0]=L=>L.stopPropagation())},[m(l,{to:x==null?void 0:x.link,tabindex:"0","data-target":"album",class:"flex items-center gap-1 whitespace-nowrap font-semibold line-clamp-1 hover:underline focus:underline dark:font-medium pointer-events-auto","no-ring":""},{default:_(()=>[i("span",ct,[m(de,{text:x.name},null,8,["text"])])]),_:2},1032,["to"])],2))),128)),i("span",ut,T(new Date((S=e.data)==null?void 0:S.date).toLocaleDateString(t(Ae).language??"en-US",{year:"numeric",month:"short",day:"2-digit"})),1),i("span",{class:$(["flex items-center justify-end gap-2 text-end",{"mr-6":!t(ce)}])},[(s(),g(pe,{key:e.data.id+((k=e.data)==null?void 0:k.favorite),data:e.data,color:"var(--color-focus)"},null,8,["data"])),i("span",mt,T(e.data.duration),1),t(ce)?(s(),g(ze,{key:0,direction:"down"},{button:_(()=>[m(De,{class:"",title:""},{default:_(()=>[m(z,{className:"relative h-5 w-5",icon:"menuDotsVertical"})]),_:1})]),default:_(()=>[a[2]||(a[2]=be(" Hellooo "))]),_:1})):h("",!0)],2)],42,st)}}});export{wt as S,kt as _,bt as a,vt as b};
