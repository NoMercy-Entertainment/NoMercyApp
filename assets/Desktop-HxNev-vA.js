import{aG as N,bQ as V,K as Q,L as j,az as z,cr as G,cQ as u,j as R,o as Z,a7 as q,a as J,aI as W,bZ as X,bH as t,aP as Y,bo as $,bh as x,bp as ee}from"./index-DBTFZRC0.js";import{A as ae,S as se,O as le}from"./octopusPlugin-Dt7OIUJX.js";import{n as oe}from"./subtitles-octopus-DXFh_-MD.js";import{D as ne}from"./desktopUIPlugin-Do75DIsp.js";import{K as te}from"./keyHandlerPlugin-CxYiH29N.js";import"./buttons-DDRy-LjE.js";const ge=N({__name:"Desktop",setup(re){const{data:i}=V(),e=Q(),c=s=>{var p,d,v,g,f,m,P,y,b,k,w,S,h,C,I,_,D,E,H,M,T;const l={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:(s==null?void 0:s.filter(a=>!!a.id))??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:(p=$.value)==null?void 0:p.accessToken,basePath:(d=Y.value)==null?void 0:d.serverBaseUrl,forceTvMode:(t("android")||t("ios"))&&!t("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||t("capacitor"),renderAhead:100};e.value=oe("player1").setup(l),(v=e.value)==null||v.once("back",()=>{x.back()});const B=new ne;(g=e.value)==null||g.registerPlugin("desktopUI",B),(f=e.value)==null||f.usePlugin("desktopUI");const L=new ae;(m=e.value)==null||m.registerPlugin("autoSkip",L),(P=e.value)==null||P.usePlugin("autoSkip");const O=new te;(y=e.value)==null||y.registerPlugin("keyHandler",O),(b=e.value)==null||b.usePlugin("keyHandler");const A=new se;(k=e.value)==null||k.registerPlugin("sync",A),(w=e.value)==null||w.usePlugin("sync");const F=new le;(S=e.value)==null||S.registerPlugin("octopus",F),(h=e.value)==null||h.usePlugin("octopus"),(C=e.value)==null||C.once("play",()=>{var a;(a=e.value)==null||a.enterFullscreen()}),(I=e.value)==null||I.on("playlistComplete",()=>{var a;(a=e.value)==null||a.dispose(),x.back()}),(_=e.value)==null||_.once("back",()=>{}),(D=e.value)==null||D.on("play",()=>{u(!0)}),(E=e.value)==null||E.on("pause",()=>{u(!1)}),(H=e.value)==null||H.on("fullscreen",a=>{var o,n;(n=(o=window.external)==null?void 0:o.sendMessage)==null||n.call(o,a?"enterFullscreen":"exitFullscreen")}),(M=e.value)==null||M.on("ready",()=>{var n;ee.stop();const a=new MutationObserver(K=>K.filter(r=>r.type==="childList").forEach(r=>{r.addedNodes.forEach(U=>{U instanceof HTMLElement&&U.tagName==="VIDEO"&&console.log("video removed")})})),o=(n=e.value)==null?void 0:n.getVideoElement();o&&a.observe(o,{childList:!0,subtree:!0})}),(T=e.value)==null||T.on("item",()=>{var a;(a=e.value)==null||a.play()})};return j(i,s=>{var l;(l=e.value)==null||l.dispose(),c(s)}),z(()=>{var s;(s=e.value)==null||s.dispose(),c(i.value)}),G(()=>{var s;(s=e.value)==null||s.dispose(),u(!1)}),(s,l)=>(Z(),R(W(X),null,{default:q(()=>l[0]||(l[0]=[J("div",{id:"player1",class:"group nomercyplayer"},null,-1)])),_:1}))}});export{ge as default};
