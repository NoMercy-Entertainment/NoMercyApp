import{n as R}from"./useInfiniteServerClient-CUj8KMRn.js";import{$l as w,Bl as V,Cl as o,Dl as E,Hl as r,Js as D,Ki as K,Kr as M,R as q,Sl as v,Wl as B,ba as u,bc as F,bl as _,ds as L,ec as G,gu as x,hl as c,hu as t,it as p,kl as H,ll as J,pc as U,qr as W,su as m,tu as N,xl as n,yc as j,yl as A,zl as I}from"./index-DhiB0zJh.js";import"./scrollHandlers-2YIKDoj3.js";import{t as O}from"./Indexer-hbQWUnXv.js";import"./dist-T5InuRf4.js";import"./CardIndicator-CAbWdgDm.js";import{t as Q}from"./NMCard-CWRwevij.js";import{t as X}from"./PersonCard-CPWGDDxs.js";import{n as Y,t as Z}from"./EmptyCard-BhDl9COn.js";J();j();var $="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",ee="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",te=H({__name:"Mobile",setup(le){const i=F(),{data:s,fetchNextPage:b,hasNextPage:y,isError:re}=R({queryKey:["libraries",(i.params.id??i.name)?.split("&").at(0)],limit:20,keepForever:!0});I(()=>{K(),M(null),W(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),w(s,l=>{l&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const S=A(()=>{const l=s.value?.pages?.[0]?.data?.[0];return l&&L.value&&l.media_type!=="person"&&l.media_type!=="genres"});V(()=>{stop(),M(null)});const h=m(),C=m();I(()=>{C.value=i.params.id??i.name,y.value&&(s?.value?.pages?.length??0)<50&&b(),document.addEventListener("scrollToDiv",l=>{h.value?.scrollTo({top:l.detail.top-100,behavior:"smooth"})})}),U(()=>{document.dispatchEvent(new Event("indexer"))}),w(s,l=>{l&&y.value&&l?.pages?.length<50&&b()});const P=m(),T=m();function f(l,d){P.value=d,T.value.show(l)}return(l,d)=>(r(),n(t(G),null,{default:N(()=>[E(t(D),{fullscreen:!0,class:"ion-padding",style:{"--padding-bottom":"0"}},{default:N(()=>[d[0]||(d[0]=_("div",{class:"fixed top-0 pt-safe w-full bg-surface-1 z-1199"},null,-1)),_("div",{ref_key:"lib",ref:h,class:"pt-safe-offset-9 flex h-auto w-full pr-8 overflow-auto scroll-container"},[(r(),o("div",{key:t(q).currentRoute.value.params?.id,class:x([{"pb-2":t(u)&&t(p),"children:pb-4 sm:children:pb-3":!t(u)&&t(p)},"z-0 flex flex-col gap-4 rounded-3xl border-0 w-available scrollbar-none border-surface-3"])},[_("div",{class:x(`grid w-full gap-4 scroll-smooth music-showing:pb-0 pl-1 py-4 ${S.value?$:ee}`)},[t(s)?(r(!0),o(c,{key:0},B(t(s).pages??[],(k,z)=>(r(),o(c,{key:z},[k.data.length>0?(r(!0),o(c,{key:0},B(k.data??[],(e,g)=>(r(),o(c,null,[e?.media_type==="tv"||e?.media_type==="movie"||e?.media_type==="collection"||e?.media_type==="specials"?(r(),n(Q,{key:e.id,data:e,index:g,onContextMenu:a=>f(a,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="person"?(r(),n(X,{key:`${e.id}_person`,data:e,index:g,onContextMenu:a=>f(a,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="genres"?(r(),n(Y,{key:`${e.id}_genres`,data:e,index:g,onContextMenu:a=>f(a,e)},null,8,["data","index","onContextMenu"])):v("",!0)],64))),256)):t(s).pages?.[0]?.data?.length===0?(r(),n(Z,{key:1})):v("",!0)],64))),128)):v("",!0)],2)],2)),E(O,{id:C.value,class:x([{"h-available":!t(u),"h-inherit top-24":t(u),"-mt-4 pt-4 pb-4 mb-0":!t(p),"-mt-4 pt-4 pb-4 mb-14":t(p)},"w-8 fixed right-0 bg-surface-1 transition-all duration-200"])},null,8,["id","class"])],512)]),_:1})]),_:1}))}}),me=te;export{me as default};
