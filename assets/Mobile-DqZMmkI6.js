import"./useInfiniteServerClient-CUj8KMRn.js";import{a as $,i as N,n as P,r as j,t as F}from"./TrackRow-CKdejx3Z.js";import{$l as y,Cl as g,Dl as h,Hl as d,Js as q,Ki as O,Qc as W,R as Y,Sl as A,Wl as D,Xr as J,Yi as K,bc as Q,bl as n,ec as X,gu as T,hc as G,hl as U,hu as a,k as Z,kl as R,ll as ee,ni as p,qr as b,su as f,ti as m,tu as z,vu as L,xl as k,yc as te,yl as ae,zl as le}from"./index-DhiB0zJh.js";import"./DropdownMenu-DWjz4oaE.js";import"./dist-T5InuRf4.js";import{t as oe}from"./useServerClient-CjjHYevH.js";import"./MusicButton-DnEHd5aQ.js";import"./BannerButton-w95GU84e.js";import"./MediaLikeButton-BNAj_rdc.js";import{t as re}from"./Marquee-DWcnFQNQ.js";import"./BigPlayButton-CIxGaAZb.js";import"./EqSpinner-Djx9JNsT.js";import{t as se}from"./NotFound-CQo7Jl5t.js";import"./ShareButton-BeYn-vRW.js";ee();te();var ne={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},ie={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},ue=R({__name:"Mobile",setup(ce){const _=Q(),{data:e,isError:B}=oe({path:_.fullPath}),H=f(null),i=f([]),s=f("");y(e,t=>{O(t?.name??null),v(t?.tracks??[],p.value,m.value,s.value),b(t?.color_palette?.cover)}),y(m,t=>{v(e.value?.tracks??[],p.value,t,s.value)}),y(p,t=>{v(e.value?.tracks??[],t,m.value,s.value)}),y(s,t=>{v(e.value?.tracks??[],p.value,m.value,t)});function v(t,r,l,o){const u=K(t??[],r,l,J);o===""?i.value=u:i.value=u?.filter(c=>c.name?.toLowerCase().includes(o?.toLowerCase?.())||c.artist_track?.some(V=>V.name.toLowerCase().includes(o?.toLowerCase?.()))||c.album_track?.[0]?.name.toLowerCase().includes(o?.toLowerCase?.()))??[]}le(()=>{v(e?.value?.tracks??[],p.value,m.value,s.value),e.value?.color_palette?.cover&&b(e.value?.color_palette?.cover)}),G(()=>{v(e?.value?.tracks??[],p.value,m.value,s.value),e.value?.color_palette?.cover&&b(e.value?.color_palette?.cover)});function E(){Y.back()}const x=f(!1),I=f(!1),w=f(),C=f(),S=ae(()=>$({count:i.value?.length??0,getScrollElement:()=>C.value?.$el??null,estimateSize:()=>56,overscan:10}));function M(){const l=W("capacitor")?88:64,o=w.value?.$el,u=o?.firstChild;if(!o||!u)return;const c=o.getBoundingClientRect().top;x.value=c<=170,I.value=c<=160,c<=l?document.documentElement.classList.contains("scheme-dark")?u.style.background="hsl(from var(--color-theme-8) h s 23%)":(u.style.background="var(--color-theme-8)",o.style.color="white"):(u.style.background="",o.style.color="")}return(t,r)=>(d(),k(a(X),null,{default:z(()=>[h(a(q),{ref_key:"container",ref:C,"scroll-events":!0,onIonScroll:M},{default:z(()=>[a(B)&&!a(e)?(d(),k(se,{key:0})):!a(_).params.id||a(_).params.id&&a(e)?.id===a(_).params.id?(d(),g("div",{key:1,ref_key:"main",ref:H,class:"flex flex-col h-auto overflow-x-clip w-available sm:rounded-2xl -mt-6 text-surface-12"},[h(j,{data:a(e)},null,8,["data"]),n("div",ne,[r[2]||(r[2]=n("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),n("div",{id:"navbar",class:T([{"opacity-0 pointer-events-none":!x.value,"opacity-100 pointer-events-auto":x.value},"fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-surface-11 dark:bg-surface-1 top-0 pt-4 transition-all duration-200"])},[r[1]||(r[1]=n("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-all duration-200 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),n("button",{class:"z-30 flex h-10 w-11 items-center justify-center rounded-md",onClick:E},[h(Z,{icon:"arrowLeft"})]),n("div",{id:"navText",class:T([{"opacity-0 pointer-events-none":!x.value,"opacity-100 pointer-events-auto":x.value},"pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-all duration-200 w-[70%] overflow-clip text-xl"])},[h(re,{text:a(e)?.name},null,8,["text"])],2)],2),(d(),k(N,{key:a(e)?.id,data:a(e),filter:s.value,onFilterChange:r[0]||(r[0]=l=>s.value=l)},null,8,["data","filter"])),n("div",ie,[(d(),k(P,{key:a(e)?.id,ref_key:"sortHeader",ref:w})),n("div",{style:L({height:`${S.value.value.getTotalSize()}px`,width:"100%",position:"relative"})},[(d(!0),g(U,null,D(S.value.value.getVirtualItems(),l=>(d(),g("div",{key:i.value[l.index]?.id+i.value[l.index]?.favorite,style:L({position:"absolute",top:0,left:0,width:"100%",height:`${l.size}px`,transform:`translateY(${l.start}px)`})},[h(F,{data:i.value[l.index],"display-list":i.value,index:l.index},null,8,["data","display-list","index"])],4))),128))],4)])])],512)):A("",!0)]),_:1},512)]),_:1}))}}),Se=ue;export{Se as default};
