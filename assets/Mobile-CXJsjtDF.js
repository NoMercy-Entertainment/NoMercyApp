import"./useBaseQuery-DqrVev1R.js";import{n as z}from"./useInfiniteServerClient-Bx347VWp.js";import"./useQueryClient-XavbcudZ.js";import{Bs as u,Co as L,Ec as w,Gs as v,Ha as c,Hc as _,Js as l,Ks as n,Lo as R,Ns as q,Oc as E,Pc as p,Pi as D,Qs as M,Uo as F,Vc as t,Wo as G,Ws as H,X as m,_c as B,cr as K,ec as U,fc as N,hc as o,ho as W,i as J,ii as O,pc as Q,qs as x,sr as P}from"./index-BHXE211i.js";import"./musicPlaylists-D3UvZWHD.js";import"./contextMenuItems-D73XqNYc.js";import"./scrollHandlers-gDSvQQuD.js";import{t as X}from"./Indexer-BDprbT5n.js";import"./_plugin-vue_export-helper-CEc1WwrB.js";import"./AppLogoSquare-DPcmiZni.js";import"./TMDBImage-gPML3t7x.js";import"./MoooomIcon-Cq6uiWXu.js";import"./dist-BXgo-Gjq.js";import"./CardIndicator-DeGwhbyh.js";import{t as j}from"./NMCard-CXkZ6cjg.js";import{t as A}from"./PersonCard-DPNdYGAz.js";import{n as Y,t as Z}from"./EmptyCard-B4gMF78j.js";import"./NoResultImage-Bwj2it1f.js";q();F();var $="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",ee="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",te=U({__name:"Mobile",setup(re){const i=G(),{data:s,fetchNextPage:h,hasNextPage:b,isError:oe}=z({queryKey:["libraries",(i.params.id??i.name)?.split("&").at(0)],limit:20,keepForever:!0});N(()=>{O(),P(null),K(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),w(s,r=>{r&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const I=H(()=>{const r=s.value?.pages?.[0]?.data?.[0];return r&&D.value&&r.media_type!=="person"&&r.media_type!=="genres"});Q(()=>{stop(),P(null)});const y=p(),C=p();N(()=>{C.value=i.params.id??i.name,b.value&&(s?.value?.pages?.length??0)<50&&h(),document.addEventListener("scrollToDiv",r=>{y.value?.scrollTo({top:r.detail.top-100,behavior:"smooth"})})}),R(()=>{document.dispatchEvent(new Event("indexer"))}),w(s,r=>{r&&b.value&&r?.pages?.length<50&&h()});const S=p(),T=p();function f(r,d){S.value=d,T.value.show(r)}return(r,d)=>(o(),n(t(L),null,{default:E(()=>[M(t(W),{fullscreen:!0,class:"ion-padding",style:{"--padding-bottom":"0"}},{default:E(()=>[d[0]||(d[0]=v("div",{class:"fixed top-0 pt-safe w-full bg-surface-1 z-1199"},null,-1)),v("div",{ref_key:"lib",ref:y,class:"pt-safe-offset-9 flex h-auto w-full pr-8 overflow-auto scroll-container"},[(o(),l("div",{key:t(J).currentRoute.value.params?.id,class:_([{"pb-2":t(c)&&t(m),"children:pb-4 sm:children:pb-3":!t(c)&&t(m)},"z-0 flex flex-col gap-4 rounded-3xl border-0 w-available scrollbar-none border-surface-3"])},[v("div",{class:_(`grid w-full gap-4 scroll-smooth music-showing:pb-0 pl-1 py-4 ${I.value?$:ee}`)},[t(s)?(o(!0),l(u,{key:0},B(t(s).pages??[],(k,V)=>(o(),l(u,{key:V},[k.data.length>0?(o(!0),l(u,{key:0},B(k.data??[],(e,g)=>(o(),l(u,null,[e?.media_type==="tv"||e?.media_type==="movie"||e?.media_type==="collection"||e?.media_type==="specials"?(o(),n(j,{key:e.id,data:e,index:g,onContextMenu:a=>f(a,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="person"?(o(),n(A,{key:`${e.id}_person`,data:e,index:g,onContextMenu:a=>f(a,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="genres"?(o(),n(Y,{key:`${e.id}_genres`,data:e,index:g,onContextMenu:a=>f(a,e)},null,8,["data","index","onContextMenu"])):x("",!0)],64))),256)):t(s).pages?.[0]?.data?.length===0?(o(),n(Z,{key:1})):x("",!0)],64))),128)):x("",!0)],2)],2)),M(X,{id:C.value,class:_([{"h-available":!t(c),"h-inherit top-24":t(c),"-mt-4 pt-4 pb-4 mb-0":!t(m),"-mt-4 pt-4 pb-4 mb-14":t(m)},"w-8 fixed right-0 bg-surface-1 transition-all duration-200"])},null,8,["id","class"])],512)]),_:1})]),_:1}))}}),Ce=te;export{Ce as default};
