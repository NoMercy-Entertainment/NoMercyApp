import"./useBaseQuery-B_FYPFZb.js";import{n as L}from"./useInfiniteServerClient-CWcViavg.js";import"./useQueryClient-DgPzfFPv.js";import"./useQuery-Pvalhcdd.js";import{As as a,Ba as P,Ds as z,Jo as $,Ms as _,Ps as H,Ta as M,Us as U,Vs as V,Ys as m,_a as R,ac as J,cs as x,hs as A,ls as i,nc as h,oc as T,os as n,ps as D,rs as O,ss as g,ts as f,za as W}from"./index-vyVLvOi8.js";import"./_plugin-vue_export-helper-CksOYaUN.js";import"./AppLogoSquare-BgwLcZ1v.js";import{t as Y}from"./TMDBImage-CUCLCZku.js";import{t as G}from"./useServerClient-43vBeAdz.js";W();$();var Q={key:0,class:"grid grid-rows-[auto_1fr] grid-cols-7 relative justify-start flex-1 w-full gap-3 mb-2","data-row":""},X={class:"row-start-1 col-span-7 pointer-events-none font-semibold font-3xl"},Z=["src"],ee=A({__name:"TvCarousel2",props:{data:{type:Array,required:!0},title:{type:String,required:!0},handleFocus:{type:Function,required:!0},handleDown:{type:Function,required:!0},handleUp:{type:Function,required:!0},suffix:{type:String,required:!1,default:""}},setup(t){return(p,o)=>{const b=H("RouterLink");return a(),i(f,null,[t.data.length?(a(),i("div",Q,[n("h3",X,T(t.title),1),(a(!0),i(f,null,_(t.data.slice(0,7),(l,u)=>(a(),g(b,{key:l.id,"data-card":l.id,"data-index":u,style:J(`background-image: url('https://app.nomercy.tv/tmdb-images${l.poster}?width=300')`),to:`${l.link}${t.suffix}`,class:"row-start-2 w-full h-auto rounded-xl bg-cover aspect-poster focus:scale-105 focus:outline outline-[2.2px] outline-white transition-transform duration-200 scroll-mb-20 scroll-mt-12 snap-center snap-mandatory",onFocus:d=>t.handleFocus(d,l),onKeydown:o[0]||(o[0]=d=>t.handleDown(d)),onKeyup:o[1]||(o[1]=d=>t.handleUp(d))},null,8,["data-card","data-index","style","to","onFocus"]))),128))])):x("",!0),(a(),g(O,{to:".image-preload-container"},[(a(!0),i(f,null,_(t.data?.slice(0,7),l=>(a(),i("img",{key:l.id,src:`https://app.nomercy.tv/tmdb-images${l.backdrop}?width=1080`,alt:"",class:"absolute",height:"0",loading:"eager",width:"0"},null,8,Z))),128))]))],64)}}}),K=ee;$();var te={class:"w-available h-auto absolute left-[250px] top-0 overflow-hidden bg-black aspect-video"},ae={class:"flex flex-col justify-start items-start w-[484px] relative left-[58px] top-20 gap-7"},le={class:"flex flex-col justify-start items-start self-stretch relative gap-5"},re={class:"flex flex-col justify-start items-start w-full relative gap-0"},se={class:"self-stretch w-full text-xl text-left mt-2"},oe={class:"line-clamp-4 text-sm -mt-4"},ne=A({__name:"TvHeader",props:{selected:{type:Object,required:!1}},setup(t){return(p,o)=>(a(),i("div",{key:t.selected?.id,class:"w-full h-full absolute left-0 top-0 bg-[#131314]"},[n("div",te,[D(Y,{alt:t.selected?.title,path:t.selected?.backdrop,size:540,class:"w-available h-available absolute left-[-0.39px] top-[-0.39px] object-cover"},null,8,["alt","path"]),o[0]||(o[0]=n("div",{class:"w-available h-available absolute left-[-0.39px] top-[-0.39px]"},null,-1)),o[1]||(o[1]=n("div",{class:"w-[150vw] h-[150vw] absolute left-[-30%] bottom-[-50%]",style:{background:`radial-gradient(
            closest-side,
            rgba(19, 19, 20, 0.1) 0%,
            rgba(19, 19, 20, 1) 70.73974609375%
          )`}},null,-1))]),n("div",ae,[n("div",le,[n("div",re,[n("p",se,T(t.selected?.title),1)]),n("div",oe,T(t.selected?.overview),1)])])]))}}),ue=ne;$();var ie={class:"w-screen h-screen relative overflow-hidden bg-[#131314]"},de=A({__name:"Tv",setup(t){const{data:p,fetchNextPage:o,hasNextPage:b}=L({path:"/",queryKey:["home"]});V(p,()=>{b&&o()});const{data:l}=G({path:"userdata/continue",queryKey:["continue"],refetchInterval:1e3*60*5}),u=m();V(l,e=>{e&&(u.value=e?.filter(s=>s.id)?.at(0))}),z(()=>{u.value=l.value?.filter(e=>e.id)?.at(0),setTimeout(()=>{const e=document.querySelector(`[data-card="${u.value?.id}"]`);e&&e.focus()},1e3)}),P(()=>{u.value=l.value?.filter(e=>e.id)?.at(0),setTimeout(()=>{const e=document.querySelector(`[data-card="${u.value?.id}"]`);e&&e.focus()},1e3)});const d=m(),k=m(!1),C=m(),B=m();function S(e,s){const r=e.target;if(r?.nodeName==="DIV"){(B.value??r.querySelector("a"))?.focus();return}s&&(u.value=s,B.value=r)}function F(e){if(k.value){e.preventDefault();return}clearTimeout(C.value),k.value=!0;const s=e.target,r=s.getAttribute("data-index"),y=s.closest("[data-row]"),c=y?.previousElementSibling,w=c?.querySelector(`a[data-index="${r}"]`),q=y?.nextElementSibling,j=q?.querySelector(`a[data-index="${r}"]`),E=s.previousElementSibling,N=s.nextElementSibling;if(w&&e.key==="ArrowUp")e.preventDefault(),w.focus();else if(j&&e.key==="ArrowDown")e.preventDefault(),j.focus();else if(E&&e.key==="ArrowLeft")e.preventDefault(),E.focus();else if(N&&e.key==="ArrowRight")e.preventDefault(),N.focus();else if(c&&e.key==="ArrowUp"){const v=Array.from(c?.querySelectorAll("a"))?.at(-1);v&&v.focus()}else if(q&&e.key==="ArrowDown"){const v=Array.from(q?.querySelectorAll("a"))?.at(-1);v&&v.focus()}}function I(){C.value=setTimeout(()=>{k.value=!1},150)}return(e,s)=>(a(),g(h(M),null,{default:U(()=>[D(h(R),{fullscreen:!0},{default:U(()=>[n("div",ie,[u.value?(a(),g(ue,{key:0,selected:u.value},null,8,["selected"])):x("",!0),n("div",{ref_key:"scrollContainer",ref:d,class:"flex flex-col justify-start items-start w-available -mx-3 px-3 absolute left-14 right-14 top-[264px] h-available overflow-auto scroll-smooth gap-4 flex-1 pb-16",tabindex:"0",onFocus:s[0]||(s[0]=r=>S(r))},[D(K,{data:h(l)?.filter(r=>!!r.id)??[],"handle-down":F,"handle-focus":S,"handle-up":I,title:"Continue watching"},null,8,["data"]),h(p)?.pages?(a(!0),i(f,{key:0},_(h(p).pages,(r,y)=>(a(),i(f,{key:y},[r?(a(!0),i(f,{key:0},_(r?.data??[],(c,w)=>(a(),g(K,{key:w,data:c.items,"handle-down":F,"handle-focus":S,"handle-up":I,title:c.title,suffix:"/watch"},null,8,["data","title"]))),128)):x("",!0)],64))),128)):x("",!0)],544)])]),_:1})]),_:1}))}}),xe=de;export{xe as default};
