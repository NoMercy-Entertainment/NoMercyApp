import{aw as $,b3 as W,b1 as A,dB as j,cW as o,I as q,az as G,bd as H,cy as t,b7 as J,c8 as Q,e as M,a7 as X,aB as n,o as x,et as Y,a as z,z as Z,ck as N,bF as ee}from"./index-Bfb4eeQA.js";import{O as ae,A as se,S as le}from"./octopusPlugin-C43EKxGa.js";import{n as oe}from"./subtitles-octopus-BgPEw698.js";import{D as ue}from"./desktopUIPlugin-Cb9cm9t5.js";import{K as te}from"./keyHandlerPlugin-C7pWGd11.js";const ve=$({__name:"Desktop",setup(ne){var r,i,c;const O=W(),L={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:`${(r=A.value)==null?void 0:r.serverApiUrl}${O.fullPath}`,controlsTimeout:3e3,doubleClickDelay:500,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:(i=j.value)==null?void 0:i.accessToken,basePath:(c=A.value)==null?void 0:c.serverBaseUrl,forceTvMode:(o("android")||o("ios"))&&!o("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||o("capacitor"),renderAhead:100},e=q();return G(()=>{var p,d,v,g,f,m,b,P,k,y,w,h,S,C,I,T,U,_;e.value??(e.value=oe("player1").setup(L)),(p=e.value)==null||p.once("back",()=>{H.back()});const s=new ue;(d=e.value)==null||d.registerPlugin("desktopUI",s),(v=e.value)==null||v.usePlugin("desktopUI");const l=new ae;(g=e.value)==null||g.registerPlugin("octopus",l),(f=e.value)==null||f.usePlugin("octopus");const V=new se;(m=e.value)==null||m.registerPlugin("autoSkip",V),(b=e.value)==null||b.usePlugin("autoSkip");const F=new te;(P=e.value)==null||P.registerPlugin("keyHandler",F),(k=e.value)==null||k.usePlugin("keyHandler");const K=new le;(y=e.value)==null||y.registerPlugin("sync",K),(w=e.value)==null||w.usePlugin("sync"),(h=e.value)==null||h.once("play",()=>{var a;(a=e.value)==null||a.enterFullscreen()}),(S=e.value)==null||S.on("playlistComplete",()=>{var a;(a=e.value)==null||a.dispose(),H.back()}),(C=e.value)==null||C.once("back",()=>{}),(I=e.value)==null||I.on("play",()=>{t(!0)}),(T=e.value)==null||T.on("pause",()=>{t(!1)}),(U=e.value)==null||U.on("ready",()=>{var D;J.stop();const a=new MutationObserver(R=>R.filter(u=>u.type==="childList").forEach(u=>{u.addedNodes.forEach(E=>{E instanceof HTMLElement&&E.tagName==="VIDEO"&&console.log("video removed")})})),B=(D=e.value)==null?void 0:D.getVideoElement();B&&a.observe(B,{childList:!0,subtree:!0})}),(_=e.value)==null||_.on("item",()=>{var a;(a=e.value)==null||a.play()})}),Q(()=>{var s;(s=e.value)==null||s.dispose(),t(!1)}),(s,l)=>(x(),M(n(ee),null,{default:X(()=>[(x(),M(Y,{to:"body",keepAlive:!0},[z("div",{class:Z(["absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199",{"mb-28":n(N),"mb-0":!n(N)}])},l[0]||(l[0]=[z("div",{id:"player1",class:"group nomercyplayer"},null,-1)]),2)]))]),_:1}))}});export{ve as default};
//# sourceMappingURL=Desktop-CNaBzpkc.js.map
