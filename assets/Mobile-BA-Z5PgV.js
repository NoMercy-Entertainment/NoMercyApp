import"./useBaseQuery-BD2bvG9f.js";import"./useInfiniteServerClient-DsIFlj9d.js";import"./useQueryClient-D6q0hgG8.js";import"./useQuery-CBoq9typ.js";import{Ai as P,Ks as _,Ls as p,Mc as n,Nc as w,Oo as C,Pa as d,Ps as h,Rs as v,Tc as M,U as f,Ws as I,_c as S,ca as a,eo as N,fa as T,i as s,ko as U,la as x,mo as A,oc as m,oo as B,pa as D,ps as u,ua as V,va as L,ws as z,yc as y}from"./index-DO6J_9Tp.js";import{s as c}from"./imageModal-B_6nwhoD.js";import{t as O}from"./useServerClient-BHDPuUSe.js";import{i as R,n as j,o as E,r as F,s as K}from"./VideoPlayer-DyE3_3qC.js";import"./buttons-Dz19tni1.js";import{t as W}from"./videoNoMercyConnectPlugin-C8ENZqb8.js";z();var q=_({__name:"Mobile",setup(G){const{data:i}=O({enabled:!a.value.features?.nomercyConnect}),e=M();function r(o){const l={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:o?.filter(t=>!!t.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:a.value?.accessToken||localStorage.getItem("access_token")||"",basePath:P.value?.serverBaseUrl,forceTvMode:(u("android")||u("ios"))&&!u("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||u("capacitor"),renderAhead:100,disableAutoPlayback:a.value.features?.nomercyConnect};if(e.value=F("player1").setup(l),e.value?.once("back",()=>{history.state.back?s.back():s.replace("/")}),a.value.features?.nomercyConnect){const t=new W;e.value?.registerPlugin("videoNoMercyConnect",t),e.value?.usePlugin("videoNoMercyConnect")}const g=new R;e.value?.registerPlugin("desktopUI",g),e.value?.usePlugin("desktopUI");const b=new E;if(e.value?.registerPlugin("autoSkip",b),e.value?.usePlugin("autoSkip"),!a.value.features?.nomercyConnect){const t=new K;e.value?.registerPlugin("sync",t),e.value?.usePlugin("sync")}const k=new j;e.value?.registerPlugin("octopus",k),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?s.back():s.replace("/")}),e.value?.on("dispose",async()=>{await D(),await x(),history.state.back?s.back():await s.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{c(!0)}),e.value?.on("pause",()=>{c(!1)}),e.value?.on("ready",async()=>{await T(),await L(),await V(),f.stop()}),e.value?.on("item",()=>{e.value?.play()}),N.addListener("backButton",()=>{e.value?.emit("back-button-hyjack"),e.value?.dispose()})}return S(i,o=>{o?.length&&r(o)}),C(()=>{f.stop(),a.value.features?.nomercyConnect?r():i.value?.length&&r(i.value)}),U(()=>{e.value?.dispose(),c(!1)}),(o,l)=>(m(),v(n(A),null,{default:y(()=>[I(n(B),{fullscreen:!0},{default:y(()=>[(m(),v(h,{to:"body"},[p("div",{class:w([{"mb-28":n(d),"mb-0":!n(d)},"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"])},[...l[0]||(l[0]=[p("div",{id:"player1",class:"group nomercyplayer"},null,-1)])],2)]))]),_:1})]),_:1}))}}),oe=q;export{oe as default};
