import{I as U,B as Ee,c as Q,o as C,a as h,t as T,z as Mt,F as Oe,h as lt,n as Ht,j as I,r as pr,d as Y,b as He,s as A,q as G,D as zt,E as Kt,C as mr,f8 as gr,bQ as vr,G as St,b9 as br,ds as Se,f as ze,O as J,dt as D,dw as Qt,cX as Ot,cI as De,l as R,w as oe,Y as yr,a$ as Ut,K as Dt,f9 as _r,bu as wr,bh as xr,f5 as Er,f6 as Sr,f7 as Dr,a2 as Bt}from"./index-C_qNKMWs.js";import{u as Ne}from"./useServerClient-abD0VdnA.js";import{_ as xe}from"./Button.vue_vue_type_script_setup_true_lang-Bf-PAW_G.js";import{A as kr}from"./AppLogo-D0WOYXPW.js";import{u as ve}from"./useQueryClient-C4PrSAx1.js";import{_ as ht}from"./Modal.vue_vue_type_script_setup_true_lang-DQG8pWuu.js";import{_ as me}from"./MoooomIcon.vue_vue_type_script_setup_true_lang-B0gVSpZ_.js";import{_ as Cr}from"./FolderBrowser.vue_vue_type_script_setup_true_lang-DkFxyZPf.js";import{_ as Tr}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as Ir}from"./index-B8V6bTi4.js";import"./useQuery-DTS8T947.js";import"./useBaseQuery-vm7BPSk-.js";import"./useInfiniteServerClient-BbeQXtgw.js";import"./OptimizedIcon.vue_vue_type_script_setup_true_lang-CJu-NfRn.js";import"./Shadow-Ix2lc59_.js";import"./ScrollContainer.vue_vue_type_script_setup_true_lang-CXhFwpxK.js";const Or={class:"-mt-12 px-4"},Nr={class:"text-xl font-bold text-slate-light-12/80 dark:text-slate-dark-12/80"},$r={"aria-hidden":"true",class:"mt-4"},Ar={class:"overflow-hidden rounded-full bg-gray-200"},Pr=U({__name:"Stepper",props:{steps:{type:Array,required:!0},currentStep:{type:String,required:!0}},setup(t){const e=t,r=Ee(()=>{var o;return e.steps?(o=e.steps)==null?void 0:o.indexOf(e.currentStep):0}),n=Ee(()=>e.steps?(r.value+1)/e.steps.length*100:0);return(o,i)=>(C(),Q("div",Or,[h("h4",Nr,T(o.$t(t.currentStep)),1),h("div",$r,[h("div",Ar,[h("div",{style:Mt(`width: ${n.value}%`),class:"h-1 rounded-full bg-focus transition-all duration-300"},null,4)]),h("div",{style:Mt(`grid-template-columns: repeat(${t.steps.length}, minmax(0, 1fr))`),class:"mt-6 hidden text-sm font-medium text-auto-600 sm:grid"},[(C(!0),Q(Oe,null,lt(t.steps,a=>(C(),Q("div",{key:a,class:"text-center font-semibold"},T(o.$t(a)),1))),128))],4)])]))}}),Fr={class:"mx-auto grid h-available place-content-center px-4 sm:px-6 lg:px-8"},Mr={class:"mx-auto w-screen max-w-6xl"},Br={class:"flex h-full w-full flex-col gap-4 overflow-hidden p-8 pb-0 min-h-[80vh] max-h-[80vh] h-available"},qr={class:"mx-auto h-44 w-auto p-2"},jr={class:"overflow-hidden p-4 h-available"},Lr={class:"mt-auto flex h-16 w-full justify-end gap-4 rounded-b-lg p-4 bg-slate-light-1/70 dark:bg-slate-dark-1/70"},Rr=U({__name:"Frame",props:{steps:{type:Array,required:!0},nextButtonLocked:{type:Boolean,default:!1},currentStep:{type:String,required:!0},setCurrentStep:{type:Function,required:!0},finish:{type:Function,required:!0}},setup(t){const e=t,r=Ee(()=>e.steps.findIndex(a=>a===e.currentStep)===0),n=Ee(()=>e.steps.findIndex(a=>a===e.currentStep)===e.steps.length-1);function o(){e.steps.findIndex(a=>a===e.currentStep)<e.steps.length-1&&e.setCurrentStep(e.steps[e.steps.findIndex(a=>a===e.currentStep)+1])}function i(){e.steps.findIndex(a=>a===e.currentStep)>0&&e.setCurrentStep(e.steps[e.steps.findIndex(a=>a===e.currentStep)-1])}return Ne({path:"/dashboard/configuration/languages"}),Ne({path:"/dashboard/libraries"}),Ne({path:"/dashboard/encoderProfiles"}),(a,l)=>(C(),Q("div",Fr,[h("div",Mr,[h("div",{class:Ht(["animate-loading","w-full h-full gap-2.5 flex flex-col ml-auto overflow-hidden rounded-xl bg-slate-light-1 dark:bg-slate-dark-1 bg-cover border-2 border-transparent text-start transition-all duration-300"]),style:{"--bg-color":"linear-gradient(rgb(var(--background-auto-3)), rgb(var(--background-auto-3)))","--border-color":`linear-gradient(var(--angle, 45deg),
						rgb(var(--color-focus) / 0.7) 0%,
						rgb(var(--color-focus) / 0.3) 33.33%,
						rgb(var(--color-focus) / 0.14) 66.67%,
						rgb(var(--color-focus) / 0.1) 100%
					)`}},[h("div",Br,[h("div",qr,[I(kr,{class:"pb-8"})]),I(Pr,{"current-step":t.currentStep,steps:t.steps},null,8,["current-step","steps"]),h("div",jr,[pr(a.$slots,"default")])]),h("div",Lr,[r.value?He("",!0):(C(),Y(xe,{key:0,id:"yes",class:"ml-auto !w-28",color:"slate",type:"button",variant:"text",onClick:i},{default:A(()=>[G(T(a.$t("Back")),1)]),_:1})),n.value?(C(),Y(xe,{key:1,id:"cancel",disabled:t.nextButtonLocked,class:"!w-28",color:"theme",type:"button",variant:"default",onClick:t.finish},{default:A(()=>[G(T(a.$t("Finish")),1)]),_:1},8,["disabled","onClick"])):(C(),Y(xe,{key:2,id:"save",disabled:t.nextButtonLocked,class:"!w-28",color:"theme",type:"button",variant:"default",onClick:o},{default:A(()=>[G(T(a.$t("Next")),1)]),_:1},8,["disabled"]))])])])]))}});function Yr(t){return gr()?(vr(t),!0):!1}const Vr=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function Xr(t){return mr()}function Gr(t,e=!0,r){Xr()?zt(t,r):e?t():Kt(t)}const Wr=Vr?window.document:void 0;function Hr(t){var e;const r=St(t);return(e=r==null?void 0:r.$el)!=null?e:r}/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function qt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function ae(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qt(Object(r),!0).forEach(function(n){zr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qt(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rt(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?rt=function(e){return typeof e}:rt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(t)}function zr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ue(){return ue=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ue.apply(this,arguments)}function Kr(t,e){if(t==null)return{};var r={},n=Object.keys(t),o,i;for(i=0;i<n.length;i++)o=n[i],!(e.indexOf(o)>=0)&&(r[o]=t[o]);return r}function Qr(t,e){if(t==null)return{};var r=Kr(t,e),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var Ur="1.15.6";function se(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var de=se(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ke=se(/Edge/i),jt=se(/firefox/i),Ye=se(/safari/i)&&!se(/chrome/i)&&!se(/android/i),Nt=se(/iP(ad|od|hone)/i),Zt=se(/chrome/i)&&se(/android/i),Jt={capture:!1,passive:!1};function S(t,e,r){t.addEventListener(e,r,!de&&Jt)}function E(t,e,r){t.removeEventListener(e,r,!de&&Jt)}function st(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function er(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function te(t,e,r,n){if(t){r=r||document;do{if(e!=null&&(e[0]===">"?t.parentNode===r&&st(t,e):st(t,e))||n&&t===r)return t;if(t===r)break}while(t=er(t))}return null}var Lt=/\s+/g;function z(t,e,r){if(t&&e)if(t.classList)t.classList[r?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(Lt," ").replace(" "+e+" "," ");t.className=(n+(r?" "+e:"")).replace(Lt," ")}}function b(t,e,r){var n=t&&t.style;if(n){if(r===void 0)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(r=t.currentStyle),e===void 0?r:r[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=r+(typeof r=="string"?"":"px")}}function $e(t,e){var r="";if(typeof t=="string")r=t;else do{var n=b(t,"transform");n&&n!=="none"&&(r=n+" "+r)}while(!e&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(r)}function tr(t,e,r){if(t){var n=t.getElementsByTagName(e),o=0,i=n.length;if(r)for(;o<i;o++)r(n[o],o);return n}return[]}function ie(){var t=document.scrollingElement;return t||document.documentElement}function M(t,e,r,n,o){if(!(!t.getBoundingClientRect&&t!==window)){var i,a,l,s,u,d,f;if(t!==window&&t.parentNode&&t!==ie()?(i=t.getBoundingClientRect(),a=i.top,l=i.left,s=i.bottom,u=i.right,d=i.height,f=i.width):(a=0,l=0,s=window.innerHeight,u=window.innerWidth,d=window.innerHeight,f=window.innerWidth),(e||r)&&t!==window&&(o=o||t.parentNode,!de))do if(o&&o.getBoundingClientRect&&(b(o,"transform")!=="none"||r&&b(o,"position")!=="static")){var _=o.getBoundingClientRect();a-=_.top+parseInt(b(o,"border-top-width")),l-=_.left+parseInt(b(o,"border-left-width")),s=a+i.height,u=l+i.width;break}while(o=o.parentNode);if(n&&t!==window){var x=$e(o||t),p=x&&x.a,m=x&&x.d;x&&(a/=m,l/=p,f/=p,d/=m,s=a+d,u=l+f)}return{top:a,left:l,bottom:s,right:u,width:f,height:d}}}function Rt(t,e,r){for(var n=ge(t,!0),o=M(t)[e];n;){var i=M(n)[r],a=void 0;if(a=o>=i,!a)return n;if(n===ie())break;n=ge(n,!1)}return!1}function Ae(t,e,r,n){for(var o=0,i=0,a=t.children;i<a.length;){if(a[i].style.display!=="none"&&a[i]!==y.ghost&&(n||a[i]!==y.dragged)&&te(a[i],r.draggable,t,!1)){if(o===e)return a[i];o++}i++}return null}function $t(t,e){for(var r=t.lastElementChild;r&&(r===y.ghost||b(r,"display")==="none"||e&&!st(r,e));)r=r.previousElementSibling;return r||null}function Z(t,e){var r=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==y.clone&&(!e||st(t,e))&&r++;return r}function Yt(t){var e=0,r=0,n=ie();if(t)do{var o=$e(t),i=o.a,a=o.d;e+=t.scrollLeft*i,r+=t.scrollTop*a}while(t!==n&&(t=t.parentNode));return[e,r]}function Zr(t,e){for(var r in t)if(t.hasOwnProperty(r)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[r][n])return Number(r)}return-1}function ge(t,e){if(!t||!t.getBoundingClientRect)return ie();var r=t,n=!1;do if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var o=b(r);if(r.clientWidth<r.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||r.clientHeight<r.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!r.getBoundingClientRect||r===document.body)return ie();if(n||e)return r;n=!0}}while(r=r.parentNode);return ie()}function Jr(t,e){if(t&&e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function mt(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Ve;function rr(t,e){return function(){if(!Ve){var r=arguments,n=this;r.length===1?t.call(n,r[0]):t.apply(n,r),Ve=setTimeout(function(){Ve=void 0},e)}}}function en(){clearTimeout(Ve),Ve=void 0}function nr(t,e,r){t.scrollLeft+=e,t.scrollTop+=r}function or(t){var e=window.Polymer,r=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):r?r(t).clone(!0)[0]:t.cloneNode(!0)}function ir(t,e,r){var n={};return Array.from(t.children).forEach(function(o){var i,a,l,s;if(!(!te(o,e.draggable,t,!1)||o.animated||o===r)){var u=M(o);n.left=Math.min((i=n.left)!==null&&i!==void 0?i:1/0,u.left),n.top=Math.min((a=n.top)!==null&&a!==void 0?a:1/0,u.top),n.right=Math.max((l=n.right)!==null&&l!==void 0?l:-1/0,u.right),n.bottom=Math.max((s=n.bottom)!==null&&s!==void 0?s:-1/0,u.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var X="Sortable"+new Date().getTime();function tn(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(o){if(!(b(o,"display")==="none"||o===y.ghost)){t.push({target:o,rect:M(o)});var i=ae({},t[t.length-1].rect);if(o.thisAnimationDuration){var a=$e(o,!0);a&&(i.top-=a.f,i.left-=a.e)}o.fromRect=i}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(Zr(t,{target:n}),1)},animateAll:function(n){var o=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var i=!1,a=0;t.forEach(function(l){var s=0,u=l.target,d=u.fromRect,f=M(u),_=u.prevFromRect,x=u.prevToRect,p=l.rect,m=$e(u,!0);m&&(f.top-=m.f,f.left-=m.e),u.toRect=f,u.thisAnimationDuration&&mt(_,f)&&!mt(d,f)&&(p.top-f.top)/(p.left-f.left)===(d.top-f.top)/(d.left-f.left)&&(s=nn(p,_,x,o.options)),mt(f,d)||(u.prevFromRect=d,u.prevToRect=f,s||(s=o.options.animation),o.animate(u,p,f,s)),s&&(i=!0,a=Math.max(a,s),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},s),u.thisAnimationDuration=s)}),clearTimeout(e),i?e=setTimeout(function(){typeof n=="function"&&n()},a):typeof n=="function"&&n(),t=[]},animate:function(n,o,i,a){if(a){b(n,"transition",""),b(n,"transform","");var l=$e(this.el),s=l&&l.a,u=l&&l.d,d=(o.left-i.left)/(s||1),f=(o.top-i.top)/(u||1);n.animatingX=!!d,n.animatingY=!!f,b(n,"transform","translate3d("+d+"px,"+f+"px,0)"),this.forRepaintDummy=rn(n),b(n,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),b(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){b(n,"transition",""),b(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},a)}}}}function rn(t){return t.offsetWidth}function nn(t,e,r,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-r.top,2)+Math.pow(e.left-r.left,2))*n.animation}var ke=[],gt={initializeByDefault:!0},Qe={mount:function(e){for(var r in gt)gt.hasOwnProperty(r)&&!(r in e)&&(e[r]=gt[r]);ke.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),ke.push(e)},pluginEvent:function(e,r,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var i=e+"Global";ke.forEach(function(a){r[a.pluginName]&&(r[a.pluginName][i]&&r[a.pluginName][i](ae({sortable:r},n)),r.options[a.pluginName]&&r[a.pluginName][e]&&r[a.pluginName][e](ae({sortable:r},n)))})},initializePlugins:function(e,r,n,o){ke.forEach(function(l){var s=l.pluginName;if(!(!e.options[s]&&!l.initializeByDefault)){var u=new l(e,r,e.options);u.sortable=e,u.options=e.options,e[s]=u,ue(n,u.defaults)}});for(var i in e.options)if(e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);typeof a<"u"&&(e.options[i]=a)}},getEventProperties:function(e,r){var n={};return ke.forEach(function(o){typeof o.eventProperties=="function"&&ue(n,o.eventProperties.call(r[o.pluginName],e))}),n},modifyOption:function(e,r,n){var o;return ke.forEach(function(i){e[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[r]=="function"&&(o=i.optionListeners[r].call(e[i.pluginName],n))}),o}};function on(t){var e=t.sortable,r=t.rootEl,n=t.name,o=t.targetEl,i=t.cloneEl,a=t.toEl,l=t.fromEl,s=t.oldIndex,u=t.newIndex,d=t.oldDraggableIndex,f=t.newDraggableIndex,_=t.originalEvent,x=t.putSortable,p=t.extraEventProperties;if(e=e||r&&r[X],!!e){var m,k=e.options,g="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!de&&!Ke?m=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(n,!0,!0)),m.to=a||r,m.from=l||r,m.item=o||r,m.clone=i,m.oldIndex=s,m.newIndex=u,m.oldDraggableIndex=d,m.newDraggableIndex=f,m.originalEvent=_,m.pullMode=x?x.lastPutMode:void 0;var v=ae(ae({},p),Qe.getEventProperties(n,e));for(var W in v)m[W]=v[W];r&&r.dispatchEvent(m),k[g]&&k[g].call(e,m)}}var an=["evt"],V=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=n.evt,i=Qr(n,an);Qe.pluginEvent.bind(y)(e,r,ae({dragEl:c,parentEl:$,ghostEl:w,rootEl:O,nextEl:we,lastDownEl:nt,cloneEl:N,cloneHidden:pe,dragStarted:je,putSortable:B,activeSortable:y.active,originalEvent:o,oldIndex:Ie,oldDraggableIndex:Xe,newIndex:K,newDraggableIndex:he,hideGhostForTarget:ur,unhideGhostForTarget:dr,cloneNowHidden:function(){pe=!0},cloneNowShown:function(){pe=!1},dispatchSortableEvent:function(l){L({sortable:r,name:l,originalEvent:o})}},i))};function L(t){on(ae({putSortable:B,cloneEl:N,targetEl:c,rootEl:O,oldIndex:Ie,oldDraggableIndex:Xe,newIndex:K,newDraggableIndex:he},t))}var c,$,w,O,we,nt,N,pe,Ie,K,Xe,he,Ze,B,Te=!1,ut=!1,dt=[],ye,ee,vt,bt,Vt,Xt,je,Ce,Ge,We=!1,Je=!1,ot,j,yt=[],kt=!1,ct=[],pt=typeof document<"u",et=Nt,Gt=Ke||de?"cssFloat":"float",ln=pt&&!Zt&&!Nt&&"draggable"in document.createElement("div"),ar=function(){if(pt){if(de)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),lr=function(e,r){var n=b(e),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=Ae(e,0,r),a=Ae(e,1,r),l=i&&b(i),s=a&&b(a),u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+M(i).width,d=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+M(a).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&l.float&&l.float!=="none"){var f=l.float==="left"?"left":"right";return a&&(s.clear==="both"||s.clear===f)?"vertical":"horizontal"}return i&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||u>=o&&n[Gt]==="none"||a&&n[Gt]==="none"&&u+d>o)?"vertical":"horizontal"},sn=function(e,r,n){var o=n?e.left:e.top,i=n?e.right:e.bottom,a=n?e.width:e.height,l=n?r.left:r.top,s=n?r.right:r.bottom,u=n?r.width:r.height;return o===l||i===s||o+a/2===l+u/2},un=function(e,r){var n;return dt.some(function(o){var i=o[X].options.emptyInsertThreshold;if(!(!i||$t(o))){var a=M(o),l=e>=a.left-i&&e<=a.right+i,s=r>=a.top-i&&r<=a.bottom+i;if(l&&s)return n=o}}),n},sr=function(e){function r(i,a){return function(l,s,u,d){var f=l.options.group.name&&s.options.group.name&&l.options.group.name===s.options.group.name;if(i==null&&(a||f))return!0;if(i==null||i===!1)return!1;if(a&&i==="clone")return i;if(typeof i=="function")return r(i(l,s,u,d),a)(l,s,u,d);var _=(a?l:s).options.group.name;return i===!0||typeof i=="string"&&i===_||i.join&&i.indexOf(_)>-1}}var n={},o=e.group;(!o||rt(o)!="object")&&(o={name:o}),n.name=o.name,n.checkPull=r(o.pull,!0),n.checkPut=r(o.put),n.revertClone=o.revertClone,e.group=n},ur=function(){!ar&&w&&b(w,"display","none")},dr=function(){!ar&&w&&b(w,"display","")};pt&&!Zt&&document.addEventListener("click",function(t){if(ut)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),ut=!1,!1},!0);var _e=function(e){if(c){e=e.touches?e.touches[0]:e;var r=un(e.clientX,e.clientY);if(r){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);n.target=n.rootEl=r,n.preventDefault=void 0,n.stopPropagation=void 0,r[X]._onDragOver(n)}}},dn=function(e){c&&c.parentNode[X]._isOutsideThisEl(e.target)};function y(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=ue({},e),t[X]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return lr(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,l){a.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:y.supportPointer!==!1&&"PointerEvent"in window&&(!Ye||Nt),emptyInsertThreshold:5};Qe.initializePlugins(this,t,r);for(var n in r)!(n in e)&&(e[n]=r[n]);sr(e);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=e.forceFallback?!1:ln,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?S(t,"pointerdown",this._onTapStart):(S(t,"mousedown",this._onTapStart),S(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(S(t,"dragover",this),S(t,"dragenter",this)),dt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),ue(this,tn())}y.prototype={constructor:y,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ce=null)},_getDirection:function(e,r){return typeof this.options.direction=="function"?this.options.direction.call(this,e,r,c):this.options.direction},_onTapStart:function(e){if(e.cancelable){var r=this,n=this.el,o=this.options,i=o.preventOnFilter,a=e.type,l=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,s=(l||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,d=o.filter;if(bn(n),!c&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||o.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Ye&&s&&s.tagName.toUpperCase()==="SELECT")&&(s=te(s,o.draggable,n,!1),!(s&&s.animated)&&nt!==s)){if(Ie=Z(s),Xe=Z(s,o.draggable),typeof d=="function"){if(d.call(this,e,s,this)){L({sortable:r,rootEl:u,name:"filter",targetEl:s,toEl:n,fromEl:n}),V("filter",r,{evt:e}),i&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(f){if(f=te(u,f.trim(),n,!1),f)return L({sortable:r,rootEl:f,name:"filter",targetEl:s,fromEl:n,toEl:n}),V("filter",r,{evt:e}),!0}),d)){i&&e.preventDefault();return}o.handle&&!te(u,o.handle,n,!1)||this._prepareDragStart(e,l,s)}}},_prepareDragStart:function(e,r,n){var o=this,i=o.el,a=o.options,l=i.ownerDocument,s;if(n&&!c&&n.parentNode===i){var u=M(n);if(O=i,c=n,$=c.parentNode,we=c.nextSibling,nt=n,Ze=a.group,y.dragged=c,ye={target:c,clientX:(r||e).clientX,clientY:(r||e).clientY},Vt=ye.clientX-u.left,Xt=ye.clientY-u.top,this._lastX=(r||e).clientX,this._lastY=(r||e).clientY,c.style["will-change"]="all",s=function(){if(V("delayEnded",o,{evt:e}),y.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!jt&&o.nativeDraggable&&(c.draggable=!0),o._triggerDragStart(e,r),L({sortable:o,name:"choose",originalEvent:e}),z(c,a.chosenClass,!0)},a.ignore.split(",").forEach(function(d){tr(c,d.trim(),_t)}),S(l,"dragover",_e),S(l,"mousemove",_e),S(l,"touchmove",_e),a.supportPointer?(S(l,"pointerup",o._onDrop),!this.nativeDraggable&&S(l,"pointercancel",o._onDrop)):(S(l,"mouseup",o._onDrop),S(l,"touchend",o._onDrop),S(l,"touchcancel",o._onDrop)),jt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,c.draggable=!0),V("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||r)&&(!this.nativeDraggable||!(Ke||de))){if(y.eventCanceled){this._onDrop();return}a.supportPointer?(S(l,"pointerup",o._disableDelayedDrag),S(l,"pointercancel",o._disableDelayedDrag)):(S(l,"mouseup",o._disableDelayedDrag),S(l,"touchend",o._disableDelayedDrag),S(l,"touchcancel",o._disableDelayedDrag)),S(l,"mousemove",o._delayedDragTouchMoveHandler),S(l,"touchmove",o._delayedDragTouchMoveHandler),a.supportPointer&&S(l,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(s,a.delay)}else s()}},_delayedDragTouchMoveHandler:function(e){var r=e.touches?e.touches[0]:e;Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){c&&_t(c),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;E(e,"mouseup",this._disableDelayedDrag),E(e,"touchend",this._disableDelayedDrag),E(e,"touchcancel",this._disableDelayedDrag),E(e,"pointerup",this._disableDelayedDrag),E(e,"pointercancel",this._disableDelayedDrag),E(e,"mousemove",this._delayedDragTouchMoveHandler),E(e,"touchmove",this._delayedDragTouchMoveHandler),E(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,r){r=r||e.pointerType=="touch"&&e,!this.nativeDraggable||r?this.options.supportPointer?S(document,"pointermove",this._onTouchMove):r?S(document,"touchmove",this._onTouchMove):S(document,"mousemove",this._onTouchMove):(S(c,"dragend",this),S(O,"dragstart",this._onDragStart));try{document.selection?it(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,r){if(Te=!1,O&&c){V("dragStarted",this,{evt:r}),this.nativeDraggable&&S(document,"dragover",dn);var n=this.options;!e&&z(c,n.dragClass,!1),z(c,n.ghostClass,!0),y.active=this,e&&this._appendGhost(),L({sortable:this,name:"start",originalEvent:r})}else this._nulling()},_emulateDragOver:function(){if(ee){this._lastX=ee.clientX,this._lastY=ee.clientY,ur();for(var e=document.elementFromPoint(ee.clientX,ee.clientY),r=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ee.clientX,ee.clientY),e!==r);)r=e;if(c.parentNode[X]._isOutsideThisEl(e),r)do{if(r[X]){var n=void 0;if(n=r[X]._onDragOver({clientX:ee.clientX,clientY:ee.clientY,target:e,rootEl:r}),n&&!this.options.dragoverBubble)break}e=r}while(r=er(r));dr()}},_onTouchMove:function(e){if(ye){var r=this.options,n=r.fallbackTolerance,o=r.fallbackOffset,i=e.touches?e.touches[0]:e,a=w&&$e(w,!0),l=w&&a&&a.a,s=w&&a&&a.d,u=et&&j&&Yt(j),d=(i.clientX-ye.clientX+o.x)/(l||1)+(u?u[0]-yt[0]:0)/(l||1),f=(i.clientY-ye.clientY+o.y)/(s||1)+(u?u[1]-yt[1]:0)/(s||1);if(!y.active&&!Te){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(w){a?(a.e+=d-(vt||0),a.f+=f-(bt||0)):a={a:1,b:0,c:0,d:1,e:d,f};var _="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");b(w,"webkitTransform",_),b(w,"mozTransform",_),b(w,"msTransform",_),b(w,"transform",_),vt=d,bt=f,ee=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!w){var e=this.options.fallbackOnBody?document.body:O,r=M(c,!0,et,!0,e),n=this.options;if(et){for(j=e;b(j,"position")==="static"&&b(j,"transform")==="none"&&j!==document;)j=j.parentNode;j!==document.body&&j!==document.documentElement?(j===document&&(j=ie()),r.top+=j.scrollTop,r.left+=j.scrollLeft):j=ie(),yt=Yt(j)}w=c.cloneNode(!0),z(w,n.ghostClass,!1),z(w,n.fallbackClass,!0),z(w,n.dragClass,!0),b(w,"transition",""),b(w,"transform",""),b(w,"box-sizing","border-box"),b(w,"margin",0),b(w,"top",r.top),b(w,"left",r.left),b(w,"width",r.width),b(w,"height",r.height),b(w,"opacity","0.8"),b(w,"position",et?"absolute":"fixed"),b(w,"zIndex","100000"),b(w,"pointerEvents","none"),y.ghost=w,e.appendChild(w),b(w,"transform-origin",Vt/parseInt(w.style.width)*100+"% "+Xt/parseInt(w.style.height)*100+"%")}},_onDragStart:function(e,r){var n=this,o=e.dataTransfer,i=n.options;if(V("dragStart",this,{evt:e}),y.eventCanceled){this._onDrop();return}V("setupClone",this),y.eventCanceled||(N=or(c),N.removeAttribute("id"),N.draggable=!1,N.style["will-change"]="",this._hideClone(),z(N,this.options.chosenClass,!1),y.clone=N),n.cloneId=it(function(){V("clone",n),!y.eventCanceled&&(n.options.removeCloneOnHide||O.insertBefore(N,c),n._hideClone(),L({sortable:n,name:"clone"}))}),!r&&z(c,i.dragClass,!0),r?(ut=!0,n._loopId=setInterval(n._emulateDragOver,50)):(E(document,"mouseup",n._onDrop),E(document,"touchend",n._onDrop),E(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",i.setData&&i.setData.call(n,o,c)),S(document,"drop",n),b(c,"transform","translateZ(0)")),Te=!0,n._dragStartId=it(n._dragStarted.bind(n,r,e)),S(document,"selectstart",n),je=!0,window.getSelection().removeAllRanges(),Ye&&b(document.body,"user-select","none")},_onDragOver:function(e){var r=this.el,n=e.target,o,i,a,l=this.options,s=l.group,u=y.active,d=Ze===s,f=l.sort,_=B||u,x,p=this,m=!1;if(kt)return;function k(qe,fr){V(qe,p,ae({evt:e,isOwner:d,axis:x?"vertical":"horizontal",revert:a,dragRect:o,targetRect:i,canSort:f,fromSortable:_,target:n,completed:v,onMove:function(Ft,hr){return tt(O,r,c,o,Ft,M(Ft),e,hr)},changed:W},fr))}function g(){k("dragOverAnimationCapture"),p.captureAnimationState(),p!==_&&_.captureAnimationState()}function v(qe){return k("dragOverCompleted",{insertion:qe}),qe&&(d?u._hideClone():u._showClone(p),p!==_&&(z(c,B?B.options.ghostClass:u.options.ghostClass,!1),z(c,l.ghostClass,!0)),B!==p&&p!==y.active?B=p:p===y.active&&B&&(B=null),_===p&&(p._ignoreWhileAnimating=n),p.animateAll(function(){k("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==_&&(_.animateAll(),_._ignoreWhileAnimating=null)),(n===c&&!c.animated||n===r&&!n.animated)&&(Ce=null),!l.dragoverBubble&&!e.rootEl&&n!==document&&(c.parentNode[X]._isOutsideThisEl(e.target),!qe&&_e(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function W(){K=Z(c),he=Z(c,l.draggable),L({sortable:p,name:"change",toEl:r,newIndex:K,newDraggableIndex:he,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=te(n,l.draggable,r,!0),k("dragOver"),y.eventCanceled)return m;if(c.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||p._ignoreWhileAnimating===n)return v(!1);if(ut=!1,u&&!l.disabled&&(d?f||(a=$!==O):B===this||(this.lastPutMode=Ze.checkPull(this,u,c,e))&&s.checkPut(this,u,c,e))){if(x=this._getDirection(e,n)==="vertical",o=M(c),k("dragOverValid"),y.eventCanceled)return m;if(a)return $=O,g(),this._hideClone(),k("revert"),y.eventCanceled||(we?O.insertBefore(c,we):O.appendChild(c)),v(!0);var q=$t(r,l.draggable);if(!q||pn(e,x,this)&&!q.animated){if(q===c)return v(!1);if(q&&r===e.target&&(n=q),n&&(i=M(n)),tt(O,r,c,o,n,i,e,!!n)!==!1)return g(),q&&q.nextSibling?r.insertBefore(c,q.nextSibling):r.appendChild(c),$=r,W(),v(!0)}else if(q&&hn(e,x,this)){var re=Ae(r,0,l,!0);if(re===c)return v(!1);if(n=re,i=M(n),tt(O,r,c,o,n,i,e,!1)!==!1)return g(),r.insertBefore(c,re),$=r,W(),v(!0)}else if(n.parentNode===r){i=M(n);var P=0,ne,Pe=c.parentNode!==r,H=!sn(c.animated&&c.toRect||o,n.animated&&n.toRect||i,x),Fe=x?"top":"left",ce=Rt(n,"top","top")||Rt(c,"top","top"),Me=ce?ce.scrollTop:void 0;Ce!==n&&(ne=i[Fe],We=!1,Je=!H&&l.invertSwap||Pe),P=mn(e,n,i,x,H?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,Je,Ce===n);var le;if(P!==0){var be=Z(c);do be-=P,le=$.children[be];while(le&&(b(le,"display")==="none"||le===w))}if(P===0||le===n)return v(!1);Ce=n,Ge=P;var Be=n.nextElementSibling,fe=!1;fe=P===1;var Ue=tt(O,r,c,o,n,i,e,fe);if(Ue!==!1)return(Ue===1||Ue===-1)&&(fe=Ue===1),kt=!0,setTimeout(fn,30),g(),fe&&!Be?r.appendChild(c):n.parentNode.insertBefore(c,fe?Be:n),ce&&nr(ce,0,Me-ce.scrollTop),$=c.parentNode,ne!==void 0&&!Je&&(ot=Math.abs(ne-M(n)[Fe])),W(),v(!0)}if(r.contains(c))return v(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){E(document,"mousemove",this._onTouchMove),E(document,"touchmove",this._onTouchMove),E(document,"pointermove",this._onTouchMove),E(document,"dragover",_e),E(document,"mousemove",_e),E(document,"touchmove",_e)},_offUpEvents:function(){var e=this.el.ownerDocument;E(e,"mouseup",this._onDrop),E(e,"touchend",this._onDrop),E(e,"pointerup",this._onDrop),E(e,"pointercancel",this._onDrop),E(e,"touchcancel",this._onDrop),E(document,"selectstart",this)},_onDrop:function(e){var r=this.el,n=this.options;if(K=Z(c),he=Z(c,n.draggable),V("drop",this,{evt:e}),$=c&&c.parentNode,K=Z(c),he=Z(c,n.draggable),y.eventCanceled){this._nulling();return}Te=!1,Je=!1,We=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ct(this.cloneId),Ct(this._dragStartId),this.nativeDraggable&&(E(document,"drop",this),E(r,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ye&&b(document.body,"user-select",""),b(c,"transform",""),e&&(je&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),w&&w.parentNode&&w.parentNode.removeChild(w),(O===$||B&&B.lastPutMode!=="clone")&&N&&N.parentNode&&N.parentNode.removeChild(N),c&&(this.nativeDraggable&&E(c,"dragend",this),_t(c),c.style["will-change"]="",je&&!Te&&z(c,B?B.options.ghostClass:this.options.ghostClass,!1),z(c,this.options.chosenClass,!1),L({sortable:this,name:"unchoose",toEl:$,newIndex:null,newDraggableIndex:null,originalEvent:e}),O!==$?(K>=0&&(L({rootEl:$,name:"add",toEl:$,fromEl:O,originalEvent:e}),L({sortable:this,name:"remove",toEl:$,originalEvent:e}),L({rootEl:$,name:"sort",toEl:$,fromEl:O,originalEvent:e}),L({sortable:this,name:"sort",toEl:$,originalEvent:e})),B&&B.save()):K!==Ie&&K>=0&&(L({sortable:this,name:"update",toEl:$,originalEvent:e}),L({sortable:this,name:"sort",toEl:$,originalEvent:e})),y.active&&((K==null||K===-1)&&(K=Ie,he=Xe),L({sortable:this,name:"end",toEl:$,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){V("nulling",this),O=c=$=w=we=N=nt=pe=ye=ee=je=K=he=Ie=Xe=Ce=Ge=B=Ze=y.dragged=y.ghost=y.clone=y.active=null,ct.forEach(function(e){e.checked=!0}),ct.length=vt=bt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":c&&(this._onDragOver(e),cn(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],r,n=this.el.children,o=0,i=n.length,a=this.options;o<i;o++)r=n[o],te(r,a.draggable,this.el,!1)&&e.push(r.getAttribute(a.dataIdAttr)||vn(r));return e},sort:function(e,r){var n={},o=this.el;this.toArray().forEach(function(i,a){var l=o.children[a];te(l,this.options.draggable,o,!1)&&(n[i]=l)},this),r&&this.captureAnimationState(),e.forEach(function(i){n[i]&&(o.removeChild(n[i]),o.appendChild(n[i]))}),r&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,r){return te(e,r||this.options.draggable,this.el,!1)},option:function(e,r){var n=this.options;if(r===void 0)return n[e];var o=Qe.modifyOption(this,e,r);typeof o<"u"?n[e]=o:n[e]=r,e==="group"&&sr(n)},destroy:function(){V("destroy",this);var e=this.el;e[X]=null,E(e,"mousedown",this._onTapStart),E(e,"touchstart",this._onTapStart),E(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(E(e,"dragover",this),E(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(r){r.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),dt.splice(dt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!pe){if(V("hideClone",this),y.eventCanceled)return;b(N,"display","none"),this.options.removeCloneOnHide&&N.parentNode&&N.parentNode.removeChild(N),pe=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(pe){if(V("showClone",this),y.eventCanceled)return;c.parentNode==O&&!this.options.group.revertClone?O.insertBefore(N,c):we?O.insertBefore(N,we):O.appendChild(N),this.options.group.revertClone&&this.animate(c,N),b(N,"display",""),pe=!1}}};function cn(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function tt(t,e,r,n,o,i,a,l){var s,u=t[X],d=u.options.onMove,f;return window.CustomEvent&&!de&&!Ke?s=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(s=document.createEvent("Event"),s.initEvent("move",!0,!0)),s.to=e,s.from=t,s.dragged=r,s.draggedRect=n,s.related=o||e,s.relatedRect=i||M(e),s.willInsertAfter=l,s.originalEvent=a,t.dispatchEvent(s),d&&(f=d.call(u,s,a)),f}function _t(t){t.draggable=!1}function fn(){kt=!1}function hn(t,e,r){var n=M(Ae(r.el,0,r.options,!0)),o=ir(r.el,r.options,w),i=10;return e?t.clientX<o.left-i||t.clientY<n.top&&t.clientX<n.right:t.clientY<o.top-i||t.clientY<n.bottom&&t.clientX<n.left}function pn(t,e,r){var n=M($t(r.el,r.options.draggable)),o=ir(r.el,r.options,w),i=10;return e?t.clientX>o.right+i||t.clientY>n.bottom&&t.clientX>n.left:t.clientY>o.bottom+i||t.clientX>n.right&&t.clientY>n.top}function mn(t,e,r,n,o,i,a,l){var s=n?t.clientY:t.clientX,u=n?r.height:r.width,d=n?r.top:r.left,f=n?r.bottom:r.right,_=!1;if(!a){if(l&&ot<u*o){if(!We&&(Ge===1?s>d+u*i/2:s<f-u*i/2)&&(We=!0),We)_=!0;else if(Ge===1?s<d+ot:s>f-ot)return-Ge}else if(s>d+u*(1-o)/2&&s<f-u*(1-o)/2)return gn(e)}return _=_||a,_&&(s<d+u*i/2||s>f-u*i/2)?s>d+u/2?1:-1:0}function gn(t){return Z(c)<Z(t)?1:-1}function vn(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,r=e.length,n=0;r--;)n+=e.charCodeAt(r);return n.toString(36)}function bn(t){ct.length=0;for(var e=t.getElementsByTagName("input"),r=e.length;r--;){var n=e[r];n.checked&&ct.push(n)}}function it(t){return setTimeout(t,0)}function Ct(t){return clearTimeout(t)}pt&&S(document,"touchmove",function(t){(y.active||Te)&&t.cancelable&&t.preventDefault()});y.utils={on:S,off:E,css:b,find:tr,is:function(e,r){return!!te(e,r,e,!1)},extend:Jr,throttle:rr,closest:te,toggleClass:z,clone:or,index:Z,nextTick:it,cancelNextTick:Ct,detectDirection:lr,getChild:Ae,expando:X};y.get=function(t){return t[X]};y.mount=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(y.utils=ae(ae({},y.utils),n.utils)),Qe.mount(n)})};y.create=function(t,e){return new y(t,e)};y.version=Ur;var F=[],Le,Tt,It=!1,wt,xt,ft,Re;function yn(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(r){var n=r.originalEvent;this.sortable.nativeDraggable?S(document,"dragover",this._handleAutoScroll):this.options.supportPointer?S(document,"pointermove",this._handleFallbackAutoScroll):n.touches?S(document,"touchmove",this._handleFallbackAutoScroll):S(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(r){var n=r.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?E(document,"dragover",this._handleAutoScroll):(E(document,"pointermove",this._handleFallbackAutoScroll),E(document,"touchmove",this._handleFallbackAutoScroll),E(document,"mousemove",this._handleFallbackAutoScroll)),Wt(),at(),en()},nulling:function(){ft=Tt=Le=It=Re=wt=xt=null,F.length=0},_handleFallbackAutoScroll:function(r){this._handleAutoScroll(r,!0)},_handleAutoScroll:function(r,n){var o=this,i=(r.touches?r.touches[0]:r).clientX,a=(r.touches?r.touches[0]:r).clientY,l=document.elementFromPoint(i,a);if(ft=r,n||this.options.forceAutoScrollFallback||Ke||de||Ye){Et(r,this.options,l,n);var s=ge(l,!0);It&&(!Re||i!==wt||a!==xt)&&(Re&&Wt(),Re=setInterval(function(){var u=ge(document.elementFromPoint(i,a),!0);u!==s&&(s=u,at()),Et(r,o.options,u,n)},10),wt=i,xt=a)}else{if(!this.options.bubbleScroll||ge(l,!0)===ie()){at();return}Et(r,this.options,ge(l,!1),!1)}}},ue(t,{pluginName:"scroll",initializeByDefault:!0})}function at(){F.forEach(function(t){clearInterval(t.pid)}),F=[]}function Wt(){clearInterval(Re)}var Et=rr(function(t,e,r,n){if(e.scroll){var o=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,l=e.scrollSpeed,s=ie(),u=!1,d;Tt!==r&&(Tt=r,at(),Le=e.scroll,d=e.scrollFn,Le===!0&&(Le=ge(r,!0)));var f=0,_=Le;do{var x=_,p=M(x),m=p.top,k=p.bottom,g=p.left,v=p.right,W=p.width,q=p.height,re=void 0,P=void 0,ne=x.scrollWidth,Pe=x.scrollHeight,H=b(x),Fe=x.scrollLeft,ce=x.scrollTop;x===s?(re=W<ne&&(H.overflowX==="auto"||H.overflowX==="scroll"||H.overflowX==="visible"),P=q<Pe&&(H.overflowY==="auto"||H.overflowY==="scroll"||H.overflowY==="visible")):(re=W<ne&&(H.overflowX==="auto"||H.overflowX==="scroll"),P=q<Pe&&(H.overflowY==="auto"||H.overflowY==="scroll"));var Me=re&&(Math.abs(v-o)<=a&&Fe+W<ne)-(Math.abs(g-o)<=a&&!!Fe),le=P&&(Math.abs(k-i)<=a&&ce+q<Pe)-(Math.abs(m-i)<=a&&!!ce);if(!F[f])for(var be=0;be<=f;be++)F[be]||(F[be]={});(F[f].vx!=Me||F[f].vy!=le||F[f].el!==x)&&(F[f].el=x,F[f].vx=Me,F[f].vy=le,clearInterval(F[f].pid),(Me!=0||le!=0)&&(u=!0,F[f].pid=setInterval((function(){n&&this.layer===0&&y.active._onTouchMove(ft);var Be=F[this.layer].vy?F[this.layer].vy*l:0,fe=F[this.layer].vx?F[this.layer].vx*l:0;typeof d=="function"&&d.call(y.dragged.parentNode[X],fe,Be,t,ft,F[this.layer].el)!=="continue"||nr(F[this.layer].el,fe,Be)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&_!==s&&(_=ge(_,!1)));It=u}},30),cr=function(e){var r=e.originalEvent,n=e.putSortable,o=e.dragEl,i=e.activeSortable,a=e.dispatchSortableEvent,l=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(r){var u=n||i;l();var d=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:r,f=document.elementFromPoint(d.clientX,d.clientY);s(),u&&!u.el.contains(f)&&(a("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function At(){}At.prototype={startIndex:null,dragStart:function(e){var r=e.oldDraggableIndex;this.startIndex=r},onSpill:function(e){var r=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=Ae(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(r,o):this.sortable.el.appendChild(r),this.sortable.animateAll(),n&&n.animateAll()},drop:cr};ue(At,{pluginName:"revertOnSpill"});function Pt(){}Pt.prototype={onSpill:function(e){var r=e.dragEl,n=e.putSortable,o=n||this.sortable;o.captureAnimationState(),r.parentNode&&r.parentNode.removeChild(r),o.animateAll()},drop:cr};ue(Pt,{pluginName:"removeOnSpill"});y.mount(new yn);y.mount(Pt,At);function _n(t,e,r={}){let n;const{document:o=Wr,...i}=r,a={onUpdate:d=>{En(e,d.oldIndex,d.newIndex,d)}},l=()=>{const d=typeof t=="string"?o==null?void 0:o.querySelector(t):Hr(t);!d||n!==void 0||(n=new y(d,{...a,...i}))},s=()=>{n==null||n.destroy(),n=void 0},u=(d,f)=>{if(f!==void 0)n==null||n.option(d,f);else return n==null?void 0:n.option(d)};return Gr(l),Yr(s),{stop:s,start:l,option:u}}function wn(t,e,r){const n=t.children[r];t.insertBefore(e,n)}function xn(t){t.parentNode&&t.parentNode.removeChild(t)}function En(t,e,r,n=null){n!=null&&(xn(n.item),wn(n.from,n.item,e));const o=br(t),i=o?[...St(t)]:St(t);if(r>=0&&r<i.length){const a=i.splice(e,1)[0];Kt(()=>{i.splice(r,0,a),o&&(t.value=i)})}}const Sn={class:"flex flex-col justify-start items-center flex-grow gap-4"},Dn={class:"flex justify-start items-start flex-grow-0 flex-shrink-0 relative gap-2 rounded-lg"},kn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-0.5"},Cn={class:"flex justify-start items-start self-stretch flex-grow-0 flex-shrink-0 relative gap-1.5"},Tn={class:"flex-grow w-full text-base font-medium text-center text-slate-dark-1/70 dark:text-slate-light-1/70"},In=U({__name:"TypeButton",props:{type:{type:Object,required:!0},selected:{type:Boolean,default:!1},className:{type:String,required:!1,default:""}},setup(t){const e=t,r=Ee(()=>{var o;let n="nomercy";switch((o=e.type)==null?void 0:o.value){case"music":n="noteDouble";break;case"tv":n="tv";break;case"image":n="picture";break;case"movie":n="film";break;default:n="nomercy"}return n});return(n,o)=>(C(),Q("div",{class:Ht(["flex justify-start items-start flex-grow gap-1 px-2 py-4 rounded-xl",{"bg-white/11 dark:bg-black/8 outline outline-2 outline-focus hover:bg-focus/[0.15]":t.selected,"hover:bg-focus/[0.15]":!t.selected}])},[h("div",Sn,[h("div",Dn,[I(me,{icon:r.value,"class-name":t.className},null,8,["icon","class-name"])]),h("div",kn,[h("div",Cn,[h("p",Tn,T(t.type.name),1)])])])],2))}}),On={class:"my-6 text-sm text-auto-10"},Nn=U({__name:"DeleteFolderModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},libraryId:{type:String,required:!0},name:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},setup(t){const e=t,r=ve(),n=Se();function o(){J().delete(`dashboard/libraries/${e.libraryId}/folders/${e.id}`).then(({data:i})=>{r.invalidateQueries({queryKey:["dashboard","libraries"]}),n.add({severity:i.status==="ok"?"success":"error",summary:D(i.status==="ok"?"Success":"Error"),detail:D(i.message,...i.args??[]),life:5e3}),e.close()}).catch(i=>{n.add({severity:"error",summary:D("Error"),detail:i.message,life:5e3}),e.close()})}return(i,a)=>{const l=ze("Button");return C(),Y(ht,{close:t.close,open:t.open,"max-width":"max-w-xl",params:{folder:t.name},title:"Delete folder {{folder}}"},{actions:A(()=>[I(l,{id:"yes",onclick:o,"end-icon":"trash",color:"red",type:"button",variant:"contained"},{default:A(()=>[G(T(i.$t("Delete")),1)]),_:1}),I(l,{id:"no",onclick:t.close,type:"button",color:"auto-alpha",variant:"text"},{default:A(()=>[G(T(i.$t("Cancel")),1)]),_:1},8,["onclick"])]),default:A(()=>[h("div",On,T(i.$t("Are you sure you want to delete this folder?")),1)]),_:1},8,["close","open","params"])}}}),$n={class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 gap-2"},An={class:"flex flex-col justify-center items-center flex-grow gap-2"},Pn={class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 h-10 relative overflow-hidden gap-2 pl-3 pr-2.5 py-2.5 rounded-[10px] bg-slate-light-12/3 dark:bg-slate-dark-12/[0.03] text-slate-dark-8 dark:text-slate-dark-11"},Fn={class:"flex-grow w-available text-base font-semibold text-left"},Mn=U({__name:"FolderItem",props:Qt({folder:{type:Object,required:!0}},{modelValue:{type:Object,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){var x;const e=t,r=Se(),n=ve(),o=Ot(t,"modelValue"),{data:i}=Ne({path:"dashboard/encoderProfiles",queryKey:["dashboard","encoderProfiles"]}),a=Ee(()=>{var p,m,k,g;switch(o.value.type){case"anime":return(p=i.value)==null?void 0:p.filter(v=>v.container==="m3u8").map(v=>De(v));case"movie":return(m=i.value)==null?void 0:m.filter(v=>v.container==="m3u8").map(v=>De(v));case"tv":return(k=i.value)==null?void 0:k.filter(v=>v.container==="m3u8").map(v=>De(v));case"music":return(g=i.value)==null?void 0:g.filter(v=>v.container==="mp3"||v.container==="flac").map(v=>De(v));default:return[]}}),l=R(((x=a.value)==null?void 0:x.filter(p=>{var m,k;return(k=(m=e.folder.folder)==null?void 0:m.encoder_profiles)==null?void 0:k.some(g=>g.id===p.id)}))??[]);oe([a,e],([p,m])=>{!p||!m||(l.value=p.filter(k=>{var g;return(g=m.folder.folder)==null?void 0:g.encoder_profiles.some(v=>v.id===k.id)}))},{deep:!0});function s(p){const m=p.map(k=>De(k));l.value=m,u(De(e.folder),m)}function u(p,m){if(!o.value)return;const k=o.value.folder_library.map(g=>g.folder_id===p.folder_id?{...g,folder:{...g.folder,encoder_profiles:m.map(v=>v)}}:g);J().patch(`dashboard/libraries/${o.value.id}`,{folder_library:k}).then(()=>{n.invalidateQueries({queryKey:["dashboard","libraries"]})}).catch(g=>{r.add({severity:"error",summary:D("Error"),detail:g.message,life:5e3})})}oe(o,()=>{a.value&&(l.value=a.value.filter(p=>{var m;return(m=e.folder.folder)==null?void 0:m.encoder_profiles.some(k=>k.id===p.id)}))});const d=R(!1);function f(){d.value=!0}function _(){d.value=!1}return(p,m)=>{var g;const k=ze("MultiSelect");return C(),Q(Oe,null,[h("div",$n,[I(k,{id:"encoderProfiles","model-value":l.value,placeholder:"Select",class:"w-[160px]",options:a.value,"option-label":"name","onUpdate:modelValue":s},null,8,["model-value","options"]),h("div",An,[h("div",Pn,[h("p",Fn,T(t.folder.folder.path),1),h("button",{class:"flex-grow-0 flex-shrink-0 cursor-pointer hover:text-slate-light-12 hover:dark:text-slate-dark-12",onClick:f},[I(me,{icon:"trash","class-name":"w-6 h-6"})])])])]),I(Nn,{id:t.folder.folder.id,"library-id":(g=o.value)==null?void 0:g.id,name:t.folder.folder.path,close:_,open:d.value},null,8,["id","library-id","name","open"])],64)}}}),Bn={class:"mx-auto flex w-full flex-col h-available overflow-clip"},qn=U({__name:"NewFolderModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},folder:{type:String,required:!0},setFolder:{type:Function,required:!0},library:{type:Object,required:!1}},setup(t){const e=t,r=yr(),n=ve(),o=Se();function i(){var a;J().post(`dashboard/libraries/${r.params.id??((a=e.library)==null?void 0:a.id)}/folders`,{path:e.folder}).then(({data:l})=>{n.invalidateQueries({queryKey:["dashboard","libraries"]}),o.add({severity:l.status==="ok"?"success":"error",summary:D(l.status==="ok"?"Success":"Error"),detail:D(l.message,...l.args),life:5e3}),e.setFolder("/"),e.close()}).catch(l=>{console.error("Error adding folder:",l),e.close()})}return(a,l)=>{const s=ze("Button");return C(),Y(ht,{close:t.close,open:t.open,"max-width":"max-w-5xl",title:"Add folder"},{actions:A(()=>[I(s,{id:"yes",onclick:i,color:"theme",type:"button",variant:"contained"},{default:A(()=>[G(T(a.$t("Add")),1)]),_:1}),I(s,{id:"no",onclick:t.close,type:"button",color:"auto-alpha",variant:"text"},{default:A(()=>[G(T(a.$t("Cancel")),1)]),_:1},8,["onclick"])]),default:A(()=>[h("div",Bn,[I(Cr,{selected:t.folder,"set-selected":t.setFolder},null,8,["selected","set-selected"])])]),_:1},8,["close","open"])}}}),jn={class:"flex flex-col justify-start items-start flex-grow-0 flex-shrink-0 w-full relative gap-8 p-1 px-6"},Ln={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-3"},Rn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-6"},Yn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-4"},Vn={class:"grid grid-cols-4 justify-start items-start self-stretch gap-2"},Xn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-2"},Gn={class:"flex justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-2"},Wn={class:"flex flex-col justify-start items-start flex-grow gap-1.5"},Hn={class:"flex justify-start items-center flex-grow-0 flex-shrink-0 relative gap-px"},zn={class:"flex-grow-0 flex-shrink-0 text-sm font-medium text-left text-auto-10"},Kn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-3"},Qn={class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 relative gap-2 rounded"},Un={class:"flex-grow w-[501px] text-lg font-medium text-left text-auto-11"},Zn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-6"},Jn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-2"},eo={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-2"},to={class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 relative gap-1 text-slate-light-12 dark:text-slate-dark-11"},ro={class:"flex-grow-0 flex-shrink-0 text-sm text-left"},no={class:"flex w-full justify-end items-start self-stretch flex-grow-0 flex-shrink-0 gap-2 rounded-lg bg-white/[0.04] p-2"},oo=U({__name:"EditLibraryModal",props:Qt({open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},{modelValue:{type:Object,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){var m,k;const e=t,r=Ot(t,"modelValue"),n=ve(),o=Se(),i=R((m=r.value)==null?void 0:m.title),a=Ut(i,500),l=R(((k=r.value)==null?void 0:k.type)??"movie");oe(r,g=>{g&&(i.value=g.title,l.value=g.type||"movie",r.value.folder_library||(r.value={...r.value,folder_library:[]}))},{deep:!0});const s=R([]),u=R("/");function d(g){u.value=g}const f=R(!1);function _(){f.value=!0}function x(){f.value=!1}function p(){J().patch(`dashboard/libraries/${r.value.id}`,{...r.value,subtitles:s.value.map(g=>g.iso_639_1),specialSeasonName:r.value.specialSeasonName}).then(()=>{n.invalidateQueries({queryKey:["dashboard","libraries"]}),e.close()}).catch(g=>{o.add({severity:"error",summary:D("Error"),detail:g.message,life:5e3}),e.close()})}return oe(a,g=>{g&&J().patch(`dashboard/libraries/${r.value.id}`,{title:g}).then(()=>{n.invalidateQueries({queryKey:["dashboard","libraries"]})}).catch(v=>{o.add({severity:"error",summary:D("Error"),detail:v.message,life:5e3})})}),oe(l,g=>{g&&J().patch(`dashboard/libraries/${r.value.id}`,{type:g}).then(()=>{n.invalidateQueries({queryKey:["dashboard","libraries"]})}).catch(v=>{o.add({severity:"error",summary:D("Error"),detail:v.message,life:5e3})})}),(g,v)=>{const W=ze("InputText");return C(),Q(Oe,null,[I(ht,{id:"editLibraryModal",close:t.close,open:t.open,"max-width":"max-w-[565px]",title:"Edit Library",background:"","no-close":""},{actions:A(()=>[h("div",no,[I(xe,{id:"done",type:"button",color:"theme",variant:"contained",onClick:p},{default:A(()=>[G(T(g.$t("Done")),1)]),_:1})])]),default:A(()=>{var q,re;return[h("div",jn,[h("div",Ln,[h("div",Rn,[h("div",Yn,[h("div",Vn,[(C(!0),Q(Oe,null,lt(Dt(_r),P=>(C(),Y(In,{key:P.value,type:P,selected:l.value===P.value,"class-name":"size-8 text-slate-dark-5 dark:text-slate-light-5",onClick:ne=>l.value=P.value},null,8,["type","selected","onClick"]))),128))]),h("div",Xn,[h("div",Gn,[h("div",Wn,[h("div",Hn,[h("p",zn,T(g.$t("Library Title")),1),v[2]||(v[2]=h("p",{class:"flex-grow-0 flex-shrink-0 text-sm font-medium text-left text-focus"}," * ",-1))]),I(W,{id:"title",modelValue:i.value,"onUpdate:modelValue":v[0]||(v[0]=P=>i.value=P),class:"w-full",required:""},null,8,["modelValue"])])])])])])]),v[3]||(v[3]=h("div",{class:"flex-grow-0 flex-shrink-0 w-10 h-0.5 rounded bg-[#e2f0fd]/[0.08]"},null,-1)),h("div",Kn,[h("div",Qn,[h("p",Un,T(g.$t("Select one or more folders")),1)]),h("div",Zn,[h("div",Jn,[h("div",eo,[h("button",{id:"save",type:"button",class:"group/button flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 h-11 relative overflow-hidden gap-2 pl-3 pr-2.5 py-2.5 rounded-[10px] text-slate-dark-8 dark:text-slate-dark-11 font-semibold transition-colors bg-slate-dark-2/[0.13] dark:bg-slate-dark-11/[0.14] hover:bg-slate-dark-12/[0.13] hover:dark:bg-slate-dark-12/[0.14] active:bg-slate-dark-12/[0.13] active:dark:bg-slate-dark-10/[0.14]",onClick:_},[h("span",null,T(g.$t("Add folder")),1),I(me,{icon:"folderAdd","class-name":"w-6 h-6 flex-grow-0 flex-shrink-0 ml-auto group-hover/button:text-slate-light-12 group-hover/button:dark:text-slate-dark-12"})])]),(q=r.value)!=null&&q.folder_library?(C(!0),Q(Oe,{key:0},lt((re=r.value)==null?void 0:re.folder_library,P=>(C(),Y(Mn,{key:P.folder_id,modelValue:r.value,"onUpdate:modelValue":v[1]||(v[1]=ne=>r.value=ne),folder:P},null,8,["modelValue","folder"]))),128)):He("",!0),h("div",to,[I(me,{icon:"infoCircle","class-name":"w-4 h-4 flex-grow-0 flex-shrink-0"}),h("p",ro,T(g.$t("You can always add folder and change encoding profiles later")),1)])])])])])]}),_:1},8,["close","open"]),I(qn,{close:x,folder:u.value,open:f.value,"set-folder":d,library:r.value},null,8,["folder","open","library"])],64)}}}),io={class:"my-6 text-sm text-auto-10"},ao=U({__name:"DeleteLibraryModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},name:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},setup(t){const e=t,r=ve(),n=Se();function o(){J().delete(`dashboard/libraries/${e.id}`).then(({data:i})=>{n.add({severity:i.status==="ok"?"success":"error",summary:D(i.status==="ok"?"Success":"Error"),detail:D(i.message,...i.args??[]),life:5e3}),r.invalidateQueries({queryKey:["dashboard","libraries"]})}),e.close()}return(i,a)=>(C(),Y(ht,{close:t.close,open:t.open,"max-width":"max-w-xl",params:{library:e.name},title:"Delete library {{library}}"},{actions:A(()=>[I(xe,{id:"yes",onclick:o,"end-icon":"trash",color:"red",type:"button",variant:"contained"},{default:A(()=>[G(T(i.$t("Delete")),1)]),_:1}),I(xe,{id:"no",onclick:t.close,type:"button",color:"auto-alpha",variant:"text"},{default:A(()=>[G(T(i.$t("Cancel")),1)]),_:1},8,["onclick"])]),default:A(()=>[h("div",io,T(i.$t("Are you sure you want to delete this library?")),1)]),_:1},8,["close","open","params"]))}}),lo={class:"flex h-min children:cursor-default flex-col items-center rounded-lg w-inherit odd:bg-slate-light-12/5 even:bg-slate-light-12/2 dark:odd:bg-slate-dark-12/5 dark:even:bg-slate-dark-12/2 text-slate-light-12/80 dark:text-slate-dark-12/80"},so={class:"flex items-center gap-2 overflow-x-hidden py-2 pr-2 w-inherit overflow-y-show"},uo={class:"ml-2 h-auto w-8 p-2 handle"},co={class:"w-full line-clamp-1"},fo=U({__name:"LibraryItem",props:{modelValue:{type:Object,required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(t){const e=Ot(t,"modelValue"),r=R(!1);function n(){r.value=!0}function o(){r.value=!1}const i=R(!1);function a(){i.value=!0}function l(){i.value=!1}const s=Ee(()=>{let u;switch(e.value.type){case"music":u="noteDouble";break;case"tv":u="tv";break;case"image":u="camera";break;case"movie":u="film";break;default:u="nomercy"}return u});return(u,d)=>{var f,_,x;return C(),Q("div",lo,[h("div",so,[h("button",uo,[I(me,{icon:"menuDotsVertical",class:"h-6 w-6"})]),I(me,{icon:s.value,class:"h-6 w-6"},null,8,["icon"]),h("span",co,T((f=e.value)==null?void 0:f.title),1),h("button",{class:"ml-auto flex justify-center items-center h-10 px-2.5 py-2 gap-2 rounded-lg text-sm select-none w-auto font-semibold leading-[100%] transition-all duration-150 button-text hover:outline-slate-light-11 dark:hover:outline-slate-dark-11 outline-1 outline outline-transparent",type:"button",onClick:a},[I(me,{icon:"folderEdit",class:"h-6 w-6"})]),h("button",{class:"ml-auto flex justify-center items-center h-10 px-2.5 py-2 gap-2 rounded-lg text-sm select-none w-auto font-semibold leading-[100%] transition-all duration-150 button-text hover:outline-slate-light-11 dark:hover:outline-slate-dark-11 outline-1 outline outline-transparent",type:"button",onClick:n},[I(me,{icon:"folderRemove",class:"h-6 w-6"})])]),e.value?(C(),Y(oo,{key:0,id:(_=e.value)==null?void 0:_.id,modelValue:e.value,"onUpdate:modelValue":d[0]||(d[0]=p=>e.value=p),close:l,open:i.value},null,8,["id","modelValue","open"])):He("",!0),e.value?(C(),Y(ao,{key:1,id:(x=e.value)==null?void 0:x.id,name:e.value.title,close:o,open:r.value},null,8,["id","name","open"])):He("",!0)])}}}),ho=Tr(fo,[["__scopeId","data-v-243224fd"]]),po={class:"flex flex-col overflow-hidden text-start h-available"},mo={class:"mb-2 text-xl font-semibold"},go={class:"mb-4 text-sm"},vo={class:"mt-4 flex w-full justify-start"},bo=U({__name:"Libraries",props:{setNextButtonLocked:{type:Function,required:!0}},setup(t){const e=t,r=ve(),{data:n}=Ne({path:"dashboard/libraries",queryKey:["dashboard","libraries"]}),o=R(null),i=R(n.value??[]);oe(n,s=>{console.log("Libraries updated:",s),s&&(i.value=s,e.setNextButtonLocked((s==null?void 0:s.length)===0))});function a(){J().post("dashboard/libraries").then(()=>{r.invalidateQueries({queryKey:["dashboard","libraries"]})})}function l(){J().patch("dashboard/libraries/sort",{libraries:i.value.map((s,u)=>({id:s.id,order:u}))}).then(()=>{r.invalidateQueries({queryKey:["dashboard","libraries"]})})}return oe(i,()=>{l()}),_n(o,i,{animation:150,handle:".handle"}),(s,u)=>(C(),Q("div",po,[h("h2",mo,T(s.$t("Organize your media library")),1),h("p",go,T(s.$t("Add your media libraries to organize your content.")),1),h("div",{ref_key:"el",ref:o,class:"flex h-auto w-full flex-col overflow-y-auto text-start gap-1"},[(C(!0),Q(Oe,null,lt(i.value,(d,f)=>(C(),Y(ho,{key:d.id,modelValue:i.value[f],"onUpdate:modelValue":_=>i.value[f]=_},null,8,["modelValue","onUpdate:modelValue"]))),128))],512),h("div",vo,[I(xe,{id:"yes",color:"theme",type:"button",variant:"contained",onClick:a},{default:A(()=>[G(T(s.$t("Add media library")),1)]),_:1})])]))}}),yo=U({__name:"Finish",props:{setNextButtonLocked:{type:Function,required:!0}},setup(t){return Ir(),ve(),(e,r)=>null}}),_o={class:"flex flex-col gap-2 h-available"},wo={class:"flex flex-col gap-2"},xo={class:"mt-auto flex flex-col"},Eo={class:"mb-4 text-sm"},So={href:"https://nomercy.tv/privacy-policy",target:"_blank",class:"text-theme-10 hover:underline"},Do={href:"https://nomercy.tv/terms-of-service",target:"_blank",class:"text-theme-10 hover:underline"},ko=U({__name:"Base",props:{setNextButtonLocked:{type:Function,required:!0}},setup(t){var s;const e=t,r=ve(),n=Se(),{data:o}=Ne({path:"dashboard/server/info",queryKey:["serverinfo"]}),i=R(((s=o.value)==null?void 0:s.server)??""),a=Ut(i,500);oe(o,u=>{u&&(i.value=u.server)});function l(){J().patch("dashboard/server/info",{name:a.value}).then(({data:u})=>{n.add({severity:"success",summary:D("Success"),detail:D(u.message,...u.args??[]),life:5e3}),r.invalidateQueries({queryKey:["servers"]})})}return oe(a,(u,d)=>{!u||u===d||d===""||l()}),oe(i,u=>{e.setNextButtonLocked(!u)}),(u,d)=>{const f=ze("InputText");return C(),Q("div",_o,[h("div",wo,[d[1]||(d[1]=h("label",{for:"serverName"},"Server name",-1)),I(f,{id:"serverName",modelValue:i.value,"onUpdate:modelValue":d[0]||(d[0]=_=>i.value=_),class:"w-1/3",name:"Give your server a friendly name to help identify it."},null,8,["modelValue"])]),h("div",xo,[h("p",Eo,[G(T(u.$t("By using this NoMercy app, a NoMercy MediaServer, or any of our services, you agree to the"))+" ",1),h("a",So,T(u.$t("Privacy Policy")),1),G(" "+T(u.$t("and"))+" ",1),h("a",Do,T(u.$t("Terms of Service")),1),d[2]||(d[2]=G(". "))])])])}}}),Xo=U({__name:"Desktop",setup(t){const e=Se(),r=R(["Base info","Media libraries","Finish"]),n=R("Base info"),o=R(!1);async function i(){console.log("Finish"),await J().post("/dashboard/libraries/refresh").then(()=>{e.add({severity:"success",summary:D("Success"),detail:"Your media libraries are being scanned in the background.",life:16e3})}).catch(s=>{e.add({severity:"error",summary:"Error refreshing libraries",detail:s.message,life:16e3})}),await J().get("libraries").then(({data:s})=>{Er(s.data),Sr.value=!0,Dr.value=!0,Bt.replace("/")}).catch(()=>{Bt.replace({name:"Server offline"})})}function a(s){n.value=s}function l(s){o.value=s}return zt(()=>{e.add({severity:"info",summary:D("This is an informational message."),life:5e5}),e.add({severity:"info",summary:D("Info"),detail:D("This is an informational message."),life:5e5}),e.add({severity:"success",summary:D("This is a success message."),life:5e5}),e.add({severity:"success",summary:D("Success"),detail:D("This is a success message."),life:5e5}),e.add({severity:"warn",summary:D("This is a warning message."),life:5e5}),e.add({severity:"warn",summary:D("Warning"),detail:D("This is a warning message."),life:5e5}),e.add({severity:"error",summary:D("This is an error message."),life:5e5}),e.add({severity:"error",summary:D("Error"),detail:D("This is an error message."),life:5e5}),e.add({severity:"secondary",summary:D("This is an secondary message."),life:5e5}),e.add({severity:"secondary",summary:D("Secondary"),detail:D("This is an secondary message."),life:5e5}),e.add({severity:"contrast",summary:D("This is an contrast message."),life:5e5}),e.add({severity:"contrast",summary:D("Contrast"),detail:D("This is an contrast message."),life:5e5})}),(s,u)=>(C(),Y(Dt(xr),null,{default:A(()=>[I(Dt(wr),{fullscreen:!0},{default:A(()=>[I(Rr,{"current-step":n.value,finish:i,"next-button-locked":o.value,"set-current-step":a,steps:r.value},{default:A(()=>[n.value==="Base info"?(C(),Y(ko,{key:0,"set-next-button-locked":l})):n.value==="Media libraries"?(C(),Y(bo,{key:1,"set-next-button-locked":l})):n.value==="Finish"?(C(),Y(yo,{key:2,"set-next-button-locked":l})):He("",!0)]),_:1},8,["current-step","next-button-locked","steps"])]),_:1})]),_:1}))}});export{Xo as default};
