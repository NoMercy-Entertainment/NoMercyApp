{"version":3,"file":"MusicCard.vue_vue_type_script_setup_true_lang-B_r4AkHa.js","sources":["../../src/components/Cards/MusicCard.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { PropType, computed, ref, watch, nextTick } from 'vue';\nimport { useTranslation } from 'i18next-vue';\n\nimport type { HomeDataItem } from '@/types/api/music';\nimport type { MusicCardPageResponseData } from '@/types/api/music/musicPlayer';\nimport type { Album } from \"@/types/api/music/album\";\n\nimport { pickPaletteColor } from '@/lib/colorHelper';\nimport MusicCardImage from '@/components/Cards/MusicCardImage.vue';\n\n\nconst props = defineProps({\n    data: {\n        type: Object as PropType<HomeDataItem | MusicCardPageResponseData | Album> | undefined,\n        required: true,\n    },\n    className: {\n        type: String,\n        required: false,\n        default: '',\n    },\n});\nwatch(props, (value) => {\n    if (!value) return;\n    nextTick(() => {\n        document.dispatchEvent(new Event('indexer'));\n    });\n});\n\nconst { t } = useTranslation();\n\nconst footText = computed(() => {\n    let text = '';\n\n    if (props.data.type == 'playlists') {\n        text += t('Playlist');\n    } else if (props.data.type == 'favorites') {\n        text += t('Playlist');\n    } else if (props.data.type == 'albums') {\n        text += t('Album');\n    } else if (props.data.type == 'artists') {\n        text += t('Artist');\n    } else if (props.data.type == 'release_groups') {\n        text += t('Release');\n    } else if (props.data.type == 'genres') {\n        text += t('Genre');\n    }\n\n    if (props.data?.tracks) {\n        text += ` • ${props.data?.tracks} ${(props.data?.tracks ?? 0) > 1\n            ? t('tracks')\n            : t('track')}`;\n    } else {\n        text += ` • ${props.data?.year}`;\n    }\n\n    return text;\n});\n\nconst ringColor = ref(pickPaletteColor(props.data.color_palette?.cover)\n    ?.replace('rgb(', '')\n    .replace(')', '')\n    .replace(/,/gu, ' ') ?? 'var(--color-primary)');\n\n</script>\n\n<template>\n    <RouterLink v-if=\"data?.link\"\n        class=\"relative flex flex-grow flex-col items-center justify-end transition-transform duration-100 group/musicCard active:scale-[98%] w-full\"\n        :to=\"data.link\" :style=\"`--color-focus: ${ringColor}`\">\n        <MusicCardImage :data=\"data\" />\n        <div class=\"flex flex-shrink-0 flex-grow-0 items-center justify-start self-stretch py-2 pr-1 pl-2\">\n            <div class=\"relative flex flex-grow flex-col items-start justify-center text-left\">\n                <p class=\"h-6 w-full flex-shrink-0 flex-grow-0 self-stretch text-sm font-semibold line-clamp-1\"\n                    :title=\"data?.name ?? (data as HomeDataItem)?.title\">\n                    {{ data?.name ?? (data as HomeDataItem)?.title }}\n                </p>\n                <p\n                    class=\"h-6 w-full flex-shrink-0 flex-grow-0 self-stretch whitespace-nowrap text-xs font-medium text-auto-10 line-clamp-1 empty:hidden dark:font-normal\">\n                    {{ footText }}&nbsp;\n                </p>\n            </div>\n        </div>\n    </RouterLink>\n</template>\n"],"names":["props","__props","watch","value","nextTick","t","useTranslation","footText","computed","text","_a","_b","_c","_d","ringColor","ref","pickPaletteColor"],"mappings":"ysBAYA,MAAMA,EAAQC,EAWRC,EAAAF,EAAQG,GAAU,CACfA,GACLC,EAAS,IAAM,CACX,SAAS,cAAc,IAAI,MAAM,SAAS,CAAC,CAAA,CAC9C,CAAA,CACJ,EAEK,KAAA,CAAE,EAAAC,CAAE,EAAIC,EAAe,EAEvBC,EAAWC,EAAS,IAAM,aAC5B,IAAIC,EAAO,GAEP,OAAAT,EAAM,KAAK,MAAQ,aAEZA,EAAM,KAAK,MAAQ,YAD1BS,GAAQJ,EAAE,UAAU,EAGbL,EAAM,KAAK,MAAQ,SAC1BS,GAAQJ,EAAE,OAAO,EACVL,EAAM,KAAK,MAAQ,UAC1BS,GAAQJ,EAAE,QAAQ,EACXL,EAAM,KAAK,MAAQ,iBAC1BS,GAAQJ,EAAE,SAAS,EACZL,EAAM,KAAK,MAAQ,WAC1BS,GAAQJ,EAAE,OAAO,IAGjBK,EAAAV,EAAM,OAAN,MAAAU,EAAY,OACZD,GAAQ,OAAME,EAAAX,EAAM,OAAN,YAAAW,EAAY,MAAM,OAAKC,EAAAZ,EAAM,OAAN,YAAAY,EAAY,SAAU,GAAK,EAC1DP,EAAE,QAAQ,EACVA,EAAE,OAAO,CAAC,GAERI,GAAA,OAAMI,EAAAb,EAAM,OAAN,YAAAa,EAAY,IAAI,GAG3BJ,CAAA,CACV,EAEKK,EAAYC,IAAIJ,EAAAK,GAAiBN,EAAAV,EAAM,KAAK,gBAAX,YAAAU,EAA0B,KAAK,IAAhD,YAAAC,EAChB,QAAQ,OAAQ,IACjB,QAAQ,IAAK,IACb,QAAQ,MAAO,OAAQ,sBAAsB"}