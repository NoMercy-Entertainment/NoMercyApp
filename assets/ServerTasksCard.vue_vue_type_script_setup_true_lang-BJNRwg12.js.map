{"version":3,"file":"ServerTasksCard.vue_vue_type_script_setup_true_lang-BJNRwg12.js","sources":["../../src/views/Dashboard/System/System/Components/ServerSystemInfoCard.vue","../../src/views/Dashboard/System/System/Components/ServerTasksCard/ServerEncoderTaskCard.vue","../../src/views/Dashboard/System/System/Components/ServerTasksCard/ServerQueueTaskCard.vue","../../src/views/Dashboard/System/System/Components/ServerTasksCard/ServerTasksCard.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { onMounted, ref } from 'vue';\nimport { useQuery } from '@tanstack/vue-query';\n\nimport type { PauseResumeResponse, RunnersResponse, ServerInfo } from '@/types/api/dashboard/server';\n\nimport useServerClient from '@/lib/clients/useServerClient';\nimport serverClient from '@/lib/clients/serverClient';\nimport { currentServer } from '@/store/currentServer';\nimport { useSocket } from '@/store/socket';\n\nimport MoooomIcon from '@/components/Images/icons/MoooomIcon.vue';\nimport KeepCounting from '@/components/KeepCounting.vue';\n\nimport ServerSystemCard from './ServerSystemCard.vue';\n\nconst isPaused = ref(false);\nconst isOnline = ref(true);\n\nconst { data: runners, refetch } = useQuery({\n  queryKey: ['runners', currentServer.value?.serverBaseUrl],\n  retryOnMount: true,\n  queryFn: () =>\n    serverClient()\n      .get<RunnersResponse>('dashboard/tasks/runners')\n      .then(({ data }) => {\n        isPaused.value = !(data.workers > 0);\n        return data.workers ?? [];\n      }),\n});\n\nconst { data: serverInfo } = useServerClient<ServerInfo>({\n  path: 'dashboard/server/info',\n  queryKey: ['serverInfo', currentServer.value?.serverBaseUrl],\n});\n\nconst connected = () => {\n  isOnline.value = true;\n  refetch();\n};\nconst disconnected = () => {\n  isOnline.value = false;\n};\n\nonMounted(() => {\n  const socket = useSocket();\n  socket?.onreconnected(connected);\n  socket?.onclose(disconnected);\n});\n\nconst togglePause = () => {\n  serverClient()\n    .post<PauseResumeResponse>(`dashboard/tasks/${isPaused.value\n      ? 'resume'\n      : 'pause'}`)\n    .then(({ data }) => {\n      isPaused.value = !isPaused.value;\n      // showNotification({\n      //     title: t('Success'),\n      //     body: t(isPaused.value\n      //         ? 'Paused'\n      //         : 'Resumed'),\n      //     type: TYPE.SUCCESS,\n      // });\n      return data;\n    })\n    .catch((response) => {\n      // showNotification({\n      //     title: t('Error'),\n      //     body: response.data.message,\n      //     type: TYPE.ERROR,\n      // });\n    });\n};\n\nconst handleSubmit = () => {\n  //\n};\n\nconst toggleServerState = () => {\n  alert('ok bye!');\n};\n\n</script>\n\n<template>\n  <ServerSystemCard title=\"System\">\n\n    <template v-slot:cta>\n      <button\n        class=\"relative h-7 flex flex-shrink-0 flex-grow-0 items-center justify-center gap-2 overflow-hidden border border-solid border-slate-light-10 dark:border-slate-dark-10 text-slate-light-12/80 dark:text-slate-dark-12/80 rounded-lg pl-1 pr-2 py-1\">\n        <MoooomIcon icon=\"pause\" class=\"w-4\" />\n        <p class=\"flex-shrink-0 flex-grow-0 text-sm\">\n          {{ $t('Pause') }}\n        </p>\n      </button>\n      <button\n        class=\"relative h-7 flex flex-shrink-0 flex-grow-0 items-center justify-center gap-2 overflow-hidden border border-solid border-slate-light-10 dark:border-slate-dark-10 text-slate-light-12/80 dark:text-slate-dark-12/80 rounded-lg pl-1 pr-2 py-1\">\n        <MoooomIcon icon=\"shutdown\" class=\"w-4\" />\n        <p class=\"flex-shrink-0 flex-grow-0 text-sm\">\n          {{ $t('Shutdown') }}\n        </p>\n      </button>\n    </template>\n\n    <div\n      class=\"relative flex flex-shrink-0 flex-grow-0 items-start justify-start gap-4 self-stretch overflow-clip w-available\">\n      <p class=\"w-auto flex-grow whitespace-nowrap text-sm text-slate-light-12 dark:text-slate-dark-12\">\n        {{ $t('Server') }}\n      </p>\n      <p class=\"flex-shrink-0 flex-grow-0 text-sm line-clamp-1 text-slate-light-10 dark:text-slate-dark-10\">\n        {{ serverInfo?.server }}\n      </p>\n    </div>\n    <div\n      class=\"relative flex flex-shrink-0 flex-grow-0 items-start justify-start gap-4 self-stretch overflow-clip w-available\">\n      <p class=\"w-auto flex-grow whitespace-nowrap text-sm text-slate-light-12 dark:text-slate-dark-12\">\n        {{ $t('Server version') }}\n      </p>\n      <p class=\"flex-shrink-0 flex-grow-0 text-sm line-clamp-1 text-slate-light-10 dark:text-slate-dark-10\">\n        {{ serverInfo?.version }}\n      </p>\n    </div>\n    <div\n      class=\"relative flex flex-shrink-0 flex-grow-0 items-start justify-start gap-4 self-stretch overflow-clip w-available\">\n      <p class=\"w-auto flex-grow whitespace-nowrap text-sm text-slate-light-12 dark:text-slate-dark-12\">\n        {{ $t('Uptime') }}\n      </p>\n      <p class=\"flex-shrink-0 flex-grow-0 text-sm line-clamp-1 text-slate-light-10 dark:text-slate-dark-10\">\n        <KeepCounting :startTime=\"serverInfo?.bootTime\" :key=\"serverInfo?.bootTime\" />\n      </p>\n    </div>\n    <div\n      class=\"relative flex flex-shrink-0 flex-grow-0 items-start justify-start gap-4 self-stretch overflow-clip w-available\">\n      <p class=\"w-auto flex-grow whitespace-nowrap text-sm text-slate-light-12 dark:text-slate-dark-12\">\n        {{ $t('OS') }}\n      </p>\n      <p class=\"flex-shrink-0 flex-grow-0 text-sm line-clamp-1 text-slate-light-10 dark:text-slate-dark-10\">\n        {{ serverInfo?.os.toTitleCase() }}\n      </p>\n    </div>\n    <div\n      class=\"relative flex flex-shrink-0 flex-grow-0 items-start justify-start gap-4 self-stretch overflow-clip w-available\">\n      <p class=\"w-auto flex-grow whitespace-nowrap text-sm text-slate-light-12 dark:text-slate-dark-12\">\n        {{ $t('Architecture') }}\n      </p>\n      <p class=\"flex-shrink-0 flex-grow-0 text-sm line-clamp-1 text-slate-light-10 dark:text-slate-dark-10\">\n        {{ serverInfo?.arch }}\n      </p>\n    </div>\n    <div\n      class=\"relative flex flex-shrink-0 flex-grow-0 items-start justify-start gap-4 self-stretch overflow-clip w-available\"\n      v-for=\"(cpu, index) in serverInfo?.cpu\">\n      <p class=\"w-auto flex-grow whitespace-nowrap text-sm text-slate-light-12 dark:text-slate-dark-12\">\n        {{ $t('CPU') }} #{{ index + 1 }}\n      </p>\n      <p class=\"flex-shrink-0 flex-grow-0 text-sm line-clamp-1 text-slate-light-10 dark:text-slate-dark-10\">\n        {{ cpu }}\n      </p>\n    </div>\n    <div\n      class=\"relative flex flex-shrink-0 flex-grow-0 items-start justify-start gap-4 self-stretch overflow-clip w-available\"\n      v-for=\"(gpu, index) in serverInfo?.gpu\">\n      <p class=\"w-auto flex-grow whitespace-nowrap text-sm text-slate-light-12 dark:text-slate-dark-12\">\n        {{ $t('GPU') }} #{{ index + 1 }}\n      </p>\n      <p class=\"flex-shrink-0 flex-grow-0 text-sm line-clamp-1 text-slate-light-10 dark:text-slate-dark-10\">\n        {{ gpu }}\n      </p>\n    </div>\n  </ServerSystemCard>\n</template>\n\n<style scoped lang=\"scss\">\n:root {\n  --p-metergroup-label-marker-size: 0.5rem;\n}\n</style>","<script setup lang=\"ts\">\nimport { computed, PropType, ref, watch } from 'vue';\n\nimport { ServerEncoderProgress } from '@/types/api/dashboard/server';\n\nimport serverClient from '@/lib/clients/serverClient';\nimport { currentServer } from '@/store/currentServer';\nimport MoooomIcon from '@/components/Images/icons/MoooomIcon.vue';\nimport { user } from '@/store/user';\n\nconst props = defineProps({\n  data: {\n    type: Object as PropType<ServerEncoderProgress>,\n    required: true,\n  }\n});\n\nconst propStatus = ref(props.data?.status);\n\nwatch(props, (value) => {\n  propStatus.value = value.data.status;\n});\n\nconst status = computed(() => {\n  if (propStatus.value === 'running') {\n    return 'running';\n  } else {\n    return 'paused';\n  }\n});\n\nconst thumbnail = computed(() => {\n  if (!props.data.thumbnails) return null;\n\n  const baseUrl = currentServer.value?.serverBaseUrl + '\\\\' + props.data.thumbnails;\n  return baseUrl.replace(/\\\\+/gu, '/')\n    .replace(/\\/\\/images/u, '/images') + '?token=' + user.value.accessToken\n});\n\nconst pauseJob = () => {\n  serverClient()\n    .post(`/dashboard/tasks/pause/${props.data.process_id}`)\n    .then(({ data }) => {\n      propStatus.value = data ? 'paused' : propStatus.value;\n    })\n    .catch(() => {\n      // error\n    });\n};\n\nconst resumeJob = () => {\n  serverClient()\n    .post(`/dashboard/tasks/resume/${props.data.process_id}`)\n    .then(({ data }) => {\n      propStatus.value = data ? 'running' : propStatus.value;\n    })\n    .catch(() => {\n      // error\n    });\n};\n\nconst toggleRunning = () => {\n  if (propStatus.value === 'running') {\n    pauseJob();\n  } else {\n    resumeJob();\n  }\n};\n\n</script>\n\n<template>\n  <div v-if=\"data\"\n    class=\"relative flex w-full flex-col items-start justify-start overflow-clip rounded-lg pt-2 group/encoderCard gap-1.5 px-2.5 pb-3.5 bg-slate-lightA-3 dark:bg-slate-darkA-3\">\n    <div class=\"relative flex w-full items-center justify-center gap-0.5\">\n      <p class=\"w-full flex-grow text-sm font-semibold text-auto-12 line-clamp-1 h-6\" :title=\"data.title.replace(/NoMercy/giu, '')\">\n        {{ data.title.replace(/NoMercy/giu, '') }}\n      </p>\n      <p class=\"flex-shrink-0 flex-grow-0 text-right text-xs font-light text-auto-alpha-10\">\n        {{ $t('Id') }}: {{ data?.process_id }}\n      </p>\n    </div>\n    <div class=\"relative flex items-start justify-start gap-2\">\n      <div v-if=\"data?.message == 'Encoding video'\"\n        class=\"relative aspect-video h-auto w-1/3 flex-shrink-0 flex-grow-0 overflow-hidden rounded-sm min-w-36\" style=\"\n                    background: linear-gradient(\n                      to bottom,\n                      rgba(0, 0, 0, 0) 0%,\n                      rgba(0, 0, 0, 0) 25%,\n                      rgba(0, 0, 0, 0) 50%,\n                      #000 100%\n                    );\n                \">\n        <div class=\"absolute inset-0 z-0 h-full w-full bg-white/[0.01]\">\n          <div class=\"pointer-events-none absolute inset-0 z-10 mt-auto h-4/5 bg-gradient-to-t from-black via-black/60\">\n          </div>\n          <img v-if=\"thumbnail\" :src=\"thumbnail\" class=\"absolute z-0 h-full w-full\" alt=\"\" />\n        </div>\n\n        <div @click=\"toggleRunning\"\n          class=\"absolute top-1/2 left-1/2 z-10 group-hover/encoderCard:flex hidden h-11 w-11 -translate-x-1/2 -translate-y-1/2 rounded-full bg-black/60 p-0.5 group/progress text-focus\">\n          <div class=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-[10px]\">\n            <MoooomIcon v-if=\"status == 'running'\" icon=\"pause\" class=\"w-10 text-white\" />\n            <MoooomIcon v-else icon=\"play\" class=\"w-10 text-white\" />\n\n            <!--                        <span class=\"group-hover/progress:hidden text-right font-bold text-auto-12 monospace\">-->\n            <!--                            {{ Math.floor(data?.progress ?? 0) }}%-->\n            <!--                        </span>-->\n          </div>\n        </div>\n\n        <div class=\"absolute z-10 flex items-end justify-start left-[3%] bottom-[3%] gap-[2%]\">\n          <MoooomIcon v-if=\"data?.has_gpu\" icon=\"gpu\" className=\"w-[15%]\" />\n          <MoooomIcon v-else icon=\"cpu\" className=\"w-[15%]\" />\n\n          <MoooomIcon v-if=\"data?.is_hdr\" icon=\"hdr\" className=\"w-[15%]\" />\n          <MoooomIcon v-else icon=\"hdrOff\" className=\"w-[15%]\" />\n        </div>\n\n        <div class=\"absolute z-10 flex items-end justify-end right-[3%] bottom-[3%] gap-[2%] text-[10px]\">\n          <span class=\"group-hover/progress:hidden text-right font-bold text-auto-12 monospace\">\n            {{ Math.floor(data?.progress ?? 0) }}%\n          </span>\n        </div>\n      </div>\n\n\n      <div class=\"flex h-full flex-grow flex-col items-start justify-evenly\">\n        <div class=\"relative flex h-4 items-center justify-center overflow-clip\">\n          <MoooomIcon icon=\"stickyNote\" className=\"relative w-4 text-auto-12\" />\n          <p class=\"ml-2 w-full font-medium text-2xs text-auto-12\">\n            {{ data?.message }}\n          </p>\n        </div>\n        <div v-if=\"data?.message == 'Encoding video'\" class=\"relative flex h-4 w-full items-start justify-start gap-2\">\n          <div v-if=\"data?.speed\" class=\"relative flex h-4 items-center justify-center overflow-clip\">\n            <MoooomIcon icon=\"dashboard\" className=\"relative w-4 text-auto-12\" />\n            <p class=\"ml-2 w-full font-medium text-2xs text-auto-12\">\n              {{ data?.speed }}X\n            </p>\n          </div>\n        </div>\n        <div v-if=\"data?.message == 'Encoding video'\" class=\"relative flex h-4 w-full items-start justify-start gap-2\">\n          <div v-if=\"data?.remaining_split\" class=\"relative flex h-4 items-center justify-center overflow-clip\">\n            <MoooomIcon icon=\"hourglass\" className=\"relative w-4 text-auto-12\" />\n            <p class=\"ml-1 font-medium text-2xs text-auto-12\">\n              {{\n                data?.remaining_split?.[0] && data?.remaining_split[0] > 0\n                  ? ` ${data?.remaining_split?.[0] + $t('d')} `\n                  : ''\n              }}\n              {{\n                data?.remaining_split?.[1] && (data?.remaining_split[1] > 0 || data?.remaining_split[0] > 0)\n                  ? ` ${data?.remaining_split?.[1] + $t('h')} `\n                  : ''\n              }}\n              {{\n                data?.remaining_split?.[2] && (data?.remaining_split[2] > 0 || data?.remaining_split[1] > 0 ||\n                  data?.remaining_split[0] > 0)\n                  ? ` ${data?.remaining_split?.[2] + $t('m')} `\n                  : ''\n              }}\n              {{\n                data?.remaining_split?.[3]\n                  ? ` ${data?.remaining_split?.[3] + $t('s')} `\n                  : ''\n              }}\n            </p>\n          </div>\n        </div>\n        <div v-if=\"data?.video_streams && data?.message == 'Encoding video'\"\n          class=\"relative flex h-4 items-center justify-center gap-2 overflow-clip\">\n          <div class=\"relative flex h-4 w-full cursor-pointer items-center justify-start gap-2\"\n            :title=\"data?.video_streams?.join?.(', ') ?? ''\">\n            <MoooomIcon icon=\"film\" className=\"w-4\" />\n            <p class=\"w-full text-xs text-auto-alpha-10 line-clamp-1\">\n              {{ data?.video_streams.length }}\n            </p>\n          </div>\n          <div v-if=\"data?.audio_streams\"\n            class=\"relative flex h-4 cursor-pointer items-center justify-center gap-2 overflow-clip\"\n            :title=\"data?.audio_streams?.join?.(', ') ?? ''\">\n            <MoooomIcon icon=\"audioFile\" className=\"w-4\" />\n            <p class=\"w-full text-xs text-auto-alpha-10 line-clamp-1\">\n              {{ data?.audio_streams.length }}\n            </p>\n          </div>\n          <div v-if=\"data?.subtitle_streams\"\n            class=\"relative flex h-4 cursor-pointer items-center justify-center gap-2 overflow-clip\"\n            :title=\"data?.subtitle_streams?.join?.(', ') ?? ''\">\n            <MoooomIcon icon=\"chatBubble\" className=\"w-4\" />\n            <p class=\"w-full text-xs text-auto-alpha-10 line-clamp-1\">\n              {{ data?.subtitle_streams.length }}\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div v-if=\"data?.message == 'Encoding video'\" class=\"absolute -bottom-0.5 left-0 h-1 w-full blur-[1px]\">\n      <div class=\"absolute w-full h-1 left-[-1px] top-[-1px] bg-black/[0.22]\"></div>\n      <div\n        class=\"w-0 h-1 absolute left-[-1px] top-[-1px] rounded-sm bg-gradient-to-r from-black/5 to-[rgb(var(--color-focus))] z-10\"\n        :style=\"`width: ${data.progress}%;`\"></div>\n      <div class=\"w-1 h-0.5 absolute top-[-1px] rounded-sm bg-[#f1eefe] -translate-x-[2px] z-0\"\n        :style=\"`left: ${data.progress}%;`\"></div>\n    </div>\n  </div>\n</template>\n","<script setup lang=\"ts\">\nimport { type PropType, ref, watch } from 'vue';\nimport { IonItem } from '@ionic/vue';\n\nimport type { QueueResponse } from '@/types/api/dashboard/server';\nimport MoooomIcon from '@/components/Images/icons/MoooomIcon.vue';\nimport serverClient from \"@/lib/clients/serverClient\";\n\n\nconst props = defineProps({\n  data: {\n    type: Object as PropType<QueueResponse>,\n    required: true,\n  }\n});\n\nconst priority = ref<number>(props.data.priority ?? 0);\n\nconst updatePriority = (value: number) => {\n  serverClient()\n    .patch(`/dashboard/tasks/queue/${props.data.id}`, {\n      id: props.data.id,\n      priority: value,\n    })\n    .then(() => {\n      console.log('Priority updated');\n    })\n};\n\nconst deleteItem = () => {\n  serverClient()\n      .delete(`/dashboard/tasks/queue/${props.data.id}`)\n      .then(() => {\n        console.log('Item deleted');\n      })\n};\n\nwatch(priority, (value) => {\n  console.log(value);\n  updatePriority(value);\n});\n\n</script>\n\n<template>\n  <div\n    class=\"flex flex-shrink-0 flex-grow-0 items-start gap-4 self-stretch overflow-hidden rounded-lg py-4 px-4 bg-slate-lightA-3 dark:bg-slate-darkA-3 text-slate-light-12/80 dark:text-slate-dark-12/80\">\n\n    <div class=\"relative flex flex-1 flex-grow flex-col items-start space-y-[-2px] w-full\">\n      <span class=\"flex flex-nowrap w-full justify-between\">\n        <p class=\"text-sm font-semibold text-auto-12 line-clamp-1 h-6\" :title=\"data.title.replace(/NoMercy/giu, '')\">\n          {{ data.title.replace(/NoMercy/giu, '') }}\n        </p>\n        <button @click=\"deleteItem\"\n          class=\"float-right flex items-center justify-center gap-2 overflow-hidden rounded-lg bg-transparent w-10 -mt-1.5 -mr-1.5 aspect-square\">\n          <MoooomIcon icon=\"cross\" class=\"relative h-5 w-5 flex-shrink-0 flex-grow-0\" />\n        </button>\n      </span>\n\n        <p\n          class=\"flex-shrink-0 flex-grow-0 self-stretch text-xs w-available !mt-1 text-slate-light-12/80 dark:text-slate-dark-12/80\">\n          {{ $t('Id') }}:\n          <span class=\"text-slate-light-11 dark:text-slate-dark-11\">\n            {{ data.id }}\n          </span>\n        </p>\n        <p\n          class=\"flex-shrink-0 flex-grow-0 self-stretch text-xs w-available text-slate-light-12/80 dark:text-slate-dark-12/80 w-full flex justify-between\">\n          <span>{{ $t('Priority') }}:</span>\n          <InputNumber size=\"small\" variant=\"filled\" showButtons v-model=\"priority\"\n            class=\"ml-auto h-8 first:children:!w-12 last:children:!w-4 children:last:children:!w-4 overflow-clip -mb-2\"\n            :min=\"0\" :max=\"100\" :step=\"1\" />\n        </p>\n        <p\n          class=\"flex-shrink-0 flex-grow-0 self-stretch text-xs w-available text-slate-light-12/80 dark:text-slate-dark-12/80\">\n          {{ $t('Profile') }}:\n          <span class=\"text-slate-light-11 dark:text-slate-dark-11\">\n            {{ data.profile }}\n          </span>\n        </p>\n        <p\n          class=\"flex-shrink-0 flex-grow-0 self-stretch break-all text-xs w-available text-slate-light-12/80 dark:text-slate-dark-12/80\">\n          {{ $t('File') }}:\n          <span class=\"text-slate-light-11 dark:text-slate-dark-11\">\n            {{ data.input_file }}\n          </span>\n        </p>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.p-inputnumber .p-inputnumber-button {\n  --p-inputnumber-button-width: 1rem;\n}\n</style>","<script setup lang=\"ts\">\nimport {computed, onMounted, ref} from 'vue';\n\nimport type { QueueResponse, ServerEncoderProgress } from '@/types/api/dashboard/server';\n\nimport { sortBy } from '@/lib/stringArray';\nimport useServerClient from '@/lib/clients/useServerClient';\nimport useHubListener from '@/hooks/useHubListener';\nimport { connection } from \"@/lib/clients/dashboardSocket\";\n\nimport SystemCard from '../ServerSystemCard.vue';\nimport ServerEncoderTaskCard from './ServerEncoderTaskCard.vue';\nimport ServerQueueTaskCard from './ServerQueueTaskCard.vue';\n\nonMounted(() => {\n  encoderData.value = [];\n});\n\nconst encoderData = ref<ServerEncoderProgress[]>([]);\nconst displayAll = ref(false);\n\nconst { data: queueData, refetch } = useServerClient<QueueResponse[]>({\n  path: 'dashboard/tasks/queue',\n  queryKey: ['queue'],\n  refetchInterval: 30000,\n});\n\nconst handleProgress = (data: ServerEncoderProgress) => {\n  if (data.status == 'running' || data.status == 'paused') {\n    encoderData.value = sortBy([...encoderData.value.filter(item => item?.id !== data?.id), data], 'id');\n  } else {\n    encoderData.value = sortBy([...encoderData.value.filter(item => item?.id !== data?.id)], 'id');\n    refetch();\n  }\n};\n\nconst filteredQueueData = computed(() => {\n  const filtered = queueData.value?.filter(item =>\n      !encoderData.value.find(encoder => encoder.id == item.payload_id)\n  ) ?? [];\n\n  if (displayAll.value) {\n    return filtered;\n  }\n\n  if (filtered.length <= 20) {\n    return filtered;\n  }\n\n  return [\n    ...filtered.slice(0, 10),\n    ...filtered.slice(-10)\n  ];\n});\n\nconst handleQueue = (data: QueueResponse[]) => {\n  queueData.value = data;\n};\n\nconst handleClear = () => {\n  encoderData.value = [];\n  refetch();\n};\n\nconst toggleDisplayAll = () => {\n  displayAll.value = !displayAll.value;\n};\n\nuseHubListener(connection, 'encoder-progress', handleProgress);\nuseHubListener(connection, 'encoder-queue', handleQueue);\nuseHubListener(connection, 'encoder-clear', handleClear);\nuseHubListener(connection, 'disconnected', handleClear);\n\n</script>\n\n<template>\n  <SystemCard v-if=\"encoderData.length || queueData?.length\" title=\"Running tasks\" :background=\"false\">\n\n    <template v-slot:cta>\n      <button @click=\"toggleDisplayAll\"\n          class=\"relative h-7 flex flex-shrink-0 flex-grow-0 items-center justify-center gap-2 overflow-hidden border border-solid border-slate-light-10 dark:border-slate-dark-10 text-slate-light-12/80 dark:text-slate-dark-12/80 rounded-lg px-2 py-1\">\n        <p class=\"flex-shrink-0 flex-grow-0 text-sm\">\n          {{ displayAll ? $t('Show less') : $t('Show all') }}\n        </p>\n      </button>\n    </template>\n\n    <template v-for=\"data in encoderData ?? []\" :key=\"data.id\">\n      <ServerEncoderTaskCard :data=\"data\" />\n    </template>\n\n    <template v-for=\"data in filteredQueueData\" :key=\"data.id\">\n      <ServerQueueTaskCard :data=\"data\" />\n    </template>\n  </SystemCard>\n\n  <SystemCard v-else title=\"Running tasks\" :background=\"false\">\n    <div\n      class=\"relative flex items-start justify-start gap-2 self-stretch rounded-lg p-4 bg-slate-lightA-3 dark:bg-slate-darkA-3 text-slate-light-12/80 dark:text-slate-dark-12/80\">\n      <span class=\"flex-shrink-0 flex-grow-0 self-stretch text-sm font-semibold\">\n        {{ $t('No tasks are currently running') }}\n      </span>\n    </div>\n  </SystemCard>\n</template>\n"],"names":["isPaused","ref","isOnline","runners","refetch","useQuery","_a","currentServer","serverClient","data","serverInfo","useServerClient","_b","connected","disconnected","onMounted","socket","useSocket","props","__props","propStatus","watch","value","status","computed","thumbnail","user","pauseJob","resumeJob","toggleRunning","priority","updatePriority","deleteItem","encoderData","displayAll","queueData","handleProgress","sortBy","item","filteredQueueData","filtered","encoder","handleQueue","handleClear","toggleDisplayAll","useHubListener","connection"],"mappings":"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"}