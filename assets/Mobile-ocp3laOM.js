import{Bt as q,Gt as g,I,Ln as o,M as A,Mt as R,Rn as T,Rt as s,T as V,Tt as $,Vt as L,an as N,cn as n,i as P,kn as p,mt as j,qt as E,u as O,un as G,xn as S,yn as _,zt as x}from"./index-BVMfOxho.js";import"./dist-vlkWK_nZ.js";import"./esm-DY8g5_-d.js";import"./esm-BkTpNeyF.js";import"./dist-CH0b9ib9.js";import"./focus-visible-bSSZdOZP.js";import"./index5-CWJdeeO8.js";import"./client-CTmm1pIY.js";import"./ionic-global-oucWixmt.js";import"./hardware-back-button-DEko41f-.js";import"./index3-BiTNNMaN.js";import"./helpers-B612kBZQ.js";import"./index6-D7h1Gg6a.js";import"./index8-Dt0xOjwC.js";import"./keyboard-BHL796m8.js";import"./index2-D1kFYiB0.js";import"./ios.transition--OH3Fy46.js";import"./keyboard2-BoLAeL-2.js";import"./md.transition-BznYYDQ-.js";import"./dir-1LliqD9e.js";import"./basecomponent-D893k91J.js";import"./classnames-C7QsyfAI.js";import"./button-DrEO03-q.js";import"./baseicon-C2_EXBmf.js";import"./times-waW0j6QK.js";import{l as W,m as c,o as y,p as d}from"./ui-FAE7KUbU.js";import"./client-BaHBQSTJ.js";import{v as D,x as J}from"./currentServer-wKQllb71.js";import"./config-BZ-AEJ_J.js";import"./core-DZundPdS.js";import"./esm-Bc84JaZh.js";import"./global-DPeGmG9M.js";import"./esm-BRDlnhr9.js";import"./bundle-mjs-DqJ8Zzkh.js";import"./user-CWo_OqEw.js";import"./serverClient-DP8QK8AC.js";import{t as K}from"./router-CwEKSEy2.js";import"./utils-CgFfn36P.js";import"./useBaseQuery-DoGC_b9i.js";import"./useInfiniteServerClient-B_ACTkxi.js";import"./SocketClient-Ci81BRq-.js";import"./useQueryClient-B99C1vuk.js";import"./useQuery-AxjyXFw9.js";import"./apiClient-BJYxfNk7.js";import"./notifications-CMaZS40X.js";import"./utils-B0jNLXCr.js";import"./deviceInfo-DuLvxTKJ.js";import"./auth-B7LO68e-.js";import"./musicPlaylists-CXV9ecla.js";import"./esm-DfIlvn3K.js";import"./contextMenuItems-CLPDYgB_.js";import"./_plugin-vue_export-helper-pDp7unP0.js";import"./AppLogoSquare-DNGtmCzk.js";import{t as Q}from"./MoooomIcon-x_D_dAky.js";import"./DropdownMenu-ARSIhILX.js";import"./dist-CyJoSfg1.js";import"./fileupload-CaQfK8Tn.js";import{t as U}from"./useServerClient-BJP3z55h.js";import"./Button-gEqDWnkH.js";import"./CoverImage-C5HI0SiN.js";import"./MusicButton-C0Fj9x4p.js";import"./BannerButton-D5TGoJ_5.js";import"./MediaLikeButton-DuG0N7Ye.js";import"./PlayerIcon-cUGdv3wT.js";import{t as X}from"./Marquee-CJwVusPd.js";import"./Modal-BAtA_bet.js";import"./BigPlayButton-CMm8W9mE.js";import"./EqSpinner-BdHSSO3j.js";import{t as Y}from"./NotFound-C-yCUvh5.js";import"./ShareButton-C5WN2xOb.js";import"./ClickUploadModal-C_y54pVM.js";import{i as Z,n as tt,r as et,t as ot}from"./TrackRow-BP12ATWt.js";$();A();var rt={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},at={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},lt=E({__name:"Mobile",setup(it){const k=I(),{data:t,isError:B}=U({path:k.fullPath,data:{version:"lolomo"}}),z=p(null),b=p(),i=p("");_(t,e=>{D(e?.name??null),u(e?.tracks??[],c.value,d.value,i.value),y(e?.color_palette?.cover)}),_(d,e=>{u(t.value?.tracks??[],c.value,e,i.value)}),_(c,e=>{u(t.value?.tracks??[],e,d.value,i.value)}),_(i,e=>{u(t.value?.tracks??[],c.value,d.value,e)});function u(e,a,l,r){const C=J(e??[],a,l,W);r===""?b.value=C:b.value=C?.filter(w=>w.name?.toLowerCase().includes(r?.toLowerCase?.())||w.artist_track?.some(F=>F.name.toLowerCase().includes(r?.toLowerCase?.()))||w.album_track?.[0]?.name.toLowerCase().includes(r?.toLowerCase?.()))??[]}N(()=>{u(t?.value?.tracks??[],c.value,d.value,i.value),t.value?.color_palette?.cover&&y(t.value?.color_palette?.cover)}),V(()=>{u(t?.value?.tracks??[],c.value,d.value,i.value),t.value?.color_palette?.cover&&y(t.value?.color_palette?.cover)});function H(){K.back()}const f=p(!1),M=p(!1),m=p(),h=p();function v(){const l=j("capacitor")?88:64,r=m.value?.$el?.getBoundingClientRect().top;if(!r){requestAnimationFrame(v);return}if(f.value=r<=170,M.value=r<=160,window.CSS.supports("container-type","scroll-state")){requestAnimationFrame(v);return}r===l?(m.value?.$el?.classList.add("!bg-focus"),m.value?.$el?.firstChild?.classList.add("!bg-surface-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")):(m.value?.$el?.classList.remove("!bg-focus"),m.value?.$el?.firstChild?.classList.remove("!bg-surface-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")),requestAnimationFrame(v)}return _(h,()=>{requestAnimationFrame(v)}),(e,a)=>(n(),x(o(O),null,{default:S(()=>[g(o(P),{ref_key:"container",ref:h,"scroll-events":!0,onIonScroll:v},{default:S(()=>[o(B)&&!o(t)?(n(),x(Y,{key:0})):!o(k).params.id||o(k).params.id&&o(t)?.id===o(k).params.id?(n(),L("div",{key:1,ref_key:"main",ref:z,class:"flex flex-col h-auto overflow-x-clip w-available sm:rounded-2xl -mt-6 text-surface-12"},[g(et,{data:o(t)},null,8,["data"]),s("div",rt,[a[2]||(a[2]=s("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),s("div",{id:"navbar",class:T([{"opacity-0 pointer-events-none":!f.value,"opacity-100 pointer-events-auto":f.value},"fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-surface-11 dark:bg-surface-1 top-0 pt-4 transition-all duration-200"])},[a[1]||(a[1]=s("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-all duration-200 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),s("button",{class:"z-30 flex h-10 w-11 items-center justify-center rounded-md",onClick:H},[g(Q,{icon:"arrowLeft"})]),s("div",{id:"navText",class:T([{"opacity-0 pointer-events-none":!f.value,"opacity-100 pointer-events-auto":f.value},"pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-all duration-200 w-[70%] overflow-clip text-xl"])},[g(X,{text:o(t)?.name},null,8,["text"])],2)],2),(n(),x(Z,{key:o(t)?.id,data:o(t),filter:i.value,onFilterChange:a[0]||(a[0]=l=>i.value=l)},null,8,["data","filter"])),s("div",at,[(n(),x(tt,{key:o(t)?.id,ref_key:"sortHeader",ref:m})),(n(!0),L(R,null,G(b.value,(l,r)=>(n(),x(ot,{key:l.id+l?.favorite,data:l,"display-list":b.value,index:r},null,8,["data","display-list","index"]))),128))])])],512)):q("",!0)]),_:1},512)]),_:1}))}}),Te=lt;export{Te as default};
