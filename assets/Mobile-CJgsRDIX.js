import{I,Z as j,l as i,w as v,E,es as p,et as m,a7 as w,a8 as P,d as b,o as n,s as L,j as x,K as a,bu as V,c as S,b as q,a as u,n as T,F as A,h as N,bh as M,eu as O,S as R,ev as K,b1 as W}from"./index-BlsCkKvU.js";import{u as Z}from"./useServerClient-6Bqhc4IC.js";import{_ as D,a as G,S as J,b as Q}from"./TrackRow.vue_vue_type_script_setup_true_lang-rYIvkMIO.js";import{_ as U}from"./OptimizedIcon.vue_vue_type_script_setup_true_lang-CcyaU_rN.js";import{_ as X}from"./NotFound.vue_vue_type_script_setup_true_lang-CBdZ4CtT.js";import{_ as Y}from"./Marquee.vue_vue_type_script_setup_true_lang-JBRH4Iht.js";import"./useQuery-f3S0rg_a.js";import"./useBaseQuery-z80KnmTz.js";import"./useQueryClient-DkDUGw6x.js";import"./useInfiniteServerClient-BSu1htWg.js";import"./BigPlayButton.vue_vue_type_script_setup_true_lang-BKXzG_m7.js";import"./PlayerIcon.vue_vue_type_script_setup_true_lang-DRW5pQj6.js";import"./MusicButton.vue_vue_type_script_setup_true_lang-MnvKLQfc.js";import"./index-BYwqtu8U.js";import"./index-BQOVP8rp.js";import"./index-BpH5XZjP.js";import"./index-Cdh1k1pY.js";import"./index-ZhWAdK_X.js";import"./MediaLikeButton-CvBVijIR.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ShareButton.vue_vue_type_script_setup_true_lang-D6qFsTB8.js";import"./FavoriteImage.vue_vue_type_script_setup_true_lang-D269Ayl3.js";import"./CoverImage.vue_vue_type_script_setup_true_lang-Dw9lXejG.js";import"./AppLogoSquare-BmoFbbIa.js";import"./contextMenuItems-BpOVjWCT.js";import"./musicPlaylists--mlSwyjI.js";import"./EqSpinner-BQg8oWx-.js";import"./TrackLinks.vue_vue_type_script_setup_true_lang-D3AGpHtn.js";import"./DropdownMenu.vue_vue_type_script_setup_true_lang-20_EvTqz.js";import"./BannerButton.vue_vue_type_script_setup_true_lang-gWP_WpiJ.js";const ee={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},te={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-slate-dark-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},Ie=I({__name:"Mobile",setup(ae){const g=j(),{data:e,isError:$}=Z({path:g.fullPath}),B=i(null),k=i(),s=i("");v(e,t=>{W(t?.name??null),c(t?.tracks??[],m.value,p.value,s.value),w(t?.color_palette?.cover)}),v(p,t=>{c(e.value?.tracks??[],m.value,t,s.value)}),v(m,t=>{c(e.value?.tracks??[],t,p.value,s.value)}),v(s,t=>{c(e.value?.tracks??[],m.value,p.value,t)});function c(t,r,l,o){const C=O(t??[],r,l,K);o===""?k.value=C:k.value=C?.filter(h=>h.name?.toLowerCase().includes(o?.toLowerCase?.())||h.artist_track?.some(H=>H.name.toLowerCase().includes(o?.toLowerCase?.()))||h.album_track?.[0]?.name.toLowerCase().includes(o?.toLowerCase?.()))??[]}E(()=>{c(e?.value?.tracks??[],m.value,p.value,s.value),e.value?.color_palette?.cover&&w(e.value?.color_palette?.cover)}),P(()=>{c(e?.value?.tracks??[],m.value,p.value,s.value),e.value?.color_palette?.cover&&w(e.value?.color_palette?.cover)});function z(){window.history.back()}const f=i(!1),F=i(!1),d=i(),y=i();function _(){const l=R("capacitor")?88:64,o=d.value?.$el?.getBoundingClientRect().top;if(!o){requestAnimationFrame(_);return}f.value=o<=170,F.value=o<=160,o===l?(d.value?.$el?.classList.add("!bg-focus"),d.value?.$el?.firstChild?.classList.add("!bg-slate-light-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")):(d.value?.$el?.classList.remove("!bg-focus"),d.value?.$el?.firstChild?.classList.remove("!bg-slate-light-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")),requestAnimationFrame(_)}return v(y,()=>{requestAnimationFrame(_)}),(t,r)=>(n(),b(a(M),null,{default:L(()=>[x(a(V),{ref_key:"container",ref:y,"scroll-events":!0,onIonScroll:_},{default:L(()=>[a($)&&!a(e)?(n(),b(X,{key:0})):!a(g).params.id||a(g).params.id&&a(e)?.id===a(g).params.id?(n(),S("div",{key:1,ref_key:"main",ref:B,class:"flex flex-col h-auto overflow-x-clip w-available sm:rounded-2xl -mt-6 bg-[rgb(var(--background-auto))]"},[x(D,{data:a(e)},null,8,["data"]),u("div",ee,[r[2]||(r[2]=u("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom bg-focus"},null,-1)),u("div",{id:"navbar",class:T(["fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-slate-light-11 dark:bg-slate-dark-1 top-0 pt-4 transition-all duration-200",{"opacity-0 pointer-events-none":!f.value,"opacity-100 pointer-events-auto":f.value}])},[r[1]||(r[1]=u("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-all duration-200 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),u("button",{class:"z-30 flex h-10 w-11 items-center justify-center rounded-md",onClick:z},[x(U,{icon:"arrowLeft"})]),u("div",{id:"navText",class:T(["pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-all duration-200 w-[70%] overflow-clip text-xl",{"opacity-0 pointer-events-none":!f.value,"opacity-100 pointer-events-auto":f.value}])},[x(Y,{text:a(e)?.name},null,8,["text"])],2)],2),(n(),b(G,{key:a(e)?.id,data:a(e),filter:s.value,onFilterChange:r[0]||(r[0]=l=>s.value=l)},null,8,["data","filter"])),u("div",te,[(n(),b(J,{ref_key:"sortHeader",ref:d,key:a(e)?.id})),(n(!0),S(A,null,N(k.value,(l,o)=>(n(),b(Q,{key:l.id+l?.favorite,data:l,"display-list":k.value,index:o},null,8,["data","display-list","index"]))),128))])])],512)):q("",!0)]),_:1},512)]),_:1}))}});export{Ie as default};
