import{Bt as v,C as V,Gt as w,I as z,Ln as t,Lt as L,M as q,Mt as m,Rn as _,Rt as x,Tt as D,Vt as a,an as M,cn as o,i as F,kn as d,on as G,qt as K,u as U,un as E,xn as B,yn as I,zt as s}from"./index-cywnPOBC.js";import"./dist-yzM0QGvF.js";import"./esm-CsGjMs42.js";import"./esm-D4f7ygqA.js";import"./dist-CG1k-g7C.js";import"./focus-visible-dQviwWa0.js";import"./index5-DWzlHdCO.js";import"./client-D7oxUmH6.js";import"./ionic-global-DCe2g38l.js";import"./hardware-back-button-Bqrrbg0Z.js";import"./index3-bIbYCfqw.js";import"./helpers-BGGXVDsd.js";import"./index6-vUi4VFUZ.js";import"./index8-5IzBz0Dr.js";import"./keyboard-CAPY05Np.js";import"./index2-DsYXeg3E.js";import"./ios.transition-DeZfFnMt.js";import"./keyboard2-CYwkuq6R.js";import"./md.transition-CoCDKCK7.js";import"./dir-VVnELOav.js";import{a as N,o as j}from"./ui-C0FA7XgL.js";import{d as A}from"./client-TRoQZYEY.js";import{v as H}from"./currentServer-ns-65dJg.js";import"./config-BZ-AEJ_J.js";import"./core-Byg9KrIc.js";import"./esm-D9ex0nT9.js";import{p as u}from"./global-oyc8MvKQ.js";import"./esm-B2mzPl6v.js";import"./bundle-mjs-BuAB9hD1.js";import"./user-DdN2xDWa.js";import"./serverClient-h83xvsoB.js";import{t as J}from"./router-b6Y7vD7A.js";import"./utils-CfbU6uFB.js";import"./useBaseQuery--g5SyDb6.js";import{n as O}from"./useInfiniteServerClient-DYu8wLRM.js";import{g as c}from"./SocketClient-BXQHVNG_.js";import"./useQueryClient-CeysrMlA.js";import"./apiClient-cmnl9Hzw.js";import"./notifications-Cig9DoL1.js";import"./utils-D5nhA-44.js";import"./deviceInfo-D74C9RbC.js";import"./auth-Bz7Q9vHJ.js";import"./musicPlaylists-CRSZ6nMQ.js";import"./esm-DZQicoaf.js";import"./contextMenuItems-CnT1Q0_S.js";import"./scrollHandlers-BbBCAHVc.js";import{t as Q}from"./Indexer-CXYwCSz6.js";import"./_plugin-vue_export-helper-pDp7unP0.js";import"./AppLogoSquare-BPMeAXGY.js";import"./TMDBImage-d52ApFzb.js";import"./MoooomIcon-DKjYVqpr.js";import"./dist-DxpR9Lgz.js";import"./CardIndicator-CpeBBLGq.js";import{t as W}from"./NMCard-DKwCbm1v.js";import{t as X}from"./PersonCard-CgngAxpy.js";import{n as Y,t as Z}from"./EmptyCard-DXmKDZgk.js";import"./NoResultImage-DymDpmFT.js";D();q();var $="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",ee="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",te=K({__name:"Mobile",setup(re){const l=z(),{data:i,fetchNextPage:y,hasNextPage:b,isError:oe}=O({queryKey:["libraries",(l.params.id??l.name)?.split("&").at(0)],limit:20,keepForever:!0});M(()=>{H(),N(null),j(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),I(i,r=>{r&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const T=L(()=>{const r=i.value?.pages?.[0]?.data?.[0];return r&&A.value&&r.media_type!=="person"&&r.media_type!=="genres"});G(()=>{stop(),N(null)});const h=d(),C=d();M(()=>{C.value=l.params.id??l.name,b.value&&(i?.value?.pages?.length??0)<50&&y(),document.addEventListener("scrollToDiv",r=>{h.value?.scrollTo({top:r.detail.top-100,behavior:"smooth"})})}),V(()=>{document.dispatchEvent(new Event("indexer"))}),I(i,r=>{r&&b.value&&r?.pages?.length<50&&y()});const P=d(),R=d();function f(r,p){P.value=p,R.value.show(r)}return(r,p)=>(o(),s(t(U),null,{default:B(()=>[w(t(F),{fullscreen:!0,class:"ion-padding",style:{"--padding-bottom":"0"}},{default:B(()=>[p[0]||(p[0]=x("div",{class:"fixed top-0 pt-safe w-full bg-surface-1 z-1199"},null,-1)),x("div",{ref_key:"lib",ref:h,class:"pt-safe-offset-9 flex h-auto w-full pr-8 overflow-auto scroll-container"},[(o(),a("div",{key:t(J).currentRoute.value.params?.id,class:_([{"pb-2":t(u)&&t(c),"children:pb-4 sm:children:pb-3":!t(u)&&t(c)},"z-0 flex flex-col gap-4 rounded-3xl border-0 w-available scrollbar-none border-surface-3"])},[x("div",{class:_(`grid w-full gap-4 scroll-smooth music-showing:pb-0 pl-1 py-4 ${T.value?$:ee}`)},[t(i)?(o(!0),a(m,{key:0},E(t(i).pages??[],(k,S)=>(o(),a(m,{key:S},[k.data.length>0?(o(!0),a(m,{key:0},E(k.data??[],(e,g)=>(o(),a(m,null,[e?.media_type==="tv"||e?.media_type==="movie"||e?.media_type==="collection"||e?.media_type==="specials"?(o(),s(W,{key:e.id,data:e,index:g,onContextMenu:n=>f(n,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="person"?(o(),s(X,{key:`${e.id}_person`,data:e,index:g,onContextMenu:n=>f(n,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="genres"?(o(),s(Y,{key:`${e.id}_genres`,data:e,index:g,onContextMenu:n=>f(n,e)},null,8,["data","index","onContextMenu"])):v("",!0)],64))),256)):t(i).pages?.[0]?.data?.length===0?(o(),s(Z,{key:1})):v("",!0)],64))),128)):v("",!0)],2)],2)),w(Q,{id:C.value,class:_([{"h-available":!t(u),"h-inherit top-24":t(u),"-mt-4 pt-4 pb-4 mb-0":!t(c),"-mt-4 pt-4 pb-4 mb-14":t(c)},"w-8 fixed right-0 bg-surface-1 transition-all duration-200"])},null,8,["id","class"])],512)]),_:1})]),_:1}))}}),st=te;export{st as default};
