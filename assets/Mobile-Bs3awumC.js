import{$ as K,d as Q,w as R,aN as $,be as H,c as z,o as L,p as j,z as W,a0 as n,av as X,T as Y,j as O,v as Z,as as ee,Q as l}from"./vue-ionic-9j_oSDCB.js";import{b1 as ae}from"./vendor-Dgtccx1h.js";import{u as t,q,f as E,c as oe,r as u,as as se,bG as te,bJ as ne,bK as le}from"./index-CTarIx2-.js";import{g as c}from"./imageModal-DuyteJAO.js";import{S as re}from"./syncPlugin-CkKEIbax.js";import{A as ie}from"./autoSkipPlugin-Be2f5WNd.js";import{D as ue}from"./desktopUIPlugin-CJu2Srfl.js";import{n as ce,O as pe}from"./video-player-B2yH_Yz-.js";import{V as me}from"./videoNoMercyConnectPlugin-DvIEdvPM.js";import{u as de}from"./useServerClient-Cus9vSzs.js";import"./media-C2AqgyMX.js";import"./icons-BW5E66pf.js";import"./api-BBofn2cc.js";import"./swiper-D00Cnjmx.js";import"./rxjs-BCp2L9Rn.js";import"./music-player-CxG_wAnH.js";import"./primevue-BfjCwqou.js";import"./buttons-DnucOQvv.js";import"./baseUIPlugin-BS3doDHP.js";import"./subtitles-octopus-By2PrHjB.js";import"./useInfiniteServerClient-io0xNIN9.js";const ze=K({__name:"Mobile",setup(fe){var p;const{data:r}=de({enabled:!((p=t.value.features)!=null&&p.nomercyConnect)}),e=Q();function i(o){var m,d,f,v,g,b,y,P,k,C,w,I,S,M,_,h,N,T,D,V,A,B,U,x;const s={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:(o==null?void 0:o.filter(a=>!!a.id))??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:((m=t.value)==null?void 0:m.accessToken)||localStorage.getItem("access_token")||"",basePath:(d=oe.value)==null?void 0:d.serverBaseUrl,forceTvMode:(l("android")||l("ios"))&&!l("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||l("capacitor"),renderAhead:100,disableAutoPlayback:(f=t.value.features)==null?void 0:f.nomercyConnect};if(e.value=ce("player1").setup(s),(v=e.value)==null||v.once("back",()=>{}),(g=t.value.features)!=null&&g.nomercyConnect){const a=new me;(b=e.value)==null||b.registerPlugin("videoNoMercyConnect",a),(y=e.value)==null||y.usePlugin("videoNoMercyConnect")}const F=new ue;(P=e.value)==null||P.registerPlugin("desktopUI",F),(k=e.value)==null||k.usePlugin("desktopUI");const G=new ie;if((C=e.value)==null||C.registerPlugin("autoSkip",G),(w=e.value)==null||w.usePlugin("autoSkip"),!((I=t.value.features)!=null&&I.nomercyConnect)){const a=new re;(S=e.value)==null||S.registerPlugin("sync",a),(M=e.value)==null||M.usePlugin("sync")}const J=new pe;(_=e.value)==null||_.registerPlugin("octopus",J),(h=e.value)==null||h.usePlugin("octopus"),(N=e.value)==null||N.once("play",()=>{var a;(a=e.value)==null||a.enterFullscreen()}),(T=e.value)==null||T.on("playlistComplete",()=>{var a;(a=e.value)==null||a.dispose(),u.back()}),(D=e.value)==null||D.on("dispose",()=>{se(),te(),u.back()}),(V=e.value)==null||V.on("back",()=>{var a;(a=e.value)==null||a.dispose()}),(A=e.value)==null||A.on("play",()=>{c(!0)}),(B=e.value)==null||B.on("pause",()=>{c(!1)}),(U=e.value)==null||U.on("ready",()=>{ne(),le(),q.stop()}),(x=e.value)==null||x.on("item",()=>{var a;(a=e.value)==null||a.play()}),ae.addListener("backButton",()=>{var a;(a=e.value)==null||a.emit("back-button-hyjack"),u.back()})}return R(r,o=>{o!=null&&o.length&&i(o)}),$(()=>{var o,s;q.stop(),(o=t.value.features)!=null&&o.nomercyConnect?i():(s=r.value)!=null&&s.length&&i(r.value)}),H(()=>{var o;(o=e.value)==null||o.dispose(),c(!1)}),(o,s)=>(L(),z(n(ee),null,{default:j(()=>[W(n(X),{fullscreen:!0},{default:j(()=>[(L(),z(Y,{to:"body"},[O("div",{class:Z(["absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199",{"mb-28":n(E),"mb-0":!n(E)}])},s[0]||(s[0]=[O("div",{id:"player1",class:"group nomercyplayer"},null,-1)]),2)]))]),_:1})]),_:1}))}});export{ze as default};
