import{C as q,Et as z,G as I,J as i,K as B,S as _,T as c,Tt as r,X as Z,c as k,ct as j,g as h,gt as E,j as P,kt as g,x as L}from"./i18n-Bgv5p1Yb.js";import{G as $,H as G,U as M}from"./vue-core-Dey0Eikg.js";import{Bi as b,Qr as N,Vi as y,k as o,v as Q}from"./index-D14P6RIp.js";import{n as U,t as w}from"./scrollHandlers-BYgRlxHY.js";k();var f=E(!1);const te=L(()=>f.value);function V(n){f.value=n}var D=E([]);const H=L(()=>{const n=new Set;return D.value?.forEach(s=>{const l=s.props?.data?.title||s.props?.data?.name||s.props?.name||"";if(l){const u=l.charAt(0).toUpperCase();/[A-Z0-9]/.test(u)?n.add(u):n.add("#")}}),n});var m=f;k();M();var F={class:"flex-shrink-0 flex-grow-0 text-center text-xs sm:text-base font-semibold leading-none"},J=["data-indexer","onClick"],K={class:"flex-shrink-0 flex-grow-0 text-center text-xs sm:text-base font-semibold leading-none"},O=P({__name:"Indexer",setup(n){const s=["Libraries","Library","Collections","Albums","Artists","Music Genres"],l=[new RegExp("music/albums"),new RegExp("music/artists"),new RegExp("libraries/[a-zA-Z0-9]+/letter/[a-zA-Z0-9_]"),new RegExp("music/genres/letter/[a-zA-Z0-9_]")];function u(e){return s.some(a=>e.startsWith(a))}function d(e){return l.some(a=>e.match(a))}const S=$();function p(){setTimeout(()=>{document.querySelector(b.value?"ion-tabs ion-router-outlet  div.ion-page:not(.ion-page-hidden) [indexer]":"[indexer]")?.querySelectorAll("[data-indexer]").forEach(e=>{const a=e.dataset.indexer??"";let t;a==="#"?t=document.querySelector?.("ion-tabs ion-router-outlet div.ion-page:not(.ion-page-hidden) [data-scroll]"):t=document.querySelector?.(`ion-tabs ion-router-outlet div.ion-page:not(.ion-page-hidden) [data-scroll='scroll_${a}']`);const x=!!t,A=d(o.currentRoute.value.path),T=H.value.has(a);x||A||T?e.classList.remove("opacity-20","!cursor-not-allowed"):e.classList.add("opacity-20","!cursor-not-allowed")})},500)}function C(e){U(e),document.dispatchEvent(new CustomEvent("scrollToLetter",{detail:{letter:e}}))}function R(){document.querySelector(b.value?"ion-tabs ion-router-outlet  div.ion-page:not(.ion-page-hidden) [indexer]":"[indexer]")?.querySelectorAll("[data-indexer]").forEach(e=>{e.classList.add("opacity-20","!cursor-not-allowed")})}function v(e){V(u(e)),p()}return o.afterEach(e=>{setTimeout(()=>{v(e.name??e.path)},150)}),o.beforeEach(()=>{d(o.currentRoute.value.path)||R()}),I(()=>{setTimeout(()=>{v(o.currentRoute.value.name??o.currentRoute.value.path)},150),document.addEventListener("indexer",p),document.addEventListener("keydown",w)}),B(()=>{document.removeEventListener("indexer",p),document.removeEventListener("keydown",w)}),(e,a)=>(i(),c("div",{class:z([{"w-8 opacity-100":r(m),"w-0 opacity-0 translate-x-4 pointer-events-none!":!r(m),"sm:ml-2":!r(y)&&r(m),"bottom-0":r(y)},"z-0 h-available sm:h-available flex flex-col items-center justify-between self-stretch overflow-clip transition-[width,opacity,transform] duration-200 sm:-translate-x-3 pt-2 text-surface-12"]),indexer:""},[(i(!0),c(h,null,Z(r(N)("#","Z"),t=>(i(),c(h,{key:t},[d(r(S).path)?(i(),q(r(G),{key:0,"data-indexer":t,to:`${t.replace("#","_")}`,class:"pointer-events-auto relative flex p-1 size-6 sm:size-6 aspect-square rounded-lg overflow-clip cursor-pointer flex-col items-center justify-center hover:bg-surface-5",tabindex:"-1"},{default:j(()=>[_("p",F,g(t),1)]),_:2},1032,["data-indexer","to"])):(i(),c("button",{key:1,"data-indexer":t,class:"pointer-events-auto relative flex p-1 size-6 sm:size-6 aspect-square rounded-lg overflow-clip cursor-pointer flex-col items-center justify-center hover:bg-surface-5/11",tabindex:"-1",onClick:x=>C(t)},[_("p",K,g(t),1)],8,J))],64))),128))],2))}}),ae=Q(O,[["__scopeId","data-v-53fa1abd"]]);export{m as n,ae as t};
