import{An as y,Bn as T,Bt as I,Gt as k,Hn as S,I as V,Lt as N,M,Mt as $,Rt as f,Sn as x,Tt as D,Vt as h,an as F,bn as v,cn as l,i as P,on as j,qt as A,u as O,un as q,zn as e,zt as u}from"./index-Dv83kAv_.js";import"./dist-BWFEUpD5.js";import"./esm-CjYSFQTD.js";import"./esm-B--WsoEr.js";import"./dist-CkXwLdCd.js";import"./client-Lt1iJPRU.js";import"./ionic-global-BrT5QOOk.js";import"./hardware-back-button-DUNt_0t6.js";import"./index3-D57DmiIb.js";import"./index8-CrgDNp2f.js";import"./keyboard-BGaVckUv.js";import"./index2-Bme3R7x6.js";import"./ios.transition-CmHvz4bI.js";import"./keyboard2-DeMt_g_-.js";import"./md.transition-DBZTZPtp.js";import"./basecomponent-BjQ2yHda.js";import"./button-BlCqSJTL.js";import{a as G,h as m,i as U,l as Y,m as p,o as g}from"./ui-Dy0BhNPE.js";import"./client-D4e5iciK.js";import{v as J,x as K}from"./currentServer-CyRP1M2f.js";import"./config-BZ-AEJ_J.js";import"./esm-ANv1qkIu.js";import{p as C}from"./global-Cl9NRZH-.js";import"./esm-CLtwhlBL.js";import"./bundle-mjs-m3ebY3zV.js";import"./user-Cpc-QsaC.js";import"./serverClient-Dh7JrGPq.js";import"./router-LUtA4OvS.js";import"./utils-S5luT9U1.js";import"./useInfiniteServerClient-r3ptfaNG.js";import{g as b}from"./SocketClient-CLd4yl1R.js";import"./apiClient-9DYr7MVK.js";import"./notifications-qUxNFD5p.js";import"./utils-DRKz5xy4.js";import"./deviceInfo-DoGAY46a.js";import"./auth-hpDtC4ST.js";import"./musicPlaylists-D6UXHs9I.js";import"./esm-CU7dLS2l.js";import"./contextMenuItems-BciBz7Zs.js";import{r as Q}from"./BigPlayButton-CfIstnp_.js";import"./AppLogoSquare-i1IW1kFU.js";import"./DropdownMenu-ApthCE94.js";import"./dist-Be7NXLvN.js";import{t as W}from"./useServerClient-CvCiAwnH.js";import"./CoverImage-D4HQmV-e.js";import{t as X}from"./ScrollContainer-UnRcXO1f.js";import"./MusicButton-DnLkBuhm.js";import"./BannerButton-e4he2uED.js";import"./MediaLikeButton-CMUSbHSn.js";import"./Marquee-DSc1WxSu.js";import"./EqSpinner-CqW0Beaq.js";import{t as Z}from"./NotFound-1d42OEvA.js";import"./ShareButton-w_aNyHaA.js";import{i as R,n as ee,r as te,t as re}from"./TrackRow-BP6NWwkh.js";D();M();var ae={key:0,ref:"main",class:"flex flex-col w-available h-available sm:rounded-2xl"},oe={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},le=A({__name:"Desktop",setup(se){const d=V(),{data:t,isError:L}=W({path:d.fullPath}),s=y([]),i=y(""),w=N(()=>Q({count:s.value?.length??0,getScrollElement:()=>U.value??null,estimateSize:()=>64,overscan:10}));v(t,r=>{r&&(J(r?.name??null),n(r?.tracks??[],m.value,p.value,i.value),g(r?.color_palette?.cover))}),v(p,r=>{n(t.value?.tracks??[],m.value,r,i.value)}),v(m,r=>{n(t.value?.tracks??[],r,p.value,i.value)}),v(i,r=>{n(t.value?.tracks??[],m.value,p.value,r)});function n(r,o,a,c){const z=K(r??[],o,a,Y);c===""?s.value=z:s.value=z?.filter(_=>_.name?.toLowerCase().includes(c?.toLowerCase?.())||_.artist_track?.some(H=>H.name.toLowerCase().includes(c?.toLowerCase?.()))||_.album_track?.[0]?.name.toLowerCase().includes(c?.toLowerCase?.()))??[]}F(()=>{t?.value?.tracks&&n(t?.value?.tracks??[],m.value,p.value,i.value),t.value?.color_palette?.cover&&g(t.value?.color_palette?.cover)}),j(()=>{document.getElementById("navbar")&&(document.getElementById("navbar").style.display="flex"),g(null),G(null)});const B=y();function E(){const o=B.value?.$el,a=o?.firstChild;!o||!a||(Math.ceil(o.getBoundingClientRect()?.top??500)<=67?(a.style.background="var(--color-theme-8)",o.style.color="white"):(a.style.background="",o.style.color=""))}return(r,o)=>(l(),u(e(O),null,{default:x(()=>[k(e(P),{fullscreen:!0,class:"flex"},{default:x(()=>[e(L)&&!e(t)?(l(),u(Z,{key:0})):(l(),u(X,{key:1,"auto-hide":!0,static:!0,onScroll:E},{default:x(()=>[!e(d).params.id||e(d).params.id&&e(t)?.id===e(d).params.id?(l(),h("div",ae,[k(te,{data:e(t)},null,8,["data"]),f("div",oe,[o[1]||(o[1]=f("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),(l(),u(R,{key:e(t)?.id,data:e(t),filter:i.value,onFilterChange:o[0]||(o[0]=a=>i.value=a)},null,8,["data","filter"])),f("div",{class:T([{"pb-24":e(C)&&!e(b),"pb-40":e(C)&&e(b),"pb-4 sm:pb-4":!e(C)&&e(b)},"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-3 flex-grow-1 gap-0.5 sm:p-4"])},[(l(),u(ee,{key:e(t)?.id,ref_key:"sortHeader",ref:B})),f("div",{style:S({height:`${w.value.value.getTotalSize()}px`,width:"100%",position:"relative"})},[(l(!0),h($,null,q(w.value.value.getVirtualItems(),a=>(l(),h("div",{key:s.value[a.index]?.id+s.value[a.index]?.favorite,style:S({position:"absolute",top:0,left:0,width:"100%",height:`${a.size}px`,transform:`translateY(${a.start}px)`})},[k(re,{data:s.value[a.index],"display-list":s.value,index:a.index},null,8,["data","display-list","index"])],4))),128))],4)],2)])],512)):I("",!0)]),_:1}))]),_:1})]),_:1}))}}),it=le;export{it as default};
