import{$ as Q,d as R,w as $,aM as G,be as H,c as x,o as L,p as z,z as W,a0 as n,au as X,T as Y,j,v as Z,ar as ee,Q as l}from"./vue-ionic-Db_NiJFp.js";import{b1 as ae}from"./vendor-Dgtccx1h.js";import{u as t,n as O,i as q,c as oe,r as E,aq as se,bJ as te,bK as ne,bL as le}from"./index-CH0I4ZsZ.js";import{g as u}from"./imageModal-Dkr6ZQXR.js";import{S as re}from"./syncPlugin-Bet9ut3C.js";import{A as ie}from"./autoSkipPlugin-BF5TW9QV.js";import{D as ue}from"./desktopUIPlugin-kQhtIiaV.js";import{n as ce,O as pe}from"./video-player-0apfNqng.js";import{V as me}from"./videoNoMercyConnectPlugin-B_Hq0WjK.js";import{u as de}from"./useServerClient-DCQ9wzI8.js";import"./media-C2AqgyMX.js";import"./icons-BW5E66pf.js";import"./api-BBofn2cc.js";import"./swiper-D00Cnjmx.js";import"./rxjs-BCp2L9Rn.js";import"./music-player-bBxcOCLu.js";import"./primevue-Bn7Q4nqF.js";import"./buttons-DnucOQvv.js";import"./baseUIPlugin-D2xbq71X.js";import"./subtitles-octopus-By2PrHjB.js";import"./useInfiniteServerClient-DDuYcdud.js";const Le=Q({__name:"Mobile",setup(fe){var c;const{data:r}=de({enabled:!((c=t.value.features)!=null&&c.nomercyConnect)}),e=R();function i(o){var p,m,d,f,v,g,y,b,P,k,C,w,I,S,M,_,h,N,T,D,V,A,B,U;const s={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:(o==null?void 0:o.filter(a=>!!a.id))??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:((p=t.value)==null?void 0:p.accessToken)||localStorage.getItem("access_token")||"",basePath:(m=oe.value)==null?void 0:m.serverBaseUrl,forceTvMode:(l("android")||l("ios"))&&!l("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||l("capacitor"),renderAhead:100,disableAutoPlayback:(d=t.value.features)==null?void 0:d.nomercyConnect};if(e.value=ce("player1").setup(s),(f=e.value)==null||f.once("back",()=>{}),(v=t.value.features)!=null&&v.nomercyConnect){const a=new me;(g=e.value)==null||g.registerPlugin("videoNoMercyConnect",a),(y=e.value)==null||y.usePlugin("videoNoMercyConnect")}const F=new ue;(b=e.value)==null||b.registerPlugin("desktopUI",F),(P=e.value)==null||P.usePlugin("desktopUI");const J=new ie;if((k=e.value)==null||k.registerPlugin("autoSkip",J),(C=e.value)==null||C.usePlugin("autoSkip"),!((w=t.value.features)!=null&&w.nomercyConnect)){const a=new re;(I=e.value)==null||I.registerPlugin("sync",a),(S=e.value)==null||S.usePlugin("sync")}const K=new pe;(M=e.value)==null||M.registerPlugin("octopus",K),(_=e.value)==null||_.usePlugin("octopus"),(h=e.value)==null||h.once("play",()=>{var a;(a=e.value)==null||a.enterFullscreen()}),(N=e.value)==null||N.on("playlistComplete",()=>{var a;(a=e.value)==null||a.dispose(),E.back()}),(T=e.value)==null||T.on("dispose",()=>{se(),te(),E.back()}),(D=e.value)==null||D.on("back",()=>{var a;(a=e.value)==null||a.dispose()}),(V=e.value)==null||V.on("play",()=>{u(!0)}),(A=e.value)==null||A.on("pause",()=>{u(!1)}),(B=e.value)==null||B.on("ready",()=>{ne(),le(),O.stop()}),(U=e.value)==null||U.on("item",()=>{var a;(a=e.value)==null||a.play()}),ae.addListener("backButton",()=>{var a;(a=e.value)==null||a.emit("back-button-hyjack")})}return $(r,o=>{o!=null&&o.length&&i(o)}),G(()=>{var o,s;O.stop(),(o=t.value.features)!=null&&o.nomercyConnect?i():(s=r.value)!=null&&s.length&&i(r.value)}),H(()=>{var o;(o=e.value)==null||o.dispose(),u(!1)}),(o,s)=>(L(),x(n(ee),null,{default:z(()=>[W(n(X),{fullscreen:!0},{default:z(()=>[(L(),x(Y,{to:"body"},[j("div",{class:Z(["absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199",{"mb-28":n(q),"mb-0":!n(q)}])},s[0]||(s[0]=[j("div",{id:"player1",class:"group nomercyplayer"},null,-1)]),2)]))]),_:1})]),_:1}))}});export{Le as default};
