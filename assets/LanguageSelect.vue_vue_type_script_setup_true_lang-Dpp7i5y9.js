import{aG as I,b7 as U,K as k,L as V,az as D,e0 as C,c as d,x as h,aI as m,a7 as v,a as o,C as u,a6 as O,t as b,j as q,aS as L,a8 as G,F as K,w as M,h as H,o as i}from"./index-BKfQxFHq.js";import{I as J,E as P,j as Q,A as R,F as W}from"./listbox-kjFBdDfm.js";const X={class:"relative w-full"},Y={key:0,class:"flex items-center self-center"},Z=["src","onerror","alt"],ee={class:"ml-3 block truncate text-left"},ae={key:1,class:"flex items-center self-center"},te={key:0,class:"ml-3 block truncate text-left"},ne={key:1,class:"ml-3 block truncate text-left"},le={class:"ml-2 flex items-center self-center"},se=["src","onerror","alt"],oe=I({__name:"LanguageSelect",props:{modelValue:{type:Object,required:!0},name:{type:String,required:!0},id:{type:String,required:!0},multiple:{type:Boolean,required:!1,default:!1},variant:{type:String,required:!1,default:"normal"},languages:{type:Array,required:!1}},emits:["update:modelValue"],setup(a,{emit:z}){const{t:S}=U(),x=a,E=z,t=k(x.modelValue),w=k(""),g=k([]),c=k(x.languages??[]);return V(x,n=>{n.languages&&(c.value=n.languages)}),V(t,n=>{n&&E("update:modelValue",n)}),V(c,n=>{var s;n&&(x.multiple?g.value=n:g.value=w.value===""?n.filter(e=>C.includes(e.iso_639_1))??[]:((s=n.filter(e=>C.includes(e.iso_639_1)))==null?void 0:s.filter(e=>e.english_name.toLowerCase().includes(w.value.toLowerCase())))??[])}),D(()=>{var n;c.value&&(x.multiple?g.value=c.value:g.value=w.value===""?c.value.filter(s=>C.includes(s.iso_639_1))??[]:((n=c.value.filter(s=>C.includes(s.iso_639_1)))==null?void 0:n.filter(s=>s.english_name.toLowerCase().includes(w.value.toLowerCase())))??[])}),(n,s)=>(i(),d("div",X,[h(m(J),{as:"div",multiple:a.multiple,modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=e=>t.value=e),onChange:s[1]||(s[1]=e=>{var r;return n.$emit("update:modelValue",(r=e.target)==null?void 0:r.value)})},{default:v(()=>[h(m(P),{class:u(["block select-none space-nowrap empty:hidden",{"mb-1 text-sm font-medium":a.variant==="normal","mb-0.5 text-sm font-medium":a.variant==="dense","mb-px text-xs font-thin":a.variant==="tight"}])},{default:v(()=>[O(b(m(S)(a.name)),1)]),_:1},8,["class"]),o("div",{class:u(["relative",{"h-10 min-h-10 mt-2":a.variant==="normal","h-8 min-h-8 mt-1":a.variant==="dense","h-7 min-h-7 mt-0":a.variant==="tight"}])},[h(m(Q),{class:u(["relative flex items-center w-full cursor-default rounded-md shadow-sm sm:text-sm data-[headlessui-state='disabled']:grayscale *:data-[headlessui-state='disabled']:hidden",{"!bg-auto-1 ring-[1.5px] ring-inset ring-auto-3 focus:outline-none focus:ring-2 focus:ring-focus data-[headlessui-state='open']:ring-2 data-[headlessui-state='open']:ring-focus":a.variant==="normal"||a.variant==="dense","h-10 min-h-10 pl-3":a.variant==="normal","h-8 min-h-8 pl-2":a.variant==="dense","h-5 min-h-5 pl-0":a.variant==="tight"}])},{default:v(()=>{var e,r,f,p,y,j,N,$,A,B,_,F,T;return[Array.isArray(t.value)?(i(),d("span",ae,[((_=t.value)==null?void 0:_.length)>4?(i(),d("span",te,b((F=t.value)==null?void 0:F.length)+" "+b(m(S)("selected")),1)):(i(),d("span",ne,b((T=t.value.map(l=>(l==null?void 0:l.name)!=""&&(l==null?void 0:l.name)!=null?l==null?void 0:l.name:l==null?void 0:l.english_name))==null?void 0:T.join(", ")),1))])):(i(),d("span",Y,[o("img",{src:`https://pub-a68768bb5b1045f296df9ea56bd53a7f.r2.dev/flags/${(r=(e=t.value)==null?void 0:e.iso_639_1)==null?void 0:r.toUpperCase()}.svg`,onerror:l=>{l.target.onerror=null,l.target.src="https://pub-a68768bb5b1045f296df9ea56bd53a7f.r2.dev/flags/xxx.svg"},alt:`${((f=t.value)==null?void 0:f.name)!=""&&((p=t.value)==null?void 0:p.name)!=null?(y=t.value)==null?void 0:y.name:(j=t.value)==null?void 0:j.english_name} flag`,class:"h-auto w-6 rounded-sm border border-auto-50 group-hover:border-theme-600"},null,8,Z),o("span",ee,b(((N=t.value)==null?void 0:N.name)!=""&&(($=t.value)==null?void 0:$.name)!=null?(A=t.value)==null?void 0:A.name:(B=t.value)==null?void 0:B.english_name),1)])),o("span",{class:u(["absolute inset-y-0 right-0 flex h-auto items-center rounded-r-md min-h-auto focus-visible:outline-transparent",{"h-10 min-h-10 px-3":a.variant==="normal","h-8 min-h-8 px-2":a.variant==="dense",hidden:a.variant==="tight"}])},[a.multiple?(i(),q(L,{key:0,icon:"arrowSelect",className:"w-5 ui-open:rotate-180 transition-transform duration-200"})):(i(),q(L,{key:1,icon:"chevronDown",className:"w-5 ui-open:rotate-180 transition-transform duration-200"}))],2)]}),_:1},8,["class"]),h(G,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:v(()=>[h(m(R),{class:u(["absolute z-10 h-auto max-h-56 min-w-fit overflow-auto rounded-md text-base shadow-lg ring-1 ring-black ring-opacity-5 min-h-auto w-available bg-auto-1 focus:outline-none sm:text-sm",{"py-2 px-3":a.variant==="normal","py-1 px-2":a.variant==="dense","py-0.5 px-1.5":a.variant==="tight"}])},{default:v(()=>[(i(!0),d(K,null,M(g.value,e=>(i(),q(m(W),{as:"template",key:e.iso_639_1,value:e},{default:v(({active:r,selected:f})=>{var p;return[o("li",{class:u(["relative flex w-full min-w-fit cursor-default select-none items-center rounded-sm",{"!bg-focus text-auto-12 ":r,"text-contrast":!r,"h-8 min-h-8":a.variant==="normal","h-6 min-h-6":a.variant==="dense"}])},[o("div",le,[o("img",{src:`https://pub-a68768bb5b1045f296df9ea56bd53a7f.r2.dev/flags/${(p=e==null?void 0:e.iso_639_1)==null?void 0:p.toUpperCase()}.svg`,onerror:y=>{y.target.onerror=null,y.target.src="https://pub-a68768bb5b1045f296df9ea56bd53a7f.r2.dev/flags/xxx.svg"},alt:`${e.name!=""&&e.name!=null?e.name:e.english_name} flag`,class:"h-auto w-6 rounded-sm border border-auto-1 group-hover:border-theme-600"},null,8,se),o("span",{class:u(["mx-3 block truncate text-left",{"font-semibold":f,"font-normal":!f}])},b(e.name!=""&&e.name!=null?e.name:e.english_name),3)]),f?(i(),d("span",{key:0,class:u(["absolute right-0 flex items-center justify-center pr-4 data-[headlessui-state='disabled']:hidden",{"text-auto-50":r,"text-focus":!r}])},[h(L,{icon:"check",class:"h-5 w-5","aria-hidden":"true"})],2)):H("",!0)],2)]}),_:2},1032,["value"]))),128))]),_:1},8,["class"])]),_:1})],2)]),_:1},8,["multiple","modelValue"])]))}});export{oe as _};
