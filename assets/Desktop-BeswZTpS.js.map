{"version":3,"mappings":"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","names":["BaseStyle","__vitePreload","script$2","openBlock","createElementBlock","createBaseVNode","mergeProps","defineComponent","unref","toDisplayString","renderSlot","normalizeClass","createCommentVNode","computed","usePercentageColors","getColorFromPercent","normalizeStyle","greenToRed","hexOpacity","green","orange","purple","useServerClient","currentServer","ref","onMounted","useSocket","useLocalStorage","darkMode","createBlock","withCtx","createVNode","renderList","Fragment","getGpuColor","watch","user","_sfc_main$a","serverClient","resolveComponent","createTextVNode","_export_sfc","sortBy","useQuery","_sfc_main$c","IonContent","IonPage","dashboardSocketIsConnected","useMounted","connection","_sfc_main$d","useHubListener","_sfc_main$b","inlineStyles","classes","ChartStyle","script$1","BaseComponent","script","_this","module","event","element","dataset","_typeof","o","ownKeys","r","t","_objectSpread","_defineProperty","_toPropertyKey","i","_toPrimitive","e","_hoisted_1","render","_ctx","_cache","$props","$setup","$data","$options","createElementVNode","$event","props","__props","color","halfCircumference","strokeDashoffset","MAX_DATA_POINTS","_a","serverInfo","resources","display","lableGraph","cpuGraph","memoryGraph","gpuGraph","handleResourceUpdate","data","cpuUsage","memoryUsage","gpuCores","connected","socket","cpuCores","_b","_c","a","b","gpu","_d","gpuUsage","result","size","generateOpacityValues","gpus","step","opacityValues","opacity","chartData","core","index","c","g","legendPosition","chartOptions","documentStyle","textColor","surfaceBorder","positionOptions","chartHeight","propStatus","value","status","thumbnail","pauseJob","resumeJob","toggleRunning","_e","_f","_g","_h","_i","_j","_k","_l","_m","_n","_o","_p","_q","_r","_s","_t","_u","_v","_w","_x","_y","_z","_A","_B","_C","_D","_E","_F","_G","_H","_I","_J","_K","_L","_M","_N","_O","_P","_Q","_R","_S","_T","_U","_V","_W","_X","priority","updateProfile","encoderData","queueData","refetch","handleProgress","item","filteredQueueData","encoder","handleQueue","handleClear","serverActivity","devices","isPaused","isOnline","runners","disconnected","showing","storage","error"],"ignoreList":[0,1],"sources":["../../node_modules/primevue/chart/style/index.mjs","../../node_modules/primevue/chart/index.mjs","../../src/views/Dashboard/System/System/Components/ServerResouceCard/ResourceBar.vue","../../src/views/Dashboard/System/System/Components/ServerResouceCard/ResourceCircle.vue","../../src/views/Dashboard/System/System/Components/ServerResouceCard/ServerResourceCard.vue","../../src/views/Dashboard/System/System/Components/ServerTasksCard/ServerEncoderTaskCard.vue","../../src/views/Dashboard/System/System/Components/ServerTasksCard/ServerQueueTaskCard.vue","../../src/views/Dashboard/System/System/Components/ServerTasksCard/ServerTasksCard.vue","../../src/views/Dashboard/System/System/Components/ServerActivityCard/ServerActivityCard.vue","../../src/views/Dashboard/System/System/Components/ServerSystemInfoCard.vue","../../src/views/Dashboard/System/System/Desktop.vue"],"sourcesContent":["import BaseStyle from '@primevue/core/base/style';\n\nvar inlineStyles = {\n  root: {\n    position: 'relative'\n  }\n};\nvar classes = {\n  root: 'p-chart'\n};\nvar ChartStyle = BaseStyle.extend({\n  name: 'chart',\n  classes: classes,\n  inlineStyles: inlineStyles\n});\n\nexport { ChartStyle as default };\n//# sourceMappingURL=index.mjs.map\n","import BaseComponent from '@primevue/core/basecomponent';\nimport ChartStyle from 'primevue/chart/style';\nimport { openBlock, createElementBlock, mergeProps, createElementVNode } from 'vue';\n\nvar script$1 = {\n  name: 'BaseChart',\n  \"extends\": BaseComponent,\n  props: {\n    type: String,\n    data: null,\n    options: null,\n    plugins: null,\n    width: {\n      type: Number,\n      \"default\": 300\n    },\n    height: {\n      type: Number,\n      \"default\": 150\n    },\n    canvasProps: {\n      type: null,\n      \"default\": null\n    }\n  },\n  style: ChartStyle,\n  provide: function provide() {\n    return {\n      $pcChart: this,\n      $parentInstance: this\n    };\n  }\n};\n\nvar script = {\n  name: 'Chart',\n  \"extends\": script$1,\n  inheritAttrs: false,\n  emits: ['select', 'loaded'],\n  chart: null,\n  watch: {\n    /*\n     * Use deep watch to enable triggering watch for changes within structure\n     * otherwise the entire data object needs to be replaced to trigger watch\n     */\n    data: {\n      handler: function handler() {\n        this.reinit();\n      },\n      deep: true\n    },\n    type: function type() {\n      this.reinit();\n    },\n    options: function options() {\n      this.reinit();\n    }\n  },\n  mounted: function mounted() {\n    this.initChart();\n  },\n  beforeUnmount: function beforeUnmount() {\n    if (this.chart) {\n      this.chart.destroy();\n      this.chart = null;\n    }\n  },\n  methods: {\n    initChart: function initChart() {\n      var _this = this;\n      import('chart.js/auto').then(function (module) {\n        if (_this.chart) {\n          _this.chart.destroy();\n          _this.chart = null;\n        }\n        if (module && module[\"default\"]) {\n          _this.chart = new module[\"default\"](_this.$refs.canvas, {\n            type: _this.type,\n            data: _this.data,\n            options: _this.options,\n            plugins: _this.plugins\n          });\n        }\n        _this.$emit('loaded', _this.chart);\n      });\n    },\n    getCanvas: function getCanvas() {\n      return this.$canvas;\n    },\n    getChart: function getChart() {\n      return this.chart;\n    },\n    getBase64Image: function getBase64Image() {\n      return this.chart.toBase64Image();\n    },\n    refresh: function refresh() {\n      if (this.chart) {\n        this.chart.update();\n      }\n    },\n    reinit: function reinit() {\n      this.initChart();\n    },\n    onCanvasClick: function onCanvasClick(event) {\n      if (this.chart) {\n        var element = this.chart.getElementsAtEventForMode(event, 'nearest', {\n          intersect: true\n        }, false);\n        var dataset = this.chart.getElementsAtEventForMode(event, 'dataset', {\n          intersect: true\n        }, false);\n        if (element && element[0] && dataset) {\n          this.$emit('select', {\n            originalEvent: event,\n            element: element[0],\n            dataset: dataset\n          });\n        }\n      }\n    },\n    generateLegend: function generateLegend() {\n      if (this.chart) {\n        return this.chart.generateLegend();\n      }\n    }\n  }\n};\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar _hoisted_1 = [\"width\", \"height\"];\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", mergeProps({\n    \"class\": _ctx.cx('root'),\n    style: _ctx.sx('root')\n  }, _ctx.ptmi('root')), [createElementVNode(\"canvas\", mergeProps({\n    ref: \"canvas\",\n    width: _ctx.width,\n    height: _ctx.height,\n    onClick: _cache[0] || (_cache[0] = function ($event) {\n      return $options.onCanvasClick($event);\n    })\n  }, _objectSpread(_objectSpread({}, _ctx.canvasProps), _ctx.ptm('canvas'))), null, 16, _hoisted_1)], 16);\n}\n\nscript.render = render;\n\nexport { script as default };\n//# sourceMappingURL=index.mjs.map\n","<script setup lang=\"ts\">\nimport {computed} from \"vue\";\n\nimport {getColorFromPercent, greenToRed} from \"@/lib/colorHelper\";\nimport {usePercentageColors} from '@/store/preferences';\n\nconst props = defineProps({\n\tcpu: {\n\t\ttype: Number,\n\t\trequired: true,\n\t\tdefault: 0,\n\t},\n\tvalue: {\n\t\ttype: Number,\n\t\trequired: true,\n\t\tdefault: 0,\n\t}\n});\n\nconst color = computed(() => {\n\tif (usePercentageColors.value)\n\t\treturn getColorFromPercent(props.value, greenToRed);\n\n\treturn 'rgb(var(--color-focus))';\n});\n\n</script>\n\n<template>\n\t<div class=\"flex flex-shrink-0 flex-grow-0 items-start justify-start gap-4 self-stretch text-slate-light-11/80 dark:text-slate-dark-11/80\">\n\t\t<div class=\"flex flex-grow flex-col items-start justify-start gap-1 text-left\">\n\t\t\t<div\n\t\t\t\tclass=\"relative flex flex-shrink-0 flex-grow-0 items-center justify-start self-stretch\"\n\t\t\t>\n\t\t\t\t<p class=\"w-8 flex-shrink-0 flex-grow-0 text-sm\">\n\t\t\t\t\t{{ cpu }}\n\t\t\t\t</p>\n\t\t\t\t<div class=\"relative h-2 flex-grow rounded-lg\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"absolute h-2 w-full rounded left-[-1px] top-[-1px] bg-auto-2 dark:bg-auto-1\"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"absolute h-2 rounded transition-all duration-500 left-[-1px] top-[-1px]\"\n\t\t\t\t\t\t:style=\"{\n                width: `${value}%`,\n                backgroundImage: `linear-gradient(90deg, ${color} 0%, ${color} 100%)`,\n            }\"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t\t<p class=\"w-10 flex-shrink-0 flex-grow-0 text-right text-sm\">\n\t\t\t\t\t{{ Math.floor(value) }}%\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n","<script setup lang=\"ts\">\nimport {computed} from \"vue\";\n\nimport {getColorFromPercent, greenToRed, hexOpacity} from \"@/lib/colorHelper\";\nimport {usePercentageColors} from '@/store/preferences';\nimport {green, orange, purple} from \"@/config/global\";\n\nconst props = defineProps({\n\tname: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\tvalue: {\n\t\ttype: Number,\n\t\trequired: true,\n\t},\n\tsize: {\n\t\ttype: Number,\n\t\trequired: true,\n\t}\n});\n\nconst color = computed(() => {\n\tif (usePercentageColors.value)\n\t\treturn getColorFromPercent(props.value, greenToRed);\n\n  switch (props.name) {\n    case 'CPU':\n      return hexOpacity(purple, 50);\n    case 'Memory':\n      return hexOpacity(orange, 50);\n    case 'GPU':\n      return hexOpacity(green, 50);\n  }\n});\n\nconst halfCircumference = computed(() => Math.PI * 72);\nconst strokeDashoffset = computed(() => (1 - (props.value == -1 ? 0 : props.value) / 100) * halfCircumference.value);\n\n</script>\n\n<template>\n\t<div\n\t\tclass=\"relative flex aspect-video h-auto w-full flex-1 flex-shrink-0 flex-col items-start justify-center gap-1 flex-grow-1\"\n\t>\n\t\t<div class=\"relative h-full flex-1 flex-shrink-0 w-available\">\n\t\t\t<svg\n\t\t\t\tviewBox=\"0 0 152 148\"\n\t\t\t\tfill=\"none\"\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\tclass=\"absolute inset-2 mx-auto rounded\"\n\t\t\t\t:style=\"{\n\t\t\t\t\t\twidth: size * 2,\n\t\t\t\t\t\theight: size * 2\n\t\t\t\t}\"\n\t\t\t\tpreserveAspectRatio=\"xMidYMid meet\"\n\t\t\t>\n\t\t\t\t<path\n\t\t\t\t\td=\"M148 76C148 66.5448 146.138 57.1822 142.519 48.4468C138.901 39.7114 133.598 31.7741 126.912 25.0883C120.226 18.4025 112.289 13.099 103.553 9.48068C94.8178 5.86234 85.4552 4 76 4C66.5448 3.99999 57.1823 5.86232 48.4468 9.48066C39.7114 13.099 31.7742 18.4025 25.0883 25.0883C18.4025 31.7741 13.099 39.7113 9.48069 48.4468C5.86234 57.1822 4 66.5448 4 76\"\n          class=\"stroke-auto-2 dark:stroke-auto-1\"\n\t\t\t\t\tstroke-width=\"8\"\n\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t></path>\n\t\t\t\t<path\n\t\t\t\t\tclass=\"absolute -top-1 -left-1 h-2 rounded transition-all duration-500\"\n\t\t\t\t\td=\"M4 76C4 56.9044 11.5857 38.5909 25.0883 25.0883C38.5909 11.5857 56.9044 4 76 4C95.0956 4 113.409 11.5857 126.912 25.0883C140.414 38.5909 148 56.9044 148 76\"\n\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\tstroke: color,\n\t\t\t\t\t\t\tstrokeDasharray: halfCircumference,\n\t\t\t\t\t\t\tstrokeDashoffset: strokeDashoffset,\n\t\t\t\t\t}\"\n\t\t\t\t\tstroke-width=\"8\"\n\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t></path>\n\t\t\t</svg>\n\t\t\t<p\n\t\t\t\tclass=\"absolute top-2/3 left-1/2 -translate-x-1/2 text-center font-semibold text-[2.5vw] monospace sm:text-[1.5vw] md:text-[2vw] lg:text-[1.2vw] 2xl:text-[1vw] 5xl:text-[0.6vw]\"\n\t\t\t>\n\t\t\t\t{{ value == -1 ? $t('') : Math.floor(value) }}{{ value == -1 ? '' : '%' }}\n\t\t\t</p>\n\t\t</div>\n\t\t<p\n\t\t\tclass=\"flex-shrink-0 flex-grow-0 scale-75 self-stretch text-center text-sm font-semibold w-available text-[2.5vw] sm:text-[1.5vw] md:text-[2vw] lg:text-[1.2vw] 2xl:text-[1vw] 5xl:text-[0.7vw]\"\n\t\t>\n\t\t\t{{ name }}\n\t\t</p>\n\t</div>\n</template>\n","<script setup lang=\"ts\">\nimport {computed, onMounted, ref, watch} from 'vue';\nimport Chart from 'primevue/chart';\n\nimport type {Resource} from '@/types/api/dashboard/resource';\nimport type {ServerInfo} from \"@/types/api/dashboard/server\";\n\nimport useMounted from '@/hooks/useMounted';\nimport useHubListener from '@/hooks/useHubListener';\nimport {connection} from '@/lib/clients/dashboardSocket';\nimport {useSocket} from '@/store/socket';\nimport {getCpuColor, getGpuColor, hexOpacity} from \"@/lib/colorHelper\";\nimport {orange, purple} from \"@/config/global\";\nimport useServerClient from \"@/lib/clients/useServerClient\";\nimport {currentServer} from \"@/store/currentServer\";\n\nimport SystemCard from '../ServerSystemCard.vue';\nimport ResourceBar from './ResourceBar.vue';\nimport ResourceCircle from './ResourceCircle.vue';\nimport {darkMode} from \"@/store/colorScheme\";\nimport {ChartOptions, LineController} from \"chart.js\";\nimport {useLocalStorage} from \"@vueuse/core\";\n\nconst {data: serverInfo} = useServerClient<ServerInfo>({\n  path: 'dashboard/server/info',\n  queryKey: ['serverInfo', currentServer.value?.serverBaseUrl],\n});\n\nconst resources = ref<Resource>();\n\nconst display = ref<'bar' | 'graph'>('graph');\n\nconst MAX_DATA_POINTS = 40;\nconst lableGraph = ref<string[]>(Array(MAX_DATA_POINTS).fill(''));\nconst cpuGraph = ref<number[]>(Array(MAX_DATA_POINTS).fill(null));\nconst memoryGraph = ref<number[]>(Array(MAX_DATA_POINTS).fill(null));\nconst gpuGraph = ref<number[][]>(Array(MAX_DATA_POINTS).fill([null]));\n\nconst handleResourceUpdate = (data: Resource) => {\n  if (!data) return;\n  resources.value = data;\n\n  // lableGraph.value = [...lableGraph.value.slice(-MAX_DATA_POINTS), new Date().toLocaleTimeString()];\n  cpuGraph.value = [...cpuGraph.value.slice(-MAX_DATA_POINTS), cpuUsage.value];\n  memoryGraph.value = [...memoryGraph.value.slice(-MAX_DATA_POINTS), memoryUsage.value];\n  gpuGraph.value = [...gpuGraph.value.slice(-MAX_DATA_POINTS), gpuCores.value];\n};\n\nuseMounted(\n    () => connection.value?.invoke('StartResources'),\n    () => connection.value?.invoke('StopResources').catch(),\n);\n\nuseHubListener(connection, 'ResourceUpdate', handleResourceUpdate);\n\nconst connected = () => {\n  connection.value?.invoke('StartResources');\n};\n\nonMounted(() => {\n  const socket = useSocket();\n  socket?.onreconnected(connected);\n});\n\nconst cpuCores = computed(() => {\n  return resources.value?.cpu?.core\n      // .filter(c => !Number.isNaN(c))\n      ?.toSorted((a, b) => a.index - b.index) ?? [];\n});\n\nconst gpuCores = computed(() => {\n  return resources.value?.gpu\n      // ?.filter(c => !Number.isNaN(c))\n      ?.toSorted((a, b) => a.index - b.index)\n      .map(gpu => gpu.encode) ?? [];\n});\n\nconst cpuUsage = computed(() => {\n  if (!resources.value?.cpu?.core?.length) return -1;\n\n  return Math.floor(cpuCores.value?.reduce((a, b) => a + b.utilization, 0) / cpuCores.value.length);\n});\n\nconst memoryUsage = computed(() => {\n  if (resources.value?.memory?.percentage == 'NaN') return -1;\n\n  return resources.value?.memory?.percentage ?? -1;\n});\n\nconst gpuUsage = computed(() => {\n  if (resources.value?.gpu?.length == 0) return -1;\n\n  const result = Math.floor(gpuCores.value?.reduce((a, b) => a + b, 0) / gpuCores.value.length);\n\n  if (Number.isNaN(result)) return -1;\n\n  return result;\n});\n\nconst size = computed(() => {\n  return (window.innerWidth - 5000) / 3;\n});\n\nconst generateOpacityValues = (gpus: string[]) => {\n  const minOpacity = 25;\n  const maxOpacity = 75;\n  const maxOpacitiesPerColor = 3;\n\n  if (gpus.length === 1) {\n    return [{ color: getGpuColor(gpus[0]), opacity: 50 }];\n  }\n\n  const step = (maxOpacity - minOpacity) / (maxOpacitiesPerColor - 1);\n  const opacityValues = [];\n\n  for (let i = 0; i < gpus.length; i++) {\n    const opacity = minOpacity + (i % maxOpacitiesPerColor) * step;\n    opacityValues.push({ color: getGpuColor(gpus[i]), opacity });\n  }\n\n  return opacityValues;\n};\n\nconst chartData = computed(() => {\n  return {\n    labels: lableGraph.value,\n    datasets: [\n      ...serverInfo.value?.cpu?.map((core, index) => {\n        const color = purple ?? getCpuColor(core);\n        return {\n          label: `CPU ${serverInfo.value?.cpu.length > 1 ? index : ''}`,\n          data: cpuGraph.value,\n          yAxisID: 'y',\n          borderColor: hexOpacity(color, 50),\n        };\n      }) ?? [],\n      {\n        label: 'Memory',\n        data: memoryGraph.value,\n        yAxisID: 'y',\n        borderColor: hexOpacity(orange, 50),\n      },\n      ...serverInfo.value?.gpu?.map((core, index) => {\n\n        const c = generateOpacityValues(serverInfo.value?.gpu)[index]\n        const color = hexOpacity(c.color, c.opacity);\n\n        return {\n          label: `GPU ${serverInfo.value?.gpu.length > 1 ? index : ''}`,\n          data: gpuGraph.value.map(g => g[index]),\n          yAxisID: 'y',\n          borderColor: color,\n        };\n      }) ?? [],\n    ],\n  };\n});\n\nconst legendPosition = useLocalStorage<\"left\" | \"top\" | \"right\" | \"bottom\">('legendPosition', 'bottom');\n\nconst chartOptions = computed(() => {\n  const documentStyle = getComputedStyle(document.documentElement);\n  const textColor = darkMode.value\n      ? `rgb(${documentStyle.getPropertyValue('--color-slate-12')})`\n      : `rgb(${documentStyle.getPropertyValue('--color-slate-1')})`;\n\n  const surfaceBorder = documentStyle.getPropertyValue('--p-content-border-color');\n  const positionOptions: Array<\"left\" | \"top\" | \"right\" | \"bottom\"> = [\"left\", \"top\", \"right\", \"bottom\"];\n\n  const options: ChartOptions<\"line\"> = {\n    indexAxis: 'x',\n    maintainAspectRatio: false,\n    animation: false,\n    plugins: {\n      legend: {\n        labels: {\n          color: textColor,\n        },\n        position: legendPosition.value,\n        onClick() {\n          legendPosition.value = positionOptions[(positionOptions.indexOf(legendPosition.value) + 1) % positionOptions.length];\n        },\n      }\n    },\n    elements: {\n      line: {\n        tension: 0.2,\n\n      },\n      point: {\n        pointStyle: false,\n      },\n    },\n    scales: {\n      x: {\n        ticks: {\n          color: \"transparent\"\n        },\n        grid: {\n          color: \"transparent\"\n        },\n      },\n      y: {\n        min: 0,\n        max: 100,\n        beginAtZero: true,\n        clip: true,\n        ticks: {\n          color: textColor\n        },\n        grid: {\n          color: surfaceBorder\n        },\n      }\n    }\n  };\n  return options;\n});\n\nconst chartHeight = computed(() => {\n  const number = serverInfo.value?.gpu?.length ?? 0;\n  const baseHeight = 120;\n  const additionalHeightPerGpu = 40;\n  const additionalHeight = ((number * additionalHeightPerGpu) + baseHeight);\n  return `${additionalHeight}px`;\n});\n\n</script>\n\n<template>\n  <SystemCard title=\"Resources monitor\">\n\n    <template v-slot:cta>\n\n    </template>\n\n    <div\n        class=\"flex items-start justify-between gap-2 overflow-clip w-available text-slate-light-12/80 dark:text-slate-dark-12/80\"\n    >\n      <ResourceCircle name=\"CPU\"\n                      :value=\"cpuUsage\"\n                      :size=\"size\"/>\n\n      <div class=\"w-px flex-shrink-0 flex-grow-0 self-stretch bg-white/10\"></div>\n\n      <ResourceCircle name=\"Memory\"\n                      :value=\"memoryUsage\"\n                      :size=\"size\"/>\n\n      <div class=\"w-px flex-shrink-0 flex-grow-0 self-stretch bg-white/10\"></div>\n\n      <ResourceCircle name=\"GPU\"\n                      :value=\"gpuUsage\"\n                      :size=\"size\"/>\n    </div>\n    <div\n        class=\"flex flex-shrink-0 flex-grow-0 flex-col items-start justify-start self-stretch\"\n    >\n      <template v-if=\"display == 'bar'\">\n        <template v-for=\"(core, index) in resources?.cpu?.core ?? []\" :key=\"core.index\">\n          <ResourceBar :cpu=\"index\" :value=\"core.utilization\" v-if=\"!Number.isNaN(core.utilization)\"/>\n        </template>\n      </template>\n\n      <template v-if=\"display == 'graph'\">\n        <Chart type=\"line\" :data=\"chartData\" :options=\"chartOptions\" :style=\"`height: ${chartHeight}`\"\n               class=\"w-available\"\n        />\n      </template>\n    </div>\n  </SystemCard>\n</template>\n","<script setup lang=\"ts\">\nimport {computed, PropType, ref, watch} from 'vue';\n\nimport {ServerEncoderProgress} from '@/types/api/dashboard/server';\n\nimport serverClient from '@/lib/clients/serverClient';\nimport {currentServer} from '@/store/currentServer';\nimport MoooomIcon from '@/components/Images/icons/MoooomIcon.vue';\nimport {user} from '@/store/user';\n\nconst props = defineProps({\n  data: {\n    type: Object as PropType<ServerEncoderProgress>,\n    required: true,\n  }\n});\n\nconst propStatus = ref(props.data?.status);\n\nwatch(props, (value) => {\n  propStatus.value = value.data.status;\n});\n\nconst status = computed(() => {\n  if (propStatus.value === 'running') {\n    return 'running';\n  } else {\n    return 'paused';\n  }\n});\n\nconst thumbnail = computed(() => {\n  if(!props.data.thumbnails) return null;\n\n  const baseUrl = currentServer.value?.serverBaseUrl + '\\\\' + props.data.thumbnails;\n  return baseUrl.replace(/\\\\+/gu, '/')\n      .replace(/\\/\\/images/u, '/images') + '?token=' + user.value.accessToken\n});\n\nconst pauseJob = () => {\n  serverClient()\n      .post(`/dashboard/tasks/pause/${props.data.process_id}`)\n      .then(({data}) => {\n        propStatus.value = data ? 'paused' : propStatus.value;\n      })\n      .catch(() => {\n        // error\n      });\n};\n\nconst resumeJob = () => {\n  serverClient()\n      .post(`/dashboard/tasks/resume/${props.data.process_id}`)\n      .then(({data}) => {\n        propStatus.value = data ? 'running' : propStatus.value;\n      })\n      .catch(() => {\n        // error\n      });\n};\n\nconst toggleRunning = () => {\n  if (propStatus.value === 'running') {\n    pauseJob();\n  } else {\n    resumeJob();\n  }\n};\n\n</script>\n\n<template>\n  <div v-if=\"data\"\n       class=\"relative flex w-full flex-col items-start justify-start overflow-clip rounded-lg pt-2 group/encoderCard gap-1.5 px-2.5 pb-3.5 bg-slate-lightA-3 dark:bg-slate-darkA-3\"\n  >\n    <div\n        class=\"relative flex w-full items-center justify-center gap-0.5\"\n    >\n      <p\n          class=\"w-full flex-grow text-sm font-semibold text-auto-12 line-clamp-1\"\n      >\n        {{ data.title.replace(/NoMercy/giu, '') }}\n      </p>\n      <p\n          class=\"flex-shrink-0 flex-grow-0 text-right text-xs font-light text-auto-alpha-10\"\n      >\n        {{ $t('Id') }}: {{ data?.process_id }}\n      </p>\n    </div>\n    <div\n        class=\"relative flex items-start justify-start gap-2\"\n    >\n      <div v-if=\"data?.message == 'Encoding video'\"\n          class=\"relative aspect-video h-auto w-1/3 flex-shrink-0 flex-grow-0 overflow-hidden rounded-sm min-w-36\"\n          style=\"\n                    background: linear-gradient(\n                      to bottom,\n                      rgba(0, 0, 0, 0) 0%,\n                      rgba(0, 0, 0, 0) 25%,\n                      rgba(0, 0, 0, 0) 50%,\n                      #000 100%\n                    );\n                \"\n      >\n        <div\n            class=\"absolute inset-0 z-0 h-full w-full bg-white/[0.01]\"\n        >\n          <div\n              class=\"pointer-events-none absolute inset-0 z-10 mt-auto h-4/5 bg-gradient-to-t from-black via-black/60\"></div>\n          <img\n              v-if=\"thumbnail\"\n              :src=\"thumbnail\"\n              class=\"absolute z-0 h-full w-full\" alt=\"\"/>\n        </div>\n\n        <div @click=\"toggleRunning\"\n             class=\"absolute top-1/2 left-1/2 z-10 group-hover/encoderCard:flex hidden h-11 w-11 -translate-x-1/2 -translate-y-1/2 rounded-full bg-black/60 p-0.5 group/progress text-focus\"\n        >\n          <div class=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-[10px]\">\n            <MoooomIcon v-if=\"status == 'running'\" icon=\"pause\" class=\"w-10 text-white\"/>\n            <MoooomIcon v-else icon=\"play\" class=\"w-10 text-white\"/>\n\n            <!--                        <span class=\"group-hover/progress:hidden text-right font-bold text-auto-12 monospace\">-->\n            <!--                            {{ Math.floor(data?.progress ?? 0) }}%-->\n            <!--                        </span>-->\n          </div>\n        </div>\n\n        <div\n            class=\"absolute z-10 flex items-end justify-start left-[3%] bottom-[3%] gap-[2%]\"\n        >\n          <MoooomIcon v-if=\"data?.has_gpu\" icon=\"gpu\" className=\"w-[15%]\"/>\n          <MoooomIcon v-else icon=\"cpu\" className=\"w-[15%]\"/>\n\n          <MoooomIcon v-if=\"data?.is_hdr\" icon=\"hdr\" className=\"w-[15%]\"/>\n          <MoooomIcon v-else icon=\"hdrOff\" className=\"w-[15%]\"/>\n        </div>\n\n        <div\n            class=\"absolute z-10 flex items-end justify-end right-[3%] bottom-[3%] gap-[2%] text-[10px]\"\n        >\n                <span class=\"group-hover/progress:hidden text-right font-bold text-auto-12 monospace\">\n                    {{ Math.floor(data?.progress ?? 0) }}%\n                </span>\n        </div>\n      </div>\n\n\n      <div class=\"flex h-full flex-grow flex-col items-start justify-evenly\">\n        <div\n            class=\"relative flex h-4 items-center justify-center overflow-clip\"\n        >\n          <MoooomIcon icon=\"stickyNote\" className=\"relative w-4 text-auto-12\"/>\n          <p class=\"ml-2 w-full font-medium text-2xs text-auto-12\">\n            {{ data?.message }}\n          </p>\n        </div>\n        <div v-if=\"data?.message == 'Encoding video'\"\n            class=\"relative flex h-4 w-full items-start justify-start gap-2\"\n        >\n          <div v-if=\"data?.speed\"\n               class=\"relative flex h-4 items-center justify-center overflow-clip\"\n          >\n            <MoooomIcon icon=\"dashboard\" className=\"relative w-4 text-auto-12\"/>\n            <p class=\"ml-2 w-full font-medium text-2xs text-auto-12\">\n              {{ data?.speed }}X\n            </p>\n          </div>\n        </div>\n        <div v-if=\"data?.message == 'Encoding video'\"\n            class=\"relative flex h-4 w-full items-start justify-start gap-2\"\n        >\n          <div v-if=\"data?.remaining_split\"\n               class=\"relative flex h-4 items-center justify-center overflow-clip\"\n          >\n            <MoooomIcon icon=\"hourglass\" className=\"relative w-4 text-auto-12\"/>\n            <p class=\"ml-1 font-medium text-2xs text-auto-12\">\n              {{\n                data?.remaining_split?.[0] && data?.remaining_split[0] > 0\n                    ? ` ${data?.remaining_split?.[0] + $t('d')} `\n                    : ''\n              }}\n              {{\n                data?.remaining_split?.[1] && (data?.remaining_split[1] > 0 || data?.remaining_split[0] > 0)\n                    ? ` ${data?.remaining_split?.[1] + $t('h')} `\n                    : ''\n              }}\n              {{\n                data?.remaining_split?.[2] && (data?.remaining_split[2] > 0 || data?.remaining_split[1] > 0 || data?.remaining_split[0] > 0)\n                    ? ` ${data?.remaining_split?.[2] + $t('m')} `\n                    : ''\n              }}\n              {{\n                data?.remaining_split?.[3]\n                    ? ` ${data?.remaining_split?.[3] + $t('s')} `\n                    : ''\n              }}\n            </p>\n          </div>\n        </div>\n        <div v-if=\"data?.video_streams && data?.message == 'Encoding video'\"\n             class=\"relative flex h-4 items-center justify-center gap-2 overflow-clip\"\n        >\n          <div\n              class=\"relative flex h-4 w-full cursor-pointer items-center justify-start gap-2\"\n              :title=\"data?.video_streams?.join?.(', ') ?? ''\"\n          >\n            <MoooomIcon icon=\"film\" className=\"w-4\"/>\n            <p class=\"w-full text-xs text-auto-alpha-10 line-clamp-1\">\n              {{ data?.video_streams.length }}\n            </p>\n          </div>\n          <div v-if=\"data?.audio_streams\"\n               class=\"relative flex h-4 cursor-pointer items-center justify-center gap-2 overflow-clip\"\n               :title=\"data?.audio_streams?.join?.(', ') ?? ''\"\n          >\n            <MoooomIcon icon=\"audioFile\" className=\"w-4\"/>\n            <p class=\"w-full text-xs text-auto-alpha-10 line-clamp-1\">\n              {{ data?.audio_streams.length }}\n            </p>\n          </div>\n          <div v-if=\"data?.subtitle_streams\"\n               class=\"relative flex h-4 cursor-pointer items-center justify-center gap-2 overflow-clip\"\n               :title=\"data?.subtitle_streams?.join?.(', ') ?? ''\"\n          >\n            <MoooomIcon icon=\"chatBubble\" className=\"w-4\"/>\n            <p class=\"w-full text-xs text-auto-alpha-10 line-clamp-1\">\n              {{ data?.subtitle_streams.length }}\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div v-if=\"data?.message == 'Encoding video'\"\n        class=\"absolute -bottom-0.5 left-0 h-1 w-full blur-[1px]\">\n      <div class=\"absolute w-full h-1 left-[-1px] top-[-1px] bg-black/[0.22]\"></div>\n      <div\n          class=\"w-0 h-1 absolute left-[-1px] top-[-1px] rounded-sm bg-gradient-to-r from-black/5 to-[rgb(var(--color-focus))] z-10\"\n          :style=\"`width: ${data.progress}%;`\"></div>\n      <div class=\"w-1 h-0.5 absolute top-[-1px] rounded-sm bg-[#f1eefe] -translate-x-[2px] z-0\"\n           :style=\"`left: ${data.progress}%;`\"></div>\n    </div>\n  </div>\n</template>\n","<script setup lang=\"ts\">\nimport {type PropType, ref, watch} from 'vue';\n\nimport type {QueueResponse} from '@/types/api/dashboard/server';\nimport MoooomIcon from '@/components/Images/icons/MoooomIcon.vue';\nimport serverClient from \"@/lib/clients/serverClient\";\n\n\nconst props = defineProps({\n  data: {\n    type: Object as PropType<QueueResponse>,\n    required: true,\n  }\n});\n\nconst priority = ref<number>(props.data.priority ?? 0);\n\nconst updateProfile = async (value: number) => {\n  serverClient()\n      .patch(`/dashboard/tasks/queue/${props.data.id}`, {\n        id: props.data.id,\n        priority: value,\n      })\n      .then(() => {\n        console.log('Priority updated');\n      })\n};\n\nwatch(priority, (value) => {\n  console.log(value);\n  updateProfile(value);\n});\n\n</script>\n\n<template>\n  <div\n      class=\"flex flex-shrink-0 flex-grow-0 items-start gap-4 self-stretch overflow-hidden rounded-lg py-4 pr-1 pl-4 bg-slate-lightA-3 dark:bg-slate-darkA-3 text-slate-light-12/80 dark:text-slate-dark-12/80\"\n  >\n    <div class=\"relative flex flex-1 flex-grow flex-col items-start space-y-[-2px] w-full\">\n      <p\n          class=\"w-full flex-grow text-sm font-semibold text-auto-12 line-clamp-1\"\n      >\n        {{ data.title.replace(/NoMercy/giu, '') }}\n      </p>\n      <p\n          class=\"flex-shrink-0 flex-grow-0 self-stretch text-xs w-available !mt-1 text-slate-light-12/80 dark:text-slate-dark-12/80\"\n      >\n        {{ $t('Id') }}:\n        <span class=\"text-slate-light-11 dark:text-slate-dark-11\">\n          {{ data.id }}\n        </span>\n      </p>\n      <p\n        class=\"flex-shrink-0 flex-grow-0 self-stretch text-xs w-available text-slate-light-12/80 dark:text-slate-dark-12/80 w-full flex justify-between\"\n      >\n        <span>{{ $t('Priority') }}:</span>\n        <InputNumber\n            size=\"small\"\n            variant=\"filled\"\n            showButtons\n            v-model=\"priority\"\n            class=\"ml-auto h-8 first:children:!w-12 last:children:!w-4 children:last:children:!w-4 translate-x-12 overflow-clip -mb-2\"\n            :min=\"0\"\n            :max=\"100\"\n            :step=\"1\"\n        />\n      </p>\n      <p\n          class=\"flex-shrink-0 flex-grow-0 self-stretch text-xs w-available text-slate-light-12/80 dark:text-slate-dark-12/80\"\n      >\n        {{ $t('Profile') }}:\n        <span class=\"text-slate-light-11 dark:text-slate-dark-11\">\n          {{ data.profile }}\n        </span>\n      </p>\n      <p\n          class=\"flex-shrink-0 flex-grow-0 self-stretch break-all text-xs w-available text-slate-light-12/80 dark:text-slate-dark-12/80\"\n      >\n        {{ $t('File') }}:\n        <span class=\"text-slate-light-11 dark:text-slate-dark-11\">\n          {{ data.input_file }}\n        </span>\n      </p>\n    </div>\n\n    <button\n        class=\"relative flex flex-shrink-0 flex-grow-0 items-start justify-start gap-2 overflow-hidden rounded-lg bg-transparent p-1.5 -mt-1.5 -mr-0.5\"\n    >\n      <MoooomIcon icon=\"cross\" class=\"relative h-5 w-5 flex-shrink-0 flex-grow-0\"/>\n    </button>\n  </div>\n</template>\n\n<style scoped>\n.p-inputnumber .p-inputnumber-button {\n  --p-inputnumber-button-width: 1rem;\n}\n</style>","<script setup lang=\"ts\">\nimport {computed, onMounted, ref} from 'vue';\n\nimport type {QueueResponse, ServerEncoderProgress} from '@/types/api/dashboard/server';\n\nimport {sortBy} from '@/lib/stringArray';\nimport useServerClient from '@/lib/clients/useServerClient';\nimport useHubListener from '@/hooks/useHubListener';\nimport {connection} from \"@/lib/clients/dashboardSocket\";\n\nimport SystemCard from '../ServerSystemCard.vue';\nimport ServerEncoderTaskCard from './ServerEncoderTaskCard.vue';\nimport ServerQueueTaskCard from './ServerQueueTaskCard.vue';\n\nonMounted(() => {\n  encoderData.value = [];\n});\n\nconst encoderData = ref<ServerEncoderProgress[]>([]);\n\nconst {data: queueData, refetch} = useServerClient<QueueResponse[]>({\n  path: 'dashboard/tasks/queue',\n  queryKey: ['queue'],\n  refetchInterval: 30000,\n});\n\nconst handleProgress = (data: ServerEncoderProgress) => {\n  if (data.status == 'running' || data.status == 'paused') {\n    encoderData.value = sortBy([...encoderData.value.filter(item => item?.process_id !== data?.process_id), data], 'process_id');\n  } else {\n    encoderData.value = sortBy([...encoderData.value.filter(item => item?.process_id !== data?.process_id)], 'process_id');\n    refetch();\n  }\n};\n\nconst filteredQueueData = computed(() => {\n  return queueData.value?.filter(item => !encoderData.value.find(encoder => encoder.process_id === item.process_id));\n});\n\nconst handleQueue = (data: QueueResponse[]) => {\n  queueData.value = data;\n};\n\nconst handleClear = () => {\n  encoderData.value = [];\n  refetch();\n};\n\nuseHubListener(connection, 'encoder-progress', handleProgress);\nuseHubListener(connection, 'encoder-queue', handleQueue);\nuseHubListener(connection, 'encoder-clear', handleClear);\nuseHubListener(connection, 'disconnected', handleClear);\n\n</script>\n\n<template>\n\n  <SystemCard v-if=\"encoderData.length || queueData?.length\" title=\"Running tasks\" :background=\"false\">\n    <template v-slot:cta>\n\n    </template>\n\n    <template v-for=\"data in encoderData ?? []\" :key=\"data.process_id\">\n      <ServerEncoderTaskCard :data=\"data\"/>\n    </template>\n\n    <template v-for=\"data in filteredQueueData\" :key=\"data.process_id\">\n      <ServerQueueTaskCard :data=\"data\"/>\n    </template>\n  </SystemCard>\n\n  <SystemCard v-else title=\"Running tasks\" :background=\"false\">\n    <div\n        class=\"relative flex items-start justify-start gap-2 self-stretch rounded-lg p-4 bg-slate-lightA-3 dark:bg-slate-darkA-3 text-slate-light-12/80 dark:text-slate-dark-12/80\">\n        <span class=\"flex-shrink-0 flex-grow-0 self-stretch text-sm font-semibold\">\n          {{ $t('No tasks are currently running') }}\n        </span>\n    </div>\n  </SystemCard>\n</template>\n","<script setup lang=\"ts\">\n\nimport type {ActivityLog, Device} from '@/types/server';\n\nimport useServerClient from '@/lib/clients/useServerClient';\n\nimport SystemCard from '../ServerSystemCard.vue';\nimport ActivityCard from './ActivityCard.vue';\nimport {dashboardSocketIsConnected} from \"@/lib/clients/dashboardSocket\";\n\nconst {data: serverActivity} = useServerClient<ActivityLog[]>({\n  path: 'dashboard/activity',\n  refetchInterval: 10000,\n  data: {\n    take: 999,\n  },\n  queryKey: ['server', 'activity'],\n});\n\nconst {data: devices} = useServerClient<Device[]>({\n  path: 'dashboard/devices',\n  refetchInterval: 10000,\n  queryKey: ['devices'],\n});\n\n\n</script>\n\n<template>\n  <SystemCard v-if=\"dashboardSocketIsConnected\" title=\"Activity\" :background=\"false\">\n\n    <template v-slot:cta>\n\n    </template>\n\n    <ActivityCard\n        v-for=\"activity in serverActivity?.slice(0, 5) ?? []\"\n        :devices=\"devices ?? []\"\n        :key=\"activity?.id\"\n        :activity=\"activity\"\n    />\n  </SystemCard>\n</template>\n","<script setup lang=\"ts\">\nimport {onMounted, ref} from 'vue';\nimport {useQuery} from '@tanstack/vue-query';\n\nimport type {PauseResumeResponse, RunnersResponse, ServerInfo} from '@/types/api/dashboard/server';\n\nimport useServerClient from '@/lib/clients/useServerClient';\nimport serverClient from '@/lib/clients/serverClient';\nimport {currentServer} from '@/store/currentServer';\nimport {useSocket} from '@/store/socket';\n\nimport MoooomIcon from '@/components/Images/icons/MoooomIcon.vue';\nimport KeepCounting from '@/components/KeepCounting.vue';\n\nimport ServerSystemCard from './ServerSystemCard.vue';\n\nconst isPaused = ref(false);\nconst isOnline = ref(true);\n\nconst {data: runners, refetch} = useQuery({\n  queryKey: ['runners', currentServer.value?.serverBaseUrl],\n  retryOnMount: true,\n  queryFn: () =>\n      serverClient()\n          .get<RunnersResponse>('dashboard/tasks/runners')\n          .then(({data}) => {\n            isPaused.value = !(data.workers > 0);\n            return data.workers ?? [];\n          }),\n});\n\nconst {data: serverInfo} = useServerClient<ServerInfo>({\n  path: 'dashboard/server/info',\n  queryKey: ['serverInfo', currentServer.value?.serverBaseUrl],\n});\n\nconst connected = () => {\n  isOnline.value = true;\n  refetch();\n};\nconst disconnected = () => {\n  isOnline.value = false;\n};\n\nonMounted(() => {\n  const socket = useSocket();\n  socket?.onreconnected(connected);\n  socket?.onclose(disconnected);\n});\n\nconst togglePause = () => {\n  serverClient()\n      .post<PauseResumeResponse>(`dashboard/tasks/${isPaused.value\n          ? 'resume'\n          : 'pause'}`)\n      .then(({data}) => {\n        isPaused.value = !isPaused.value;\n        // showNotification({\n        //     title: t('Success'),\n        //     body: t(isPaused.value\n        //         ? 'Paused'\n        //         : 'Resumed'),\n        //     type: TYPE.SUCCESS,\n        // });\n        return data;\n      })\n      .catch((response) => {\n        // showNotification({\n        //     title: t('Error'),\n        //     body: response.data.message,\n        //     type: TYPE.ERROR,\n        // });\n      });\n};\n\nconst handleSubmit = () => {\n  //\n};\n\nconst toggleServerState = () => {\n  alert('ok bye!');\n};\n\n</script>\n\n<template>\n  <ServerSystemCard title=\"System\">\n\n    <template v-slot:cta>\n      <div\n          class=\"relative h-7 flex flex-shrink-0 flex-grow-0 items-center justify-center gap-2 overflow-hidden border-1 border-slate-light-10 dark:border-slate-dark-10 text-slate-light-12/80 dark:text-slate-dark-12/80 rounded-lg pl-1 pr-2 py-1\"\n      >\n        <MoooomIcon icon=\"pause\" class=\"w-4\"/>\n        <p class=\"flex-shrink-0 flex-grow-0 text-sm\">\n          {{ $t('Pause') }}\n        </p>\n      </div>\n      <div\n          class=\"relative h-7 flex flex-shrink-0 flex-grow-0 items-center justify-center gap-2 overflow-hidden border-1 border-slate-light-10 dark:border-slate-dark-10 text-slate-light-12/80 dark:text-slate-dark-12/80 rounded-lg pl-1 pr-2 py-1\"\n      >\n        <MoooomIcon icon=\"shutdown\" class=\"w-4\"/>\n        <p class=\"flex-shrink-0 flex-grow-0 text-sm\">\n          {{ $t('Shutdown') }}\n        </p>\n      </div>\n    </template>\n\n    <div\n        class=\"relative flex flex-shrink-0 flex-grow-0 items-start justify-start gap-4 self-stretch overflow-clip w-available\">\n      <p class=\"w-auto flex-grow whitespace-nowrap text-sm text-slate-light-12 dark:text-slate-dark-12\">\n        {{ $t('Server') }}\n      </p>\n      <p class=\"flex-shrink-0 flex-grow-0 text-sm line-clamp-1 text-slate-light-10 dark:text-slate-dark-10\">\n        {{ serverInfo?.server }}\n      </p>\n    </div>\n    <div\n        class=\"relative flex flex-shrink-0 flex-grow-0 items-start justify-start gap-4 self-stretch overflow-clip w-available\">\n      <p class=\"w-auto flex-grow whitespace-nowrap text-sm text-slate-light-12 dark:text-slate-dark-12\">\n        {{ $t('Server version') }}\n      </p>\n      <p class=\"flex-shrink-0 flex-grow-0 text-sm line-clamp-1 text-slate-light-10 dark:text-slate-dark-10\">\n        {{ serverInfo?.version }}\n      </p>\n    </div>\n    <div\n        class=\"relative flex flex-shrink-0 flex-grow-0 items-start justify-start gap-4 self-stretch overflow-clip w-available\">\n      <p class=\"w-auto flex-grow whitespace-nowrap text-sm text-slate-light-12 dark:text-slate-dark-12\">\n        {{ $t('Uptime') }}\n      </p>\n      <p class=\"flex-shrink-0 flex-grow-0 text-sm line-clamp-1 text-slate-light-10 dark:text-slate-dark-10\">\n        <KeepCounting :startTime=\"serverInfo?.bootTime\" :key=\"serverInfo?.bootTime\"/>\n      </p>\n    </div>\n    <div\n        class=\"relative flex flex-shrink-0 flex-grow-0 items-start justify-start gap-4 self-stretch overflow-clip w-available\">\n      <p class=\"w-auto flex-grow whitespace-nowrap text-sm text-slate-light-12 dark:text-slate-dark-12\">\n        {{ $t('OS') }}\n      </p>\n      <p class=\"flex-shrink-0 flex-grow-0 text-sm line-clamp-1 text-slate-light-10 dark:text-slate-dark-10\">\n        {{ serverInfo?.os.toTitleCase() }}\n      </p>\n    </div>\n    <div\n        class=\"relative flex flex-shrink-0 flex-grow-0 items-start justify-start gap-4 self-stretch overflow-clip w-available\">\n      <p class=\"w-auto flex-grow whitespace-nowrap text-sm text-slate-light-12 dark:text-slate-dark-12\">\n        {{ $t('Architecture') }}\n      </p>\n      <p class=\"flex-shrink-0 flex-grow-0 text-sm line-clamp-1 text-slate-light-10 dark:text-slate-dark-10\">\n        {{ serverInfo?.arch }}\n      </p>\n    </div>\n    <div\n        class=\"relative flex flex-shrink-0 flex-grow-0 items-start justify-start gap-4 self-stretch overflow-clip w-available\"\n        v-for=\"(cpu, index) in serverInfo?.cpu\">\n      <p class=\"w-auto flex-grow whitespace-nowrap text-sm text-slate-light-12 dark:text-slate-dark-12\">\n        {{ $t('CPU') }} #{{ index + 1 }}\n      </p>\n      <p class=\"flex-shrink-0 flex-grow-0 text-sm line-clamp-1 text-slate-light-10 dark:text-slate-dark-10\">\n        {{ cpu }}\n      </p>\n    </div>\n    <div\n        class=\"relative flex flex-shrink-0 flex-grow-0 items-start justify-start gap-4 self-stretch overflow-clip w-available\"\n        v-for=\"(gpu, index) in serverInfo?.gpu\">\n      <p class=\"w-auto flex-grow whitespace-nowrap text-sm text-slate-light-12 dark:text-slate-dark-12\">\n        {{ $t('GPU') }} #{{ index + 1 }}\n      </p>\n      <p class=\"flex-shrink-0 flex-grow-0 text-sm line-clamp-1 text-slate-light-10 dark:text-slate-dark-10\">\n        {{ gpu }}\n      </p>\n    </div>\n  </ServerSystemCard>\n</template>\n\n<style scoped lang=\"scss\">\n:root {\n  --p-metergroup-label-marker-size: 0.5rem;\n}\n</style>","<script setup lang=\"ts\">\nimport {onMounted, ref, watch} from 'vue';\nimport {IonPage, IonContent} from '@ionic/vue';\n\nimport {connection, dashboardSocketIsConnected} from '@/lib/clients/dashboardSocket';\n\nimport DashboardLayout from '@/Layout/Desktop/DashboardLayout.vue';\n\nimport ServerResourceCard from './Components/ServerResouceCard/ServerResourceCard.vue';\nimport ServerSystemCard from './Components/ServerSystemCard.vue';\nimport ServerPathsCard from './Components/ServerPathsCard.vue';\nimport ServerTasksCard from './Components/ServerTasksCard/ServerTasksCard.vue';\nimport ServerActivityCard from './Components/ServerActivityCard/ServerActivityCard.vue';\nimport ServerSystemInfoCard from '@/views/Dashboard/System/System/Components/ServerSystemInfoCard.vue';\nimport useServerClient from \"@/lib/clients/useServerClient\";\nimport {currentServer} from \"@/store/currentServer\";\n\nconst showing = ref(true);\n\nwatch(connection, (value) => {\n  showing.value = !!value;\n});\n\nonMounted(() => {\n  setTimeout(() => {\n    showing.value = !!connection.value;\n  }, 1000);\n});\n\nconst {data: storage, error} = useServerClient({\n  path: 'dashboard/server/storage',\n  queryKey: ['dashboard', 'storage', currentServer.value?.serverBaseUrl],\n});\n\nonMounted(() => {\n  console.raw(storage.value);\n});\n\n</script>\n\n<template>\n  <ion-page>\n    <ion-content :fullscreen=\"true\">\n\n      <DashboardLayout title=\"Dashboard overview\" :gridStyle=\"2\">\n        <template v-slot:cta>\n\n        </template>\n\n        <div class=\"col-span-3 col-start-1 flex flex-col gap-4 lg:col-span-2 xl:col-span-2 xl:col-start-1 xl:row-start-1\">\n          <ServerSystemInfoCard />\n\n          <ServerResourceCard v-if=\"dashboardSocketIsConnected\" />\n          <ServerSystemCard title=\"Resources monitor\" v-else class=\"animate-pulse\">\n            <template v-slot:cta>\n            </template>\n            <div class=\"min-h-80\"></div>\n          </ServerSystemCard>\n<!--          <ServerPathsCard  class=\"flex lg:hidden xl:flex\"/>-->\n        </div>\n\n        <div class=\"col-span-3 col-start-1 flex flex-col gap-4 lg:col-span-2 xl:col-span-2 xl:col-start-3 xl:row-start-1\">\n          <ServerTasksCard />\n        </div>\n\n        <div\n            class=\"col-span-3 col-start-1 flex flex-col gap-4 lg:col-span-2 lg:col-start-1 lg:row-start-2 2xl:col-span-2 2xl:col-start-5 2xl:row-start-1 2xl:flex\">\n\n          <ServerActivityCard />\n<!--          <ServerPathsCard  class=\"hidden lg:flex xl:hidden\"/>-->\n        </div>\n      </DashboardLayout>\n    </ion-content>\n  </ion-page>\n</template>\n"],"file":"assets/Desktop-BeswZTpS.js"}