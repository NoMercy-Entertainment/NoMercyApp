import{$ as q,At as c,C as i,Dt as v,Et as t,K,S as s,T as f,Y as r,Z as g,_t as C,c as U,g as y,j as V,k as p,lt as x,n as Q,q as Y,st as Z,w as u,x as m}from"./i18n-DBb78QAI.js";import"./ionic-DNKsarlx.js";import{I as J,P as O}from"./vue-core-CD3ScEG4.js";import{w as W}from"./primevue-CDzFprnl.js";import"./query-Dwz_k4KB.js";import{Br as S,Gn as b,Kn as w,Qi as h,Si as l,Sr as X,b as ee,bi as te,ha as j,ir as ae,n as re,ua as se,v as le,zi as oe}from"./index-Dbw70ZKS.js";import"./useInfiniteServerClient-BG6feyia.js";import{t as ie}from"./useServerClient-CIpZVCqE.js";import{t as ne}from"./ScrollContainer-HN7xdQ-l.js";import"./MusicButton-C9LuPY-w.js";import"./BannerButton-UElmt47M.js";import{t as ue}from"./MediaLikeButton-DXh7wU4B.js";import"./swiper-qApLbPOj.js";import"./CardIndicator-C1udnMcg.js";import{t as ce}from"./NMCard-CQTHu8kg.js";import"./swiper-config-BVm7SEnX.js";import{t as de}from"./dist-BXaLtCab.js";import{t as fe}from"./FloatingBackButton-PJwyKHhE.js";import{n as pe,t as me}from"./ContentRating-CBWPMOK-.js";import{t as ve}from"./InfoHeaderItem-DbvJBD0a.js";import{t as he}from"./NotFound-ChmUPC8r.js";import{t as _e}from"./ShareButton-DWJxb6mN.js";import"./Carousel-C-qTyT24.js";import"./PersonCard-DA-YU0Ud.js";import{n as B,t as D}from"./ImageCarousel-Q1bpVZvH.js";import{t as ge}from"./ListControlHeaderMoreMenu-CqKohp66.js";U();O();var R=de(),ye={class:"w-available text-surface-12"},xe={key:0,class:"w-available overflow-x-clip relative mt-12 flex flex-grow flex-col items-start justify-start gap-4 self-stretch py-5"},be={class:"z-0 flex w-full flex-grow items-end justify-end gap-2"},we={class:"z-0 flex w-full flex-grow flex-col items-end justify-end gap-2"},ke={class:"ml-4 w-full self-stretch text-5xl font-bold px-4"},Ce={class:"ml-4 w-full self-stretch text-lg px-4"},Se={class:"children:absolute relative top-6 bottom-0 col-start-1 col-end-2 flex h-auto w-auto select-none justify-end max-w-[20vw] w-available translate-x-[4px] sm:h-40 lg:max-w-[30vw] aspect-[32/8] fade-up -mb-6"},je={class:"flex flex-col items-start justify-start gap-4 self-stretch px-4 before:content-[''] before:self-stretch before:h-px before:bg-[#e2f0fd]/4 after:content-[''] after:self-stretch after:h-px after:bg-[#e2f0fd]/4"},Be={class:"flex items-start justify-start gap-8 self-stretch pl-4"},De={class:"text-xs font-bold uppercase text-surface-11"},Re={class:"text-sm font-bold -ml-0.5"},Te={class:"relative flex flex-grow flex-col items-start justify-center text-left gap-1"},Ee={class:"text-xs font-bold uppercase text-surface-11"},Pe={key:0,class:"relative ml-auto flex h-16 items-center justify-center gap-4"},Ie={class:"absolute top-3 grid h-0 w-max origin-bottom group-hover/play:grid-cols-1 items-center justify-start bg-black duration-200 grid-cols-[0fr] group-hover/play:h-[32.77px] transform-all left-[-31px] group-hover/play:top-[-38px] rounded-[5.46px] overflow-hidden"},Ae={class:"py-0 text-xs font-bold px-2.5"},ze=V({__name:"Desktop",setup(Me){const d=J(),{t:T}=Q(),n=W(),{data:e,isError:E}=ie({queryKey:["base","collection",d.params.id],limit:1e3,keepForever:!0}),_=C(null),k=C(null);Z(e,a=>{a&&(a?.backdrop&&b(a?.backdrop),a?.color_palette&&w(a.color_palette.backdrop),_.value=a.duration&&new Date(new Date().getTime()+a.duration*60*1e3).toLocaleTimeString(j.language??"en-US",{hour:"2-digit",minute:"2-digit"}),k.value=setInterval(()=>{_.value=a.duration&&new Date(new Date().getTime()+a.duration*60*1e3).toLocaleTimeString(j.language??"en-US",{hour:"2-digit",minute:"2-digit"})},1e3))}),K(()=>{document.dispatchEvent(new Event("sidebar")),te(e?.value?.title),e?.value?.backdrop&&b(e?.value?.backdrop),e?.value?.color_palette&&w(e?.value?.color_palette.backdrop)}),Y(()=>{b(null),w(null),clearInterval(k.value??void 0)});const P=m(()=>({url:`https://app.nomercy.tv${d.fullPath}`})),I=m(()=>e.value?.total_duration?ae(T,e.value.total_duration??0,!0):null),A=m(()=>`${(0,R.collect)(e.value?.collection).min("year")} - ${(0,R.collect)(e.value?.collection).max("year")}`),z=m(()=>[{show:!!e.value?.content_ratings,label:"Content rating",component:"ContentRating",data:e.value?.content_ratings},{show:!0,label:"Availability",value:`${e.value?.have_items} / ${e.value?.number_of_items}`},{show:!0,label:"Timespan",value:A.value},{show:!!e.value?.total_duration,label:"Total duration",value:I.value}]);function M(){h().post(`${d.fullPath}/rescan`).then(({data:a})=>{n.add({severity:a.status==="ok"?"success":"error",summary:l("Success"),detail:l(a.message,...a.args),life:5e3})}).catch(()=>{n.add({severity:"error",summary:l("error"),detail:l("An error occurred while rescanning the library folders"),life:5e3})})}function L(){h().post(`${d.fullPath}/refresh`).then(({data:a})=>{n.add({severity:a.status==="ok"?"success":"error",summary:l(a.status==="ok"?"Success":"Error"),detail:l(a.message,...a.args),life:5e3})}).catch(()=>{n.add({severity:"error",summary:l("Error"),detail:l("An error occurred while rescanning the library folders"),life:5e3})})}function $(){h().delete(`${d.fullPath}`).then(({data:a})=>{n.add({severity:a.status==="ok"?"success":"error",summary:l(a.status==="ok"?"Success":"Error"),detail:l(a.message,...a.args),life:5e3})}).catch(()=>{n.add({severity:"error",summary:l("error"),detail:l("An error occurred while rescanning the library folders"),life:5e3})})}function H(){h().post(`${d.fullPath}/add`).then(({data:a})=>{n.add({severity:a.status==="ok"?"success":"error",summary:l(a.status==="ok"?"Success":"Error"),detail:l(a.message,...a.args),life:5e3})}).catch(()=>{n.add({severity:"error",summary:l("Error"),detail:l("An error occurred while rescanning the library folders"),life:5e3})})}const N=m(()=>[{icon:"arrowRefreshHorizontal",onclick:M,title:"Rescan files",privileged:!0},{icon:"arrowRefreshHorizontal",onclick:L,title:"Refresh data",privileged:!0},{icon:"folderAdd",onclick:H,title:`Add ${e?.value?.media_type}`,privileged:!0},{icon:"folderRemove",onclick:$,title:`Delete ${e?.value?.media_type}`,privileged:!0},{icon:"edit",onclick:()=>{window.open(`https://www.themoviedb.org/${e?.value?.media_type}/${e?.value?.id}/edit`,"_blank")},title:"Edit on TMDb"}]);return(a,Le)=>{const F=q("RouterLink");return t(E)&&!t(e)?(r(),i(he,{key:0})):(r(),i(ne,{key:1,"auto-hide":!0,static:!0},{default:x(()=>[s("article",ye,[p(fe),t(e)?(r(),f("section",xe,[s("div",be,[s("div",we,[s("h1",ke,c(t(e)?.title?.replace(/(: | en de )/,`
`)),1),s("p",Ce,c(t(e)?.overview),1)]),s("div",Se,[t(e)?.logo?(r(),i(re,{key:t(e)?.logo,"auto-shadow":!0,path:t(e)?.logo,shadow:t(X)(t(e)?.color_palette?.poster),size:500,title:t(e)?.title,class:"pointer-events-none relative mx-auto flex h-full w-full select-none place-self-start overflow-hidden items-end justify-end","class-name":"relative bottom-0 h-auto w-auto",type:"logo"},null,8,["path","shadow","title"])):u("",!0)])]),s("section",je,[s("div",Be,[(r(!0),f(y,null,g(z.value.filter(o=>o.show),(o,G)=>(r(),f("div",{key:G,class:v([o.label==="Genre"?"flex-grow text-left":"flex-shrink-0","relative flex flex-col items-start justify-center gap-1"])},[s("p",De,c(a.$t(o.label)),1),o.component==="ContentRating"?(r(),i(me,{key:0,ratings:o.data,size:6,class:"h-full min-!h-[1rem] object-scale-down rounded-lg overflow-clip"},null,8,["ratings"])):(r(),i(ve,{key:1,class:"!bg-surface-6/11"},{default:x(()=>[s("p",Re,c(o.value),1)]),_:2},1024))],2))),128)),s("div",Te,[s("p",Ee,c(a.$t("Genre")),1),s("div",{class:v([t(e)?.genres?.length>5?"children:grayscale":"","flex flex-wrap self-stretch overflow-clip font-medium gap-0.5 p-1"])},[(r(!0),f(y,null,g(t(e)?.genres,o=>(r(),i(pe,{key:o.id,genre:o},null,8,["genre"]))),128))],2)]),t(e)?(r(),f("nav",Pe,[p(F,{class:v([t(oe),"!bg-surface-6/11 group/play relative"]),to:`${t(e)?.link}/watch`},{default:x(()=>[p(ee,{"class-name":"w-6",icon:"play"}),s("div",Ie,[s("p",Ae,c(a.$t("Ends at"))+" "+c(_.value),1)])]),_:1},8,["class","to"]),t(e)?(r(),i(ue,{key:0,data:t(e),class:"!bg-surface-6/11",type:"video"},null,8,["data"])):u("",!0),p(_e,{"share-data":P.value,class:"!bg-surface-6/11 !p-0"},null,8,["share-data"]),p(ge,{items:N.value,class:"text-surface-12/70 dark:text-surface-12/80"},null,8,["items"])])):u("",!0)])]),s("section",{class:v([t(se)?"media-backdrop-grid":"media-poster-grid","items-start justify-start gap-4 self-stretch px-4"])},[(r(!0),f(y,null,g(t(e)?.collection??[],o=>(r(),i(ce,{key:o?.id,data:o,class:""},null,8,["data"]))),128))],2),t(e)?.cast&&t(e)?.cast?.length>0?(r(),i(B,{key:0,id:"cast",data:t(S)(t(e)?.cast,"order","id").slice(0,50),index:0,next_id:"crew",previous_id:"poster",title:"Cast"},null,8,["data"])):u("",!0),t(e)?.crew&&t(e)?.crew?.length>0?(r(),i(B,{key:1,id:"crew",data:t(S)(t(e)?.crew).slice(0,50),index:0,next_id:"backdrop",previous_id:"cast",title:"Crew"},null,8,["data"])):u("",!0),t(e)?.posters&&t(e)?.posters?.length>0?(r(),i(D,{key:2,id:"poster",data:t(e)?.posters,index:0,next_id:"backdrop",previous_id:"crew",title:"Poster",type:"poster"},null,8,["data"])):u("",!0),t(e)?.backdrops&&t(e)?.backdrops?.length>0?(r(),i(D,{key:3,id:"backdrop","color-palette":t(e)?.color_palette?.poster,data:t(e)?.backdrops,index:0,next_id:"",previous_id:"backdrop",title:"Backdrop",type:"backdrop"},null,8,["color-palette","data"])):u("",!0)])):u("",!0)])]),_:1}))}}}),ct=le(ze,[["__scopeId","data-v-b804b7ac"]]);export{ct as default};
