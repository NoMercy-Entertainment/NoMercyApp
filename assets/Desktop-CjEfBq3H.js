import{C as K,Ct as t,Dt as D,K as B,O as P,S as a,T as U,U as Q,X as T,c as A,it as n,j as E,k as u,mt as i,ot as p,vt as F,w as y,x as M}from"./i18n-Rm1NkeNf.js";import"./ionic-vX7GXDhi.js";import{C as R,_ as z}from"./vue-core-D-3YrIBp.js";import{l as v,m as J}from"./primevue-DkuV93HA.js";import{c as L}from"./query-BPfDyGC_.js";import{Ji as X,Ki as H,_n as W,b as Y,qi as C,vn as Z}from"./index-Cz-5kHOr.js";import{t as h}from"./Toggle-2XMrw9sI.js";import"./useInfiniteServerClient-DD3VR0t0.js";import{t as ee}from"./useServerClient-3BFHXUNx.js";import"./ScrollContainer-2WwLyTKz.js";import"./useMounted-A4MEnwHg.js";import"./RipperOverlay-EVO5zeg2.js";import"./ripperSocket-V7LwG1_y.js";import"./FloatingBackButton-BFk90iHf.js";import{t as le}from"./DashboardLayout-Cm_9Eles.js";A();var re={key:0,class:"col-span-2 col-start-1 2xl:col-start-1"},ae={class:"flex flex-col gap-2"},oe={class:"flex flex-col gap-2"},se={class:"flex flex-col gap-2"},te={key:1,class:"col-span-2 col-start-1 2xl:col-start-3"},ue={class:"flex flex-col gap-2"},ne={class:"flex flex-col gap-2"},ie={class:"flex flex-col gap-2"},de={class:"flex flex-col gap-2"},ve={class:"flex flex-col gap-2"},me={class:"flex flex-col gap-2"},pe={class:"flex flex-col gap-2"},fe={key:2,class:"col-span-2 col-start-1 2xl:col-start-5"},_e={class:"flex flex-col gap-2"},we={class:"flex gap-4"},ke=["aria-label","href"],ge=E({__name:"Desktop",setup(xe){const{data:r,refetch:I,error:O}=ee({path:"/dashboard/configuration"}),f=i(!1),s=i(r.value??{}),d=(l,e)=>{if(r.value){if(F(r.value[l])===e){delete s.value[l],s.value={...s.value};return}s.value={...s.value,[l]:e??void 0}}};n(r,l=>{l&&(s.value={},_.value=l?.name,w.value=l?.external_port,k.value=l?.internal_port,g.value=l?.queue_workers,x.value=l?.cron_workers,b.value=l?.data_workers,V.value=l?.request_workers,q.value=l?.encoder_workers,c.value=l?.image_workers,S.value=l?.file_workers,m.value=l?.swagger,f.value=!0)}),Q(()=>{r.value&&(s.value={},_.value=r.value?.name,w.value=r.value?.external_port,k.value=r.value?.internal_port,g.value=r.value?.queue_workers,x.value=r.value?.cron_workers,b.value=r.value?.data_workers,V.value=r.value?.request_workers,q.value=r.value?.encoder_workers,c.value=r.value?.image_workers,S.value=r.value?.file_workers,m.value=r.value?.swagger,f.value=!0)});const _=i(r.value?.name??"");n(_,l=>{d("name",l)});const w=i(r.value?.external_port??0);n(w,l=>{d("external_port",l)});const k=i(r.value?.internal_port??0);n(k,l=>{d("internal_port",l)});const g=i(r.value?.queue_workers??0);n(g,l=>{d("queue_workers",l)});const x=i(r.value?.cron_workers??0);n(x,l=>{d("cron_workers",l)});const b=i(r.value?.data_workers??0);n(b,l=>{d("data_workers",l)});const V=i(r.value?.request_workers??0);n(V,l=>{d("request_workers",l)});const c=i(r.value?.image_workers??0);n(c,l=>{d("image_workers",l)});const q=i(r.value?.encoder_workers??0);n(q,l=>{d("encoder_workers",l)});const S=i(r.value?.file_workers??0);n(S,l=>{d("file_workers",l)});const m=i(r.value?.swagger??!1);n(m,l=>{d("swagger",l)});const N=M(()=>Object.keys(s.value).length>0);n(s,l=>{console.log(l)});const $=L(),j=()=>{console.raw(s.value),H().patch("/dashboard/configuration",s.value).then(()=>{if(C.value){const l={};if(s.value.name!==void 0&&(l.name=s.value.name.toString()),s.value.external_port!==void 0&&(l.external_port=s.value.external_port.toString()),s.value.internal_port!==void 0&&(l.internal_port=s.value.internal_port.toString()),Object.keys(l).length>0){const e={...C.value,...l};Z([...W.value.filter(G=>G.id!==C.value.id),e]),X(e)}}I(),$.invalidateQueries({queryKey:["serverInfo"]})})};return(l,e)=>{const G=T("Button");return B(),K(t(R),null,{default:p(()=>[u(t(z),{fullscreen:!0},{default:p(()=>[u(le,{error:t(O),gridStyle:2,description:"",title:"General"},{cta:p(()=>[...e[12]||(e[12]=[])]),actions:p(()=>[u(G,{id:"save",disabled:!N.value,class:"ml-auto",color:"theme",form:"myForm",type:"submit",onClick:e[11]||(e[11]=o=>j())},{default:p(()=>[P(D(l.$t("Save")),1)]),_:1},8,["disabled"])]),default:p(()=>[f.value?(B(),U("div",re,[a("div",ae,[e[13]||(e[13]=a("label",{for:"name"},"Server name",-1)),u(t(J),{id:"name",modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=o=>_.value=o),class:"mb-4"},null,8,["modelValue"])]),a("div",oe,[e[14]||(e[14]=a("label",{for:"internal_port"},"Secure internal port",-1)),u(t(v),{id:"internal_port",modelValue:k.value,"onUpdate:modelValue":e[1]||(e[1]=o=>k.value=o),min:2e3,useGrouping:!1,class:"mb-4",showButtons:""},null,8,["modelValue"])]),a("div",se,[e[15]||(e[15]=a("label",{for:"external_port"},"Secure external port",-1)),u(t(v),{id:"external_port",modelValue:w.value,"onUpdate:modelValue":e[2]||(e[2]=o=>w.value=o),min:2e3,useGrouping:!1,class:"mb-4",showButtons:""},null,8,["modelValue"])])])):y("",!0),f.value?(B(),U("div",te,[a("div",ue,[e[16]||(e[16]=a("label",{for:"queue_workers"},"Queue workers",-1)),u(t(v),{id:"queue_workers",modelValue:g.value,"onUpdate:modelValue":e[3]||(e[3]=o=>g.value=o),min:0,useGrouping:!1,class:"mb-4",showButtons:""},null,8,["modelValue"])]),a("div",ne,[e[17]||(e[17]=a("label",{for:"encoder_workers"},"Encoder workers",-1)),u(t(v),{id:"encoder_workers",modelValue:q.value,"onUpdate:modelValue":e[4]||(e[4]=o=>q.value=o),min:0,useGrouping:!1,class:"mb-4",showButtons:""},null,8,["modelValue"])]),a("div",ie,[e[18]||(e[18]=a("label",{for:"cron_workers"},"Cron workers",-1)),u(t(v),{id:"cron_workers",modelValue:x.value,"onUpdate:modelValue":e[5]||(e[5]=o=>x.value=o),min:0,useGrouping:!1,class:"mb-4",showButtons:""},null,8,["modelValue"])]),a("div",de,[e[19]||(e[19]=a("label",{for:"data_workers"},"Data workers",-1)),u(t(v),{id:"data_workers",modelValue:b.value,"onUpdate:modelValue":e[6]||(e[6]=o=>b.value=o),min:0,useGrouping:!1,class:"mb-4",showButtons:""},null,8,["modelValue"])]),a("div",ve,[e[20]||(e[20]=a("label",{for:"image_workers"},"Image workers",-1)),u(t(v),{id:"image_workers",modelValue:c.value,"onUpdate:modelValue":e[7]||(e[7]=o=>c.value=o),min:0,useGrouping:!1,class:"mb-4",showButtons:""},null,8,["modelValue"])]),a("div",me,[e[21]||(e[21]=a("label",{for:"file_workers"},"File workers",-1)),u(t(v),{id:"file_workers",modelValue:S.value,"onUpdate:modelValue":e[8]||(e[8]=o=>S.value=o),min:0,useGrouping:!1,class:"mb-4",showButtons:""},null,8,["modelValue"])]),a("div",pe,[e[22]||(e[22]=a("label",{for:"request_workers"},"Request workers",-1)),u(t(v),{id:"request_workers",modelValue:V.value,"onUpdate:modelValue":e[9]||(e[9]=o=>V.value=o),min:0,useGrouping:!1,class:"mb-4",showButtons:""},null,8,["modelValue"])])])):y("",!0),f.value?(B(),U("div",fe,[a("div",_e,[a("span",we,[e[23]||(e[23]=a("label",{for:"swagger"},"Open API / Swagger Ui",-1)),m.value&&t(C)?.serverBaseUrl?(B(),U("a",{key:0,"aria-label":l.$t("Open API / Swagger Ui in a new tab"),href:t(C)?.serverBaseUrl,class:"flex gap-1 items-center underline underline-offset-4 h-4 text-sm",target:"_blank"},[a("span",null,D(l.$t("Open")),1),u(Y,{className:"size-4",color:"theme",icon:"shareSquare"})],8,ke)):y("",!0)]),u(h,{"model-value":m.value,"onUpdate:modelValue":e[10]||(e[10]=o=>m.value=o)},null,8,["model-value"])])])):y("",!0)]),_:1},8,["error"])]),_:1})]),_:1})}}}),je=ge;export{je as default};
