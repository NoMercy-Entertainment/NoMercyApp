import{Y as w,c as u,o as l,l as r,i as g,h as $,v as c,d as k,j as R,y as s,Z as d,aq as q,F as L,p as S,t as C,B as b,am as N}from"./vue-ionic-Cb5qD3-A.js";import{h as x,t as p,w as j}from"./index-Cwe1hhMU.js";import{u as V}from"./useServerClient-BlIU0Thb.js";import{_ as z}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-DtjqUz6z.js";import{_ as D}from"./DashboardCard.vue_vue_type_script_setup_true_lang-CU-KL3HS.js";import{_ as F}from"./TMDBImage.vue_vue_type_script_setup_true_lang-MfHDiOAy.js";import"./vendor-CKnYbqeP.js";import"./icons-BW5E66pf.js";import"./rxjs-BCp2L9Rn.js";import"./media-C2AqgyMX.js";import"./api-BBofn2cc.js";import"./swiper-D00Cnjmx.js";import"./music-player-gfKAgRMD.js";import"./useInfiniteServerClient-cYjFr_NP.js";import"./useMounted-BtHEVk7C.js";import"./FloatingBackButton.vue_vue_type_script_setup_true_lang-DWgHUa9w.js";import"./OptimizedIcon.vue_vue_type_script_setup_true_lang-BgDponKe.js";import"./Button.vue_vue_type_script_setup_true_lang-CP8BDQd9.js";import"./ScrollContainer.vue_vue_type_script_setup_true_lang-DA2WnYpD.js";import"./RipperOverlay.vue_vue_type_script_setup_true_lang-mMFesAHy.js";import"./Button.vue_vue_type_script_setup_true_lang-BK8DxUcQ.js";import"./AppLogoSquare-u0HA8Xzq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"relative flex aspect-video flex-shrink-0 flex-grow-0 flex-col items-center justify-center self-stretch overflow-clip rounded-lg bg-theme-11 dark:bg-theme-8 text-slate-light-12/80 dark:text-slate-dark-12/80"},K={key:1,class:"text-xl font-bold"},U=w({__name:"LibraryCard",props:{data:{type:Object,required:!0}},setup(e){return(v,i)=>{var o,a,n;return l(),u(D,{route:`/dashboard/libraries/${e.data.id}`,line1:e.data.title,line2:e.data.folder_library&&((o=e.data.folder_library)==null?void 0:o.length)!==1?`${(a=e.data.folder_library)==null?void 0:a.length} folders`:`${(n=e.data.folder_library)==null?void 0:n.length}  folder`},{image:r(()=>[g("div",I,[i[0]||(i[0]=g("div",{class:"backdropCard-overlay"},null,-1)),e.data.image?(l(),u(F,{key:0,path:e.data.image,class:"z-0"},null,8,["path"])):(l(),$("span",K,c(e.data.title),1))])]),_:1},8,["route","line1","line2"])}}}),de=w({__name:"Desktop",setup(e){var y;const{data:v,error:i}=V({path:"dashboard/libraries",queryKey:["dashboard","libraries",(y=x.value)==null?void 0:y.serverBaseUrl]});function o(){p().post("dashboard/libraries").then(({data:t})=>{var m;j.invalidateQueries({queryKey:["dashboard","libraries",(m=x.value)==null?void 0:m.serverBaseUrl]})})}const a=k(!1);function n(){a.value=!0,p().post("dashboard/libraries/refresh").then(({data:t})=>{a.value=!1}).catch(()=>{a.value=!1})}const f=k(!1);function B(){f.value=!0,p().post("dashboard/libraries/rescan").then(({data:t})=>{f.value=!1}).catch(()=>{f.value=!1})}return(t,m)=>{const h=R("Button");return l(),u(d(N),null,{default:r(()=>[s(d(q),{fullscreen:!0},{default:r(()=>[s(z,{error:d(i),"grid-style":1,title:"Libraries",description:"Manage your media libraries and their content here."},{cta:r(()=>[s(h,{id:"newLibrary",color:"theme","start-icon":"folderAdd",onClick:o},{default:r(()=>[b(c(t.$t("New library")),1)]),_:1})]),actions:r(()=>[s(h,{id:"refresh",type:"button",variant:"text","start-icon":"folderSwap",disabled:a.value,class:C(a.value?"first:children:animate-spin cursor-not-allowed":""),onClick:n},{default:r(()=>[b(c(t.$t("Refresh all libraries")),1)]),_:1},8,["disabled","class"]),s(h,{id:"rescan",type:"button",variant:"text","start-icon":"folderSwap",disabled:a.value,class:C(a.value?"first:children:animate-spin cursor-not-allowed":""),onClick:B},{default:r(()=>[b(c(t.$t("Rescan all libraries")),1)]),_:1},8,["disabled","class"])]),default:r(()=>[(l(!0),$(L,null,S(d(v)??[],_=>(l(),u(U,{key:_.id,data:_},null,8,["data"]))),128))]),_:1},8,["error"])]),_:1})]),_:1})}}});export{de as default};
