import{An as P,Bn as _,C as w,Ft as C,Gt as h,Rt as c,Sn as m,Tt as I,bn as M,cn as d,i as S,mt as i,qt as B,u as N,w as T,zn as l,zt as v}from"./index-Dv83kAv_.js";import"./dist-BWFEUpD5.js";import{t as x}from"./esm-CjYSFQTD.js";import"./esm-B--WsoEr.js";import"./dist-CkXwLdCd.js";import"./client-Lt1iJPRU.js";import"./ionic-global-BrT5QOOk.js";import"./hardware-back-button-DUNt_0t6.js";import"./index3-D57DmiIb.js";import"./index8-CrgDNp2f.js";import"./keyboard-BGaVckUv.js";import"./index2-Bme3R7x6.js";import"./ios.transition-CmHvz4bI.js";import"./keyboard2-DeMt_g_-.js";import"./md.transition-DBZTZPtp.js";import"./ui-Dy0BhNPE.js";import"./client-D4e5iciK.js";import{t as A}from"./currentServer-CyRP1M2f.js";import"./config-BZ-AEJ_J.js";import"./esm-ANv1qkIu.js";import{p as f}from"./global-Cl9NRZH-.js";import"./esm-CLtwhlBL.js";import"./bundle-mjs-m3ebY3zV.js";import{s as a}from"./user-Cpc-QsaC.js";import"./serverClient-Dh7JrGPq.js";import{t}from"./router-LUtA4OvS.js";import"./utils-S5luT9U1.js";import"./useInfiniteServerClient-r3ptfaNG.js";import{l as y}from"./SocketClient-CLd4yl1R.js";import"./apiClient-9DYr7MVK.js";import"./notifications-qUxNFD5p.js";import{c as D,i as U,l as V,r as z,y as L}from"./utils-DRKz5xy4.js";import"./deviceInfo-DoGAY46a.js";import"./auth-hpDtC4ST.js";import{s as p}from"./imageModal-ouzoPsP3.js";import{t as F}from"./useServerClient-CvCiAwnH.js";import{a as R,i as j,n as q,o as E,r as G}from"./VideoPlayer-zY9Bstqa.js";import"./buttons-BrAf7pXX.js";import{t as O}from"./videoNoMercyConnectPlugin-CLhjImMH.js";I();var H=B({__name:"Mobile",setup(J){const{data:n}=F({enabled:!a.value.features?.nomercyConnect}),e=P();function u(o){const s={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:o?.filter(r=>!!r.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:a.value?.accessToken||localStorage.getItem("access_token")||"",basePath:A.value?.serverBaseUrl,imageBasePath:"https://app.nomercy.tv/tmdb-images",forceTvMode:(i("android")||i("ios"))&&!i("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||i("capacitor"),renderAhead:100,disableAutoPlayback:a.value.features?.nomercyConnect};if(e.value=G("player1").setup(s),e.value?.once("back",()=>{history.state.back?t.back():t.replace("/")}),a.value.features?.nomercyConnect){const r=new O;e.value?.registerPlugin("videoNoMercyConnect",r),e.value?.usePlugin("videoNoMercyConnect")}const g=new j;e.value?.registerPlugin("desktopUI",g),e.value?.usePlugin("desktopUI");const b=new R;if(e.value?.registerPlugin("autoSkip",b),e.value?.usePlugin("autoSkip"),!a.value.features?.nomercyConnect){const r=new E;e.value?.registerPlugin("sync",r),e.value?.usePlugin("sync")}const k=new q;e.value?.registerPlugin("octopus",k),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?t.back():t.replace("/")}),e.value?.on("dispose",async()=>{await V(),await z(),history.state.back?t.back():await t.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{p(!0)}),e.value?.on("pause",()=>{p(!1)}),e.value?.on("ready",async()=>{await D(),await L(),await U(),y.stop()}),e.value?.on("item",()=>{e.value?.play()}),x.addListener("backButton",()=>{e.value?.emit("back-button-hyjack"),e.value?.dispose()})}return M(n,o=>{o?.length&&u(o)}),w(()=>{y.stop(),a.value.features?.nomercyConnect?u():n.value?.length&&u(n.value)}),T(()=>{e.value?.dispose(),p(!1)}),(o,s)=>(d(),v(l(N),null,{default:m(()=>[h(l(S),{fullscreen:!0},{default:m(()=>[(d(),v(C,{to:"body"},[c("div",{class:_([{"mb-28":l(f),"mb-0":!l(f)},"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"])},[...s[0]||(s[0]=[c("div",{id:"player1",class:"group nomercyplayer"},null,-1)])],2)]))]),_:1})]),_:1}))}}),Ae=H;export{Ae as default};
