import{As as T,Cs as M,Ds as W,Fi as J,Hs as K,Jo as N,Ms as Q,Ns as A,Os as Y,Us as S,Yo as Z,Ys as y,as as _,bs as G,hs as R,js as X,ls as z,nc as k,oc as ee,os as D,ps as w,rc as L,ss as B,ts as te}from"./index-ZKQbrg8Z.js";import{t as ae}from"./_plugin-vue_export-helper-CksOYaUN.js";import{_ as F,a as C,c as le,d as $,f as ne,g as re,h as se,i as p,l as oe,m as ue,n as I,o as ie,p as U,r as ce,s as de,t as ve,u as fe}from"./use-text-value-CTzYm-kj.js";import{a as pe,c as m,r as j,s as me,t as O}from"./render-CMyxs0MW.js";import{t as H}from"./OptimizedIcon-9z037yvI.js";N();function be({container:a,accept:i,walk:b,enabled:c}){K(()=>{let v=a.value;if(!v||c!==void 0&&!c.value)return;let f=pe(a);if(!f)return;let e=Object.assign(r=>i(r),{acceptNode:i}),s=f.createTreeWalker(v,NodeFilter.SHOW_ELEMENT,e,!1);for(;s.nextNode();)b(s.currentNode)})}N();var ge=(a=>(a[a.Open=0]="Open",a[a.Closed=1]="Closed",a))(ge||{}),Ie=(a=>(a[a.Pointer=0]="Pointer",a[a.Other=1]="Other",a))(Ie||{});function he(a){requestAnimationFrame(()=>requestAnimationFrame(a))}var V=Symbol("MenuContext");function E(a){let i=G(V,null);if(i===null){let b=new Error(`<${a} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(b,E),b}return i}var xe=R({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(a,{slots:i,attrs:b}){let c=y(1),v=y(null),f=y(null),e=y([]),s=y(""),r=y(null),h=y(1);function x(t=n=>n){let n=r.value!==null?e.value[r.value]:null,l=ne(t(e.value.slice()),g=>m(g.dataRef.domRef)),u=n?l.indexOf(n):null;return u===-1&&(u=null),{items:l,activeItemIndex:u}}let o={menuState:c,buttonRef:v,itemsRef:f,items:e,searchQuery:s,activeItemIndex:r,activationTrigger:h,closeMenu:()=>{c.value=1,r.value=null},openMenu:()=>c.value=0,goToItem(t,n,l){let u=x(),g=ce(t===I.Specific?{focus:I.Specific,id:n}:{focus:t},{resolveItems:()=>u.items,resolveActiveIndex:()=>u.activeItemIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.disabled});s.value="",r.value=g,h.value=l??1,e.value=u.items},search(t){let n=s.value!==""?0:1;s.value+=t.toLowerCase();let l=(r.value!==null?e.value.slice(r.value+n).concat(e.value.slice(0,r.value+n)):e.value).find(g=>g.dataRef.textValue.startsWith(s.value)&&!g.dataRef.disabled),u=l?e.value.indexOf(l):-1;u===-1||u===r.value||(r.value=u,h.value=1)},clearSearch(){s.value=""},registerItem(t,n){let l=x(u=>[...u,{id:t,dataRef:n}]);e.value=l.items,r.value=l.activeItemIndex,h.value=1},unregisterItem(t){let n=x(l=>{let u=l.findIndex(g=>g.id===t);return u!==-1&&l.splice(u,1),l});e.value=n.items,r.value=n.activeItemIndex,h.value=1}};return fe([v,f],(t,n)=>{var l;o.closeMenu(),re(n,ue.Loose)||(t.preventDefault(),(l=m(v))==null||l.focus())},_(()=>c.value===0)),X(V,o),de(_(()=>me(c.value,{0:C.Open,1:C.Closed}))),()=>{let t={open:c.value===0,close:o.closeMenu};return O({ourProps:{},theirProps:a,slot:t,slots:i,attrs:b,name:"Menu"})}}}),ye=R({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(a,{attrs:i,slots:b,expose:c}){var v;let f=(v=a.id)!=null?v:`headlessui-menu-button-${F()}`,e=E("MenuButton");c({el:e.buttonRef,$el:e.buttonRef});function s(o){switch(o.key){case p.Space:case p.Enter:case p.ArrowDown:o.preventDefault(),o.stopPropagation(),e.openMenu(),M(()=>{var t;(t=m(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(I.First)});break;case p.ArrowUp:o.preventDefault(),o.stopPropagation(),e.openMenu(),M(()=>{var t;(t=m(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(I.Last)});break}}function r(o){switch(o.key){case p.Space:o.preventDefault();break}}function h(o){a.disabled||(e.menuState.value===0?(e.closeMenu(),M(()=>{var t;return(t=m(e.buttonRef))==null?void 0:t.focus({preventScroll:!0})})):(o.preventDefault(),e.openMenu(),he(()=>{var t;return(t=m(e.itemsRef))==null?void 0:t.focus({preventScroll:!0})})))}let x=oe(_(()=>({as:a.as,type:i.type})),e.buttonRef);return()=>{var o;let t={open:e.menuState.value===0},{...n}=a,l={ref:e.buttonRef,id:f,type:x.value,"aria-haspopup":"menu","aria-controls":(o=m(e.itemsRef))==null?void 0:o.id,"aria-expanded":e.menuState.value===0,onKeydown:s,onKeyup:r,onClick:h};return O({ourProps:l,theirProps:n,slot:t,attrs:i,slots:b,name:"MenuButton"})}}}),_e=R({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(a,{attrs:i,slots:b,expose:c}){var v;let f=(v=a.id)!=null?v:`headlessui-menu-items-${F()}`,e=E("MenuItems"),s=y(null);c({el:e.itemsRef,$el:e.itemsRef}),be({container:_(()=>m(e.itemsRef)),enabled:_(()=>e.menuState.value===0),accept(t){return t.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:t.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(t){t.setAttribute("role","none")}});function r(t){var n;switch(s.value&&clearTimeout(s.value),t.key){case p.Space:if(e.searchQuery.value!=="")return t.preventDefault(),t.stopPropagation(),e.search(t.key);case p.Enter:if(t.preventDefault(),t.stopPropagation(),e.activeItemIndex.value!==null){let l=e.items.value[e.activeItemIndex.value];(n=m(l.dataRef.domRef))==null||n.click()}e.closeMenu(),U(m(e.buttonRef));break;case p.ArrowDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(I.Next);case p.ArrowUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(I.Previous);case p.Home:case p.PageUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(I.First);case p.End:case p.PageDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(I.Last);case p.Escape:t.preventDefault(),t.stopPropagation(),e.closeMenu(),M(()=>{var l;return(l=m(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})});break;case p.Tab:t.preventDefault(),t.stopPropagation(),e.closeMenu(),M(()=>se(m(e.buttonRef),t.shiftKey?$.Previous:$.Next));break;default:t.key.length===1&&(e.search(t.key),s.value=setTimeout(()=>e.clearSearch(),350));break}}function h(t){switch(t.key){case p.Space:t.preventDefault();break}}let x=ie(),o=_(()=>x!==null?(x.value&C.Open)===C.Open:e.menuState.value===0);return()=>{var t,n;let l={open:e.menuState.value===0},{...u}=a,g={"aria-activedescendant":e.activeItemIndex.value===null||(t=e.items.value[e.activeItemIndex.value])==null?void 0:t.id,"aria-labelledby":(n=m(e.buttonRef))==null?void 0:n.id,id:f,onKeydown:r,onKeyup:h,role:"menu",tabIndex:0,ref:e.itemsRef};return O({ourProps:g,theirProps:u,slot:l,attrs:i,slots:b,features:j.RenderStrategy|j.Static,visible:o.value,name:"MenuItems"})}}}),Me=R({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(a,{slots:i,attrs:b,expose:c}){var v;let f=(v=a.id)!=null?v:`headlessui-menu-item-${F()}`,e=E("MenuItem"),s=y(null);c({el:s,$el:s});let r=_(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===f:!1),h=ve(s),x=_(()=>({disabled:a.disabled,get textValue(){return h()},domRef:s}));W(()=>e.registerItem(f,x)),Y(()=>e.unregisterItem(f)),K(()=>{e.menuState.value===0&&r.value&&e.activationTrigger.value!==0&&M(()=>{var d,P;return(P=(d=m(s))==null?void 0:d.scrollIntoView)==null?void 0:P.call(d,{block:"nearest"})})});function o(d){if(a.disabled)return d.preventDefault();e.closeMenu(),U(m(e.buttonRef))}function t(){if(a.disabled)return e.goToItem(I.Nothing);e.goToItem(I.Specific,f)}let n=le();function l(d){n.update(d)}function u(d){n.wasMoved(d)&&(a.disabled||r.value||e.goToItem(I.Specific,f,0))}function g(d){n.wasMoved(d)&&(a.disabled||r.value&&e.goToItem(I.Nothing))}return()=>{let{disabled:d,...P}=a,q={active:r.value,disabled:d,close:e.closeMenu};return O({ourProps:{id:f,ref:s,role:"menuitem",tabIndex:d===!0?void 0:-1,"aria-disabled":d===!0?!0:void 0,onClick:o,onFocus:t,onPointerenter:l,onMouseenter:l,onPointermove:u,onMousemove:u,onPointerleave:g,onMouseleave:g},theirProps:{...b,...P},slot:q,attrs:b,slots:i,name:"MenuItem"})}}});N();var Se={},ke={class:"flex justify-center items-center flex-grow-0 flex-shrink-0 h-7 px-2 py-1 rounded-md bg-[#05294d]/[0.03] border-[#021c37]/[0.08] dark:bg-[#e2f0fd]/[0.08] border dark:border-[#dfeffe]/[0.14]"},we={class:"relative flex flex-shrink-0 flex-grow-0 items-center justify-center gap-2 px-1"},Re={class:"flex-grow-0 flex-shrink-0 text-sm font-medium text-center"};function Pe(a,i){return T(),z("div",ke,[D("div",we,[D("p",Re,[A(a.$slots,"default")])])])}var Le=ae(Se,[["render",Pe]]);N();var Te={class:"relative flex flex-1 items-center justify-start gap-2 text-base font-semibold"},De={class:"flex flex-1 w-full whitespace-nowrap"},Ce=R({__name:"ListControlHeaderMoreMenu",props:{items:{type:Array,required:!0},className:{type:String,required:!1,default:""}},setup(a){return(i,b)=>(T(),B(k(xe),{as:"div",class:"relative select-none z-[150]"},{default:S(()=>[w(k(ye),{"aria-label":i.$t("more"),class:""},{default:S(()=>[A(i.$slots,"button",{},()=>[w(H,{icon:"menuDotsHorizontal"})])]),_:3},8,["aria-label"]),w(Z,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"scale-95 transform opacity-0","enter-to-class":"scale-100 transform opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"scale-100 transform opacity-100","leave-to-class":"scale-95 transform opacity-0"},{default:S(()=>[w(k(_e),{class:L([a.className,"absolute z-10 m-2 ml-8 flex w-min origin-top-right -translate-x-full flex-col gap-2 rounded-lg p-1 shadow-lg bg-surface-3 dark:bg-surface-1 border-1 border-surface-8/11"])},{default:S(()=>[A(i.$slots,"default"),(T(!0),z(te,null,Q(a.items,(c,v)=>(T(),B(k(Me),{key:v,class:L([k(J),"w-60 min-w-60 !flex"]),as:"div",onClick:c.onclick},{default:S(()=>[D("span",Te,[w(H,{icon:c.icon,title:c.title},null,8,["icon","title"]),D("span",De,ee(i.$t(c.title)),1)])]),_:2},1032,["class","onClick"]))),128))]),_:3},8,["class"])]),_:3})]),_:3}))}}),Be=Ce;export{Me as i,Le as n,ye as r,Be as t};
