import"./useBaseQuery-BF4AeGAb.js";import"./useInfiniteServerClient-prY1d_ri.js";import"./useQueryClient-DvEXGR3z.js";import"./useQuery-CEd8IzP7.js";import{$a as P,$s as p,As as d,Ci as _,Da as v,Dc as C,Ec as n,Es as h,Is as w,Rs as I,So as M,U as f,_s as S,aa as D,i as a,ks as m,na as N,oa as x,os as u,pc as y,qa as T,ra as U,so as A,ta as s,uc as B,xo as V,yc as E}from"./index-H5TKJIZK.js";import{s as c}from"./imageModal-DOKb0n5s.js";import{t as L}from"./useServerClient-83J0vBrH.js";import{i as z,n as R,o as $,r as j,s as q}from"./VideoPlayer-CrsS2xy7.js";import"./buttons-Dz19tni1.js";import{t as F}from"./videoNoMercyConnectPlugin-BlCTRi4V.js";S();var G=I({__name:"Mobile",setup(H){const{data:r}=L({enabled:!s.value.features?.nomercyConnect}),e=E();function i(o){const t={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:o?.filter(l=>!!l.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:s.value?.accessToken||localStorage.getItem("access_token")||"",basePath:_.value?.serverBaseUrl,forceTvMode:(u("android")||u("ios"))&&!u("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||u("capacitor"),renderAhead:100,disableAutoPlayback:s.value.features?.nomercyConnect};if(e.value=j("player1").setup(t),e.value?.once("back",()=>{history.state.back?a.back():a.replace("/")}),s.value.features?.nomercyConnect){const l=new F;e.value?.registerPlugin("videoNoMercyConnect",l),e.value?.usePlugin("videoNoMercyConnect")}const g=new z;e.value?.registerPlugin("desktopUI",g),e.value?.usePlugin("desktopUI");const b=new $;if(e.value?.registerPlugin("autoSkip",b),e.value?.usePlugin("autoSkip"),!s.value.features?.nomercyConnect){const l=new q;e.value?.registerPlugin("sync",l),e.value?.usePlugin("sync")}const k=new R;e.value?.registerPlugin("octopus",k),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?a.back():a.replace("/")}),e.value?.on("dispose",()=>{x(),N(),history.state.back?a.back():a.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{c(!0)}),e.value?.on("pause",()=>{c(!1)}),e.value?.on("ready",()=>{D(),U(),f.stop()}),e.value?.on("item",()=>{e.value?.play()}),T.addListener("backButton",()=>{e.value?.emit("back-button-hyjack"),e.value?.dispose()})}return B(r,o=>{o?.length&&i(o)}),V(()=>{f.stop(),s.value.features?.nomercyConnect?i():r.value?.length&&i(r.value)}),M(()=>{e.value?.dispose(),c(!1)}),(o,t)=>(p(),d(n(A),null,{default:y(()=>[w(n(P),{fullscreen:!0},{default:y(()=>[(p(),d(h,{to:"body"},[m("div",{class:C([{"mb-28":n(v),"mb-0":!n(v)},"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"])},[...t[0]||(t[0]=[m("div",{id:"player1",class:"group nomercyplayer"},null,-1)])],2)]))]),_:1})]),_:1}))}}),se=G;export{se as default};
