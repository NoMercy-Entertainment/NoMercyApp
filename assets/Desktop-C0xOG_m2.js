import{$ as C,B as M,h as q,o as p,j as t,x as h,G as Z,F as K,q as P,v as J,z as v,a as se,c as w,b as A,p as y,A as $,aZ as N,k as O,a_ as X,aT as z,R as D,d as k,w as V,a9 as re,ap as ee,a0 as U,bk as ae,ac as le,f as oe,av as ie,as as ne}from"./vue-ionic-D4s4ExYp.js";import{u as E}from"./primevue-C7GgiIOs.js";import{a as j,bg as f,cs as de,cp as ue,cq as ce,cr as fe,r as H}from"./index-D29s6-I8.js";import{u as Q}from"./useServerClient-B1iLPo0s.js";import{_ as I}from"./Button.vue_vue_type_script_setup_true_lang-CzLYMh2i.js";import{A as me}from"./AppLogo-D5L-XyUT.js";import{_ as R}from"./Modal.vue_vue_type_script_setup_true_lang-FfW6BNHE.js";import{_ as L}from"./MoooomIcon.vue_vue_type_script_setup_true_lang-dC7oJ7qd.js";import{_ as pe}from"./FolderBrowser.vue_vue_type_script_setup_true_lang-BTP4UEro.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-Dgtccx1h.js";import"./icons-BW5E66pf.js";import"./rxjs-BCp2L9Rn.js";import"./media-C2AqgyMX.js";import"./api-BBofn2cc.js";import"./swiper-D00Cnjmx.js";import"./music-player-BiOHSPVn.js";import"./useInfiniteServerClient-B4MMmB_5.js";import"./OptimizedIcon.vue_vue_type_script_setup_true_lang-BMWMPBMW.js";import"./Shadow-CECthDCI.js";import"./ScrollContainer.vue_vue_type_script_setup_true_lang-B9z-yNTL.js";const ve={class:"-mt-12 px-4"},ye={class:"text-xl font-bold text-slate-light-12/80 dark:text-slate-dark-12/80"},xe={"aria-hidden":"true",class:"mt-4"},be={class:"overflow-hidden rounded-full bg-gray-200"},ge=C({__name:"Stepper",props:{steps:{type:Array,required:!0},currentStep:{type:String,required:!0}},setup(s){const e=s,l=M(()=>{var o;return e.steps?(o=e.steps)==null?void 0:o.indexOf(e.currentStep):0}),n=M(()=>e.steps?(l.value+1)/e.steps.length*100:0);return(o,r)=>(p(),q("div",ve,[t("h4",ye,h(o.$t(s.currentStep)),1),t("div",xe,[t("div",be,[t("div",{style:Z(`width: ${n.value}%`),class:"h-1 rounded-full bg-focus transition-all duration-300"},null,4)]),t("div",{style:Z(`grid-template-columns: repeat(${s.steps.length}, minmax(0, 1fr))`),class:"mt-6 hidden text-sm font-medium text-auto-600 sm:grid"},[(p(!0),q(K,null,P(s.steps,a=>(p(),q("div",{key:a,class:"text-center font-semibold"},h(o.$t(a)),1))),128))],4)])]))}}),_e={class:"mx-auto grid h-available place-content-center px-4 sm:px-6 lg:px-8"},ke={class:"mx-auto w-screen max-w-6xl"},we={class:"flex h-full w-full flex-col gap-4 overflow-hidden p-8 pb-0 min-h-[80vh] max-h-[80vh] h-available"},$e={class:"mx-auto h-44 w-auto p-2"},Se={class:"overflow-hidden p-4 h-available"},qe={class:"mt-auto flex h-16 w-full justify-end gap-4 rounded-b-lg p-4 bg-slate-light-1/70 dark:bg-slate-dark-1/70"},Ce=C({__name:"Frame",props:{steps:{type:Array,required:!0},nextButtonLocked:{type:Boolean,default:!1},currentStep:{type:String,required:!0},setCurrentStep:{type:Function,required:!0},finish:{type:Function,required:!0}},setup(s){const e=s,l=M(()=>e.steps.findIndex(a=>a===e.currentStep)===0),n=M(()=>e.steps.findIndex(a=>a===e.currentStep)===e.steps.length-1);function o(){e.steps.findIndex(a=>a===e.currentStep)<e.steps.length-1&&e.setCurrentStep(e.steps[e.steps.findIndex(a=>a===e.currentStep)+1])}function r(){e.steps.findIndex(a=>a===e.currentStep)>0&&e.setCurrentStep(e.steps[e.steps.findIndex(a=>a===e.currentStep)-1])}return Q({path:"/dashboard/configuration/languages"}),Q({path:"/dashboard/libraries"}),Q({path:"/dashboard/encoderProfiles"}),(a,m)=>(p(),q("div",_e,[t("div",ke,[t("div",{class:J(["animate-loading","w-full h-full gap-2.5 flex flex-col ml-auto overflow-hidden rounded-xl bg-slate-light-1 dark:bg-slate-dark-1 bg-cover border-2 border-transparent text-start transition-all duration-300"]),style:{"--bg-color":"linear-gradient(rgb(var(--background-auto-3)), rgb(var(--background-auto-3)))","--border-color":`linear-gradient(var(--angle, 45deg),
						rgb(var(--color-focus) / 0.7) 0%,
						rgb(var(--color-focus) / 0.3) 33.33%,
						rgb(var(--color-focus) / 0.14) 66.67%,
						rgb(var(--color-focus) / 0.1) 100%
					)`}},[t("div",we,[t("div",$e,[v(me,{class:"pb-8"})]),v(ge,{"current-step":s.currentStep,steps:s.steps},null,8,["current-step","steps"]),t("div",Se,[se(a.$slots,"default")])]),t("div",qe,[l.value?A("",!0):(p(),w(I,{key:0,id:"yes",class:"ml-auto !w-28",color:"slate",type:"button",variant:"text",onClick:r},{default:y(()=>[$(h(a.$t("Back")),1)]),_:1})),n.value?(p(),w(I,{key:1,id:"cancel",disabled:s.nextButtonLocked,class:"!w-28",color:"theme",type:"button",variant:"default",onClick:s.finish},{default:y(()=>[$(h(a.$t("Finish")),1)]),_:1},8,["disabled","onClick"])):(p(),w(I,{key:2,id:"save",disabled:s.nextButtonLocked,class:"!w-28",color:"theme",type:"button",variant:"default",onClick:o},{default:y(()=>[$(h(a.$t("Next")),1)]),_:1},8,["disabled"]))])])])]))}}),je={class:"flex flex-col justify-start items-center flex-grow gap-4"},Be={class:"flex justify-start items-start flex-grow-0 flex-shrink-0 relative gap-2 rounded-lg"},Ve={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-0.5"},Fe={class:"flex justify-start items-start self-stretch flex-grow-0 flex-shrink-0 relative gap-1.5"},Le={class:"flex-grow w-full text-base font-medium text-center text-slate-dark-1/70 dark:text-slate-light-1/70"},Ne=C({__name:"TypeButton",props:{type:{type:Object,required:!0},selected:{type:Boolean,default:!1},className:{type:String,required:!1,default:""}},setup(s){const e=s,l=M(()=>{var o;let n="nomercy";switch((o=e.type)==null?void 0:o.value){case"music":n="noteDouble";break;case"tv":n="tv";break;case"image":n="picture";break;case"movie":n="film";break;default:n="nomercy"}return n});return(n,o)=>(p(),q("div",{class:J(["flex justify-start items-start flex-grow gap-1 px-2 py-4 rounded-xl",{"bg-white/11 dark:bg-black/8 outline outline-2 outline-focus hover:bg-focus/[0.15]":s.selected,"hover:bg-focus/[0.15]":!s.selected}])},[t("div",je,[t("div",Be,[v(L,{icon:l.value,"class-name":s.className},null,8,["icon","class-name"])]),t("div",Ve,[t("div",Fe,[t("p",Le,h(s.type.name),1)])])])],2))}}),Te={class:"my-6 text-sm text-auto-10"},Ie=C({__name:"DeleteFolderModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},libraryId:{type:String,required:!0},name:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},setup(s){const e=s,l=N(),n=E();function o(){j().delete(`dashboard/libraries/${e.libraryId}/folders/${e.id}`).then(({data:r})=>{l.invalidateQueries({queryKey:["dashboard","libraries"]}),n.add({severity:r.status==="ok"?"success":"error",summary:f(r.status==="ok"?"Success":"Error"),detail:f(r.message,...r.args??[]),life:5e3}),e.close()}).catch(r=>{n.add({severity:"error",summary:f("Error"),detail:r.message,life:5e3}),e.close()})}return(r,a)=>{const m=O("Button");return p(),w(R,{close:s.close,open:s.open,"max-width":"max-w-xl",params:{folder:s.name},title:"Delete folder {{folder}}"},{actions:y(()=>[v(m,{id:"yes",onclick:o,"end-icon":"trash",color:"red",type:"button",variant:"contained"},{default:y(()=>[$(h(r.$t("Delete")),1)]),_:1}),v(m,{id:"no",onclick:s.close,type:"button",color:"auto-alpha",variant:"text"},{default:y(()=>[$(h(r.$t("Cancel")),1)]),_:1},8,["onclick"])]),default:y(()=>[t("div",Te,h(r.$t("Are you sure you want to delete this folder?")),1)]),_:1},8,["close","open","params"])}}}),Me={class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 gap-2"},Ee={class:"flex flex-col justify-center items-center flex-grow gap-2"},De={class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 h-10 relative overflow-hidden gap-2 pl-3 pr-2.5 py-2.5 rounded-[10px] bg-slate-light-12/3 dark:bg-slate-dark-12/[0.03] text-slate-dark-8 dark:text-slate-dark-11"},Ke={class:"flex-grow w-available text-base font-semibold text-left"},Qe=C({__name:"FolderItem",props:X({folder:{type:Object,required:!0}},{modelValue:{type:Object,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(s){var T;const e=s,l=E(),n=N(),o=z(s,"modelValue"),{data:r}=Q({path:"dashboard/encoderProfiles",queryKey:["dashboard","encoderProfiles"]}),a=M(()=>{var g,b,_,i;switch(o.value.type){case"anime":return(g=r.value)==null?void 0:g.filter(u=>u.container==="m3u8").map(u=>D(u));case"movie":return(b=r.value)==null?void 0:b.filter(u=>u.container==="m3u8").map(u=>D(u));case"tv":return(_=r.value)==null?void 0:_.filter(u=>u.container==="m3u8").map(u=>D(u));case"music":return(i=r.value)==null?void 0:i.filter(u=>u.container==="mp3"||u.container==="flac").map(u=>D(u));default:return[]}}),m=k(((T=a.value)==null?void 0:T.filter(g=>{var b,_;return(_=(b=e.folder.folder)==null?void 0:b.encoder_profiles)==null?void 0:_.some(i=>i.id===g.id)}))??[]);V([a,e],([g,b])=>{!g||!b||(m.value=g.filter(_=>{var i;return(i=b.folder.folder)==null?void 0:i.encoder_profiles.some(u=>u.id===_.id)}))},{deep:!0});function d(g){const b=g.map(_=>D(_));m.value=b,c(D(e.folder),b)}function c(g,b){if(!o.value)return;const _=o.value.folder_library.map(i=>i.folder_id===g.folder_id?{...i,folder:{...i.folder,encoder_profiles:b.map(u=>u)}}:i);j().patch(`dashboard/libraries/${o.value.id}`,{folder_library:_}).then(()=>{n.invalidateQueries({queryKey:["dashboard","libraries"]})}).catch(i=>{l.add({severity:"error",summary:f("Error"),detail:i.message,life:5e3})})}V(o,()=>{a.value&&(m.value=a.value.filter(g=>{var b;return(b=e.folder.folder)==null?void 0:b.encoder_profiles.some(_=>_.id===g.id)}))});const x=k(!1);function S(){x.value=!0}function B(){x.value=!1}return(g,b)=>{var i;const _=O("MultiSelect");return p(),q(K,null,[t("div",Me,[v(_,{id:"encoderProfiles","model-value":m.value,placeholder:"Select",class:"w-[160px]",options:a.value,"option-label":"name","onUpdate:modelValue":d},null,8,["model-value","options"]),t("div",Ee,[t("div",De,[t("p",Ke,h(s.folder.folder.path),1),t("button",{class:"flex-grow-0 flex-shrink-0 cursor-pointer hover:text-slate-light-12 hover:dark:text-slate-dark-12",onClick:S},[v(L,{icon:"trash","class-name":"w-6 h-6"})])])])]),v(Ie,{id:s.folder.folder.id,"library-id":(i=o.value)==null?void 0:i.id,name:s.folder.folder.path,close:B,open:x.value},null,8,["id","library-id","name","open"])],64)}}}),Ae={class:"mx-auto flex w-full flex-col h-available overflow-clip"},Oe=C({__name:"NewFolderModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},folder:{type:String,required:!0},setFolder:{type:Function,required:!0},library:{type:Object,required:!1}},setup(s){const e=s,l=re(),n=N(),o=E();function r(){var a;j().post(`dashboard/libraries/${l.params.id??((a=e.library)==null?void 0:a.id)}/folders`,{path:e.folder}).then(({data:m})=>{n.invalidateQueries({queryKey:["dashboard","libraries"]}),o.add({severity:m.status==="ok"?"success":"error",summary:f(m.status==="ok"?"Success":"Error"),detail:f(m.message,...m.args),life:5e3}),e.setFolder("/"),e.close()}).catch(m=>{console.error("Error adding folder:",m),e.close()})}return(a,m)=>{const d=O("Button");return p(),w(R,{close:s.close,open:s.open,"max-width":"max-w-5xl",title:"Add folder"},{actions:y(()=>[v(d,{id:"yes",onclick:r,color:"theme",type:"button",variant:"contained"},{default:y(()=>[$(h(a.$t("Add")),1)]),_:1}),v(d,{id:"no",onclick:s.close,type:"button",color:"auto-alpha",variant:"text"},{default:y(()=>[$(h(a.$t("Cancel")),1)]),_:1},8,["onclick"])]),default:y(()=>[t("div",Ae,[v(pe,{selected:s.folder,"set-selected":s.setFolder},null,8,["selected","set-selected"])])]),_:1},8,["close","open"])}}}),Pe={class:"flex flex-col justify-start items-start flex-grow-0 flex-shrink-0 w-full relative gap-8 p-1 px-6"},Re={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-3"},Ue={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-6"},ze={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-4"},Ge={class:"grid grid-cols-4 justify-start items-start self-stretch gap-2"},Ye={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-2"},We={class:"flex justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-2"},Ze={class:"flex flex-col justify-start items-start flex-grow gap-1.5"},He={class:"flex justify-start items-center flex-grow-0 flex-shrink-0 relative gap-px"},Je={class:"flex-grow-0 flex-shrink-0 text-sm font-medium text-left text-auto-10"},Xe={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-3"},et={class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 relative gap-2 rounded"},tt={class:"flex-grow w-[501px] text-lg font-medium text-left text-auto-11"},st={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-6"},rt={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-2"},at={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-2"},lt={class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 relative gap-1 text-slate-light-12 dark:text-slate-dark-11"},ot={class:"flex-grow-0 flex-shrink-0 text-sm text-left"},it={class:"flex w-full justify-end items-start self-stretch flex-grow-0 flex-shrink-0 gap-2 rounded-lg bg-white/[0.04] p-2"},nt=C({__name:"EditLibraryModal",props:X({open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},{modelValue:{type:Object,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(s){var b,_;const e=s,l=z(s,"modelValue"),n=N(),o=E(),r=k((b=l.value)==null?void 0:b.title),a=ee(r,500),m=k(((_=l.value)==null?void 0:_.type)??"movie");V(l,i=>{i&&(r.value=i.title,m.value=i.type||"movie",l.value.folder_library||(l.value={...l.value,folder_library:[]}))},{deep:!0});const d=k([]),c=k("/");function x(i){c.value=i}const S=k(!1);function B(){S.value=!0}function T(){S.value=!1}function g(){j().patch(`dashboard/libraries/${l.value.id}`,{...l.value,subtitles:d.value.map(i=>i.iso_639_1),specialSeasonName:l.value.specialSeasonName}).then(()=>{n.invalidateQueries({queryKey:["dashboard","libraries"]}),e.close()}).catch(i=>{o.add({severity:"error",summary:f("Error"),detail:i.message,life:5e3}),e.close()})}return V(a,i=>{i&&j().patch(`dashboard/libraries/${l.value.id}`,{title:i}).then(()=>{n.invalidateQueries({queryKey:["dashboard","libraries"]})}).catch(u=>{o.add({severity:"error",summary:f("Error"),detail:u.message,life:5e3})})}),V(m,i=>{i&&j().patch(`dashboard/libraries/${l.value.id}`,{type:i}).then(()=>{n.invalidateQueries({queryKey:["dashboard","libraries"]})}).catch(u=>{o.add({severity:"error",summary:f("Error"),detail:u.message,life:5e3})})}),(i,u)=>{const te=O("InputText");return p(),q(K,null,[v(R,{id:"editLibraryModal",close:s.close,open:s.open,"max-width":"max-w-[565px]",title:"Edit Library",background:"","no-close":""},{actions:y(()=>[t("div",it,[v(I,{id:"done",type:"button",color:"theme",variant:"contained",onClick:g},{default:y(()=>[$(h(i.$t("Done")),1)]),_:1})])]),default:y(()=>{var G,Y;return[t("div",Pe,[t("div",Re,[t("div",Ue,[t("div",ze,[t("div",Ge,[(p(!0),q(K,null,P(U(de),F=>(p(),w(Ne,{key:F.value,type:F,selected:m.value===F.value,"class-name":"size-8 text-slate-dark-5 dark:text-slate-light-5",onClick:W=>m.value=F.value},null,8,["type","selected","onClick"]))),128))]),t("div",Ye,[t("div",We,[t("div",Ze,[t("div",He,[t("p",Je,h(i.$t("Library Title")),1),u[2]||(u[2]=t("p",{class:"flex-grow-0 flex-shrink-0 text-sm font-medium text-left text-focus"}," * ",-1))]),v(te,{id:"title",modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=F=>r.value=F),class:"w-full",required:""},null,8,["modelValue"])])])])])])]),u[3]||(u[3]=t("div",{class:"flex-grow-0 flex-shrink-0 w-10 h-0.5 rounded bg-[#e2f0fd]/[0.08]"},null,-1)),t("div",Xe,[t("div",et,[t("p",tt,h(i.$t("Select one or more folders")),1)]),t("div",st,[t("div",rt,[t("div",at,[t("button",{id:"save",type:"button",class:"group/button flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 h-11 relative overflow-hidden gap-2 pl-3 pr-2.5 py-2.5 rounded-[10px] text-slate-dark-8 dark:text-slate-dark-11 font-semibold transition-colors bg-slate-dark-2/[0.13] dark:bg-slate-dark-11/[0.14] hover:bg-slate-dark-12/[0.13] hover:dark:bg-slate-dark-12/[0.14] active:bg-slate-dark-12/[0.13] active:dark:bg-slate-dark-10/[0.14]",onClick:B},[t("span",null,h(i.$t("Add folder")),1),v(L,{icon:"folderAdd","class-name":"w-6 h-6 flex-grow-0 flex-shrink-0 ml-auto group-hover/button:text-slate-light-12 group-hover/button:dark:text-slate-dark-12"})])]),(G=l.value)!=null&&G.folder_library?(p(!0),q(K,{key:0},P((Y=l.value)==null?void 0:Y.folder_library,F=>(p(),w(Qe,{key:F.folder_id,modelValue:l.value,"onUpdate:modelValue":u[1]||(u[1]=W=>l.value=W),folder:F},null,8,["modelValue","folder"]))),128)):A("",!0),t("div",lt,[v(L,{icon:"infoCircle","class-name":"w-4 h-4 flex-grow-0 flex-shrink-0"}),t("p",ot,h(i.$t("You can always add folder and change encoding profiles later")),1)])])])])])]}),_:1},8,["close","open"]),v(Oe,{close:T,folder:c.value,open:S.value,"set-folder":x,library:l.value},null,8,["folder","open","library"])],64)}}}),dt={class:"my-6 text-sm text-auto-10"},ut=C({__name:"DeleteLibraryModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},name:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},setup(s){const e=s,l=N(),n=E();function o(){j().delete(`dashboard/libraries/${e.id}`).then(({data:r})=>{n.add({severity:r.status==="ok"?"success":"error",summary:f(r.status==="ok"?"Success":"Error"),detail:f(r.message,...r.args??[]),life:5e3}),l.invalidateQueries({queryKey:["dashboard","libraries"]})}),e.close()}return(r,a)=>(p(),w(R,{close:s.close,open:s.open,"max-width":"max-w-xl",params:{library:e.name},title:"Delete library {{library}}"},{actions:y(()=>[v(I,{id:"yes",onclick:o,"end-icon":"trash",color:"red",type:"button",variant:"contained"},{default:y(()=>[$(h(r.$t("Delete")),1)]),_:1}),v(I,{id:"no",onclick:s.close,type:"button",color:"auto-alpha",variant:"text"},{default:y(()=>[$(h(r.$t("Cancel")),1)]),_:1},8,["onclick"])]),default:y(()=>[t("div",dt,h(r.$t("Are you sure you want to delete this library?")),1)]),_:1},8,["close","open","params"]))}}),ct={class:"flex h-min children:cursor-default flex-col items-center rounded-lg w-inherit odd:bg-slate-light-12/5 even:bg-slate-light-12/2 dark:odd:bg-slate-dark-12/5 dark:even:bg-slate-dark-12/2 text-slate-light-12/80 dark:text-slate-dark-12/80"},ft={class:"flex items-center gap-2 overflow-x-hidden py-2 pr-2 w-inherit overflow-y-show"},mt={class:"ml-2 h-auto w-8 p-2 handle"},pt={class:"w-full line-clamp-1"},ht=C({__name:"LibraryItem",props:{modelValue:{type:Object,required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(s){const e=z(s,"modelValue"),l=k(!1);function n(){l.value=!0}function o(){l.value=!1}const r=k(!1);function a(){r.value=!0}function m(){r.value=!1}const d=M(()=>{let c;switch(e.value.type){case"music":c="noteDouble";break;case"tv":c="tv";break;case"image":c="camera";break;case"movie":c="film";break;default:c="nomercy"}return c});return(c,x)=>{var S,B,T;return p(),q("div",ct,[t("div",ft,[t("button",mt,[v(L,{icon:"menuDotsVertical",class:"h-6 w-6"})]),v(L,{icon:d.value,class:"h-6 w-6"},null,8,["icon"]),t("span",pt,h((S=e.value)==null?void 0:S.title),1),t("button",{class:"ml-auto flex justify-center items-center h-10 px-2.5 py-2 gap-2 rounded-lg text-sm select-none w-auto font-semibold leading-[100%] transition-all duration-150 button-text hover:outline-slate-light-11 dark:hover:outline-slate-dark-11 outline-1 outline outline-transparent",type:"button",onClick:a},[v(L,{icon:"folderEdit",class:"h-6 w-6"})]),t("button",{class:"ml-auto flex justify-center items-center h-10 px-2.5 py-2 gap-2 rounded-lg text-sm select-none w-auto font-semibold leading-[100%] transition-all duration-150 button-text hover:outline-slate-light-11 dark:hover:outline-slate-dark-11 outline-1 outline outline-transparent",type:"button",onClick:n},[v(L,{icon:"folderRemove",class:"h-6 w-6"})])]),e.value?(p(),w(nt,{key:0,id:(B=e.value)==null?void 0:B.id,modelValue:e.value,"onUpdate:modelValue":x[0]||(x[0]=g=>e.value=g),close:m,open:r.value},null,8,["id","modelValue","open"])):A("",!0),e.value?(p(),w(ut,{key:1,id:(T=e.value)==null?void 0:T.id,name:e.value.title,close:o,open:l.value},null,8,["id","name","open"])):A("",!0)])}}}),vt=he(ht,[["__scopeId","data-v-243224fd"]]),yt={class:"flex flex-col overflow-hidden text-start h-available"},xt={class:"mb-2 text-xl font-semibold"},bt={class:"mb-4 text-sm"},gt={class:"mt-4 flex w-full justify-start"},_t=C({__name:"Libraries",props:{setNextButtonLocked:{type:Function,required:!0}},setup(s){const e=s,l=N(),{data:n}=Q({path:"dashboard/libraries",queryKey:["dashboard","libraries"]}),o=k(null),r=k(n.value??[]);V(n,d=>{console.log("Libraries updated:",d),d&&(r.value=d,e.setNextButtonLocked((d==null?void 0:d.length)===0))});function a(){j().post("dashboard/libraries").then(()=>{l.invalidateQueries({queryKey:["dashboard","libraries"]})})}function m(){j().patch("dashboard/libraries/sort",{libraries:r.value.map((d,c)=>({id:d.id,order:c}))}).then(()=>{l.invalidateQueries({queryKey:["dashboard","libraries"]})})}return V(r,()=>{m()}),ae(o,r,{animation:150,handle:".handle"}),(d,c)=>(p(),q("div",yt,[t("h2",xt,h(d.$t("Organize your media library")),1),t("p",bt,h(d.$t("Add your media libraries to organize your content.")),1),t("div",{ref_key:"el",ref:o,class:"flex h-auto w-full flex-col overflow-y-auto text-start gap-1"},[(p(!0),q(K,null,P(r.value,(x,S)=>(p(),w(vt,{key:x.id,modelValue:r.value[S],"onUpdate:modelValue":B=>r.value[S]=B},null,8,["modelValue","onUpdate:modelValue"]))),128))],512),t("div",gt,[v(I,{id:"yes",color:"theme",type:"button",variant:"contained",onClick:a},{default:y(()=>[$(h(d.$t("Add media library")),1)]),_:1})])]))}}),kt=C({__name:"Finish",props:{setNextButtonLocked:{type:Function,required:!0}},setup(s){return le(),N(),(e,l)=>null}}),wt={class:"flex flex-col gap-2 h-available"},$t={class:"flex flex-col gap-2"},St={class:"mt-auto flex flex-col"},qt={class:"mb-4 text-sm"},Ct={href:"https://nomercy.tv/privacy-policy",target:"_blank",class:"text-theme-10 hover:underline"},jt={href:"https://nomercy.tv/terms-of-service",target:"_blank",class:"text-theme-10 hover:underline"},Bt=C({__name:"Base",props:{setNextButtonLocked:{type:Function,required:!0}},setup(s){var d;const e=s,l=N(),n=E(),{data:o}=Q({path:"dashboard/server/info",queryKey:["serverinfo"]}),r=k(((d=o.value)==null?void 0:d.server)??""),a=ee(r,500);V(o,c=>{c&&(r.value=c.server)});function m(){j().patch("dashboard/server/info",{name:a.value}).then(({data:c})=>{n.add({severity:"success",summary:f("Success"),detail:f(c.message,...c.args??[]),life:5e3}),l.invalidateQueries({queryKey:["servers"]})})}return V(a,(c,x)=>{!c||c===x||x===""||m()}),V(r,c=>{e.setNextButtonLocked(!c)}),(c,x)=>{const S=O("InputText");return p(),q("div",wt,[t("div",$t,[x[1]||(x[1]=t("label",{for:"serverName"},"Server name",-1)),v(S,{id:"serverName",modelValue:r.value,"onUpdate:modelValue":x[0]||(x[0]=B=>r.value=B),class:"w-1/3",name:"Give your server a friendly name to help identify it."},null,8,["modelValue"])]),t("div",St,[t("p",qt,[$(h(c.$t("By using this NoMercy app, a NoMercy MediaServer, or any of our services, you agree to the"))+" ",1),t("a",Ct,h(c.$t("Privacy Policy")),1),$(" "+h(c.$t("and"))+" ",1),t("a",jt,h(c.$t("Terms of Service")),1),x[2]||(x[2]=$(". "))])])])}}}),Ht=C({__name:"Desktop",setup(s){const e=E(),l=k(["Base info","Media libraries","Finish"]),n=k("Base info"),o=k(!1);async function r(){console.log("Finish"),await j().post("/dashboard/libraries/refresh").then(()=>{e.add({severity:"success",summary:f("Success"),detail:"Your media libraries are being scanned in the background.",life:16e3})}).catch(d=>{e.add({severity:"error",summary:"Error refreshing libraries",detail:d.message,life:16e3})}),await j().get("libraries").then(({data:d})=>{ue(d.data),ce.value=!0,fe.value=!0,H.replace("/")}).catch(()=>{H.replace({name:"Server offline"})})}function a(d){n.value=d}function m(d){o.value=d}return oe(()=>{e.add({severity:"info",summary:f("This is an informational message."),life:5e5}),e.add({severity:"info",summary:f("Info"),detail:f("This is an informational message."),life:5e5}),e.add({severity:"success",summary:f("This is a success message."),life:5e5}),e.add({severity:"success",summary:f("Success"),detail:f("This is a success message."),life:5e5}),e.add({severity:"warn",summary:f("This is a warning message."),life:5e5}),e.add({severity:"warn",summary:f("Warning"),detail:f("This is a warning message."),life:5e5}),e.add({severity:"error",summary:f("This is an error message."),life:5e5}),e.add({severity:"error",summary:f("Error"),detail:f("This is an error message."),life:5e5}),e.add({severity:"secondary",summary:f("This is an secondary message."),life:5e5}),e.add({severity:"secondary",summary:f("Secondary"),detail:f("This is an secondary message."),life:5e5}),e.add({severity:"contrast",summary:f("This is an contrast message."),life:5e5}),e.add({severity:"contrast",summary:f("Contrast"),detail:f("This is an contrast message."),life:5e5})}),(d,c)=>(p(),w(U(ne),null,{default:y(()=>[v(U(ie),{fullscreen:!0},{default:y(()=>[v(Ce,{"current-step":n.value,finish:r,"next-button-locked":o.value,"set-current-step":a,steps:l.value},{default:y(()=>[n.value==="Base info"?(p(),w(Bt,{key:0,"set-next-button-locked":m})):n.value==="Media libraries"?(p(),w(_t,{key:1,"set-next-button-locked":m})):n.value==="Finish"?(p(),w(kt,{key:2,"set-next-button-locked":m})):A("",!0)]),_:1},8,["current-step","next-button-locked","steps"])]),_:1})]),_:1}))}});export{Ht as default};
