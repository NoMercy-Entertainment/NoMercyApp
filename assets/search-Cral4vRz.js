import{d as a,C as f,ao as g,w as v,aS as S}from"./vue-ionic-Ct1zWn9G.js";import{b5 as b,h as R,u as V}from"./index-BFqbVQ32.js";import{ba as $}from"./vendor-BO8Pa1dw.js";const n=a(!1),p=a("video"),t=a(""),h=a([]),_=f(()=>h.value),j=g(t,700);v(j,e=>{var u,m;if(e===""){h.value=[];return}n.value=!0;const s=`${(u=R.value)==null?void 0:u.serverBaseUrl}/api/v1/music/search?query=${e}`;fetch(s,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(m=V.value)==null?void 0:m.accessToken}`}}).then(i=>i.json()).then(i=>{h.value=i.data,n.value=!1})});const o=a(""),c=a(!1),r=a([]),T=f(()=>r.value),y=g(o,700),l=a(1);v(y,e=>{if(e===""){r.value=[];return}c.value=!1,n.value=!0,l.value=1;const s=`https://api.themoviedb.org/3/search/multi?api_key=${b}&language=${$.language}&query=${e}&page=${l.value}&include_adult=false`;fetch(s).then(u=>u.json()).then(u=>{r.value=u.results,c.value=u.total_pages>1,n.value=!1})});function k(){l.value+=1;const e=`https://api.themoviedb.org/3/search/multi?api_key=${b}&language=${$.language}&query=${y.value}&page=${l.value}&include_adult=false`;fetch(e).then(s=>s.json()).then(s=>{r.value=[...r.value,...s.results],s.results.length===0?c.value=!1:c.value=s.total_pages>l.value})}const q=a(null);S(q,([{isIntersecting:e}],s)=>{e&&k()});const A=a(),d=a("");f(()=>p.value==="video"?T.value:_.value);v(p,e=>{e==="video"?(t.value="",o.value=d.value):(o.value="",t.value=d.value)});v(d,e=>{p.value==="video"?(o.value=e,t.value=""):(o.value="",t.value=e)});export{_ as a,p as b,A as c,d,k as f,c as h,t as m,n as s,T as v};
