import{C as l,G as T,J as a,Ot as B,Q as I,S as d,T as p,Tt as e,c as v,ct as M,gt as C,j as y,k as s,ot as R,w as f,x}from"./i18n-Cs-AFcrY.js";import"./ionic-XwZpO7IE.js";import"./vue-core-CKeWI2Kt.js";import"./primevue-DNc5dNs0.js";import{Ea as $,Fa as E,Mt as L,Nt as V,Qi as Q,Ra as Z,U as q,W as S,Z as r,Zi as J,b as n,g as F,ht as z,jt as c,kt as G,lt as P,mt as w,pt as U,yi as W}from"./index-CpapolHX.js";import{o as m}from"./sidebar-CJeADY8q.js";import{t as j}from"./MusicButton-CFwec5Aj.js";import"./BannerButton-Byc3OTCl.js";import{t as H}from"./MediaLikeButton-_94Ic3nN.js";import{n as K,r as X,t as Y}from"./TrackLinks-qEJyplyi.js";import{a as ee,c as te,i as ae,n as re,o as se,r as le,s as ue,t as ie}from"./EqButton-DkDgwMha.js";import{t as oe}from"./SliderBar-D95ZebS6.js";import{t as ne}from"./Marquee-K6nNtZuk.js";v();var ce=y({__name:"VolumeButton",setup(h){function i(u){if(u?.stopPropagation(),!$.value.features?.nomercyConnect){S.toggleMute();return}L.value?.invoke("PlaybackCommand","mute",!P.value)}return(u,o)=>(a(),l(j,{onclick:i,label:"Mute","no-tooltip":""},{default:M(()=>[(e(V)?.muted_state===void 0?e(P):e(V).muted_state)?(a(),l(n,{key:0,class:"h-6 w-6",icon:"volumeMuted"})):e(c)===0?(a(),l(n,{key:1,class:"h-6 w-6",icon:"volumeZero"})):e(c)>30&&e(c)<=70?(a(),l(n,{key:2,class:"h-6 w-6",icon:"volumeTwo"})):e(c)>70?(a(),l(n,{key:3,class:"h-6 w-6",icon:"volumeThree"})):(a(),l(n,{key:4,class:"h-6 w-6",icon:"volumeOne"}))]),_:1}))}}),de=ce;v();var _e=y({__name:"VolumeSlider",setup(h){const i=C(0);R(Z(i,50),o=>{L.value?.invoke("ChangeVolumeCommand",o)});function u(o){i.value=o,c.value=o,q.setVolume(i.value)}return(o,k)=>(a(),l(oe,{percentage:e(c),value:e(c),min:0,step:1,max:100,onInput:k[0]||(k[0]=b=>u(Number(b.target.value)))},null,8,["percentage","value"]))}}),fe=_e;v();var me=["data-size"],pe=["data-size"],ve=y({__name:"VolumeContainer",setup(h){return(i,u)=>(a(),p("div",{class:"mr-2 flex w-32 min-w-28 items-center gap-2","data-size":e(w)},[s(de),d("div",{class:"w-full h-full items-center flex full:mb-2 !mb-0","data-size":e(w)},[s(fe)],8,pe)],8,me))}}),ye=ve;v();var he=y({__name:"LyricsButton",setup(h){function i(u){u?.stopPropagation(),G()}return(u,o)=>(a(),l(j,{onclick:i,label:"Lyrics"},{default:M(()=>[e(U)?(a(),l(n,{key:0,class:"h-6 w-6 text-focus",icon:"lyrics"})):(a(),l(n,{key:1,class:"h-6 w-6",icon:"lyrics"}))]),_:1}))}}),ke=he;v();var ge=["data-music","data-sidebar","inert"],xe={key:0,class:"flex h-full w-full items-center gap-8 music-showing:transition-all music-showing:duration-75"},we={key:0,class:"mx-4 flex flex-col overflow-hidden gap-0.5 w-available hover-animate-pause"},be=["data-size"],Be={class:"flex justify-center"},Ce={class:"flex flex-shrink-0 flex-grow-0 items-center justify-center gap-2"},Se=["data-size"],Me=y({__name:"MusicPlayerDesktop",setup(h){const i=C(),u=C(!0),o=E("nmplayer-music-supports-audio-context",!1),k=x(()=>m.value==="open"?100/4:m.value==="closed"?100/3.2:100/3),b=x(()=>100/3),A=x(()=>m.value==="open"?100/2.9:(m.value==="closed",100/3)),N=x(()=>`/music/album/${r.value?.album_track.at(0)?.id}`);function D(t){if(t)return JSON.stringify({id:t?.id,Artist:t?.Artist,host:t.host,track:`${t.libraryId}${t.folder}${t.filename}`,type:t?.type,favorite_track:t?.favorite_track,Album:t?.Album,playlists:t?.playlists})}async function O(){r.value&&await J().post(`music/tracks/${r.value?.id}/playback`)}return T(()=>{Q.value&&(S.on?.("song",t=>{t&&(u.value=!0,t&&W(`${t.name} - ${t.artist_track.at(0)?.name} - ${t.album_track.at(0)?.name}`),i.value=D(Object.keys(t).filter(_=>_!=="lyrics").reduce((_,g)=>(_[g]=t[g],_),{})))}),S.on?.("time",t=>{Math.floor(t.percentage)===50&&u.value&&(u.value=!1,$.value.features?.nomercyConnect||O())}))}),(t,_)=>{const g=I("RouterLink");return a(),p("div",{id:"fullPlayer","data-music":e(z),"data-sidebar":e(m),inert:e(z)==="hidden",class:"bg-surface-12/3 hidden h-0 music-showing:h-20 flex-shrink-0 flex-grow-0 flex-row items-center justify-start gap-12 self-stretch pr-6 sidebar-closed:ml-16 sidebar-open:ml-64 rounded-lg m-2 pl-4 mx-5 transition-all duration-200 sm:flex 2xl:sidebar-open:ml-[16.3rem]"},[e(r)?(a(),p("div",xe,[d("div",{id:"left",style:B({width:`${k.value}%`}),class:"flex flex-grow items-center justify-start transition-width duration-200 gap-2 overflow-clip h-16","data-target":"track"},[s(g,{to:N.value},{default:M(()=>[e(r)?(a(),l(F,{key:0,data:e(r),size:100,"class-name":"w-14 h-14 max-h-14 !max-w-14 overflow-clip cursor-pointer"},null,8,["data"])):f("",!0)]),_:1},8,["to"]),e(r)?(a(),p("div",we,[s(ne,{text:e(r)?.name},null,8,["text"]),(a(),p("div",{key:e(r).id,"data-size":e(w),class:"inline-flex gap-1 overflow-hidden whitespace-nowrap text-xs w-available line-clamp-1 hover-animate-pause"},[e(r)?(a(),l(Y,{id:e(r).id,key:e(r).id,data:e(r).artist_track,suffix:"player",type:"artists"},null,8,["id","data"])):f("",!0)],8,be))])):f("",!0),(a(),l(H,{key:e(r).id,data:e(r),class:"hidden sm:flex mr-1",color:"var(--color-theme-8)",type:"music"},null,8,["data"]))],4),d("div",{id:"center",style:B({width:`${b.value}%`}),class:"flex w-full flex-grow flex-col items-center justify-start transition-width duration-200"},[d("div",Be,[d("div",Ce,[s(le),s(ue),s(K,{class:"children:h-10 h-12 children:w-10 w-12 !bg-surface-12/4 hover:!bg-surface-12/6"}),s(te),s(ae)])]),s(se)],4),d("div",{id:"right","data-size":e(w),style:B({width:`${A.value}%`}),class:"relative flex flex-grow items-center justify-end gap-2 transition-width duration-200"},[s(re),s(ke),s(ee),e(o)?(a(),l(ie,{key:0})):f("",!0),s(X),s(ye)],12,Se)])):f("",!0)],8,ge)}}}),Ee=Me;export{Ee as default};
