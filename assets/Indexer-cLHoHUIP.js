import{Bn as R,I as z,M as S,Mt as p,Rt as m,Sn as q,Tt as T,Un as f,Vt as s,an as A,cn as o,k as C,on as I,qt as B,un as M,zn as n,zt as P}from"./index-Dv83kAv_.js";import{r as Z}from"./currentServer-CyRP1M2f.js";import{f as x,p as v}from"./global-Cl9NRZH-.js";import{t as r}from"./router-LUtA4OvS.js";import{a as j,n as u,o as _,s as N,t as V}from"./indexer-BbRL4yVJ.js";import{t as $}from"./_plugin-vue_export-helper-pDp7unP0.js";T();S();var D={class:"flex-shrink-0 flex-grow-0 text-center text-xs sm:text-base font-semibold leading-none"},Q=["data-indexer","onClick"],U={class:"flex-shrink-0 flex-grow-0 text-center text-xs sm:text-base font-semibold leading-none"},F=B({__name:"Indexer",setup(G){const h=["Libraries","Library","Collections","Albums","Artists","Music Genres"],g=[new RegExp("music/albums"),new RegExp("music/artists"),new RegExp("libraries/[a-zA-Z0-9]+/letter/[a-zA-Z0-9_]"),new RegExp("music/genres/letter/[a-zA-Z0-9_]")];function b(e){return h.some(a=>e.startsWith(a))}function i(e){return g.some(a=>e.match(a))}const y=z();function l(){setTimeout(()=>{document.querySelector(x.value?"ion-tabs ion-router-outlet  div.ion-page:not(.ion-page-hidden) [indexer]":"[indexer]")?.querySelectorAll("[data-indexer]").forEach(e=>{const a=e.dataset.indexer??"";let t;a==="#"?t=document.querySelector?.("ion-tabs ion-router-outlet div.ion-page:not(.ion-page-hidden) [data-scroll]"):t=document.querySelector?.(`ion-tabs ion-router-outlet div.ion-page:not(.ion-page-hidden) [data-scroll='scroll_${a}']`);const d=!!t,E=i(r.currentRoute.value.path),L=V.value.has(a);d||E||L?e.classList.remove("opacity-20","!cursor-not-allowed"):e.classList.add("opacity-20","!cursor-not-allowed")})},500)}function w(e){N(e),document.dispatchEvent(new CustomEvent("scrollToLetter",{detail:{letter:e}}))}function k(){document.querySelector(x.value?"ion-tabs ion-router-outlet  div.ion-page:not(.ion-page-hidden) [indexer]":"[indexer]")?.querySelectorAll("[data-indexer]").forEach(e=>{e.classList.add("opacity-20","!cursor-not-allowed")})}function c(e){j(b(e)),l()}return r.afterEach(e=>{setTimeout(()=>{c(e.name??e.path)},150)}),r.beforeEach(()=>{i(r.currentRoute.value.path)||k()}),A(()=>{setTimeout(()=>{c(r.currentRoute.value.name??r.currentRoute.value.path)},150),document.addEventListener("indexer",l),document.addEventListener("keydown",_)}),I(()=>{document.removeEventListener("indexer",l),document.removeEventListener("keydown",_)}),(e,a)=>(o(),s("div",{class:R([{"w-8":n(u),"w-0":!n(u),"sm:ml-2":!n(v)&&n(u),"bottom-0":n(v)},"pointer-events-none z-0 h-available sm:h-available flex flex-col items-center justify-between self-stretch overflow-clip transition-width duration-200 sm:-translate-x-3 pt-2 text-surface-12"]),indexer:""},[(o(!0),s(p,null,M(n(Z)("#","Z"),t=>(o(),s(p,{key:t},[i(n(y).path)?(o(),P(n(C),{key:0,"data-indexer":t,to:`${t.replace("#","_")}`,class:"pointer-events-auto relative flex p-1.5 size-6 sm:size-8 aspect-square rounded-lg overflow-clip cursor-pointer flex-col items-center justify-center hover:bg-surface-5",tabindex:"-1"},{default:q(()=>[m("p",D,f(t),1)]),_:2},1032,["data-indexer","to"])):(o(),s("button",{key:1,"data-indexer":t,class:"pointer-events-auto relative flex p-1.5 size-6 sm:size-8 aspect-square rounded-lg overflow-clip cursor-pointer flex-col items-center justify-center hover:bg-surface-5/11",tabindex:"-1",onClick:d=>w(t)},[m("p",U,f(t),1)],8,Q))],64))),128))],2))}}),Y=$(F,[["__scopeId","data-v-6851127f"]]);export{Y as t};
