import{$ as Q,d as R,w as $,aM as G,bd as J,c as L,o as z,p as j,z as W,a0 as r,av as X,T as Y,j as O,v as Z,as as ee,Q as n}from"./vue-ionic-D4s4ExYp.js";import{b1 as ae}from"./vendor-Dgtccx1h.js";import{q as t,t as q,f as E,c as oe,r as l,at as se,bH as te,bK as le,bL as re}from"./index-D29s6-I8.js";import{g as c}from"./imageModal-DHrF4kx7.js";import{S as ne}from"./syncPlugin-BiBpkLfF.js";import{A as ie}from"./autoSkipPlugin-HJbAPkkG.js";import{D as ue}from"./desktopUIPlugin-CJu2Srfl.js";import{n as ce,O as pe}from"./video-player-B2yH_Yz-.js";import{V as me}from"./videoNoMercyConnectPlugin-Gr4fpOEm.js";import{u as de}from"./useServerClient-B1iLPo0s.js";import"./media-C2AqgyMX.js";import"./icons-BW5E66pf.js";import"./api-BBofn2cc.js";import"./swiper-D00Cnjmx.js";import"./rxjs-BCp2L9Rn.js";import"./music-player-BiOHSPVn.js";import"./primevue-C7GgiIOs.js";import"./buttons-DnucOQvv.js";import"./baseUIPlugin-BS3doDHP.js";import"./subtitles-octopus-By2PrHjB.js";import"./useInfiniteServerClient-B4MMmB_5.js";const Le=Q({__name:"Mobile",setup(fe){var p;const{data:i}=de({enabled:!((p=t.value.features)!=null&&p.nomercyConnect)}),e=R();function u(o){var m,d,f,v,b,g,y,k,P,C,w,h,I,S,M,_,N,T,D,V,A,B,U,x;const s={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:(o==null?void 0:o.filter(a=>!!a.id))??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:((m=t.value)==null?void 0:m.accessToken)||localStorage.getItem("access_token")||"",basePath:(d=oe.value)==null?void 0:d.serverBaseUrl,forceTvMode:(n("android")||n("ios"))&&!n("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||n("capacitor"),renderAhead:100,disableAutoPlayback:(f=t.value.features)==null?void 0:f.nomercyConnect};if(e.value=ce("player1").setup(s),(v=e.value)==null||v.once("back",()=>{history.state.back?l.back():l.replace("/")}),(b=t.value.features)!=null&&b.nomercyConnect){const a=new me;(g=e.value)==null||g.registerPlugin("videoNoMercyConnect",a),(y=e.value)==null||y.usePlugin("videoNoMercyConnect")}const F=new ue;(k=e.value)==null||k.registerPlugin("desktopUI",F),(P=e.value)==null||P.usePlugin("desktopUI");const H=new ie;if((C=e.value)==null||C.registerPlugin("autoSkip",H),(w=e.value)==null||w.usePlugin("autoSkip"),!((h=t.value.features)!=null&&h.nomercyConnect)){const a=new ne;(I=e.value)==null||I.registerPlugin("sync",a),(S=e.value)==null||S.usePlugin("sync")}const K=new pe;(M=e.value)==null||M.registerPlugin("octopus",K),(_=e.value)==null||_.usePlugin("octopus"),(N=e.value)==null||N.once("play",()=>{var a;(a=e.value)==null||a.enterFullscreen()}),(T=e.value)==null||T.on("playlistComplete",()=>{history.state.back?l.back():l.replace("/")}),(D=e.value)==null||D.on("dispose",()=>{se(),te(),history.state.back?l.back():l.replace("/")}),(V=e.value)==null||V.on("back",()=>{var a;(a=e.value)==null||a.dispose()}),(A=e.value)==null||A.on("play",()=>{c(!0)}),(B=e.value)==null||B.on("pause",()=>{c(!1)}),(U=e.value)==null||U.on("ready",()=>{le(),re(),q.stop()}),(x=e.value)==null||x.on("item",()=>{var a;(a=e.value)==null||a.play()}),ae.addListener("backButton",()=>{var a;(a=e.value)==null||a.emit("back-button-hyjack")})}return $(i,o=>{o!=null&&o.length&&u(o)}),G(()=>{var o,s;q.stop(),(o=t.value.features)!=null&&o.nomercyConnect?u():(s=i.value)!=null&&s.length&&u(i.value)}),J(()=>{var o;(o=e.value)==null||o.dispose(),c(!1)}),(o,s)=>(z(),L(r(ee),null,{default:j(()=>[W(r(X),{fullscreen:!0},{default:j(()=>[(z(),L(Y,{to:"body"},[O("div",{class:Z(["absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199",{"mb-28":r(E),"mb-0":!r(E)}])},s[0]||(s[0]=[O("div",{id:"player1",class:"group nomercyplayer"},null,-1)]),2)]))]),_:1})]),_:1}))}});export{Le as default};
