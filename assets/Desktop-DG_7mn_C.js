import{I as j,Y as q,D as $,b1 as U,a8 as B,a5 as Y,w as I,B as A,_ as G,bM as H,l as g,ch as J,d,o as r,s as x,j as O,K as o,bu as Q,a2 as N,c as p,n as P,a0 as h,a1 as v,a as W,F as _,h as R,b as S,bh as X}from"./index-C_qNKMWs.js";import{u as Z}from"./useInfiniteServerClient-BbeQXtgw.js";import{_ as ee}from"./NMCard.vue_vue_type_script_setup_true_lang-j7djY1yG.js";import{_ as ae}from"./PersonCard.vue_vue_type_script_setup_true_lang-DXoiw2Fu.js";import{_ as oe,a as re}from"./EmptyCard.vue_vue_type_script_setup_true_lang-Bl7bf5V-.js";import{_ as ne}from"./ScrollContainer.vue_vue_type_script_setup_true_lang-CXhFwpxK.js";import{_ as se}from"./NotFound.vue_vue_type_script_setup_true_lang-B8e-ddc_.js";import"./useBaseQuery-vm7BPSk-.js";import"./useQueryClient-C4PrSAx1.js";import"./contextMenuItems-BYx84zge.js";import"./musicPlaylists-B-XU7xsX.js";import"./TMDBImage.vue_vue_type_script_setup_true_lang-DUzr8L2O.js";import"./AppLogoSquare-C46FQJ-V.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./CardIndicator.vue_vue_type_script_setup_true_lang-Biiw0ypq.js";import"./index-B8V6bTi4.js";import"./OptimizedIcon.vue_vue_type_script_setup_true_lang-CJu-NfRn.js";import"./NoResultImage.vue_vue_type_script_setup_true_lang-4PfyuoJL.js";const te="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",le="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",$e=j({__name:"Desktop",setup(de){const c=q(),{data:s,fetchNextPage:y,hasNextPage:b,isError:T}=Z({queryKey:["libraries",(c==null?void 0:c.params.id)??c.name],limit:20,keepForever:!0});$(()=>{U(),B(null),Y(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),I(s,a=>{a&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const D=A(()=>{var n,l,t,i;const a=(i=(t=(l=(n=s.value)==null?void 0:n.pages)==null?void 0:l[0])==null?void 0:t.data)==null?void 0:i[0];return a&&G.value&&a.media_type!=="person"&&a.media_type!=="genres"});H(()=>{stop(),B(null)});const V=g(),F=g();$(()=>{var a,n;F.value=c.params.id??c.name,b.value&&(((n=(a=s==null?void 0:s.value)==null?void 0:a.pages)==null?void 0:n.length)??0)<50&&y(),document.addEventListener("scrollToDiv",l=>{var t;(t=V.value)==null||t.scrollTo({top:l.detail.top-100,behavior:"smooth"})})}),J(()=>{document.dispatchEvent(new Event("indexer"))}),I(s,a=>{var n;a&&b.value&&((n=a==null?void 0:a.pages)==null?void 0:n.length)<50&&y()});const z=g(),K=g();function f(a,n){z.value=n,K.value.show(a)}return(a,n)=>(r(),d(o(X),null,{default:x(()=>[O(o(Q),{fullscreen:!0},{default:x(()=>{var l;return[o(T)&&!((l=o(s))!=null&&l.pages)?(r(),d(se,{key:0})):(r(),d(ne,{key:1,id:o(N).currentRoute.value.fullPath,"auto-hide":!0,static:!0},{default:x(()=>{var t,i;return[(r(),p("div",{ref:"containerRef",key:(t=o(N).currentRoute.value.params)==null?void 0:t.id,class:P(["z-0 flex flex-col gap-4 rounded-3xl border-0 p-4 w-available scrollbar-none border-auto-3 transform-gpu will-change-auto",{"pb-24":o(h)&&!o(v),"pb-40":o(h)&&o(v),"children:pb-4 sm:children:pb-3":!o(h)&&o(v)}])},[W("div",{class:P(`grid w-full gap-4 scroll-smooth music-showing:pb-0 whitespace-pre ${D.value?te:le}`)},[(r(!0),p(_,null,R(((i=o(s))==null?void 0:i.pages)??[],(k,L)=>{var w,C,E,M;return r(),p(_,{key:L},[k.data.length>0?(r(!0),p(_,{key:0},R(k.data??[],(e,m)=>(r(),p(_,null,[(e==null?void 0:e.media_type)==="tv"||(e==null?void 0:e.media_type)==="movie"||(e==null?void 0:e.media_type)==="collection"||(e==null?void 0:e.media_type)==="specials"?(r(),d(ee,{key:e.id,data:e,index:m,onContextMenu:u=>f(u,e)},null,8,["data","index","onContextMenu"])):(e==null?void 0:e.media_type)==="person"?(r(),d(ae,{key:`${e.id}_person`,data:e,index:m,onContextMenu:u=>f(u,e)},null,8,["data","index","onContextMenu"])):(e==null?void 0:e.media_type)==="genres"?(r(),d(oe,{key:`${e.id}_genres`,data:e,index:m,onContextMenu:u=>f(u,e)},null,8,["data","index","onContextMenu"])):S("",!0)],64))),256)):((M=(E=(C=(w=o(s))==null?void 0:w.pages)==null?void 0:C[0])==null?void 0:E.data)==null?void 0:M.length)===0?(r(),d(re,{key:1})):S("",!0)],64)}),128))],2)],2))]}),_:1},8,["id"]))]}),_:1})]),_:1}))}});export{$e as default};
