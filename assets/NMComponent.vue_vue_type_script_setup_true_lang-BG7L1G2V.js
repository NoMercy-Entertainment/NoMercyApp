import{q as f,g,a as q,b as w}from"./routerHelper-Cr8XcZ7r.js";import{$ as _,W as K,aa as k,f as b,w as d,a5 as E,h as L,b as M,a0 as l,o as y,p as x,c as C,s as B,m as D,F}from"./vue-ionic-BZKAFNsD.js";import{r as N}from"./index-BZi9gin7.js";const W=_({__name:"NMComponent",props:{path:{type:String,required:!1,default:void 0},options:{type:Object,required:!1,default:()=>({keepForever:!0,queryKey:f()})}},setup(h){const c=h,i=c.options.queryKey??f(),m=g({queryKey:i,path:c.path}),{data:r}=q({queryKey:i,path:c.path}),{data:v,mutate:p}=w({queryKey:i,homeData:r}),u=K();return k(),b(()=>{var e,n;if(r.value&&u.value){const a=((n=(e=r.value)==null?void 0:e.filter)==null?void 0:n.call(e,t=>{var o;return((o=t==null?void 0:t.update)==null?void 0:o.when)==="pageLoad"}))??[];p(a)}}),d(u,e=>{var a,t;if(!e)return;const n=((t=(a=r.value)==null?void 0:a.filter)==null?void 0:t.call(a,o=>{var s;return((s=o==null?void 0:o.update)==null?void 0:s.when)==="online"}))??[];p(n)}),d(r,e=>{e&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),N.beforeEach(e=>{var n,a;if(!(!r.value||e.name!=="Home"&&e.name!=="Libraries")&&u.value){const t=((a=(n=r.value)==null?void 0:n.filter)==null?void 0:a.call(n,o=>{var s;return((s=o==null?void 0:o.update)==null?void 0:s.when)==="pageLoad"}))??[];p(t)}}),E(()=>{var e,n;if(r.value&&u.value){const a=((n=(e=r.value)==null?void 0:e.filter)==null?void 0:n.call(e,t=>{var o;return((o=t==null?void 0:t.update)==null?void 0:o.when)==="pageLoad"}))??[];p(a)}}),(e,n)=>!l(m)||!l(u)?(y(!0),L(F,{key:0},x(l(v)??l(r)??[],(a,t)=>(y(),C(B(a.component),D({key:a.id,index:t,ref_for:!0},a.props),null,16,["index"]))),128)):M("",!0)}});export{W as _};
