import"./useBaseQuery-BF4AeGAb.js";import{n as R}from"./useInfiniteServerClient-prY1d_ri.js";import"./useQueryClient-DvEXGR3z.js";import{$a as V,$s as s,As as l,Da as u,Dc as v,Do as z,Ec as t,Is as w,Ms as n,Oo as F,Os as L,Pi as O,Rs as X,X as c,Xs as E,Zs as j,_s as q,ai as A,cr as G,i as K,js as _,ks as x,pc as M,so as U,sr as B,tc as I,uc as N,ws as p,xo as Z,yc as m}from"./index-H5TKJIZK.js";import"./musicPlaylists-DwD7huyJ.js";import"./contextMenuItems-g9SlXaVD.js";import"./scrollHandlers-51S6f6Kv.js";import{t as H}from"./Indexer-BSKBfxs-.js";import"./_plugin-vue_export-helper-Qq1ciMp2.js";import"./AppLogoSquare-DMiw3kfV.js";import"./TMDBImage-DxiiXIEu.js";import"./MoooomIcon-lmHBzkux.js";import"./dist-CgnV5duW.js";import"./CardIndicator-Dcik04k5.js";import{t as J}from"./NMCard-C_HO3mLM.js";import{t as Q}from"./PersonCard-BRiF1xK6.js";import{n as W,t as Y}from"./EmptyCard-CX35EcjF.js";import"./NoResultImage-CS4FfxqG.js";q();z();var $="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",ee="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",te=X({__name:"Mobile",setup(re){const i=F(),{data:o,fetchNextPage:y,hasNextPage:b,isError:se}=R({queryKey:["libraries",(i.params.id??i.name)?.split("&").at(0)],limit:20,keepForever:!0});E(()=>{A(),B(null),G(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),N(o,r=>{r&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const P=L(()=>{const r=o.value?.pages?.[0]?.data?.[0];return r&&O.value&&r.media_type!=="person"&&r.media_type!=="genres"});j(()=>{stop(),B(null)});const h=m(),k=m();E(()=>{k.value=i.params.id??i.name,b.value&&(o?.value?.pages?.length??0)<50&&y(),document.addEventListener("scrollToDiv",r=>{h.value?.scrollTo({top:r.detail.top-100,behavior:"smooth"})})}),Z(()=>{document.dispatchEvent(new Event("indexer"))}),N(o,r=>{r&&b.value&&r?.pages?.length<50&&y()});const D=m(),S=m();function f(r,d){D.value=d,S.value.show(r)}return(r,d)=>(s(),l(t(U),null,{default:M(()=>[w(t(V),{fullscreen:!0,class:"ion-padding",style:{"--padding-bottom":"0"}},{default:M(()=>[d[0]||(d[0]=x("div",{class:"fixed top-0 pt-safe w-full bg-surface-1 z-1199"},null,-1)),x("div",{ref_key:"lib",ref:h,class:"pt-safe-offset-9 flex h-auto w-full pr-8 overflow-auto scroll-container"},[(s(),n("div",{key:t(K).currentRoute.value.params?.id,class:v([{"pb-2":t(u)&&t(c),"children:pb-4 sm:children:pb-3":!t(u)&&t(c)},"z-0 flex flex-col gap-4 rounded-3xl border-0 w-available scrollbar-none border-surface-3"])},[x("div",{class:v(`grid w-full gap-4 scroll-smooth music-showing:pb-0 pl-1 py-4 ${P.value?$:ee}`)},[t(o)?(s(!0),n(p,{key:0},I(t(o).pages??[],(C,T)=>(s(),n(p,{key:T},[C.data.length>0?(s(!0),n(p,{key:0},I(C.data??[],(e,g)=>(s(),n(p,null,[e?.media_type==="tv"||e?.media_type==="movie"||e?.media_type==="collection"||e?.media_type==="specials"?(s(),l(J,{key:e.id,data:e,index:g,onContextMenu:a=>f(a,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="person"?(s(),l(Q,{key:`${e.id}_person`,data:e,index:g,onContextMenu:a=>f(a,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="genres"?(s(),l(W,{key:`${e.id}_genres`,data:e,index:g,onContextMenu:a=>f(a,e)},null,8,["data","index","onContextMenu"])):_("",!0)],64))),256)):t(o).pages?.[0]?.data?.length===0?(s(),l(Y,{key:1})):_("",!0)],64))),128)):_("",!0)],2)],2)),w(H,{id:k.value,class:v([{"h-available":!t(u),"h-inherit top-24":t(u),"-mt-4 pt-4 pb-4 mb-0":!t(c),"-mt-4 pt-4 pb-4 mb-14":t(c)},"w-8 fixed right-0 bg-surface-1 transition-all duration-200"])},null,8,["id","class"])],512)]),_:1})]),_:1}))}}),ke=te;export{ke as default};
