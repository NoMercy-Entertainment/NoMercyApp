import{C as z,Et as B,G as N,J as d,Ot as H,S as i,T as L,Tt as a,X as R,c as A,g as G,gt as p,j as O,k as v,ot as y,w as J,x as l,yt as q}from"./i18n-Cs-AFcrY.js";import"./ionic-XwZpO7IE.js";import{I as X,P as Y}from"./vue-core-CKeWI2Kt.js";import"./primevue-DNc5dNs0.js";import"./query-28IwY2wK.js";import{t as D}from"./esm-C_OAQAej.js";import{$n as x,Gn as M,Hr as K,Jn as Q,b as U,er as h,k as Z,yi as ee}from"./index-BDDOwcBS.js";import"./useInfiniteServerClient-1yc3Neqi.js";import{t as te}from"./useServerClient-ChCuKD9-.js";import"./DropdownMenu-DPo9QE78.js";import"./MusicButton-DvVirexb.js";import"./BannerButton-CrXANHob.js";import"./MediaLikeButton-CY-x9Pk-.js";import{t as ae}from"./Marquee-n4OWtyUq.js";import"./TrackLinks-C2sNdZGC.js";import"./BigPlayButton-BCZ7Sfpj.js";import"./EqSpinner-Bu3DmMPN.js";import{t as re}from"./NotFound-CIoj6qaz.js";import"./ShareButton-Bq9ei4V4.js";import{i as se,n as oe,r as ie,t as le}from"./TrackRow-DTlt-HZ5.js";A();Y();var ue={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},ne={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},de=O({__name:"Mobile",setup(pe){const r=X(),_=l(()=>r.path.startsWith("/music/album")),g=l(()=>r.path.startsWith("/music/artist")),b=l(()=>r.path.startsWith("/music/playlists")),k=l(()=>r.path.startsWith("/music/tracks")),w=l(()=>r.path.startsWith("/music/genres")),P=l(()=>_.value?"album":g.value?"artist":b.value?"playlist":k.value?"favorite":w.value?"genre":"unknown"),V=l(()=>String(r.params.id??"")),{data:t,isError:W}=te({path:r.fullPath}),$=p(null),u=q([]),n=p("");y(t,e=>{e&&(ee(e?.name??null),f(e?.tracks??[],h.value,x.value,n.value),M(e?.color_palette?.cover))},{immediate:!0}),y(x,e=>{f(t.value?.tracks??[],h.value,e,n.value)}),y(h,e=>{f(t.value?.tracks??[],e,x.value,n.value)}),y(n,e=>{f(t.value?.tracks??[],h.value,x.value,e)});function f(e,o,s,m){const T=K(e??[],o,s,Q);m===""?u.value=T:u.value=T?.filter(C=>C.name?.toLowerCase().includes(m?.toLowerCase?.())||C.artist_track?.some(I=>I.name.toLowerCase().includes(m?.toLowerCase?.()))||C.album_track?.[0]?.name.toLowerCase().includes(m?.toLowerCase?.()))??[]}N(()=>{t.value?.color_palette?.cover&&M(t.value?.color_palette?.cover)});function j(){Z.back()}const c=p(!1);p(!1);const E=p(),F=p(),S=D(l(()=>{const e=F.value?.$el??null;return{count:u.value?.length??0,getScrollElement:()=>e,estimateSize:()=>56,overscan:10,initialRect:{width:0,height:800}}}));return(e,o)=>a(W)&&!a(t)?(d(),z(re,{key:0})):!a(r).params.id||a(r).params.id&&a(t)?.id===a(r).params.id?(d(),L("div",{key:1,ref_key:"main",ref:$,class:"flex flex-col h-auto overflow-x-clip w-available sm:rounded-2xl -mt-6 text-surface-12"},[v(ie,{data:a(t)},null,8,["data"]),i("div",ue,[o[2]||(o[2]=i("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),i("div",{id:"navbar",class:B([{"opacity-0 pointer-events-none":!c.value,"opacity-100 pointer-events-auto":c.value},"fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-surface-11 dark:bg-surface-1 top-0 pt-4 transition-all duration-200"])},[o[1]||(o[1]=i("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-all duration-200 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),i("button",{class:"z-30 flex h-10 w-11 items-center justify-center rounded-md",onClick:j},[v(U,{icon:"arrowLeft"})]),i("div",{id:"navText",class:B([{"opacity-0 pointer-events-none":!c.value,"opacity-100 pointer-events-auto":c.value},"pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-all duration-200 w-[70%] overflow-clip text-xl"])},[v(ae,{text:a(t)?.name},null,8,["text"])],2)],2),(d(),z(se,{key:a(t)?.id,data:a(t),filter:n.value,onFilterChange:o[0]||(o[0]=s=>n.value=s)},null,8,["data","filter"])),i("div",ne,[(d(),z(oe,{key:a(t)?.id,ref_key:"sortHeader",ref:E,"is-album-route":_.value,"is-artist-route":g.value,"is-playlists-route":b.value,"is-favorites-route":k.value,"is-genres-route":w.value},null,8,["is-album-route","is-artist-route","is-playlists-route","is-favorites-route","is-genres-route"])),i("div",{style:H({height:`${a(S).getTotalSize()}px`,width:"100%",position:"relative"})},[(d(!0),L(G,null,R(a(S).getVirtualItems(),s=>(d(),L("div",{key:u.value[s.index]?.id+u.value[s.index]?.favorite,style:H({position:"absolute",top:0,left:0,width:"100%",height:`${s.size}px`,transform:`translateY(${s.start}px)`})},[v(le,{data:u.value[s.index],"display-list":u.value,index:s.index,"is-album-route":_.value,"is-artist-route":g.value,"is-playlists-route":b.value,"is-favorites-route":k.value,"is-genres-route":w.value,"route-type":P.value,"route-param-id":V.value},null,8,["data","display-list","index","is-album-route","is-artist-route","is-playlists-route","is-favorites-route","is-genres-route","route-type","route-param-id"])],4))),128))],4)])])],512)):J("",!0)}}),Pe=de;export{Pe as default};
