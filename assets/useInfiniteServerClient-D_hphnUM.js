import{I as l,M as d}from"./index-CJ3av9Nr.js";import{t as v}from"./currentServer-DQ7i6d_b.js";import{t as m}from"./serverClient-Jb_BGG0d.js";import{a as y,o as p,s as g}from"./utils-Cpofav5o.js";import{n as x,t as b}from"./useBaseQuery-D_SazeaR.js";var M=class extends x{constructor(e,s){super(e,s)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:g()})}getOptimisticResult(e){return e.behavior=g(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,s){const{state:r}=e,t=super.createResult(e,s),{isFetching:i,isRefetching:u,isError:a,isRefetchError:c}=t,n=r.fetchMeta?.fetchMore?.direction,h=a&&n==="forward",o=i&&n==="forward",f=a&&n==="backward",P=i&&n==="backward";return{...t,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:y(s,r.data),hasPreviousPage:p(s,r.data),isFetchNextPageError:h,isFetchingNextPage:o,isFetchPreviousPageError:f,isFetchingPreviousPage:P,isRefetchError:c&&!h&&!f,isRefetching:u&&!o&&!P}}};function R(e,s){return b(M,e,s)}d();function q(e){if(e?.queryKey)return e?.queryKey;const s=l(),r=[];return(e?.path??s.path)?.split("/").slice(1).forEach(t=>{t.includes("?")?(r.push(t.split("?")[0]),r.push(t.split("?")[1].split("=")[1])):r.push(t)}),e?.queryKey??r}function I(e){const r=l();return R({...e,queryKey:e?.queryKey??(e?.path??r.fullPath).split("/").slice(1),enabled:!!v.value?.id&&e?.enabled,retry:0,staleTime:e?.keepForever?1/0:1e3*60*5,retryOnMount:!1,refetchOnMount:!0,refetchOnWindowFocus:!1,refetchOnReconnect:!0,initialPageParam:0,getNextPageParam:t=>t.has_more?t.next_page:void 0,getPreviousPageParam:t=>t.has_more?t.next_page-2:void 0,queryFn:({pageParam:t=0,signal:i})=>new Promise((u,a)=>m().get(e?.path??r.fullPath,{signal:i,params:{page:t,version:e?.version,take:e?.limit??3}}).then(c=>{u(c.data)}).catch(a))})}var E=I;export{E as n,q as t};
