var f=Object.defineProperty;var p=(t,e,i)=>e in t?f(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var s=(t,e,i)=>p(t,typeof e!="symbol"?e+"":e,i);import{aW as y}from"./index-CuFkuKu6.js";class m{constructor(e,i,l,c){s(this,"player");s(this,"isMouseDown",!1);s(this,"isScrubbing",!1);s(this,"valuePercentage",0);s(this,"dragPercentage",0);s(this,"sliderBar",{});s(this,"sliderValue",{});s(this,"sliderNipple",{});s(this,"sliderHover",{});s(this,"targetElement");s(this,"callbackFn");s(this,"getSizeFn");this.player=i,this.targetElement=e,this.callbackFn=l,this.getSizeFn=c,this.targetElement&&(this.sliderBar=this.targetElement.querySelector(".slider-bar"),this.sliderValue=this.targetElement.querySelector(".slider-value"),this.sliderNipple=this.targetElement.querySelector(".slider-nipple"),this.sliderHover=this.targetElement.querySelector(".slider-hover"),!(!this.sliderBar||!this.sliderValue||!this.sliderNipple||!this.sliderHover)&&this.init())}getScrubTime(e,i){var h,a,o,u;const l=i.getBoundingClientRect();let r=(e.clientX??((a=(h=e.touches)==null?void 0:h[0])==null?void 0:a.clientX)??((u=(o=e.changedTouches)==null?void 0:o[0])==null?void 0:u.clientX)??0)-l.left;r<=0&&(r=0),r>=l.width&&(r=l.width);let n=100;return this.getSizeFn&&typeof this.player[this.getSizeFn]=="function"&&(n=this.player[this.getSizeFn]()),{scrubValue:r/i.offsetWidth*100,scrubValuePlayer:r/i.offsetWidth*n}}handleMouseDown(){this.isMouseDown=!0}handleMouseUp(e){this.isMouseDown=!1,this.isScrubbing=!1,this.sliderNipple.style.removeProperty("--force-left"),this.sliderValue.style.removeProperty("--force-width");const i=this.getScrubTime(e,this.sliderBar);typeof this.player[this.callbackFn]=="function"&&this.player[this.callbackFn](i.scrubValuePlayer)}handleMouseMove(e){const i=this.getScrubTime(e,this.sliderBar);this.isMouseDown&&(this.sliderNipple.style.setProperty("--force-left",`${i.scrubValue}%`),this.sliderValue.style.setProperty("--force-width",`${i.scrubValue}%`),this.valuePercentage=i.scrubValue,typeof this.player[this.callbackFn]=="function"&&!this.getSizeFn&&this.player[this.callbackFn](i.scrubValue)),this.dragPercentage=Math.round(i.scrubValue),this.sliderHover.style.width=`${i.scrubValue}%`}handleMouseEnter(){this.sliderNipple.style.display="flex"}handleMouseLeave(){this.isScrubbing=!1,this.isMouseDown=!1,this.sliderNipple.style.removeProperty("--force-left"),this.sliderValue.style.removeProperty("--force-width"),this.sliderNipple.style.display="",this.sliderHover.style.width="0"}handleTouchStart(){this.isMouseDown=!0,this.sliderNipple.style.display="flex"}handleTouchMove(e){if(this.isMouseDown){this.isScrubbing=!0;const i=this.getScrubTime(e,this.sliderBar);this.sliderNipple.style.setProperty("--force-left",`${i.scrubValue}%`),this.sliderValue.style.setProperty("--force-width",`${i.scrubValue}%`),typeof this.player[this.callbackFn]=="function"&&this.player[this.callbackFn](i.scrubValuePlayer)}}handleTouchEnd(e){this.isMouseDown=!1,this.isScrubbing=!1,this.sliderNipple.style.display="",this.sliderNipple.style.removeProperty("--force-left"),this.sliderValue.style.removeProperty("--force-width");const i=this.getScrubTime(e,this.sliderBar);typeof this.player[this.callbackFn]=="function"&&this.player[this.callbackFn](i.scrubValuePlayer)}init(){this.sliderBar.addEventListener("mousedown",this.handleMouseDown.bind(this)),this.sliderBar.addEventListener("mouseup",this.handleMouseUp.bind(this)),this.sliderBar.addEventListener("mousemove",this.handleMouseMove.bind(this)),this.sliderBar.addEventListener("mouseenter",this.handleMouseEnter.bind(this)),this.sliderBar.addEventListener("mouseleave",this.handleMouseLeave.bind(this)),this.sliderBar.addEventListener("touchstart",this.handleTouchStart.bind(this)),this.sliderBar.addEventListener("touchmove",this.handleTouchMove.bind(this)),this.sliderBar.addEventListener("touchend",this.handleTouchEnd.bind(this))}}HTMLElement.prototype.sliderBar=function(t,e,i){return!(this instanceof HTMLElement)||this.dataset.type!="slider-bar"?null:new m(this,t,e,i)};HTMLElement.prototype.scrollHorizontalIntoView=function(t){if(!(this instanceof HTMLElement))return;const e=this.getBoundingClientRect(),i=t??this.parentElement;if(!i)return;const l=e.left-i.getBoundingClientRect().left;i.scrollTo({left:l,behavior:"smooth"})};HTMLElement.prototype.scrollVerticalIntoView=function(t){if(!(this instanceof HTMLElement))return;const e=this.getBoundingClientRect(),i=t??this.parentElement;if(!i)return;const l=e.top-i.getBoundingClientRect().top;i.scrollTo({top:l,behavior:"smooth"})};HTMLElement.prototype.animateVerticalIntoView=function(t=null,e=420){if(!(this instanceof HTMLElement))return;const i=this.getBoundingClientRect();if(t||(t=this.parentElement),!t)return;const l=i.top-t.getBoundingClientRect().top-t.getBoundingClientRect().height/2,c=performance.now(),r=t.scrollTop;function n(h){if(!t)return;const a=h-c;let o=Math.min(a/e,1);o=g(o),t.scrollTo(0,r+l*o),a<e&&requestAnimationFrame(n)}requestAnimationFrame(n)};HTMLElement.prototype.isVisible=function(t){if(!this)return!1;const e=this.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=((t==null?void 0:t.offsetHeight)||document.documentElement.clientHeight)&&e.right<=((t==null?void 0:t.offsetWidth)||document.documentElement.clientWidth)};Document.prototype.querySelectorAllArray=function(t){return Array.from(this.querySelectorAll(t))};Element.prototype.querySelectorAllArray=function(t){return Array.from(this.querySelectorAll(t))};HTMLElement.prototype.querySelectorAllArray=function(t){return Array.from(this.querySelectorAll(t))};const g=t=>t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1;let d;const b=t=>{clearTimeout(d);let e=null;t=="#"?e=document.querySelector("ion-tabs ion-router-outlet div.ion-page:not(.ion-page-hidden) [data-scroll]"):e=document.querySelector(`ion-tabs ion-router-outlet div.ion-page:not(.ion-page-hidden) [data-scroll='scroll_${t}']`),document.dispatchEvent(new CustomEvent("scrollToDiv",{detail:{top:e==null?void 0:e.offsetTop}}));let i=document.querySelector(".ion-page:not(.ion-page-hidden) main .group\\/scrollContainer");i||(i=document.querySelector(".ion-page:not(.ion-page-hidden) ion-content .scroll-container")),e&&i&&(i.scrollTo({top:e.offsetTop-120,behavior:"smooth"}),d=setTimeout(()=>{e==null||e.classList.add("flashing"),setTimeout(()=>{e==null||e.classList.remove("flashing")},3e3)},700))},M=t=>{var e;t.key&&y("#","Z").some(i=>i==t.key.toUpperCase())&&b((e=t.key)==null?void 0:e.toUpperCase())};export{M as k,b as s};
