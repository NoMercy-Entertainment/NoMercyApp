import"./useBaseQuery-BjcRoUle.js";import"./useInfiniteServerClient-C6VvXOvL.js";import"./useQueryClient-6VbozcbB.js";import"./useQuery-8mENMoCn.js";import{Ac as c,Cc as P,Fs as _,Hs as k,Is as p,Ms as C,Oi as b,Ss as w,U as h,Ws as S,_c as d,ds as l,fo as M,hc as I,i as o,ic as f,io as U,nc as x,oa as s,tc as N}from"./index-hMnv1PVv.js";import{s as i}from"./imageModal-UEoF3pr0.js";import{t as D}from"./useServerClient-BS75nouq.js";import{i as H,n as T,o as A,r as B,s as F}from"./VideoPlayer-D8WcTJCV.js";import"./buttons-Dz19tni1.js";import{t as V}from"./keyHandlerPlugin-DVMGHGzg.js";import{t as O}from"./videoNoMercyConnectPlugin-BQZJ-too.js";w();var W=S({__name:"Desktop",setup(j){const{data:u}=D({enabled:!s.value.features?.nomercyConnect}),e=P();function r(t){const n={controls:!1,debug:!1,playlist:t?.filter(a=>!!a.id)??[],accessToken:s.value?.accessToken,basePath:b.value?.serverBaseUrl,forceTvMode:(l("android")||l("ios"))&&!l("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||l("capacitor"),renderAhead:100,disableAutoPlayback:s.value.features?.nomercyConnect};if(e.value=B("player1").setup(n),e.value.once("back",()=>{history.state.back?o.back():o.replace("/")}),s.value.features?.nomercyConnect){const a=new O;e.value.registerPlugin("videoNoMercyConnect",a),e.value.usePlugin("videoNoMercyConnect")}const v=new H;e.value.registerPlugin("desktopUI",v),e.value.usePlugin("desktopUI");const g=new A;e.value.registerPlugin("autoSkip",g),e.value.usePlugin("autoSkip");const y=new V;if(e.value.registerPlugin("keyHandler",y),e.value.usePlugin("keyHandler"),!s.value.features?.nomercyConnect){const a=new F;e.value.registerPlugin("sync",a),e.value.usePlugin("sync")}const m=new T;e.value.registerPlugin("octopus",m),e.value.usePlugin("octopus"),e.value.once("play",()=>{e.value.enterFullscreen()}),e.value.on("playlistComplete",()=>{console.log("Playlist complete"),history.state.back?o.back():o.replace("/")}),e.value.on("play",()=>{i(!0)}),e.value.on("pause",()=>{i(!1)}),e.value.on("fullscreen",a=>{window.external?.sendMessage?.(a?"enterFullscreen":"exitFullscreen")})}return I(u,t=>{t?.length&&r(t)}),N(()=>{h.stop(),s.value.features?.nomercyConnect?r():u.value?.length&&r(u.value)}),x(()=>{e.value?.dispose(),i(!1)}),(t,n)=>(f(),p(c(M),null,{default:d(()=>[k(c(U),{fullscreen:!0},{default:d(()=>[(f(),p(C,{to:"body"},[n[0]||(n[0]=_("div",{id:"player1",class:"group nomercyplayer text-white"},null,-1))]))]),_:1})]),_:1}))}}),Z=W;export{Z as default};
