import{aG as z,bk as H,bO as J,j as B,a7 as r,a as t,t as u,aI as s,x as o,a6 as x,v as S,o as I,aO as A,bQ as X,K as c,ba as Y,az as Z,br as ee,L as j,h as le,aP as C}from"./index-BRRsWqGl.js";import{_ as te}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-CD67IAM2.js";import{_ as ae}from"./Modal.vue_vue_type_script_setup_true_lang-erSYO7nc.js";import{_ as $}from"./Button.vue_vue_type_script_setup_true_lang-DAW0NDA6.js";import{a as y}from"./index-O0Tihf9K.js";import"./FloatingBackButton.vue_vue_type_script_setup_true_lang-C0Fn21M1.js";const oe={class:"my-6 text-sm text-auto-10"},se=z({__name:"DeleteSpecialModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},name:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},setup(p){const i=p,{t:d}=H(),h=J(),k=()=>{A().delete(`dashboard/specials/${i.id}`).then(({data:a})=>{h.invalidateQueries({queryKey:["dashboard","specials"]}),!i.noRedirect&&window.history.back()}),i.close()};return(a,g)=>{const w=S("Button");return I(),B(ae,{close:p.close,open:p.open,maxWidth:"max-w-xl",params:{special:i.name},title:"Delete special {{special}}"},{actions:r(()=>[o(w,{id:"yes",onclick:k,endIcon:"trash",color:"red",type:"button"},{default:r(()=>[x(u(s(d)("Delete")),1)]),_:1}),o(w,{id:"no",onClick:p.close,type:"button",color:"text-auto-alpha-11",variant:"text"},{default:r(()=>[x(u(s(d)("Cancel")),1)]),_:1},8,["onClick"])]),default:r(()=>[t("div",oe,u(s(d)("Are you sure you want to delete this special?")),1)]),_:1},8,["close","open","params"])}}}),re={class:"flex flex-col gap-5 col-span-5 col-start-1 2xl:col-start-1"},ne={class:"flex flex-col gap-2"},ie={class:"flex flex-col gap-2"},de={class:"flex gap-4 w-full"},ce={class:"flex flex-col gap-4 w-full"},ue={class:"flex flex-col gap-2"},pe={class:"flex flex-col gap-4 w-full"},fe={class:"flex flex-col gap-2"},me={class:"flex flex-col gap-4 col-span-2 row-start-1 col-start-1 2xl:col-start-6"},ve={class:"flex flex-col gap-5"},xe={class:"flex flex-col gap-2"},ke=z({__name:"Edit",setup(p){var U,q,D,N,R;const i=ee(),{data:d,error:h,refetch:k}=X({path:"dashboard/specials",queryKey:["dashboard","specials"]}),a=c();Y(()=>{k()}),Z(()=>{d.value&&(a.value=d.value.find(e=>e.id==i.params.id))}),j(d,e=>{e&&(a.value=e.find(l=>l.id==i.params.id))});const g=c(!1),w=()=>{g.value=!0},E=()=>{g.value=!1},F=()=>{window.history.back()},_=c(((U=a.value)==null?void 0:U.title)||""),b=c(((q=a.value)==null?void 0:q.overview)||""),f=c(((D=a.value)==null?void 0:D.backdrop)||""),m=c(((N=a.value)==null?void 0:N.poster)||""),v=c(((R=a.value)==null?void 0:R.logo)||"");j(a,e=>{e&&(_.value=e==null?void 0:e.title,b.value=e==null?void 0:e.overview,f.value=e==null?void 0:e.backdrop,m.value=e==null?void 0:e.poster,v.value=e==null?void 0:e.logo)});const G=()=>{var e;A().patch(`/dashboard/specials/${(e=a.value)==null?void 0:e.id}`,{title:_.value,overview:b.value,backdrop:f.value,poster:m.value,logo:v.value}).then(({data:l})=>{console.log(l)})};return(e,l)=>{var O;const W=S("Textarea"),V=S("Image");return I(),B(te,{gridStyle:1,error:s(h),title:"Special: {{title}}",params:{title:(O=a.value)==null?void 0:O.title}},{cta:r(()=>l[5]||(l[5]=[])),actions:r(()=>[o($,{type:"button",id:"remove",variant:"text",startIcon:"folderRemove",class:"children:text-gray-400 children:transition-colors children:duration-100 children:hover:text-red-dark-8",color:"text-auto-alpha-11",onClick:w},{default:r(()=>[x(u(e.$t("Remove")),1)]),_:1}),o($,{type:"button",id:"cancel",variant:"text",color:"white",onClick:F},{default:r(()=>[x(u(e.$t("Cancel")),1)]),_:1}),o($,{type:"button",id:"save",class:"ml-auto",color:"theme",onClick:G},{default:r(()=>[x(u(e.$t("Save")),1)]),_:1})]),default:r(()=>{var T,K,M,Q,L,P;return[t("div",re,[t("div",ne,[l[6]||(l[6]=t("label",{for:"name"},"Name",-1)),o(s(y),{variant:"filled",id:"name",modelValue:_.value,"onUpdate:modelValue":l[0]||(l[0]=n=>_.value=n),class:"w-full"},null,8,["modelValue"])]),t("div",ie,[l[7]||(l[7]=t("label",{for:"overview"},"Overview",-1)),o(W,{variant:"filled",rows:8,id:"overview",modelValue:b.value,"onUpdate:modelValue":l[1]||(l[1]=n=>b.value=n),class:"w-full"},null,8,["modelValue"])]),t("div",de,[t("div",ce,[t("div",ue,[l[8]||(l[8]=t("label",{for:"backdrop"},"Backdrop",-1)),o(s(y),{variant:"filled",id:"backdrop",modelValue:f.value,"onUpdate:modelValue":l[2]||(l[2]=n=>f.value=n),class:"w-full"},null,8,["modelValue"])]),o(V,{src:`${(T=s(C))==null?void 0:T.serverBaseUrl}/images/original${f.value}`,alt:"Image",width:"100%",class:"mx-2",preview:""},null,8,["src"])]),t("div",pe,[t("div",fe,[l[9]||(l[9]=t("label",{for:"logo"},"Logo",-1)),o(s(y),{variant:"filled",id:"logo",modelValue:v.value,"onUpdate:modelValue":l[3]||(l[3]=n=>v.value=n),class:"w-full"},null,8,["modelValue"])]),o(V,{src:`${(K=s(C))==null?void 0:K.serverBaseUrl}/images/original${v.value}`,alt:"Image",width:"100%",class:"mx-2",preview:""},null,8,["src"])])])]),t("div",me,[t("div",ve,[t("div",xe,[l[10]||(l[10]=t("label",{for:"poster"},"Poster",-1)),o(s(y),{variant:"filled",id:"poster",modelValue:m.value,"onUpdate:modelValue":l[4]||(l[4]=n=>m.value=n),class:"w-full"},null,8,["modelValue"])]),o(V,{src:`${(M=s(C))==null?void 0:M.serverBaseUrl}/images/original${m.value}`,alt:"Image",width:"100%",class:"mx-2",preview:""},null,8,["src"])])]),(Q=a.value)!=null&&Q.id?(I(),B(se,{key:0,id:(L=a.value)==null?void 0:L.id,name:(P=a.value)==null?void 0:P.title,close:E,open:g.value},null,8,["id","name","open"])):le("",!0)]}),_:1},8,["error","params"])}}});export{ke as default};
