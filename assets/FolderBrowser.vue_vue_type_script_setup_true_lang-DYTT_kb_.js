import{I as F,l as o,w as c,D as S,f as V,c as d,o as u,a as l,j as r,t as p,s as B,n as N,F as g,h as $,O as I}from"./index-DkQngsHe.js";import{_ as T}from"./ScrollContainer.vue_vue_type_script_setup_true_lang-BJWiF2I-.js";import{_ as b}from"./OptimizedIcon.vue_vue_type_script_setup_true_lang-BBYVQkaB.js";const j={class:"relative mt-1 w-full"},q={class:"relative flex w-full flex-col overflow-clip h-[88%] even:text-lg"},D={class:"flex p-2 pt-4 border-b !bg-transparent text-sm select-none"},U={class:""},z={class:"mr-auto ml-4"},E={class:"relative flex w-full flex-col h-inherit"},G={class:"relative w-full h-auto"},L=["onClick"],M={class:"mr-auto !ml-7 text-sm select-none"},H=F({__name:"FolderBrowser",props:{selected:{type:String,required:!0},setSelected:{type:Function,required:!0}},setup(x){const i=x,t=o(i.selected??"/"),f=o(!1),m=o("/");c(i,e=>{t.value=e.selected}),c(t,e=>{i.setSelected(e),f.value=!1});const h=o([]),w=o(!1);function v(e){I().post("/dashboard/server/directorytree",{folder:e}).then(({data:s})=>{var n,a,_;h.value=s.data.filter(C=>C.type==="folder"),m.value=((_=(a=(n=s.data.at(0))==null?void 0:n.full_path)==null?void 0:a.match(/[\\/]/gu))==null?void 0:_.at(-1))??"/"}).then(()=>w.value=!1)}c(t,e=>{e&&v(e??"")});function y(){var e;f.value=!0,t.value=t.value.split(/[/\\]/gu).slice(0,-1).join(m.value),(e=t.value.match(/[/\\]/gu))!=null&&e.length||(t.value="/")}function k(e){t.value=e.full_path}return S(()=>{v(t.value??"")}),(e,s)=>{const n=V("InputText");return u(),d(g,null,[l("div",j,[r(n,{id:"folderName",modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=a=>t.value=a),name:"","no-ring":"",class:"w-full"},null,8,["modelValue"])]),l("div",q,[l("div",D,[l("span",U,p(e.$t("Type")),1),l("span",z,p(e.$t("Name")),1)]),l("div",E,[r(T,{static:!1,"auto-hide":!1,"class-name":"ml-2"},{default:B(()=>[l("div",{class:N(["bg-auto-6/4 hover:bg-auto-200 border-t-0 border-b border-solid border-[rgba(34,34,34,0.9)] contain flex items-center text-current cursor-pointer overflow-hidden py-1 px-2 align-middle h-10 min-h-10 leading-6 select-none",t.value==="/"?"opacity-50":""]),onClick:y},[r(b,{icon:"returnPackage",class:"mt-1 h-5 w-5"}),s[1]||(s[1]=l("span",{class:"mr-auto !ml-7"},"...",-1))],2),l("div",G,[(u(!0),d(g,null,$(h.value,a=>(u(),d("div",{key:a.full_path,class:"even:bg-auto-6/2 odd:bg-auto-100 hover:bg-auto-200 border-t-0 border-b border-solid border-[rgba(34,34,34,0.9)] contain flex items-center bg-transparent text-current cursor-pointer overflow-hidden py-1 px-2 align-middle h-10 leading-6",onClick:()=>k(a)},[r(b,{icon:"folder",class:"h-5 w-5"}),l("span",M,p(a.path.replace(/[\\\/]/u,"")),1)],8,L))),128))])]),_:1})])])],64)}}});export{H as _};
