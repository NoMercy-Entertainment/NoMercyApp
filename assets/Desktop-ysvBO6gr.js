import{D as L,Dn as R,Ht as k,Qn as v,Rn as a,Tn as o,Wn as y,Yt as E,Zn as d,cn as l,in as C,kn as $,nn as m,sn as f,tn as _,tr as u,un as w,x as q,y as N}from"./index-04Sh3wNb.js";import"./dist-CVoPesok.js";import"./esm-BuFVrMo0.js";import"./esm-9iWgK55i.js";import"./esm-cDzTb79E.js";import"./esm-BfF1RlcU.js";import"./dist-B3n7-doU.js";import"./focus-visible-CHAJCf_J.js";import"./index5-B30D6T27.js";import"./client-rtF7IPPI.js";import"./ionic-global--aoJHCDL.js";import"./hardware-back-button-h528z6zo.js";import"./index3-CSo3jo06.js";import"./helpers-CXS86XKs.js";import"./index6-CZ6rqL_0.js";import"./index8-BpkFXja0.js";import"./keyboard-cU79cwdW.js";import"./index2-op38TIl9.js";import"./ios.transition-C8T7q-Bo.js";import"./keyboard2-DETZ41vp.js";import"./md.transition-BqH5iNQr.js";import"./dir-BUtgAzbR.js";import"./ui-BT6EUdI0.js";import"./client-DMa-uSBE.js";import{S as t,t as g}from"./currentServer-B7-kbkE-.js";import"./config-BOA2pGQM.js";import"./esm-CcKFjObu.js";import"./global-gyhCjh_P.js";import"./esm-BuRgllmc.js";import"./user-C1ciKa7-.js";import{t as b}from"./serverClient-FHPKIHPu.js";import"./router-C_xBvmya.js";import"./utils-D5DD-7jP.js";import"./useBaseQuery-CNJp2kAB.js";import"./useInfiniteServerClient-By5CuBlL.js";import{tt as T}from"./SocketClient-DPmgFkP-.js";import"./useQueryClient-s6ZLwuD6.js";import"./useQuery-C7DDAmeN.js";import"./apiClient-Cw7f36ko.js";import"./notifications-Bi_dU6lP.js";import"./utils-CdenF_Jv.js";import"./bundle-mjs-Xm_uQvzT.js";import"./deviceInfo-Bcw3-ht5.js";import"./helpers-fSCF1qXj.js";import"./auth-DfyD43WY.js";import"./_plugin-vue_export-helper-B_iOTHZb.js";import"./AppLogoSquare-DJq6h5gt.js";import{t as A}from"./TMDBImage-Dcp6aBnk.js";import"./MoooomIcon-DNWQYuYD.js";import{t as I}from"./useServerClient-CroZbKWw.js";import"./ScrollContainer-3_hZWeKa.js";import"./useMounted-CBZpV1fi.js";import"./RipperOverlay-BWEr7uxe.js";import"./HubConnection-BtQMN1V5.js";import"./ripperSocket-C9kIp3Ty.js";import"./Button-BOqv4y1r.js";import"./FloatingBackButton-D3UgtlFi.js";import{t as V}from"./DashboardLayout-CXf1x5EO.js";import{t as j}from"./DashboardCard-1p8adrLL.js";k();var z={class:"relative flex aspect-video flex-shrink-0 flex-grow-0 flex-col items-center justify-center self-stretch overflow-clip rounded-lg bg-theme-8"},K={key:1,class:"text-xl font-bold"},M=w({__name:"LibraryCard",props:{data:{type:Object,required:!0}},setup(r){return(s,n)=>(o(),m(j,{line1:r.data.title,line2:r.data.folder_library&&r.data.folder_library?.length!==1?`${r.data.folder_library?.length} folders`:`${r.data.folder_library?.length}  folder`,route:`/dashboard/libraries/${r.data.id}`},{image:a(()=>[_("div",z,[n[0]||(n[0]=_("div",{class:"backdropCard-overlay"},null,-1)),r.data.image?(o(),m(A,{key:0,path:r.data.image,aspect:"backdrop",class:"z-0"},null,8,["path"])):(o(),C("span",K,u(r.data.title),1))])]),_:1},8,["line1","line2","route"]))}}),Q=M;k();var U=w({__name:"Desktop",setup(r){const s=N(),{data:n,error:x}=I({path:"dashboard/libraries",queryKey:["dashboard","libraries",g.value?.serverBaseUrl]});function B(){b().post("dashboard/libraries").then(({data:e})=>{s.add({severity:e.status==="ok"?"success":"error",summary:t(e.status==="ok"?"Success":"Error"),detail:t(e.message,...e.args),life:5e3}),T.invalidateQueries({queryKey:["dashboard","libraries",g.value?.serverBaseUrl]})})}const i=y(!1);function D(){i.value=!0,b().post("dashboard/libraries/refresh").then(({data:e})=>{i.value=!1,s.add({severity:e.status==="ok"?"success":"error",summary:t(e.status==="ok"?"Success":"Error"),detail:t(e.message,...e.args),life:5e3})}).catch(()=>{i.value=!1,s.add({severity:"error",summary:t("Error"),detail:t("An error occurred while rescanning the libraries"),life:5e3})})}const p=y(!1);function S(){p.value=!0,b().post("dashboard/libraries/rescan").then(({data:e})=>{p.value=!1,s.add({severity:e.status==="ok"?"success":"error",summary:t(e.status==="ok"?"Success":"Error"),detail:t(e.message,...e.args),life:5e3})}).catch(()=>{p.value=!1,s.add({severity:"error",summary:t("Error"),detail:t("An error occurred while rescanning the libraries"),life:5e3})})}return(e,F)=>{const c=$("Button");return o(),m(d(L),null,{default:a(()=>[l(d(q),{fullscreen:!0},{default:a(()=>[l(V,{error:d(x),"grid-style":1,title:"Libraries",description:"Manage your media libraries and their content here."},{cta:a(()=>[l(c,{id:"newLibrary",color:"theme","start-icon":"folderAdd",onClick:B},{default:a(()=>[f(u(e.$t("New library")),1)]),_:1})]),actions:a(()=>[l(c,{id:"refresh",type:"button",variant:"text","start-icon":"folderSwap",disabled:i.value,class:v(i.value?"first:children:animate-spin cursor-not-allowed":""),onClick:D},{default:a(()=>[f(u(e.$t("Refresh all libraries")),1)]),_:1},8,["disabled","class"]),l(c,{id:"rescan",type:"button",variant:"text","start-icon":"folderSwap",disabled:i.value,class:v(i.value?"first:children:animate-spin cursor-not-allowed":""),onClick:S},{default:a(()=>[f(u(e.$t("Rescan all libraries")),1)]),_:1},8,["disabled","class"])]),default:a(()=>[(o(!0),C(E,null,R(d(n)??[],h=>(o(),m(Q,{key:h.id,data:h},null,8,["data"]))),128))]),_:1},8,["error"])]),_:1})]),_:1})}}}),Ze=U;export{Ze as default};
