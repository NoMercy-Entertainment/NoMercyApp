import{I as G,ae as t,l as H,w as J,ch as Q,af as L,eg as W,d as j,o as z,s as O,j as X,K as n,bu as Y,cg as Z,a as R,n as $,a0 as E,bh as ee,ap as r,R as ae,a2 as l,bL as oe,eh as se,ek as te,el as le,as as ne}from"./index-C_qNKMWs.js";import{g as c}from"./imageModal-Bx-CyocX.js";import{S as re,O as ie}from"./octopusPlugin-QztI50IL.js";import{A as ue}from"./autoSkipPlugin-BDxzBwjf.js";import{n as ce}from"./subtitles-octopus-CLlJMLNY.js";import{D as pe}from"./desktopUIPlugin-CrmxI-3q.js";import{V as de}from"./videoNoMercyConnectPlugin-CZyaVRWp.js";import{u as me}from"./useServerClient-abD0VdnA.js";import"./buttons-DnucOQvv.js";import"./useQuery-DTS8T947.js";import"./useBaseQuery-vm7BPSk-.js";import"./useQueryClient-C4PrSAx1.js";import"./useInfiniteServerClient-BbeQXtgw.js";const Ne=G({__name:"Mobile",setup(fe){var p;const{data:i}=me({enabled:!((p=t.value.features)!=null&&p.nomercyConnect)}),e=H();function u(o){var d,m,f,v,g,y,b,k,P,C,h,w,I,S,M,_,N,D,T,V,A,B,U,x;const s={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:(o==null?void 0:o.filter(a=>!!a.id))??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:((d=t.value)==null?void 0:d.accessToken)||localStorage.getItem("access_token")||"",basePath:(m=ae.value)==null?void 0:m.serverBaseUrl,forceTvMode:(r("android")||r("ios"))&&!r("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||r("capacitor"),renderAhead:100,disableAutoPlayback:(f=t.value.features)==null?void 0:f.nomercyConnect};if(e.value=ce("player1").setup(s),(v=e.value)==null||v.once("back",()=>{history.state.back?l.back():l.replace("/")}),(g=t.value.features)!=null&&g.nomercyConnect){const a=new de;(y=e.value)==null||y.registerPlugin("videoNoMercyConnect",a),(b=e.value)==null||b.usePlugin("videoNoMercyConnect")}const F=new pe;(k=e.value)==null||k.registerPlugin("desktopUI",F),(P=e.value)==null||P.usePlugin("desktopUI");const K=new ue;if((C=e.value)==null||C.registerPlugin("autoSkip",K),(h=e.value)==null||h.usePlugin("autoSkip"),!((w=t.value.features)!=null&&w.nomercyConnect)){const a=new re;(I=e.value)==null||I.registerPlugin("sync",a),(S=e.value)==null||S.usePlugin("sync")}const q=new ie;(M=e.value)==null||M.registerPlugin("octopus",q),(_=e.value)==null||_.usePlugin("octopus"),(N=e.value)==null||N.once("play",()=>{var a;(a=e.value)==null||a.enterFullscreen()}),(D=e.value)==null||D.on("playlistComplete",()=>{history.state.back?l.back():l.replace("/")}),(T=e.value)==null||T.on("dispose",()=>{oe(),se(),history.state.back?l.back():l.replace("/")}),(V=e.value)==null||V.on("back",()=>{var a;(a=e.value)==null||a.dispose()}),(A=e.value)==null||A.on("play",()=>{c(!0)}),(B=e.value)==null||B.on("pause",()=>{c(!1)}),(U=e.value)==null||U.on("ready",()=>{te(),le(),L.stop()}),(x=e.value)==null||x.on("item",()=>{var a;(a=e.value)==null||a.play()}),ne.addListener("backButton",()=>{var a;(a=e.value)==null||a.emit("back-button-hyjack")})}return J(i,o=>{o!=null&&o.length&&u(o)}),Q(()=>{var o,s;L.stop(),(o=t.value.features)!=null&&o.nomercyConnect?u():(s=i.value)!=null&&s.length&&u(i.value)}),W(()=>{var o;(o=e.value)==null||o.dispose(),c(!1)}),(o,s)=>(z(),j(n(ee),null,{default:O(()=>[X(n(Y),{fullscreen:!0},{default:O(()=>[(z(),j(Z,{to:"body"},[R("div",{class:$(["absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199",{"mb-28":n(E),"mb-0":!n(E)}])},s[0]||(s[0]=[R("div",{id:"player1",class:"group nomercyplayer"},null,-1)]),2)]))]),_:1})]),_:1}))}});export{Ne as default};
