import{aG as D,bf as K,e4 as j,az as S,cb as q,aP as P,aM as G,L as T,ax as Q,aW as U,ci as W,K as m,d2 as A,j as c,o as n,a7 as $,x as z,aI as o,bS as H,a as _,c as u,bo as J,C as h,cv as g,bi as f,h as y,F as x,w as V,e5 as O,bQ as X}from"./index-DptfosSX.js";import{_ as Y}from"./MediaCard.vue_vue_type_script_setup_true_lang-DcFmEeBo.js";import{_ as Z}from"./PersonCard.vue_vue_type_script_setup_true_lang-p_gkghsJ.js";import{_ as ee,a as se}from"./EmptyCard.vue_vue_type_script_setup_true_lang-SQraGy2q.js";import"./CardIndicator.vue_vue_type_script_setup_true_lang-Bj61y0Vl.js";import"./NoResultImage.vue_vue_type_script_setup_true_lang-dUPZK-Rq.js";const oe="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",te="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",pe=D({__name:"Mobile",setup(ne){var M;const d=K(),{data:l,fetchNextPage:k,hasNextPage:w,isError:le}=j({queryKey:["libraries",(M=d.params.id??d.name)==null?void 0:M.split("&").at(0)],limit:20,keepForever:!0});S(()=>{q(),P(null),G(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),T(l,s=>{s&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const F=Q(()=>{var t,i,r,p;const s=(p=(r=(i=(t=l.value)==null?void 0:t.pages)==null?void 0:i[0])==null?void 0:r.data)==null?void 0:p[0];return s&&U.value&&s.media_type!=="person"&&s.media_type!=="genres"});W(()=>{stop(),P(null)});const C=m(),E=m();S(()=>{var s,t;E.value=d.params.id??d.name,w.value&&(((t=(s=l==null?void 0:l.value)==null?void 0:s.pages)==null?void 0:t.length)??0)<50&&k(),document.addEventListener("scrollToDiv",i=>{var r;(r=C.value)==null||r.scrollTo({top:i.detail.top-100,behavior:"smooth"})})}),A(()=>{document.dispatchEvent(new Event("indexer"))}),T(l,s=>{var t;s&&w.value&&((t=s==null?void 0:s.pages)==null?void 0:t.length)<50&&k()});const L=m(),R=m(),v=(s,t)=>{L.value=t,R.value.show(s)};return(s,t)=>(n(),c(o(X),null,{default:$(()=>[z(o(H),{fullscreen:!0,class:"ion-padding",style:{"--padding-bottom":"0"}},{default:$(()=>{var i;return[t[0]||(t[0]=_("div",{class:"fixed top-0 pt-safe w-full bg-slate-light-1 dark:bg-slate-dark-3 z-1199"},null,-1)),_("div",{ref_key:"lib",ref:C,class:"pt-safe-offset-9 flex h-auto w-full pr-8 overflow-auto scroll-container"},[(n(),u("div",{class:h(["z-0 flex flex-col gap-4 rounded-3xl border-0 w-available scrollbar-none border-auto-3",{"pb-2":o(g)&&o(f),"children:pb-4 sm:children:pb-3":!o(g)&&o(f)}]),key:(i=o(J).currentRoute.value.params)==null?void 0:i.id},[_("div",{class:h(`grid w-full gap-4 scroll-smooth music-showing:pb-0 pl-1 py-4 ${F.value?oe:te}`)},[o(l)?(n(!0),u(x,{key:0},V(o(l).pages??[],(r,p)=>{var B,I,N;return n(),u(x,{key:p},[r.data.length>0?(n(!0),u(x,{key:0},V(r.data??[],(e,b)=>(n(),u(x,null,[(e==null?void 0:e.media_type)==="tv"||(e==null?void 0:e.media_type)=="movie"||(e==null?void 0:e.media_type)=="collection"||(e==null?void 0:e.media_type)=="specials"?(n(),c(Y,{key:e.id,data:e,onContextMenu:a=>v(a,e),index:b},null,8,["data","onContextMenu","index"])):(e==null?void 0:e.media_type)==="person"?(n(),c(Z,{key:e.id+"_person",data:e,onContextMenu:a=>v(a,e),index:b},null,8,["data","onContextMenu","index"])):(e==null?void 0:e.media_type)==="genres"?(n(),c(ee,{key:e.id+"_genres",data:e,onContextMenu:a=>v(a,e),index:b},null,8,["data","onContextMenu","index"])):y("",!0)],64))),256)):((N=(I=(B=o(l).pages)==null?void 0:B[0])==null?void 0:I.data)==null?void 0:N.length)==0?(n(),c(se,{key:1})):y("",!0)],64)}),128)):y("",!0)],2)],2)),z(O,{id:E.value,class:h(["w-8 fixed right-0 bg-slate-light-1 dark:bg-slate-dark-3 transition-all duration-200",{"h-available":!o(g),"h-inherit top-24":o(g),"-mt-4 pt-4 pb-4 mb-0":!o(f),"-mt-4 pt-4 pb-4 mb-14":o(f)}])},null,8,["id","class"])],512)]}),_:1})]),_:1}))}});export{pe as default};
