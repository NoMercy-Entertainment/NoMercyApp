import"./useBaseQuery-BF4AeGAb.js";import"./useInfiniteServerClient-prY1d_ri.js";import"./useQueryClient-DvEXGR3z.js";import"./useQuery-CEd8IzP7.js";import{$a as P,$s as n,As as i,Ci as b,Ec as c,Es as h,Is as w,Rs as S,So as C,U as I,_s as T,hr as B,i as l,ks as p,os as t,pc as v,qa as x,rr as U,so as V,ta as d,uc as A,xo as D,yc as H}from"./index-H5TKJIZK.js";import{s as r}from"./imageModal-DOKb0n5s.js";import{t as N}from"./useServerClient-83J0vBrH.js";import{a as E,n as L,o as M,r as R,s as $}from"./VideoPlayer-CrsS2xy7.js";import"./buttons-Dz19tni1.js";import{t as j}from"./keyHandlerPlugin-Cr-5yXpe.js";T();var q=S({__name:"Tv",setup(z){const{data:o}=N({}),e=H();function u(a){const s={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!1,playlist:a?.filter(k=>!!k.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:d.value?.accessToken||localStorage.getItem("access_token")||"",basePath:b.value?.serverBaseUrl,forceTvMode:(t("android")||t("ios"))&&!t("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||t("capacitor"),renderAhead:10};e.value=R("player1").setup(s);const f=new E;e.value?.registerPlugin("tvUI",f),e.value?.usePlugin("tvUI");const g=new M;e.value?.registerPlugin("autoSkip",g),e.value?.usePlugin("autoSkip");const m=new j;e.value?.registerPlugin("keyHandler",m),e.value?.usePlugin("keyHandler");const y=new $;e.value?.registerPlugin("sync",y),e.value?.usePlugin("sync");const _=new L;e.value?.registerPlugin("octopus",_),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?l.back():l.replace("/")}),e.value?.on("dispose",()=>{history.state.back?l.back():l.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{r(!0)}),e.value?.on("pause",()=>{r(!1)}),x.addListener("backButton",()=>{e.value?.emit("back-button"),e.value?.emit("back-button-hyjack")})}return A(o,a=>{a?.length&&u(a)}),D(()=>{U(),I.stop(),d.value.features?.nomercyConnect?u():o.value?.length&&u(o.value)}),C(()=>{B(),e.value?.dispose(),r(!1)}),(a,s)=>(n(),i(c(V),null,{default:v(()=>[w(c(P),{fullscreen:!0},{default:v(()=>[(n(),i(h,{to:"body"},[s[0]||(s[0]=p("div",{class:"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"},[p("div",{id:"player1",class:"group nomercyplayer"})],-1))]))]),_:1})]),_:1}))}}),ee=q;export{ee as default};
