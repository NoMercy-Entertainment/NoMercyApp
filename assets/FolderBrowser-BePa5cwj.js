import{$l as i,$o as k,Cl as d,Dl as s,Hl as c,Kl as g,Wl as F,bl as t,gu as B,hl as b,kl as S,ll as V,su as o,tu as I,yu as v,zl as N}from"./index-Rmty3EhQ.js";import{t as $}from"./ScrollContainer-D9yWZpjD.js";V();var M={class:"relative mt-1 w-full"},T={class:"relative flex w-full flex-col overflow-clip h-[88%] even:text-lg"},q={class:"flex p-2 pt-4 border-b !bg-transparent text-sm select-none"},z={class:""},D={class:"mr-auto ml-4"},U={class:"relative flex w-full flex-col h-inherit"},j={class:"relative w-full h-auto"},E=["onClick"],G={class:"mr-auto !ml-7 text-sm select-none"},H=S({__name:"FolderBrowser",props:{selected:{type:String,required:!0},setSelected:{type:Function,required:!0}},setup(x){const n=x,l=o(n.selected??"/"),p=o(!1),f=o("/");i(n,e=>{l.value=e.selected}),i(l,e=>{n.setSelected(e),p.value=!1});const m=o([]),w=o(!1);function _(e){k().post("/dashboard/server/directorytree",{folder:e}).then(({data:a})=>{m.value=a.data.filter(u=>u.type==="folder"),f.value=a.data.at(0)?.full_path?.match(/[\\/]/gu)?.at(-1)??"/"}).then(()=>w.value=!1)}i(l,e=>{e&&_(e??"")});function y(){p.value=!0,l.value=l.value.split(/[/\\]/gu).slice(0,-1).join(f.value),l.value.match(/[/\\]/gu)?.length||(l.value="/")}function C(e){l.value=e.full_path}return N(()=>{_(l.value??"")}),(e,a)=>{const u=g("InputText"),h=g("MoooomIcon");return c(),d(b,null,[t("div",M,[s(u,{id:"folderName",modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=r=>l.value=r),class:"w-full",name:"","no-ring":""},null,8,["modelValue"])]),t("div",T,[t("div",q,[t("span",z,v(e.$t("Type")),1),t("span",D,v(e.$t("Name")),1)]),t("div",U,[s($,{"auto-hide":!1,static:!1,"class-name":"ml-2"},{default:I(()=>[t("div",{class:B([l.value==="/"?"opacity-50":"","bg-surface-6/4 hover:bg-surface-2 border-t-0 border-b border-solid border-[rgba(34,34,34,0.9)] contain flex items-center text-current cursor-pointer overflow-hidden py-1 px-2 align-middle h-10 min-h-10 leading-6 select-none"]),onClick:y},[s(h,{class:"mt-1 h-5 w-5",icon:"returnPackage"}),a[1]||(a[1]=t("span",{class:"mr-auto !ml-7"},"...",-1))],2),t("div",j,[(c(!0),d(b,null,F(m.value,r=>(c(),d("div",{key:r.full_path,class:"even:bg-surface-4 odd:bg-surface-2 even:hover:bg-surface-5 odd:hover:bg-surface-3 border-t-0 border-b border-solid border-[rgba(34,34,34,0.9)] contain flex items-center bg-transparent text-current cursor-pointer overflow-hidden py-1 px-2 align-middle h-10 leading-6",onClick:()=>C(r)},[s(h,{class:"h-5 w-5",icon:"folder"}),t("span",G,v(r.path.replace(/[\\\/]/u,"")),1)],8,E))),128))])]),_:1})])])],64)}}}),P=H;export{P as t};
