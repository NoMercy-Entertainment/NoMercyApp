import"./useInfiniteServerClient-ChzPawtk.js";import{$l as _,$t as w,As as i,Dl as h,Hl as c,Js as C,Qc as t,R as a,Xt as I,Z as p,an as S,ba as d,bl as v,ec as M,en as x,es as B,gu as D,hn as T,hu as o,in as A,kl as U,ll as V,mc as L,pc as N,s as r,su as z,tu as f,vl as R,xl as b}from"./index-Rmty3EhQ.js";import{t as $}from"./useServerClient-CbixTTZm.js";import{a as j,i as E,n as F,o as H,r as J}from"./VideoPlayer-BueD5ke4.js";import"./buttons-Vl3cDtNu.js";V();var O=U({__name:"Mobile",setup(Q){const{data:u}=$({}),e=z();function n(s){const l={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:s?.filter(P=>!!P.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:i.value?.accessToken||localStorage.getItem("access_token")||"",basePath:B.value?.serverBaseUrl,imageBasePath:"https://app.nomercy.tv/tmdb-images",forceTvMode:(t("android")||t("ios"))&&!t("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||t("capacitor"),renderAhead:100,disableAutoPlayback:i.value.features?.nomercyConnect};e.value=J("player1").setup(l),e.value?.once("back",()=>{history.state.back?a.back():a.replace("/")});const m=new E;e.value?.registerPlugin("desktopUI",m),e.value?.usePlugin("desktopUI");const g=new j;e.value?.registerPlugin("autoSkip",g),e.value?.usePlugin("autoSkip");const k=new H;e.value?.registerPlugin("sync",k),e.value?.usePlugin("sync");const y=new F;e.value?.registerPlugin("octopus",y),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?a.back():a.replace("/")}),e.value?.on("dispose",async()=>{await S(),await w(),history.state.back?a.back():await a.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{r(!0)}),e.value?.on("pause",()=>{r(!1)}),e.value?.on("ready",async()=>{await A(),await T(),await x(),p.stop()}),e.value?.on("item",()=>{e.value?.play()}),I.addListener("backButton",()=>{e.value?.emit("back-button-hyjack"),e.value?.dispose()})}return _(u,s=>{s?.length&&n(s)}),N(()=>{p.stop(),i.value.features?.nomercyConnect?n():u.value?.length&&n(u.value)}),L(()=>{e.value?.dispose(),r(!1)}),(s,l)=>(c(),b(o(M),null,{default:f(()=>[h(o(C),{fullscreen:!0},{default:f(()=>[(c(),b(R,{to:"body"},[v("div",{class:D([{"mb-28":o(d),"mb-0":!o(d)},"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"])},[...l[0]||(l[0]=[v("div",{id:"player1",class:"group nomercyplayer"},null,-1)])],2)]))]),_:1})]),_:1}))}}),W=O;export{W as default};
