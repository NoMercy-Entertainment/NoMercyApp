import{aw as j,o as i,c as k,a as s,e as f,h as u,v as h,aM as R,aH as ge,aB as t,ey as be,a7 as C,dw as we,F as pe,b7 as m,a_ as xe,I as P,J as H,az as ve,q as ye,b2 as D,c0 as ie,t as v,ez as ne,a6 as ke,z as $,cU as le,c3 as Se,eA as _e,eu as B,eB as E,ev as z,eC as T,ex as oe,eD as $e,eE as L,b3 as Ce,aC as re,b6 as N,b9 as de,b4 as Te,au as Ee,ba as ze,eF as ce,u as Ae,aJ as Re,aL as ue,b5 as je,bb as qe,dy as me,bc as Le}from"./index-Dez-1wXm.js";import{_ as fe}from"./BigPlayButton.vue_vue_type_script_setup_true_lang-A8gieac9.js";import{_ as Ne}from"./FavoriteImage.vue_vue_type_script_setup_true_lang-CuxtoPmY.js";import{a as he,_ as Pe}from"./BannerButton.vue_vue_type_script_setup_true_lang-Cz0qwdi1.js";const He={class:"flex gap-4 items-center py-4 px-4 sm:px-8 w-full pl-2 pr-4 sm:pr-16 h-20 z-40","data-index":"1"},Be={class:"relative hidden h-fit cursor-pointer items-center justify-center text-auto-12/11 focus-within:text-auto sm:flex mr-auto"},De=["value"],Me={class:"absolute top-2 right-2 bottom-2 flex items-center justify-center"},Oe={class:"sm:hidden sticky left-full -mt-16 top-safe-offset-6 z-1199 flex justify-center items-center gap-2 mr-4 h-auto",style:{"box-shadow":"0 1px 2px 0 rgba(16,24,40,0.05)"}},kt=j({__name:"ControlHeader",props:{data:{type:Object,required:!1},filter:{type:String,required:!0}},emits:["filter-change"],setup(e){const S=e,g=()=>{var r;m.setQueue(((r=S.data)==null?void 0:r.tracks)??[])};return(r,o)=>{var d,_;return i(),k(pe,null,[o[1]||(o[1]=s("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom bg-focus"},null,-1)),s("div",He,[(d=e.data)!=null&&d.tracks?(i(),f(fe,{key:0,data:e.data,class:"hidden sm:flex"},null,8,["data"])):u("",!0),s("div",Be,[s("input",{id:"search",value:e.filter,class:"bg-transparent border-auto-12/5 border-2 rounded-md focus-visible:!border-auto-12/9 focus-visible:text-current placeholder-current p-2",placeholder:"Filter…",type:"text",onInput:o[0]||(o[0]=a=>{var n;return r.$emit("filter-change",(n=a.target)==null?void 0:n.value)}),name:"search"},null,40,De),s("div",Me,[h(R,{icon:"searchMagnifyingGlass",class:"!w-7"})])]),h(ge,{data:e.data,color:"var(--color-focus)",class:"sm:ml-auto",className:"!w-8 !h-8"},null,8,["data"]),t(be)?(i(),f(we,{key:1,id:"add",onclick:g,class:"mr-8",label:"add"},{default:C(()=>[h(R,{icon:"add",class:"!w-7"})]),_:1})):u("",!0)]),s("div",Oe,[(_=e.data)!=null&&_.tracks?(i(),f(fe,{key:0,data:e.data},null,8,["data"])):u("",!0)])],64)}}}),Fe={class:"frosting relative mx-auto flex aspect-square -mt-4 h-amin-w-80 flex-col items-center justify-center overflow-clip rounded-xl bg-gradient-to-br min-w-64 bg-theme-7 from-theme-5 via-theme-7 to-theme-11 shadow"},Ve={key:0,class:"relative mt-2 flex w-full flex-1 flex-shrink-0 flex-col items-start justify-start gap-4 flex-grow-1 sm:hidden"},Ge=["innerHTML"],Ie={class:"text-left font-semibold uppercase text-white"},Ue={class:"relative hidden flex-1 flex-shrink-0 flex-col items-start justify-start gap-1 flex-grow-1 sm:flex"},Je={class:"text-left font-semibold uppercase text-white"},We=["innerHTML"],Ke={class:"relative flex items-center justify-start gap-2"},Qe={key:0,class:"flex items-center gap-4 text-sm font-medium"},Xe={key:0,class:"relative aspect-square h-12 w-12 overflow-clip rounded-full min-w-12"},Ye={key:1,class:"text-left text-sm font-medium text-white"},Ze={class:"text-left text-sm font-medium text-white"},et={key:2,class:"text-left text-sm font-medium text-white"},tt={class:"text-left text-sm font-medium text-white"},bt=j({__name:"ArtistHeader",props:{data:{type:Object,required:!1}},setup(e){const S=e,{t:g}=xe(),r=P(""),o=P(),d=P(),_=a=>{var n;if(a)return Se(g,((n=a==null?void 0:a.tracks)==null?void 0:n.map(c=>_e(c.duration)).reduce((c,l)=>c+l,0))??0)};return H(S,a=>{a&&(r.value=_(a.data))}),ve(()=>{r.value=_(S.data)}),H(o,a=>{if(!a)return;const n=a.getContext("2d",{willReadFrequently:!0,desynchronized:!0}),c=()=>{var p,b,w,y;const l=(b=(p=m._audioElement1)==null?void 0:p.motion)==null?void 0:b.canvas;l&&d.value&&(m._audioElement1.isPlaying()?((w=m._audioElement1)==null||w.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(d.value).backgroundColor]}),m._audioElement1.motion.gradient="theme",a.width=l.width,a.height=l.height,n.clearRect(0,0,a.width,a.height),n.drawImage(l,0,0,a.width,a.height)):m._audioElement2.isPlaying()&&((y=m._audioElement2)==null||y.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(d.value).backgroundColor]}),m._audioElement2.motion.gradient="theme",a.width=l.width,a.height=l.height,n.clearRect(0,0,a.width,a.height),n.drawImage(l,0,0,a.width,a.height))),requestAnimationFrame(c)};c()}),H(d,a=>{var n,c,l,p;!a||!((n=m._audioElement1)!=null&&n.motion)||!((c=m._audioElement2)!=null&&c.motion)||((l=m._audioElement1)==null||l.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(a).backgroundColor]}),m._audioElement1.motion.gradient="theme",(p=m._audioElement2)==null||p.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(a).backgroundColor]}),m._audioElement2.motion.gradient="theme")}),(a,n)=>{var l,p,b,w,y,x,q,M,O,F,V,G,I,U,J,W,K,Q,X,Y,Z,ee;const c=ye("RouterLink");return i(),k("div",{id:"artist-header",class:$(["relative z-0 flex flex-col items-end justify-start gap-4 px-8 text-white sm:flex-row sm:gap-9 sm:pt-12 sm:pb-8 sm:px-8",{"pt-safe-offset-12":t(le)("capacitor"),"pt-8":!t(le)("capacitor")}])},[s("div",{ref_key:"audioColor",ref:d,id:"audio-color",class:"absolute top-0 left-0 h-full w-full overflow-clip bg-focus"},null,512),n[0]||(n[0]=s("div",{class:"absolute top-0 left-0 h-full w-full overflow-clip bg-black/50"},null,-1)),s("canvas",{ref_key:"canvas",ref:o,id:"audio-visualizer",class:"absolute top-0 left-96 my-12 ml-6 mr-6 mt-full h-available w-available overflow-clip pointer-events-none"},null,512),s("div",Fe,[(l=e.data)!=null&&l.cover?(i(),f(D,{key:0,id:"image",data:e.data,size:250,className:"aspect-square h-amin-w-80 rounded-xl min-w-80",loading:"eager"},null,8,["data"])):(p=e.data)!=null&&p.id?(i(),f(Ne,{key:1,id:e.data.id,type:e.data.type,class:"aspect-square h-amin-w-80 rounded-xl min-w-80"},null,8,["id","type"])):u("",!0)]),(b=e.data)!=null&&b.name?(i(),k("div",Ve,[s("div",{class:"w-full text-2xl font-semibold line-clamp-1 leading-[130%] whitespace-pre",innerHTML:t(ie)(((w=e.data)==null?void 0:w.name)??"Songs you like","text-sm line-clamp-1")},null,8,Ge),s("p",Ie,v((x=(y=e.data)==null?void 0:y.type)==null?void 0:x.replace(/s$/u,"")),1)])):u("",!0),s("div",Ue,[s("p",Je,v((M=(q=e.data)==null?void 0:q.type)==null?void 0:M.replace(/s$/u,"")),1),s("div",{class:"w-full text-5xl font-semibold line-clamp-2 leading-[130%] whitespace-pre",innerHTML:t(ie)(((O=e.data)==null?void 0:O.name)??"Songs you like","ml-2 text-2xl line-clamp-1")},null,8,We),s("div",Ke,[t(ne)?(i(),k("div",Qe,[((V=(F=e.data)==null?void 0:F.artists)==null?void 0:V.length)==1&&((I=(G=e.data)==null?void 0:G.artists)!=null&&I[0].cover)?(i(),k("div",Xe,[h(D,{id:"image",data:(J=(U=e.data)==null?void 0:U.artists)==null?void 0:J[0],size:250,className:"h-full w-full",loading:"eager"},null,8,["data"])])):u("",!0),h(c,{to:((K=(W=e.data)==null?void 0:W.artists)==null?void 0:K[0].link)??"#",class:"text-sm empty:hidden"},{default:C(()=>{var te,ae,se;return[ke(v(((se=(ae=(te=e.data)==null?void 0:te.artists)==null?void 0:ae[0])==null?void 0:se.name)??"Various artists"),1)]}),_:1},8,["to"])])):u("",!0),(Q=e.data)!=null&&Q.tracks&&t(ne)?(i(),k("p",Ye,"•")):u("",!0),s("p",Ze,v((Y=(X=e.data)==null?void 0:X.tracks)==null?void 0:Y.length)+" "+v(((ee=(Z=e.data)==null?void 0:Z.tracks)==null?void 0:ee.length)==1?t(g)("song"):t(g)("songs")),1),r.value?(i(),k("p",et,"•")):u("",!0),s("p",tt,v(r.value),1)])])],2)}}}),at=["onclick"],st={class:""},A=j({__name:"SortButton",props:{name:{type:String,required:!0},sortingType:{type:String,required:!0},iconSpacer:{type:String,default:""}},setup(e){const{t:S}=xe(),g=o=>{console.log("handleSortChange",o),z.value==o?oe(B.value==E.asc?E.desc:E.asc):oe(E.asc),$e(o)},r=o=>{var _,a,n,c,l,p,b,w;const d=o.target;if(o.key=="ArrowUp"){const y=(a=(_=d.parentElement)==null?void 0:_.parentElement)==null?void 0:a.previousElementSibling;y&&y.nodeName=="BUTTON"||y.nodeName=="A"?y.focus():(n=document.querySelector("#playList"))==null||n.focus()}else o.key=="ArrowDown"?(p=(l=(c=d.parentElement)==null?void 0:c.parentElement)==null?void 0:l.nextElementSibling)==null||p.focus():o.key=="ArrowLeft"?(b=d.previousElementSibling)==null||b.focus():o.key=="ArrowRight"&&((w=d.nextElementSibling)==null||w.focus())};return(o,d)=>(i(),k("button",{class:"relative cursor-pointer items-center text-contrast focus-visible:underline focus-visible:underline-offset-2",onclick:()=>g(e.sortingType),onkeyup:r},[s("span",st,v(t(S)(e.name)),1),t(B)==t(E).asc&&t(z)==e.sortingType&&t(z)!=t(T).index?(i(),f(R,{key:0,icon:"chevronUp",class:$(`w-6 h-6 ${e.iconSpacer}`)},null,8,["class"])):t(B)==t(E).desc&&t(z)==e.sortingType&&t(z)!=t(T).index?(i(),f(R,{key:1,icon:"chevronDown",class:$(`w-6 h-6 ${e.iconSpacer}`)},null,8,["class"])):u("",!0)],8,at))}}),it={id:"sortHeaderElement",class:"sticky top-safe-offset-10 -mx-4 px-4 z-30 my-2 block h-10 content-center items-center justify-start self-stretch bg-transparent text-sm font-medium transition-transform duration-500 w-available -mt-0.5 group/track sm:w-available sm:-top-px",tabindex:"0"},wt=j({__name:"SortHeader",setup(e){return(S,g)=>(i(),k("div",it,[g[0]||(g[0]=s("span",{id:"sorterChild",class:"absolute inset-0 h-10 sm:rounded-t-2xl overflow-clip w-full transition-transform duration-500"},null,-1)),s("span",{class:$([{"album-grid":t(L),"artist-grid":!t(L)},"grid justify-start items-center self-stretch pr-3 sm:px-3 rounded-lg sm:hover:bg-slate-lightA-6 dark:hover:bg-slate-darkA-6 text-auto-12 group/track text-sm font-medium py-2 z-0 group/track gap-2"])},[h(A,{id:"sortIndex",sortingType:t(T).index,class:"!flex justify-center",iconSpacer:"absolute left-6",name:"#"},null,8,["sortingType"]),h(A,{sortingType:t(T).name,class:"flex sm:flex",iconSpacer:"w-6 h-6",name:"Title"},null,8,["sortingType"]),h(A,{sortingType:t(T).album,class:$([{"opacity-0":!t(L),"opacity-100":t(L)},"!hidden sm:!flex"]),iconSpacer:"w-6 h-6",name:"Album"},null,8,["sortingType","class"]),h(A,{name:"Release date",sortingType:t(T).date,class:"!hidden sm:!flex",iconSpacer:"w-6 h-6"},null,8,["sortingType"]),h(A,{sortingType:t(T).duration,class:"!hidden sm:!flex gap-2 flex-row-reverse pr-[4.5rem]",iconSpacer:"w-6 h-6",name:"Duration"},null,8,["sortingType"])],2)]))}}),nt=["data-track-id"],lt={class:"flex justify-center text-center"},ot={key:0,class:"group-focus-visible/track:sm:hidden group-hover/track:sm:hidden"},rt={class:"flex h-12 items-center gap-2 overflow-hidden w-available sm:gap-4"},dt={class:"flex h-full flex-col justify-evenly overflow-clip w-inherit"},ct={class:"flex h-6 flex-nowrap overflow-clip text-left line-clamp-1 w-inherit tracking-wide leading-6"},ut=["data-size"],mt={class:"flex whitespace-nowrap"},ft={class:"hidden sm:flex invisible max-h-12 md:visible"},ht={class:"hidden sm:flex mr-4 monospace sm:mr-0"},vt=j({__name:"TrackRow",props:{data:{type:Object,required:!0},index:{type:Number,required:!0},displayList:{type:Array,required:!0}},setup(e){const S=e,g=Ce(),r=re(()=>g.path.startsWith("/music/album")),o=re(()=>g.path.startsWith("/music/artist")),d=()=>{Le(g.fullPath)},_=()=>{N.value||d(),m.playTrack(S.data,S.displayList)};return(a,n)=>{var l,p,b,w,y;const c=ye("RouterLink");return i(),k("button",{"data-track-id":(l=e.data)==null?void 0:l.id,onclick:_,onContextmenu:n[1]||(n[1]=x=>t(qe)(x,e.data)),class:$(["grid justify-start children:pointer-events-none items-center self-stretch text-auto-12 pr-3 sm:px-3 rounded-lg sm:hover:bg-slate-lightA-6 dark:sm:hover:bg-slate-darkA-6 group/track text-sm font-medium py-2 z-10",{"album-grid":r.value,"artist-grid":!r.value}]),"data-target":"track",tabindex:"0"},[s("span",lt,[((p=t(N))==null?void 0:p.id)!=e.data.id?(i(),k("span",ot,v(e.index+1),1)):u("",!0),((b=t(N))==null?void 0:b.id)==e.data.id?(i(),f(Te,{key:1,color:"rgb(var(--color-focus))",playing:t(de),class:"hidden group-focus-visible/track:sm:!hidden group-hover/track:sm:!hidden"},null,8,["playing"])):u("",!0),((w=t(N))==null?void 0:w.id)==e.data.id&&t(de)?(i(),f(me,{key:2,icon:"nmPause",class:"hidden h-6 w-6 group-focus-visible/track:sm:block group-hover/track:sm:block"})):(i(),f(me,{key:3,icon:"nmPlay",class:"hidden h-6 w-6 group-focus-visible/track:sm:block group-hover/track:sm:block"}))]),s("span",rt,[r.value?(i(),f(D,{key:0,data:e.data,size:100,style:Ee({display:r.value?"none":""}),className:"relative hidden h-12 w-12 overflow-hidden min-w-[3rem] sm:block",loading:"eager"},null,8,["data","style"])):u("",!0),s("span",dt,[s("span",ct,v(e.data.name),1),s("span",{"data-size":t(ze),class:"inline-flex h-6 w-available gap-1 overflow-hidden whitespace-nowrap text-slate-light-3 dark:slate-dark-3 line-clamp-1 text-2xs hover:animate-pause leading-6"},[h(ce,null,{default:C(()=>[e.data&&!o.value?(i(),f(he,{key:0,id:e.data.id,data:e.data.artist_track,onclick:x=>x.stopPropagation(),"data-target":"artist",type:"artists"},null,8,["id","data","onclick"])):u("",!0),e.data&&!r.value?(i(),f(he,{key:1,id:e.data.id,data:e.data.album_track,onclick:x=>x.stopPropagation(),"data-target":"album",type:"albums"},null,8,["id","data","onclick"])):u("",!0)]),_:1})],8,ut)])]),(i(!0),k(pe,null,Ae(e.data.album_track,x=>(i(),k("span",{key:x.id,class:$(["hidden items-center overflow-clip pr-2 line-clamp-2 h-inherit w-inherit sm:flex",{"opacity-0":!r.value,"opacity-100":r.value}]),onClick:n[0]||(n[0]=q=>q.stopPropagation())},[h(c,{to:x==null?void 0:x.link,tabindex:"0","data-target":"album",class:"flex items-center gap-1 whitespace-nowrap text-xs line-clamp-1 hover:underline focus:underline dark:font-medium text-slate-light-12/12 dark:text-slate-dark-12"},{default:C(()=>[s("span",mt,[h(ce,{text:x.name},null,8,["text"])])]),_:2},1032,["to"])],2))),128)),s("span",ft,v(new Date((y=e.data)==null?void 0:y.date).toLocaleDateString(t(Re).language??"en-US",{year:"numeric",month:"short",day:"2-digit"})),1),s("span",{class:$(["flex items-center justify-end gap-2 text-end",{"mr-6":!t(ue)}])},[(i(),f(ge,{key:e.data.id,data:e.data,color:"var(--color-focus)"},null,8,["data"])),s("span",ht,v(e.data.duration),1),t(ue)?(i(),f(je,{key:0,direction:"down"},{button:C(()=>[h(Pe,{class:"",title:""},{default:C(()=>[h(R,{className:"relative h-5 w-5",icon:"menuDotsVertical"})]),_:1})]),default:C(()=>[n[2]||(n[2]=ke(" Hellooo "))]),_:1})):u("",!0)],2)],42,nt)}}});export{bt as _,kt as a,wt as b,vt as c};
//# sourceMappingURL=TrackRow.vue_vue_type_script_setup_true_lang-xyz0XkU9.js.map
