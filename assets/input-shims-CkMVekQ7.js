import{Ao as b,Ho as C,Io as P,Oo as T,Ro as q,Vo as z,_o as G,cc as W,go as j,ho as V,ko as J,mo as Q,po as X,vo as Z,yo as E,zo as ee}from"./index-vyVLvOi8.js";var A,D,R,k,O,te,N,oe,H,F,$,U,M,_,x,y,p,Y,I,B,se,re,ie=W({"node_modules/@ionic/core/components/input-shims.js":(()=>{J(),Z(),ee(),V(),A=new WeakMap,D=(e,o,t,s=0,r=!1)=>{A.has(e)!==t&&(t?k(e,o,s,r):O(e,o))},R=e=>e===e.getRootNode().activeElement,k=(e,o,t,s=!1)=>{const r=o.parentNode,i=o.cloneNode(!1);i.classList.add("cloned-input"),i.tabIndex=-1,s&&(i.disabled=!0),r.appendChild(i),A.set(e,i);const a=e.ownerDocument.dir==="rtl"?9999:-9999;e.style.pointerEvents="none",o.style.transform=`translate3d(${a}px,${t}px,0) scale(0)`},O=(e,o)=>{const t=A.get(e);t&&(A.delete(e),t.remove()),e.style.pointerEvents="",o.style.transform=""},te=50,N=(e,o,t)=>{if(!t||!o)return()=>{};const s=c=>{R(o)&&D(e,o,c)},r=()=>D(e,o,!1),i=()=>s(!0),a=()=>s(!1);return P(t,"ionScrollStart",i),P(t,"ionScrollEnd",a),o.addEventListener("blur",r),()=>{C(t,"ionScrollStart",i),C(t,"ionScrollEnd",a),o.removeEventListener("blur",r)}},oe="input, textarea, [no-blur], [contenteditable]",H=()=>{let e=!0,o=!1;const t=document,s=()=>{o=!0},r=()=>{e=!0},i=a=>{if(o){o=!1;return}const c=t.activeElement;if(!c||c.matches("input, textarea, [no-blur], [contenteditable]"))return;const f=a.target;f!==c&&(f.matches("input, textarea, [no-blur], [contenteditable]")||f.closest("input, textarea, [no-blur], [contenteditable]")||(e=!1,setTimeout(()=>{e||c.blur()},50)))};return P(t,"ionScrollStart",s),t.addEventListener("focusin",r,!0),t.addEventListener("touchend",i,!1),()=>{C(t,"ionScrollStart",s,!0),t.removeEventListener("focusin",r,!0),t.removeEventListener("touchend",i,!1)}},F=.3,$=(e,o,t,s)=>{var r;const i=(r=e.closest("ion-item,[ion-item]"))!==null&&r!==void 0?r:e;return U(i.getBoundingClientRect(),o.getBoundingClientRect(),t,s)},U=(e,o,t,s)=>{const r=e.top,i=e.bottom,a=o.top,c=Math.min(o.bottom,s-t),f=a+15,d=c-50-i,u=f-r,l=Math.round(d<0?-d:u>0?-u:0),v=Math.min(l,r-a),S=Math.abs(v)/F;return{scrollAmount:v,scrollDuration:Math.min(400,Math.max(150,S)),scrollPadding:t,inputSafeY:-(r-f)+4}},M="$ionPaddingTimer",_=(e,o,t)=>{const s=e[M];s&&clearTimeout(s),o>0?e.style.setProperty("--keyboard-offset",`${o}px`):e[M]=setTimeout(()=>{e.style.setProperty("--keyboard-offset","0px"),t&&t()},120)},x=(e,o,t)=>{const s=()=>{o&&_(o,0,t)};e.addEventListener("focusout",s,{once:!0})},y=0,p="data-ionic-skip-scroll-assist",Y=(e,o,t,s,r,i,a,c=!1)=>{const f=i&&(a===void 0||a.mode===Q.None);let d=!1;const u=b!==void 0?b.innerHeight:0,l=m=>{if(d===!1){d=!0;return}B(e,o,t,s,m.detail.keyboardHeight,f,c,u,!1)},v=()=>{d=!1,b===null||b===void 0||b.removeEventListener("ionKeyboardDidShow",l),e.removeEventListener("focusout",v)},S=async()=>{if(o.hasAttribute("data-ionic-skip-scroll-assist")){o.removeAttribute(p);return}B(e,o,t,s,r,f,c,u),b===null||b===void 0||b.addEventListener("ionKeyboardDidShow",l),e.addEventListener("focusout",v)};return e.addEventListener("focusin",S),()=>{e.removeEventListener("focusin",S),b===null||b===void 0||b.removeEventListener("ionKeyboardDidShow",l),e.removeEventListener("focusout",v)}},I=e=>{var o;if(document.activeElement===e)return;const t=e.getAttribute("id"),s=e.closest(`label[for="${t}"]`),r=(o=document.activeElement)===null||o===void 0?void 0:o.closest(`label[for="${t}"]`);s!==null&&s===r||(e.setAttribute(p,"true"),e.focus())},B=async(e,o,t,s,r,i,a=!1,c=0,f=!0)=>{if(!t&&!s)return;const d=$(e,t||s,r,c);if(t&&Math.abs(d.scrollAmount)<4){I(o),i&&t!==null&&(_(t,y),x(o,t,()=>y=0));return}if(D(e,o,!0,d.inputSafeY,a),I(o),z(()=>e.click()),i&&t&&(y=d.scrollPadding,_(t,y)),typeof window<"u"){let u;const l=async()=>{u!==void 0&&clearTimeout(u),window.removeEventListener("ionKeyboardDidShow",v),window.removeEventListener("ionKeyboardDidShow",l),t&&await E(t,0,d.scrollAmount,d.scrollDuration),D(e,o,!1,d.inputSafeY),I(o),i&&x(o,t,()=>y=0)},v=()=>{window.removeEventListener("ionKeyboardDidShow",v),window.addEventListener("ionKeyboardDidShow",l)};if(t){const S=await G(t),m=S.scrollHeight-S.clientHeight;if(f&&d.scrollAmount>m-S.scrollTop){o.type==="password"?(d.scrollAmount+=50,window.addEventListener("ionKeyboardDidShow",v)):window.addEventListener("ionKeyboardDidShow",l),u=setTimeout(l,1e3);return}}l()}},se=!0,re=async(e,o)=>{if(T===void 0)return;const t=o==="ios",s=o==="android",r=e.getNumber("keyboardHeight",290),i=e.getBoolean("scrollAssist",!0),a=e.getBoolean("hideCaretOnScroll",t),c=e.getBoolean("inputBlurring",!1),f=e.getBoolean("scrollPadding",!0),d=Array.from(T.querySelectorAll("ion-input, ion-textarea")),u=new WeakMap,l=new WeakMap,v=await X.getResizeMode(),S=async n=>{await new Promise(g=>q(n,g));const h=n.shadowRoot||n,L=h.querySelector("input")||h.querySelector("textarea"),w=j(n),K=w?null:n.closest("ion-footer");if(L){if(w&&a&&!u.has(n)){const g=N(n,L,w);u.set(n,g)}if(!(L.type==="date"||L.type==="datetime-local")&&(w||K)&&i&&!l.has(n)){const g=Y(n,L,w,K,r,f,v,s);l.set(n,g)}}},m=n=>{if(a){const h=u.get(n);h&&h(),u.delete(n)}if(i){const h=l.get(n);h&&h(),l.delete(n)}};c&&H();for(const n of d)S(n);T.addEventListener("ionInputDidLoad",n=>{S(n.detail)}),T.addEventListener("ionInputDidUnload",n=>{m(n.detail)})}})});ie();export{re as startInputShims};
