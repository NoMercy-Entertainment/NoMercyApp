import{h as W,aq as z,ag as Y,c as C,ai as L,ar as U,af as P,n as E,as as F,u as N,j as h,m as V,o as Z,at as I,au as j,av as X,aw as Q,ax as ee,ay as te,a8 as ae,az as se,aA as le}from"./index-Dn_937tb.js";import{M as K}from"./icons-BW5E66pf.js";import{_ as oe}from"./ScrollContainer.vue_vue_type_script_setup_true_lang-BB404_Fy.js";import{A as re}from"./AppLogoSquare-SBkWJ8F3.js";import{$ as q,d as H,C as B,h as p,o as r,H as T,t as G,i as a,y as _,j as ne,b as w,a0 as s,c as v,v as x,l as $,F as S,p as D,q as M,J as O}from"./vue-ionic-Ct1zWn9G.js";import{_ as y}from"./OptimizedIcon.vue_vue_type_script_setup_true_lang-DUdofUmv.js";import{_ as A}from"./MusicButton.vue_vue_type_script_setup_true_lang-DeR7MPOR.js";import{_ as ie}from"./PlayerIcon.vue_vue_type_script_setup_true_lang-CIj2WHxJ.js";import{d as ce}from"./imageModal-gwGEKhqd.js";const ue=["srcset"],de=["srcset"],fe=["srcset"],pe=["id","src","alt","loading","data-id","onfocus"],me={key:1,class:"inset-0 grid aspect-video h-full w-full place-items-center bg-black p-2 place-center"},he={class:"w-full h-full inset-0 grid place-items-center place-center bg-[rgb(var(--color-logo-dark)/20%)]"},J=q({__name:"CoverImage",props:{data:{type:Object,required:!1},className:{type:String,required:!1,default:""},disableGradient:{type:Boolean,required:!1,default:!1},style:{type:Object,required:!1,default:()=>({})},id:{type:String,required:!1,default:""},loading:{type:String,required:!1,default:"lazy"},onload:{type:Function,required:!1},handleFocus:{type:Function,required:!1},size:{type:Number,required:!1,default:500},colorPalette:{type:Object,required:!1}},setup(f){const c=f,o=H(!1),t=H(0),n=B(()=>{var l,d;return`${(l=W.value)==null?void 0:l.serverBaseUrl}${(d=c.data)==null?void 0:d.cover}`});function u(l){var d,m;(m=(d=l.target)==null?void 0:d.parentNode)==null||m.children[0].remove(),o.value=!0}function e(){t.value=1}function i(){t.value=0}const b=B(()=>{var l,d,m,g;return{"--c-1":"rgb(var(--color-focus))","--c-2":"rgb(var(--color-focus) / 3%)","--c-3":"rgb(var(--color-focus) / 14%)","--c-4":"rgb(var(--color-focus) / 1%)",backgroundImage:c.disableGradient||!Y?c.disableGradient?"":`
                    radial-gradient(
                        farthest-corner at top left,
                                rgb(var(--color-theme-9)),
                                hsl(0 0% 100% / 4%) 300px
                            ),
                            radial-gradient(
                                farthest-corner at top right,
                                rgb(var(--color-theme-2)),
                                hsl(0 0% 100% / 4%) 300px
                            ),
                            radial-gradient(
                                farthest-corner at bottom left,
                                rgb(var(--color-theme-6)),
                                hsl(0 0% 100% / 4%)
                            ),
                            radial-gradient(
                                farthest-corner at bottom right,
                                rgb(var(--color-theme-12)),
                        hsl(0 0% 100% / 4%) 300px
                    )
                `:`
				radial-gradient(
					farthest-corner at top left,
							${z((l=c.colorPalette)==null?void 0:l.lightVibrant,30)??"var(--c-1)"},
							hsl(0 0% 100% / 4%) 300px
						),
						radial-gradient(
							farthest-corner at top right,
							${z((d=c.colorPalette)==null?void 0:d.lightMuted,30)??"var(--c-2)"},
							hsl(0 0% 100% / 4%) 300px
						),
						radial-gradient(
							farthest-corner at bottom left,
							${z((m=c.colorPalette)==null?void 0:m.primary,30)??"var(--c-3)"},
							hsl(0 0% 100% / 4%)
						),
						radial-gradient(
							farthest-corner at bottom right,
							${z((g=c.colorPalette)==null?void 0:g.darkMuted,30)??"var(--c-4)"},
					hsl(0 0% 100% / 4%) 300px
				)
			`}});return(l,d)=>{var m,g,k;return r(),p("div",{class:G(`${f.className} aspect-square`),style:T(b.value)},[(m=f.data)!=null&&m.cover?(r(),p("picture",{key:0,class:"aspect-square inset-0 !absolute top-0 overflow-clip z-10 h-available w-available object-cover transition-all duration-200",style:T(`opacity: ${t.value};`)},[a("source",{srcset:`${n.value}?width=300&type=avif 1x`,type:"image/avif"},null,8,ue),a("source",{srcset:`${n.value}?width=${f.size??500}&type=webp 1x`,type:"image/webp"},null,8,de),a("source",{srcset:`${n.value}?width=${f.size??500}&type=jpg 1x`,type:"image/jpeg"},null,8,fe),a("img",{id:f.id,src:n.value,alt:`cover image for ${((g=f.data)==null?void 0:g.name)??"image"}`,class:"aspect-square !absolute top-0 z-10 h-available w-available object-cover",loading:f.loading,crossorigin:"anonymous","data-id":(k=f.data)==null?void 0:k.id,onfocus:f.handleFocus,onload:e,onloadstart:i,onerror:u},null,8,pe)],4)):(r(),p("div",me,[a("div",he,[_(re,{class:"h-auto w-3/5"})])]))],6)}}}),_e=["data-open","inert","data-size"],ve={key:0,id:"queue_container",class:"flex w-full flex-col px-4 pt-4 pr-0 h-available overflow-clip"},be={class:"flex w-full items-center justify-between p-2 pr-6"},ye={class:"text-lg font-semibold"},xe={class:"flex h-auto w-full items-center justify-start gap-2 rounded-lg px-2 py-2 hover:bg-auto-3/50"},we={class:"relative aspect-square h-auto w-14 cursor-pointer overflow-hidden rounded-md text-theme-4"},ge={class:"relative flex flex-col items-start justify-start gap-1"},ke={class:"w-full flex-shrink-0 font-semibold self-stretch-0 text-left"},$e={class:"mb-1 inline-flex h-6 gap-1 overflow-hidden whitespace-nowrap text-xs w-available line-clamp-1 hover-animate-pause"},qe={"data-marquee":"container",class:"-ml-1 w-available"},Ce={"data-marquee":"scroller",class:"ml-1 flex w-fit flex-nowrap gap-1 text-xs line-clamp-1 whitespace-break-spaces hover-animate-pause w-available h-available"},je={class:"flex w-fit flex-wrap gap-1 whitespace-wrap line-clamp-2 h-inherit"},Se={class:"flex items-center gap-1 leading-none line-clamp-2"},ze={class:"mt-2 mb-1 flex w-full items-center justify-between px-2"},Pe={class:"text-lg font-semibold"},Me={class:"flex w-full flex-col items-start justify-start gap-4 pb-4 relative overflow-hidden h-available"},Oe=["onClick"],Be={class:"relative aspect-square h-auto w-14 cursor-pointer overflow-hidden rounded-md text-theme-4"},De={class:"relative flex flex-col items-start justify-start gap-1"},Ne={class:"w-full flex-shrink-0 font-semibold self-stretch-0 text-left"},Ae={class:"mb-1 inline-flex h-6 gap-1 overflow-hidden whitespace-nowrap text-xs w-available line-clamp-1 hover-animate-pause"},Le={"data-marquee":"container",class:"-ml-1 w-available"},Fe={"data-marquee":"scroller",class:"ml-1 flex w-fit flex-nowrap gap-1 text-xs line-clamp-1 whitespace-break-spaces hover-animate-pause w-available h-available"},Ie={class:"flex w-fit flex-wrap gap-1 whitespace-wrap line-clamp-2 h-inherit"},Qe=["textContent"],nt=q({__name:"QueueOverlay",setup(f){function c(o){var n,u,e,i,b,l;if(!P.value)return;const t=`${(n=o.type)==null?void 0:n.replace(/s$/u,"")}/${o.id}`;if(!((u=N.value.features)!=null&&u.nomercyConnect)&&(h.addToBackLog(h.currentSong),((e=h._queue)==null?void 0:e.length)>0)){let d=h._queue[0];if(h._shuffle){const m=Math.round(Math.random()*(h._queue.length-1));d=h._queue[m]}h.setCurrentSong(d),h.removeFromQueue(d);return}if((l=V.value)==null||l.invoke("StartPlaybackCommand",o.type.replace(/s$/u,""),o.id,(b=(i=P.value)==null?void 0:i.at(0))==null?void 0:b.id),L.value===t){h.togglePlayback();return}h.playTrack(o,P.value),Z(t)}return(o,t)=>{var u,e,i,b;const n=ne("RouterLink");return r(),p("div",{"data-open":s(F),inert:!s(F),"data-size":s(E),class:"absolute right-4 top-safe-offset-4 bottom-8 data-[open='true']:full:bottom-28 data-[open='true']:compact:bottom-16 sm:data-[open='true']:full:bottom-4 sm:data-[open='true']:compact:bottom-4 sm:bottom-4 overflow-clip w-available ml-4 sm:w-1/3 bg-slate-light-3 dark:bg-slate-dark-1 flex items-center justify-center rounded-lg transition-all duration-500 border-2 border-focus data-[open='false']:translate-x-[150%] z-[29999]"},[t[2]||(t[2]=a("div",{class:"pointer-events-none absolute inset-0 flex items-center justify-center rounded-lg opacity-60 bg-auto-3/40"},null,-1)),s(C)?(r(),p("div",ve,[a("div",be,[a("p",ye,x(o.$t("Now Playing")),1),s(L)?(r(),v(n,{key:0,to:`/music/${s(L)}`,class:"text-sm font-semibold flex gap-1 items-center hover:underline underline-offset-2"},{default:$(()=>[a("span",null,x(o.$t("View Playlist")),1),_(y,{icon:s(K).shareSquare,"class-name":"w-4 h-4"},null,8,["icon"])]),_:1},8,["to"])):w("",!0)]),a("div",xe,[a("div",we,[s(C)?(r(),v(J,{key:0,data:s(C)},null,8,["data"])):w("",!0)]),a("div",ge,[a("p",ke,x((u=s(C))==null?void 0:u.name),1),a("div",$e,[a("div",qe,[a("div",Ce,[a("span",je,[_(n,{to:((b=(i=(e=s(C))==null?void 0:e.artist_track)==null?void 0:i[0])==null?void 0:b.link)??"#",class:"flex gap-1 whitespace-nowrap text-xs font-semibold line-clamp-2 h-inherit hover:underline focus:underline dark:font-medium",tabindex:"0",onClick:t[0]||(t[0]=l=>s(U)(l))},{default:$(()=>{var l,d,m;return[a("span",Se,x((m=(d=(l=s(C))==null?void 0:l.artist_track)==null?void 0:d[0])==null?void 0:m.name),1)]}),_:1},8,["to"])])])])])])]),a("div",ze,[a("p",Pe,x(o.$t("Queue")),1)]),a("div",Me,[_(oe,{"auto-hide":!0,static:!1},{default:$(()=>[(r(!0),p(S,null,D(s(P),l=>{var d,m,g;return r(),p(S,{key:l==null?void 0:l.id},[l.id!==((d=s(C))==null?void 0:d.id)?(r(),p("button",{key:0,class:"flex h-auto w-full items-center justify-start gap-2 rounded-lg p-2 hover:bg-auto-3/50",onClick:k=>c(l)},[a("div",Be,[l?(r(),v(J,{key:0,data:l},null,8,["data"])):w("",!0)]),a("div",De,[a("p",Ne,x(l==null?void 0:l.name),1),a("div",Ae,[a("div",Le,[a("div",Fe,[a("span",Ie,[_(n,{to:((g=(m=l==null?void 0:l.artist_track)==null?void 0:m[0])==null?void 0:g.link)??"#",class:"flex gap-1 whitespace-nowrap text-xs font-semibold line-clamp-2 h-inherit hover:underline focus:underline dark:font-medium",tabindex:"0",onClick:t[1]||(t[1]=k=>s(U)(k))},{default:$(()=>{var k,R;return[a("span",{class:"flex items-center gap-1 leading-none line-clamp-2",textContent:x((R=(k=l==null?void 0:l.artist_track)==null?void 0:k[0])==null?void 0:R.name)},null,8,Qe)]}),_:2},1032,["to"])])])])])])],8,Oe)):w("",!0)],64)}),128))]),_:1})])])):w("",!0)],8,_e)}}}),Te=["data-open","inert","data-size"],Ee={id:"devices_container",class:"flex h-full w-full flex-col justify-center gap-2 overflow-auto tv:overflow-clip p-2 scrollbar-none"},Ve=["onClick"],Ge={class:"flex justify-center items-center w-10 h-10 rounded-full"},Re={class:"flex justify-center items-center w-10 h-10 rounded-full"},Ue={class:"flex justify-center items-center w-10 h-10 rounded-full"},He={class:"flex justify-center items-center w-10 h-10 rounded-full"},Je={class:"flex w-full flex-col gap-1"},Xe={class:"w-full font-semibold leading-none text-md line-clamp-1"},it=q({__name:"DeviceOverlay",setup(f){function c(t){var n;t.device_id!==j.value&&((n=V.value)==null||n.invoke("ChangeDeviceCommand",t.device_id).then(()=>{console.log("Switched to device:",t.device_id)}).catch(u=>{console.error("Error switching device:",u)}))}const o=B(()=>I.value.find(t=>t.device_id===j.value));return(t,n)=>{var u;return(u=s(N).features)!=null&&u.nomercyConnect?(r(),p("div",{key:0,"data-open":s(Q),inert:!s(Q),"data-size":s(E),class:"absolute left-4 sm:left-auto right-4 top-auto -bottom-8 data-[open='true']:full:bottom-28 data-[open='true']:compact:bottom-16 sm:data-[open='true']:full:bottom-4 sm:data-[open='true']:compact:bottom-4 sm:bottom-4 w-available sm:w-1/4 bg-slate-light-3 dark:bg-slate-dark-1 flex items-center justify-center rounded-lg transition-all duration-500 border-2 border-focus data-[open='false']:translate-y-[200%] z-[29999] text-left"},[n[0]||(n[0]=a("div",{class:"pointer-events-none absolute inset-0 flex items-center justify-center rounded-lg opacity-60 bg-auto-3/40"},null,-1)),a("div",Ee,[(r(!0),p(S,null,D(s(I).toSorted((e,i)=>((e==null?void 0:e.custom_name)??(e==null?void 0:e.name)).localeCompare((i==null?void 0:i.custom_name)??(i==null?void 0:i.name))),e=>(r(),p("button",{key:e==null?void 0:e.id,class:G(["flex w-full items-center justify-between gap-2 px-2 py-1 rounded-md focus-visible:bg-[#3f3f3f] transition-all duration-200 text-left",{"bg-[#2f2f2f]":s(j)===(e==null?void 0:e.device_id)}]),style:T(s(j)===(e==null?void 0:e.device_id)&&"color: hsl(from rgb(var(--color-focus)) h s calc(l + 25))"),onClick:i=>{var b;return((b=o.value)==null?void 0:b.device_id)!==e.device_id&&c(e)}},[M(a("div",Ge,[_(y,{icon:"laptop","class-name":"w-7 text-auto-12"})],512),[[O,e.type==="web"]]),M(a("div",Re,[_(y,{icon:"monitor","class-name":"w-7 text-auto-12"})],512),[[O,e.type==="desktop"]]),M(a("div",Ue,[_(y,{icon:"mobilePhone","class-name":"w-7 text-auto-12"})],512),[[O,e.type==="android"||e.type==="ios"||e.type==="tablet"]]),M(a("div",He,[_(y,{icon:"tv","class-name":"w-7 text-auto-12"})],512),[[O,e.type==="tv"]]),a("div",Je,[a("p",Xe,x(s(X)===(e==null?void 0:e.device_id)?t.$t("This device"):(e==null?void 0:e.custom_name)??(e==null?void 0:e.name)),1)])],14,Ve))),128))])],8,Te)):w("",!0)}}}),Ke=["data-size"],ct=q({__name:"DeviceButton",props:{noName:{type:Boolean,default:!1}},setup(f){function c(t){t.stopPropagation(),ee()}const o=B(()=>I.value.find(t=>t.device_id===j.value));return(t,n)=>{var u;return(u=s(N).features)!=null&&u.nomercyConnect?(r(),v(A,{key:0,"data-target":"devices",label:"Playing on this device",onclick:c,class:"flex gap-2 items-center flex-nowrap","data-current_device":s(j)},{default:$(()=>{var e,i;return[s(Q)?(r(),v(y,{key:0,icon:"devices",class:"h-6 w-6 text-focus"})):(r(),v(y,{key:1,icon:"devices",class:"h-6 w-6"})),f.noName?w("",!0):(r(),p("p",{key:2,"data-size":s(E),class:"text-auto-900 flex sm:hidden compact:hidden pointer-events-none !text-sm min-w-full whitespace-nowrap pl-2 max-w-72"},x(s(j)===s(X)?t.$t("This device"):((e=o.value)==null?void 0:e.custom_name)??((i=o.value)==null?void 0:i.name)),9,Ke))]}),_:1},8,["data-current_device"])):w("",!0)}}}),ut=q({__name:"QueueButton",setup(f){function c(o){o==null||o.stopPropagation(),te()}return(o,t)=>(r(),v(A,{label:"Queue",onclick:c},{default:$(()=>[s(F)?(r(),v(y,{key:0,icon:"currentPlaylist",class:"h-6 w-6 text-focus"})):(r(),v(y,{key:1,icon:"currentPlaylist",class:"h-6 w-6"}))]),_:1}))}}),dt=q({__name:"StopButton",setup(f){function c(o){var t,n,u,e,i;if(o==null||o.stopPropagation(),!((t=N.value.features)!=null&&t.nomercyConnect)){(e=(u=(n=h)==null?void 0:n.actions)==null?void 0:u.stop)==null||e.call(u);return}(i=V.value)==null||i.invoke("PlaybackCommand","stop",null)}return(o,t)=>(r(),v(A,{label:"Stop",onclick:c},{default:$(()=>[_(ie,{icon:"nmStop",class:"h-7 w-7"})]),_:1}))}}),ft=q({__name:"EqButton",setup(f){function c(o){o==null||o.stopPropagation(),se()}return(o,t)=>(r(),v(A,{label:"Equalizer",onclick:c},{default:$(()=>[_(y,{icon:s(K).faderOnOff,class:G(["absolute h-7 w-7 inset-1.5",{"text-focus":s(ae)}])},null,8,["icon","class"])]),_:1}))}}),We={key:0,class:"z-[999999999999] absolute pointer-events-none opacity-6"},pt=q({__name:"ChristmasSnow",setup(f){return(c,o)=>s(le)()&&!s(ce)?(r(),p("div",We,[(r(!0),p(S,null,D(Array.from(Array(30).keys()),t=>(r(),p("div",{key:t,class:"snowflake"}))),128)),(r(!0),p(S,null,D(Array.from(Array(100).keys()),t=>(r(),p("div",{key:t,class:"snow"}))),128))])):w("",!0)}});export{dt as _,ut as a,ft as b,ct as c,pt as d,nt as e,it as f};
