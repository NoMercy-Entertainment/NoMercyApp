import{aG as X,bE as Y,K as l,L as t,az as Z,ax as ee,bC as re,v as oe,j as se,o as V,a7 as _,x as u,aI as i,bQ as ae,c as S,h as y,a,ba as T,t as J,aS as le,bF as te,a6 as ne,bP as ue,bJ as ie,bG as de}from"./index-qM1p35cp.js";import{_ as me}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-Bu5su8mj.js";import{a as pe}from"./index-DBLDUdJN.js";import{s as q}from"./index--wGCQFMp.js";import"./FloatingBackButton.vue_vue_type_script_setup_true_lang-40xml3JH.js";import"./Button.vue_vue_type_script_setup_true_lang-CbjrlKda.js";const _e={key:0,class:"col-span-2 col-start-1 2xl:col-start-1"},fe={class:"flex flex-col gap-2"},ve={class:"flex flex-col gap-2"},we={class:"flex flex-col gap-2"},ce={key:1,class:"col-span-2 col-start-1 2xl:col-start-3"},ge={class:"flex flex-col gap-2"},ke={class:"flex flex-col gap-2"},be={class:"flex flex-col gap-2"},xe={key:2,class:"col-span-2 col-start-1 2xl:col-start-5"},Ve={class:"flex flex-col gap-2"},qe={class:"flex gap-4"},Be=["aria-label","href"],Ne=X({__name:"Desktop",setup(Se){var I,$,N,h,O,P,Q,E,j,z;const{data:o,refetch:L,error:M}=Y({path:"/dashboard/configuration"}),f=l(!1),n=l(o.value??{}),d=(e,r)=>{if(o.value){if(ie(o.value[e])==r){delete n.value[e],n.value={...n.value};return}n.value={...n.value,[e]:r??void 0}}};t(o,e=>{e&&(n.value={},v.value=e==null?void 0:e.server_name,w.value=e==null?void 0:e.external_port,c.value=e==null?void 0:e.internal_port,g.value=e==null?void 0:e.queue_workers,C.value=e==null?void 0:e.cron_workers,U.value=e==null?void 0:e.data_workers,G.value=e==null?void 0:e.request_workers,b.value=e==null?void 0:e.encoder_workers,k.value=e==null?void 0:e.image_workers,m.value=e==null?void 0:e.swagger,f.value=!0)}),Z(()=>{var e,r,B,p,x,s,A,D,F,K;o.value&&(n.value={},v.value=(e=o.value)==null?void 0:e.server_name,w.value=(r=o.value)==null?void 0:r.external_port,c.value=(B=o.value)==null?void 0:B.internal_port,g.value=(p=o.value)==null?void 0:p.queue_workers,C.value=(x=o.value)==null?void 0:x.cron_workers,U.value=(s=o.value)==null?void 0:s.data_workers,G.value=(A=o.value)==null?void 0:A.request_workers,b.value=(D=o.value)==null?void 0:D.encoder_workers,k.value=(F=o.value)==null?void 0:F.image_workers,m.value=(K=o.value)==null?void 0:K.swagger,f.value=!0)});const v=l(((I=o.value)==null?void 0:I.server_name)??"");t(v,e=>{d("server_name",e)});const w=l((($=o.value)==null?void 0:$.external_port)??0);t(w,e=>{d("external_port",e)});const c=l(((N=o.value)==null?void 0:N.internal_port)??0);t(c,e=>{d("internal_port",e)});const g=l(((h=o.value)==null?void 0:h.queue_workers)??0);t(g,e=>{d("queue_workers",e)});const C=l(((O=o.value)==null?void 0:O.cron_workers)??0);t(C,e=>{d("cron_workers",e)});const U=l(((P=o.value)==null?void 0:P.data_workers)??0);t(U,e=>{d("data_workers",e)});const G=l(((Q=o.value)==null?void 0:Q.request_workers)??0);t(G,e=>{d("request_workers",e)});const k=l(((E=o.value)==null?void 0:E.image_workers)??0);t(k,e=>{d("image_workers",e)});const b=l(((j=o.value)==null?void 0:j.encoder_workers)??0);t(b,e=>{d("encoder_workers",e)});const m=l(((z=o.value)==null?void 0:z.swagger)??!1);t(m,e=>{d("swagger",e)});const R=ee(()=>Object.keys(n.value).length>0);t(n,e=>{console.log(e)});const H=re(),W=()=>{console.raw(n.value),de().patch("/dashboard/configuration",n.value).then(()=>{L(),H.invalidateQueries({queryKey:["serverInfo"]})})};return(e,r)=>{const B=oe("Button");return V(),se(i(ue),null,{default:_(()=>[u(i(ae),{fullscreen:!0},{default:_(()=>[u(me,{error:i(M),gridStyle:2,title:"General",description:""},{cta:_(()=>r[8]||(r[8]=[])),actions:_(()=>[u(B,{type:"submit",id:"save",disabled:!R.value,color:"theme",class:"ml-auto",form:"myForm",onClick:r[7]||(r[7]=p=>W())},{default:_(()=>[ne(J(e.$t("Save")),1)]),_:1},8,["disabled"])]),default:_(()=>{var p,x;return[f.value?(V(),S("div",_e,[a("div",fe,[r[9]||(r[9]=a("label",{for:"server_name"},"Server name",-1)),u(i(pe),{id:"server_name",modelValue:v.value,"onUpdate:modelValue":r[0]||(r[0]=s=>v.value=s),class:"mb-4"},null,8,["modelValue"])]),a("div",ve,[r[10]||(r[10]=a("label",{for:"internal_port"},"Secure internal port",-1)),u(i(q),{id:"internal_port",modelValue:c.value,"onUpdate:modelValue":r[1]||(r[1]=s=>c.value=s),class:"mb-4",useGrouping:!1,showButtons:"",min:2e3},null,8,["modelValue"])]),a("div",we,[r[11]||(r[11]=a("label",{for:"external_port"},"Secure external port",-1)),u(i(q),{id:"external_port",modelValue:w.value,"onUpdate:modelValue":r[2]||(r[2]=s=>w.value=s),class:"mb-4",useGrouping:!1,showButtons:"",min:2e3},null,8,["modelValue"])])])):y("",!0),f.value?(V(),S("div",ce,[a("div",ge,[r[12]||(r[12]=a("label",{for:"encoder_workers"},"Encoder workers",-1)),u(i(q),{id:"encoder_workers",modelValue:b.value,"onUpdate:modelValue":r[3]||(r[3]=s=>b.value=s),class:"mb-4",useGrouping:!1,showButtons:"",min:0},null,8,["modelValue"])]),a("div",ke,[r[13]||(r[13]=a("label",{for:"image_workers"},"Image workers",-1)),u(i(q),{id:"image_workers",modelValue:k.value,"onUpdate:modelValue":r[4]||(r[4]=s=>k.value=s),class:"mb-4",useGrouping:!1,showButtons:"",min:0},null,8,["modelValue"])]),a("div",be,[r[14]||(r[14]=a("label",{for:"queue_workers"},"Queue workers",-1)),u(i(q),{id:"queue_workers",modelValue:g.value,"onUpdate:modelValue":r[5]||(r[5]=s=>g.value=s),class:"mb-4",useGrouping:!1,showButtons:"",min:0},null,8,["modelValue"])])])):y("",!0),f.value?(V(),S("div",xe,[a("div",Ve,[a("span",qe,[r[15]||(r[15]=a("label",{for:"swagger"},"Open API / Swagger Ui",-1)),m.value&&((p=i(T))!=null&&p.serverBaseUrl)?(V(),S("a",{key:0,target:"_blank","aria-label":e.$t("Open API / Swagger Ui in a new tab"),href:(x=i(T))==null?void 0:x.serverBaseUrl,class:"flex gap-1 items-center underline underline-offset-4 h-4 text-sm"},[a("span",null,J(e.$t("Open")),1),u(le,{icon:"shareSquare",className:"size-4",color:"theme"})],8,Be)):y("",!0)]),u(te,{"model-value":m.value,"onUpdate:modelValue":r[6]||(r[6]=s=>m.value=s)},null,8,["model-value"])])])):y("",!0)]}),_:1},8,["error"])]),_:1})]),_:1})}}});export{Ne as default};
//# sourceMappingURL=Desktop-y-8Xt2nA.js.map
