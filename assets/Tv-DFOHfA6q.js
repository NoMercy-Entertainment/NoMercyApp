import{I as D,$ as A,E as H,a8 as y,w as K,l as k,ci as N,C as R,d as h,o as c,s as n,j as l,K as e,bu as U,c as u,A as G,cT as g,a as r,R as W,eo as S,ep as _,eq as d,b as w,bm as J,t as p,bE as O,F as Q,h as X,bB as Y,bH as Z,n as ee,a4 as v,al as te,er as C,y as I,bh as ae,ah as le,bt as $,ai as b,an as T,bV as se,aj as q,bW as P}from"./index-H-vD2rqS.js";import{u as oe}from"./useServerClient-DCS4BGnu.js";import{_ as j}from"./CoverImage.vue_vue_type_script_setup_true_lang-M5wGBSKl.js";import{_ as ie}from"./OptimizedIcon.vue_vue_type_script_setup_true_lang-CX14zQZK.js";import{_ as ne}from"./BigPlayButton.vue_vue_type_script_setup_true_lang-OPRfBIWE.js";import{_ as re}from"./MusicButton.vue_vue_type_script_setup_true_lang-BP4_NGbv.js";import{_ as ce}from"./TrackLinks.vue_vue_type_script_setup_true_lang-3gVROUo3.js";import{E as ue}from"./EqSpinner-BH4QvY_3.js";import{M as z}from"./MediaLikeButton-DKgZDdH6.js";import{_ as de}from"./Marquee.vue_vue_type_script_setup_true_lang-gVR0ruv4.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useQuery-C5_JtCKV.js";import"./useBaseQuery-x8hgGQVw.js";import"./useQueryClient-B5STIjF7.js";import"./useInfiniteServerClient-B-2LPPx2.js";import"./AppLogoSquare-CvwU0jNv.js";import"./PlayerIcon.vue_vue_type_script_setup_true_lang-krAO5MJd.js";import"./index-5TqZ8QDo.js";import"./index-B2WOLLeT.js";import"./index-C5qO4Eqs.js";import"./index-CkDSjnyt.js";import"./index-ZhWAdK_X.js";const me={class:"w-available h-available absolute left-[202px] top-0 overflow-hidden bg-focus"},pe=["src"],ve={class:"flex justify-center w-available aspect-square my-8 ml-8 mr-16"},be={key:0,class:"relative mb-8 flex w-full flex-1 flex-shrink-0 flex-col items-start justify-start gap-4 flex-grow-1 text-left"},_e=["innerHTML"],we={key:1,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap"},xe={class:"flex items-center h-8 gap-2 self-stretch w-full text-xs font-medium text-left"},ye={key:0,class:"flex gap-2"},ke={key:1,class:"flex gap-2"},he={class:"flex gap-2 items-center justify-between w-full"},ge=["data-index","data-id","onClick"],Se={class:"flex w-available overflow-clip items-end"},Ce=D({__name:"Tv",setup(Ie){const F=A(),{data:a}=oe({path:F.fullPath});H(()=>{a.value?.color_palette?.cover&&y(a.value?.color_palette?.cover),setTimeout(()=>{const s=document.querySelector(".focusable");s&&s.focus()},100)}),K(a,s=>{s?.color_palette?.cover&&y(s?.color_palette?.cover),setTimeout(()=>{const t=document.querySelector(".focusable");t&&t.focus()},100)});const x=k(),L=k();N(()=>{setTimeout(()=>{const s=document.querySelector(".focusable");s&&s.focus()},100)});function V(s){const t=s.target,o=x.value?.getAttribute("data-index")??0,i=t.querySelector(`[data-index="${o}"] .focusable`);i&&i.focus()}function B(s){const t=s.target;x.value=t,t&&t.scrollIntoView({behavior:"smooth",block:"center"});const o=t.closest("[data-id]")?.getAttribute("data-id"),i=t.querySelector(`[data-index="${o}"] .focusable`);i&&i.focus()}function E(s){const t=s.target;if(s.key==="ArrowUp"){const i=(t.closest("ion-item")?.previousSibling).querySelector(".focusable");i&&(i.focus(),i.scrollIntoView({behavior:"smooth",block:"center"}))}else if(s.key==="ArrowDown"){const i=(t.closest("ion-item")?.nextSibling).querySelector(".focusable");i&&(i.focus(),i.scrollIntoView({behavior:"smooth",block:"center"}))}}const f=R(()=>`${a.value?.type?.replace(/s$/u,"")}/${a.value?.id}`);function M(s){if(a.value?.tracks){if(!le.value.features?.nomercyConnect){if($.value===f.value){b.togglePlayback();return}b.playTrack(s,a.value?.tracks),T(f.value);return}if(se.value||q.value?.invoke("ChangeDeviceCommand",P.value).then(()=>{console.log("Switched to device:",P.value)}).catch(t=>{console.error("Error switching device:",t)}),q.value?.invoke("StartPlaybackCommand",a.value?.type.replace(/s$/u,""),a.value?.id,v.value?.id??s?.id),$.value===f.value){b.togglePlayback();return}b.playTrack(s,a.value?.tracks),T(f.value)}}return(s,t)=>(c(),h(e(ae),null,{default:n(()=>[l(e(U),{fullscreen:!0},{default:n(()=>[(c(),u("div",{key:e(a)?.id,class:"w-full h-full absolute left-0 top-0 bg-[#131314] pointer-events-none -z-10",style:G(e(g)?`--color-focus: ${e(g)}`:"")},[r("div",me,[r("img",{class:"w-available h-available absolute left-[-0.39px] top-[-0.39px] opacity-40 object-cover object-center",src:`${e(W)?.serverBaseUrl}${e(a)?.backdrop??e(a)?.cover}`,alt:""},null,8,pe),t[5]||(t[5]=r("div",{class:"w-[150vw] h-[150vw] absolute left-[-30%] bottom-[-50%]",style:{background:`radial-gradient(
                closest-side,
                rgba(19, 19, 20, 0.1) 0%,
                rgba(19, 19, 20, 1) 70.73974609375%
              )`}},null,-1))])],4)),l(e(S),null,{default:n(()=>[l(e(_),{class:"ion-align-items-end"},{default:n(()=>[l(e(d),{size:"3"},{default:n(()=>[r("div",ve,[l(j,{data:e(a),alt:e(a)?.name,class:"w-auto h-full aspect-square"},null,8,["data","alt"])]),e(a)?.name?(c(),u("div",be,[e(a).name.length>50?(c(),u("div",{key:0,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap",innerHTML:e(J)(e(a)?.name??"Songs you like","text-xs line-clamp-1")},null,8,_e)):(c(),u("p",we,p(e(a)?.name),1)),r("div",xe,[e(a)?.type?(c(),u("span",ye,[r("span",null,p(e(a)?.type.replace(/s$/u,"").toTitleCase()),1)])):w("",!0),e(a)?.tracks?(c(),u("span",ke,[t[6]||(t[6]=r("span",null,"â€¢",-1)),r("span",null,p(e(a)?.tracks.length)+" "+p(s.$t("tracks")),1)])):w("",!0)]),r("div",he,[l(z,{data:e(a)},null,8,["data"]),l(ne,{data:e(a),class:"w-12 h-12 ml-auto"},null,8,["data"])])])):w("",!0)]),_:1}),l(e(d),{ref_key:"scrollContainer",ref:L,size:"6",tabindex:"0",class:"w-full h-available overflow-auto scroll-smooth",onFocus:t[4]||(t[4]=o=>V(o))},{default:n(()=>[l(e(O),{mode:"md",lines:"none"},{default:n(()=>[(c(!0),u(Q,null,X(e(a)?.tracks,(o,i)=>(c(),h(e(Y),{key:o.id+o?.favorite,tabindex:"-1",mode:"md",class:"group/track focus-within:bg-white/4 rounded-md overflow-clip"},{default:n(()=>[l(e(S),null,{default:n(()=>[l(e(_),{"data-index":i,"data-id":o.id,tabindex:"-1",class:"items-center !rounded-md !overflow-clip"},{default:n(()=>[l(e(d),{size:"2",tabindex:"-1"},{default:n(()=>[r("button",{tabindex:"0","data-index":i,"data-id":o.id,class:"focusable flex justify-center w-full aspect-video focus:outline outline-focus outline-2 outline-offset-2 mr-2 overflow-clip",onFocus:t[0]||(t[0]=m=>B(m)),onClick:m=>M(o)},[l(j,{data:o,alt:o.name,class:"w-auto h-full aspect-square"},null,8,["data","alt"])],40,ge)]),_:2},1024),l(e(d),{size:"8",tabindex:"-1",class:"my-auto mt-2"},{default:n(()=>[l(e(Z),{tabindex:"-1"},{default:n(()=>[r("div",Se,[r("div",{class:ee(["flex items-center justify-center h-full aspect-square overflow-clip transition-width duration-200",{"w-0":e(v)?.id!==o.id,"w-6 mr-1":e(v)?.id===o.id}])},[l(ue,{playing:e(te)},null,8,["playing"])],2),l(de,{playing:!!e(v)?.id,text:o.name,class:"!w-[calc(100%-30px)] text-auto-12 children:leading-none w-available overflow-clip"},null,8,["playing","text"])]),l(ce,{id:o.id,data:o.artist_track,type:"artists",suffix:"track",onKeydown:[t[1]||(t[1]=C(I(()=>{},["prevent"]),["up"])),t[2]||(t[2]=C(I(()=>{},["prevent"]),["down"]))],onKeyup:t[3]||(t[3]=m=>E(m))},null,8,["id","data"])]),_:2},1024)]),_:2},1024),l(e(d),{size:"2",tabindex:"-1",class:"opacity-0 group-focus-within/track:opacity-100 -ml-2"},{default:n(()=>[l(e(_),{tabindex:"-1",class:"flex flex-nowrap"},{default:n(()=>[l(z,{data:o},null,8,["data"]),l(re,{label:"",tabindex:"0",onclick:()=>{},class:"!bg-transparent mr-2"},{default:n(()=>[l(ie,{icon:"menuDotsHorizontal",class:"text-white"})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1032,["data-index","data-id"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}))}}),Oe=fe(Ce,[["__scopeId","data-v-ec9de6da"]]);export{Oe as default};
