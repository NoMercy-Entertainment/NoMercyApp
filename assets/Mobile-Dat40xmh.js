import{I as P,ag as a,l as C,w as h,ci as w,ah as p,eh as I,d as v,o as d,s as m,j as S,K as n,bu as M,c6 as _,a as f,n as N,a2 as g,bh as D,S as r,R as T,a4 as o,bL as V,el as A,em as B,en as U,as as x}from"./index-C1DjUpiP.js";import{g as c}from"./imageModal-M8XwU6ff.js";import{S as L,O as j}from"./octopusPlugin-Css5Xm9g.js";import{A as z}from"./autoSkipPlugin-DZpBgGaE.js";import{n as O}from"./subtitles-octopus-WbQsAcJL.js";import{D as R}from"./desktopUIPlugin-B_7wlYpw.js";import{V as E}from"./videoNoMercyConnectPlugin-ba7zmF8K.js";import{u as F}from"./useServerClient-BNYfM5AW.js";import"./buttons-IwPh3z7u.js";import"./useQuery-8YWJGe_9.js";import"./useBaseQuery-juBGMRNQ.js";import"./useQueryClient-OkkyraFc.js";import"./useInfiniteServerClient-ARVV4sGq.js";const se=P({__name:"Mobile",setup(K){const{data:i}=F({enabled:!a.value.features?.nomercyConnect}),e=C();function u(s){const t={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:s?.filter(l=>!!l.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:a.value?.accessToken||localStorage.getItem("access_token")||"",basePath:T.value?.serverBaseUrl,forceTvMode:(r("android")||r("ios"))&&!r("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||r("capacitor"),renderAhead:100,disableAutoPlayback:a.value.features?.nomercyConnect};if(e.value?.dispose(),e.value=O("player1").setup(t),e.value?.once("back",()=>{history.state.back?o.back():o.replace("/")}),a.value.features?.nomercyConnect){const l=new E;e.value?.registerPlugin("videoNoMercyConnect",l),e.value?.usePlugin("videoNoMercyConnect")}const y=new R;e.value?.registerPlugin("desktopUI",y),e.value?.usePlugin("desktopUI");const b=new z;if(e.value?.registerPlugin("autoSkip",b),e.value?.usePlugin("autoSkip"),!a.value.features?.nomercyConnect){const l=new L;e.value?.registerPlugin("sync",l),e.value?.usePlugin("sync")}const k=new j;e.value?.registerPlugin("octopus",k),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?o.back():o.replace("/")}),e.value?.on("dispose",()=>{V(),A(),history.state.back?o.back():o.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{c(!0)}),e.value?.on("pause",()=>{c(!1)}),e.value?.on("ready",()=>{B(),U(),p.stop()}),e.value?.on("item",()=>{e.value?.play()}),x.addListener("backButton",()=>{e.value?.emit("back-button-hyjack"),e.value?.dispose()})}return h(i,s=>{s?.length&&u(s)}),w(()=>{p.stop(),a.value.features?.nomercyConnect?u():i.value?.length&&u(i.value)}),I(()=>{e.value?.dispose(),c(!1)}),(s,t)=>(d(),v(n(D),null,{default:m(()=>[S(n(M),{fullscreen:!0},{default:m(()=>[(d(),v(_,{to:"body"},[f("div",{class:N([{"mb-28":n(g),"mb-0":!n(g)},"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199"])},[...t[0]||(t[0]=[f("div",{id:"player1",class:"group nomercyplayer"},null,-1)])],2)]))]),_:1})]),_:1}))}});export{se as default};
