import{aG as U,bb as H,bE as N,az as R,aM as T,L as G,K as $,d1 as Q,j as q,o as f,a7 as i,x as s,aI as e,bQ as W,c as b,av as X,eR as F,a as u,ba as Y,eS as z,eT as k,eU as _,h as g,bd as L,ca as J,t as y,aT as P,e6 as O,F as Z,w as ee,e5 as te,eV as ae,C as se,bh as h,bi as le,be as oe,eK as ie,eW as ne,eX as j,aF as V,de as re,aS as ce,bP as de,bf as ue,eY as fe,bm as pe,b6 as be}from"./index-CvS9J4DT.js";import{_ as me}from"./BigPlayButton.vue_vue_type_script_setup_true_lang-Bd16NTI1.js";const xe={class:"w-available h-available absolute left-[202px] top-0 overflow-hidden bg-focus"},we=["src"],_e={class:"flex justify-center w-available aspect-square my-8 ml-8 mr-16"},ve={key:0,class:"relative mb-8 flex w-full flex-1 flex-shrink-0 flex-col items-start justify-start gap-4 flex-grow-1 text-left"},ye=["innerHTML"],he={key:1,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap"},ke={class:"flex items-center h-8 gap-2 self-stretch w-full text-xs font-medium text-left"},ge={key:0,class:"flex gap-2"},Se={key:1,class:"flex gap-2"},Ce={class:"flex gap-2 items-center justify-between w-full"},Ie=["data-index","data-id","onClick"],Te={class:"flex w-available overflow-clip items-end"},$e=U({__name:"Tv",setup(qe){const S=H(),{data:l}=N({path:S.fullPath,keepForever:!0});R(()=>{var a,t,n,o;(t=(a=l.value)==null?void 0:a.color_palette)!=null&&t.cover&&T((o=(n=l.value)==null?void 0:n.color_palette)==null?void 0:o.cover),setTimeout(()=>{const d=document.querySelector(".focusable");d&&d.focus()},100)}),G(l,a=>{var t,n;(t=a==null?void 0:a.color_palette)!=null&&t.cover&&T((n=a==null?void 0:a.color_palette)==null?void 0:n.cover),setTimeout(()=>{const o=document.querySelector(".focusable");o&&o.focus()},100)});const C=$(),B=$();Q(()=>{setTimeout(()=>{const a=document.querySelector(".focusable");a&&a.focus()},100)});const M=a=>{var d;const t=a.target,n=((d=C.value)==null?void 0:d.getAttribute("data-index"))??0,o=t.querySelector(`[data-index="${n}"] .focusable`);o&&o.focus()},K=a=>{var d;const t=a.target;C.value=t,t&&t.scrollIntoView({behavior:"smooth",block:"center"});const n=(d=t.closest("[data-id]"))==null?void 0:d.getAttribute("data-id"),o=t.querySelector(`[data-index="${n}"] .focusable`);o&&o.focus()},A=a=>{var n,o;const t=a.target;if(a.key=="ArrowUp"){const r=((n=t.closest("ion-item"))==null?void 0:n.previousSibling).querySelector(".focusable");r&&(r.focus(),r.scrollIntoView({behavior:"smooth",block:"center"}))}else if(a.key=="ArrowDown"){const r=((o=t.closest("ion-item"))==null?void 0:o.nextSibling).querySelector(".focusable");r&&(r.focus(),r.scrollIntoView({behavior:"smooth",block:"center"}))}},D=()=>{pe(S.fullPath)},E=a=>{var t;h.value||D(),ue.playTrack(a,((t=l.value)==null?void 0:t.tracks)??[]),fe()};return(a,t)=>(f(),q(e(de),null,{default:i(()=>[s(e(W),{fullscreen:!0},{default:i(()=>{var n,o,d;return[(f(),b("div",{class:"w-full h-full absolute left-0 top-0 bg-[#131314] pointer-events-none -z-10",key:(n=e(l))==null?void 0:n.id,style:X(e(F)?`--color-focus: ${e(F)}`:"")},[u("div",xe,[u("img",{class:"w-available h-available absolute left-[-0.39px] top-[-0.39px] opacity-40 object-cover object-center",src:`${(o=e(Y))==null?void 0:o.serverBaseUrl}${(d=e(l))==null?void 0:d.cover}`,alt:""},null,8,we),t[5]||(t[5]=u("div",{class:"w-[150vw] h-[150vw] absolute left-[-30%] bottom-[-50%]",style:{background:`radial-gradient(
                    closest-side,
                    rgba(19, 19, 20, 0.1) 0%,
                    rgba(19, 19, 20, 1) 70.73974609375%
                  )`}},null,-1))])],4)),s(e(z),null,{default:i(()=>[s(e(k),{class:"ion-align-items-end"},{default:i(()=>[s(e(_),{size:"3"},{default:i(()=>{var r,c,m,p,x,w,v,I;return[u("div",_e,[s(L,{data:e(l),alt:(r=e(l))==null?void 0:r.name,class:"w-auto h-full aspect-square"},null,8,["data","alt"])]),(c=e(l))!=null&&c.name?(f(),b("div",ve,[e(l).name.length>50?(f(),b("div",{key:0,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap",innerHTML:e(J)(((m=e(l))==null?void 0:m.name)??"Songs you like","text-xs line-clamp-1")},null,8,ye)):(f(),b("p",he,y((p=e(l))==null?void 0:p.name),1)),u("div",ke,[(x=e(l))!=null&&x.type?(f(),b("span",ge,[u("span",null,y((w=e(l))==null?void 0:w.type.replace(/s$/u,"").toTitleCase()),1)])):g("",!0),(v=e(l))!=null&&v.tracks?(f(),b("span",Se,[t[6]||(t[6]=u("span",null,"â€¢",-1)),u("span",null,y((I=e(l))==null?void 0:I.tracks.length)+" "+y(a.$t("tracks")),1)])):g("",!0)]),u("div",Ce,[s(P,{data:e(l)},null,8,["data"]),s(me,{data:e(l),class:"w-12 h-12"},null,8,["data"])])])):g("",!0)]}),_:1}),s(e(_),{size:"6",ref_key:"scrollContainer",ref:B,onFocus:t[4]||(t[4]=r=>M(r)),tabindex:"0",class:"w-full h-available overflow-auto scroll-smooth"},{default:i(()=>[s(e(O),{mode:"md",lines:"none"},{default:i(()=>{var r;return[(f(!0),b(Z,null,ee((r=e(l))==null?void 0:r.tracks,(c,m)=>(f(),q(e(te),{key:c.id,tabindex:"-1",mode:"md",class:"group/track focus-within:bg-white/4 rounded-md overflow-clip"},{default:i(()=>[s(e(z),null,{default:i(()=>[s(e(k),{"data-index":m,"data-id":c.id,tabindex:"-1",class:"items-center !rounded-md !overflow-clip"},{default:i(()=>[s(e(_),{size:"2",tabindex:"-1"},{default:i(()=>[u("div",{tabindex:"0","data-index":m,"data-id":c.id,class:"focusable flex justify-center w-full aspect-video focus:outline outline-focus outline-2 outline-offset-2 mr-2 overflow-clip",onFocus:t[0]||(t[0]=p=>K(p)),onClick:p=>E(c)},[s(L,{data:c,alt:c.name,class:"w-auto h-full aspect-square"},null,8,["data","alt"])],40,Ie)]),_:2},1024),s(e(_),{size:"8",tabindex:"-1",class:"my-auto mt-2"},{default:i(()=>[s(e(ae),{tabindex:"-1"},{default:i(()=>{var p,x,w;return[u("div",Te,[u("div",{class:se(["flex items-center justify-center h-full aspect-square overflow-clip transition-width duration-200",{"w-0":((p=e(h))==null?void 0:p.id)!=c.id,"w-6 mr-1":((x=e(h))==null?void 0:x.id)==c.id}])},[s(le,{playing:e(oe)},null,8,["playing"])],2),s(ie,{playing:!!((w=e(h))!=null&&w.id),text:c.name,class:"!w-[calc(100%-30px)] text-auto-12 children:leading-none w-available overflow-clip"},null,8,["playing","text"])]),s(ne,{data:c.artist_track,type:"artists",id:c.id,onKeydown:[t[1]||(t[1]=j(V(()=>{},["prevent"]),["up"])),t[2]||(t[2]=j(V(()=>{},["prevent"]),["down"]))],onKeyup:t[3]||(t[3]=v=>A(v)),suffix:"track"},null,8,["data","id"])]}),_:2},1024)]),_:2},1024),s(e(_),{size:"2",tabindex:"-1",class:"opacity-0 group-focus-within/track:opacity-100 -ml-2"},{default:i(()=>[s(e(k),{tabindex:"-1",class:"flex flex-nowrap"},{default:i(()=>[s(P,{data:c},null,8,["data"]),s(re,{label:"",tabindex:"1",onclick:()=>{},class:"!bg-transparent mr-2"},{default:i(()=>[s(ce,{icon:"menuDotsHorizontal",class:"text-white"})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1032,["data-index","data-id"])]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1},512)]),_:1})]),_:1})]}),_:1})]),_:1}))}}),Le=be($e,[["__scopeId","data-v-47d104df"]]);export{Le as default};
//# sourceMappingURL=Tv-CYb9KQx0.js.map
