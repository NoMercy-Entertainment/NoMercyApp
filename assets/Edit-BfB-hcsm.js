import"./useBaseQuery-DDsP-hD8.js";import"./useInfiniteServerClient-KyHG4LeN.js";import{t as Q}from"./useQueryClient-FWUD2IdL.js";import"./useQuery-8SGO3mpa.js";import{Ci as C,Ec as U,Gc as d,Gs as t,Ks as B,Ns as M,Oc as r,Pc as n,Qs as o,Si as N,Uo as G,Vc as i,Wo as L,Zs as _,ci as q,ec as E,fc as P,hc as S,i as I,lc as A,qs as F,r as W,yc as D}from"./index-trdChKHY.js";import"./basecomponent-D0AnH0MI.js";import"./classnames-ai0DVBar.js";import"./MoooomIcon-BNAzanSX.js";import"./baseeditableholder-DchcujFR.js";import{t as b}from"./inputtext-KdEmDyXL.js";import{t as Z}from"./useServerClient-Be3wbxFV.js";import"./ScrollContainer-DGpNUEJb.js";import"./useMounted-DcokRpGt.js";import"./RipperOverlay-sA0OayHC.js";import"./HubConnection-DqqI0cRx.js";import"./ripperSocket-CVtuukK1.js";import{t as $}from"./Button-l6bUkC-1.js";import{t as j}from"./Modal-0MND_rAy.js";import"./FloatingBackButton-C7_GpKAg.js";import{t as z}from"./DashboardLayout-BwC43aOM.js";G();M();var H={class:"my-6 text-sm text-surface-10"},J=E({__name:"DeleteSpecialModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},name:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},setup(c){const u=c,p=Q(),h=W();function k(){N().delete(`dashboard/specials/${u.id}`).then(({data:l})=>{h.add({severity:l.status==="ok"?"success":"error",summary:q(l.status==="ok"?"Success":"Error"),detail:q(l.message,...l.args??[]),life:5e3}),p.invalidateQueries({queryKey:["dashboard","specials"]}),!u.noRedirect&&I.back()}),u.close()}return(l,g)=>{const x=D("Button");return S(),B(j,{close:c.close,open:c.open,params:{special:u.name},"max-width":"max-w-xl",title:"Delete special {{special}}"},{actions:r(()=>[o(x,{id:"yes",onclick:k,color:"red","end-icon":"trash",type:"button"},{default:r(()=>[_(d(l.$t("Delete")),1)]),_:1}),o(x,{id:"no",onclick:c.close,color:"auto",type:"button",variant:"text"},{default:r(()=>[_(d(l.$t("Cancel")),1)]),_:1},8,["onclick"])]),default:r(()=>[t("div",H,d(l.$t("Are you sure you want to delete this special?")),1)]),_:1},8,["close","open","params"])}}}),X=J;M();var Y={class:"flex flex-col gap-5 col-span-5 col-start-1 2xl:col-start-1"},ee={class:"flex flex-col gap-2"},le={class:"flex flex-col gap-2"},ae={class:"flex gap-4 w-full"},te={class:"flex flex-col gap-4 w-full"},oe={class:"flex flex-col gap-2"},re={class:"flex flex-col gap-4 w-full"},se={class:"flex flex-col gap-2"},ie={class:"flex flex-col gap-4 col-span-2 row-start-1 col-start-1 2xl:col-start-6"},ue={class:"flex flex-col gap-5"},ne={class:"flex flex-col gap-2"},de=E({__name:"Edit",setup(c){const u=L(),{data:p,error:h,refetch:k}=Z({path:"dashboard/specials",queryKey:["dashboard","specials"]}),l=n();A(()=>{k()}),P(()=>{p.value&&(l.value=p.value.find(a=>a.id===u.params.id))}),U(p,a=>{a&&(l.value=a.find(e=>e.id===u.params.id))});const g=n(!1);function x(){g.value=!0}function R(){g.value=!1}function T(){I.back()}const y=n(l.value?.title||""),w=n(l.value?.overview||""),v=n(l.value?.backdrop||""),m=n(l.value?.poster||""),f=n(l.value?.logo||"");U(l,a=>{a&&(y.value=a?.title,w.value=a?.overview,v.value=a?.backdrop,m.value=a?.poster,f.value=a?.logo)});function K(){N().patch(`/dashboard/specials/${l.value?.id}`,{title:y.value,overview:w.value,backdrop:v.value,poster:m.value,logo:f.value}).then(({data:a})=>{console.log(a)})}return(a,e)=>{const O=D("Textarea"),V=D("Image");return S(),B(z,{error:i(h),"grid-style":1,params:{title:l.value?.title},title:"Special: {{title}}"},{cta:r(()=>[...e[5]||(e[5]=[])]),actions:r(()=>[o($,{id:"remove",class:"children:text-gray-400 children:transition-colors children:duration-100 children:hover:text-red-dark-8",color:"auto","start-icon":"folderRemove",type:"button",variant:"text",onClick:x},{default:r(()=>[_(d(a.$t("Remove")),1)]),_:1}),o($,{id:"cancel",color:"white",type:"button",variant:"text",onClick:T},{default:r(()=>[_(d(a.$t("Cancel")),1)]),_:1}),o($,{id:"save",class:"ml-auto",color:"theme",type:"button",onClick:K},{default:r(()=>[_(d(a.$t("Save")),1)]),_:1})]),default:r(()=>[t("div",Y,[t("div",ee,[e[6]||(e[6]=t("label",{for:"name"},"Name",-1)),o(i(b),{id:"name",modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=s=>y.value=s),class:"w-full",variant:"filled"},null,8,["modelValue"])]),t("div",le,[e[7]||(e[7]=t("label",{for:"overview"},"Overview",-1)),o(O,{id:"overview",modelValue:w.value,"onUpdate:modelValue":e[1]||(e[1]=s=>w.value=s),rows:8,class:"w-full",variant:"filled"},null,8,["modelValue"])]),t("div",ae,[t("div",te,[t("div",oe,[e[8]||(e[8]=t("label",{for:"backdrop"},"Backdrop",-1)),o(i(b),{id:"backdrop",modelValue:v.value,"onUpdate:modelValue":e[2]||(e[2]=s=>v.value=s),class:"w-full",variant:"filled"},null,8,["modelValue"])]),o(V,{src:`${i(C)?.serverBaseUrl}/images/original${v.value}`,alt:"Image",class:"mx-2",preview:"",width:"100%"},null,8,["src"])]),t("div",re,[t("div",se,[e[9]||(e[9]=t("label",{for:"logo"},"Logo",-1)),o(i(b),{id:"logo",modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=s=>f.value=s),class:"w-full",variant:"filled"},null,8,["modelValue"])]),o(V,{src:`${i(C)?.serverBaseUrl}/images/original${f.value}`,alt:"Image",class:"mx-2",preview:"",width:"100%"},null,8,["src"])])])]),t("div",ie,[t("div",ue,[t("div",ne,[e[10]||(e[10]=t("label",{for:"poster"},"Poster",-1)),o(i(b),{id:"poster",modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=s=>m.value=s),class:"w-full",variant:"filled"},null,8,["modelValue"])]),o(V,{src:`${i(C)?.serverBaseUrl}/images/original${m.value}`,alt:"Image",class:"mx-2",preview:"",width:"100%"},null,8,["src"])])]),l.value?.id?(S(),B(X,{key:0,id:l.value?.id,close:R,name:l.value?.title,open:g.value},null,8,["id","name","open"])):F("",!0)]),_:1},8,["error","params"])}}}),qe=de;export{qe as default};
