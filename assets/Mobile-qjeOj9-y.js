import{aG as D,bb as K,e4 as j,az as N,c9 as q,aP as P,aM as G,L as S,ax as Q,aW as U,ch as W,K as g,d1 as A,j as u,o as t,a7 as T,x as $,aI as o,bQ as H,a as _,c as d,bn as J,C as b,cu as f,bh as z,h as y,F as x,w as V,e5 as O,bP as X}from"./index-Dt4h7nLc.js";import{_ as Y}from"./MediaCard.vue_vue_type_script_setup_true_lang-ByaxArCM.js";import{_ as Z}from"./PersonCard.vue_vue_type_script_setup_true_lang-C_WRYwnW.js";import{_ as ee,a as se}from"./EmptyCard.vue_vue_type_script_setup_true_lang-DcVGOvVg.js";import"./CardIndicator.vue_vue_type_script_setup_true_lang-BjWAQavu.js";import"./NoResultImage.vue_vue_type_script_setup_true_lang-DFo5qAQY.js";const ne="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",oe="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",pe=D({__name:"Mobile",setup(le){var M;const p=K(),{data:l,fetchNextPage:k,hasNextPage:w,isError:te}=j({queryKey:["libraries",(M=p.params.id??p.name)==null?void 0:M.split("&").at(0)],limit:20,keepForever:!0});N(()=>{q(),P(null),G(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),S(l,s=>{s&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const F=Q(()=>{var s,n,i,r,m,a;return U.value&&((i=(n=(s=l.value)==null?void 0:s.pages)==null?void 0:n[0])==null?void 0:i.data[0].media_type)!=="person"&&((a=(m=(r=l.value)==null?void 0:r.pages)==null?void 0:m[0])==null?void 0:a.data[0].media_type)!=="genres"});W(()=>{stop(),P(null)});const C=g(),E=g();N(()=>{var s,n;E.value=p.params.id??p.name,w.value&&(((n=(s=l==null?void 0:l.value)==null?void 0:s.pages)==null?void 0:n.length)??0)<50&&k(),document.addEventListener("scrollToDiv",i=>{var r;(r=C.value)==null||r.scrollTo({top:i.detail.top-100,behavior:"smooth"})})}),A(()=>{document.dispatchEvent(new Event("indexer"))}),S(l,s=>{var n;s&&w.value&&((n=s==null?void 0:s.pages)==null?void 0:n.length)<50&&k()});const L=g(),R=g(),v=(s,n)=>{L.value=n,R.value.show(s)};return(s,n)=>(t(),u(o(X),null,{default:T(()=>[$(o(H),{fullscreen:!0,class:"ion-padding",style:{"--padding-bottom":"0"}},{default:T(()=>{var i;return[n[0]||(n[0]=_("div",{class:"fixed top-0 pt-safe w-full bg-slate-light-1 dark:bg-slate-dark-3 z-1199"},null,-1)),_("div",{ref_key:"lib",ref:C,class:"pt-safe-offset-10 flex h-auto w-full pr-8 overflow-auto scroll-container"},[(t(),d("div",{class:b(["z-0 flex flex-col gap-4 rounded-3xl border-0 w-available scrollbar-none border-auto-3",{"pb-2":o(f)&&o(z),"children:pb-4 sm:children:pb-3":!o(f)&&o(z)}]),key:(i=o(J).currentRoute.value.params)==null?void 0:i.id},[_("div",{class:b(`grid w-full gap-4 scroll-smooth music-showing:pb-0 pl-1 py-4 ${F.value?ne:oe}`)},[o(l)?(t(!0),d(x,{key:0},V(o(l).pages??[],(r,m)=>{var a,B,I;return t(),d(x,{key:m},[r.data.length>0?(t(!0),d(x,{key:0},V(r.data??[],(e,h)=>(t(),d(x,null,[(e==null?void 0:e.media_type)==="tv"||(e==null?void 0:e.media_type)=="movie"||(e==null?void 0:e.media_type)=="collection"||(e==null?void 0:e.media_type)=="specials"?(t(),u(Y,{key:e.id,data:e,onContextMenu:c=>v(c,e),index:h},null,8,["data","onContextMenu","index"])):(e==null?void 0:e.media_type)==="person"?(t(),u(Z,{key:e.id+"_person",data:e,onContextMenu:c=>v(c,e),index:h},null,8,["data","onContextMenu","index"])):(e==null?void 0:e.media_type)==="genres"?(t(),u(ee,{key:e.id+"_genres",data:e,onContextMenu:c=>v(c,e),index:h},null,8,["data","onContextMenu","index"])):y("",!0)],64))),256)):((I=(B=(a=o(l).pages)==null?void 0:a[0])==null?void 0:B.data)==null?void 0:I.length)==0?(t(),u(se,{key:1})):y("",!0)],64)}),128)):y("",!0)],2)],2)),$(O,{id:E.value,class:b(["w-8 !-mt-4 pt-4 pb-4 mb-0 fixed right-0 bg-slate-light-1 dark:bg-slate-dark-3",{"h-available":!o(f),"h-inherit top-24":o(f)}])},null,8,["id","class"])],512)]}),_:1})]),_:1}))}});export{pe as default};
//# sourceMappingURL=Mobile-qjeOj9-y.js.map
