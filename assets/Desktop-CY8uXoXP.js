import{bP as Se,w as I,l as D,k as Ve,I as J,j,q as ye,B as ge,dH as be,f as z,d as Q,o as O,s as V,c as E,b as ne,a as s,t as b,K as L,eE as we,z as ie,dw as Oe,cX as Te,D as xe,h as U,F as K,dE as X,ea as Le,a$ as $e,bu as Be,bh as Pe,O as Ae}from"./index-DkQngsHe.js";import{u as ee}from"./useServerClient-CmW8VHrx.js";import{_ as De,c as Ee}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-DnCqx71_.js";import{u as Fe}from"./RipperOverlay.vue_vue_type_script_setup_true_lang-oED-RT0Y.js";import{_ as le}from"./DropdownMenu.vue_vue_type_script_setup_true_lang-CbVkv6zR.js";import{_ as ae}from"./OptimizedIcon.vue_vue_type_script_setup_true_lang-BBYVQkaB.js";import{_ as Ie}from"./Modal.vue_vue_type_script_setup_true_lang-DaZzj8Xb.js";import{_ as Me}from"./ScrollContainer.vue_vue_type_script_setup_true_lang-BJWiF2I-.js";import"./useQuery-jTNaBwZN.js";import"./useBaseQuery-BnGe7Aaf.js";import"./useQueryClient-Cy1MABnp.js";import"./useInfiniteServerClient-BHsBwDbE.js";import"./useMounted-BfGYJuv5.js";import"./HubConnection-CMQnVIkW.js";import"./FloatingBackButton.vue_vue_type_script_setup_true_lang-Da0SgVOE.js";import"./Button.vue_vue_type_script_setup_true_lang-B5T8NTkB.js";import"./ripperSocket-BmFnZdbx.js";import"./Shadow-CSihFWI0.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";var Y={d:(e,n)=>{for(var l in n)Y.o(n,l)&&!Y.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:n[l]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)},ke={};function oe(e,n){(n==null||n>e.length)&&(n=e.length);for(var l=0,a=new Array(n);l<n;l++)a[l]=e[l];return a}function Ce(e,n){if(e){if(typeof e=="string")return oe(e,n);var l=Object.prototype.toString.call(e).slice(8,-1);return l==="Object"&&e.constructor&&(l=e.constructor.name),l==="Map"||l==="Set"?Array.from(e):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?oe(e,n):void 0}}function R(e){return function(n){if(Array.isArray(n))return oe(n)}(e)||function(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}(e)||Ce(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Z(e,n,l){return n in e?Object.defineProperty(e,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[n]=l,e}Y.d(ke,{Z:()=>Qe});const r=(pe={computed:()=>ge,createTextVNode:()=>ye,createVNode:()=>j,defineComponent:()=>J,reactive:()=>Ve,ref:()=>D,watch:()=>I,watchEffect:()=>Se},te={},Y.d(te,pe),te),qe=(0,r.defineComponent)({props:{data:{required:!0,type:String},onClick:Function},render:function(){var e=this.data,n=this.onClick;return(0,r.createVNode)("span",{class:"vjs-tree-brackets",onClick:n},[e])}}),Ke=(0,r.defineComponent)({emits:["change","update:modelValue"],props:{checked:{type:Boolean,default:!1},isMultiple:Boolean,onChange:Function},setup:function(e,n){var l=n.emit;return{uiType:(0,r.computed)(function(){return e.isMultiple?"checkbox":"radio"}),model:(0,r.computed)({get:function(){return e.checked},set:function(a){return l("update:modelValue",a)}})}},render:function(){var e=this.uiType,n=this.model,l=this.$emit;return(0,r.createVNode)("label",{class:["vjs-check-controller",n?"is-checked":""],onClick:function(a){return a.stopPropagation()}},[(0,r.createVNode)("span",{class:"vjs-check-controller-inner is-".concat(e)},null),(0,r.createVNode)("input",{checked:n,class:"vjs-check-controller-original is-".concat(e),type:e,onChange:function(){return l("change",n)}},null)])}}),He=(0,r.defineComponent)({props:{nodeType:{required:!0,type:String},onClick:Function},render:function(){var e=this.nodeType,n=this.onClick,l=e==="objectStart"||e==="arrayStart";return l||e==="objectCollapsed"||e==="arrayCollapsed"?(0,r.createVNode)("span",{class:"vjs-carets vjs-carets-".concat(l?"open":"close"),onClick:n},[(0,r.createVNode)("svg",{viewBox:"0 0 1024 1024",focusable:"false","data-icon":"caret-down",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},[(0,r.createVNode)("path",{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"},null)])]):null}});var pe,te;function re(e){return re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},re(e)}function je(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function q(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"root",l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0,f=a||{},p=f.key,g=f.index,i=f.type,y=i===void 0?"content":i,u=f.showComma,h=u!==void 0&&u,N=f.length,P=N===void 0?1:N,_=je(e);if(_==="array"){var x=fe(e.map(function(C,v,t){return q(C,"".concat(n,"[").concat(v,"]"),l+1,{index:v,showComma:v!==t.length-1,length:P,type:y})}));return[q("[",n,l,{showComma:!1,key:p,length:e.length,type:"arrayStart"})[0]].concat(x,q("]",n,l,{showComma:h,length:e.length,type:"arrayEnd"})[0])}if(_==="object"){var $=Object.keys(e),A=fe($.map(function(C,v,t){return q(e[C],/^[a-zA-Z_]\w*$/.test(C)?"".concat(n,".").concat(C):"".concat(n,'["').concat(C,'"]'),l+1,{key:C,showComma:v!==t.length-1,length:P,type:y})}));return[q("{",n,l,{showComma:!1,key:p,index:g,length:$.length,type:"objectStart"})[0]].concat(A,q("}",n,l,{showComma:h,length:$.length,type:"objectEnd"})[0])}return[{content:e,level:l,key:p,index:g,path:n,showComma:h,length:P,type:y}]}function fe(e){if(typeof Array.prototype.flat=="function")return e.flat();for(var n=R(e),l=[];n.length;){var a=n.shift();Array.isArray(a)?n.unshift.apply(n,R(a)):l.push(a)}return l}function se(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new WeakMap;if(e==null)return e;if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);if(re(e)!=="object")return e;if(n.get(e))return n.get(e);if(Array.isArray(e)){var l=e.map(function(p){return se(p,n)});return n.set(e,l),l}var a={};for(var f in e)a[f]=se(e[f],n);return n.set(e,a),a}function he(e,n){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),l.push.apply(l,a)}return l}function me(e){for(var n=1;n<arguments.length;n++){var l=arguments[n]!=null?arguments[n]:{};n%2?he(Object(l),!0).forEach(function(a){Z(e,a,l[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):he(Object(l)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(l,a))})}return e}var Ne={showLength:{type:Boolean,default:!1},showDoubleQuotes:{type:Boolean,default:!0},renderNodeKey:Function,renderNodeValue:Function,selectableType:String,showSelectController:{type:Boolean,default:!1},showLine:{type:Boolean,default:!0},showLineNumber:{type:Boolean,default:!1},selectOnClickNode:{type:Boolean,default:!0},nodeSelectable:{type:Function,default:function(){return!0}},highlightSelectedNode:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!1},theme:{type:String,default:"light"},showKeyValueSpace:{type:Boolean,default:!0},editable:{type:Boolean,default:!1},editableTrigger:{type:String,default:"click"},onNodeClick:{type:Function},onBracketsClick:{type:Function},onIconClick:{type:Function},onValueChange:{type:Function}};const ze=(0,r.defineComponent)({name:"TreeNode",props:me(me({},Ne),{},{node:{type:Object,required:!0},collapsed:Boolean,checked:Boolean,style:Object,onSelectedChange:{type:Function}}),emits:["nodeClick","bracketsClick","iconClick","selectedChange","valueChange"],setup:function(e,n){var l=n.emit,a=(0,r.computed)(function(){return je(e.node.content)}),f=(0,r.computed)(function(){return"vjs-value vjs-value-".concat(a.value)}),p=(0,r.computed)(function(){return e.showDoubleQuotes?'"'.concat(e.node.key,'"'):e.node.key}),g=(0,r.computed)(function(){return e.selectableType==="multiple"}),i=(0,r.computed)(function(){return e.selectableType==="single"}),y=(0,r.computed)(function(){return e.nodeSelectable(e.node)&&(g.value||i.value)}),u=(0,r.reactive)({editing:!1}),h=function(v){var t,o,c=(o=(t=v.target)===null||t===void 0?void 0:t.value)==="null"?null:o==="undefined"?void 0:o==="true"||o!=="false"&&(o[0]+o[o.length-1]==='""'||o[0]+o[o.length-1]==="''"?o.slice(1,-1):typeof Number(o)=="number"&&!isNaN(Number(o))||o==="NaN"?Number(o):o);l("valueChange",c,e.node.path)},N=(0,r.computed)(function(){var v,t=(v=e.node)===null||v===void 0?void 0:v.content;return t===null?t="null":t===void 0&&(t="undefined"),a.value==="string"?'"'.concat(t,'"'):t+""}),P=function(){var v=e.renderNodeValue;return v?v({node:e.node,defaultValue:N.value}):N.value},_=function(){l("bracketsClick",!e.collapsed,e.node)},x=function(){l("iconClick",!e.collapsed,e.node)},$=function(){l("selectedChange",e.node)},A=function(){l("nodeClick",e.node),y.value&&e.selectOnClickNode&&l("selectedChange",e.node)},C=function(v){if(e.editable&&!u.editing){u.editing=!0;var t=function o(c){var d;c.target!==v.target&&((d=c.target)===null||d===void 0?void 0:d.parentElement)!==v.target&&(u.editing=!1,document.removeEventListener("click",o))};document.removeEventListener("click",t),document.addEventListener("click",t)}};return function(){var v,t=e.node;return(0,r.createVNode)("div",{class:{"vjs-tree-node":!0,"has-selector":e.showSelectController,"has-carets":e.showIcon,"is-highlight":e.highlightSelectedNode&&e.checked,dark:e.theme==="dark"},onClick:A,style:e.style},[e.showLineNumber&&(0,r.createVNode)("span",{class:"vjs-node-index"},[t.id+1]),e.showSelectController&&y.value&&t.type!=="objectEnd"&&t.type!=="arrayEnd"&&(0,r.createVNode)(Ke,{isMultiple:g.value,checked:e.checked,onChange:$},null),(0,r.createVNode)("div",{class:"vjs-indent"},[Array.from(Array(t.level)).map(function(o,c){return(0,r.createVNode)("div",{key:c,class:{"vjs-indent-unit":!0,"has-line":e.showLine}},null)}),e.showIcon&&(0,r.createVNode)(He,{nodeType:t.type,onClick:x},null)]),t.key&&(0,r.createVNode)("span",{class:"vjs-key"},[(v=e.renderNodeKey,v?v({node:e.node,defaultKey:p.value||""}):p.value),(0,r.createVNode)("span",{class:"vjs-colon"},[":".concat(e.showKeyValueSpace?" ":"")])]),(0,r.createVNode)("span",null,[t.type!=="content"&&t.content?(0,r.createVNode)(qe,{data:t.content.toString(),onClick:_},null):(0,r.createVNode)("span",{class:f.value,onClick:!e.editable||e.editableTrigger&&e.editableTrigger!=="click"?void 0:C,onDblclick:e.editable&&e.editableTrigger==="dblclick"?C:void 0},[e.editable&&u.editing?(0,r.createVNode)("input",{value:N.value,onChange:h,style:{padding:"3px 8px",border:"1px solid #eee",boxShadow:"none",boxSizing:"border-box",borderRadius:5,fontFamily:"inherit"}},null):P()]),t.showComma&&(0,r.createVNode)("span",null,[","]),e.showLength&&e.collapsed&&(0,r.createVNode)("span",{class:"vjs-comment"},[(0,r.createTextVNode)(" // "),t.length,(0,r.createTextVNode)(" items ")])])])}}});function ve(e,n){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),l.push.apply(l,a)}return l}function B(e){for(var n=1;n<arguments.length;n++){var l=arguments[n]!=null?arguments[n]:{};n%2?ve(Object(l),!0).forEach(function(a){Z(e,a,l[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):ve(Object(l)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(l,a))})}return e}const Qe=(0,r.defineComponent)({name:"Tree",props:B(B({},Ne),{},{data:{type:[String,Number,Boolean,Array,Object],default:null},collapsedNodeLength:{type:Number,default:1/0},deep:{type:Number,default:1/0},pathCollapsible:{type:Function,default:function(){return!1}},rootPath:{type:String,default:"root"},virtual:{type:Boolean,default:!1},height:{type:Number,default:400},itemHeight:{type:Number,default:20},selectedValue:{type:[String,Array],default:function(){return""}},collapsedOnClickBrackets:{type:Boolean,default:!0},style:Object,onSelectedChange:{type:Function},theme:{type:String,default:"light"}}),slots:["renderNodeKey","renderNodeValue"],emits:["nodeClick","bracketsClick","iconClick","selectedChange","update:selectedValue","update:data"],setup:function(e,n){var l=n.emit,a=n.slots,f=(0,r.ref)(),p=(0,r.computed)(function(){return q(e.data,e.rootPath)}),g=function(t,o){return p.value.reduce(function(c,d){var w,k=d.level>=t||d.length>=o,T=(w=e.pathCollapsible)===null||w===void 0?void 0:w.call(e,d);return d.type!=="objectStart"&&d.type!=="arrayStart"||!k&&!T?c:B(B({},c),{},Z({},d.path,1))},{})},i=(0,r.reactive)({translateY:0,visibleData:null,hiddenPaths:g(e.deep,e.collapsedNodeLength)}),y=(0,r.computed)(function(){for(var t=null,o=[],c=p.value.length,d=0;d<c;d++){var w=B(B({},p.value[d]),{},{id:d}),k=i.hiddenPaths[w.path];if(t&&t.path===w.path){var T=t.type==="objectStart",M=B(B(B({},w),t),{},{showComma:w.showComma,content:T?"{...}":"[...]",type:T?"objectCollapsed":"arrayCollapsed"});t=null,o.push(M)}else{if(k&&!t){t=w;continue}if(t)continue;o.push(w)}}return o}),u=(0,r.computed)(function(){var t=e.selectedValue;return t&&e.selectableType==="multiple"&&Array.isArray(t)?t:[t]}),h=(0,r.computed)(function(){return!e.selectableType||e.selectOnClickNode||e.showSelectController?"":"When selectableType is not null, selectOnClickNode and showSelectController cannot be false at the same time, because this will cause the selection to fail."}),N=function(){var t=y.value;if(e.virtual){var o,c=e.height/e.itemHeight,d=((o=f.value)===null||o===void 0?void 0:o.scrollTop)||0,w=Math.floor(d/e.itemHeight),k=w<0?0:w+c>t.length?t.length-c:w;k<0&&(k=0);var T=k+c;i.translateY=k*e.itemHeight,i.visibleData=t.filter(function(M,m){return m>=k&&m<T})}else i.visibleData=t},P=function(){N()},_=function(t){var o,c,d=t.path,w=e.selectableType;if(w==="multiple"){var k=u.value.findIndex(function(S){return S===d}),T=R(u.value);k!==-1?T.splice(k,1):T.push(d),l("update:selectedValue",T),l("selectedChange",T,R(u.value))}else if(w==="single"&&u.value[0]!==d){var M=(o=u.value,c=1,function(S){if(Array.isArray(S))return S}(o)||function(S,H){var F=S==null?null:typeof Symbol<"u"&&S[Symbol.iterator]||S["@@iterator"];if(F!=null){var ce,ue,W=[],G=!0,de=!1;try{for(F=F.call(S);!(G=(ce=F.next()).done)&&(W.push(ce.value),!H||W.length!==H);G=!0);}catch(_e){de=!0,ue=_e}finally{try{G||F.return==null||F.return()}finally{if(de)throw ue}}return W}}(o,c)||Ce(o,c)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())[0],m=d;l("update:selectedValue",m),l("selectedChange",m,M)}},x=function(t){l("nodeClick",t)},$=function(t,o){if(t)i.hiddenPaths=B(B({},i.hiddenPaths),{},Z({},o,1));else{var c=B({},i.hiddenPaths);delete c[o],i.hiddenPaths=c}},A=function(t,o){e.collapsedOnClickBrackets&&$(t,o.path),l("bracketsClick",t,o)},C=function(t,o){$(t,o.path),l("iconClick",t,o)},v=function(t,o){var c=se(e.data),d=e.rootPath;new Function("data","val","data".concat(o.slice(d.length),"=val"))(c,t),l("update:data",c)};return(0,r.watchEffect)(function(){h.value&&function(t){throw new Error("[VueJSONPretty] ".concat(t))}(h.value)}),(0,r.watchEffect)(function(){y.value&&N()}),(0,r.watch)(function(){return e.deep},function(t){t&&(i.hiddenPaths=g(t,e.collapsedNodeLength))}),(0,r.watch)(function(){return e.collapsedNodeLength},function(t){t&&(i.hiddenPaths=g(e.deep,t))}),function(){var t,o,c=(t=e.renderNodeKey)!==null&&t!==void 0?t:a.renderNodeKey,d=(o=e.renderNodeValue)!==null&&o!==void 0?o:a.renderNodeValue,w=i.visibleData&&i.visibleData.map(function(k){return(0,r.createVNode)(ze,{key:k.id,node:k,collapsed:!!i.hiddenPaths[k.path],theme:e.theme,showDoubleQuotes:e.showDoubleQuotes,showLength:e.showLength,checked:u.value.includes(k.path),selectableType:e.selectableType,showLine:e.showLine,showLineNumber:e.showLineNumber,showSelectController:e.showSelectController,selectOnClickNode:e.selectOnClickNode,nodeSelectable:e.nodeSelectable,highlightSelectedNode:e.highlightSelectedNode,editable:e.editable,editableTrigger:e.editableTrigger,showIcon:e.showIcon,showKeyValueSpace:e.showKeyValueSpace,renderNodeKey:c,renderNodeValue:d,onNodeClick:x,onBracketsClick:A,onIconClick:C,onSelectedChange:_,onValueChange:v,style:e.itemHeight&&e.itemHeight!==20?{lineHeight:"".concat(e.itemHeight,"px")}:{}},null)});return(0,r.createVNode)("div",{ref:f,class:{"vjs-tree":!0,"is-virtual":e.virtual,dark:e.theme==="dark"},onScroll:e.virtual?P:void 0,style:e.showLineNumber?B({paddingLeft:"".concat(12*Number(p.value.length.toString().length),"px")},e.style):e.style},[e.virtual?(0,r.createVNode)("div",{class:"vjs-tree-list",style:{height:"".concat(e.height,"px")}},[(0,r.createVNode)("div",{class:"vjs-tree-list-holder",style:{height:"".concat(y.value.length*e.itemHeight,"px")}},[(0,r.createVNode)("div",{class:"vjs-tree-list-holder-inner",style:{transform:"translateY(".concat(i.translateY,"px)")}},[w])])]):w])}}});var Ue=ke.Z;const Ye={key:0,class:"my-6 w-full text-sm text-white"},Re={class:"flex h-min w-full flex-1 flex-col justify-center overflow-auto"},Ze={class:"relative flex flex-grow items-center justify-start gap-2 whitespace-nowrap px-3 text-xs line-clamp-1 w-available"},Je={class:"relative flex flex-grow items-center justify-start gap-2 whitespace-nowrap px-3 text-xs line-clamp-1 w-available"},We={class:"relative flex flex-grow items-center justify-start gap-2 whitespace-nowrap px-3 text-xs line-clamp-1 w-available"},Ge={class:"relative flex flex-grow flex-col items-start justify-start gap-4 overflow-clip px-3 text-xs line-clamp-1 w-available max-h-[60vh] whitespace-break-spaces"},Xe=J({__name:"LogModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},name:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const n=e,l=ge(()=>{if(n.data)try{return JSON.parse(be(n.data.message))}catch{return n.data.message}});return(a,f)=>{const p=z("Button");return O(),Q(Ie,{close:e.close,open:!0,"max-width":"max-w-7xl max-h-[80vh]",title:""},{actions:V(()=>[j(p,{id:"no",onclick:e.close,type:"button",color:"auto-alpha",variant:"text"},{default:V(()=>[ye(b(a.$t("Close")),1)]),_:1},8,["onclick"])]),default:V(()=>[e.data?(O(),E("div",Ye,[s("div",Re,[s("div",Ze,[s("span",null,b(a.$t("Time"))+":",1),s("span",null,b(L(we)(e.data.time)),1)]),s("div",Je,[s("span",null,b(a.$t("Type"))+":",1),s("span",{class:"h-5 w-20 rounded-full px-2 text-center leading-5",style:ie(`background: ${e.data.color}`)},b(e.data.type),5)]),s("div",We,[s("span",null,b(a.$t("Level"))+":",1),s("span",null,b(e.data.level),1)]),s("div",Ge,[s("span",null,b(a.$t("Message"))+":",1),j(Me,{static:!1},{default:V(()=>[j(L(Ue),{class:"h-fit",data:l.value},null,8,["data"])]),_:1})])])])):ne("",!0)]),_:1},8,["close"])}}}),et={class:"flex flex-col gap-2 overflow-auto py-2 max-h-[60vh]"},tt={class:"-mb-2 flex flex-grow items-center justify-start gap-3 rounded-md px-2.5"},nt={class:"text-center text-xs font-semibold uppercase"},lt=["onClick"],at={class:"text-center text-xs font-semibold uppercase"},ot=["onclick"],rt=J({__name:"LogTypeSelector",props:Oe({refetch:{type:Function,required:!0},logTypes:{type:Array,required:!0}},{selectedTypes:{type:Array,required:!1,default:()=>[]},selectedTypesModifiers:{}}),emits:["update:selectedTypes"],setup(e){const n=e,l=D(!1),a=Te(e,"selectedTypes");I(l,g=>{n.logTypes&&console.log("checkboxState",g)}),I(n,()=>{a.value&&(l.value=X(a.value,n.logTypes),n.refetch())}),xe(()=>{n.logTypes});function f(g){a.value.some(i=>i.name===g.name)?a.value=a.value.filter(i=>i.name!==g.name):a.value=[...a.value,g]}function p(g){if(!n.logTypes)return;const i=n.logTypes.filter(y=>y.type===g.type);i.every(y=>a.value.some(u=>u.name===y.name))?a.value=a.value.filter(y=>!i.some(u=>u.name===y.name)):a.value=[...a.value,...i]}return(g,i)=>{const y=z("Checkbox");return O(),Q(le,{class:"relative flex items-center justify-center gap-2 rounded-lg transition-colors duration-200 hover:bg-auto-5/6"},{button:V(()=>[j(ae,{"class-name":"w-6",icon:"chevronDown"})]),default:V(()=>{var u;return[s("div",et,[s("div",tt,[j(y,{modelValue:l.value,"onUpdate:modelValue":i[0]||(i[0]=h=>l.value=h),label:"All"},null,8,["modelValue"]),s("p",nt,b(g.$t("All")),1)]),(O(!0),E(K,null,U(L(Le)(((u=e.logTypes)==null?void 0:u.filter(h=>h.type!=="spacer"))??[],"type"),h=>{var N,P,_;return O(),E(K,{key:h[0].type},[s("div",{class:"relative mt-2 -mb-1 flex items-center justify-start gap-2 self-stretch px-2.5",onClick:()=>p(h[0])},[j(y,{"model-value":L(X)((N=a.value)==null?void 0:N.filter(x=>x.type===h[0].type),h),color:L(X)((P=a.value)==null?void 0:P.filter(x=>x.type===h[0].type),h)===!0?`${(_=h[0])==null?void 0:_.color}44`:""},null,8,["model-value","color"]),s("p",at,b(h[0].type),1),i[1]||(i[1]=s("div",{class:"flex-grow h-px bg-[#e2f0fd]/[0.08]"},null,-1))],8,lt),(O(!0),E(K,null,U(h,x=>{var $,A;return O(),E("button",{key:x.name,class:"flex flex-grow items-center justify-start gap-3 rounded-md px-2.5",onclick:()=>f(x)},[j(y,{"model-value":($=a.value)==null?void 0:$.some(C=>C.name===x.name),color:(A=a.value)!=null&&A.some(C=>C.name===x.name)?`${x.color}44`:""},null,8,["model-value","color"]),s("span",{style:ie(`background: ${x.color}44`),class:"flex-grow text-sm font-medium text-[#eeecec] rounded-full px-2 w-32 h-5 leading-5 text-center"},b(x.display_name),5)],8,ot)}),128))],64)}),128))])]}),_:1})}}}),st={class:"mx-2 flex flex-col overflow-auto rounded-lg outline outline-1 min-w-available min-h-available divide-y divide-auto-12/8 h-inherit outline-auto-alpha-5 max-h-[78vh] min-h-[78vh]"},it={class:"flex flex-grow-0 items-start justify-start self-stretch rounded-tl-lg rounded-tr-lg w-available"},ct={class:"flex w-full flex-1 gap-4 text-xs font-medium bg-auto-2/10"},ut={class:"relative flex h-11 items-center justify-between gap-3 self-stretch p-3 group/tableButton w-[150px] min-w-[150px]"},dt={class:"flex w-full flex-col items-start justify-between py-2 bg-auto-1"},pt=["onClick"],ft={class:"relative flex h-11 items-center justify-between gap-3 self-stretch p-3 group/tableButton w-[120px] min-w-[120px]"},ht={class:"relative flex h-11 items-center justify-between gap-3 self-stretch p-3 group/tableButton w-[120px] min-w-[120px]"},mt={class:"flex w-full flex-col items-start justify-between py-2 bg-auto-1"},vt=["onClick"],yt={class:"relative flex h-11 items-center justify-between gap-3 self-stretch p-3 group/tableButton w-available"},gt={class:"relative flex h-11 w-20 items-center justify-between gap-3 self-stretch p-3 group/tableButton min-w-20"},bt={class:"overflow-auto divide-y divide-auto-12/5 max-h-available flex-1"},wt={class:"flex h-12 w-full flex-1 justify-center gap-4 odd:bg-white/[0.04]"},xt={class:"relative flex flex-grow items-center justify-start whitespace-nowrap px-3 text-xs line-clamp-1 w-[150px] min-w-[150px]"},kt={class:"relative flex flex-grow items-center justify-center whitespace-nowrap text-xs line-clamp-1 w-[120px] min-w-[120px]"},Ct={class:"relative flex flex-grow items-center justify-start whitespace-nowrap px-3 text-xs line-clamp-1 w-[120px] min-w-[120px]"},jt=["onClick"],zt=J({__name:"Desktop",setup(e){const n=D([]),l=D([]),a=D([]),f=D(50),p=D([]),g=D(""),i=$e(g,500),{data:y,refetch:u}=ee({path:"/dashboard/logs",queryKey:["logs"],refetchInterval:5*60*1e3,data:{limit:f,types:l,levels:a,filter:i}});I(y,t=>{t&&(p.value=t)});const{data:h}=ee({path:"/dashboard/logs/types"}),{data:N}=ee({path:"/dashboard/logs/levels"});I(f,()=>{u()}),I(i,()=>{u()}),I(N,t=>{t&&(a.value=t)}),I(n,t=>{t&&(l.value=t.map(o=>o.name),u())});function P(t){a.value.includes(t.level)&&(p.value=p.value.slice(0,p.value.length-1),p.value=[t,...p.value])}Fe(Ee,"NewLog",P),xe(()=>{!y.value||!N.value||!n.value||(p.value=y.value,a.value=N.value,u())});const _=D(null),x=D(!1);function $(t){console.log(t),_.value=t,x.value=!0}function A(t){t.stopPropagation(),_.value=null,x.value=!1}function C(){Ae().delete("/dashboard/logs").catch(()=>{alert("you'd think this would actually do something huh 😋")}).then(()=>{p.value=[]})}function v(t){a.value.includes(t)?a.value=a.value.filter(o=>o!==t):a.value.push(t),u()}return(t,o)=>{const c=z("Checkbox"),d=z("InputText"),w=z("Button");return O(),Q(L(Pe),null,{default:V(()=>[j(L(Be),{fullscreen:!0},{default:V(()=>[j(De,{"grid-style":4,description:"",title:"Logs"},{cta:V(()=>o[2]||(o[2]=[])),default:V(()=>{var k,T,M;return[s("table",st,[s("thead",it,[s("tr",ct,[s("th",ut,[s("span",null,b(t.$t("Limit"))+" ("+b(f.value)+")",1),j(le,{class:"relative flex items-center justify-center gap-2 rounded-lg transition-colors duration-200 hover:bg-auto-5/6",translate:"translate-x-1/4"},{button:V(()=>[j(ae,{"class-name":"w-6",icon:"chevronDown"})]),default:V(()=>[s("div",dt,[(O(),E(K,null,U([5,10,20,50,100,500,1e3,2e3],m=>s("button",{class:"flex flex-grow items-center justify-start gap-3 rounded-md px-2.5",onClick:S=>f.value=m},[j(c,{"model-value":f.value===m,label:m},null,8,["model-value","label"]),s("span",null,b(m),1)],8,pt)),64))])]),_:1})]),s("th",ft,[s("span",null,b(t.$t("Type")),1),L(h)?(O(),Q(rt,{key:0,"selected-types":n.value,"onUpdate:selectedTypes":o[0]||(o[0]=m=>n.value=m),"log-types":L(h),refetch:L(u)},null,8,["selected-types","log-types","refetch"])):ne("",!0)]),s("th",ht,[s("span",null,b(t.$t("Level")),1),j(le,{class:"relative flex items-center justify-center gap-2 rounded-lg transition-colors duration-200 hover:bg-auto-5/6"},{button:V(()=>[j(ae,{"class-name":"w-6",icon:"chevronDown"})]),default:V(()=>[s("div",mt,[(O(!0),E(K,null,U(L(N),m=>{var S;return O(),E("button",{class:"flex flex-grow items-center justify-start gap-3 rounded-md px-2.5",onClick:()=>v(m)},[j(c,{"model-value":(S=a.value)==null?void 0:S.includes(m),label:m},null,8,["model-value","label"]),s("span",null,b(m),1)],8,vt)}),256))])]),_:1})]),s("th",yt,[s("span",null,b(t.$t("Message")),1),j(d,{id:"filter",modelValue:g.value,"onUpdate:modelValue":o[1]||(o[1]=m=>g.value=m),variant:"filled",size:"small",class:"mr-auto ml-4 min-w-40",name:"",placeholder:"Filter..."},null,8,["modelValue"])]),s("th",gt,[j(w,{id:"clear","class-name":"!py-1 !h-8",color:"theme",title:"Clear logs",variant:"text",onClick:C},{default:V(()=>[s("span",null,b(t.$t("clear")),1)]),_:1})])])]),s("tbody",bt,[(O(!0),E(K,null,U(p.value??[],m=>{var S,H;return O(),E("tr",wt,[s("td",xt,b(L(we)(m.time)),1),s("td",kt,[s("div",{style:ie(`background: ${m.color}55`),class:"h-5 w-min rounded-full px-2 text-center leading-5"},b((H=(S=L(h))==null?void 0:S.find(F=>F.name===m.type))==null?void 0:H.display_name),5)]),s("td",Ct,b(m.level),1),s("td",{class:"relative flex flex-grow cursor-pointer items-center justify-start whitespace-nowrap px-3 text-xs line-clamp-1 w-available",onClick:()=>$(m)},b(L(be)(m.message)),9,jt)])}),256))])]),(k=_.value)!=null&&k.level?(O(),Q(Xe,{key:0,id:(T=_.value)==null?void 0:T.level,close:A,data:_.value,name:(M=_.value)==null?void 0:M.level,open:!0},null,8,["id","data","name"])):ne("",!0)]}),_:1})]),_:1})]),_:1})}}});export{zt as default};
