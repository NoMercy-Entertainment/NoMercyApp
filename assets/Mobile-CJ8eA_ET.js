import{$ as Q,d as R,w as $,f as E,aG as K,aJ as W,c as V,o as z,l as J,y as X,a0 as n,au as Y,T as Z,i as L,t as ee,ar as ae,Q as l}from"./vue-ionic-DNlOg-eX.js";import{b1 as oe}from"./vendor-C28OoIfY.js";import{u as s,l as O,i as j,k as se,r,aq as te,bH as ne,bI as le,bJ as re}from"./index-B5eD0-7Z.js";import{g as i}from"./imageModal-C87_bPhe.js";import{S as ie}from"./syncPlugin-BjcpQxxo.js";import{A as ue}from"./autoSkipPlugin-ju-7gkaT.js";import{D as ce}from"./desktopUIPlugin-DJhZHzmw.js";import{n as pe,O as me}from"./video-player-D6q8cE5d.js";import{V as de}from"./videoNoMercyConnectPlugin-B08ofNSe.js";import{u as fe}from"./useServerClient-jLBPto26.js";import"./media-C2AqgyMX.js";import"./icons-BW5E66pf.js";import"./api-BBofn2cc.js";import"./swiper-D00Cnjmx.js";import"./rxjs-BCp2L9Rn.js";import"./music-player-JWnzXDV1.js";import"./buttons-DnucOQvv.js";import"./baseUIPlugin-CMAu4V-9.js";import"./subtitles-octopus-By2PrHjB.js";import"./useInfiniteServerClient-CPM85V8A.js";const ze=Q({__name:"Mobile",setup(ve){var c;const{data:q}=fe({enabled:!((c=s.value.features)!=null&&c.nomercyConnect)}),e=R();function u(o){var p,m,d,f,v,g,y,b,k,P,C,S,w,I,M,_,h,N,T,U,B,A,x,D;const t={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:(o==null?void 0:o.filter(a=>!!a.id))??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:((p=s.value)==null?void 0:p.accessToken)||localStorage.getItem("access_token")||"",basePath:(m=se.value)==null?void 0:m.serverBaseUrl,forceTvMode:(l("android")||l("ios"))&&!l("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||l("capacitor"),renderAhead:100,disableAutoPlayback:(d=s.value.features)==null?void 0:d.nomercyConnect};if(e.value=pe("player1").setup(t),(f=e.value)==null||f.once("back",()=>{}),(v=s.value.features)!=null&&v.nomercyConnect){const a=new de;(g=e.value)==null||g.registerPlugin("videoNoMercyConnect",a),(y=e.value)==null||y.usePlugin("videoNoMercyConnect")}const F=new ce;(b=e.value)==null||b.registerPlugin("desktopUI",F),(k=e.value)==null||k.usePlugin("desktopUI");const G=new ue;if((P=e.value)==null||P.registerPlugin("autoSkip",G),(C=e.value)==null||C.usePlugin("autoSkip"),!((S=s.value.features)!=null&&S.nomercyConnect)){const a=new ie;(w=e.value)==null||w.registerPlugin("sync",a),(I=e.value)==null||I.usePlugin("sync")}const H=new me;(M=e.value)==null||M.registerPlugin("octopus",H),(_=e.value)==null||_.usePlugin("octopus"),(h=e.value)==null||h.once("play",()=>{var a;(a=e.value)==null||a.enterFullscreen()}),(N=e.value)==null||N.on("playlistComplete",()=>{var a;(a=e.value)==null||a.dispose(),r.back()}),(T=e.value)==null||T.on("dispose",()=>{te(),ne(),r.back()}),(U=e.value)==null||U.on("back",()=>{var a;(a=e.value)==null||a.dispose()}),(B=e.value)==null||B.on("play",()=>{i(!0)}),(A=e.value)==null||A.on("pause",()=>{i(!1)}),(x=e.value)==null||x.on("ready",()=>{le(),re(),O.stop()}),(D=e.value)==null||D.on("item",()=>{var a;(a=e.value)==null||a.play()}),oe.addListener("backButton",()=>{var a;(a=e.value)==null||a.emit("back-button-hyjack"),r.back()})}return $(q,o=>{!o||!o.length||u(o)}),E(()=>{var o;O.stop(),(o=s.value.features)!=null&&o.nomercyConnect&&u()}),K(()=>{i(!1)}),W(()=>{var o;(o=e.value)==null||o.dispose()}),(o,t)=>(z(),V(n(ae),null,{default:J(()=>[X(n(Y),{fullscreen:!0},{default:J(()=>[(z(),V(Z,{to:"body"},[L("div",{class:ee(["absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199",{"mb-28":n(j),"mb-0":!n(j)}])},t[0]||(t[0]=[L("div",{id:"player1",class:"group nomercyplayer"},null,-1)]),2)]))]),_:1})]),_:1}))}});export{ze as default};
