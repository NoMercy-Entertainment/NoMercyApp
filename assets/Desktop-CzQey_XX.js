import{aG as V,bD as j,K as z,L as G,az as J,cg as R,cJ as u,j as q,o as Q,a7 as W,a as X,aI as Y,bO as Z,bx as t,ba as $,dI as ee,bm as O,bk as ae}from"./index-DbxIITaY.js";import{A as se,S as oe,O as le}from"./octopusPlugin-DfXsiF8e.js";import{n as ne}from"./subtitles-octopus-jMz-yFdq.js";import{D as te}from"./desktopUIPlugin-BdjJE1Ez.js";import{K as re}from"./keyHandlerPlugin-DqzKdFoA.js";const ge=V({__name:"Desktop",setup(ue){const{data:i}=j({}),e=z(),c=s=>{var d,p,v,g,m,f,P,y,k,b,S,w,I,h,C,D,_,x,E,M,T,U;const l={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:(s==null?void 0:s.filter(a=>!!a.id))??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:(d=ee.value)==null?void 0:d.accessToken,basePath:(p=$.value)==null?void 0:p.serverBaseUrl,forceTvMode:(t("android")||t("ios"))&&!t("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||t("capacitor"),renderAhead:100,customStorage:{set:(a,o)=>new Promise(n=>{localStorage.setItem(a,o),n()}),get:a=>new Promise(o=>{o(localStorage.getItem(a))}),remove:a=>new Promise(o=>{localStorage.removeItem(a),o()})}};(v=e.value)==null||v.dispose(),e.value=ne("player1").setup(l),(g=e.value)==null||g.once("back",()=>{O.back()});const B=new te;(m=e.value)==null||m.registerPlugin("desktopUI",B),(f=e.value)==null||f.usePlugin("desktopUI");const L=new se;(P=e.value)==null||P.registerPlugin("autoSkip",L),(y=e.value)==null||y.usePlugin("autoSkip");const A=new re;(k=e.value)==null||k.registerPlugin("keyHandler",A),(b=e.value)==null||b.usePlugin("keyHandler");const F=new oe;(S=e.value)==null||S.registerPlugin("sync",F),(w=e.value)==null||w.usePlugin("sync");const K=new le;(I=e.value)==null||I.registerPlugin("octopus",K),(h=e.value)==null||h.usePlugin("octopus"),(C=e.value)==null||C.once("play",()=>{var a;(a=e.value)==null||a.enterFullscreen()}),(D=e.value)==null||D.on("playlistComplete",()=>{var a;(a=e.value)==null||a.dispose(),O.back()}),(_=e.value)==null||_.once("back",()=>{}),(x=e.value)==null||x.on("play",()=>{u(!0)}),(E=e.value)==null||E.on("pause",()=>{u(!1)}),(M=e.value)==null||M.on("fullscreen",a=>{var o;(o=window.external)==null||o.sendMessage(a?"enterFullscreen":"exitFullscreen")}),(T=e.value)==null||T.on("ready",()=>{var n;ae.stop();const a=new MutationObserver(N=>N.filter(r=>r.type==="childList").forEach(r=>{r.addedNodes.forEach(H=>{H instanceof HTMLElement&&H.tagName==="VIDEO"&&console.log("video removed")})})),o=(n=e.value)==null?void 0:n.getVideoElement();o&&a.observe(o,{childList:!0,subtree:!0})}),(U=e.value)==null||U.on("item",()=>{var a;(a=e.value)==null||a.play()})};return G(i,s=>{var l;(l=e.value)==null||l.dispose(),c(s)}),J(()=>{var s;(s=e.value)==null||s.dispose(),c(i.value)}),R(()=>{var s;(s=e.value)==null||s.dispose(),u(!1)}),(s,l)=>(Q(),q(Y(Z),null,{default:W(()=>l[0]||(l[0]=[X("div",{id:"player1",class:"group nomercyplayer"},null,-1)])),_:1}))}});export{ge as default};
//# sourceMappingURL=Desktop-CzQey_XX.js.map
