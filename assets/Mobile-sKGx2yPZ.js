import"./useBaseQuery-BjcRoUle.js";import"./useInfiniteServerClient-C6VvXOvL.js";import"./useQueryClient-6VbozcbB.js";import"./useQuery-8mENMoCn.js";import{Ac as n,Cc as P,Do as _,Eo as C,Fs as p,Hs as w,Is as d,Ma as v,Ms as h,Oi as M,Qa as I,Ss as S,U as f,Ws as N,_c as m,ca as D,da as T,ds as i,fo as U,ga as x,hc as A,i as a,ic as y,io as B,jc as V,oa as s,sa as L,ua as j}from"./index-hMnv1PVv.js";import{s as c}from"./imageModal-UEoF3pr0.js";import{t as z}from"./useServerClient-BS75nouq.js";import{i as E,n as F,o as O,r as H,s as Q}from"./VideoPlayer-D8WcTJCV.js";import"./buttons-Dz19tni1.js";import{t as R}from"./videoNoMercyConnectPlugin-BQZJ-too.js";S();var W=N({__name:"Mobile",setup(q){const{data:u}=z({enabled:!s.value.features?.nomercyConnect}),e=P();function r(o){const l={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:o?.filter(t=>!!t.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:s.value?.accessToken||localStorage.getItem("access_token")||"",basePath:M.value?.serverBaseUrl,forceTvMode:(i("android")||i("ios"))&&!i("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||i("capacitor"),renderAhead:100,disableAutoPlayback:s.value.features?.nomercyConnect};if(e.value=H("player1").setup(l),e.value?.once("back",()=>{history.state.back?a.back():a.replace("/")}),s.value.features?.nomercyConnect){const t=new R;e.value?.registerPlugin("videoNoMercyConnect",t),e.value?.usePlugin("videoNoMercyConnect")}const g=new E;e.value?.registerPlugin("desktopUI",g),e.value?.usePlugin("desktopUI");const b=new O;if(e.value?.registerPlugin("autoSkip",b),e.value?.usePlugin("autoSkip"),!s.value.features?.nomercyConnect){const t=new Q;e.value?.registerPlugin("sync",t),e.value?.usePlugin("sync")}const k=new F;e.value?.registerPlugin("octopus",k),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?a.back():a.replace("/")}),e.value?.on("dispose",async()=>{await T(),await L(),history.state.back?a.back():await a.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{c(!0)}),e.value?.on("pause",()=>{c(!1)}),e.value?.on("ready",async()=>{await j(),await x(),await D(),f.stop()}),e.value?.on("item",()=>{e.value?.play()}),I.addListener("backButton",()=>{e.value?.emit("back-button-hyjack"),e.value?.dispose()})}return A(u,o=>{o?.length&&r(o)}),C(()=>{f.stop(),s.value.features?.nomercyConnect?r():u.value?.length&&r(u.value)}),_(()=>{e.value?.dispose(),c(!1)}),(o,l)=>(y(),d(n(U),null,{default:m(()=>[w(n(B),{fullscreen:!0},{default:m(()=>[(y(),d(h,{to:"body"},[p("div",{class:V([{"mb-28":n(v),"mb-0":!n(v)},"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"])},[...l[0]||(l[0]=[p("div",{id:"player1",class:"group nomercyplayer"},null,-1)])],2)]))]),_:1})]),_:1}))}}),oe=W;export{oe as default};
