{"version":3,"file":"Desktop-Dqtb870l.js","sources":["../../src/components/MusicPlayer/components/FloatingPersonCard.vue","../../src/views/Base/Person/Desktop.vue"],"sourcesContent":["<script lang=\"ts\" setup>\nimport { PropType, ref, watch } from 'vue';\n\nimport type { PersonResponseItem } from '@/types/api/base/person';\nimport TMDBImage from \"@/components/Images/TMDBImage.vue\";\n\nconst props = defineProps({\n  data: {\n    type: Object as PropType<PersonResponseItem | undefined>,\n    required: false,\n  },\n});\n\nconst currentImage = ref(props.data?.images?.profiles?.[0]);\n\nwatch(props, (value) => {\n  currentImage.value = value.data?.images?.profiles?.[0];\n});\n\n</script>\n\n<template>\n  <div\n    class=\"flex flex-col justify-start h-[calc(100%-1rem)] items-start w-40 sm:w-48 2xl:w-80 mx-auto absolute left-4 sm:left-10 top-4 rounded-2xl\">\n\n    <div class=\"sticky top-14 flex h-auto w-full flex-col gap-4\">\n      <div :id=\"data?.id\" :class=\"data?.deathday ? 'outline outline-white' : ''\"\n        class=\"relative z-0 block w-auto select-none overflow-clip rounded-2xl transitioning aspect-poster\">\n        <div class=\"relative flex h-full w-full flex-col\">\n          <TMDBImage :path=\"currentImage?.src ?? data?.poster\" :size=\"180\" :colorPalette=\"data?.color_palette?.profile\"\n            className=\"pointer-events-none absolute inset-0 z-20 flex h-full w-full object-cover transition-transform duration-500 trickle-div\" />\n        </div>\n      </div>\n      <div class=\"relative grid grid-cols-4 gap-2 group/personCard\">\n        <div v-for=\"profile in data?.images?.profiles?.slice(0, 4)\" :key=\"profile.src\"\n          @click=\"() => currentImage = profile\"\n          class=\"relative h-auto w-full cursor-pointer overflow-clip rounded-xl transition-all duration-300 aspect-poster focus-outline\">\n\n          <div :class=\"profile.src == currentImage?.src ? 'opacity-0' : 'opacity-100'\"\n            class=\"absolute inset-0 z-30 grid h-auto w-full items-center justify-center bg-black/60 group-hover/personCard:opacity-0 transition-all duration-300 aspect-poster\">\n          </div>\n\n          <TMDBImage :path=\"profile.src\" :colorPalette=\"data?.color_palette?.profile\" :size=\"182\"\n            className=\"relative z-0 block h-auto w-full select-none transitioning aspect-poster\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n","<script setup lang=\"ts\">\nimport { computed, onMounted, onUnmounted, watch } from 'vue';\nimport { useRoute } from \"vue-router\";\nimport { IonPage, IonContent } from '@ionic/vue';\n\nimport { PersonResponseItem } from \"@/types/api/base/person\";\n\nimport { setBackground, setColorPalette } from '@/store/ui';\nimport { breakDescription, breakTitle, setTitle, unique } from \"@/lib/stringArray\";\nimport useServerClient from \"@/lib/clients/useServerClient\";\nimport { isNative } from \"@/config/global\";\nimport i18next from \"@/config/i18next\";\nimport { currentSong } from \"@/store/audioPlayer\";\n\nimport SpriteIcon from \"@/components/Images/icons/SpriteIcon.vue\";\nimport DropdownMenu from \"@/Layout/Desktop/components/Menus/DropdownMenu.vue\";\nimport MoooomIcon from \"@/components/Images/icons/MoooomIcon.vue\";\nimport DropdownLink from \"@/components/MusicPlayer/components/DropdownLink.vue\";\nimport MediaCarousel from \"@/components/Carousel/MediaCarousel.vue\";\nimport CreditGroup from \"@/components/MusicPlayer/components/CreditGroup.vue\";\nimport FloatingPersonCard from \"@/components/MusicPlayer/components/FloatingPersonCard.vue\";\nimport ScrollContainer from \"@/Layout/Desktop/components/ScrollContainer.vue\";\nimport NotFound from \"@/Layout/Desktop/components/NotFound.vue\";\n\nconst route = useRoute();\nconst { data, isError } = useServerClient<PersonResponseItem>({\n  queryKey: ['base', 'person', route.params.id],\n});\n\nconst age = computed(() => {\n  if (data.value?.deathday) {\n    const birthDate = new Date(data.value?.birthday);\n    const deathday = new Date(data.value?.deathday);\n    const a = deathday.getFullYear() - birthDate.getFullYear();\n    const m = deathday.getMonth() - birthDate.getMonth();\n    if (m < 0 || (m === 0 && deathday.getDate() < birthDate.getDate())) {\n      return a - 1;\n    }\n    return a;\n  }\n  if (data.value?.birthday) {\n    const birthDate = new Date(data.value?.birthday);\n    const currentDate = new Date();\n    const a = currentDate.getFullYear() - birthDate.getFullYear();\n    const m = currentDate.getMonth() - birthDate.getMonth();\n    if (m < 0 || (m === 0 && currentDate.getDate() < birthDate.getDate())) {\n      return a - 1;\n    }\n    return a;\n  }\n});\n\nconst gender = computed(() => {\n  if (typeof data.value?.gender !== 'number') return data.value?.gender;\n\n  switch (data.value?.gender) {\n    case 0:\n      return 'Not specified';\n    case 1:\n      return 'Female';\n    case 2:\n      return 'Male';\n    case 3:\n      return 'Non-binary';\n    default:\n      return null;\n  }\n});\n\nwatch(data, (value) => {\n  setTitle(data?.value?.name);\n  setBackground(value?.known_for?.at(0)?.backdrop ?? null);\n});\n\nonMounted(() => {\n  setTitle(data?.value?.name);\n  setColorPalette(null);\n  setBackground(data?.value?.known_for?.at(0)?.backdrop ?? null);\n});\n\nonUnmounted(() => {\n  setBackground(null);\n  setColorPalette(null);\n});\n\nconst filter = 'combined';\n</script>\n\n<template>\n  <ion-page>\n    <ion-content :fullscreen=\"true\">\n      <NotFound v-if=\"isError && !data\" />\n      <ScrollContainer v-else :autoHide=\"true\" :static=\"true\">\n        <div v-if=\"data\" :class=\"{\n          'pb-24': isNative && !currentSong,\n          'pb-40': isNative && currentSong,\n          'children:pb-4 sm:children:pb-3': !isNative && currentSong\n        }\" class=\"flex bg-black/50 w-available relative\">\n          <div\n            class=\"relative mx-auto flex w-full flex-shrink-0 flex-grow-0 items-end justify-start gap-4 self-stretch rounded-lg p-4 max-w-screen-5xl\">\n            <div class=\"flex flex-grow flex-col items-end justify-start gap-2 pt-[290px] w-available\">\n              <div\n                :class=\"`flex w-full items-start justify-start self-stretch rounded-2xl pr-4 pl-52 gap-[280px]  bg-gradient-to-b from-auto-1/12 via-auto-1/12 to-auto-1/11 border-1 sm:py-2 sm:pl-64 2xl:pl-96 ${!!data?.deathday ? 'border-auto-12' : 'border-auto-12/4'}`\">\n                <div class=\"relative flex w-full flex-grow flex-col items-start justify-start gap-4\">\n                  <div\n                    class=\"relative mt-8 -mb-2 flex flex-col justify-start self-stretch sm:mt-4 sm:items-center sm:gap-4 lg:flex-row\">\n                    <p :style=\"`font-size: min(calc(150px / ${data?.name?.length} + 3ch), 2rem)`\"\n                      class=\"mb-2 flex-grow text-5xl font-bold leading-[150%]\">\n                      {{ breakTitle(data?.name ?? '', 'text-base sm:text-xl -mt-2') }}\n                    </p>\n                    <div class=\"ml-auto flex w-full items-center justify-end gap-2\" style=\"width: 432px;\">\n\n                      <a :href=\"`https://www.themoviedb.org/person/${data?.id}`\"\n                        class=\"relative mr-2 flex items-center justify-center overflow-hidden rounded-lg p-1.5 sm:p-2\"\n                        target=\"_blank\">\n                        <SpriteIcon icon=\"tmdb\" class=\"!w-12\" />\n                      </a>\n                      <a v-if=\"data?.external_ids?.facebook_id\"\n                        :href=\"`https://www.facebook.com/${data?.external_ids.facebook_id}`\"\n                        class=\"relative flex items-center justify-center overflow-hidden rounded-lg p-1.5 sm:p-2\"\n                        target=\"_blank\">\n                        <SpriteIcon icon=\"facebook\" class=\"w-6\" />\n                      </a>\n                      <a v-if=\"data?.external_ids?.twitter_id\"\n                        :href=\"`https://twitter.com/${data?.external_ids?.twitter_id}`\"\n                        class=\"relative flex items-center justify-center overflow-hidden rounded-lg p-1.5 sm:p-2\"\n                        target=\"_blank\">\n                        <SpriteIcon icon=\"twitter\" class=\"w-6\" />\n                      </a>\n                      <a v-if=\"data?.external_ids?.instagram_id\"\n                        :href=\"`https://instagram.com/${data?.external_ids?.instagram_id}`\"\n                        class=\"relative flex items-center justify-center overflow-hidden rounded-lg p-1.5 sm:p-2\"\n                        target=\"_blank\">\n                        <SpriteIcon icon=\"instagram\" class=\"w-6\" />\n                      </a>\n                      <a v-if=\"data?.external_ids?.youtube_id\"\n                        :href=\"`https://youtube.com/channel/${data?.external_ids?.youtube_id}`\"\n                        class=\"relative flex items-center justify-center overflow-hidden rounded-lg p-1.5 sm:p-2\"\n                        target=\"_blank\">\n                        <SpriteIcon icon=\"youtube\" class=\"w-6\" />\n                      </a>\n                      <a v-if=\"data?.external_ids?.tiktok_id\"\n                        :href=\"`https://tiktok.com/@${data?.external_ids?.tiktok_id}`\"\n                        class=\"relative flex items-center justify-center overflow-hidden rounded-lg p-1.5 sm:p-2\"\n                        target=\"_blank\">\n                        <SpriteIcon icon=\"tiktok\" class=\"w-6\" />\n                      </a>\n                      <a v-if=\"data?.external_ids?.imdb_id\"\n                        :href=\"`https://www.imdb.com/name/${data?.external_ids?.imdb_id}`\"\n                        class=\"relative flex items-center justify-center overflow-hidden rounded-lg p-1.5 sm:p-2\"\n                        target=\"_blank\">\n                        <SpriteIcon icon=\"imdb\" class=\"w-6\" />\n                      </a>\n                      <a v-if=\"data?.external_ids?.wikidata_id\"\n                        :href=\"`https://www.wikidata.org/wiki/${data?.external_ids?.wikidata_id}`\"\n                        class=\"relative flex items-center justify-center overflow-hidden rounded-lg p-1.5 sm:p-2\"\n                        target=\"_blank\">\n                        <SpriteIcon icon=\"wikipedia\" class=\"w-6\" />\n                      </a>\n                      <DropdownMenu>\n                        <template v-slot:button>\n                          <div\n                            class=\"relative flex items-center justify-center overflow-hidden rounded-lg p-1.5 sm:p-2\">\n                            <MoooomIcon class=\"w-6 text-auto-12\" icon=\"menuDotsVertical\" />\n                          </div>\n                        </template>\n\n                        <DropdownLink target=\"_blank\" :href=\"`https://www.themoviedb.org/person/${data.id}/edit`\">\n                          {{ $t('Edit on TMDb') }}\n                        </DropdownLink>\n                      </DropdownMenu>\n                    </div>\n                    <div class=\"mt-4 h-px self-stretch bg-white/10 sm:mt-0\"></div>\n                  </div>\n                  <div class=\"relative flex flex-col items-start justify-start self-stretch py-4 sm:gap-4\">\n                    <div class=\"flex w-full flex-col flex-wrap items-start gap-6 sm:flex-row sm:gap-2\">\n                      <div\n                        class=\"relative flex w-auto flex-col items-start justify-center gap-1 sm:w-[30%] lg:w-[15%] xl:w-[15%] 2xl:w-[11%]\">\n                        <p v-if=\"data?.known_for_department\"\n                          class=\"flex-shrink-0 flex-grow-0 text-xs font-bold uppercase text-auto-alpha-10\">\n                          {{ $t('Known For') }}\n                        </p>\n                        <p class=\"text-left text-base font-medium\">\n                          {{ data?.known_for_department }}\n                        </p>\n                      </div>\n                      <div\n                        class=\"relative flex w-auto flex-col items-start justify-center gap-1 sm:w-[39%] lg:w-[20%] xl:w-[20%] 2xl:w-[14%]\">\n                        <p v-if=\"data?.combined_credits?.cast\"\n                          class=\"flex-shrink-0 flex-grow-0 text-xs font-bold uppercase text-auto-alpha-10\">\n                          {{ $t('Known Credits') }}\n                        </p>\n                        <p class=\"text-left text-base font-medium\">\n                          {{ data?.combined_credits?.cast?.length }}\n                        </p>\n                      </div>\n                      <div\n                        class=\"relative flex w-auto flex-col items-start justify-start gap-1 sm:w-[25%] lg:w-[15%] xl:w-[9%]\">\n                        <p v-if=\"gender\"\n                          class=\"flex-shrink-0 flex-grow-0 text-xs font-bold uppercase text-auto-alpha-10\">\n                          {{ $t('Gender') }}\n                        </p>\n                        <p class=\"text-left text-base font-medium\">\n                          {{ gender }}\n                        </p>\n                      </div>\n                      <div class=\"relative flex w-full flex-col items-start justify-center gap-1 lg:w-auto 2xl:w-[23%]\">\n                        <p v-if=\"age\"\n                          class=\"flex w-full flex-shrink-0 flex-grow-0 gap-2 text-xs font-bold uppercase text-auto-alpha-10\">\n                          {{ $t('Birthday') }}\n                          <span v-if=\"data.deathday\"\n                            class=\"mr-8 ml-auto flex flex-shrink-0 flex-grow-0 gap-2 text-xs font-bold uppercase text-auto-alpha-10\">\n                            <span v-if=\"data.deathday\" class=\"-mr-1 text-base -mt-[3px]\">&#8224;</span>\n                            {{\n                              new Date(data?.deathday!).toLocaleDateString(i18next.language ?? 'en-US', {\n                                year: 'numeric',\n                                month: 'short',\n                                day: '2-digit',\n                              })\n                            }}\n                          </span>\n                        </p>\n                        <p v-if=\"age\" class=\"text-left text-base font-medium\">{{\n                          new Date(data?.birthday!).toLocaleDateString(i18next.language ?? 'en-US', {\n                            year: 'numeric',\n                            month: 'short',\n                            day: '2-digit',\n                          })\n                        }} ({{ age }}\n                          {{ $t('years old') }})\n                        </p>\n                      </div>\n                      <div class=\"relative flex w-full flex-col items-start justify-start gap-1 lg:w-auto xl:flex-grow\">\n                        <p v-if=\"data?.place_of_birth\"\n                          class=\"flex-shrink-0 flex-grow-0 self-stretch text-xs font-bold uppercase text-auto-alpha-10\">\n                          {{ $t('Place of Birth') }}\n                        </p>\n                        <p class=\"w-full self-stretch whitespace-pre-wrap text-base font-medium\">\n                          {{ data?.place_of_birth }}\n                        </p>\n                      </div>\n                    </div>\n                    <div class=\"mt-4 h-px self-stretch bg-white/10 sm:mt-0\"></div>\n                  </div>\n                  <div class=\"relative flex w-full flex-col items-start justify-start gap-2\">\n                    <p class=\"flex-shrink-0 flex-grow-0 text-xs font-bold uppercase text-auto-alpha-10\">\n                      {{ $t('Biography') }}\n                    </p>\n                    <p v-if=\"data?.biography\"\n                      class=\"self-stretch whitespace-pre-line text-base font-medium leading-[173%]\">\n                      {{ breakDescription(data?.biography) }}\n                    </p>\n                  </div>\n                  <div class=\"mb-8 -ml-1 w-[101.5%]\">\n                    <div class=\"-ml-5 w-[100.6%]\">\n                      <MediaCarousel v-if=\"data?.known_for && data?.known_for?.length > 0\"\n                        :color-palette=\"data?.color_palette\" :data=\"unique(data.known_for, 'id')\" :limitCardCountBy=\"2\"\n                        title=\"Known for\" :disableAutoAspect=\"true\" type=\"poster\" />\n                    </div>\n                  </div>\n\n                  <CreditGroup :items=\"data?.[`${filter}_credits`]?.cast\" title=\"Acting\" />\n                  <CreditGroup :items=\"data?.[`${filter}_credits`]?.crew.filter((c: any) => c.job.includes('Produc'))\"\n                    title=\"Production\" />\n                  <CreditGroup :items=\"data?.[`${filter}_credits`]?.crew.filter((c: any) => c.job.includes('Writ'))\"\n                    title=\"Writing\" />\n                  <CreditGroup :items=\"data?.[`${filter}_credits`]?.crew.filter((c: any) => c.job.includes('Direct'))\"\n                    title=\"Directing\" />\n                  <CreditGroup\n                    :items=\"data?.[`${filter}_credits`]?.crew.filter((c: any) => !c.job.includes('Produc') && !c.job.includes('Writ') && !c.job.includes('Direct') && !c.job.includes('Creator'))\"\n                    title=\"Crew\" />\n                  <CreditGroup :items=\"data?.[`${filter}_credits`]?.crew.filter((c: any) => c.job.includes('Creator'))\"\n                    title=\"Creator\" />\n\n                </div>\n              </div>\n            </div>\n            <FloatingPersonCard :data=\"data\" />\n          </div>\n        </div>\n      </ScrollContainer>\n    </ion-content>\n  </ion-page>\n</template>\n"],"names":["props","__props","currentImage","ref","_c","_b","_a","watch","value","filter","route","useRoute","data","isError","useServerClient","age","computed","birthDate","deathday","a","m","_d","_e","currentDate","gender","setTitle","setBackground","onMounted","setColorPalette","onUnmounted"],"mappings":"s8DAMA,MAAMA,EAAQC,EAORC,EAAeC,IAAIC,GAAAC,GAAAC,EAAAN,EAAM,OAAN,YAAAM,EAAY,SAAZ,YAAAD,EAAoB,WAApB,YAAAD,EAA+B,EAAE,EAEpD,OAAAG,GAAAP,EAAQQ,GAAU,WACtBN,EAAa,OAAQE,GAAAC,GAAAC,EAAAE,EAAM,OAAN,YAAAF,EAAY,SAAZ,YAAAD,EAAoB,WAApB,YAAAD,EAA+B,EAAC,CACtD,0gICoEKK,EAAS,2CA7Df,MAAMC,EAAQC,GAAS,EACjB,CAAE,KAAAC,EAAM,QAAAC,CAAQ,EAAIC,GAAoC,CAC5D,SAAU,CAAC,OAAQ,SAAUJ,EAAM,OAAO,EAAE,CAAA,CAC7C,EAEKK,EAAMC,GAAS,IAAM,eACrB,IAAAV,EAAAM,EAAK,QAAL,MAAAN,EAAY,SAAU,CACxB,MAAMW,EAAY,IAAI,MAAKZ,EAAAO,EAAK,QAAL,YAAAP,EAAY,QAAQ,EACzCa,EAAW,IAAI,MAAKd,EAAAQ,EAAK,QAAL,YAAAR,EAAY,QAAQ,EACxCe,EAAID,EAAS,YAAY,EAAID,EAAU,YAAY,EACnDG,EAAIF,EAAS,SAAS,EAAID,EAAU,SAAS,EAC/C,OAAAG,EAAI,GAAMA,IAAM,GAAKF,EAAS,QAAQ,EAAID,EAAU,UAC/CE,EAAI,EAENA,CAAA,CAEL,IAAAE,EAAAT,EAAK,QAAL,MAAAS,EAAY,SAAU,CACxB,MAAMJ,EAAY,IAAI,MAAKK,EAAAV,EAAK,QAAL,YAAAU,EAAY,QAAQ,EACzCC,MAAkB,KAClBJ,EAAII,EAAY,YAAY,EAAIN,EAAU,YAAY,EACtDG,EAAIG,EAAY,SAAS,EAAIN,EAAU,SAAS,EAClD,OAAAG,EAAI,GAAMA,IAAM,GAAKG,EAAY,QAAQ,EAAIN,EAAU,UAClDE,EAAI,EAENA,CAAA,CACT,CACD,EAEKK,EAASR,GAAS,IAAM,WACxB,GAAA,QAAOV,EAAAM,EAAK,QAAL,YAAAN,EAAY,SAAW,SAAU,OAAOD,EAAAO,EAAK,QAAL,YAAAP,EAAY,OAEvD,QAAAD,EAAAQ,EAAK,QAAL,YAAAR,EAAY,OAAQ,CAC1B,IAAK,GACI,MAAA,gBACT,IAAK,GACI,MAAA,SACT,IAAK,GACI,MAAA,OACT,IAAK,GACI,MAAA,aACT,QACS,OAAA,IAAA,CACX,CACD,EAEK,OAAAG,GAAAK,EAAOJ,GAAU,WACZiB,IAAAnB,EAAAM,GAAA,YAAAA,EAAM,QAAN,YAAAN,EAAa,IAAI,EAC1BoB,IAActB,GAAAC,EAAAG,GAAA,YAAAA,EAAO,YAAP,YAAAH,EAAkB,GAAG,KAArB,YAAAD,EAAyB,WAAY,IAAI,CAAA,CACxD,EAEDuB,GAAU,IAAM,aACLF,IAAAnB,EAAAM,GAAA,YAAAA,EAAM,QAAN,YAAAN,EAAa,IAAI,EAC1BsB,GAAgB,IAAI,EACpBF,IAAcL,GAAAjB,GAAAC,EAAAO,GAAA,YAAAA,EAAM,QAAN,YAAAP,EAAa,YAAb,YAAAD,EAAwB,GAAG,KAA3B,YAAAiB,EAA+B,WAAY,IAAI,CAAA,CAC9D,EAEDQ,GAAY,IAAM,CAChBH,EAAc,IAAI,EAClBE,GAAgB,IAAI,CAAA,CACrB"}