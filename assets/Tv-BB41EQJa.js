import{Y as E,j as z,h as d,o,b as p,c as w,i as r,v as x,F as b,p as B,H as P,T as R,y as j,w as T,d as D,f as H,aK as M,l as V,Z as A,ar as O,an as W}from"./vue-ionic-Cv2or74p.js";import{u as Y}from"./useServerClient-Xl1-e1V_.js";import{u as Z}from"./useInfiniteServerClient-B2dLGr_D.js";import{_ as G}from"./ContentRating.vue_vue_type_script_setup_true_lang-DDDpvR3h.js";import{_ as J}from"./TMDBImage.vue_vue_type_script_setup_true_lang-BqmXtdc4.js";import"./vendor-F08gofix.js";import"./icons-BW5E66pf.js";import"./rxjs-BCp2L9Rn.js";import"./media-C2AqgyMX.js";import"./api-BBofn2cc.js";import"./swiper-DhG1br88.js";import"./index-raeUvxje.js";import"./music-player-Dgg5bFLw.js";import"./AppLogoSquare-DwFk-Amv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={key:0,"data-row":"",class:"grid grid-rows-[auto_1fr] grid-cols-7 relative justify-start flex-1 w-full gap-3 mb-2"},X={class:"row-start-1 col-span-7 pointer-events-none font-semibold font-3xl"},ee=["src"],L=E({__name:"TvCarousel2",props:{data:{type:Array,required:!0},title:{type:String,required:!0},handleFocus:{type:Function,required:!0},handleDown:{type:Function,required:!0},handleUp:{type:Function,required:!0},suffix:{type:String,required:!1,default:""}},setup(a){return(y,i)=>{var f;const h=z("RouterLink");return o(),d(b,null,[a.data.length?(o(),d("div",Q,[r("h3",X,x(a.title),1),(o(!0),d(b,null,B(a.data.slice(0,7),(l,v)=>(o(),w(h,{key:l.id,to:`${l.link}${a.suffix}`,"data-card":l.id,"data-index":v,class:"row-start-2 w-full h-auto rounded-xl bg-cover aspect-poster focus:scale-105 focus:outline outline-[2.2px] outline-white transition-transform duration-200 scroll-mb-20 scroll-mt-12 snap-center snap-mandatory",onFocus:c=>a.handleFocus(c,l),onKeydown:i[0]||(i[0]=c=>a.handleDown(c)),onKeyup:i[1]||(i[1]=c=>a.handleUp(c)),style:P(`background-image: url('https://app.nomercy.tv/tmdb-images${l.poster}?width=300&type=avif&aspect_ratio=null')`)},null,8,["to","data-card","data-index","onFocus","style"]))),128))])):p("",!0),(o(),w(R,{to:".image-preload-container"},[(o(!0),d(b,null,B((f=a.data)==null?void 0:f.slice(0,7),l=>(o(),d("img",{key:l.id,src:`https://app.nomercy.tv/tmdb-images${l.backdrop}?width=2160&type=avif&aspect_ratio=null`,width:"0",height:"0",loading:"eager",alt:"",class:"absolute"},null,8,ee))),128))]))],64)}}}),te={class:"w-available h-available absolute left-[250px] top-0 overflow-hidden bg-black"},ae={class:"flex flex-col justify-start items-start w-[484px] relative left-[58px] top-20 gap-7"},le={class:"flex flex-col justify-start items-start self-stretch relative gap-5"},se={class:"flex flex-col justify-start items-start w-full relative gap-0"},oe={class:"flex items-center h-8 gap-2 self-stretch w-full opacity-60 text-xs font-medium text-left text-[#c4c7c5]"},ne={key:1,class:"flex gap-2"},re={key:2,class:"flex gap-2"},ie={class:"self-stretch w-full text-xl text-left mt-2"},ue={class:"line-clamp-4 text-sm -mt-4"},ce=E({__name:"TvHeader",props:{selected:{type:Object,required:!1}},setup(a){return(y,i)=>{var h,f,l,v,c,k,S,g,$,q,e,t;return o(),d("div",{class:"w-full h-full absolute left-0 top-0 bg-[#131314]",key:(h=a.selected)==null?void 0:h.id},[r("div",te,[j(J,{class:"w-available h-available absolute left-[-0.39px] top-[-0.39px] object-cover",path:(f=a.selected)==null?void 0:f.backdrop,size:1080,alt:(l=a.selected)==null?void 0:l.title},null,8,["path","alt"]),i[0]||(i[0]=r("div",{class:"w-available h-available absolute left-[-0.39px] top-[-0.39px]"},null,-1)),i[1]||(i[1]=r("div",{class:"w-[150vw] h-[150vw] absolute left-[-30%] bottom-[-50%]",style:{background:`radial-gradient(
                    closest-side,
                    rgba(19, 19, 20, 0.1) 0%,
                    rgba(19, 19, 20, 1) 70.73974609375%
                  )`}},null,-1))]),r("div",ae,[r("div",le,[r("div",se,[r("div",oe,[(v=a.selected)!=null&&v.content_ratings?(o(),w(G,{key:0,size:4,ratings:(c=a.selected)==null?void 0:c.content_ratings},null,8,["ratings"])):p("",!0),(k=a.selected)!=null&&k.year?(o(),d("span",ne,[i[2]||(i[2]=r("span",null,"•",-1)),r("span",null,x((S=a.selected)==null?void 0:S.year),1)])):p("",!0),((g=a.selected)==null?void 0:g.have_items)??!1?(o(),d("span",re,[i[3]||(i[3]=r("span",null,"•",-1)),r("span",null,x(($=a.selected)==null?void 0:$.have_items)+" "+x((q=a.selected)!=null&&q.have_items?y.$t("Episodes"):""),1)])):p("",!0)]),r("p",ie,x((e=a.selected)==null?void 0:e.title),1)]),r("div",ue,x((t=a.selected)==null?void 0:t.overview),1)])])])}}}),de={class:"w-screen h-screen relative overflow-hidden bg-[#131314]"},De=E({__name:"Tv",setup(a){const{data:y,fetchNextPage:i,hasNextPage:h}=Z({path:"/",queryKey:["home"]});T(y,()=>{h&&i()});const{data:f}=Y({path:"userdata/continue",queryKey:["continue"],refetchInterval:1e3*60*5}),l=D();T(f,e=>{var t;e&&(l.value=(t=e==null?void 0:e.filter(s=>s.id))==null?void 0:t.at(0))}),H(()=>{var e,t;l.value=(t=(e=f.value)==null?void 0:e.filter(s=>s.id))==null?void 0:t.at(0)}),M(()=>{var e,t;l.value=(t=(e=f.value)==null?void 0:e.filter(s=>s.id))==null?void 0:t.at(0),setTimeout(()=>{var u;const s=document.querySelector(`[data-card="${(u=l.value)==null?void 0:u.id}"]`);s&&s.focus()},100)}),T(l,e=>{setTimeout(()=>{const t=document.querySelector(`[data-card="${e==null?void 0:e.id}"]`);t&&t.focus()},100)});const v=D(),c=D(!1),k=D(),S=D(),g=(e,t)=>{var u;const s=e.target;if((s==null?void 0:s.nodeName)=="DIV"){(u=S.value??s.querySelector("a"))==null||u.focus();return}t&&(l.value=t,S.value=s)},$=e=>{var K,U;if(c.value){e.preventDefault();return}clearTimeout(k.value),c.value=!0;const t=e.target,s=t.getAttribute("data-index"),u=t.closest("[data-row]"),n=u==null?void 0:u.previousElementSibling,F=n==null?void 0:n.querySelector(`a[data-index="${s}"]`),m=u==null?void 0:u.nextElementSibling,C=m==null?void 0:m.querySelector(`a[data-index="${s}"]`),I=t.previousElementSibling,N=t.nextElementSibling;if(F&&e.key=="ArrowUp")e.preventDefault(),F.focus();else if(C&&e.key=="ArrowDown")e.preventDefault(),C.focus();else if(I&&e.key=="ArrowLeft")e.preventDefault(),I.focus();else if(N&&e.key=="ArrowRight")e.preventDefault(),N.focus();else if(n&&e.key=="ArrowUp"){const _=(K=Array.from(n==null?void 0:n.querySelectorAll("a")))==null?void 0:K.at(-1);_&&_.focus()}else if(m&&e.key=="ArrowDown"){const _=(U=Array.from(m==null?void 0:m.querySelectorAll("a")))==null?void 0:U.at(-1);_&&_.focus()}},q=e=>{k.value=setTimeout(()=>{c.value=!1},150)};return(e,t)=>(o(),w(A(W),null,{default:V(()=>[j(A(O),{fullscreen:!0},{default:V(()=>{var s,u;return[r("div",de,[l.value?(o(),w(ce,{key:0,selected:l.value},null,8,["selected"])):p("",!0),r("div",{ref_key:"scrollContainer",ref:v,tabindex:"0",onFocus:t[0]||(t[0]=n=>g(n)),class:"flex flex-col justify-start items-start w-available -mx-3 px-3 absolute left-14 right-14 top-[264px] h-available overflow-auto scroll-smooth gap-4 flex-1 pb-16"},[j(L,{title:"Continue watching",data:((s=A(f))==null?void 0:s.filter(n=>!!n.id))??[],handleFocus:g,handleDown:$,handleUp:q},null,8,["data"]),(u=A(y))!=null&&u.pages?(o(!0),d(b,{key:0},B(A(y).pages,(n,F)=>(o(),d(b,{key:F},[n?(o(!0),d(b,{key:0},B((n==null?void 0:n.data)??[],(m,C)=>(o(),w(L,{key:C,title:m.title,data:m.items,handleFocus:g,handleDown:$,handleUp:q,suffix:"/watch"},null,8,["title","data"]))),128)):p("",!0)],64))),128)):p("",!0)],544)])]}),_:1})]),_:1}))}});export{De as default};
