import{$ as fe,Dn as O,Ht as oe,In as L,Rn as s,Sn as W,Tn as v,Wn as n,Y as _e,Yt as Z,Zn as ee,cn as o,in as V,kn as y,nn as G,rn as z,sn as g,tn as u,tr as _,un as te,y as be}from"./index-04Sh3wNb.js";import"./dist-CVoPesok.js";import"./esm-BuFVrMo0.js";import"./esm-9iWgK55i.js";import"./esm-cDzTb79E.js";import"./esm-BfF1RlcU.js";import"./dist-B3n7-doU.js";import"./focus-visible-CHAJCf_J.js";import"./index5-B30D6T27.js";import"./client-rtF7IPPI.js";import"./ionic-global--aoJHCDL.js";import"./hardware-back-button-h528z6zo.js";import"./index3-CSo3jo06.js";import"./helpers-CXS86XKs.js";import"./index6-CZ6rqL_0.js";import"./index8-BpkFXja0.js";import"./keyboard-cU79cwdW.js";import"./index2-op38TIl9.js";import"./ios.transition-C8T7q-Bo.js";import"./keyboard2-DETZ41vp.js";import"./md.transition-BqH5iNQr.js";import"./dir-BUtgAzbR.js";import"./ui-BT6EUdI0.js";import"./client-DMa-uSBE.js";import{S as le}from"./currentServer-B7-kbkE-.js";import"./config-BOA2pGQM.js";import"./esm-CcKFjObu.js";import"./global-gyhCjh_P.js";import"./esm-BuRgllmc.js";import"./user-C1ciKa7-.js";import{t as Ve}from"./serverClient-FHPKIHPu.js";import{t as se}from"./router-C_xBvmya.js";import"./utils-D5DD-7jP.js";import"./useBaseQuery-CNJp2kAB.js";import"./useInfiniteServerClient-By5CuBlL.js";import"./SocketClient-DPmgFkP-.js";import{t as ye}from"./useQueryClient-s6ZLwuD6.js";import"./useQuery-C7DDAmeN.js";import"./apiClient-Cw7f36ko.js";import"./notifications-Bi_dU6lP.js";import"./utils-CdenF_Jv.js";import"./bundle-mjs-Xm_uQvzT.js";import"./deviceInfo-Bcw3-ht5.js";import"./helpers-fSCF1qXj.js";import"./auth-DfyD43WY.js";import"./MoooomIcon-DNWQYuYD.js";import{t as ae}from"./useServerClient-CroZbKWw.js";import"./ScrollContainer-3_hZWeKa.js";import"./useMounted-CBZpV1fi.js";import"./RipperOverlay-BWEr7uxe.js";import"./HubConnection-BtQMN1V5.js";import"./ripperSocket-C9kIp3Ty.js";import"./Button-BOqv4y1r.js";import"./FloatingBackButton-D3UgtlFi.js";import{t as ge}from"./DashboardLayout-CXf1x5EO.js";_e();oe();var we={class:"my-6 text-sm text-surface-10"},he=te({__name:"DeleteEncoderProfileModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},name:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},setup($){const w=$,k=ye(),D=be();function h(){Ve().delete(`dashboard/encoderprofiles/${w.id}`).then(({data:t})=>{D.add({severity:t.status==="ok"?"success":"error",summary:le(t.status==="ok"?"Success":"Error"),detail:le(t.message,...t.args??[]),life:5e3}),k.invalidateQueries({queryKey:["dashboard","encoderProfiles"]}),!w.noRedirect&&se.back()}),w.close()}return(t,N)=>{const A=y("Button"),E=y("Modal");return v(),G(E,{close:$.close,open:$.open,params:{profile:w.name},"max-width":"max-w-xl",title:"Delete encoder profile {{profile}}"},{actions:s(()=>[o(A,{id:"yes",onclick:h,color:"red","end-icon":"trash",type:"button",variant:"contained"},{default:s(()=>[g(_(t.$t("Delete")),1)]),_:1}),o(A,{id:"no",onclick:$.close,color:"auto",type:"button",variant:"text"},{default:s(()=>[g(_(t.$t("Cancel")),1)]),_:1},8,["onclick"])]),default:s(()=>[u("div",we,_(t.$t("Are you sure you want to delete this encoder profile?")),1)]),_:1},8,["close","open","params"])}}}),Pe=he;oe();var Ce={class:"block whitespace-nowrap text-sm font-medium"},$e={key:0,class:"grid w-full grid-cols-12 gap-4"},ke={key:1,class:"flex w-full flex-col"},Ue={class:"flex w-full justify-between"},Se={class:"block whitespace-nowrap text-sm font-medium"},Le={class:"grid h-auto w-full grid-cols-8 flex-wrap gap-2"},Ne=["for"],Ae=["for"],Be=["for"],De=["for"],Ee=["for"],Me=["for"],Re=["for"],qe=["for"],Te=["for"],Fe={class:"flex w-full justify-between"},Ie={class:"mt-2 block whitespace-nowrap text-sm font-medium"},je={class:"grid h-auto w-full grid-cols-8 flex-wrap gap-2"},Ke=["for"],Qe=["for"],Ye={class:"flex w-full justify-between"},He={class:"mt-2 block whitespace-nowrap text-sm font-medium"},Oe={class:"grid h-auto w-full grid-cols-8 flex-wrap gap-2"},We=["for"],Ze=te({__name:"Edit",setup($){const w=fe(),{data:k,error:D}=ae({path:"dashboard/encoderProfiles",queryKey:["dashboard","encoderProfiles"]}),{data:h}=ae({path:"dashboard/encoderProfiles/containers",queryKey:["dashboard","videoContainers"]}),t=n();L(k,a=>{a&&(t.value=a.find(e=>e.id===w.params.id))}),W(()=>{k.value&&(t.value=k.value.find(a=>a.id===w.params.id))});const N=n(!1),A=()=>{N.value=!0},E=()=>{N.value=!1},ue=()=>{se.back()},ie=()=>{},U=n([{label:"audio",value:"audio"},{label:"video",value:"video"},{label:"image",value:"image"}]),M=n(t.value?.name),S=n(U.value?.find(a=>a.value===t.value?.type)),c=n(h.value?.find(a=>a.type===t.value?.type)),m=n([]),R=n([]),q=n([]),T=n([]),re=n([]),F=n([]),I=n([]),B=n([]),j=n([]),K=n([]),Q=n([]),P=n([]),Y=n([]),C=n([]),H=n([]),ne=()=>{m.value.push({})},de=()=>{P.value.push({})},pe=()=>{C.value.push({})},ce=a=>{m.value.splice(a,1)},me=a=>{P.value.splice(a,1)},ve=a=>{C.value.splice(a,1)};W(()=>{S.value=U.value.find(a=>a.value===t.value?.type),c.value=h.value?.find(a=>a.type===t.value?.type)}),L(t,a=>{a&&(M.value=a.name)}),L(h,a=>{a&&(c.value=a.find(e=>e.value===t.value.container))});const J=a=>{a&&(console.raw("container",a,U.value),S.value=U.value.find(e=>e.value===a.type),m.value=t.value.videoProfiles?.map(e=>a.available_video_codecs.find(i=>i.value===e.codec))??[],P.value=t.value.audioProfiles?.map(e=>a.available_audio_codecs.find(i=>i.value===e.codec))??[],C.value=t.value.subtitleProfiles?.map(e=>a.available_subtitle_codecs.find(i=>i.value===e.codec))??[],R.value=t.value.videoProfiles?.map(e=>a.available_resolutions.find(i=>i.width===e.width))??[],q.value=t.value.videoProfiles.map(e=>m.value.find(i=>i.value===e.codec)?.color_spaces.find(i=>i.value===e.colorSpace)),F.value=t.value.videoProfiles.map(e=>m.value.find(i=>i.value===e.codec)?.tunes.find(i=>i.value===e.tune)),I.value=t.value.videoProfiles.map(e=>m.value.find(i=>i.value===e.codec)?.profiles.find(i=>i.value===e.profile)),B.value=t.value.videoProfiles.map(e=>m.value.find(i=>i.value===e.codec)?.presets.find(i=>i.value===e.preset)),console.log("presets",B.value),H.value=P.value.map(e=>e?.available_languages??[]),Y.value=C.value.map(e=>e?.available_languages??[]),T.value=t.value.videoProfiles?.map(e=>e.crf)??[],Q.value=t.value.videoProfiles?.map(e=>e.bitrate)??[],j.value=t.value.videoProfiles?.map(e=>e.playlistName)??[],K.value=t.value.videoProfiles?.map(e=>e.segmentName)??[],re.value=t.value.videoProfiles?.map(e=>e.width)??[])};return L(c,J),W(()=>{J(c.value),c.value=h.value?.find(a=>a.value===t.value.container)}),L(m,a=>{a&&console.log("videoCodecs",a)}),(a,e)=>{const i=y("InputText"),d=y("FloatLabel"),f=y("Select"),b=y("Button"),X=y("InputNumber"),x=y("MultiSelect");return v(),G(ge,{error:ee(D),gridStyle:4,params:{name:t.value?.name},title:"Encoder profile: {{name}}"},{cta:s(()=>[...e[3]||(e[3]=[])]),actions:s(()=>[o(b,{id:"remove",class:"children:text-gray-400 children:transition-colors children:duration-100 children:hover:text-red-dark-8",color:"auto",startIcon:"folderRemove",type:"button",variant:"text",onClick:A},{default:s(()=>[g(_(a.$t("Remove")),1)]),_:1}),o(b,{id:"cancel",color:"white",type:"button",variant:"text",onClick:ue},{default:s(()=>[g(_(a.$t("Cancel")),1)]),_:1}),o(b,{id:"save",class:"ml-auto",color:"theme",form:"myForm",type:"submit",onClick:ie},{default:s(()=>[g(_(a.$t("Save")),1)]),_:1})]),default:s(()=>[u("span",Ce,_(a.$t("Profiles settings")),1),t.value?(v(),V("div",$e,[o(d,{class:"col-span-3",variant:"on"},{default:s(()=>[o(i,{id:"name",modelValue:M.value,"onUpdate:modelValue":e[0]||(e[0]=p=>M.value=p),class:"w-full",name:"Name"},null,8,["modelValue"]),e[4]||(e[4]=u("label",{for:"name"},"Name",-1))]),_:1}),o(d,{class:"col-span-2",variant:"on"},{default:s(()=>[o(f,{id:"type",modelValue:S.value,"onUpdate:modelValue":e[1]||(e[1]=p=>S.value=p),options:U.value,class:"w-full",optionLabel:"label"},null,8,["modelValue","options"]),e[5]||(e[5]=u("label",{for:"type"},"Media type",-1))]),_:1}),o(d,{class:"col-span-2",variant:"on"},{default:s(()=>[o(f,{id:"container",modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=p=>c.value=p),options:ee(h)?.filter(p=>p.type===S.value?.value)??[],class:"w-full",optionLabel:"label"},null,8,["modelValue","options"]),e[6]||(e[6]=u("label",{for:"container"},"Container",-1))]),_:1})])):z("",!0),t.value?(v(),V("div",ke,[u("div",Ue,[u("span",Se,_(a.$t("Video Profiles")),1),o(b,{id:"addVideoProfile",type:"button",onClick:ne},{default:s(()=>[...e[7]||(e[7]=[g("Add Video Profile ",-1)])]),_:1})]),(v(!0),V(Z,null,O(m.value,(p,l)=>(v(),V("div",{key:l,class:"m-2 mt-2 ml-0 flex w-full rounded-md border-white/5 p-4 border-1 odd:bg-surface-1/5 even:bg-surface-2/2"},[u("div",Le,[o(d,{class:"col-span-2",variant:"on"},{default:s(()=>[o(f,{id:`videoProfiles_${l}`,modelValue:m.value[l],"onUpdate:modelValue":r=>m.value[l]=r,options:c.value?.available_video_codecs??[],class:"col-span-2",label:"Codec",optionLabel:"label"},null,8,["id","modelValue","onUpdate:modelValue","options"]),u("label",{for:`videoProfiles_${l}`},"Codec",8,Ne)]),_:2},1024),o(d,{class:"col-span-2",variant:"on"},{default:s(()=>[o(f,{id:`resolutions_${l}`,modelValue:R.value[l],"onUpdate:modelValue":r=>R.value[l]=r,options:c.value?.available_resolutions??[],class:"col-span-2",label:"Resolution",optionLabel:"name"},null,8,["id","modelValue","onUpdate:modelValue","options"]),u("label",{for:`resolutions_${l}`},"Resolution",8,Ae)]),_:2},1024),o(d,{class:"col-span-2",variant:"on"},{default:s(()=>[o(f,{id:`colorSpaces_${l}`,modelValue:q.value[l],"onUpdate:modelValue":r=>q.value[l]=r,options:p?.color_spaces??[],class:"col-span-2",optionLabel:"label"},null,8,["id","modelValue","onUpdate:modelValue","options"]),u("label",{for:`colorSpaces_${l}`},"Colorspace",8,Be)]),_:2},1024),o(d,{class:"col-span-2",variant:"on"},{default:s(()=>[o(f,{id:`profiles_${l}`,modelValue:I.value[l],"onUpdate:modelValue":r=>I.value[l]=r,options:p?.profiles??[],class:"col-span-2",l:"",optionLabel:"label"},null,8,["id","modelValue","onUpdate:modelValue","options"]),u("label",{for:`profiles_${l}`},"Profile",8,De)]),_:2},1024),o(d,{class:"col-span-2",variant:"on"},{default:s(()=>[o(f,{id:`presets_${l}`,modelValue:B.value[l],"onUpdate:modelValue":r=>B.value[l]=r,options:p?.presets??[],class:"col-span-2",l:"",optionLabel:"label"},null,8,["id","modelValue","onUpdate:modelValue","options"]),u("label",{for:`presets_${l}`},"Preset",8,Ee)]),_:2},1024),o(d,{class:"col-span-2",variant:"on"},{default:s(()=>[o(f,{id:`tunes_${l}`,modelValue:F.value[l],"onUpdate:modelValue":r=>F.value[l]=r,options:p?.tunes??[],class:"col-span-2",optionLabel:"label"},null,8,["id","modelValue","onUpdate:modelValue","options"]),e[8]||(e[8]=u("label",{for:"`tunes_${index}`"},"Tune",-1))]),_:2},1024),o(d,{class:"col-span-2",variant:"on"},{default:s(()=>[o(X,{id:`crfs_${l}`,modelValue:T.value[l],"onUpdate:modelValue":r=>T.value[l]=r,max:51,min:0,class:"w-full",type:"number"},null,8,["id","modelValue","onUpdate:modelValue"]),u("label",{for:`crfs_${l}`},"CRF",8,Me)]),_:2},1024),o(d,{class:"col-span-2",variant:"on"},{default:s(()=>[o(X,{id:`bitrates_${l}`,modelValue:Q.value[l],"onUpdate:modelValue":r=>Q.value[l]=r,max:1e6,min:0,class:"w-full",type:"number"},null,8,["id","modelValue","onUpdate:modelValue"]),u("label",{for:`bitrates_${l}`},"Bitrate",8,Re)]),_:2},1024),o(d,{class:"col-span-4",variant:"on"},{default:s(()=>[o(i,{id:`segmentNames_${l}`,modelValue:K.value[l],"onUpdate:modelValue":r=>K.value[l]=r,class:"w-full"},null,8,["id","modelValue","onUpdate:modelValue"]),u("label",{for:`segmentNames_${l}`},"Segment name",8,qe)]),_:2},1024),o(d,{class:"col-span-4",variant:"on"},{default:s(()=>[o(i,{id:`playlistNames_${l}`,modelValue:j.value[l],"onUpdate:modelValue":r=>j.value[l]=r,class:"w-full"},null,8,["id","modelValue","onUpdate:modelValue"]),u("label",{for:`playlistNames_${l}`},"Playlist name",8,Te)]),_:2},1024)]),o(b,{id:"addVideoProfile",class:"col-span-2","end-icon":"trash",type:"button",variant:"text",onClick:()=>ce(l)},null,8,["onClick"])]))),128)),u("div",Fe,[u("span",Ie,_(a.$t("Audio Profiles")),1),o(b,{id:"addAudioProfile",type:"button",onClick:de},{default:s(()=>[...e[9]||(e[9]=[g("Add Audio Profile ",-1)])]),_:1})]),(v(!0),V(Z,null,O(P.value,(p,l)=>(v(),V("div",{key:l,class:"m-2 mt-2 ml-0 flex w-full rounded-md border-white/5 p-4 border-1 odd:bg-surface-1/5 even:bg-surface-2/2"},[u("div",je,[o(d,{class:"col-span-2",variant:"on"},{default:s(()=>[o(f,{id:`audioCodecs_${l}`,modelValue:P.value[l],"onUpdate:modelValue":r=>P.value[l]=r,options:c.value?.available_audio_codecs??[],class:"col-span-2",optionLabel:"label"},null,8,["id","modelValue","onUpdate:modelValue","options"]),u("label",{for:`audioCodecs_${l}`},"Codec",8,Ke)]),_:2},1024),o(d,{class:"col-span-2",variant:"on"},{default:s(()=>[o(x,{id:`allowedAudioLanguages_${l}`,modelValue:Y.value[l],"onUpdate:modelValue":r=>Y.value[l]=r,options:p?.available_languages??[],class:"col-span-2",optionLabel:"label"},null,8,["id","modelValue","onUpdate:modelValue","options"]),u("label",{for:`allowedAudioLanguages_${l}`},"Allowed languages",8,Qe)]),_:2},1024)]),o(b,{id:"addVideoProfile",class:"col-span-2","end-icon":"trash",type:"button",variant:"text",onClick:()=>me(l)},null,8,["onClick"])]))),128)),u("div",Ye,[u("span",He,_(a.$t("Subtitle Profiles")),1),o(b,{id:"addSubtitleProfile",type:"button",onClick:pe},{default:s(()=>[...e[10]||(e[10]=[g("Add Subtitle Profile ",-1)])]),_:1})]),(v(!0),V(Z,null,O(C.value,(p,l)=>(v(),V("div",{key:l,class:"m-2 mt-2 ml-0 flex w-full rounded-md border-white/5 p-4 border-1 odd:bg-surface-1/5 even:bg-surface-2/2"},[u("div",Oe,[o(d,{class:"col-span-2",variant:"on"},{default:s(()=>[o(f,{id:"subtitleProfiles",modelValue:C.value[l],"onUpdate:modelValue":r=>C.value[l]=r,options:c.value?.available_subtitle_codecs??[],class:"col-span-2",optionLabel:"label"},null,8,["modelValue","onUpdate:modelValue","options"]),e[11]||(e[11]=u("label",{for:"subtitleProfiles"},"Codec",-1))]),_:2},1024),o(d,{class:"col-span-2",variant:"on"},{default:s(()=>[o(x,{id:`allowedSubtitleLanguages_${l}`,modelValue:H.value[l],"onUpdate:modelValue":r=>H.value[l]=r,options:p?.available_languages??[],class:"col-span-2",multiple:"",optionLabel:"label"},null,8,["id","modelValue","onUpdate:modelValue","options"]),u("label",{for:`allowedSubtitleLanguages_${l}`},"Allowed languages",8,We)]),_:2},1024)]),o(b,{id:"addVideoProfile",class:"col-span-2","end-icon":"trash",type:"button",variant:"text",onClick:()=>ve(l)},null,8,["onClick"])]))),128))])):z("",!0),t.value?.id?(v(),G(Pe,{key:2,id:t.value?.id??"",close:E,name:t.value?.name??"",open:N.value},null,8,["id","name","open"])):z("",!0)]),_:1},8,["error","params"])}}}),Gl=Ze;export{Gl as default};
