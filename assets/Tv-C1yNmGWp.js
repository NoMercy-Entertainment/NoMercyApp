import{$ as V,c as N,b as g,o,a0 as $,am as J,p as R,j as l,x as _,d as h,f as z,h as m,F as L,q as A,G as X,k as Y,z as U,A as Z,w as ee,aN as te,aH as re,B as O,av as se,as as oe}from"./vue-ionic-CemLi1Vc.js";import{g as ae,a as le,b as ne}from"./routerHelper-CQ9vP3BN.js";import{c as G,r as P}from"./index-D_dtcaYl.js";import{_ as ie}from"./ContentRating.vue_vue_type_script_setup_true_lang-BG-z4wrm.js";import{_ as ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-Dgtccx1h.js";import"./icons-BW5E66pf.js";import"./rxjs-BCp2L9Rn.js";import"./media-C2AqgyMX.js";import"./api-BBofn2cc.js";import"./swiper-D00Cnjmx.js";import"./music-player-Ck3tZcPH.js";import"./primevue-BPlwQLS6.js";const ue=["src"],de={class:"flex flex-col justify-end items-start self-stretch flex-grow-0 flex-shrink-0 h-[95px] relative overflow-hidden px-1.5 pt-10 pb-1.5",style:{background:`linear-gradient(
          to bottom,
          rgba(0, 0, 0, 0) 0%,
          rgba(0, 0, 0, 0.24) 25.86%,
          rgba(0, 0, 0, 0.9) 77.75%
        )`}},fe={class:"self-stretch flex-grow-0 flex-shrink-0 w-full text-3xs font-bold text-left text-slate-light-11 dark:text-slate-dark-11"},me={class:"self-stretch flex-grow-0 flex-shrink-0 w-full text-[8px] text-left text-[#eff7ff]/[0.62]"},xe=V({__name:"TvCard",props:{item:{type:Object,required:!0},index:{type:Number,required:!0},scrollToCenter:{type:Function,required:!0}},setup(e){return(d,y)=>e.item.props.data?(o(),N($(J),{key:0,to:e.item.props.data.link.includes("watch")?e.item.props.data.link:`${e.item.props.data.link}/watch`,"data-card":e.item.props.data,index:e.index,class:"flex flex-col justify-end relative items-center flex-grow-0 flex-shrink-0 w-full h-auto aspect-poster overflow-hidden rounded bg-cover bg-no-repeat bg-center focus-visible:ring-2 focus-visible:ring-white snap-center pointer-events-auto mr-3 last:mr-0",onFocus:e.scrollToCenter},{default:R(()=>{var n;return[l("img",{src:`${(n=$(G))==null?void 0:n.serverBaseUrl}/images/original${e.item.props.data.poster}?width=300`,alt:"",loading:"lazy",class:"w-full h-auto aspect-poster object-cover object-center absolute inset-0"},null,8,ue),l("div",de,[l("p",fe,_(e.item.props.data.title),1),l("p",me,_(e.item.props.data.year),1)])]}),_:1},8,["to","data-card","index","onFocus"])):g("",!0)}}),ve={key:0,class:"flex flex-col gap-1 w-full"},pe={key:0,class:"text-lg font-bold text-auto-12 text-slate-light-1 ml-2"},he=["data-carousel"],ge=V({__name:"TvCarousel",props:{carousel:{type:Object,required:!0},scrollToCenter:{type:Function,required:!0},scrollIndex:{type:Number,required:!0},setScrollIndex:{type:Function,required:!0},cardsPerScroll:{type:Number,required:!0},unlockKeys:{type:Function,required:!0},index:{type:Number,required:!0},setHasMoreCardsToRight:{type:Function,required:!0}},setup(e){const d=e,y=h();function n(){var u,x,k,v,w;const i=Array.from(((u=y.value)==null?void 0:u.querySelectorAll("a"))??[]),f=i.filter(b=>b.isVisible()),c=f.at(d.scrollIndex);c?c==null||c.focus():f.length>0?(x=f.at(-1))==null||x.focus():(k=i.at(d.scrollIndex))!=null&&k.href?((v=i.at(d.scrollIndex))==null||v.focus(),d.setHasMoreCardsToRight(!0)):((w=i.at(-1))==null||w.focus(),d.setHasMoreCardsToRight(!0))}function T(){setTimeout(()=>{d.unlockKeys()},200)}const C=h(!1);return z(()=>{setTimeout(()=>{C.value=!0},50*d.index)}),(i,f)=>{var c;return C.value?(o(),m("div",ve,[e.carousel.props.title??e.carousel.title?(o(),m("h3",pe,_(e.carousel.props.title??e.carousel.title),1)):g("",!0),l("div",{ref_key:"carouselDiv",ref:y,tabindex:"1",class:"flex flex-nowrap w-full p-1 snap-x snap-mandatory overflow-x-auto pointer-events-none scroll-mr-20","data-carousel":e.carousel.props.title??e.carousel.title,onFocus:n},[(o(!0),m(L,null,A(((c=e.carousel.props)==null?void 0:c.items)??[],(u,x)=>(o(),N(xe,{key:u,tabindex:"0",item:u,index:x,"scroll-to-center":e.scrollToCenter,style:X(`flex-basis: calc(100% / ${e.cardsPerScroll} - 0.70rem)`),onFocus:f[0]||(f[0]=k=>T())},null,8,["item","index","scroll-to-center","style"]))),128))],40,he)])):g("",!0)}}}),ye={key:0,class:"w-full h-full absolute right-0 top-0 overflow-hidden bg-black"},be=["src"],ke={class:"flex flex-col justify-start items-start absolute left-8 gap-5 bottom-4"},we={class:"flex flex-col justify-start items-start flex-grow-0 flex-shrink-0 relative gap-1"},Te={key:0,class:"flex items-center gap-2 text-xs font-medium text-left text-slate-dark-11"},Ce={class:"text-3xs"},$e={class:"text-2xl text-left text-slate-dark-12 line-clamp-1 w-4/5"},_e={class:"line-clamp-5 text-xs w-3/6"},qe={class:"flex justify-center items-center flex-grow-0 flex-shrink-0 relative"},Ie=V({__name:"TvHomeCard",props:{carousel:{type:Object,required:!0},items:{type:Array,required:!0}},setup(e){return(d,y)=>{var T,C,i,f,c,u,x,k,v,w,b,M,B,F,q,I,S;const n=Y("RouterLink");return o(),m(L,null,[(C=(T=e.carousel)==null?void 0:T.props)!=null&&C.data?(o(),m("div",ye,[l("img",{src:`${(i=$(G))==null?void 0:i.serverBaseUrl}/images/original${(u=(c=(f=e.carousel)==null?void 0:f.props)==null?void 0:c.data)==null?void 0:u.backdrop}`,alt:"",class:"w-available h-auto absolute inset-0 left-40 object-scale-down"},null,8,be),y[0]||(y[0]=l("div",{class:"absolute bottom-0 w-full h-[200%]",style:{"flex-shrink":"0",background:`radial-gradient(
          87.82% 267.96% at 92.04% -27%,
          rgba(19, 19, 20, 0.1) 34%,
          #131314 70.74%
        )`}},null,-1))])):g("",!0),l("div",ke,[l("div",we,[(x=e.carousel.props.data)!=null&&x.content_ratings?(o(),m("div",Te,[U(ie,{ratings:(k=e.carousel.props.data)==null?void 0:k.content_ratings},null,8,["ratings"]),l("span",Ce,"( "+_((v=e.carousel.props.data)==null?void 0:v.year)+" )",1)])):g("",!0),l("p",$e,_((b=(w=e.carousel.props)==null?void 0:w.data)==null?void 0:b.title),1),l("p",_e,_((B=(M=e.carousel.props)==null?void 0:M.data)==null?void 0:B.overview),1)]),l("div",qe,[(q=(F=e.carousel.props)==null?void 0:F.data)!=null&&q.link?(o(),N(n,{key:0,id:"watch_now",to:(S=(I=e.carousel.props)==null?void 0:I.data)==null?void 0:S.link,tabindex:"0",class:"text-black flex-grow-0 flex-shrink-0 px-4 py-2 rounded-3xl bg-slate-light-4 focus-visible:ring-[3px] ring-inset focus-visible:ring-focus"},{default:R(()=>[Z(_(d.$t("Watch Now")),1)]),_:1},8,["to"])):g("",!0)])])],64)}}}),je={key:0,id:"container",class:"flex flex-col gap-8 pt-24 pb-4"},Ne=V({__name:"Tv",setup(e){const d=P.currentRoute.value.name,y=ae(),{data:n}=le({path:"/libraries/tv",queryKey:["libraries","tv"]}),{data:T,mutate:C}=ne({homeData:n,queryKey:["libraries","tv"]});P.beforeEach(async t=>{var r,a;if(!n.value||t.name!==d)return;const s=((a=(r=n.value)==null?void 0:r.filter)==null?void 0:a.call(r,p=>{var j;return((j=p==null?void 0:p.update)==null?void 0:j.when)==="pageLoad"}))??[];C(s)}),ee(n,t=>{t&&x("#watch_now")});const i=h(),f=h(),c=h(7),u=h();function x(t){var r,a,p;const s=document.querySelector(t);s&&(s.focus(),(a=(r=u.value)==null?void 0:r.$el)==null||a.scrollToTop(0),(p=i.value)==null||p.classList.remove("opacity-[0.001]"),I())}function k(){var t,s,r,a,p,j,D;(s=(t=u.value)==null?void 0:t.$el)==null||s.scrollToBottom(0),(a=(r=u.value)==null?void 0:r.$el)==null||a.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),(p=i.value)==null||p.classList.add("opacity-[0.001]"),(D=(j=f.value)==null?void 0:j.querySelector("[data-card]"))==null||D.focus()}te(()=>{setTimeout(()=>{var t;(t=i.value)==null||t.focus()},1e3)});const v=h(0);function w(t){v.value=t}const b=h(!1);function M(t){b.value=t}function B(t){var s;(s=document.activeElement)==null||s.scrollIntoView({behavior:"smooth",block:"center",inline:v.value===2||b.value?"center":void 0}),setTimeout(()=>{var K,E;const r=((E=(K=t.target)==null?void 0:K.getAttribute("index"))==null?void 0:E.toInt())??0,a=t.target.closest("[data-carousel]");a.dataset.focussedIndex=r.toString();const D=a.querySelectorAllArray("a").filter(W=>W.isVisible()).indexOf(t.target);v.value!==D&&(b.value=!0),w(D),r>a.childNodes.length-c.value&&(b.value=!1)},400)}const F=h(),q=h(!1);function I(){clearTimeout(F.value),q.value=!1}function S(t){if(t.target.dataset.card){if(q.value)t.preventDefault();else{q.value=!0;return}F.value=setTimeout(()=>{I()},200)}}z(()=>{document.addEventListener("keydown",S)}),re(()=>{document.removeEventListener("keydown",S)});const Q=O(()=>{var t;return((t=T.value??n.value)==null?void 0:t.filter(s=>s.component==="NMHomeCard"))??[]}),H=O(()=>{var t;return((t=T.value??n.value)==null?void 0:t.filter(s=>s.component==="NMCarousel"))??[]});return(t,s)=>(o(),N($(oe),null,{default:R(()=>[U($(se),{ref_key:"content",ref:u,fullscreen:!0},{default:R(()=>[$(y)?g("",!0):(o(),m("div",je,[l("div",{ref_key:"top",ref:i,tabindex:"0",class:"flex items-center mx-12 w-available min-h-[60vh] relative overflow-hidden rounded-2xl border-2 border-slate-light-9 transition-opacity duration-200",onFocus:s[0]||(s[0]=r=>x("#watch_now"))},[(o(!0),m(L,null,A(Q.value,r=>(o(),N(Ie,{key:r.props.title,carousel:r,items:r.props.items},null,8,["carousel","items"]))),128))],544),H.value.length>0?(o(),m("div",{key:0,ref_key:"bottom",ref:f,tabindex:"0",class:"mx-11 flex flex-col justify-start items-start w-available gap-5 h-[calc(100vh-6rem)] overflow-auto",onFocus:k},[$(y)?g("",!0):(o(!0),m(L,{key:0},A(H.value,(r,a)=>(o(),m(L,{key:r.props.title},[r.props.items.length>0?(o(),N(ge,{key:0,carousel:r,index:a,"scroll-to-center":B,"scroll-index":v.value,"set-scroll-index":w,"cards-per-scroll":c.value,"unlock-keys":I,"set-has-more-cards-to-right":M},null,8,["carousel","index","scroll-index","cards-per-scroll"])):g("",!0)],64))),128))],544)):g("",!0)]))]),_:1},512)]),_:1}))}}),Pe=ce(Ne,[["__scopeId","data-v-602b5879"]]);export{Pe as default};
