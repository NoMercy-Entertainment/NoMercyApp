import"./useBaseQuery-bNbAyEJ_.js";import{n as z}from"./useInfiniteServerClient-DXPnzvol.js";import"./useQueryClient-BV4VN_e6.js";import{As as s,Ba as D,Ds as w,Ir as R,Jo as q,Ka as F,Ms as E,Os as K,Ta as L,Us as M,Vs as B,Wi as u,X as c,Ys as p,_a as U,as as A,cs as v,hs as G,i as J,ln as I,ls as l,nc as t,or as O,os as _,ps as N,qa as W,rc as x,ss as n,ts as m,un as X,za as Y}from"./index-khqYokjz.js";import"./musicPlaylists-BQV5DOuI.js";import"./contextMenuItems-CdxsxBXC.js";import"./scrollHandlers-DvgrleKB.js";import{t as j}from"./Indexer-D4DEJW2n.js";import"./_plugin-vue_export-helper-CksOYaUN.js";import"./AppLogoSquare-C0eyFEVl.js";import"./OptimizedIcon-DIqACx__.js";import"./TMDBImage-CJM0TflX.js";import"./dist-tHjAhiPm.js";import"./CardIndicator-hvDjhgjF.js";import{t as H}from"./NMCard-TV82fAOK.js";import{t as Q}from"./PersonCard-CQAnrDHm.js";import{n as Z,t as $}from"./EmptyCard-CCaGcZYX.js";import"./NoResultImage-Bca0k4KO.js";q();F();Y();var ee="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",te="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",re=G({__name:"Mobile",setup(se){const i=W(),{data:o,fetchNextPage:b,hasNextPage:h,isError:oe}=z({queryKey:["libraries",(i.params.id??i.name)?.split("&").at(0)],limit:20,keepForever:!0});w(()=>{O(),I(null),X(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),B(o,r=>{r&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const T=A(()=>{const r=o.value?.pages?.[0]?.data?.[0];return r&&R.value&&r.media_type!=="person"&&r.media_type!=="genres"});K(()=>{stop(),I(null)});const y=p(),C=p();w(()=>{C.value=i.params.id??i.name,h.value&&(o?.value?.pages?.length??0)<50&&b(),document.addEventListener("scrollToDiv",r=>{y.value?.scrollTo({top:r.detail.top-100,behavior:"smooth"})})}),D(()=>{document.dispatchEvent(new Event("indexer"))}),B(o,r=>{r&&h.value&&r?.pages?.length<50&&b()});const P=p(),S=p();function f(r,d){P.value=d,S.value.show(r)}return(r,d)=>(s(),n(t(L),null,{default:M(()=>[N(t(U),{fullscreen:!0,class:"ion-padding",style:{"--padding-bottom":"0"}},{default:M(()=>[d[0]||(d[0]=_("div",{class:"fixed top-0 pt-safe w-full bg-surface-1 z-1199"},null,-1)),_("div",{ref_key:"lib",ref:y,class:"pt-safe-offset-9 flex h-auto w-full pr-8 overflow-auto scroll-container"},[(s(),l("div",{key:t(J).currentRoute.value.params?.id,class:x([{"pb-2":t(u)&&t(c),"children:pb-4 sm:children:pb-3":!t(u)&&t(c)},"z-0 flex flex-col gap-4 rounded-3xl border-0 w-available scrollbar-none border-surface-3"])},[_("div",{class:x(`grid w-full gap-4 scroll-smooth music-showing:pb-0 pl-1 py-4 ${T.value?ee:te}`)},[t(o)?(s(!0),l(m,{key:0},E(t(o).pages??[],(k,V)=>(s(),l(m,{key:V},[k.data.length>0?(s(!0),l(m,{key:0},E(k.data??[],(e,g)=>(s(),l(m,null,[e?.media_type==="tv"||e?.media_type==="movie"||e?.media_type==="collection"||e?.media_type==="specials"?(s(),n(H,{key:e.id,data:e,index:g,onContextMenu:a=>f(a,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="person"?(s(),n(Q,{key:`${e.id}_person`,data:e,index:g,onContextMenu:a=>f(a,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="genres"?(s(),n(Z,{key:`${e.id}_genres`,data:e,index:g,onContextMenu:a=>f(a,e)},null,8,["data","index","onContextMenu"])):v("",!0)],64))),256)):t(o).pages?.[0]?.data?.length===0?(s(),n($,{key:1})):v("",!0)],64))),128)):v("",!0)],2)],2)),N(j,{id:C.value,class:x([{"h-available":!t(u),"h-inherit top-24":t(u),"-mt-4 pt-4 pb-4 mb-0":!t(c),"-mt-4 pt-4 pb-4 mb-14":t(c)},"w-8 fixed right-0 bg-surface-1 transition-all duration-200"])},null,8,["id","class"])],512)]),_:1})]),_:1}))}}),ke=re;export{ke as default};
