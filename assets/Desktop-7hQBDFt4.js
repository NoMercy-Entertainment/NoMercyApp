import{Bn as pe,Bt as _,Gt as n,Ht as _e,I as Z,Ln as o,Lt as T,M as K,Mt as C,Rn as P,Rt as l,Sn as he,Tt as x,Vn as g,Vt as c,Wt as Y,an as Q,cn as t,dn as O,fn as q,i as ge,kn as j,kt as ye,n as xe,on as oe,qt as b,u as be,un as S,xn as v,yn as z,zt as f}from"./index-cywnPOBC.js";import"./dist-yzM0QGvF.js";import"./esm-CsGjMs42.js";import"./esm-D4f7ygqA.js";import"./dist-CG1k-g7C.js";import"./focus-visible-dQviwWa0.js";import"./index5-DWzlHdCO.js";import"./client-D7oxUmH6.js";import"./ionic-global-DCe2g38l.js";import"./hardware-back-button-Bqrrbg0Z.js";import"./index3-bIbYCfqw.js";import"./helpers-BGGXVDsd.js";import"./index6-vUi4VFUZ.js";import"./index8-5IzBz0Dr.js";import"./keyboard-CAPY05Np.js";import"./index2-DsYXeg3E.js";import"./ios.transition-DeZfFnMt.js";import"./keyboard2-CYwkuq6R.js";import"./md.transition-CoCDKCK7.js";import"./dir-VVnELOav.js";import"./basecomponent-Dn_g4DAz.js";import"./classnames-C7QsyfAI.js";import"./button-n8IYfWnY.js";import"./baseicon-DTjMEpRe.js";import"./times-bO8EOx7-.js";import{B as ke,I as ue,a as ne,b as we,l as $e,m as V,n as de,o as F,p as G,z as Ce}from"./ui-C0FA7XgL.js";import"./client-TRoQZYEY.js";import{S as je,m as Te,t as ce,v as Se,x as Ae}from"./currentServer-ns-65dJg.js";import"./config-BZ-AEJ_J.js";import"./core-Byg9KrIc.js";import"./esm-D9ex0nT9.js";import"./global-oyc8MvKQ.js";import"./esm-B2mzPl6v.js";import"./bundle-mjs-BuAB9hD1.js";import{s as X}from"./user-DdN2xDWa.js";import"./serverClient-h83xvsoB.js";import{b as Me}from"./router-b6Y7vD7A.js";import"./utils-CfbU6uFB.js";import"./useBaseQuery--g5SyDb6.js";import"./useInfiniteServerClient-DYu8wLRM.js";import{N as Le,V as Pe,Z as J,c as qe,g as L,h as W,k as U,l as te,m as Be}from"./SocketClient-BXQHVNG_.js";import"./useQueryClient-CeysrMlA.js";import"./useQuery-BSaIeQ43.js";import"./apiClient-cmnl9Hzw.js";import"./notifications-Cig9DoL1.js";import"./utils-D5nhA-44.js";import{a as ae}from"./deviceInfo-D74C9RbC.js";import"./auth-Bz7Q9vHJ.js";import"./musicPlaylists-CRSZ6nMQ.js";import"./esm-DZQicoaf.js";import{a as Re}from"./contextMenuItems-CnT1Q0_S.js";import"./_plugin-vue_export-helper-pDp7unP0.js";import"./AppLogoSquare-BPMeAXGY.js";import{t as B}from"./MoooomIcon-DKjYVqpr.js";import{t as ze}from"./DropdownMenu-DahWlyk2.js";import"./dist-DxpR9Lgz.js";import{t as Oe}from"./fileupload-Cs3UY4Po.js";import{t as De}from"./useServerClient-BCJ_nw8c.js";import{t as ee}from"./CoverImage-5Kr6U9m2.js";import{t as Ne}from"./ScrollContainer-CLVULms8.js";import{t as re}from"./Button-CDwGesU1.js";import"./MusicButton-DNSqRPtJ.js";import{t as D}from"./BannerButton-D551V_yc.js";import{t as ve}from"./MediaLikeButton-BxCAAXfp.js";import{t as le}from"./PlayerIcon-Box4yPCR.js";import{t as Fe}from"./Modal-tJlDQvid.js";import{n as Ue}from"./swiper-vue-DRvkNJmv.js";import"./swiper-element-bundle-B4dijnom.js";import{n as He,t as Ee}from"./EqSpinner-C3RZ5e3G.js";import{t as Ie}from"./NotFound-Cf7-T-fR.js";import{t as Ve}from"./ShareButton-D4ftU7kH.js";import{t as Ge}from"./Carousel-BGLI52mI.js";x();K();var We=["data-track-id"],Ye={class:"flex w-10 justify-center text-center min-w-10"},Je={key:0,class:"group-focus-visible/track:sm:hidden group-hover/track:sm:hidden"},Ze={class:"flex h-12 items-center gap-2 overflow-hidden w-available sm:gap-4"},Ke={class:"flex h-full flex-col justify-evenly overflow-clip w-inherit"},Qe={class:"flex h-5 flex-nowrap overflow-clip text-left font-bold line-clamp-1 w-inherit"},Xe=["data-size"],et={class:"flex whitespace-nowrap"},tt={class:"flex items-center justify-between gap-2 text-end"},at={class:"mr-4 monospace sm:mr-0"},rt=b({__name:"TrackRow",props:{data:{type:Object,required:!0},index:{type:Number,required:!0},displayList:{type:Array,required:!0}},setup(e){const a=e,r=Z(),d=T(()=>r.path.startsWith("/music/album")),i=T(()=>r.path.startsWith("/music/playlists"));function m(){if(!X.value.features?.nomercyConnect){qe.playTrack(a.data,a.displayList);return}J.value?.invoke("StartPlaybackCommand",d.value?"album":"artist",d.value?a.data?.album_track.at(0)?.id:a.data?.artist_track.at(0)?.id,a.data.id)}return(u,h)=>{const k=q("RouterLink");return t(),c("button",{"data-track-id":e.data?.id,class:"grid justify-start items-center self-stretch pr-3 sm:px-3 rounded-lg hover:bg-surface-6/8 group/track text-sm font-medium py-2 z-0 group/track home-grid gap-2","data-target":"track",tabindex:"0",onClick:h[0]||(h[0]=p=>m()),onContextmenu:h[1]||(h[1]=p=>o(Re)(p,u.$route,e.data))},[l("span",Ye,[o(L)?.id!==e.data.id?(t(),c("span",Je,g(e.index+1),1)):_("",!0),o(L)?.id===e.data.id?(t(),f(Ee,{key:1,playing:o(U),class:"hidden group-focus-visible/track:sm:!hidden group-hover/track:sm:!hidden",color:"var(--color-theme-8)"},null,8,["playing"])):_("",!0),o(L)?.id===e.data.id&&o(U)?(t(),f(le,{key:2,class:"hidden h-6 w-6 group-focus-visible/track:sm:block group-hover/track:sm:block",icon:"nmPause"})):(t(),f(le,{key:3,class:"hidden h-6 w-6 group-focus-visible/track:sm:block group-hover/track:sm:block",icon:"nmPlay"}))]),l("span",Ze,[d.value?(t(),f(ee,{key:0,data:e.data,size:100,"class-name":"relative hidden h-12 w-12 overflow-hidden min-w-[3rem] sm:block",loading:"eager"},null,8,["data"])):_("",!0),l("span",Ke,[l("span",Qe,g(e.data.name),1),i.value?(t(),c("span",{key:0,"data-size":o(Le),class:"inline-flex h-5 w-fit gap-1 overflow-hidden whitespace-nowrap text-surface-9 line-clamp-1 text-2xs hover:animate-pause"},[e.data?(t(),f(He,{key:0,id:e.data.id,data:e.data.artist_track,onclick:p=>p.stopPropagation(),"data-target":"artist",type:"artists"},null,8,["id","data","onclick"])):_("",!0)],8,Xe)):_("",!0)])]),e.data?(t(!0),c(C,{key:0},S(e.data.album_track,p=>(t(),c("span",{key:p.id,class:"max-w-sm items-center overflow-clip pr-2 line-clamp-2 h-inherit w-inherit"},[n(k,{onclick:s=>s.stopPropagation(),to:p?.link,class:"flex items-center gap-1 whitespace-nowrap text-xs font-semibold line-clamp-1 hover:underline focus:underline dark:font-medium","data-target":"album",tabindex:"0"},{default:v(()=>[l("span",et,g(p.name),1)]),_:2},1032,["onclick","to"])]))),128)):_("",!0),l("span",tt,[(t(),f(ve,{key:e.data.id,data:e.data,onclick:p=>p.stopPropagation(),class:"hidden sm:flex",color:"var(--color-theme-8)"},null,8,["data","onclick"])),l("span",at,g(e.data.duration),1)]),n(ze,{direction:"down"},{button:v(()=>[n(D,{class:"mx-3",title:""},{default:v(()=>[n(B,{"class-name":"relative h-5 w-5",icon:"menuDotsVertical"})]),_:1})]),_:1})],40,We)}}}),lt=rt;x();var st={key:0,class:"flex w-full flex-col items-start justify-start gap-4 self-stretch"},it={class:"self-stretch text-xl font-bold leading-loose"},ot={class:"flex flex-col items-start justify-start gap-1 self-stretch"},ut={class:"z-10 grid items-center justify-start gap-4 self-stretch py-2 pr-3 text-sm font-medium home-grid sm:px-3"},nt={class:"shrink grow basis-0 text-sm leading-tight text-surface-12/11"},dt={class:"shrink grow basis-0 text-sm leading-tight text-surface-12/11"},ct={class:"shrink grow basis-0 text-right text-sm leading-tight text-surface-12/11"},vt={class:"flex flex-col items-start justify-start gap-1 self-stretch"},mt=b({__name:"TrackCard",props:{data:{type:Array,required:!0},title:{type:String,required:!0}},setup(e){return(a,r)=>e.data&&e.data?.length>0?(t(),c("div",st,[l("div",it,g(a.$t(e.title)),1),l("div",ot,[l("div",ut,[r[0]||(r[0]=l("div",{class:"w-10 text-center text-sm leading-tight text-surface-12/11"}," # ",-1)),l("div",nt,g(a.$t("Title")),1),l("div",dt,g(a.$t("Album")),1),l("div",ct,g(a.$t("Duration")),1)])]),l("div",vt,[(t(!0),c(C,null,S(e.data,(d,i)=>(t(),f(lt,{key:d.id+d?.favorite,data:d,"display-list":e.data,index:i},null,8,["data","display-list","index"]))),128))])])):_("",!0)}}),se=mt;x();var ft={class:"contents"},pt=b({__name:"Tab",props:{isActive:{type:Boolean,default:!1}},setup(e){return(a,r)=>he((t(),c("div",ft,[O(a.$slots,"default")],512)),[[ye,e.isActive]])}}),M=pt;x();var _t={class:"opacity-0 duration-150 transition-all group-hover/cover:opacity-100 group-hover/cover:bg-black/40 inset-0 absolute grid items-center text-lg font-semibold"},ht=b({__name:"ClickUploadModal",props:{data:{type:Object,required:!0},url:{type:String,required:!0}},setup(e){const a=e,r=j(null),d=j(!1),i=j(a.data);function m(){d.value=!1}function u(){d.value=!0}const h=xe(),k=j(),p=j(),s=j(a.data.cover),w=j(!0),y=T(()=>`${ce.value?.serverApiUrl}${a.url}`);function A(){k.value.upload(),w.value=!0}function N($){h.add({severity:"info",summary:"Success",detail:"File Uploaded",life:3e3});const{data:I}=JSON.parse($.xhr.response);s.value=I.url,F(I.color_palette?.cover),m()}function R($){s.value=$.files[0].objectURL,w.value=!1}function E($){$.xhr.setRequestHeader("Authorization",`Bearer ${X.value.accessToken}`)}function fe(){s.value=a.data.cover,k.value.clear(),m()}return z(s,$=>{i.value={...i.value,cover:$}}),($,I)=>(t(),c(C,null,[l("button",{id:"uploadDialogTrigger",ref_key:"trigger",ref:r,class:"contents",onClick:u},[O($.$slots,"default",{ref:p.value,data:i.value}),l("div",_t,g($.$t("Drag and drop files to here to upload.")),1)],512),n(Fe,{close:m,open:d.value,"max-width":"max-w-2xl",title:"Upload image"},{actions:v(()=>[n(re,{id:"upload",color:"white",variant:"text",onClick:fe},{default:v(()=>[Y(g($.$t("Cancel")),1)]),_:1}),n(re,{id:"upload",disabled:w.value,color:"theme",onClick:A},{default:v(()=>[Y(g($.$t("Save")),1)]),_:1},8,["disabled"])]),default:v(()=>[n(o(Oe),{ref_key:"fileUpload",ref:k,"cancel-label":$.$t("Cancel"),"choose-label":$.$t("Choose image"),"max-file-size":2*1024*1024,url:y.value,accept:"image/*",class:"p-button-outlined",mode:"basic",name:"image","with-credentials":"",onSelect:R,onUpload:N,onBeforeSend:E},null,8,["cancel-label","choose-label","url"])]),_:1},8,["open"])],64))}}),gt=ht;x();var yt={class:"flex w-full flex-col items-start justify-start gap-4"},xt={class:"flex flex-col items-start justify-start self-stretch overflow-clip rounded-lg relative group/cover"},bt={class:"w-full whitespace-pre-line font-semibold leading-normal"},kt=b({__name:"ProfileCard",props:{data:{type:Object,required:!0}},setup(e){const a=e;return Q(()=>{a.data?.color_palette&&F(a.data?.color_palette?.cover)}),oe(()=>{F(null),ne(null)}),(r,d)=>(t(),c("div",yt,[l("div",xt,[n(gt,{data:e.data,url:`${e.data.link}/cover`},{default:v(({data:i,ref:m})=>[n(ee,{data:i,"img-ref":m,size:500,class:"aspect-square h-auto w-full"},null,8,["data","img-ref"])]),_:1},8,["data","url"])]),l("div",bt,g(e.data.disambiguation||e.data.description?o(Te)(e.data.description??e.data.disambiguation,200):""),1)]))}}),wt=kt;x();var $t={class:"inline-flex w-auto flex-wrap items-start justify-start gap-2"},Ct={class:"flex items-center justify-start gap-2 px-2"},jt=b({__name:"GenresCard",props:{data:{type:Object,required:!0}},setup(e){return(a,r)=>{const d=q("RouterLink");return t(),c("div",$t,[(t(!0),c(C,null,S(e.data.genres,i=>(t(),f(d,{key:i.id,to:i?.link,class:"flex items-center justify-start rounded-2xl py-1 px-1.5 bg-focus/10"},{default:v(()=>[l("div",Ct,[l("div",{class:P([`${o(Ce)(o(ue)(o(de)),100)?"text-black/12":"text-white/12"}`,"text-center text-sm font-medium leading-tight"])},g(a.$t(i.name)),3)])]),_:2},1032,["to"]))),128))])}}}),me=jt;x();var Tt={key:0,class:"flex w-full flex-col items-start justify-start gap-4"},St={class:"text-xl font-bold leading-loose text-surface-11"},At={class:"grid grid-cols-2 gap-4"},Mt={class:"flex h-16 w-16 items-center justify-center rounded px-px py-px"},Lt={class:"flex items-center justify-start gap-2.5"},Pt={class:"text-sm font-semibold text-surface-8 text-balance line-clamp-2"},qt=b({__name:"FeaturedCard",props:{data:{type:Object,required:!0}},setup(e){const a=e,r=T(()=>{const d={};return a.data?.tracks?.forEach(i=>{i.artist_track?.forEach(m=>{m.id===a.data.id||!m.cover||(d[m.id]={id:m.id,name:m.name,cover:m.cover})})}),Object.values(d)});return(d,i)=>{const m=q("RouterLink");return r.value.length>0?(t(),c("div",Tt,[l("div",St,g(d.$t("Featured Artists")),1),l("div",At,[(t(!0),c(C,null,S(r.value,u=>(t(),f(m,{key:u.id,to:u.link,class:"inline-flex items-center justify-start gap-4 underline-offset-4 hover:underline"},{default:v(()=>[l("div",Mt,[n(ee,{data:u,size:60,class:"h-14 w-14 rounded-lg"},null,8,["data"])]),l("div",Lt,[l("div",Pt,g(u.name),1)])]),_:2},1032,["to"]))),128))])])):_("",!0)}}}),Bt=qt;x();var Rt={class:"flex flex-row items-start justify-start gap-8 overflow-clip w-available"},zt={class:"inline-flex flex-col items-start justify-start gap-8 w-[clamp(200px,25%,500px)]"},Ot=b({__name:"TabFrame",props:{data:{type:Object,required:!0},activeTab:{type:String,required:!0}},setup(e){return(a,r)=>(t(),c("div",Rt,[l("div",zt,[n(wt,{data:e.data},null,8,["data"]),e.activeTab!=="About"?(t(),f(me,{key:0,data:e.data,class:"max-w-md"},null,8,["data"])):_("",!0),e.activeTab!=="About"?(t(),f(Bt,{key:1,data:e.data},null,8,["data"])):_("",!0)]),l("div",{class:P(["z-0 flex h-min w-0 flex-1 flex-col gap-x-2 gap-y-8 overflow-clip",e.activeTab==="About"?"ml-8 w-[60%]":""])},[O(a.$slots,"default")],2)]))}}),H=Ot;x();var Dt={class:"flex flex-1 basis-0 items-start justify-start gap-8 self-stretch p-8 pb-0"},Nt=b({__name:"Home",props:{data:{type:Object,required:!0},displayType:{type:String,default:"list"},activeTab:{type:String,required:!0}},setup(e){const a=[{name:"list"},{name:"card"}];return(r,d)=>(t(),c("div",Dt,[n(H,{"active-tab":e.activeTab,data:e.data},{default:v(()=>[n(M,{"is-active":e.displayType===a[0].name},{default:v(()=>[n(se,{data:e.data.favorite_tracks??[],title:"Your most played"},null,8,["data"]),n(se,{data:e.data.tracks??[],title:"All songs"},null,8,["data"])]),_:1},8,["is-active"]),n(M,{"is-active":e.displayType===a[1].name},null,8,["is-active"])]),_:1},8,["active-tab","data"])]))}}),Ft=Nt;x();var Ut={class:"flex flex-1 basis-0 items-start justify-start gap-8 self-stretch p-8 pb-0"},Ht=b({__name:"Albums",props:{data:{type:Object,required:!0},item:{type:String,required:!0},activeTab:{type:String,required:!0}},setup(e){return(a,r)=>{const d=q("NMMusicCard");return t(),c("div",Ut,[n(H,{"active-tab":e.activeTab,data:e.data},{default:v(()=>[l("div",{class:P([{"pb-4 sm:pb-4":!o(L)},"z-0 w-full h-available h-fit grid gap-4 music-showing:pb-0 grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-5 3xl:grid-cols-7 4xl:grid-cols-7 5xl:grid-cols-[repeat(8,minmax(0,1fr))] tv:grid-cols-6 scroll-smooth items-start"]),style:{opacity:"1"}},[Array.isArray(e.data?.[e.item])?(t(!0),c(C,{key:0},S(e.data[e.item],i=>(t(),c(C,{key:i?.id},[i?(t(),f(d,{key:0,data:i},null,8,["data"])):_("",!0)],64))),128)):_("",!0)],2)]),_:1},8,["active-tab","data"])])}}}),ie=Ht;x();var Et={class:"flex flex-1 basis-0 items-start justify-start gap-8 self-stretch p-8 pb-0"},It=b({__name:"Playlists",props:{data:{type:Object,required:!0},activeTab:{type:String,required:!0}},setup(e){return(a,r)=>{const d=q("NMMusicCard");return t(),c("div",Et,[n(H,{"active-tab":e.activeTab,data:e.data},{default:v(()=>[l("div",{class:P([{"pb-4 sm:pb-4":o(L)},"z-0 w-available h-available w-full h-fit grid gap-4 pl-4 pr-4 pt-4 pb-4 music-showing:pb-0 grid-cols-2 sm:grid-cols-3 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-9 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6 scroll-smooth"]),style:{opacity:"1"}},[Array.isArray(e.data.playlists)?(t(!0),c(C,{key:0},S(e.data.playlists,i=>(t(),f(d,{key:i.id,data:i},null,8,["data"]))),128)):_("",!0)],2)]),_:1},8,["active-tab","data"])])}}}),Vt=It;x();var Gt=b({__name:"MusicCarousel",props:{data:{type:Object,required:!0},index:{type:Number,required:!1,default:0},limitCardCountBy:{type:Number,required:!1}},setup(e){function a(r){setTimeout(()=>{r.color_palette},50)}return(r,d)=>{const i=q("RouterLink"),m=q("NMMusicCard");return e.data.items?.length>0?(t(),f(Ge,{key:0,"disable-auto-aspect":!0,index:e.index,"limit-card-count-by":e.limitCardCountBy,title:e.data.title},_e({default:v(()=>[(t(!0),c(C,null,S(e.data.items,u=>(t(),f(o(Ue),{key:u?.id,"virtual-index":e.index,class:"flex py-1"},{default:v(()=>[u?.id?(t(),f(m,{key:0,id:`item-${u?.name}-${u?.id}`,data:u,onclick:()=>a(u),class:""},null,8,["id","data","onclick"])):_("",!0)]),_:2},1032,["virtual-index"]))),128))]),_:2},[e.data.moreLink?{name:"link",fn:v(()=>[n(i,{to:e.data.moreLink,class:"mr-auto ml-4 font-medium underline underline-offset-4"},{default:v(()=>[...d[0]||(d[0]=[Y(" see more ",-1)])]),_:1},8,["to"])]),key:"0"}:void 0]),1032,["index","limit-card-count-by","title"])):_("",!0)}}}),Wt=Gt;x();var Yt={key:0,class:"flex flex-1 basis-0 items-start justify-start self-stretch overflow-clip px-8 py-8 w-available"},Jt={class:"flex flex-col gap-2 overflow-clip w-available max-w-[75ch]"},Zt=["innerHTML"],Kt={class:"max-w-available"},Qt=b({__name:"About",props:{data:{type:Object,required:!0},activeTab:{type:String,required:!0}},setup(e){const a=e,r=T(()=>{const i={};return a.data?.tracks?.forEach(m=>{m.artist_track?.forEach(u=>{u.id===a.data.id||!u.cover||(i[u.id]=u)})}),Object.values(i)}),d=T(()=>[{title:"Featuring artists",moreLink:"",children:r.value}]);return(i,m)=>e.activeTab?(t(),c("div",Yt,[n(H,{data:e.data,"active-tab":e.activeTab},{default:v(()=>[l("div",Jt,[(t(!0),c(C,null,S((e.data.description??"")?.split(`
`)??[],u=>(t(),c("div",{key:u,class:"flex flex-col gap-1"},[(t(!0),c(C,null,S(u.split(`
`),h=>(t(),c("span",{key:h,class:"bionic-text font-semibold !text-base",innerHTML:h},null,8,Zt))),128))]))),128))]),n(me,{data:e.data},null,8,["data"]),l("div",Kt,[(t(!0),c(C,null,S(d.value??[],u=>(t(),f(Wt,{key:u.title,data:u,class:"-mx-3","limit-card-count-by":2},null,8,["data"]))),128))])]),_:1},8,["data","active-tab"])])):_("",!0)}}),Xt=Qt;x();var ea={class:"z-0 flex shrink grow basis-0 flex-col items-start justify-start self-stretch"},ta={class:"sticky -top-1 z-10 h-14 w-full border-b border-surface-12/6 bg-surface-1"},aa={class:"absolute left-4 inline-flex flex-col items-start justify-start gap-2 top-[15px]"},ra={class:"inline-flex items-start justify-start gap-4"},la=["onClick"],sa=b({__name:"Tabs",props:{tabs:{type:Array,required:!0}},setup(e){const a=e,r=j(a.tabs[0].name);function d(i){r.value=a.tabs[i].name}return(i,m)=>(t(),c("div",ea,[l("div",ta,[l("nav",aa,[l("ul",ra,[(t(!0),c(C,null,S(e.tabs,(u,h)=>(t(),c("button",{key:u.name,class:P(`px-1 pb-4 ${r.value===u.name?"border-b-2":""} empty:hidden transition-transform duration-100 border-focus justify-center items-center gap-2 flex cursor-pointer`),onClick:k=>d(h)},[u?.name?(t(),c("div",{key:0,class:P(`${r.value===u.name?"text-focus":""} text-base font-semibold leading-normal`)},g(i.$t(u.name)),3)):_("",!0)],10,la))),128))])]),O(i.$slots,"extra",{activeTab:r.value})]),O(i.$slots,"default",{activeTab:r.value,class:"z-0"})]))}}),ia=sa;x();K();var oa={class:"flex flex-shrink-0 flex-grow-0 items-end justify-start gap-4 w-[710px]"},ua={class:"relative flex flex-grow flex-col items-start justify-start gap-4"},na={class:"flex-shrink-0 flex-grow-0 self-stretch text-5xl font-bold w-[710px]"},da={class:"relative flex flex-shrink-0 flex-grow-0 items-center justify-start gap-2.5"},ca={key:0,class:"flex-shrink-0 flex-grow-0 text-sm"},va={class:"flex-shrink-0 flex-grow-0 text-sm"},ma={class:"flex-shrink-0 flex-grow-0 text-sm"},fa={class:"flex flex-shrink-0 flex-grow-0 items-center justify-start gap-2"},pa=b({__name:"Header",props:{data:{type:Object,required:!0}},setup(e){const a=e,r=Z(),d=j("");Q(()=>{d.value=we(a.data)});const i=T(()=>{let p=a.data?.images?.toSorted((s,w)=>w.voteCount-s.voteCount)?.find(s=>s.type==="banner");if(p||(p=a.data?.images?.toSorted((s,w)=>w.voteCount-s.voteCount)?.find(s=>s.type==="background")),!!p)return`${ce.value?.serverBaseUrl}${p?.src}`}),m=T(()=>`/music/${a.data?.type?.replace(/s$/u,"")}/${a.data?.id}`);function u(){if(!a.data?.tracks)return;if(!X.value.features?.nomercyConnect){if(W.value===m.value){te.togglePlayback();return}te.playTrack(a.data.tracks.at(0),a.data.tracks),Pe(m.value);return}Be.value||J.value?.invoke("ChangeDeviceCommand",ae.value).then(()=>{console.log("Switched to device:",ae.value)}).catch(s=>{console.error("Error switching device:",s)});const p=a.data.tracks.some(s=>s.id===L.value?.id)?L.value?.id:a.data.tracks.at(0)?.id;J.value?.invoke("StartPlaybackCommand",a.data.type.replace(/s$/u,""),a.data.id,p)}const h=T(()=>({title:a.data?.name??"",url:`https://app.nomercy.tv${r.fullPath}`})),k=T(()=>ke(ue(de.value),150));return(p,s)=>(t(),c("div",{class:P([{"h-[425px]":i.value,"h-[200px]":!i.value,"text-black/12":k.value,"text-white/12":!k.value},"relative -mx-2 flex flex-shrink-0 flex-grow-0 items-end justify-between self-stretch overflow-hidden bg-cover bg-start bg-no-repeat object-cover p-9 w-available !h-[306px]"]),style:pe(i.value?`background-image: url('${i.value}')`:"background-image: linear-gradient(180deg, var(--color-theme-8) 0%, var(--color-theme-8) 100%)")},[s[2]||(s[2]=l("div",{class:"pointer-events-none absolute inset-0 z-0 mt-auto h-4/5 bg-gradient-to-t from-black via-black/60"},null,-1)),l("div",oa,[l("div",ua,[l("p",na,g(e.data.name),1),l("div",da,[e.data.playlists?.length?(t(),c("p",ca,[l("span",null,g(o(je)("Appears in {0} Playlists",e.data.playlists?.length??0)),1),s[0]||(s[0]=l("svg",{class:"flex-shrink-0 flex-grow-0",fill:"none",height:"4",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 3 4",width:"3",xmlns:"http://www.w3.org/2000/svg"},[l("circle",{cx:"1.5",cy:"2",fill:"#9BA1A6",r:"1.5"})],-1))])):_("",!0),l("p",va,g(e.data.tracks?.length)+" "+g(e.data.tracks?.length===1?p.$t("song"):p.$t("songs")),1),s[1]||(s[1]=l("svg",{class:"flex-shrink-0 flex-grow-0",fill:"none",height:"4",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 3 4",width:"3",xmlns:"http://www.w3.org/2000/svg"},[l("circle",{cx:"1.5",cy:"2",fill:"#9BA1A6",r:"1.5"})],-1)),l("p",ma,g(d.value),1)])])]),l("div",fa,[n(D,{onclick:u,title:o(U)&&o(W)===m.value?p.$t("Pause"):p.$t("Play")},{default:v(()=>[o(U)&&o(W)===m.value?(t(),f(B,{key:0,"class-name":"relative h-6 w-6",icon:"pause"})):(t(),f(B,{key:1,"class-name":"relative h-6 w-6",icon:"play"}))]),_:1},8,["title"]),n(Ve,{"share-data":h.value,class:"!p-1"},null,8,["share-data"]),e.data&&!o(Me)?(t(),f(ve,{key:0,data:e.data,"class-name":"h-5 w-5",color:"var(--color-theme-8)"},null,8,["data"])):_("",!0),n(D,{title:p.$t("More")},{default:v(()=>[n(B,{"class-name":"relative h-5 w-5",icon:"menuDotsHorizontal"})]),_:1},8,["title"])])],6))}}),_a=pa;x();K();var ha={key:0,class:"inline-flex w-full flex-1 flex-col items-start justify-start overflow-clip rounded-2xl bg-surface-2/1"},ga={key:0,class:"absolute right-4 inline-flex items-center justify-start top-[9.65px] gap-2.5"},ya=b({__name:"Desktop",setup(e){const a=Z(),{data:r,isError:d}=De({path:a.fullPath,keepForever:!0});Q(()=>{document.dispatchEvent(new Event("sidebar"))}),oe(()=>{F(null),ne(null)});const i=j(),m=j("");z(G,s=>{u(r.value?.tracks??[],V.value,s,m.value)}),z(V,s=>{u(r.value?.tracks??[],s,G.value,m.value)}),z(m,s=>{u(r.value?.tracks??[],V.value,G.value,s)}),z(r,s=>{Se(s?.name??null)});function u(s,w,y,A){const N=Ae(s??[],w,y,$e);A===""?i.value=N:i.value=N?.filter(R=>R.name?.toLowerCase().includes(A?.toLowerCase?.())||R.artist_track?.some(E=>E.name.toLowerCase().includes(A?.toLowerCase?.()))||R.album_track?.[0]?.name.toLowerCase().includes(A?.toLowerCase?.()))??[]}const h=T(()=>[{name:"Home"},{name:"Albums"},{name:"Featured"},{name:"Playlists"},{name:"About"}].filter(s=>(s.name==="Albums"&&r.value?.albums?.length===0&&(s.name=""),s.name==="Playlists"&&r.value?.playlists?.length===0&&(s.name=""),s.name==="Playlists"&&r.value?.featured?.length===0&&(s.name=""),!0))),k=j("list");function p(s){k.value=s}return(s,w)=>(t(),f(o(be),null,{default:v(()=>[n(o(ge),{fullscreen:!0},{default:v(()=>[o(d)&&!o(r)?(t(),f(Ie,{key:0})):(t(),f(Ne,{key:1,"auto-hide":!0,static:!0},{default:v(()=>[o(r)?.id===o(a).params.id?(t(),c("div",ha,[o(r)?(t(),f(_a,{key:0,data:o(r)},null,8,["data"])):_("",!0),n(ia,{tabs:h.value,class:"min-h-[calc(100vh-175px)] !flex-1"},{extra:v(({activeTab:y})=>[y===h.value[0].name?(t(),c("div",ga,[n(D,{"is-active":k.value==="list",title:"List",onClick:w[0]||(w[0]=A=>p("list"))},{default:v(()=>[n(B,{"class-name":"relative h-5 w-5",icon:"bulletList"})]),_:1},8,["is-active"]),n(D,{"is-active":k.value==="card",title:"Grid",onClick:w[1]||(w[1]=A=>p("card"))},{default:v(()=>[n(B,{"class-name":"relative h-5 w-5",icon:"collection"})]),_:1},8,["is-active"])])):_("",!0)]),default:v(({activeTab:y})=>[n(M,{"is-active":y===h.value[0].name},{default:v(()=>[o(r)?(t(),f(Ft,{key:0,"active-tab":y,data:o(r),"display-type":k.value},null,8,["active-tab","data","display-type"])):_("",!0)]),_:2},1032,["is-active"]),n(M,{"is-active":y===h.value[1].name},{default:v(()=>[o(r)?(t(),f(ie,{key:0,"active-tab":y,data:o(r),item:"albums"},null,8,["active-tab","data"])):_("",!0)]),_:2},1032,["is-active"]),n(M,{"is-active":y===h.value[2].name},{default:v(()=>[o(r)?(t(),f(ie,{key:0,"active-tab":y,data:o(r),item:"featured"},null,8,["active-tab","data"])):_("",!0)]),_:2},1032,["is-active"]),n(M,{"is-active":y===h.value[3].name},{default:v(()=>[o(r)?(t(),f(Vt,{key:0,"active-tab":y,data:o(r)},null,8,["active-tab","data"])):_("",!0)]),_:2},1032,["is-active"]),n(M,{"is-active":y===h.value[4].name},{default:v(()=>[o(r)?(t(),f(Xt,{key:0,"active-tab":y,data:o(r)},null,8,["active-tab","data"])):_("",!0)]),_:2},1032,["is-active"])]),_:1},8,["tabs"])])):_("",!0)]),_:1}))]),_:1})]),_:1}))}}),Dr=ya;export{Dr as default};
