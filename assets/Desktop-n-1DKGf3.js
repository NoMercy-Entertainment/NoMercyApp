import{Y as $,c as u,o as l,l as r,i as g,h as w,v as c,d as k,j as R,y as s,Z as d,ar as S,F as I,p as L,t as C,B as b,an as q}from"./vue-ionic-Cv2or74p.js";import{c as x,a as p,z as N}from"./index-DA_trMwP.js";import{u as j}from"./useServerClient-Cn1oCyZ-.js";import{_ as z}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-CXAd2JcI.js";import{_ as V}from"./DashboardCard.vue_vue_type_script_setup_true_lang-BUnLVVM7.js";import{_ as D}from"./TMDBImage.vue_vue_type_script_setup_true_lang-BpYhTEZZ.js";import"./vendor-F08gofix.js";import"./icons-BW5E66pf.js";import"./rxjs-BCp2L9Rn.js";import"./media-C2AqgyMX.js";import"./api-BBofn2cc.js";import"./swiper-DhG1br88.js";import"./music-player-Dgg5bFLw.js";import"./useInfiniteServerClient-CnMjV_i3.js";import"./useMounted-CS-UU_bv.js";import"./FloatingBackButton.vue_vue_type_script_setup_true_lang-iKqotFXC.js";import"./OptimizedIcon.vue_vue_type_script_setup_true_lang-Bi-0Ik3i.js";import"./Button.vue_vue_type_script_setup_true_lang-R7-60zhu.js";import"./ScrollContainer.vue_vue_type_script_setup_true_lang-B_sGfp0N.js";import"./RipperOverlay.vue_vue_type_script_setup_true_lang-Dn1A85XS.js";import"./Button.vue_vue_type_script_setup_true_lang-BDrzJc8T.js";import"./AppLogoSquare-DwFk-Amv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"relative flex aspect-video flex-shrink-0 flex-grow-0 flex-col items-center justify-center self-stretch overflow-clip rounded-lg bg-theme-11 dark:bg-theme-8 text-slate-light-12/80 dark:text-slate-dark-12/80"},K={key:1,class:"text-xl font-bold"},U=$({__name:"LibraryCard",props:{data:{type:Object,required:!0}},setup(e){return(v,i)=>{var o,a,n;return l(),u(V,{route:`/dashboard/libraries/${e.data.id}`,line1:e.data.title,line2:e.data.folder_library&&((o=e.data.folder_library)==null?void 0:o.length)!=1?`${(a=e.data.folder_library)==null?void 0:a.length} folders`:`${(n=e.data.folder_library)==null?void 0:n.length}  folder`},{image:r(()=>[g("div",F,[i[0]||(i[0]=g("div",{class:"backdropCard-overlay"},null,-1)),e.data.image?(l(),u(D,{key:0,path:e.data.image,class:"z-0"},null,8,["path"])):(l(),w("span",K,c(e.data.title),1))])]),_:1},8,["route","line1","line2"])}}}),de=$({__name:"Desktop",setup(e){var y;const{data:v,error:i}=j({path:"dashboard/libraries",queryKey:["dashboard","libraries",(y=x.value)==null?void 0:y.serverBaseUrl]}),o=()=>{p().post("dashboard/libraries").then(({data:t})=>{var f;N.invalidateQueries({queryKey:["dashboard","libraries",(f=x.value)==null?void 0:f.serverBaseUrl]})})},a=k(!1),n=()=>{a.value=!0,p().post("dashboard/libraries/refresh").then(({data:t})=>{a.value=!1}).catch(()=>{a.value=!1})},m=k(!1),B=()=>{m.value=!0,p().post("dashboard/libraries/rescan").then(({data:t})=>{m.value=!1}).catch(()=>{m.value=!1})};return(t,f)=>{const h=R("Button");return l(),u(d(q),null,{default:r(()=>[s(d(S),{fullscreen:!0},{default:r(()=>[s(z,{error:d(i),gridStyle:1,title:"Libraries",description:"Manage your media libraries and their content here."},{cta:r(()=>[s(h,{id:"newLibrary",color:"theme",startIcon:"folderAdd",onClick:o},{default:r(()=>[b(c(t.$t("New library")),1)]),_:1})]),actions:r(()=>[s(h,{type:"button",id:"refresh",variant:"text",startIcon:"folderSwap",disabled:a.value,class:C(a.value?"first:children:animate-spin cursor-not-allowed":""),onClick:n},{default:r(()=>[b(c(t.$t("Refresh all libraries")),1)]),_:1},8,["disabled","class"]),s(h,{type:"button",id:"rescan",variant:"text",startIcon:"folderSwap",disabled:a.value,class:C(a.value?"first:children:animate-spin cursor-not-allowed":""),onClick:B},{default:r(()=>[b(c(t.$t("Rescan all libraries")),1)]),_:1},8,["disabled","class"])]),default:r(()=>[(l(!0),w(I,null,L(d(v)??[],_=>(l(),u(U,{key:_.id,data:_},null,8,["data"]))),128))]),_:1},8,["error"])]),_:1})]),_:1})}}});export{de as default};
