import{An as y,Bn as T,Bt as I,Gt as k,Hn as S,I as V,Lt as N,M,Mt as $,Rt as f,Sn as x,Tt as D,Vt as h,an as F,bn as v,cn as l,i as P,on as j,qt as A,u as O,un as q,zn as e,zt as u}from"./index-CymNhKD_.js";import"./dist-BzCNKCKQ.js";import"./esm-ACLeELb5.js";import"./esm-D_D4nCnV.js";import"./dist-DXrN7I-1.js";import"./client-B3lu4kSB.js";import"./ionic-global-CJHxMOPd.js";import"./hardware-back-button-D60wdz2_.js";import"./index3-D8TaXO-z.js";import"./index8-DyEBw6N5.js";import"./keyboard-CzXNBarC.js";import"./index2-YLkJp4Cu.js";import"./ios.transition-De37_SF6.js";import"./keyboard2-F9Kv6wST.js";import"./md.transition-DlofogM3.js";import"./basecomponent-Bn5la5w8.js";import"./button-fwbJbD2G.js";import{a as G,h as m,i as U,l as Y,m as p,o as g}from"./ui-CVk4xI0v.js";import"./client-CxRn8_4O.js";import{v as J,x as K}from"./currentServer-DzE7mepP.js";import"./config-BZ-AEJ_J.js";import"./esm-B369UUD9.js";import{p as C}from"./global-lh4aio7e.js";import"./esm-L6OojSyq.js";import"./bundle-mjs-CKr78mlm.js";import"./user-DlzWNC9W.js";import"./serverClient-BuGPA0-U.js";import"./router-Ch9jBD0u.js";import"./utils-DO5s4OOL.js";import"./useInfiniteServerClient-vxekqC7x.js";import{g as b}from"./SocketClient-DIjrmZvk.js";import"./apiClient-DbAYXZY3.js";import"./notifications-C159qvRm.js";import"./utils-D5LXfnop.js";import"./deviceInfo-AeSN8xPw.js";import"./auth-Csw53SQZ.js";import"./musicPlaylists-CmQ_i0Iu.js";import"./esm-BbrE0WBs.js";import"./contextMenuItems-BpxGjgB3.js";import{r as Q}from"./BigPlayButton-BKZ4wRc8.js";import"./AppLogoSquare-yoQIEFk_.js";import"./DropdownMenu-BAH5C5rx.js";import"./dist-5Ks7n5tk.js";import{t as W}from"./useServerClient-BC86_TUk.js";import"./CoverImage-B-cOA2tn.js";import{t as X}from"./ScrollContainer-C0xGPQP4.js";import"./MusicButton-Bje5gNcL.js";import"./BannerButton-CuetxwW8.js";import"./MediaLikeButton-BycqhWSF.js";import"./Marquee-C02Cd3_e.js";import"./EqSpinner-ylvqFUdD.js";import{t as Z}from"./NotFound-CSCEXDsO.js";import"./ShareButton-DP6ttAtT.js";import{i as R,n as ee,r as te,t as re}from"./TrackRow-BP_N811I.js";D();M();var ae={key:0,ref:"main",class:"flex flex-col w-available h-available sm:rounded-2xl"},oe={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},le=A({__name:"Desktop",setup(se){const d=V(),{data:t,isError:L}=W({path:d.fullPath}),s=y([]),i=y(""),w=N(()=>Q({count:s.value?.length??0,getScrollElement:()=>U.value??null,estimateSize:()=>64,overscan:10}));v(t,r=>{r&&(J(r?.name??null),n(r?.tracks??[],m.value,p.value,i.value),g(r?.color_palette?.cover))}),v(p,r=>{n(t.value?.tracks??[],m.value,r,i.value)}),v(m,r=>{n(t.value?.tracks??[],r,p.value,i.value)}),v(i,r=>{n(t.value?.tracks??[],m.value,p.value,r)});function n(r,o,a,c){const z=K(r??[],o,a,Y);c===""?s.value=z:s.value=z?.filter(_=>_.name?.toLowerCase().includes(c?.toLowerCase?.())||_.artist_track?.some(H=>H.name.toLowerCase().includes(c?.toLowerCase?.()))||_.album_track?.[0]?.name.toLowerCase().includes(c?.toLowerCase?.()))??[]}F(()=>{t?.value?.tracks&&n(t?.value?.tracks??[],m.value,p.value,i.value),t.value?.color_palette?.cover&&g(t.value?.color_palette?.cover)}),j(()=>{document.getElementById("navbar")&&(document.getElementById("navbar").style.display="flex"),g(null),G(null)});const B=y();function E(){const o=B.value?.$el,a=o?.firstChild;!o||!a||(Math.ceil(o.getBoundingClientRect()?.top??500)<=67?(a.style.background="var(--color-theme-8)",o.style.color="white"):(a.style.background="",o.style.color=""))}return(r,o)=>(l(),u(e(O),null,{default:x(()=>[k(e(P),{fullscreen:!0,class:"flex"},{default:x(()=>[e(L)&&!e(t)?(l(),u(Z,{key:0})):(l(),u(X,{key:1,"auto-hide":!0,static:!0,onScroll:E},{default:x(()=>[!e(d).params.id||e(d).params.id&&e(t)?.id===e(d).params.id?(l(),h("div",ae,[k(te,{data:e(t)},null,8,["data"]),f("div",oe,[o[1]||(o[1]=f("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),(l(),u(R,{key:e(t)?.id,data:e(t),filter:i.value,onFilterChange:o[0]||(o[0]=a=>i.value=a)},null,8,["data","filter"])),f("div",{class:T([{"pb-24":e(C)&&!e(b),"pb-40":e(C)&&e(b),"pb-4 sm:pb-4":!e(C)&&e(b)},"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-3 flex-grow-1 gap-0.5 sm:p-4"])},[(l(),u(ee,{key:e(t)?.id,ref_key:"sortHeader",ref:B})),f("div",{style:S({height:`${w.value.value.getTotalSize()}px`,width:"100%",position:"relative"})},[(l(!0),h($,null,q(w.value.value.getVirtualItems(),a=>(l(),h("div",{key:s.value[a.index]?.id+s.value[a.index]?.favorite,style:S({position:"absolute",top:0,left:0,width:"100%",height:`${a.size}px`,transform:`translateY(${a.start}px)`})},[k(re,{data:s.value[a.index],"display-list":s.value,index:a.index},null,8,["data","display-list","index"])],4))),128))],4)],2)])],512)):I("",!0)]),_:1}))]),_:1})]),_:1}))}}),it=le;export{it as default};
