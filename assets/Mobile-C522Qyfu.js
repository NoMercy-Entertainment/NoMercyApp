import{$ as R,B as V,Cn as z,D as F,Dn as w,Ht as L,In as E,Qn as v,Rn as M,Sn as B,Tn as o,Wn as m,Y,Yt as d,Zn as t,cn as I,en as q,in as a,nn as s,rn as _,tn as x,un as G,x as H}from"./index-04Sh3wNb.js";import"./dist-CVoPesok.js";import"./esm-BuFVrMo0.js";import"./esm-9iWgK55i.js";import"./esm-cDzTb79E.js";import"./esm-BfF1RlcU.js";import"./dist-B3n7-doU.js";import"./focus-visible-CHAJCf_J.js";import"./index5-B30D6T27.js";import"./client-rtF7IPPI.js";import"./ionic-global--aoJHCDL.js";import"./hardware-back-button-h528z6zo.js";import"./index3-CSo3jo06.js";import"./helpers-CXS86XKs.js";import"./index6-CZ6rqL_0.js";import"./index8-BpkFXja0.js";import"./keyboard-cU79cwdW.js";import"./index2-op38TIl9.js";import"./ios.transition-C8T7q-Bo.js";import"./keyboard2-DETZ41vp.js";import"./md.transition-BqH5iNQr.js";import"./dir-BUtgAzbR.js";import{a as N,o as K}from"./ui-BT6EUdI0.js";import{d as Q}from"./client-DMa-uSBE.js";import{v as U}from"./currentServer-B7-kbkE-.js";import"./config-BOA2pGQM.js";import"./esm-CcKFjObu.js";import{p as u}from"./global-gyhCjh_P.js";import"./esm-BuRgllmc.js";import"./user-C1ciKa7-.js";import"./serverClient-FHPKIHPu.js";import{t as W}from"./router-C_xBvmya.js";import"./utils-D5DD-7jP.js";import"./useBaseQuery-CNJp2kAB.js";import{n as Z}from"./useInfiniteServerClient-By5CuBlL.js";import{g as c}from"./SocketClient-DPmgFkP-.js";import"./useQueryClient-s6ZLwuD6.js";import"./apiClient-Cw7f36ko.js";import"./notifications-Bi_dU6lP.js";import"./utils-CdenF_Jv.js";import"./bundle-mjs-Xm_uQvzT.js";import"./deviceInfo-Bcw3-ht5.js";import"./helpers-fSCF1qXj.js";import"./auth-DfyD43WY.js";import"./musicPlaylists-CCn4HshY.js";import"./contextMenuItems-kfaglZX4.js";import"./scrollHandlers-Q4mAayRR.js";import{t as j}from"./Indexer-Cosg43p-.js";import"./_plugin-vue_export-helper-B_iOTHZb.js";import"./AppLogoSquare-DJq6h5gt.js";import"./TMDBImage-Dcp6aBnk.js";import"./MoooomIcon-DNWQYuYD.js";import"./dist-iWIfSzlj.js";import"./CardIndicator-B772HJka.js";import{t as A}from"./NMCard-KUR8tI59.js";import{t as J}from"./PersonCard-COl_OvGL.js";import{n as O,t as X}from"./EmptyCard-D7YHFz4l.js";import"./NoResultImage-DlrmSoaZ.js";L();Y();var $="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",ee="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",te=G({__name:"Mobile",setup(re){const l=R(),{data:i,fetchNextPage:b,hasNextPage:y,isError:oe}=Z({queryKey:["libraries",(l.params.id??l.name)?.split("&").at(0)],limit:20,keepForever:!0});B(()=>{U(),N(null),K(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),E(i,r=>{r&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const S=q(()=>{const r=i.value?.pages?.[0]?.data?.[0];return r&&Q.value&&r.media_type!=="person"&&r.media_type!=="genres"});z(()=>{stop(),N(null)});const h=m(),C=m();B(()=>{C.value=l.params.id??l.name,y.value&&(i?.value?.pages?.length??0)<50&&b(),document.addEventListener("scrollToDiv",r=>{h.value?.scrollTo({top:r.detail.top-100,behavior:"smooth"})})}),V(()=>{document.dispatchEvent(new Event("indexer"))}),E(i,r=>{r&&y.value&&r?.pages?.length<50&&b()});const T=m(),P=m();function f(r,p){T.value=p,P.value.show(r)}return(r,p)=>(o(),s(t(F),null,{default:M(()=>[I(t(H),{fullscreen:!0,class:"ion-padding",style:{"--padding-bottom":"0"}},{default:M(()=>[p[0]||(p[0]=x("div",{class:"fixed top-0 pt-safe w-full bg-surface-1 z-1199"},null,-1)),x("div",{ref_key:"lib",ref:h,class:"pt-safe-offset-9 flex h-auto w-full pr-8 overflow-auto scroll-container"},[(o(),a("div",{key:t(W).currentRoute.value.params?.id,class:v([{"pb-2":t(u)&&t(c),"children:pb-4 sm:children:pb-3":!t(u)&&t(c)},"z-0 flex flex-col gap-4 rounded-3xl border-0 w-available scrollbar-none border-surface-3"])},[x("div",{class:v(`grid w-full gap-4 scroll-smooth music-showing:pb-0 pl-1 py-4 ${S.value?$:ee}`)},[t(i)?(o(!0),a(d,{key:0},w(t(i).pages??[],(k,D)=>(o(),a(d,{key:D},[k.data.length>0?(o(!0),a(d,{key:0},w(k.data??[],(e,g)=>(o(),a(d,null,[e?.media_type==="tv"||e?.media_type==="movie"||e?.media_type==="collection"||e?.media_type==="specials"?(o(),s(A,{key:e.id,data:e,index:g,onContextMenu:n=>f(n,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="person"?(o(),s(J,{key:`${e.id}_person`,data:e,index:g,onContextMenu:n=>f(n,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="genres"?(o(),s(O,{key:`${e.id}_genres`,data:e,index:g,onContextMenu:n=>f(n,e)},null,8,["data","index","onContextMenu"])):_("",!0)],64))),256)):t(i).pages?.[0]?.data?.length===0?(o(),s(X,{key:1})):_("",!0)],64))),128)):_("",!0)],2)],2)),I(j,{id:C.value,class:v([{"h-available":!t(u),"h-inherit top-24":t(u),"-mt-4 pt-4 pb-4 mb-0":!t(c),"-mt-4 pt-4 pb-4 mb-14":t(c)},"w-8 fixed right-0 bg-surface-1 transition-all duration-200"])},null,8,["id","class"])],512)]),_:1})]),_:1}))}}),lt=te;export{lt as default};
