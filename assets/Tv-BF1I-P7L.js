import{aG as N,be as U,bE as R,az as O,aM as $,L as Q,K as F,d1 as J,j as q,o as f,a7 as i,x as a,aI as e,bQ as W,c as b,av as X,eA as z,a as d,ba as Y,eB as L,eC as g,eD as v,h as S,bb as j,ca as Z,t as h,aT as P,e7 as ee,F as te,w as ae,e6 as se,eE as le,C as oe,bh as k,bi as ie,bg as ne,eF as re,eG as ce,eH as B,aF as V,dd as de,aS as ue,bO as fe,bd as pe,eI as me,bm as be,b6 as xe}from"./index-CAaD-sBn.js";import{_ as we}from"./BigPlayButton.vue_vue_type_script_setup_true_lang-DhrJbJwx.js";import{_ as M}from"./ShareButton.vue_vue_type_script_setup_true_lang-Bchrf2H_.js";const _e={class:"w-available h-available absolute left-[202px] top-0 overflow-hidden bg-focus"},ve=["src"],ye={class:"flex justify-center w-available aspect-square my-8 ml-8 mr-16"},he={key:0,class:"relative mb-8 flex w-full flex-1 flex-shrink-0 flex-col items-start justify-start gap-4 flex-grow-1 text-left"},ke=["innerHTML"],ge={key:1,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap"},Se={class:"flex items-center h-8 gap-2 self-stretch w-full text-xs font-medium text-left"},Ce={key:0,class:"flex gap-2"},Ie={key:1,class:"flex gap-2"},Te={class:"flex gap-2 items-center justify-between w-full"},$e=["data-index","data-id","onClick"],Fe={class:"flex w-available overflow-clip items-end"},qe=N({__name:"Tv",setup(ze){const C=U(),{data:l}=R({path:C.fullPath,keepForever:!0});O(()=>{var s,t,n,o;(t=(s=l.value)==null?void 0:s.color_palette)!=null&&t.cover&&$((o=(n=l.value)==null?void 0:n.color_palette)==null?void 0:o.cover),setTimeout(()=>{const c=document.querySelector(".focusable");c&&c.focus()},100)}),Q(l,s=>{var t,n;(t=s==null?void 0:s.color_palette)!=null&&t.cover&&$((n=s==null?void 0:s.color_palette)==null?void 0:n.cover),setTimeout(()=>{const o=document.querySelector(".focusable");o&&o.focus()},100)});const I=F(),A=F();J(()=>{setTimeout(()=>{const s=document.querySelector(".focusable");s&&s.focus()},100)});const D=s=>{var c;const t=s.target,n=((c=I.value)==null?void 0:c.getAttribute("data-index"))??0,o=t.querySelector(`[data-index="${n}"] .focusable`);o&&o.focus()},E=s=>{var c;const t=s.target;I.value=t,t&&t.scrollIntoView({behavior:"smooth",block:"center"});const n=(c=t.closest("[data-id]"))==null?void 0:c.getAttribute("data-id"),o=t.querySelector(`[data-index="${n}"] .focusable`);o&&o.focus()},H=s=>{var n,o;const t=s.target;if(s.key=="ArrowUp"){const u=((n=t.closest("ion-item"))==null?void 0:n.previousSibling).querySelector(".focusable");u&&(u.focus(),u.scrollIntoView({behavior:"smooth",block:"center"}))}else if(s.key=="ArrowDown"){const u=((o=t.closest("ion-item"))==null?void 0:o.nextSibling).querySelector(".focusable");u&&(u.focus(),u.scrollIntoView({behavior:"smooth",block:"center"}))}},K=()=>{be(C.fullPath)},G=s=>{var t;k.value||K(),pe.playTrack(s,((t=l.value)==null?void 0:t.tracks)??[]),me()};return(s,t)=>(f(),q(e(fe),null,{default:i(()=>[a(e(W),{fullscreen:!0},{default:i(()=>{var n,o,c,u;return[(f(),b("div",{class:"w-full h-full absolute left-0 top-0 bg-[#131314] pointer-events-none -z-10",key:(n=e(l))==null?void 0:n.id,style:X(e(z)?`--color-focus: ${e(z)}`:"")},[d("div",_e,[d("img",{class:"w-available h-available absolute left-[-0.39px] top-[-0.39px] opacity-40 object-cover object-center",src:`${(o=e(Y))==null?void 0:o.serverBaseUrl}${((c=e(l))==null?void 0:c.backdrop)??((u=e(l))==null?void 0:u.cover)}`,alt:""},null,8,ve),t[5]||(t[5]=d("div",{class:"w-[150vw] h-[150vw] absolute left-[-30%] bottom-[-50%]",style:{background:`radial-gradient(
                    closest-side,
                    rgba(19, 19, 20, 0.1) 0%,
                    rgba(19, 19, 20, 1) 70.73974609375%
                  )`}},null,-1))])],4)),a(e(L),null,{default:i(()=>[a(e(g),{class:"ion-align-items-end"},{default:i(()=>[a(e(v),{size:"3"},{default:i(()=>{var m,r,x,p,w,_,y,T;return[d("div",ye,[a(j,{data:e(l),alt:(m=e(l))==null?void 0:m.name,class:"w-auto h-full aspect-square"},null,8,["data","alt"])]),(r=e(l))!=null&&r.name?(f(),b("div",he,[e(l).name.length>50?(f(),b("div",{key:0,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap",innerHTML:e(Z)(((x=e(l))==null?void 0:x.name)??"Songs you like","text-xs line-clamp-1")},null,8,ke)):(f(),b("p",ge,h((p=e(l))==null?void 0:p.name),1)),d("div",Se,[(w=e(l))!=null&&w.type?(f(),b("span",Ce,[d("span",null,h((_=e(l))==null?void 0:_.type.replace(/s$/u,"").toTitleCase()),1)])):S("",!0),(y=e(l))!=null&&y.tracks?(f(),b("span",Ie,[t[6]||(t[6]=d("span",null,"â€¢",-1)),d("span",null,h((T=e(l))==null?void 0:T.tracks.length)+" "+h(s.$t("tracks")),1)])):S("",!0)]),d("div",Te,[a(P,{data:e(l)},null,8,["data"]),a(M,{class:"!p-0 text-white"}),a(we,{data:e(l),class:"w-12 h-12 ml-auto"},null,8,["data"])])])):S("",!0)]}),_:1}),a(e(v),{size:"6",ref_key:"scrollContainer",ref:A,onFocus:t[4]||(t[4]=m=>D(m)),tabindex:"0",class:"w-full h-available overflow-auto scroll-smooth"},{default:i(()=>[a(e(ee),{mode:"md",lines:"none"},{default:i(()=>{var m;return[(f(!0),b(te,null,ae((m=e(l))==null?void 0:m.tracks,(r,x)=>(f(),q(e(se),{key:r.id,tabindex:"-1",mode:"md",class:"group/track focus-within:bg-white/4 rounded-md overflow-clip"},{default:i(()=>[a(e(L),null,{default:i(()=>[a(e(g),{"data-index":x,"data-id":r.id,tabindex:"-1",class:"items-center !rounded-md !overflow-clip"},{default:i(()=>[a(e(v),{size:"2",tabindex:"-1"},{default:i(()=>[d("div",{tabindex:"0","data-index":x,"data-id":r.id,class:"focusable flex justify-center w-full aspect-video focus:outline outline-focus outline-2 outline-offset-2 mr-2 overflow-clip",onFocus:t[0]||(t[0]=p=>E(p)),onClick:p=>G(r)},[a(j,{data:r,alt:r.name,class:"w-auto h-full aspect-square"},null,8,["data","alt"])],40,$e)]),_:2},1024),a(e(v),{size:"8",tabindex:"-1",class:"my-auto mt-2"},{default:i(()=>[a(e(le),{tabindex:"-1"},{default:i(()=>{var p,w,_;return[d("div",Fe,[d("div",{class:oe(["flex items-center justify-center h-full aspect-square overflow-clip transition-width duration-200",{"w-0":((p=e(k))==null?void 0:p.id)!=r.id,"w-6 mr-1":((w=e(k))==null?void 0:w.id)==r.id}])},[a(ie,{playing:e(ne)},null,8,["playing"])],2),a(re,{playing:!!((_=e(k))!=null&&_.id),text:r.name,class:"!w-[calc(100%-30px)] text-auto-12 children:leading-none w-available overflow-clip"},null,8,["playing","text"])]),a(ce,{data:r.artist_track,type:"artists",id:r.id,onKeydown:[t[1]||(t[1]=B(V(()=>{},["prevent"]),["up"])),t[2]||(t[2]=B(V(()=>{},["prevent"]),["down"]))],onKeyup:t[3]||(t[3]=y=>H(y)),suffix:"track"},null,8,["data","id"])]}),_:2},1024)]),_:2},1024),a(e(v),{size:"2",tabindex:"-1",class:"opacity-0 group-focus-within/track:opacity-100 -ml-2"},{default:i(()=>[a(e(g),{tabindex:"-1",class:"flex flex-nowrap"},{default:i(()=>[a(P,{data:r},null,8,["data"]),a(M,{class:"!p-0 text-white"}),a(de,{label:"",tabindex:"1",onclick:()=>{},class:"!bg-transparent mr-2"},{default:i(()=>[a(ue,{icon:"menuDotsHorizontal",class:"text-white"})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1032,["data-index","data-id"])]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1},512)]),_:1})]),_:1})]}),_:1})]),_:1}))}}),Be=xe(qe,[["__scopeId","data-v-6631e360"]]);export{Be as default};
