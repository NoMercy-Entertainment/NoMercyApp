import{I as O,Y as R,l as d,w as C,D,eq as v,er as g,a5 as F,a6 as K,d as T,o as f,s as q,j as z,K as l,bu as W,c as P,b as Y,a as m,n as V,F as G,h as J,bh as Q,es as U,ap as X,et as Z,b1 as ee}from"./index-C_qNKMWs.js";import{u as te}from"./useServerClient-abD0VdnA.js";import{_ as oe,a as ae,S as re,b as se}from"./TrackRow.vue_vue_type_script_setup_true_lang-u-I1bXYK.js";import{_ as le}from"./OptimizedIcon.vue_vue_type_script_setup_true_lang-CJu-NfRn.js";import{_ as ie}from"./NotFound.vue_vue_type_script_setup_true_lang-B8e-ddc_.js";import{_ as ne}from"./Marquee.vue_vue_type_script_setup_true_lang-ZgkJIndM.js";import"./useQuery-DTS8T947.js";import"./useBaseQuery-vm7BPSk-.js";import"./useQueryClient-C4PrSAx1.js";import"./useInfiniteServerClient-BbeQXtgw.js";import"./BigPlayButton.vue_vue_type_script_setup_true_lang-EADX2QSh.js";import"./PlayerIcon.vue_vue_type_script_setup_true_lang-B9358Fpg.js";import"./MusicButton.vue_vue_type_script_setup_true_lang-Baq5bHoA.js";import"./index-B8V6bTi4.js";import"./index-BCiRI5vG.js";import"./index-Be1fzYNM.js";import"./index-DCNqR-Sw.js";import"./index-DVzuI2el.js";import"./MediaLikeButton-CTCt_oyX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ShareButton.vue_vue_type_script_setup_true_lang-gl22iyEg.js";import"./FavoriteImage.vue_vue_type_script_setup_true_lang-DHq17FfB.js";import"./CoverImage.vue_vue_type_script_setup_true_lang-DMVjTCL6.js";import"./AppLogoSquare-C46FQJ-V.js";import"./contextMenuItems-BYx84zge.js";import"./musicPlaylists-B-XU7xsX.js";import"./EqSpinner-D9yqsGLY.js";import"./TrackLinks.vue_vue_type_script_setup_true_lang-C3C2wUR7.js";import"./DropdownMenu.vue_vue_type_script_setup_true_lang-Bdxz3vbz.js";import"./BannerButton.vue_vue_type_script_setup_true_lang-ibz25FTr.js";const ce={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},pe={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-slate-dark-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},Oe=O({__name:"Mobile",setup(de){const L=R(),{data:a,isError:A}=te({path:L.fullPath}),E=d(null),S=d(),c=d("");C(a,o=>{var t;ee((o==null?void 0:o.name)??null),u((o==null?void 0:o.tracks)??[],g.value,v.value,c.value),F((t=o==null?void 0:o.color_palette)==null?void 0:t.cover)}),C(v,o=>{var t;u(((t=a.value)==null?void 0:t.tracks)??[],g.value,o,c.value)}),C(g,o=>{var t;u(((t=a.value)==null?void 0:t.tracks)??[],o,v.value,c.value)}),C(c,o=>{var t;u(((t=a.value)==null?void 0:t.tracks)??[],g.value,v.value,o)});function u(o,t,i,e){const r=U(o??[],t,i,Z);e===""?S.value=r:S.value=(r==null?void 0:r.filter(n=>{var s,p,_,x,h,w;return((p=n.name)==null?void 0:p.toLowerCase().includes((s=e==null?void 0:e.toLowerCase)==null?void 0:s.call(e)))||((_=n.artist_track)==null?void 0:_.some(B=>{var y;return B.name.toLowerCase().includes((y=e==null?void 0:e.toLowerCase)==null?void 0:y.call(e))}))||((w=(x=n.album_track)==null?void 0:x[0])==null?void 0:w.name.toLowerCase().includes((h=e==null?void 0:e.toLowerCase)==null?void 0:h.call(e)))}))??[]}D(()=>{var o,t,i,e,r;u(((o=a==null?void 0:a.value)==null?void 0:o.tracks)??[],g.value,v.value,c.value),(i=(t=a.value)==null?void 0:t.color_palette)!=null&&i.cover&&F((r=(e=a.value)==null?void 0:e.color_palette)==null?void 0:r.cover)}),K(()=>{var o,t,i,e,r;u(((o=a==null?void 0:a.value)==null?void 0:o.tracks)??[],g.value,v.value,c.value),(i=(t=a.value)==null?void 0:t.color_palette)!=null&&i.cover&&F((r=(e=a.value)==null?void 0:e.color_palette)==null?void 0:r.cover)});function N(){window.history.back()}const k=d(!1),M=d(!1),b=d(),H=d();function $(){var r,n,s,p,_,x,h,w,B,y,I,j;const i=X("capacitor")?88:64,e=(n=(r=b.value)==null?void 0:r.$el)==null?void 0:n.getBoundingClientRect().top;if(!e){requestAnimationFrame($);return}k.value=e<=170,M.value=e<=160,e===i?((p=(s=b.value)==null?void 0:s.$el)==null||p.classList.add("!bg-focus"),(h=(x=(_=b.value)==null?void 0:_.$el)==null?void 0:x.firstChild)==null||h.classList.add("!bg-slate-light-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")):((B=(w=b.value)==null?void 0:w.$el)==null||B.classList.remove("!bg-focus"),(j=(I=(y=b.value)==null?void 0:y.$el)==null?void 0:I.firstChild)==null||j.classList.remove("!bg-slate-light-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")),requestAnimationFrame($)}return C(H,()=>{requestAnimationFrame($)}),(o,t)=>(f(),T(l(Q),null,{default:q(()=>[z(l(W),{ref_key:"container",ref:H,"scroll-events":!0,onIonScroll:$},{default:q(()=>{var i,e,r,n;return[l(A)&&!l(a)?(f(),T(ie,{key:0})):!l(L).params.id||l(L).params.id&&((i=l(a))==null?void 0:i.id)===l(L).params.id?(f(),P("div",{key:1,ref_key:"main",ref:E,class:"flex flex-col h-auto overflow-x-clip w-available sm:rounded-2xl -mt-6 bg-[rgb(var(--background-auto))]"},[z(oe,{data:l(a)},null,8,["data"]),m("div",ce,[t[2]||(t[2]=m("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom bg-focus"},null,-1)),m("div",{id:"navbar",class:V(["fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-slate-light-11 dark:bg-slate-dark-1 top-0 pt-4 transition-all duration-200",{"opacity-0 pointer-events-none":!k.value,"opacity-100 pointer-events-auto":k.value}])},[t[1]||(t[1]=m("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-all duration-200 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),m("button",{class:"z-30 flex h-10 w-11 items-center justify-center rounded-md",onClick:N},[z(le,{icon:"arrowLeft"})]),m("div",{id:"navText",class:V(["pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-all duration-200 w-[70%] overflow-clip text-xl",{"opacity-0 pointer-events-none":!k.value,"opacity-100 pointer-events-auto":k.value}])},[z(ne,{text:(e=l(a))==null?void 0:e.name},null,8,["text"])],2)],2),(f(),T(ae,{key:(r=l(a))==null?void 0:r.id,data:l(a),filter:c.value,onFilterChange:t[0]||(t[0]=s=>c.value=s)},null,8,["data","filter"])),m("div",pe,[(f(),T(re,{ref_key:"sortHeader",ref:b,key:(n=l(a))==null?void 0:n.id})),(f(!0),P(G,null,J(S.value,(s,p)=>(f(),T(se,{key:s.id+(s==null?void 0:s.favorite),data:s,"display-list":S.value,index:p},null,8,["data","display-list","index"]))),128))])])],512)):Y("",!0)]}),_:1},512)]),_:1}))}});export{Oe as default};
