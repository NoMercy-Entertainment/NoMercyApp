import{aw as A,bt as H,I as u,J as d,az as L,aC as W,br as X,e as Y,a7 as _,aB as t,q as Z,o as B,v as n,a6 as h,t as ee,c as R,a as l,h as z,bE as re,bF as oe,by as se,bv as le}from"./index-DUg1VFYi.js";import{_ as ae}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-7nrxLC0-.js";import{a as te}from"./index-Dw3K8-Yh.js";import{s as m}from"./index-BJLLCzmn.js";import"./FloatingBackButton.vue_vue_type_script_setup_true_lang-hIxjKJDF.js";import"./Button.vue_vue_type_script_setup_true_lang-Ba5EMzBP.js";const ne={key:0,class:"col-span-2 col-start-1 2xl:col-start-1"},ue={class:"flex flex-col gap-2"},de={class:"flex flex-col gap-2"},ie={class:"flex flex-col gap-2"},me={key:1,class:"col-span-2 col-start-1 2xl:col-start-3"},_e={class:"flex flex-col gap-2"},ve={class:"flex flex-col gap-2"},pe={class:"flex flex-col gap-2"},fe={class:"flex flex-col gap-2"},we={class:"flex flex-col gap-2"},ke={class:"flex flex-col gap-2"},Ce=A({__name:"Desktop",setup(ce){var C,y,G,U,S,I,N,$,D;const{data:o,refetch:J,error:K}=H({path:"/dashboard/configuration"}),V=u(!1),a=u(o.value??{}),i=(e,r)=>{if(o.value){if(se(o.value[e])==r){delete a.value[e],a.value={...a.value};return}a.value={...a.value,[e]:r||void 0}}};d(o,e=>{e&&(a.value={},v.value=e==null?void 0:e.server_name,p.value=e==null?void 0:e.external_server_port,f.value=e==null?void 0:e.internal_server_port,w.value=e==null?void 0:e.queue_workers,k.value=e==null?void 0:e.cron_workers,c.value=e==null?void 0:e.data_workers,g.value=e==null?void 0:e.request_workers,x.value=e==null?void 0:e.encoder_workers,b.value=e==null?void 0:e.image_workers,V.value=!0)}),L(()=>{var e,r,q,s,E,Q,j,F,O;o.value&&(a.value={},v.value=(e=o.value)==null?void 0:e.server_name,p.value=(r=o.value)==null?void 0:r.external_server_port,f.value=(q=o.value)==null?void 0:q.internal_server_port,w.value=(s=o.value)==null?void 0:s.queue_workers,k.value=(E=o.value)==null?void 0:E.cron_workers,c.value=(Q=o.value)==null?void 0:Q.data_workers,g.value=(j=o.value)==null?void 0:j.request_workers,x.value=(F=o.value)==null?void 0:F.encoder_workers,b.value=(O=o.value)==null?void 0:O.image_workers,V.value=!0)});const v=u(((C=o.value)==null?void 0:C.server_name)??"");d(v,e=>{i("server_name",e)});const p=u(((y=o.value)==null?void 0:y.external_server_port)??0);d(p,e=>{i("external_server_port",e)});const f=u(((G=o.value)==null?void 0:G.internal_server_port)??0);d(f,e=>{i("internal_server_port",e)});const w=u(((U=o.value)==null?void 0:U.queue_workers)??0);d(w,e=>{i("queue_workers",e)});const k=u(((S=o.value)==null?void 0:S.cron_workers)??0);d(k,e=>{i("cron_workers",e)});const c=u(((I=o.value)==null?void 0:I.data_workers)??0);d(c,e=>{i("data_workers",e)});const g=u(((N=o.value)==null?void 0:N.request_workers)??0);d(g,e=>{i("request_workers",e)});const b=u((($=o.value)==null?void 0:$.image_workers)??0);d(b,e=>{i("image_workers",e)});const x=u(((D=o.value)==null?void 0:D.encoder_workers)??0);d(x,e=>{i("encoder_workers",e)});const M=W(()=>Object.keys(a.value).length>0);console.log(a.value,Object.keys(a.value)),d(a,e=>{console.log(e)});const P=X(),T=()=>{console.raw(a.value),le().patch("/dashboard/configuration",a.value).then(()=>{J(),P.invalidateQueries({queryKey:["serverInfo"]})})};return(e,r)=>{const q=Z("Button");return B(),Y(t(oe),null,{default:_(()=>[n(t(re),{fullscreen:!0},{default:_(()=>[n(ae,{error:t(K),gridStyle:2,title:"General",description:""},{cta:_(()=>r[10]||(r[10]=[])),actions:_(()=>[n(q,{type:"submit",id:"save",disabled:!M.value,color:"theme",class:"ml-auto",form:"myForm",onClick:r[9]||(r[9]=s=>T())},{default:_(()=>[h(ee(e.$t("Save")),1)]),_:1},8,["disabled"])]),default:_(()=>[V.value?(B(),R("div",ne,[l("div",ue,[r[11]||(r[11]=l("label",{for:"server_name"},"Server name",-1)),n(t(te),{id:"server_name",modelValue:v.value,"onUpdate:modelValue":r[0]||(r[0]=s=>v.value=s),class:"mb-4"},null,8,["modelValue"])]),l("div",de,[r[12]||(r[12]=l("label",{for:"secure_internal_port"},"Secure internal port",-1)),n(t(m),{id:"secure_internal_port",modelValue:f.value,"onUpdate:modelValue":r[1]||(r[1]=s=>f.value=s),class:"mb-4",useGrouping:!1,showButtons:"",min:2e3},null,8,["modelValue"])]),l("div",ie,[r[13]||(r[13]=l("label",{for:"secure_external_port"},"Secure external port",-1)),n(t(m),{id:"secure_external_port",modelValue:p.value,"onUpdate:modelValue":r[2]||(r[2]=s=>p.value=s),class:"mb-4",useGrouping:!1,showButtons:"",in:2e3},null,8,["modelValue"])])])):z("",!0),V.value?(B(),R("div",me,[l("div",_e,[r[14]||(r[14]=l("label",{for:"cron_workers"},"Cron workers",-1)),n(t(m),{id:"cron_workers",modelValue:k.value,"onUpdate:modelValue":r[3]||(r[3]=s=>k.value=s),class:"mb-4",useGrouping:!1,showButtons:"",min:0},null,8,["modelValue"])]),l("div",ve,[r[15]||(r[15]=l("label",{for:"data_workers"},"Data workers",-1)),n(t(m),{id:"data_workers",modelValue:c.value,"onUpdate:modelValue":r[4]||(r[4]=s=>c.value=s),class:"mb-4",useGrouping:!1,showButtons:"",min:0},null,8,["modelValue"])]),l("div",pe,[r[16]||(r[16]=l("label",{for:"request_workers"},"Request workers",-1)),n(t(m),{id:"request_workers",modelValue:g.value,"onUpdate:modelValue":r[5]||(r[5]=s=>g.value=s),class:"mb-4",useGrouping:!1,showButtons:"",min:0},null,8,["modelValue"])]),l("div",fe,[r[17]||(r[17]=l("label",{for:"encoder_workers"},"Encoder workers",-1)),n(t(m),{id:"encoder_workers",modelValue:x.value,"onUpdate:modelValue":r[6]||(r[6]=s=>x.value=s),class:"mb-4",useGrouping:!1,showButtons:"",min:0},null,8,["modelValue"])]),l("div",we,[r[18]||(r[18]=l("label",{for:"image_workers"},"Image workers",-1)),n(t(m),{id:"image_workers",modelValue:b.value,"onUpdate:modelValue":r[7]||(r[7]=s=>b.value=s),class:"mb-4",useGrouping:!1,showButtons:"",min:0},null,8,["modelValue"])]),l("div",ke,[r[19]||(r[19]=l("label",{for:"queue_workers"},"Queue workers",-1)),n(t(m),{id:"queue_workers",modelValue:w.value,"onUpdate:modelValue":r[8]||(r[8]=s=>w.value=s),class:"mb-4",useGrouping:!1,showButtons:"",min:0},null,8,["modelValue"])])])):z("",!0)]),_:1},8,["error"])]),_:1})]),_:1})}}});export{Ce as default};
//# sourceMappingURL=Desktop-BL0tjAzI.js.map
