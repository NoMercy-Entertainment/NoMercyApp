import{$ as R,d as $,w as q,f as E,aG as K,aJ as W,c as j,o as z,l as J,y as X,a0 as l,au as Y,T as Z,i as L,t as ee,ar as ae,Q as n}from"./vue-ionic-Ct1zWn9G.js";import{b1 as oe}from"./vendor-BO8Pa1dw.js";import{u as s,j as O,i as F,h as se,r as u,ao as te,bH as le,bI as ne,bJ as re}from"./index-De9PJTdK.js";import{g as i}from"./imageModal-gwGEKhqd.js";import{V as ue,S as ie}from"./videoNoMercyConnectPlugin-CuQiIMxH.js";import{A as ce}from"./autoSkipPlugin-BNPmrMeT.js";import{D as pe}from"./desktopUIPlugin-BPDadw1Z.js";import{n as me,O as de}from"./video-player-DoGKC6Gh.js";import{u as ve}from"./useServerClient-GWyFvYMn.js";import"./media-C2AqgyMX.js";import"./icons-BW5E66pf.js";import"./api-BBofn2cc.js";import"./swiper-D00Cnjmx.js";import"./rxjs-BCp2L9Rn.js";import"./music-player-DBCNDz4q.js";import"./buttons-DnucOQvv.js";import"./baseUIPlugin-DhmTOkCr.js";import"./subtitles-octopus-By2PrHjB.js";import"./useInfiniteServerClient-CdC2jnoB.js";const Ve=R({__name:"Mobile",setup(fe){var p;const{data:c}=ve({enabled:!((p=s.value.features)!=null&&p.nomercyConnect)}),e=$();function r(o){var m,d,v,f,g,y,b,P,k,C,S,w,I,M,_,h,N,T,U,B,A,x,D,V;const t={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:(o==null?void 0:o.filter(a=>!!a.id))??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:((m=s.value)==null?void 0:m.accessToken)||localStorage.getItem("access_token")||"",basePath:(d=se.value)==null?void 0:d.serverBaseUrl,forceTvMode:(n("android")||n("ios"))&&!n("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||n("capacitor"),renderAhead:100,disableAutoPlayback:(v=s.value.features)==null?void 0:v.nomercyConnect};if(e.value=me("player1").setup(t),(f=e.value)==null||f.once("back",()=>{}),(g=s.value.features)!=null&&g.nomercyConnect){const a=new ue;(y=e.value)==null||y.registerPlugin("videoNoMercyConnect",a),(b=e.value)==null||b.usePlugin("videoNoMercyConnect")}const G=new pe;(P=e.value)==null||P.registerPlugin("desktopUI",G),(k=e.value)==null||k.usePlugin("desktopUI");const H=new ce;if((C=e.value)==null||C.registerPlugin("autoSkip",H),(S=e.value)==null||S.usePlugin("autoSkip"),!((w=s.value.features)!=null&&w.nomercyConnect)){const a=new ie;(I=e.value)==null||I.registerPlugin("sync",a),(M=e.value)==null||M.usePlugin("sync")}const Q=new de;(_=e.value)==null||_.registerPlugin("octopus",Q),(h=e.value)==null||h.usePlugin("octopus"),(N=e.value)==null||N.once("play",()=>{var a;(a=e.value)==null||a.enterFullscreen()}),(T=e.value)==null||T.on("playlistComplete",()=>{var a;(a=e.value)==null||a.dispose(),u.back()}),(U=e.value)==null||U.on("dispose",()=>{te(),le(),u.back()}),(B=e.value)==null||B.on("back",()=>{var a;(a=e.value)==null||a.dispose()}),(A=e.value)==null||A.on("play",()=>{i(!0)}),(x=e.value)==null||x.on("pause",()=>{i(!1)}),(D=e.value)==null||D.on("ready",()=>{ne(),re(),O.stop()}),(V=e.value)==null||V.on("item",()=>{var a;(a=e.value)==null||a.play()}),oe.addListener("backButton",()=>{var a;(a=e.value)==null||a.emit("back-button-hyjack"),u.back()})}return q(c,o=>{r(o)}),E(()=>{var o;O.stop(),(o=s.value.features)!=null&&o.nomercyConnect?r():r(c.value)}),K(()=>{i(!1)}),W(()=>{var o;(o=e.value)==null||o.dispose()}),(o,t)=>(z(),j(l(ae),null,{default:J(()=>[X(l(Y),{fullscreen:!0},{default:J(()=>[(z(),j(Z,{to:"body"},[L("div",{class:ee(["absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199",{"mb-28":l(F),"mb-0":!l(F)}])},t[0]||(t[0]=[L("div",{id:"player1",class:"group nomercyplayer"},null,-1)]),2)]))]),_:1})]),_:1}))}});export{Ve as default};
