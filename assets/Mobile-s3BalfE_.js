import{aw as J,c8 as W,bu as q,I as m,J as B,az as A,aD as z,aE as K,eu as y,ev as w,e as C,a7 as M,aB as r,ew as Q,b_ as U,ex as X,o as f,v as S,c as V,a as p,z as j,aM as Y,c1 as Z,F as ee,u as te,h as ae,bF as se,bG as oe}from"./index-BB_2pOwO.js";import{_ as re,a as le,b as ne,c as ie}from"./TrackRow.vue_vue_type_script_setup_true_lang-Dp5ZHsHU.js";import{_ as ce}from"./NotFound.vue_vue_type_script_setup_true_lang-DOL8SmVl.js";import"./BigPlayButton.vue_vue_type_script_setup_true_lang-7D51LxKI.js";import"./FavoriteImage.vue_vue_type_script_setup_true_lang-DdhfMtI1.js";import"./BannerButton.vue_vue_type_script_setup_true_lang-1S00Iac9.js";const de={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},ue=["innerHTML"],fe={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-slate-dark-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},xe=J({__name:"Mobile",setup(pe){const L=W(),{data:s,isError:N}=q({path:L.currentRoute.value.fullPath,keepForever:!0}),P=m(null),T=m(),c=m("");B(s,a=>{var e;U((a==null?void 0:a.name)??null),g((a==null?void 0:a.tracks)??[],w.value,y.value,c.value),z((e=a==null?void 0:a.color_palette)==null?void 0:e.cover)}),B(y,a=>{var e;g(((e=s.value)==null?void 0:e.tracks)??[],w.value,a,c.value)}),B(w,a=>{var e;g(((e=s.value)==null?void 0:e.tracks)??[],a,y.value,c.value)}),B(c,a=>{var e;g(((e=s.value)==null?void 0:e.tracks)??[],w.value,y.value,a)});const g=(a,e,l,t)=>{const o=Q(a??[],e,l,X);t==""?T.value=o:T.value=(o==null?void 0:o.filter(i=>{var n,u,v,k,_,x;return((u=i.name)==null?void 0:u.toLowerCase().includes((n=t==null?void 0:t.toLowerCase)==null?void 0:n.call(t)))||((v=i.artist_track)==null?void 0:v.some($=>{var h;return $.name.toLowerCase().includes((h=t==null?void 0:t.toLowerCase)==null?void 0:h.call(t))}))||((x=(k=i.album_track)==null?void 0:k[0])==null?void 0:x.name.toLowerCase().includes((_=t==null?void 0:t.toLowerCase)==null?void 0:_.call(t)))}))??[]};A(()=>{var a,e,l,t;(e=(a=s.value)==null?void 0:a.color_palette)!=null&&e.cover&&z((t=(l=s.value)==null?void 0:l.color_palette)==null?void 0:t.cover)}),K(()=>{var a,e,l,t,o;g(((a=s==null?void 0:s.value)==null?void 0:a.tracks)??[],w.value,y.value,c.value),(l=(e=s.value)==null?void 0:e.color_palette)!=null&&l.cover&&z((o=(t=s.value)==null?void 0:t.color_palette)==null?void 0:o.cover)});const O=()=>{window.history.back()},b=m(!1),D=m(!1),d=m(),G=a=>{var i,n,u,v,k,_,x,$,h,H,R,E,F,I;console.log((n=(i=d.value)==null?void 0:i.$el)==null?void 0:n.getBoundingClientRect().top);const e=170,l=160,t=88,o=(v=(u=d.value)==null?void 0:u.$el)==null?void 0:v.getBoundingClientRect().top;o&&(b.value=o<=e,D.value=o<=l,o==t?((_=(k=d.value)==null?void 0:k.$el)==null||_.classList.add("!bg-focus"),(h=($=(x=d.value)==null?void 0:x.$el)==null?void 0:$.firstChild)==null||h.classList.add("!bg-slate-light-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")):((R=(H=d.value)==null?void 0:H.$el)==null||R.classList.remove("!bg-focus"),(I=(F=(E=d.value)==null?void 0:E.$el)==null?void 0:F.firstChild)==null||I.classList.remove("!bg-slate-light-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")))};return(a,e)=>(f(),C(r(oe),null,{default:M(()=>[S(r(se),{fullscreen:!0,onIonScroll:G,scrollEvents:!0},{default:M(()=>{var l,t,o,i;return[r(N)?(f(),C(ce,{key:0})):!r(L).currentRoute.value.params.id||r(L).currentRoute.value.params.id&&((l=r(s))==null?void 0:l.id)==r(L).currentRoute.value.params.id?(f(),V("div",{key:1,ref_key:"main",ref:P,class:"flex flex-col overflow-x-clip w-available h-min sm:rounded-2xl -mt-safe-offset-12 bg-[rgb(var(--background-auto))]"},[S(re,{data:r(s)},null,8,["data"]),p("div",de,[e[2]||(e[2]=p("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom bg-focus"},null,-1)),p("div",{id:"navbar",class:j(["fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-slate-light-11 dark:bg-slate-dark-1 top-0 pt-safe-offset-4 transition-opacity duration-300",{"opacity-0 pointer-events-none":!b.value,"opacity-100 pointer-events-auto":b.value}])},[e[1]||(e[1]=p("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-transform duration-300 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),p("button",{onClick:O,class:"z-30 flex h-10 w-12 items-center justify-center rounded-md"},[S(Y,{icon:"arrowLeft"})]),p("div",{id:"navText",class:j(["pointer-events-none whitespace-pre text-left relative z-20 h-auto line-clamp-2 w-full self-center text-xl font-bold leading-none transition-opacity duration-300",{"opacity-0 pointer-events-none":!b.value,"opacity-100 pointer-events-auto":b.value}]),innerHTML:r(Z)(((t=r(s))==null?void 0:t.name)??"Songs you like","text-sm line-clamp-2")},null,10,ue)],2),(f(),C(le,{key:(o=r(s))==null?void 0:o.id,data:r(s),filter:c.value,onFilterChange:e[0]||(e[0]=n=>c.value=n)},null,8,["data","filter"])),p("div",fe,[(f(),C(ne,{ref_key:"sortHeader",ref:d,key:(i=r(s))==null?void 0:i.id})),(f(!0),V(ee,null,te(T.value,(n,u)=>(f(),C(ie,{key:n.id,data:n,displayList:T.value,index:u},null,8,["data","displayList","index"]))),128))])])],512)):ae("",!0)]}),_:1})]),_:1}))}});export{xe as default};
//# sourceMappingURL=Mobile-s3BalfE_.js.map
