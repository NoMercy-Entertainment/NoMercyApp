import"./useBaseQuery-Cg5eQDHe.js";import"./useInfiniteServerClient-a3rJBmpx.js";import"./useQueryClient-4L1I_jGc.js";import"./useQuery-CWzwZSwp.js";import{Bs as M,Ci as N,Co as H,Ec as b,Gc as i,Gs as r,Js as f,Ks as g,Lo as I,Mc as j,Nc as y,Ns as _,Oc as D,Qs as V,Rc as m,_c as E,cr as A,ec as k,fc as K,hc as o,ho as R,nr as F,qr as z,qs as p,yc as G}from"./index-DuecWh8q.js";import{t as O}from"./useServerClient-DF4xIRb3.js";_();var P={class:"w-available h-available absolute left-[202px] top-0 overflow-hidden bg-focus"},J=["src"],Q={class:"flex flex-col justify-start items-start w-[484px] relative left-[58px] top-20 gap-7"},W={class:"flex flex-col justify-start items-start self-stretch relative gap-5"},X={class:"flex flex-col justify-start items-start w-full relative gap-0 mt-8"},Y=["innerHTML"],Z={class:"flex items-center h-8 gap-2 self-stretch w-full opacity-60 text-xs font-medium text-left text-[#c4c7c5]"},ee={key:0,class:"flex gap-2"},te={key:1,class:"flex gap-2"},ae={class:"line-clamp-4 text-sm -mt-4"},le=k({__name:"MusicHeader",props:{selected:{type:Object,required:!1}},setup(a){const c=a;return K(()=>{A(c.selected?.color_palette?.cover)}),b(c,s=>{A(s.selected?.color_palette?.cover)}),(s,n)=>(o(),f("div",{key:a.selected?.id,style:j(i(F)?`--color-theme-8: ${i(F)}`:""),class:"w-full h-full absolute left-0 top-0 bg-[#131314]"},[r("div",P,[r("img",{src:`${i(N)?.serverBaseUrl}${a.selected?.cover}`,alt:"",class:"w-available h-available absolute left-[-0.39px] top-[-0.39px] opacity-40 object-cover object-center"},null,8,J),n[0]||(n[0]=r("div",{class:"w-available h-available absolute left-[-0.39px] top-[-0.39px]"},null,-1)),n[1]||(n[1]=r("div",{class:"w-[150vw] h-[150vw] absolute left-[-30%] bottom-[-50%]",style:{background:`radial-gradient(
            closest-side,
            rgba(19, 19, 20, 0.1) 0%,
            rgba(19, 19, 20, 1) 70.73974609375%
          )`}},null,-1))]),r("div",Q,[r("div",W,[r("div",X,[a.selected?.name?(o(),f("p",{key:0,class:"self-stretch flex-grow-0 flex-shrink-0 w-full text-3xl font-bold text-left z-10",innerHTML:i(z)(a.selected?.name??" ","text-lg line-clamp-2")},null,8,Y)):p("",!0),r("div",Z,[a.selected?.type?(o(),f("span",ee,[r("span",null,y(a.selected?.type.replace(/s$/u,"").toTitleCase()),1)])):p("",!0),a.selected?.tracks?(o(),f("span",te,[n[2]||(n[2]=r("span",null,"â€¢",-1)),r("span",null,y(a.selected?.tracks)+" "+y(s.$t("tracks")),1)])):p("",!0)])]),r("div",ae,y(a.selected?.description),1)])])],4))}}),se=le;_();var re={key:0,class:"grid grid-rows-[auto_1fr] grid-cols-7 relative justify-start flex-1 w-full gap-3 mb-2 mt-4","data-row":""},oe={class:"row-start-1 col-span-7 pointer-events-none font-semibold font-3xl"},ne=k({__name:"TvCarousel2",props:{data:{type:Array,required:!0},title:{type:String,required:!0},handleFocus:{type:Function,required:!0},handleDown:{type:Function,required:!0},handleUp:{type:Function,required:!0},suffix:{type:String,required:!1,default:""}},setup(a){return(c,s)=>{const n=G("RouterLink");return a.data.length?(o(),f("div",re,[r("h3",oe,y(a.title),1),(o(!0),f(M,null,E(a.data?.slice(0,7),(u,x)=>(o(),g(n,{key:u.id,"data-card":u.props?.data.id,"data-index":x,style:j(`background-image: url('${i(N)?.serverBaseUrl}${u.props.data.cover}')`),to:`${u.props?.data.link}${a.suffix}`,class:"row-start-2 w-full h-auto rounded-xl bg-cover aspect-square focus:scale-105 focus:outline outline-[2.2px] outline-white transition-transform duration-200 scroll-mb-20 scroll-mt-8 snap-top snap-mandatory",onFocus:d=>a.handleFocus(d,u.props.data),onKeydown:s[0]||(s[0]=d=>a.handleDown(d)),onKeyup:s[1]||(s[1]=d=>a.handleUp(d))},null,8,["data-card","data-index","style","to","onFocus"]))),128))])):p("",!0)}}}),ue=ne;_();var ie={class:"w-screen h-screen relative overflow-hidden bg-[#131314]"},ce=k({__name:"Tv",setup(a){const{data:c}=O({queryKey:["music","home"]}),s=m(),n=m(),u=m(!1),x=m(),d=m();b(c,e=>{if(!e)return;const t=e.filter(l=>l.component==="NMCarousel");t&&(s.value=t.find(l=>l.props.items.length>0)?.props?.items?.[0]?.props?.data)}),I(()=>{const e=c.value?.filter(t=>t.component==="NMCarousel");e&&(s.value=e.find(t=>t.props.items.length>0)?.props?.items?.[0]?.props?.data,setTimeout(()=>{const t=document.querySelector(`[data-card="${s.value?.id}"]`);t&&t.focus()},100))}),b(s,e=>{setTimeout(()=>{const t=document.querySelector(`[data-card="${e?.id}"]`);t&&t.focus()},100)});function C(e,t){const l=e.target;if(l?.nodeName==="DIV"){(d.value??l.querySelector("a"))?.focus();return}t&&(s.value=t,d.value=l)}function L(e){if(u.value){e.preventDefault();return}clearTimeout(x.value),u.value=!0;const t=e.target,l=t.getAttribute("data-index"),q=t.closest("[data-row]"),h=q?.previousElementSibling,$=h?.querySelector(`a[data-index="${l}"]`),w=q?.nextElementSibling,S=w?.querySelector(`a[data-index="${l}"]`),T=t.previousElementSibling,B=t.nextElementSibling;if($&&e.key==="ArrowUp")e.preventDefault(),$.focus();else if(S&&e.key==="ArrowDown")e.preventDefault(),S.focus();else if(T&&e.key==="ArrowLeft")e.preventDefault(),T.focus();else if(B&&e.key==="ArrowRight")e.preventDefault(),B.focus();else if(h&&e.key==="ArrowUp"){const v=Array.from(h?.querySelectorAll("a"))?.at(-1);v&&v.focus()}else if(w&&e.key==="ArrowDown"){const v=Array.from(w?.querySelectorAll("a"))?.at(-1);v&&v.focus()}}function U(){x.value=setTimeout(()=>{u.value=!1},150)}return(e,t)=>(o(),g(i(H),null,{default:D(()=>[V(i(R),{fullscreen:!0},{default:D(()=>[r("div",ie,[s.value?(o(),g(se,{key:0,selected:s.value},null,8,["selected"])):p("",!0),r("div",{ref_key:"scrollContainer",ref:n,class:"flex flex-col justify-start items-start w-available -mx-3 px-3 absolute left-14 right-14 top-[320px] h-available overflow-auto scroll-smooth gap-4 flex-1 pb-8",tabindex:"0",onFocus:t[0]||(t[0]=l=>C(l))},[i(c)?(o(!0),f(M,{key:0},E(i(c)?.filter?.(l=>l.component==="NMCarousel")??[],l=>(o(),g(ue,{key:l.id,data:l.props.items??[],"handle-down":L,"handle-focus":C,"handle-up":U,title:l.props.title},null,8,["data","title"]))),128)):p("",!0)],544)])]),_:1})]),_:1}))}}),xe=ce;export{xe as default};
