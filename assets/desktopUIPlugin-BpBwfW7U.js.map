{"version":3,"file":"desktopUIPlugin-BpBwfW7U.js","sources":["../../src/lib/VideoPlayer/plugins/UIPlugin/desktopUIPlugin.ts"],"sourcesContent":["import {\n    humanTime,\n    convertToSeconds,\n    limitSentenceByCharacters,\n    lineBreakShowTitle,\n    unique\n} from '@nomercy-entertainment/nomercy-video-player/src/helpers';\n\nimport {BaseUIPlugin} from \"./baseUIPlugin\";\n\nimport {Chapter, PlaylistItem, Position, SubtitleStyle} from '@nomercy-entertainment/nomercy-video-player/src/types';\nimport {\n    Icon,\n    edgeStyles,\n    fontFamilies,\n    SubtitleSettingAction,\n    subtitleSettingActions, defaultSubtitleStyles\n} from './buttons';\n\nexport class DesktopUIPlugin extends BaseUIPlugin {\n    topBar: HTMLDivElement = <HTMLDivElement>{};\n    bottomRow: HTMLDivElement = <HTMLDivElement>{};\n    frame: HTMLDivElement = <HTMLDivElement>{};\n    center: HTMLDivElement = <HTMLDivElement>{};\n\n    isMouseDown = false;\n    pipEnabled = false;\n    lockActive = false;\n\n    bottomBar: HTMLDivElement = <HTMLDivElement>{};\n    topRow: HTMLDivElement = <HTMLDivElement>{};\n\n    tooltip: HTMLDivElement = <HTMLDivElement>{};\n    episodeTip: HTMLDivElement = <HTMLDivElement>{};\n\n    scrollContainerStyles = [\n        'scroll-container',\n        'flex',\n        'flex-col',\n        'gap-1',\n        'language-scroll-container',\n        'overflow-x-hidden',\n        'overflow-y-auto',\n        'p-2',\n        'transition-all',\n        'duration-200',\n        'w-available',\n        'scroll-p-4',\n        'scroll-snap-align-center',\n        'scroll-smooth',\n        'scroll-p-4',\n    ];\n\n    subMenuContentStyles = [\n        'sub-menu-content',\n        'flex',\n        'flex-col',\n        'max-h-available',\n        'w-available',\n        'overflow-auto',\n        'min-w-52',\n    ];\n\n    subtitleSettingActions: SubtitleSettingAction[] = [];\n\n    use() {\n        this.subtitleSettingActions = subtitleSettingActions(this.player);\n\n        this.topBar = this.createTopBar(this.overlay);\n\n        this.createBackButton(this.topBar);\n        this.createCloseButton(this.topBar);\n        this.createDivider(this.topBar);\n        this.createTvCurrentItem(this.topBar);\n\n        if (!this.player.options.disableTouchControls) {\n            this.center = this.createCenter(this.overlay);\n        }\n\n        this.bottomBar = this.createBottomBar(this.overlay);\n\n        this.bottomBar.onmouseleave = (e) => {\n            const playerRect = this.player.getVideoElement()?.getBoundingClientRect();\n            if (!playerRect || (e.x > playerRect.left && e.x < playerRect.right && e.y > playerRect.top && e.y < playerRect.bottom)) return;\n            this.player.emit('hide-tooltip');\n        };\n\n        this.topRow = this.createTopRow(this.bottomBar);\n\n        this.player.addClasses(this.topRow, ['mt-4']);\n\n        this.bottomRow = this.createBottomRow(this.bottomBar);\n\n        this.createProgressBar(this.topRow);\n\n        this.createPlaybackButton(this.bottomRow, true);\n\n        this.createPreviousButton(this.bottomRow, true);\n\n        if (this.player.options.seekButtons) {\n            this.createSeekBackButton(this.bottomRow, true);\n\n            this.createSeekForwardButton(this.bottomRow, true);\n        }\n\n        this.createChapterBackButton(this.bottomRow, true);\n\n        this.createChapterForwardButton(this.bottomRow, true);\n\n        this.createNextButton(this.bottomRow, true);\n\n        this.createVolumeButton(this.bottomRow, true);\n\n        this.createTime(this.bottomRow, 'current', ['ml-2']);\n        this.createDivider(this.bottomRow);\n        this.createTime(this.bottomRow, 'remaining', ['mr-2']);\n\n        this.createTheaterButton(this.bottomRow, true);\n        this.createPIPButton(this.bottomRow, true);\n\n        this.createPlaylistsButton(this.bottomRow, true);\n\n        this.createSpeedButton(this.bottomRow, true);\n        this.createCaptionsButton(this.bottomRow, true);\n        this.createAudioButton(this.bottomRow, true);\n        this.createQualityButton(this.bottomRow, true);\n        this.createSettingsButton(this.bottomRow, true);\n\n        this.createFullscreenButton(this.bottomRow, true);\n\n        this.frame = this.createMenuFrame(this.bottomRow);\n\n        this.createMainMenu(this.frame);\n\n        this.createToolTip(this.overlay);\n\n        this.episodeTip = this.createEpisodeTip(this.overlay);\n\n        this.modifySpinner(this.overlay);\n\n        this.eventHandlers();\n    }\n\n    dispose() {\n\n        this.topBar.remove();\n        this.bottomBar.remove();\n        this.bottomRow.remove();\n        this.frame.remove();\n        this.center?.remove();\n        this.tooltip.remove();\n        this.episodeTip.remove();\n        this.loader.remove();\n    }\n\n    createTopRow(parent: HTMLDivElement) {\n        return this.player.createElement('div', 'top-row')\n            .addClasses([\n                'top-row',\n                'flex',\n                'gap-1',\n                'h-2',\n                'items-center',\n                'pl-2',\n                'pr-2',\n                'relative',\n                'w-available',\n            ])\n            .appendTo(parent);\n    }\n\n    createBottomRow(parent: HTMLDivElement) {\n        return this.player.createElement('div', 'bottom-row')\n            .addClasses([\n                'bottom-row',\n                'flex',\n                'h-10',\n                'lg:mb-2',\n                'p-1',\n                'lg:px-4',\n                'items-center',\n                'relative',\n                'w-available',\n            ])\n            .appendTo(parent);\n    }\n\n    eventHandlers() {\n        // this.player.on('controls', (showing) => {\n        // \tif (this.player.getElement()) {\n        // \t\tif (showing) {\n        // \t\t\tthis.player.getElement()?.setAttribute('active', 'true');\n        // \t\t} else {\n        // \t\t\tthis.player.getElement()?.setAttribute('active', 'false');\n        // \t\t}\n        // \t}\n        // });\n\n        this.player.on('chapters', () => {\n            this.createChapterMarkers();\n        });\n\n        this.player.on('back-button', () => {\n            switch (this.currentMenu) {\n                case 'episode':\n                case 'language':\n                case 'quality':\n                    this.player.emit('showPauseScreen');\n                    break;\n                case 'seek':\n                case 'pause':\n                    this.seekContainer.style.transform = '';\n                    this.player.play().then();\n                    break;\n                default:\n                    break;\n            }\n        });\n\n        window.addEventListener('resize', () => {\n            this.sizeMenuFrame();\n        });\n    }\n\n    createCenter(parent: HTMLElement) {\n\n        const center = this.player.createElement('div', 'center')\n            .addClasses([\n                'center',\n                'absolute',\n                'grid',\n                'grid-cols-3',\n                'grid-rows-6',\n                'h-full',\n                'w-full',\n                'z-0',\n\n                'transition-all',\n                'duration-200',\n\n                'bg-transparent',\n                'group-[&.nomercyplayer:not(.buffering).paused]:bg-gradient-circle-c',\n\n                'from-15%',\n                'from-black/50',\n                'via-40%',\n                'via-black/30',\n                'to-100%',\n                'to-black/0',\n            ])\n            .appendTo(parent);\n\n        this.createSpinnerContainer(center);\n\n        if (this.player.isMobile()) {\n            this.createTouchSeekBack(center, {x: {start: 1, end: 1}, y: {start: 2, end: 6}});\n            this.createTouchPlayback(center, {x: {start: 2, end: 2}, y: {start: 3, end: 5}});\n            this.createTouchSeekForward(center, {x: {start: 3, end: 3}, y: {start: 2, end: 6}});\n            this.createTouchVolUp(center, {x: {start: 2, end: 2}, y: {start: 1, end: 3}});\n            this.createTouchVolDown(center, {x: {start: 2, end: 2}, y: {start: 5, end: 7}});\n        } else {\n            this.createTouchSeekBack(center, {x: {start: 1, end: 2}, y: {start: 2, end: 6}});\n            this.createTouchPlayback(center, {x: {start: 2, end: 3}, y: {start: 2, end: 6}});\n            this.createTouchSeekForward(center, {x: {start: 3, end: 4}, y: {start: 2, end: 6}});\n        }\n\n        return center;\n\n    }\n\n    createTouchSeekBack(parent: HTMLElement, currentTime: Position) {\n        const touchSeekBack = this.createTouchBox(parent, 'touchSeekBack', currentTime);\n        ['click'].forEach((event) => {\n            touchSeekBack.addEventListener(event, this.doubleTap(\n                () => {\n                    this.player.rewindVideo();\n                },\n                () => {\n                    if (this.controlsVisible) {\n                        this.player.emit('hideControls');\n                    }\n                }\n            ));\n        });\n\n        this.createSeekRipple(touchSeekBack, 'left');\n\n        return touchSeekBack;\n\n    }\n\n    /**\n     * Attaches a double tap event listener to the element.\n     * @param doubleTap - The function to execute when a double tap event occurs.\n     * @param singleTap - An optional function to execute when a second double tap event occurs.\n     * @returns A function that detects double tap events.\n     */\n    doubleTap(doubleTap: (event: Event) => void, singleTap?: (event2: Event) => void) {\n        const delay = this.player.options.doubleClickDelay ?? 300;\n        let lastTap = 0;\n        let timeout: NodeJS.Timeout;\n        let timeout2: NodeJS.Timeout;\n        return function detectDoubleTap(event: Event, event2?: Event) {\n            const curTime = new Date().getTime();\n            const tapLen = curTime - lastTap;\n            if (tapLen > 0 && tapLen < delay) {\n                event.preventDefault();\n                doubleTap(event);\n                clearTimeout(timeout2);\n            } else {\n                timeout = setTimeout(() => {\n                    clearTimeout(timeout);\n                }, delay);\n                timeout2 = setTimeout(() => {\n                    singleTap?.(event2!);\n                }, delay);\n            }\n            lastTap = curTime;\n        };\n    }\n\n    createTouchSeekForward(parent: HTMLElement, currentTime: Position) {\n        const touchSeekForward = this.createTouchBox(parent, 'touchSeekForward', currentTime);\n        ['mouseup', 'touchend'].forEach((event) => {\n            touchSeekForward.addEventListener(event, this.doubleTap(\n                () => {\n                    this.player.forwardVideo();\n                },\n                () => {\n                    if (this.controlsVisible) {\n                        this.player.emit('hideControls');\n                    }\n                }\n            ));\n        });\n\n        this.createSeekRipple(touchSeekForward, 'right');\n\n        return touchSeekForward;\n    }\n\n    createTouchPlayback(parent: HTMLElement, currentTime: Position, hovered = false) {\n        const touchPlayback = this.createTouchBox(parent, 'touchPlayback', currentTime);\n        this.player.addClasses(touchPlayback, [\n            'touch-playback',\n            'flex',\n            '-ml-2',\n            'items-center',\n            'justify-center',\n        ]);\n\n        ['click'].forEach((event) => {\n            touchPlayback.addEventListener(event, this.doubleTap(\n                () => {\n                    this.player.toggleFullscreen();\n                },\n                () => {\n                    this.controlsVisible && this.player.togglePlayback();\n                }\n            ));\n        });\n\n        const playButton = this.createSVGElement(touchPlayback, 'bigPlay', this.buttons.bigPlay, false, hovered);\n        this.player.addClasses(playButton, [\n            'touch-playback-button',\n            'pointer-events-none',\n            'fill-white',\n        ]);\n\n        this.player.on('ready', () => {\n            playButton.style.display = 'flex';\n        });\n        this.player.on('pause', () => {\n            playButton.style.display = 'flex';\n        });\n\n        this.player.on('play', () => {\n            playButton.style.display = 'none';\n        });\n        this.player.on('time', () => {\n            playButton.style.display = 'none';\n        });\n        this.player.on('firstFrame', () => {\n            playButton.style.display = 'none';\n        });\n\n        return touchPlayback;\n    }\n\n    createTouchVolUp(parent: HTMLElement, currentTime: Position) {\n        if (!this.player.isMobile()) return;\n        const touchVolUp = this.createTouchBox(parent, 'touchVolUp', currentTime);\n        ['click'].forEach((event) => {\n            touchVolUp.addEventListener(event, this.doubleTap(\n                () => {\n                    this.player.volumeUp();\n                },\n                () => {\n                    if (this.controlsVisible) {\n                        this.player.emit('hideControls');\n                    }\n                }\n            ));\n        });\n\n        return touchVolUp;\n    }\n\n    createTouchVolDown(parent: HTMLElement, currentTime: Position) {\n        if (!this.player.isMobile()) return;\n        const touchVolDown = this.createTouchBox(parent, 'touchVolDown', currentTime);\n        ['click'].forEach((event) => {\n            touchVolDown.addEventListener(event, this.doubleTap(\n                () => {\n                    this.player.volumeDown();\n                },\n                () => {\n                    if (this.controlsVisible) {\n                        this.player.emit('hideControls');\n                    }\n                }\n            ));\n        });\n\n        return touchVolDown;\n    }\n\n    createTouchBox(parent: HTMLElement, id: string, currentTime: Position) {\n        const touch = this.player.createElement('div', `touch-box-${id}`)\n            .addClasses([`touch-box-${id}`, 'z-40'])\n            .appendTo(parent);\n\n        touch.style.gridColumnStart = currentTime.x.start.toString();\n        touch.style.gridColumnEnd = currentTime.x.end.toString();\n        touch.style.gridRowStart = currentTime.y.start.toString();\n        touch.style.gridRowEnd = currentTime.y.end.toString();\n\n        parent.appendChild(touch);\n\n        return touch;\n\n    }\n\n    createSpeedButton(parent: HTMLDivElement, hovered = false) {\n        if (this.player.isMobile()) return;\n        const speedButton = this.createUiButton(\n            parent,\n            'speed'\n        );\n\n        if (this.player.hasSpeeds()) {\n            speedButton.style.display = 'flex';\n        } else {\n            speedButton.style.display = 'none';\n        }\n\n        this.createSVGElement(speedButton, 'speed', this.buttons.speed, false, hovered);\n\n        speedButton.addEventListener('click', (event) => {\n            event.stopPropagation();\n            this.player.emit('hide-tooltip');\n\n            if (this.speedMenuOpen) {\n                this.player.emit('show-menu', false);\n\n                this.menuFrame.close();\n            } else {\n                this.player.emit('show-speed-menu', true);\n\n                this.menuFrame.showModal();\n            }\n        });\n\n        this.player.on('pip-internal', (data) => {\n            if (data) {\n                speedButton.style.display = 'none';\n            } else if (this.player.hasSpeeds()) {\n                speedButton.style.display = 'flex';\n            }\n        });\n\n        parent.appendChild(speedButton);\n        return speedButton;\n    }\n\n    createPIPButton(parent: HTMLDivElement, hovered = false) {\n        if (this.player.isMobile() || !this.player.hasPipEventHandler) return;\n        const pipButton = this.createUiButton(\n            parent,\n            'pip'\n        );\n\n        if (this.player.hasPIP()) {\n            pipButton.style.display = 'flex';\n        } else {\n            pipButton.style.display = 'none';\n        }\n\n        pipButton.ariaLabel = this.buttons.pipEnter?.title;\n\n        this.createSVGElement(pipButton, 'pip-enter', this.buttons.pipEnter, false, hovered);\n        this.createSVGElement(pipButton, 'pip-exit', this.buttons.pipExit, true, hovered);\n\n        document.addEventListener('visibilitychange', () => {\n            if (this.pipEnabled) {\n                if (document.hidden) {\n                    if (document.pictureInPictureEnabled) {\n                        this.player.getVideoElement().requestPictureInPicture().then();\n                    }\n                } else if (document.pictureInPictureElement) {\n                    document.exitPictureInPicture().then();\n                }\n            }\n        });\n\n        pipButton.addEventListener('click', (event) => {\n            event.stopPropagation();\n            this.player.emit('hide-tooltip');\n\n            this.player.emit('controls', false);\n\n            if (this.pipEnabled) {\n                this.pipEnabled = false;\n                pipButton.querySelector<any>('.pip-exit-icon').style.display = 'none';\n                pipButton.querySelector<any>('.pip-enter-icon').style.display = 'flex';\n                pipButton.ariaLabel = this.buttons.pipEnter?.title;\n                this.player.emit('pip-internal', false);\n                this.player.emit('pip', false);\n            } else {\n                this.pipEnabled = true;\n                pipButton.querySelector<any>('.pip-enter-icon').style.display = 'none';\n                pipButton.querySelector<any>('.pip-exit-icon').style.display = 'flex';\n                pipButton.ariaLabel = this.buttons.pipExit?.title;\n                this.player.emit('pip-internal', true);\n                this.player.emit('pip', true);\n                this.player.emit('show-menu', false);\n            }\n        });\n\n        this.player.on('fullscreen', () => {\n            if (this.player.getFullscreen()) {\n                pipButton.style.display = 'none';\n            } else {\n                pipButton.style.display = 'flex';\n            }\n        });\n\n        parent.appendChild(pipButton);\n        return pipButton;\n    }\n\n    createMenuFrame(parent: HTMLDivElement) {\n\n        this.menuFrame = this.player.createElement('dialog', 'menu-frame-dialog')\n            .addClasses([\n                'group-[&.nomercyplayer:has(.open)]:backdrop:bg-black/60',\n                'group-[&.nomercyplayer:has(.open)]:backdrop:pointer-events-none',\n            ])\n            .appendTo(parent);\n\n        this.menuFrame.setAttribute('popover', 'manual');\n        this.menuFrame.setAttribute('role', 'modal');\n\n        const menuWrapper = this.player.createElement('div', 'menu-wrapper')\n            .addClasses([\n                'menu-wrapper',\n                'text-white',\n            ])\n            .appendTo(this.menuFrame);\n\n        const menuFrame = this.player.createElement('div', 'menu-frame')\n            .addClasses([\n                'menu-frame',\n                'absolute',\n                'flex-col',\n                'h-available',\n                'hidden',\n                'inset-4',\n                'justify-self-end',\n                'max-h-[calc(100%-2rem)]',\n                'max-w-[min(70rem,calc(100%-2rem))]',\n                'overflow-clip',\n                'rounded-lg',\n                'w-fit',\n                'z-50',\n            ])\n            .appendTo(menuWrapper);\n\n        this.sizeMenuFrame();\n\n        const menuContent = this.player.createElement('div', 'menu-content')\n            .addClasses([\n                'menu-content',\n                'flex',\n                'flex-row',\n                'h-available',\n                'justify-end',\n                'mt-auto',\n                'overflow-clip',\n                'w-full',\n            ])\n            .appendTo(menuFrame);\n\n        this.player.on('resize', () => {\n            this.sizeMenuFrame();\n        });\n        this.player.on('fullscreen', () => {\n            this.sizeMenuFrame();\n        });\n        this.player.on('show-menu', (showing) => {\n            this.menuOpen = showing;\n            this.lockActive = showing;\n            if (showing) {\n\n                this.sizeMenuFrame();\n\n                menuFrame.style.display = 'flex';\n                menuFrame.classList.add('open');\n\n                this.menuFrame.showModal();\n            } else {\n                menuFrame.style.display = 'none';\n                menuFrame.classList.remove('open');\n\n                this.menuFrame.classList.remove('group-[&.nomercyplayer:has(.open)]:backdrop:!hidden');\n                this.center.classList.remove('!bg-none');\n\n                this.menuFrame.close();\n            }\n            menuContent.classList.add('translate-x-0');\n            menuContent.classList.remove('sub-menu-open');\n\n            setTimeout(() => {\n                (Array.from(this.mainMenu.children).find(el =>\n                    (el as HTMLButtonElement).style.display != 'none' && el.id != 'menu-header') as HTMLButtonElement)?.focus();\n            }, 200);\n\n            this.player.emit('show-language-menu', false);\n            this.player.emit('show-subtitles-menu', false);\n            this.player.emit('hide-subtitleSettings-menu');\n            this.player.emit('show-subtitleSettings-menu', false);\n            this.player.emit('show-subtitleSetting-menu', false);\n            this.player.emit('show-quality-menu', false);\n            this.player.emit('show-speed-menu', false);\n            this.player.emit('show-playlist-menu', false);\n        });\n        this.player.on('show-main-menu', (showing) => {\n            this.mainMenuOpen = showing;\n            this.lockActive = showing;\n            if (showing) {\n                menuFrame.classList.add('open');\n                this.player.emit('show-language-menu', false);\n                this.player.emit('show-subtitles-menu', false);\n                this.player.emit('hide-subtitleSettings-menu');\n                this.player.emit('show-subtitleSettings-menu', false);\n                this.player.emit('show-subtitleSetting-menu', false);\n                this.player.emit('show-quality-menu', false);\n                this.player.emit('show-speed-menu', false);\n                this.player.emit('show-playlist-menu', false);\n                menuContent.classList.add('translate-x-0');\n                menuContent.classList.remove('sub-menu-open');\n                menuFrame.style.display = 'flex';\n                this.menuFrame.classList.remove('group-[&.nomercyplayer:has(.open)]:backdrop:!hidden');\n                this.center.classList.remove('!bg-none');\n\n                setTimeout(() => {\n                    (Array.from(this.mainMenu.children).find(el =>\n                        (el as HTMLButtonElement).style.display != 'none' && el.id != 'menu-header') as HTMLButtonElement)?.focus();\n                }, 200);\n            }\n        });\n        this.player.on('show-language-menu', (showing) => {\n            this.languageMenuOpen = showing;\n            this.lockActive = showing;\n            if (showing) {\n                menuFrame.classList.add('open');\n                this.player.emit('show-main-menu', false);\n                this.player.emit('show-subtitles-menu', false);\n                this.player.emit('hide-subtitleSettings-menu');\n                this.player.emit('show-subtitleSettings-menu', false);\n                this.player.emit('show-subtitleSetting-menu', false);\n                this.player.emit('show-quality-menu', false);\n                this.player.emit('show-speed-menu', false);\n                this.player.emit('show-playlist-menu', false);\n                menuContent.classList.remove('translate-x-0');\n                menuContent.classList.add('sub-menu-open');\n                menuFrame.style.display = 'flex';\n            }\n        });\n        this.player.on('show-subtitles-menu', (showing) => {\n            this.subtitlesMenuOpen = showing;\n            this.lockActive = showing;\n            if (showing) {\n                menuFrame.classList.add('open');\n                this.player.emit('show-main-menu', false);\n                this.player.emit('show-language-menu', false);\n                this.player.emit('show-quality-menu', false);\n                this.player.emit('hide-subtitleSettings-menu');\n                this.player.emit('show-subtitleSettings-menu', false);\n                this.player.emit('show-subtitleSetting-menu', false);\n                this.player.emit('show-speed-menu', false);\n                this.player.emit('show-playlist-menu', false);\n                menuContent.classList.remove('translate-x-0');\n                menuContent.classList.add('sub-menu-open');\n                menuFrame.style.display = 'flex';\n            }\n        });\n        this.player.on('show-subtitleSettings-menu', (property) => {\n            this.subtitleSettingsMenuOpen = property;\n            this.lockActive = !!property;\n            if (property) {\n                menuFrame.classList.add('open');\n                this.player.emit('show-main-menu', false);\n                this.player.emit('show-language-menu', false);\n                this.player.emit('show-subtitles-menu', false);\n                this.player.emit('show-quality-menu', false);\n                this.player.emit('show-subtitleSetting-menu', false);\n                this.player.emit('show-speed-menu', false);\n                this.player.emit('show-playlist-menu', false);\n                menuContent.classList.remove('translate-x-0');\n                menuContent.classList.add('sub-menu-open');\n                menuFrame.style.display = 'flex';\n            }\n        });\n        this.player.on('show-subtitleSetting-menu', (property) => {\n            this.subtitleSettingsMenuOpen = property;\n            this.lockActive = !!property;\n            if (property) {\n                menuFrame.classList.add('open');\n                this.player.emit('show-main-menu', false);\n                this.player.emit('show-language-menu', false);\n                this.player.emit('show-subtitles-menu', false);\n                this.player.emit('hide-subtitleSettings-menu');\n                this.player.emit('show-subtitleSettings-menu', false);\n                this.player.emit('show-quality-menu', false);\n                this.player.emit('show-speed-menu', false);\n                this.player.emit('show-playlist-menu', false);\n                menuContent.classList.remove('translate-x-0');\n                menuContent.classList.add('sub-menu-open');\n                menuFrame.style.display = 'flex';\n            }\n        });\n        this.player.on('show-quality-menu', (showing) => {\n            this.qualityMenuOpen = showing;\n            this.lockActive = showing;\n            if (showing) {\n                menuFrame.classList.add('open');\n                this.player.emit('show-main-menu', false);\n                this.player.emit('show-language-menu', false);\n                this.player.emit('show-subtitles-menu', false);\n                this.player.emit('hide-subtitleSettings-menu');\n                this.player.emit('show-subtitleSettings-menu', false);\n                this.player.emit('show-subtitleSetting-menu', false);\n                this.player.emit('show-speed-menu', false);\n                this.player.emit('show-playlist-menu', false);\n                menuContent.classList.remove('translate-x-0');\n                menuContent.classList.add('sub-menu-open');\n                menuFrame.style.display = 'flex';\n            }\n        });\n        this.player.on('show-speed-menu', (showing) => {\n            this.speedMenuOpen = showing;\n            this.lockActive = showing;\n            if (showing) {\n                menuFrame.classList.add('open');\n                this.player.emit('show-main-menu', false);\n                this.player.emit('show-language-menu', false);\n                this.player.emit('show-subtitles-menu', false);\n                this.player.emit('hide-subtitleSettings-menu');\n                this.player.emit('show-subtitleSettings-menu', false);\n                this.player.emit('show-subtitleSetting-menu', false);\n                this.player.emit('show-quality-menu', false);\n                this.player.emit('show-playlist-menu', false);\n                menuContent.classList.remove('translate-x-0');\n                menuContent.classList.add('sub-menu-open');\n                menuFrame.style.display = 'flex';\n            }\n        });\n        this.player.on('show-playlist-menu', (showing) => {\n            // this.createCalcMenu(menuContent);\n            this.playlistMenuOpen = showing;\n            this.lockActive = showing;\n            if (showing) {\n                menuFrame.classList.add('open');\n                this.player.emit('show-main-menu', false);\n                this.player.emit('show-language-menu', false);\n                this.player.emit('show-subtitles-menu', false);\n                this.player.emit('hide-subtitleSettings-menu');\n                this.player.emit('show-subtitleSettings-menu', false);\n                this.player.emit('show-subtitleSetting-menu', false);\n                this.player.emit('show-quality-menu', false);\n                this.player.emit('show-speed-menu', false);\n                menuContent.classList.remove('translate-x-0');\n                menuContent.classList.add('sub-menu-open');\n                menuFrame.style.display = 'flex';\n\n                this.player.emit('switch-season', this.player.playlistItem().season);\n            } else {\n                menuFrame.style.width = '';\n            }\n        });\n        this.player.on('controls', (showing) => {\n            this.lockActive = showing;\n            if (!showing) {\n                this.player.emit('show-menu', false);\n                this.player.emit('show-main-menu', false);\n                this.player.emit('show-language-menu', false);\n                this.player.emit('show-subtitles-menu', false);\n                this.player.emit('hide-subtitleSettings-menu');\n                this.player.emit('show-subtitleSettings-menu', false);\n                this.player.emit('show-subtitleSetting-menu', false);\n                this.player.emit('show-quality-menu', false);\n                this.player.emit('show-speed-menu', false);\n                this.player.emit('show-playlist-menu', false);\n            }\n        });\n\n        return menuContent;\n    }\n\n    sizeMenuFrame() {\n        const rect = this.player?.getElement()?.getBoundingClientRect();\n        if (!rect) return;\n\n        const {\n            width,\n            height,\n            top,\n            bottom,\n            left,\n        } = rect;\n\n        (this.menuFrame.firstChild as HTMLDivElement).style.width = `${width}px`;\n        (this.menuFrame.firstChild as HTMLDivElement).style.height = `${height}px`;\n        (this.menuFrame.firstChild as HTMLDivElement).style.top = `${top}px`;\n        (this.menuFrame.firstChild as HTMLDivElement).style.bottom = `${bottom}px`;\n        (this.menuFrame.firstChild as HTMLDivElement).style.left = `${left}px`;\n        (this.menuFrame.firstChild as HTMLDivElement).style.padding = '2rem';\n        (this.menuFrame.firstChild as HTMLDivElement).style.position = 'fixed';\n        // (this.menuFrame.firstChild as HTMLDivElement).style.background = 'red';\n    }\n\n    createMainMenu(parent: HTMLDivElement) {\n\n        this.mainMenu = this.player.createElement('div', 'main-menu')\n            .addClasses([\n                'main-menu',\n                'bg-neutral-900/95',\n                'flex',\n                'flex-col',\n                'gap-1',\n                'group-[&.nomercyplayer:has(.sub-menu-open)]:!hidden',\n                'h-auto',\n                'max-h-full',\n                'min-w-64',\n                'mt-auto',\n                'overflow-clip',\n                'p-2',\n                'pt-0',\n                'rounded-lg',\n                'pointer-events-auto',\n            ])\n            .appendTo(parent);\n\n        this.mainMenu.style.transform = 'translateX(0)';\n\n        const mainHeader = this.createMainMenuHeader(this.mainMenu);\n        mainHeader.classList.add('!min-h-[2rem]', '-mr-1');\n\n        this.player.addClasses(this.mainMenu, [\n            'main-menu',\n            'bg-neutral-900/95',\n            'flex',\n            'flex-col',\n            'gap-1',\n            'group-[&.nomercyplayer:has(.sub-menu-open)]:!hidden',\n            'h-auto',\n            'max-h-full',\n            'min-w-64',\n            'mt-auto',\n            'overflow-clip',\n            'p-2',\n            'pt-0',\n            'rounded-lg',\n        ]);\n\n        this.player.once('translationsLoaded', () => {\n            this.createMenuButton(this.mainMenu, 'language');\n            this.createMenuButton(this.mainMenu, 'subtitles');\n            this.createMenuButton(this.mainMenu, 'subtitle settings');\n            this.createMenuButton(this.mainMenu, 'quality');\n            this.createMenuButton(this.mainMenu, 'speed');\n            this.createMenuButton(this.mainMenu, 'playlist');\n        });\n\n        this.createSubMenu(parent);\n\n        return this.mainMenu;\n    }\n\n    createSubMenu(parent: HTMLDivElement) {\n\n        const submenu = this.player.createElement('div', 'sub-menu')\n            .addClasses([\n                'sub-menu',\n                'bg-neutral-900/95',\n                'flex-col',\n                'gap-1',\n                'group-[&.nomercyplayer:has(.sub-menu-open)]:flex',\n                'h-auto',\n                'hidden',\n                'max-h-full',\n                'min-w-64',\n                'mt-auto',\n                'overflow-clip',\n                'rounded-lg',\n                'pointer-events-auto',\n                'w-full',\n            ])\n            .appendTo(parent);\n\n        submenu.style.transform = 'translateX(0)';\n\n        this.createLanguageMenu(submenu);\n        this.createSubtitleMenu(submenu);\n        this.createSubtitleSettingsMenu(submenu);\n        this.createQualityMenu(submenu);\n        this.createSpeedMenu(submenu);\n\n        if (this.player.options.playlist && Array.isArray(this.player.options.playlist)) {\n            this.createEpisodeMenu(submenu);\n        } else {\n            this.player.once('playlist', () => {\n                this.createEpisodeMenu(submenu);\n            });\n        }\n\n        return submenu;\n    }\n\n    createMainMenuHeader(parent: HTMLDivElement, hovered = false) {\n        const menuHeader = this.player.createElement('div', 'menu-header')\n            .addClasses([\n                'menu-header',\n                'flex',\n                'h-9',\n                'items-center',\n                'min-h-[2.5rem]',\n                'py-2',\n                'text-white',\n                'w-available',\n            ])\n            .addClasses(['border-b', 'border-gray-300/20', '!p-0'])\n            .appendTo(parent);\n\n        const close = this.createUiButton(\n            menuHeader,\n            'close'\n        );\n\n        this.createSVGElement(close, 'menu', this.buttons.close, hovered);\n        this.player.addClasses(close, ['ml-auto', 'w-8']);\n        close.classList.remove('w-5');\n\n        close.addEventListener('click', (event) => {\n            event.stopPropagation();\n            this.player.emit('show-menu', false);\n            this.lockActive = false;\n            this.player.emit('controls', false);\n\n            this.menuFrame.close();\n\n            this.player.emit('dynamicControls');\n        });\n\n        return menuHeader;\n    }\n\n    createMenuHeader(parent: HTMLDivElement, title: string, hovered = false) {\n        const menuHeader = this.player.createElement('div', 'menu-header')\n            .addClasses([\n                'menu-header',\n                'flex',\n                'h-9',\n                'items-center',\n                'min-h-[2.5rem]',\n                'py-2',\n                'text-white',\n                'w-available',\n            ])\n            .addClasses(['border-b', 'border-gray-300/20'])\n            .appendTo(parent);\n\n        if (title !== 'Episodes') {\n            const back = this.createUiButton(\n                menuHeader,\n                'back'\n            );\n            this.createSVGElement(back, 'menu', this.buttons.chevronL, hovered);\n            this.player.addClasses(back, ['w-8']);\n            back.classList.remove('w-5');\n\n            back.addEventListener('click', (event) => {\n                event.stopPropagation();\n                this.player.emit('show-main-menu', true);\n\n                this.player.emit('show-language-menu', false);\n                this.player.emit('show-subtitles-menu', false);\n                this.player.emit('hide-subtitleSettings-menu');\n                this.player.emit('show-quality-menu', false);\n                this.player.emit('show-speed-menu', false);\n                this.player.emit('show-playlist-menu', false);\n            });\n        }\n\n        const menuButtonText = this.player.createElement('span', 'menu-button-text')\n            .addClasses(this.menuButtonTextStyles)\n            .appendTo(menuHeader);\n\n        menuButtonText.innerText = this.player.localize(title).toTitleCase();\n\n        if (title !== 'Seasons') {\n            const close = this.createUiButton(\n                menuHeader,\n                'close'\n            );\n\n            this.createSVGElement(close, 'menu', this.buttons.close, hovered);\n            this.player.addClasses(close, ['ml-auto', 'w-8']);\n            close.classList.remove('w-5');\n\n            close.addEventListener('click', (event) => {\n                event.stopPropagation();\n                this.player.emit('show-menu', false);\n                this.lockActive = false;\n                this.player.emit('controls', false);\n\n                this.menuFrame.close();\n\n                this.player.emit('dynamicControls');\n            });\n        }\n\n        return menuHeader;\n    }\n\n    createSubtitleSettingMenuHeader(parent: HTMLDivElement, title: string) {\n        const menuHeader = this.player.createElement('div', 'menu-header')\n            .addClasses([\n                'menu-header',\n                'flex',\n                'h-9',\n                'items-center',\n                'min-h-[2.5rem]',\n                'py-2',\n                'text-white',\n                'w-available',\n            ])\n            .addClasses(['border-b', 'border-gray-300/20'])\n            .appendTo(parent);\n\n        const back = this.createUiButton(\n            menuHeader,\n            'back'\n        );\n        this.createSVGElement(back, 'menu', this.buttons.chevronL, false);\n        this.player.addClasses(back, ['w-8']);\n        back.classList.remove('w-5');\n\n        back.addEventListener('click', (event) => {\n            event.stopPropagation();\n            this.player.emit('show-subtitleSettings-menu', true);\n            this.player.emit('show-subtitleSetting-menu', false);\n        });\n\n        const menuButtonText = this.player.createElement('span', 'menu-button-text')\n            .addClasses(this.menuButtonTextStyles)\n            .appendTo(menuHeader);\n\n        menuButtonText.innerText = this.player.localize(title).toTitleCase();\n\n        const close = this.createUiButton(\n            menuHeader,\n            'close'\n        );\n\n        this.createSVGElement(close, 'menu', this.buttons.close, false);\n        this.player.addClasses(close, ['ml-auto', 'w-8']);\n        close.classList.remove('w-5');\n\n        close.addEventListener('click', (event) => {\n            event.stopPropagation();\n            this.player.emit('show-menu', false);\n            this.lockActive = false;\n            this.player.emit('controls', false);\n\n            this.menuFrame.close();\n\n            this.player.emit('dynamicControls');\n        });\n\n\n        return menuHeader;\n    }\n\n    createMenuButton(parent: HTMLDivElement, item: string, hovered = false) {\n        const id = this.spaceToCamel(item);\n\n        const menuButton = this.player.createElement('button', `menu-button-${id}`)\n            .addClasses(this.languageMenuStyles)\n            .appendTo(parent);\n\n        if (id !== 'speed') {\n            menuButton.style.display = 'none';\n        } else if (this.player.hasSpeeds()) {\n            menuButton.style.display = 'flex';\n        } else {\n            menuButton.style.display = 'none';\n        }\n\n        this.createSVGElement(menuButton, 'menu', this.buttons[id], hovered);\n\n        const menuButtonText = this.player.createElement('span', `menu-button-${id}`)\n            .addClasses(this.menuButtonTextStyles)\n            .appendTo(menuButton);\n\n        menuButtonText.innerText = this.player.localize(item.toTitleCase());\n\n        const chevron = this.createSVGElement(menuButton, 'menu', this.buttons.chevronR, false, hovered);\n        this.player.addClasses(chevron, ['ml-auto']);\n\n        menuButton.addEventListener('click', (event) => {\n            event.stopPropagation();\n            this.player.emit(`show-${id}-menu`, true);\n\n            if (id === 'playlist') {\n                window.nmplayer().emit('switch-season', window.nmplayer().playlistItem().season);\n            }\n        });\n\n        if (id === 'language') {\n            this.player.on('id', () => {\n                menuButton.style.display = 'none';\n            });\n            if (this.player.hasAudioTracks()) {\n                menuButton.style.display = 'flex';\n            }\n            this.player.on('audioTracks', (tracks) => {\n                if (tracks.length > 1) {\n                    menuButton.style.display = 'flex';\n                } else {\n                    menuButton.style.display = 'none';\n                }\n            });\n        } else if (id === 'subtitles') {\n            this.player.on('id', () => {\n                menuButton.style.display = 'none';\n            });\n            if (this.player.hasCaptions()) {\n                menuButton.style.display = 'flex';\n            }\n            this.player.on('captionsList', (captions) => {\n                if (captions.length > 1) {\n                    menuButton.style.display = 'flex';\n                } else {\n                    menuButton.style.display = 'none';\n                }\n            });\n        } else if (id === 'subtitleSettings') {\n            menuButton.style.display = 'flex';\n        } else if (id === 'quality') {\n            this.player.on('item', () => {\n                menuButton.style.display = 'none';\n            });\n            if (this.player.hasQualities()) {\n                menuButton.style.display = 'flex';\n            }\n            this.player.on('levels', (levels) => {\n                if (levels.length > 1) {\n                    menuButton.style.display = 'flex';\n                } else {\n                    menuButton.style.display = 'none';\n                }\n            });\n        } else if (id === 'playlist') {\n            if (this.player.options.playlist && Array.isArray(this.player.options.playlist)) {\n                menuButton.style.display = 'flex';\n            }\n            this.player.on('playlist', (playlist) => {\n                if (playlist.length > 1) {\n                    menuButton.style.display = 'flex';\n                } else {\n                    menuButton.style.display = 'none';\n                }\n            });\n        }\n    }\n\n    createLanguageMenu(parent: HTMLDivElement) {\n        const languageMenu = this.player.createElement('div', 'language-menu')\n            .addClasses(this.subMenuContentStyles)\n            .appendTo(parent);\n\n        this.createMenuHeader(languageMenu, 'Language');\n\n        const scrollContainer = this.player.createElement('div', 'language-scroll-container')\n            .addClasses(this.scrollContainerStyles)\n            .appendTo(languageMenu);\n\n        scrollContainer.style.transform = 'translateX(0)';\n\n        this.player.on('item', () => {\n            scrollContainer.innerHTML = '';\n        });\n\n        if (this.player.hasAudioTracks()) {\n            Object.values(this.player.getAudioTracks()).forEach((track) => {\n                this.createLanguageMenuButton(scrollContainer, {\n                    language: track.language!,\n                    label: track.label!,\n                    type: 'audio',\n                    id: track.id!,\n                    buttonType: 'audio',\n                });\n            });\n        }\n\n        this.player.on('audioTracks', (tracks) => {\n            scrollContainer.innerHTML = '';\n\n            Object.values(tracks).forEach((track) => {\n                this.createLanguageMenuButton(scrollContainer, {\n                    language: track.language!,\n                    label: track.label!,\n                    type: 'audio',\n                    id: track.id!,\n                    buttonType: 'audio',\n                });\n            });\n        });\n\n        this.player.on('show-language-menu', (showing) => {\n            if (showing) {\n                languageMenu.style.display = 'flex';\n\n                setTimeout(() => {\n                    (scrollContainer.firstChild as HTMLButtonElement).focus();\n                }, 200);\n            } else {\n                languageMenu.style.display = 'none';\n            }\n        });\n\n        return languageMenu;\n    }\n\n    createSubtitleMenu(parent: HTMLDivElement) {\n        const subtitleMenu = this.player.createElement('div', 'subtitle-menu')\n            .addClasses(this.subMenuContentStyles)\n            .appendTo(parent);\n\n        this.createMenuHeader(subtitleMenu, 'subtitles');\n\n        const scrollContainer = this.player.createElement('div', 'subtitle-scroll-container')\n            .addClasses(this.scrollContainerStyles)\n            .appendTo(subtitleMenu);\n\n        scrollContainer.style.transform = 'translateX(0)';\n\n        this.player.on('item', () => {\n            scrollContainer.innerHTML = '';\n        });\n\n        if (this.player.hasCaptions()) {\n            Object.values(this.player.getCaptionsList()).forEach((track) => {\n                this.createLanguageMenuButton(scrollContainer, {\n                    language: track.language!,\n                    label: track.label!,\n                    type: track.type!,\n                    id: track.id!,\n                    buttonType: 'subtitle',\n                });\n            });\n        }\n\n        this.player.on('captionsList', (tracks) => {\n            scrollContainer.innerHTML = '';\n\n            Object.values(tracks).forEach((track) => {\n                this.createLanguageMenuButton(scrollContainer, {\n                    language: track.language!,\n                    label: track.label!,\n                    type: track.type!,\n                    id: track.id!,\n                    buttonType: 'subtitle',\n                });\n            });\n        });\n\n        this.player.on('show-subtitles-menu', (showing) => {\n            if (showing) {\n                subtitleMenu.style.display = 'flex';\n\n                setTimeout(() => {\n                    (scrollContainer.firstChild as HTMLButtonElement).focus();\n                }, 200);\n            } else {\n                subtitleMenu.style.display = 'none';\n            }\n        });\n\n        return subtitleMenu;\n    }\n\n    createSubtitleSettingMenuButton(parent: HTMLDivElement, data: {\n                                        label: string;\n                                        property: keyof SubtitleStyle | '';\n                                        buttonType: string;\n                                    }\n    ) {\n\n        const subtitleSettingButton = this.player.createElement('button', `subtitleSetting-button-${this.spaceToCamel(data.label)}`)\n            .addClasses(this.languageMenuStyles)\n            .appendTo(parent);\n\n        const subtitleSettingButtonText = this.player.createElement('span', `menu-button-text-${this.spaceToCamel(data.label)}`)\n            .addClasses(this.menuButtonTextStyles)\n            .appendTo(subtitleSettingButton);\n\n        subtitleSettingButtonText.innerText = this.player.localize(data.label);\n\n        const subtitleSettingButtonValueText = this.player.createElement('span', `menu-button-text-${this.spaceToCamel(data.label)}`)\n            .addClasses(this.menuButtonSubTextStyles)\n            .appendTo(subtitleSettingButton);\n        this.player.addClasses(subtitleSettingButtonValueText, ['ml-auto']);\n\n        if (data.property) {\n            const value = this.player.subtitleStyle[data.property].toString();\n            const isNumber = !isNaN(parseInt(value, 10));\n\n            if (data.property === 'fontFamily') {\n                console.log(fontFamilies.find(f => f.value == value))\n                subtitleSettingButtonValueText.innerText = fontFamilies.find(f => f.value == value)!.name;\n            } else if (data.property === 'edgeStyle') {\n                subtitleSettingButtonValueText.innerText = edgeStyles.find(f => f.value == value)!.name;\n            } else {\n                subtitleSettingButtonValueText.innerText = (value + (isNumber ? '%' : '')).toTitleCase();\n            }\n\n            const chevron = this.createSVGElement(subtitleSettingButton, 'menu', this.buttons.chevronR, false, false);\n            this.player.addClasses(chevron, ['ml-2']);\n\n            this.createSubtitleSettingMenu(parent, data);\n\n            this.player.on('set-subtitle-style', (style: SubtitleSettingAction) => {\n                if (data.property != style.property) return;\n\n                const value = this.player.subtitleStyle[style.property as keyof SubtitleStyle].toString();\n                const isNumber = !isNaN(parseInt(value, 10));\n\n                if (data.property === 'fontFamily') {\n                    console.log(fontFamilies.find(f => f.value == value))\n                    subtitleSettingButtonValueText.innerText = fontFamilies.find(f => f.value == value)!.name;\n                } else if (data.property === 'edgeStyle') {\n                    subtitleSettingButtonValueText.innerText = edgeStyles.find(f => f.value == value)!.name;\n                } else {\n                    subtitleSettingButtonValueText.innerText = (value + (isNumber ? '%' : '')).toTitleCase();\n                }\n            });\n        }\n\n        subtitleSettingButton.addEventListener('click', (event) => {\n            event.stopPropagation();\n            if (data.property) {\n                this.player.emit('show-subtitleSetting-menu', data.property);\n                this.player.emit('hide-subtitleSettings-menu');\n            } else {\n                this.player.setSubtitleStyle(defaultSubtitleStyles);\n            }\n        });\n\n        this.addKeyEventsToLanguageButton(subtitleSettingButton, parent);\n\n        return subtitleSettingButton;\n    }\n\n    createSubtitleSettingsMenu(parent: HTMLDivElement) {\n\n        const subtitleSettingsMenu = this.player.createElement('div', 'subtitleSettings-menu')\n            .addClasses(this.subMenuContentStyles)\n            .appendTo(parent);\n\n        this.createMenuHeader(subtitleSettingsMenu, 'subtitle settings');\n\n        const scrollContainer = this.player.createElement('div', 'subtitleSettings-scroll-container')\n            .addClasses([\n                ...this.scrollContainerStyles,\n                '!w-80',\n            ])\n            .appendTo(subtitleSettingsMenu);\n\n        scrollContainer.style.transform = 'translateX(0)';\n\n        this.createSubtitleSettingMenuButton(scrollContainer, {\n            label: 'Font',\n            property: 'fontFamily',\n            buttonType: 'subtitleSetting',\n        });\n        this.createSubtitleSettingMenuButton(scrollContainer, {\n            label: 'Text size',\n            property: 'fontSize',\n            buttonType: 'subtitleSetting',\n        });\n        this.createSubtitleSettingMenuButton(scrollContainer, {\n            label: 'Text color',\n            property: 'textColor',\n            buttonType: 'subtitleSetting',\n        });\n        this.createSubtitleSettingMenuButton(scrollContainer, {\n            label: 'Text opacity',\n            property: 'textOpacity',\n            buttonType: 'subtitleSetting',\n        });\n        this.createSubtitleSettingMenuButton(scrollContainer, {\n            label: 'Edge style',\n            property: 'edgeStyle',\n            buttonType: 'subtitleSetting',\n        });\n        this.createSubtitleSettingMenuButton(scrollContainer, {\n            label: 'Area color',\n            property: 'backgroundColor',\n            buttonType: 'subtitleSetting',\n        });\n        this.createSubtitleSettingMenuButton(scrollContainer, {\n            label: 'Area opacity',\n            property: 'backgroundOpacity',\n            buttonType: 'subtitleSetting',\n        });\n        this.createSubtitleSettingMenuButton(scrollContainer, {\n            label: 'Background color',\n            property: 'areaColor',\n            buttonType: 'subtitleSetting',\n        });\n        this.createSubtitleSettingMenuButton(scrollContainer, {\n            label: 'Background opacity',\n            property: 'windowOpacity',\n            buttonType: 'subtitleSetting',\n        });\n        this.createSubtitleSettingMenuButton(scrollContainer, {\n            label: 'Reset',\n            property: '',\n            buttonType: 'subtitleSetting',\n        });\n\n        this.player.on('show-subtitleSettings-menu', (property) => {\n            if (property != false) {\n                subtitleSettingsMenu.style.display = 'flex';\n                this.menuFrame.classList.add('group-[&.nomercyplayer:has(.open)]:backdrop:!hidden');\n                this.center.classList.add('!bg-none');\n\n                setTimeout(() => {\n                    (scrollContainer.firstChild as HTMLButtonElement).focus();\n                }, 200);\n            } else {\n                subtitleSettingsMenu.style.display = 'none';\n            }\n        });\n\n        return subtitleSettingsMenu;\n    }\n\n    createSubtitleSettingMenu(parent: HTMLDivElement, data: {\n\t\tlabel: string;\n\t\tproperty: keyof SubtitleStyle | '';\n\t\tbuttonType: string;\n\t}\n    ) {\n\n        const subtitleSettingMenu = this.player.createElement('div', `subtitleSetting-menu-${data.property}`)\n            .addClasses(this.subMenuContentStyles)\n            .appendTo(parent.parentElement!.parentElement!);\n        subtitleSettingMenu.style.display = 'none';\n\n        this.createSubtitleSettingMenuHeader(subtitleSettingMenu, data.label);\n\n        const scrollContainer = this.player.createElement('div', `subtitleSetting-scroll-container-${data.property}`)\n            .addClasses([\n                ...this.scrollContainerStyles,\n                '!w-80',\n            ])\n            .appendTo(subtitleSettingMenu);\n\n        scrollContainer.style.transform = 'translateX(0)';\n\n        this.subtitleSettingActions\n            .filter(a => a.property == data.property)\n            .forEach((action) => {\n                this.createSubtitleSettingActionButton(scrollContainer, action);\n            });\n\n        this.player.on('show-subtitleSetting-menu', (property: string) => {\n            if (data.property == property) {\n                subtitleSettingMenu.style.display = 'flex';\n                this.menuFrame.classList.add('group-[&.nomercyplayer:has(.open)]:backdrop:!hidden');\n                this.center.classList.add('!bg-none');\n\n                setTimeout(() => {\n                    (scrollContainer.firstChild as HTMLButtonElement).focus();\n                }, 200);\n            } else {\n                subtitleSettingMenu.style.display = 'none';\n            }\n        });\n\n        this.player.on('hide-subtitleSetting-menu', () => {\n            subtitleSettingMenu.style.display = 'none';\n        });\n\n        return scrollContainer;\n    }\n\n    createSubtitleSettingActionButton(parent: HTMLDivElement, data: SubtitleSettingAction) {\n\n        const subtitleSettingActionButton = this.player.createElement('button', `subtitleSetting-action-button-${data.property}`)\n            .addClasses(this.languageMenuStyles)\n            .appendTo(parent);\n\n        const subtitleSettingActionButtonText = this.player.createElement('span', 'menu-button-text')\n            .addClasses(this.menuButtonTextStyles)\n            .appendTo(subtitleSettingActionButton);\n\n        subtitleSettingActionButtonText.innerText = this.player.localize(data.label).toTitleCase();\n\n        const chevron = this.createSVGElement(subtitleSettingActionButton, 'checkmark', this.buttons.checkmark, false, false);\n        this.player.addClasses(chevron, ['ml-auto']);\n\n        if (data.value != this.player.getSubtitleStyle()[data.property as keyof SubtitleStyle]) {\n            chevron.classList.add('hidden');\n        }\n\n        this.player.on('set-subtitle-style', (style) => {\n            if (data.property != style.property) return;\n\n            if (data.value == style.value) {\n                chevron.classList.remove('hidden');\n            } else {\n                chevron.classList.add('hidden');\n            }\n        });\n\n        subtitleSettingActionButton.addEventListener('click', (event) => {\n            event.stopPropagation();\n            data.action(event);\n\n            this.player.emit('set-subtitle-style', data);\n        });\n\n        this.addKeyEventsToLanguageButton(subtitleSettingActionButton, parent);\n\n        return subtitleSettingActionButton;\n    }\n\n    createSpeedMenu(parent: HTMLDivElement, hovered = false) {\n        const speedMenu = this.player.createElement('div', 'speed-menu')\n            .addClasses(this.subMenuContentStyles)\n            .appendTo(parent);\n\n        this.createMenuHeader(speedMenu, 'speed');\n\n        const scrollContainer = this.player.createElement('div', 'speed-scroll-container')\n            .addClasses(this.scrollContainerStyles)\n            .appendTo(speedMenu);\n\n        scrollContainer.style.transform = 'translateX(0)';\n\n        for (const speed of this.player.getSpeeds() ?? []) {\n            const speedButton = this.player.createElement('button', `speed-button-${speed}`)\n                .addClasses(this.languageMenuStyles)\n                .appendTo(scrollContainer);\n\n            const speedButtonSpan = this.player.createElement('span', `menu-button-text-${speed}`)\n                .appendTo(speedButton);\n\n            const speedButtonText = this.player.createElement('span', `menu-button-text-${speed}`)\n                .addClasses(this.menuButtonTextStyles)\n                .appendTo(speedButtonSpan);\n\n            speedButtonText.innerText = speed == 1 ? this.player.localize('Normal') : speed.toString();\n\n            const chevron = this.createSVGElement(speedButton, 'menu', this.buttons.checkmark, false, hovered);\n            this.player.addClasses(chevron, [\n                'ml-auto',\n                'hidden',\n            ]);\n\n            this.player.on('speed', (event) => {\n                if (event === speed) {\n                    chevron.classList.remove('hidden');\n                } else {\n                    chevron.classList.add('hidden');\n                }\n            });\n\n            speedButton.addEventListener('click', () => {\n                this.player.emit('show-menu', false);\n                this.player.setSpeed(speed);\n            });\n\n            if (speed == this.player.getSpeed()) {\n                chevron.classList.remove('hidden');\n            }\n        }\n\n        this.player.on('show-speed-menu', (showing) => {\n            if (showing) {\n                speedMenu.style.display = 'flex';\n\n                setTimeout(() => {\n                    (scrollContainer.firstChild as HTMLButtonElement).focus();\n                }, 200);\n            } else {\n                speedMenu.style.display = 'none';\n            }\n        });\n\n        return speedMenu;\n    }\n\n    createQualityMenu(parent: HTMLDivElement) {\n        const qualityMenu = this.player.createElement('div', 'quality-menu')\n            .addClasses(this.subMenuContentStyles)\n            .appendTo(parent);\n\n        this.createMenuHeader(qualityMenu, 'quality');\n\n        const scrollContainer = this.player.createElement('div', 'quality-scroll-container')\n            .addClasses(this.scrollContainerStyles)\n            .appendTo(qualityMenu);\n\n        scrollContainer.style.transform = 'translateX(0)';\n\n        this.player.on('item', () => {\n            scrollContainer.innerHTML = '';\n        });\n\n        if (this.player.hasQualities()) {\n            Object.values(this.player.getQualityLevels()).forEach((level) => {\n                this.createQualityMenuButton(scrollContainer, {\n                    id: level.id,\n                    width: level.width ?? 0,\n                    height: level.height ?? 0,\n                    label: level.label,\n                    bitrate: level.bitrate ?? 0,\n                });\n            });\n        }\n\n        this.player.on('levels', (levels) => {\n            scrollContainer.innerHTML = '';\n\n            Object.values(levels).forEach((level) => {\n                this.createQualityMenuButton(scrollContainer, {\n                    id: level.id,\n                    width: level.width ?? 0,\n                    height: level.height ?? 0,\n                    label: level.label,\n                    bitrate: level.bitrate ?? 0,\n                });\n            });\n        });\n\n        this.player.on('show-quality-menu', (showing) => {\n            if (showing) {\n                qualityMenu.style.display = 'flex';\n\n                setTimeout(() => {\n                    (scrollContainer.firstChild as HTMLButtonElement).focus();\n                }, 200);\n            } else {\n                qualityMenu.style.display = 'none';\n            }\n        });\n\n        return qualityMenu;\n    }\n\n    createQualityMenuButton(parent: HTMLDivElement, data: {\n        width: number;\n        id: number;\n        bitrate: number;\n        label: string;\n        height: number\n    }, hovered = false) {\n\n        const qualityButton = this.player.createElement('button', `quality-button-${data.height}-${data.bitrate}`)\n            .addClasses(this.languageMenuStyles)\n            .appendTo(parent);\n\n        const qualityButtonText = this.player.createElement('span', 'menu-button-text')\n            .addClasses(this.menuButtonTextStyles)\n            .appendTo(qualityButton);\n\n        qualityButtonText.innerText = `${this.player.localize((data.label)\n            ?.replace('segment-metadata', 'Off'))}`;\n\n        const chevron = this.createSVGElement(qualityButton, 'checkmark', this.buttons.checkmark, false, hovered);\n        this.player.addClasses(chevron, ['ml-auto']);\n\n        if (data.id > 0) {\n            chevron.classList.add('hidden');\n        }\n\n        this.player.on('levelsChanging', (level) => {\n            if (level.id == data.id) {\n                chevron.classList.remove('hidden');\n            } else {\n                chevron.classList.add('hidden');\n            }\n        });\n\n        qualityButton.addEventListener('click', (event) => {\n            event.stopPropagation();\n\n            this.player.setCurrentQuality(data.id);\n\n            this.player.emit('show-menu', false);\n        });\n\n        return qualityButton;\n    }\n\n    createSeekRipple(parent: HTMLDivElement, side: string) {\n\n        const seekRipple = this.player.createElement('div', 'seek-ripple')\n            .addClasses(['seek-ripple', side])\n            .appendTo(parent);\n\n        const arrowHolder = this.player.createElement('div', 'seek-ripple-arrow')\n            .addClasses(['seek-ripple-arrow'])\n            .appendTo(seekRipple);\n\n        const text = this.player.createElement('p', 'seek-ripple-text')\n            .addClasses(['seek-ripple-text'])\n            .appendTo(seekRipple);\n\n        if (side == 'left') {\n            seekRipple.style.borderRadius = '0 50% 50% 0';\n            seekRipple.style.left = '0px';\n            arrowHolder.innerHTML = `\n\t\t\t\t<div class=\"arrow arrow2 arrow-left\"></div>\n\t\t\t\t<div class=\"arrow arrow1 arrow-left\"></div>\n\t\t\t\t<div class=\"arrow arrow3 arrow-left\"></div>\n\t\t\t`;\n            this.player.on('rewind', (val: number) => {\n                text.innerText = `${Math.abs(val)} ${this.player.localize('seconds')}`;\n                seekRipple.style.display = 'flex';\n            });\n            this.player.on('remove-rewind', () => {\n                seekRipple.style.display = 'none';\n            });\n        } else if (side == 'right') {\n            seekRipple.style.borderRadius = '50% 0 0 50%';\n            seekRipple.style.right = '0px';\n            arrowHolder.innerHTML = `\n\t\t\t\t<div class=\"arrow arrow3 arrow-right\"></div>\n\t\t\t\t<div class=\"arrow arrow1 arrow-right\"></div>\n\t\t\t\t<div class=\"arrow arrow2 arrow-right\"></div>\n\t\t\t`;\n            this.player.on('forward', (val: number) => {\n                text.innerText = `${Math.abs(val)} ${this.player.localize('seconds')}`;\n                seekRipple.style.display = 'flex';\n            });\n            this.player.on('remove-forward', () => {\n                seekRipple.style.display = 'none';\n            });\n        }\n\n        return seekRipple;\n    }\n\n    createProgressBar(parent: HTMLDivElement) {\n\n        this.sliderBar = this.player.createElement('div', 'slider-bar')\n            .addClasses([\n                'slider-bar',\n                'bg-white/20',\n                'flex',\n                'group/slider',\n                'h-2',\n                'mx-4',\n                'pointer-events-auto',\n                'relative',\n                'rounded-full',\n                'w-available',\n            ])\n            .appendTo(parent);\n\n        const sliderBuffer = this.player.createElement('div', 'slider-buffer')\n            .addClasses([\n                'slider-buffer',\n                'absolute',\n                'bg-white/20',\n                'flex',\n                'h-full',\n                'overflow-clip',\n                'overflow-hidden',\n                'pointer-events-none',\n                'rounded-full',\n                'z-0',\n            ])\n            .appendTo(this.sliderBar);\n\n        const sliderHover = this.player.createElement('div', 'slider-hover')\n            .addClasses([\n                'slider-hover',\n                'absolute',\n                'bg-white/30',\n                'flex',\n                'h-full',\n                'opacity-1',\n                'overflow-clip',\n                'overflow-hidden',\n                'pointer-events-none',\n                'rounded-full',\n                'z-0',\n            ])\n            .appendTo(this.sliderBar);\n\n        const sliderProgress = this.player.createElement('div', 'slider-progress')\n            .addClasses([\n                'slider-progress',\n                'absolute',\n                'bg-white',\n                'flex',\n                'h-full',\n                'overflow-clip',\n                'overflow-hidden',\n                'pointer-events-none',\n                'rounded-full',\n                'z-10',\n            ])\n            .appendTo(this.sliderBar);\n\n        this.chapterBar = this.player.createElement('div', 'chapter-progress')\n            .addClasses([\n                'chapter-bar',\n                'bg-transparent',\n                'flex',\n                'h-2',\n                'overflow-clip',\n                'relative',\n                'rounded-full',\n                'w-available',\n            ])\n            .appendTo(this.sliderBar);\n\n        const sliderNipple = document.createElement('div');\n        this.player.addClasses(sliderNipple, [\n            'slider-nipple',\n            '!-translate-x-1/2',\n            '!-translate-y-1/4',\n            'absolute',\n            'bg-white',\n            'group-hover/slider:flex',\n            'h-4',\n            'hidden',\n            'left-0',\n            'rounded-full',\n            'top-0',\n            'w-4',\n            'z-20',\n        ]);\n        sliderNipple.id = 'slider-nipple';\n\n        if (this.player.options.nipple != false) {\n            this.sliderBar.append(sliderNipple);\n        }\n\n        const sliderPop = this.player.createElement('div', 'slider-pop')\n            .addClasses([\n                'slider-pop',\n                '-translate-x-1/2',\n                'absolute',\n                'bg-neutral-900/95',\n                'bottom-4',\n                'flex',\n                'flex-col',\n                'font-semibold',\n                'gap-1',\n                'hover:scale-110',\n                'overflow-clip',\n                'pb-1',\n                'pointer-events-none',\n                'rounded-md',\n                'text-center',\n                'z-20',\n            ])\n            .appendTo(this.sliderBar);\n\n        sliderPop.style.setProperty('--visibility', '0');\n        sliderPop.style.opacity = 'var(--visibility)';\n\n        this.sliderPopImage = this.player.createElement('div', 'slider-pop-image')\n            .addClasses(['slider-pop-image'])\n            .appendTo(sliderPop);\n\n        const sliderText = this.player.createElement('div', 'slider-text')\n            .addClasses([\n                'slider-pop-text',\n                'font-mono',\n            ])\n            .appendTo(sliderPop);\n\n        this.chapterText = this.player.createElement('div', 'chapter-text')\n            .addClasses(['chapter-text'])\n            .appendTo(sliderPop);\n\n        if (this.player.options.chapters && !this.player.isTv() && this.player.getChapters()?.length > 0) {\n            this.sliderBar.style.background = '';\n        }\n\n        ['mousedown', 'touchstart'].forEach((event) => {\n            this.sliderBar.addEventListener(event, () => {\n                if (this.isMouseDown) return;\n\n                this.isMouseDown = true;\n                this.isScrubbing = true;\n            }, {\n                passive: true,\n            });\n        });\n\n        this.bottomBar.addEventListener('click', (e: any) => {\n            this.player.emit('hide-tooltip');\n            if (!this.isMouseDown) return;\n\n            this.isMouseDown = false;\n            this.isScrubbing = false;\n            sliderPop.style.setProperty('--visibility', '0');\n            const scrubTime = this.getScrubTime(e);\n            sliderNipple.style.left = `${scrubTime.scrubTime}%`;\n            this.player.seek(scrubTime.scrubTimePlayer);\n        }, {\n            passive: true,\n        });\n\n        ['mousemove', 'touchmove'].forEach((event) => {\n            this.sliderBar.addEventListener(event, (e: any) => {\n                const scrubTime = this.getScrubTime(e);\n                this.getSliderPopImage(scrubTime);\n                sliderText.innerText = humanTime(scrubTime.scrubTimePlayer);\n\n                const sliderPopOffsetX = this.getSliderPopOffsetX(sliderPop, scrubTime);\n                sliderPop.style.left = `${sliderPopOffsetX}%`;\n\n                if (!this.player.options.chapters || this.player.getChapters()?.length == 0) {\n                    sliderHover.style.width = `${scrubTime.scrubTime}%`;\n                }\n\n                if (!this.isMouseDown) return;\n\n                this.chapterText.innerText = this.getChapterText(scrubTime.scrubTimePlayer) ?? '';\n                sliderNipple.style.left = `${scrubTime.scrubTime}%`;\n                if (this.previewTime.length > 0) {\n                    sliderPop.style.setProperty('--visibility', '1');\n                }\n            }, {\n                passive: true,\n            });\n        });\n        this.sliderBar.addEventListener('mouseover', (e: MouseEvent) => {\n            const scrubTime = this.getScrubTime(e);\n            this.getSliderPopImage(scrubTime);\n            sliderText.innerText = humanTime(scrubTime.scrubTimePlayer);\n            this.chapterText.innerText = this.getChapterText(scrubTime.scrubTimePlayer) ?? '';\n            if (this.previewTime.length > 0) {\n                sliderPop.style.setProperty('--visibility', '1');\n                const sliderPopOffsetX = this.getSliderPopOffsetX(sliderPop, scrubTime);\n                sliderPop.style.left = `${sliderPopOffsetX}%`;\n            }\n        }, {\n            passive: true,\n        });\n\n        this.player.on('active', (value) => {\n            setTimeout(() => {\n                this.controlsVisible = value;\n            }, (this.player.options.doubleClickDelay ?? 300) + 10);\n            if (value) return;\n            sliderPop.style.setProperty('--visibility', '0');\n        });\n\n        this.sliderBar.addEventListener('mouseleave', () => {\n            sliderPop.style.setProperty('--visibility', '0');\n            sliderHover.style.width = '0';\n        }, {\n            passive: true,\n        });\n\n        this.player.on('seeked', () => {\n            sliderPop.style.setProperty('--visibility', '0');\n        });\n\n        this.player.on('item', () => {\n            this.sliderBar.classList.add('bg-white/20');\n            this.previewTime = [];\n            this.chapters = [];\n            sliderBuffer.style.width = '0';\n            sliderProgress.style.width = '0';\n            this.fetchPreviewTime();\n        });\n\n        this.player.on('chapters', () => {\n            if (this.player.getChapters()?.length > 0 && !this.player.isTv()) {\n                this.sliderBar.classList.remove('bg-white/20');\n            } else {\n                this.sliderBar.classList.add('bg-white/20');\n            }\n        });\n\n        this.player.on('time', (data) => {\n            if (this.player.getChapters()?.length == 0) {\n                sliderProgress.style.width = `${data.percentage}%`;\n            }\n            if (!this.isScrubbing) {\n                sliderNipple.style.left = `${data.percentage}%`;\n            }\n        });\n\n        this.player.on('controls', (showing) => {\n            if (!showing) {\n                sliderPop.style.setProperty('--visibility', '0');\n                this.menuFrame.close();\n            }\n        });\n\n        this.player.on('pip-internal', (data) => {\n            if (data) {\n                this.sliderBar.style.display = 'none';\n            } else {\n                this.sliderBar.style.display = 'flex';\n            }\n        });\n\n        return this.sliderBar;\n    }\n\n    getChapterText(scrubTimePlayer: number): string | null {\n        if (this.player.getChapters().length == 0) return null;\n\n        const index = this.player.getChapters()?.findIndex((chapter: Chapter) => {\n            return chapter.startTime > scrubTimePlayer;\n        });\n\n        return this.player.getChapters()[index - 1]?.title\n            ?? this.player.getChapters()[this.player.getChapters()?.length - 1]?.title\n            ?? null;\n    }\n\n    createChapterMarker(chapter: Chapter) {\n        const chapterMarker = this.player.createElement('div', `chapter-marker-${chapter.id.replace(/\\s/gu, '-')}`)\n            .addClasses([\n                'chapter-marker',\n                '[&:last-child(2):.5px]',\n                'absolute',\n                'h-available',\n                'last:translate-x-[1.5px]',\n                'min-w-[2px]',\n                'overflow-hidden',\n                'rounded-sm',\n            ])\n            .appendTo(this.chapterBar);\n        chapterMarker.style.left = `${chapter.left}%`;\n        chapterMarker.style.width = `calc(${chapter.width}% - 2px)`;\n\n        this.player.createElement('div', `chapter-marker-bg-${chapter.id.replace(/\\s/gu, '-')}`)\n            .addClasses([\n                'chapter-marker-bg',\n                'absolute',\n                'bg-white/20',\n                'h-available',\n                'left-0',\n                'rounded-sm',\n                'w-available',\n                'z-0',\n            ])\n            .appendTo(chapterMarker);\n\n        const chapterMarkerHover = this.player.createElement('div', `chapter-marker-hover-${chapter.id.replace(/\\s/gu, '-')}`)\n            .addClasses([\n                'chapter-marker-hover',\n                'absolute',\n                'bg-gray-200',\n                'h-available',\n                'left-0',\n                'origin-left',\n                'rounded-sm',\n                'scale-x-0',\n                'w-available',\n                'z-10',\n            ])\n            .appendTo(chapterMarker);\n\n        const chapterMarkerProgress = this.player.createElement('div', `chapter-marker-progress-${chapter.id.replace(/\\s/gu, '-')}`)\n            .addClasses([\n                'chapter-marker-progress',\n                'absolute',\n                'bg-white',\n                'h-available',\n                'left-0',\n                'origin-left',\n                'rounded-sm',\n                'scale-x-0',\n                'w-available',\n                'z-20',\n            ])\n            .appendTo(chapterMarker);\n\n        const left = chapter.left;\n        const right = chapter.left + chapter.width;\n\n        this.player.on('time', (data) => {\n            if (data.percentage < left) {\n                chapterMarkerProgress.style.transform = 'scaleX(0)';\n            } else if (data.percentage > right) {\n                chapterMarkerProgress.style.transform = 'scaleX(1)';\n            } else {\n                chapterMarkerProgress.style.transform = `scaleX(${(data.percentage - left) / (right - left)})`;\n            }\n        });\n\n        ['mousemove', 'touchmove'].forEach((event) => {\n            this.chapterBar.addEventListener(event, (e: any) => {\n                const {scrubTime} = this.getScrubTime(e);\n\n                if (scrubTime < left) {\n                    chapterMarkerHover.style.transform = 'scaleX(0)';\n                } else if (scrubTime > right) {\n                    chapterMarkerHover.style.transform = 'scaleX(1)';\n                } else {\n                    chapterMarkerHover.style.transform = `scaleX(${(scrubTime - left) / (right - left)})`;\n                }\n\n            });\n        });\n\n        this.chapterBar.addEventListener('mouseleave', () => {\n            chapterMarkerHover.style.transform = 'scaleX(0)';\n        });\n\n        return chapterMarker;\n    }\n\n    createChapterMarkers() {\n        if (this.player.isTv()) return;\n\n        this.chapterBar.style.background = '';\n\n        this.player.on('item', () => {\n            this.chapterBar.style.background = '';\n        });\n\n        this.chapterBar.querySelectorAll('.chapter-marker').forEach((element) => {\n            this.chapterBar.classList.add('bg-white/20');\n            element.remove();\n        });\n        this.player.getChapters()?.forEach((chapter: Chapter) => {\n            this.createChapterMarker(chapter);\n        });\n    }\n\n    getSliderPopOffsetX(sliderPop: HTMLDivElement, scrubTime: any) {\n        const sliderBarRect = this.sliderBar.getBoundingClientRect();\n        const sliderPopRect = sliderPop.getBoundingClientRect();\n        const sliderPopPercentageWidth = ((sliderPopRect.width * 0.5) / sliderBarRect.width) * 100;\n        let offsetX = scrubTime.scrubTime;\n        if (offsetX <= sliderPopPercentageWidth) {\n            offsetX = sliderPopPercentageWidth;\n        }\n        if (offsetX >= 100 - sliderPopPercentageWidth) {\n            offsetX = 100 - sliderPopPercentageWidth;\n        }\n\n        return offsetX;\n    }\n\n    createEpisodeMenu(parent: HTMLDivElement) {\n        if (!this.player.getVideoElement()) return;\n\n        const playlistMenu = this.player.createElement('div', 'playlist-menu')\n            .addClasses([\n                ...this.subMenuContentStyles,\n                '!flex-row',\n                '!gap-0',\n            ])\n            .appendTo(parent);\n\n        const subMenu = this.player.createElement('div', 'sub-menu-content')\n            .addClasses([\n                ...this.subMenuContentStyles,\n                '!w-1/3',\n                'border-r-2',\n                'border-gray-500/20',\n            ])\n            .appendTo(playlistMenu);\n\n        this.createMenuHeader(subMenu, 'Seasons');\n\n        const seasonScrollContainer = this.player.createElement('div', 'playlist-scroll-container')\n            .addClasses(this.scrollContainerStyles)\n            .appendTo(subMenu);\n        seasonScrollContainer.style.transform = 'translateX(0)';\n\n        seasonScrollContainer.innerHTML = '';\n        for (const [, item] of unique(this.player.getPlaylist(), 'season').entries() ?? []) {\n            this.createSeasonMenuButton(seasonScrollContainer, item);\n        }\n\n        const episodeMenu = this.player.createElement('div', 'episode-menu')\n            .addClasses([\n                ...this.subMenuContentStyles,\n                '!w-[63rem]',\n            ])\n            .appendTo(playlistMenu);\n\n        this.createMainMenuHeader(episodeMenu);\n\n        const scrollContainer = this.player.createElement('div', 'playlist-scroll-container')\n            .addClasses(this.scrollContainerStyles)\n            .appendTo(episodeMenu);\n\n        scrollContainer.innerHTML = '';\n        scrollContainer.tabIndex = 1;\n\n        scrollContainer.addEventListener('focus', () => {\n            (scrollContainer.firstChild as HTMLButtonElement)?.focus();\n        });\n\n        for (const [index, item] of this.player.getPlaylist().entries() ?? []) {\n            this.createEpisodeMenuButton(scrollContainer, item, index);\n        }\n\n        this.player.on('show-playlist-menu', (showing) => {\n            if (showing) {\n                playlistMenu.style.display = 'flex';\n                setTimeout(() => {\n                    (scrollContainer.firstChild as HTMLButtonElement).focus();\n                }, 200);\n            } else {\n                playlistMenu.style.display = 'none';\n            }\n        });\n\n        return playlistMenu;\n    }\n\n    createSeasonMenuButton(parent: HTMLDivElement, item: PlaylistItem, hovered = false) {\n        if (!item?.season) return;\n\n        const seasonButton = this.player.createElement('button', `season-${item.id}`)\n            .addClasses(this.languageMenuStyles)\n            .appendTo(parent);\n\n        const buttonSpan = this.player.createElement('span', `season-${item.id}-span`)\n            .addClasses(this.menuButtonTextStyles)\n            .appendTo(seasonButton);\n\n        buttonSpan.innerText = item?.seasonName\n            ? item?.seasonName\n            : item?.season\n                ? this.player.localize('Season') + ` ${item?.season}`\n                : '';\n\n        const chevron = this.createSVGElement(seasonButton, 'menu', this.buttons.chevronR, false, hovered);\n        this.player.addClasses(chevron, ['ml-auto']);\n\n        seasonButton.addEventListener('click', () => {\n            this.player.emit('switch-season', item?.season);\n        });\n\n        seasonButton.addEventListener('focus', () => {\n            setTimeout(() => {\n                this.scrollCenter(seasonButton, parent, {\n                    duration: 100,\n                    margin: 1,\n                });\n            }, 50);\n        });\n\n        return seasonButton;\n    }\n\n    createEpisodeMenuButton(parent: HTMLDivElement, item: PlaylistItem, index: number) {\n\n        const button = this.player.createElement('button', `playlist-${item.id}`)\n            .addClasses([\n                'playlist-menu-button',\n                'duration-200',\n                'flex',\n                'focus-visible:outline-2',\n                'focus-visible:outline-white',\n                'gap-2',\n                'hover:bg-neutral-600/20',\n                'outline',\n                'outline-1',\n                'outline-solid',\n                'outline-transparent',\n                'p-2',\n                'relative',\n                'rounded-lg',\n                'snap-center',\n                'text-white',\n                'transition-all',\n                'w-available',\n            ])\n            .appendTo(parent);\n\n        if (this.player.playlistItem()?.season !== 1) {\n            button.style.display = 'none';\n        }\n\n        const leftSide = this.player.createElement('div', `playlist-${item.id}-left`)\n            .addClasses([\n                'episode-menu-button-left',\n                'h-available',\n                'overflow-clip',\n                'pointer-events-none',\n                'relative',\n                'rounded-md',\n                'self-center',\n                'w-[30%]',\n            ])\n            .appendTo(button);\n\n        this.player.createElement('div', `episode-${item.id}-shadow`)\n            .addClasses([\n                'episode-menu-button-shadow',\n                '!h-available',\n                'absolute',\n                'bg-[linear-gradient(0deg,rgba(0,0,0,0.87)_0%,rgba(0,0,0,0.7)_25%,rgba(0,0,0,0)_50%,rgba(0,0,0,0)_100%)]',\n                'bottom-0',\n                'left-0',\n                'shadow-[inset_0px_1px_0px_rgba(255,255,255,0.24),inset_0px_-1px_0px_rgba(0,0,0,0.24),inset_0px_-2px_0px_rgba(0,0,0,0.24)]',\n                'w-available',\n            ])\n            .appendTo(leftSide);\n\n        const image = this.player.createElement('img', `episode-${item.id}-image`)\n            .addClasses([\n                'episode-menu-button-image',\n                'aspect-video',\n                'h-auto',\n                'object-cover',\n                'w-available',\n            ])\n            .appendTo(leftSide);\n        image.setAttribute('loading', 'lazy');\n        image.src = item.image && item.image != '' ? `${this.imageBaseUrl.includes('https') ? '' : this.imageBaseUrl}${item.image}` : '';\n\n        const progressContainer = this.player.createElement('div', `episode-${item.id}-progress-container`)\n            .addClasses([\n                'episode-menu-progress-container',\n                'absolute',\n                'bottom-0',\n                'flex',\n                'flex-col',\n                'px-3',\n                'w-available',\n            ])\n            .appendTo(leftSide);\n\n        const progressContainerItemBox = this.player.createElement('div', `episode-${item.id}-progress-box`)\n            .addClasses([\n                'episode-menu-progress-box',\n                'flex',\n                'h-available',\n                'justify-between',\n                'mb-1',\n                'px-1',\n                'sm:mx-2',\n            ])\n            .appendTo(progressContainer);\n\n\n        const progressContainerItemText = this.player.createElement('div', `episode-${item.id}-progress-item`)\n            .addClasses([\n                'progress-item-text',\n                'text-[0.7rem]',\n            ])\n            .appendTo(progressContainerItemBox);\n\n        if (item.episode) {\n            progressContainerItemText.innerText = `${this.player.localize('E')}${item.episode}`;\n        }\n\n        const progressContainerDurationText = this.player.createElement('div', `episode-${item.id}-progress-duration`)\n            .addClasses([\n                'progress-duration',\n                'text-[0.7rem]',\n            ])\n            .appendTo(progressContainerItemBox);\n        progressContainerDurationText.innerText = item.duration?.replace(/^00:/u, '') ?? '';\n\n        const sliderContainer = this.player.createElement('div', `episode-${item.id}-slider-container`)\n            .addClasses([\n                'slider-container',\n                'bg-gray-500/80',\n                'h-1',\n                'hidden',\n                'mb-2',\n                'mx-1',\n                'overflow-clip',\n                'rounded-md',\n                'sm:mx-2',\n            ])\n            .appendTo(progressContainer);\n\n        const progressBar = this.player.createElement('div', `episode-${item.id}-progress-bar`)\n            .addClasses([\n                'progress-bar',\n                'bg-white',\n            ])\n            .appendTo(sliderContainer);\n\n        if (item.progress?.time) {\n            progressBar.style.width = `${(item.progress.time / convertToSeconds(item.duration)) * 100}%`;\n            sliderContainer.style.display = 'flex';\n        }\n\n        const episodeMenuButtonRightSide = this.player.createElement('div', `episode-${item.id}-right-side`)\n            .addClasses([\n                'playlist-card-right',\n                'flex',\n                'flex-col',\n                'gap-1',\n                'pointer-events-none',\n                'text-left',\n                'w-3/4',\n            ])\n            .appendTo(button);\n\n        const episodeMenuButtonTitle = this.player.createElement('span', `episode-${item.id}-title`)\n            .addClasses([\n                'playlist-menu-button-title',\n                'font-bold',\n                'line-clamp-2',\n                'text-white',\n            ])\n            .appendTo(episodeMenuButtonRightSide);\n\n        if (item.episode) {\n            episodeMenuButtonTitle.innerText = lineBreakShowTitle(item.title?.replace(item.show ?? '', '').replace('%S', this.player.localize('S'))\n                .replace('%E', this.player.localize('E')));\n        }\n\n        const episodeMenuButtonOverview = this.player.createElement('span', `episode-${item.id}-overview`)\n            .addClasses([\n                'playlist-menu-button-overview',\n                'leading-[1rem]',\n                'line-clamp-4',\n                'overflow-hidden',\n                'text-[0.7rem]',\n                'text-white',\n            ])\n            .appendTo(episodeMenuButtonRightSide);\n        episodeMenuButtonOverview.innerText = limitSentenceByCharacters(item.description, 600);\n\n        this.player.on('item', (playlistItem) => {\n            if (playlistItem.season == item.season) {\n                button.style.display = 'flex';\n            } else {\n                button.style.display = 'none';\n            }\n\n            if (this.player.playlistItem().season == item.season && this.player.playlistItem().episode == item.episode) {\n                button.style.background = 'rgba(255,255,255,.1)';\n            } else {\n                button.style.background = '';\n            }\n        });\n\n        this.player.on('switch-season', (season) => {\n            if (season == item.season) {\n                button.style.display = 'flex';\n            } else {\n                button.style.display = 'none';\n            }\n        });\n\n        this.player.on('time', (data) => {\n            if (this.player.playlistItem()?.id == item.id) {\n                progressBar.style.width = `${data.percentage}%`;\n                if (data.percentage > 0) {\n                    sliderContainer.style.display = 'flex';\n                }\n            }\n        });\n\n        if (item.episode && item.show) {\n            progressContainerItemText.innerText\n                = item.season == undefined ? `${item.episode}` : `${this.player.localize('S')}${item.season}: ${this.player.localize('E')}${item.episode}`;\n        }\n\n        button.addEventListener('click', () => {\n            this.player.emit('show-menu', false);\n\n            if (item.episode && item.season) {\n                this.setEpisode(item.season, item.episode);\n            } else {\n                this.player.playlistItem(index);\n            }\n            this.player.emit('playlist-menu-button-clicked', item);\n        });\n\n        button.addEventListener('focus', () => {\n            setTimeout(() => {\n                this.scrollCenter(button, parent, {\n                    duration: 100,\n                    margin: 1,\n                });\n            }, 50);\n        });\n\n        return button;\n    }\n\n    createToolTip(parent: HTMLDivElement) {\n        this.tooltip = this.player.createElement('div', 'tooltip')\n            .addClasses([\n                'tooltip',\n                'absolute',\n                'bg-neutral-900/95',\n                'bottom-0',\n                'font-medium',\n                'hidden',\n                'left-0',\n                'pointer-events-none',\n                'px-3',\n                'py-2',\n                'rounded-lg',\n                'text-white',\n                'text-xs',\n                'z-50',\n            ])\n            .appendTo(parent);\n\n        this.tooltip.style.transform = 'translateX(10px)';\n        this.tooltip.innerText = 'Play (space)';\n\n        this.player.on('show-tooltip', (data) => {\n            this.tooltip.innerText = data.text;\n            this.tooltip.style.display = 'block';\n            this.tooltip.style.transform = `translate(calc(${data.x} - 50%), calc(${data.y} - 100%))`;\n            if (data.currentTime == 'top') {\n                this.tooltip.classList.add('top-0');\n                this.tooltip.classList.remove('bottom-0');\n            } else {\n                this.tooltip.classList.remove('top-0');\n                this.tooltip.classList.add('bottom-0');\n            }\n        });\n\n        this.player.on('hide-tooltip', () => {\n            this.tooltip.style.display = 'none';\n        });\n\n        return this.tooltip;\n    }\n\n    createEpisodeTip(parent: HTMLDivElement) {\n\n        const nextTip = this.player.createElement('div', 'episode-tip')\n            .addClasses([\n                'episode-tip',\n                '!w-96',\n                '-bottom-10',\n                'absolute',\n                'bg-neutral-900/95',\n                'font-medium',\n                'gap-2',\n                'h-24',\n                'hidden',\n                'left-0',\n                'px-2',\n                'py-2',\n                'rounded-lg',\n                'text-white',\n                'text-xs',\n                'z-50',\n                'group-[&.nomercyplayer:not(.active)]:!hidden',\n            ])\n            .appendTo(parent);\n\n        const leftSide = this.player.createElement('div', 'next-tip-left')\n            .addClasses([\n                'next-tip-left',\n                'overflow-clip',\n                'relative',\n                'rounded-sm',\n                'self-center',\n                'w-[40%]',\n            ])\n            .appendTo(nextTip);\n\n        const image = this.player.createElement('img', 'next-tip-image')\n            .addClasses([\n                'playlist-card-image',\n                'aspect-video',\n                'h-auto',\n                'object-cover',\n                'rounded-md',\n                'w-available',\n            ])\n            .appendTo(leftSide);\n        image.setAttribute('loading', 'eager');\n\n        const rightSide = this.player.createElement('div', 'next-tip-right-side')\n            .addClasses([\n                'next-tip-right',\n                'flex',\n                'flex-col',\n                'gap-1',\n                'text-left',\n                'w-[60%]',\n            ])\n            .appendTo(nextTip);\n\n        const header = this.player.createElement('span', 'next-tip-header')\n            .addClasses([\n                'next-tip-header',\n                'font-bold',\n            ])\n            .appendTo(rightSide);\n\n        const title = this.player.createElement('span', 'next-tip-title')\n            .addClasses([\n                'next-tip-header',\n                'font-bold',\n                'font-sm',\n                'line-clamp-3',\n            ])\n            .appendTo(rightSide);\n\n        this.player.on('show-episode-tip', (data) => {\n            this.getTipData({direction: data.direction, header, title, image});\n            nextTip.style.display = 'flex';\n            nextTip.style.transform = `translate(${data.x}, calc(${data.y} - 50%))`;\n        });\n\n        this.player.on('hide-episode-tip', () => {\n            nextTip.style.display = 'none';\n        });\n\n        return nextTip;\n    }\n\n    getTipDataIndex(direction: string) {\n        let index: number = this.player.getPlaylistIndex();\n        if (direction == 'previous') {\n            index -= 1;\n        } else {\n            index += 1;\n        }\n\n        return this.player.getPlaylist().at(index);\n    }\n\n    getTipData({direction, header, title, image}: {\n        direction: string;\n        header: HTMLSpanElement;\n        title: HTMLSpanElement;\n        image: HTMLImageElement;\n    }) {\n\n        const item = this.getTipDataIndex(direction);\n        if (!item) return;\n\n        image.src = item.image && item.image != '' ? `${this.imageBaseUrl}${item.image}` : '';\n        header.innerText = `${this.player.localize(`${direction.toTitleCase()} Episode`)} ${this.getButtonKeyCode(direction)}`;\n        title.innerText = item.title?.replace(item.show ?? '', '').replace('%S', this.player.localize('S'))\n            .replace('%E', this.player.localize('E'));\n\n        this.player.once('item', () => {\n            this.getTipData({direction, header, title, image});\n        });\n    }\n\n    createButton(match: string, id: string, insert: 'before' | 'after' = 'after', icon: Icon['path'], click?: () => void, rightClick?: () => void) {\n\n        const element = document.querySelector<HTMLButtonElement>(`${match}`);\n        if (!element) {\n            throw new Error('Element not found');\n        }\n\n        const button = this.createUiButton(element, id.replace(/\\s/gu, '_'));\n        button.ariaLabel = id;\n\n        if (insert === 'before') {\n            element?.before(button);\n        } else {\n            element?.after(button);\n        }\n\n        this.createSVGElement(button, `${id.replace(/\\s/gu, '_')}-enabled`, icon, true, false);\n        this.createSVGElement(button, id.replace(/\\s/gu, '_'), icon, false);\n\n        button.addEventListener('click', (event) => {\n            event.stopPropagation();\n            click?.();\n            this.player.emit('hide-tooltip');\n        });\n        button.addEventListener('contextmenu', (event) => {\n            event.stopPropagation();\n            rightClick?.();\n            this.player.emit('hide-tooltip');\n        });\n\n        return button;\n    }\n}\n"],"names":["DesktopUIPlugin","BaseUIPlugin","__publicField","subtitleSettingActions","e","playerRect","_a","parent","center","currentTime","touchSeekBack","event","doubleTap","singleTap","delay","lastTap","timeout","timeout2","event2","curTime","tapLen","touchSeekForward","hovered","touchPlayback","playButton","touchVolUp","touchVolDown","id","touch","speedButton","data","pipButton","_b","menuWrapper","menuFrame","menuContent","showing","el","property","rect","width","height","top","bottom","left","submenu","menuHeader","close","title","back","menuButtonText","item","menuButton","chevron","tracks","captions","levels","playlist","languageMenu","scrollContainer","track","subtitleMenu","subtitleSettingButton","subtitleSettingButtonText","subtitleSettingButtonValueText","value","isNumber","fontFamilies","f","edgeStyles","style","defaultSubtitleStyles","subtitleSettingsMenu","subtitleSettingMenu","a","action","subtitleSettingActionButton","subtitleSettingActionButtonText","speedMenu","speed","speedButtonSpan","speedButtonText","qualityMenu","level","qualityButton","qualityButtonText","side","seekRipple","arrowHolder","text","val","sliderBuffer","sliderHover","sliderProgress","sliderNipple","sliderPop","sliderText","scrubTime","humanTime","sliderPopOffsetX","scrubTimePlayer","index","chapter","_d","_c","chapterMarker","chapterMarkerHover","chapterMarkerProgress","right","element","sliderBarRect","sliderPopPercentageWidth","offsetX","playlistMenu","subMenu","seasonScrollContainer","unique","episodeMenu","seasonButton","buttonSpan","button","leftSide","image","progressContainer","progressContainerItemBox","progressContainerItemText","progressContainerDurationText","sliderContainer","progressBar","convertToSeconds","episodeMenuButtonRightSide","episodeMenuButtonTitle","lineBreakShowTitle","episodeMenuButtonOverview","limitSentenceByCharacters","playlistItem","season","nextTip","rightSide","header","direction","match","insert","icon","click","rightClick"],"mappings":"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"}