import{C as P,Ft as _,Gt as w,Ln as s,Rn as C,Rt as c,Tt as h,cn as m,i as I,kn as M,mt as l,qt as S,u as N,w as T,xn as d,yn as x,zt as v}from"./index-BVMfOxho.js";import"./dist-vlkWK_nZ.js";import{t as B}from"./esm-DY8g5_-d.js";import"./esm-BkTpNeyF.js";import"./dist-CH0b9ib9.js";import"./focus-visible-bSSZdOZP.js";import"./index5-CWJdeeO8.js";import"./client-CTmm1pIY.js";import"./ionic-global-oucWixmt.js";import"./hardware-back-button-DEko41f-.js";import"./index3-BiTNNMaN.js";import"./helpers-B612kBZQ.js";import"./index6-D7h1Gg6a.js";import"./index8-Dt0xOjwC.js";import"./keyboard-BHL796m8.js";import"./index2-D1kFYiB0.js";import"./ios.transition--OH3Fy46.js";import"./keyboard2-BoLAeL-2.js";import"./md.transition-BznYYDQ-.js";import"./dir-1LliqD9e.js";import"./ui-FAE7KUbU.js";import"./client-BaHBQSTJ.js";import{t as D}from"./currentServer-wKQllb71.js";import"./config-BZ-AEJ_J.js";import"./core-DZundPdS.js";import"./esm-Bc84JaZh.js";import{p as f}from"./global-DPeGmG9M.js";import"./esm-BRDlnhr9.js";import"./bundle-mjs-DqJ8Zzkh.js";import{s as t}from"./user-CWo_OqEw.js";import"./serverClient-DP8QK8AC.js";import{t as a}from"./router-CwEKSEy2.js";import"./utils-CgFfn36P.js";import"./useBaseQuery-DoGC_b9i.js";import"./useInfiniteServerClient-B_ACTkxi.js";import{l as y}from"./SocketClient-Ci81BRq-.js";import"./useQueryClient-B99C1vuk.js";import"./useQuery-AxjyXFw9.js";import"./apiClient-BJYxfNk7.js";import"./notifications-CMaZS40X.js";import{c as U,i as V,l as A,r as L,y as z}from"./utils-B0jNLXCr.js";import"./deviceInfo-DuLvxTKJ.js";import"./auth-B7LO68e-.js";import{s as p}from"./imageModal-D-BdR7Xp.js";import{t as R}from"./useServerClient-BJP3z55h.js";import{a as F,i as j,n as q,o as E,r as G}from"./VideoPlayer-Dm8VdW1m.js";import"./buttons-BrAf7pXX.js";import{t as O}from"./videoNoMercyConnectPlugin-ij6Nd-BH.js";h();var H=S({__name:"Mobile",setup(J){const{data:n}=R({enabled:!t.value.features?.nomercyConnect}),e=M();function u(o){const i={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:o?.filter(r=>!!r.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:t.value?.accessToken||localStorage.getItem("access_token")||"",basePath:D.value?.serverBaseUrl,imageBasePath:"https://app.nomercy.tv/tmdb-images",forceTvMode:(l("android")||l("ios"))&&!l("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||l("capacitor"),renderAhead:100,disableAutoPlayback:t.value.features?.nomercyConnect};if(e.value=G("player1").setup(i),e.value?.once("back",()=>{history.state.back?a.back():a.replace("/")}),t.value.features?.nomercyConnect){const r=new O;e.value?.registerPlugin("videoNoMercyConnect",r),e.value?.usePlugin("videoNoMercyConnect")}const g=new j;e.value?.registerPlugin("desktopUI",g),e.value?.usePlugin("desktopUI");const b=new F;if(e.value?.registerPlugin("autoSkip",b),e.value?.usePlugin("autoSkip"),!t.value.features?.nomercyConnect){const r=new E;e.value?.registerPlugin("sync",r),e.value?.usePlugin("sync")}const k=new q;e.value?.registerPlugin("octopus",k),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?a.back():a.replace("/")}),e.value?.on("dispose",async()=>{await A(),await L(),history.state.back?a.back():await a.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{p(!0)}),e.value?.on("pause",()=>{p(!1)}),e.value?.on("ready",async()=>{await U(),await z(),await V(),y.stop()}),e.value?.on("item",()=>{e.value?.play()}),B.addListener("backButton",()=>{e.value?.emit("back-button-hyjack"),e.value?.dispose()})}return x(n,o=>{o?.length&&u(o)}),P(()=>{y.stop(),t.value.features?.nomercyConnect?u():n.value?.length&&u(n.value)}),T(()=>{e.value?.dispose(),p(!1)}),(o,i)=>(m(),v(s(N),null,{default:d(()=>[w(s(I),{fullscreen:!0},{default:d(()=>[(m(),v(_,{to:"body"},[c("div",{class:C([{"mb-28":s(f),"mb-0":!s(f)},"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"])},[...i[0]||(i[0]=[c("div",{id:"player1",class:"group nomercyplayer"},null,-1)])],2)]))]),_:1})]),_:1}))}}),qe=H;export{qe as default};
