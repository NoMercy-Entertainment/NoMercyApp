import{C as i,Et as v,G as U,J as a,K as V,Q as K,S as o,T as p,Tt as r,X as y,c as q,ct as m,g as k,gt as C,j as J,k as f,kt as c,n as Q,ot as X,w as u,x as _}from"./i18n-Bgv5p1Yb.js";import"./ionic-B1wlflFe.js";import{C as O,G as W,U as Y,_ as Z}from"./vue-core-Dey0Eikg.js";import{C as ee}from"./primevue-CuC2W_MW.js";import"./query-xyWPY_A0.js";import{$n as te,Bn as b,Fr as R,Ki as h,Ni as re,Vn as x,_i as s,b as ae,hi as se,ia as le,la as S,v as oe}from"./index-DLX3dE7o.js";import"./useInfiniteServerClient-DG5_vM7O.js";import{t as ie}from"./useServerClient-BXRsp2bm.js";import{t as ne}from"./ScrollContainer-CeB9S2n1.js";import"./MusicButton-DWvb0ZRE.js";import"./BannerButton-H0Q5uxS0.js";import{t as ce}from"./MediaLikeButton-wHnQCr2v.js";import"./swiper-Cpp-XWJj.js";import"./CardIndicator-KDzAuof1.js";import{t as ue}from"./NMCard-CH9Wvcpu.js";import"./swiper-config-Dx0GnZw9.js";import{t as de}from"./dist-BE4Ks6Jg.js";import{t as pe}from"./FloatingBackButton-1LbxvOkI.js";import{i as fe,n as T,r as me,t as B}from"./ImageCarousel-BQ6bvxgf.js";import{t as _e}from"./InfoHeaderItem-C5shidhE.js";import{t as ve}from"./NotFound-DHJ2nPKx.js";import{t as he}from"./ShareButton-BAErQC4j.js";import"./Carousel-B5Y5YEC3.js";import"./PersonCard-CZ366e8f.js";import{t as ge}from"./ListControlHeaderMoreMenu-D2fbJs5I.js";q();Y();var D=de(),ye={class:"w-available text-surface-12"},ke={key:0,class:"w-available overflow-x-clip relative mt-12 flex flex-grow flex-col items-start justify-start gap-4 self-stretch py-5"},be={class:"ml-4 w-full self-stretch text-5xl font-bold px-4"},xe={class:"ml-4 w-full self-stretch text-lg px-4"},we={class:"flex flex-col items-start justify-start gap-4 self-stretch px-4 before:content-[''] before:self-stretch before:h-px before:bg-[#e2f0fd]/4 after:content-[''] after:self-stretch after:h-px after:bg-[#e2f0fd]/4"},Ce={class:"flex items-start justify-start gap-8 self-stretch pl-4"},Re={class:"text-xs font-bold uppercase text-surface-11"},Se={class:"text-sm font-bold -ml-0.5"},Te={class:"relative flex flex-grow flex-col items-start justify-center text-left gap-1"},Be={class:"text-xs font-bold uppercase text-surface-11"},De={key:0,class:"relative ml-auto flex h-16 items-center justify-center gap-4"},Ee={class:"absolute top-3 grid h-0 w-max origin-bottom group-hover/play:grid-cols-1 items-center justify-start bg-black duration-200 grid-cols-[0fr] group-hover/play:h-[32.77px] transform-all left-[-31px] group-hover/play:top-[-38px] rounded-[5.46px] overflow-hidden"},Ie={class:"py-0 text-xs font-bold px-2.5"},Pe=J({__name:"Desktop",setup(je){const d=W(),{t:E}=Q(),n=ee(),{data:e,isError:I}=ie({queryKey:["base","collection",d.params.id],limit:1e3,keepForever:!0}),g=C(null),w=C(null);X(e,t=>{t&&(t?.backdrop&&b(t?.backdrop),t?.color_palette&&x(t.color_palette.backdrop),g.value=t.duration&&new Date(new Date().getTime()+t.duration*60*1e3).toLocaleTimeString(S.language??"en-US",{hour:"2-digit",minute:"2-digit"}),w.value=setInterval(()=>{g.value=t.duration&&new Date(new Date().getTime()+t.duration*60*1e3).toLocaleTimeString(S.language??"en-US",{hour:"2-digit",minute:"2-digit"})},1e3))}),U(()=>{document.dispatchEvent(new Event("sidebar")),se(e?.value?.title),e?.value?.backdrop&&b(e?.value?.backdrop),e?.value?.color_palette&&x(e?.value?.color_palette.backdrop)}),V(()=>{b(null),x(null),clearInterval(w.value??void 0)});const P=_(()=>({url:`https://app.nomercy.tv${d.fullPath}`})),j=_(()=>e.value?.total_duration?te(E,e.value.total_duration??0,!0):null),A=_(()=>`${(0,D.collect)(e.value?.collection).min("year")} - ${(0,D.collect)(e.value?.collection).max("year")}`),L=_(()=>[{show:!!e.value?.content_ratings,label:"Content rating",component:"ContentRating",data:e.value?.content_ratings},{show:!0,label:"Availability",value:`${e.value?.have_items} / ${e.value?.number_of_items}`},{show:!0,label:"Timespan",value:A.value},{show:!!e.value?.total_duration,label:"Total duration",value:j.value}]);function M(){h().post(`${d.fullPath}/rescan`).then(({data:t})=>{n.add({severity:t.status==="ok"?"success":"error",summary:s("Success"),detail:s(t.message,...t.args),life:5e3})}).catch(()=>{n.add({severity:"error",summary:s("error"),detail:s("An error occurred while rescanning the library folders"),life:5e3})})}function $(){h().post(`${d.fullPath}/refresh`).then(({data:t})=>{n.add({severity:t.status==="ok"?"success":"error",summary:s(t.status==="ok"?"Success":"Error"),detail:s(t.message,...t.args),life:5e3})}).catch(()=>{n.add({severity:"error",summary:s("Error"),detail:s("An error occurred while rescanning the library folders"),life:5e3})})}function N(){h().delete(`${d.fullPath}`).then(({data:t})=>{n.add({severity:t.status==="ok"?"success":"error",summary:s(t.status==="ok"?"Success":"Error"),detail:s(t.message,...t.args),life:5e3})}).catch(()=>{n.add({severity:"error",summary:s("error"),detail:s("An error occurred while rescanning the library folders"),life:5e3})})}function z(){h().post(`${d.fullPath}/add`).then(({data:t})=>{n.add({severity:t.status==="ok"?"success":"error",summary:s(t.status==="ok"?"Success":"Error"),detail:s(t.message,...t.args),life:5e3})}).catch(()=>{n.add({severity:"error",summary:s("Error"),detail:s("An error occurred while rescanning the library folders"),life:5e3})})}const F=_(()=>[{icon:"arrowRefreshHorizontal",onclick:M,title:"Rescan files",privileged:!0},{icon:"arrowRefreshHorizontal",onclick:$,title:"Refresh data",privileged:!0},{icon:"folderAdd",onclick:z,title:`Add ${e?.value?.media_type}`,privileged:!0},{icon:"folderRemove",onclick:N,title:`Delete ${e?.value?.media_type}`,privileged:!0},{icon:"edit",onclick:()=>{window.open(`https://www.themoviedb.org/${e?.value?.media_type}/${e?.value?.id}/edit`,"_blank")},title:"Edit on TMDb"}]);return(t,Ae)=>{const G=K("RouterLink");return a(),i(r(O),null,{default:m(()=>[f(r(Z),{fullscreen:!0},{default:m(()=>[r(I)&&!r(e)?(a(),i(ve,{key:0})):(a(),i(ne,{key:1,"auto-hide":!0,static:!0},{default:m(()=>[o("article",ye,[f(pe),r(e)?(a(),p("section",ke,[o("h1",be,c(r(e)?.title?.replace(/(: | en de )/,`
`)),1),o("p",xe,c(r(e)?.overview),1),o("section",we,[o("div",Ce,[(a(!0),p(k,null,y(L.value.filter(l=>l.show),(l,H)=>(a(),p("div",{key:H,class:v([l.label==="Genre"?"flex-grow text-left":"flex-shrink-0","relative flex flex-col items-start justify-center gap-1"])},[o("p",Re,c(t.$t(l.label)),1),l.component==="ContentRating"?(a(),i(me,{key:0,ratings:l.data,size:6,class:"h-full min-!h-[1rem] object-scale-down rounded-lg overflow-clip"},null,8,["ratings"])):(a(),i(_e,{key:1,class:"!bg-surface-6/11"},{default:m(()=>[o("p",Se,c(l.value),1)]),_:2},1024))],2))),128)),o("div",Te,[o("p",Be,c(t.$t("Genre")),1),o("div",{class:v([r(e)?.genres?.length>5?"children:grayscale":"","flex flex-wrap self-stretch overflow-clip font-medium gap-0.5"])},[(a(!0),p(k,null,y(r(e)?.genres,l=>(a(),i(fe,{key:l.id,genre:l},null,8,["genre"]))),128))],2)]),r(e)?(a(),p("nav",De,[f(G,{class:v([r(re),"!bg-surface-6/11 group/play relative"]),to:`${r(e)?.link}/watch`},{default:m(()=>[f(ae,{"class-name":"w-6",icon:"play"}),o("div",Ee,[o("p",Ie,c(t.$t("Ends at"))+" "+c(g.value),1)])]),_:1},8,["class","to"]),r(e)?(a(),i(ce,{key:0,data:r(e),class:"!bg-surface-6/11",type:"video"},null,8,["data"])):u("",!0),f(he,{"share-data":P.value,class:"!bg-surface-6/11 !p-0"},null,8,["share-data"]),f(ge,{items:F.value,class:"text-surface-12/70 dark:text-surface-12/80"},null,8,["items"])])):u("",!0)])]),o("section",{class:v([r(le)?"media-backdrop-grid":"media-poster-grid","items-start justify-start gap-4 self-stretch px-4"])},[(a(!0),p(k,null,y(r(e)?.collection??[],l=>(a(),i(ue,{key:l?.id,data:l,class:""},null,8,["data"]))),128))],2),r(e)?.cast&&r(e)?.cast?.length>0?(a(),i(T,{key:0,id:"cast",data:r(R)(r(e)?.cast,"order","id").slice(0,50),index:0,next_id:"crew",previous_id:"poster",title:"Cast"},null,8,["data"])):u("",!0),r(e)?.crew&&r(e)?.crew?.length>0?(a(),i(T,{key:1,id:"crew",data:r(R)(r(e)?.crew).slice(0,50),index:0,next_id:"backdrop",previous_id:"cast",title:"Crew"},null,8,["data"])):u("",!0),r(e)?.posters&&r(e)?.posters?.length>0?(a(),i(B,{key:2,id:"poster",data:r(e)?.posters,index:0,next_id:"backdrop",previous_id:"crew",title:"Poster",type:"poster"},null,8,["data"])):u("",!0),r(e)?.backdrops&&r(e)?.backdrops?.length>0?(a(),i(B,{key:3,id:"backdrop","color-palette":r(e)?.color_palette?.poster,data:r(e)?.backdrops,index:0,next_id:"",previous_id:"backdrop",title:"Backdrop",type:"backdrop"},null,8,["color-palette","data"])):u("",!0)])):u("",!0)])]),_:1}))]),_:1})]),_:1})}}}),ot=oe(Pe,[["__scopeId","data-v-69867cce"]]);export{ot as default};
