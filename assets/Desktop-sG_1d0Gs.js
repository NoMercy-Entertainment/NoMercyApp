import{Y as j,aa as q,f as B,w as $,C as H,aC as U,d as g,aK as Y,c as d,o as r,l as x,y as Z,Z as o,ar as A,h as u,t as N,i as G,F as f,p as I,b as P,an as J}from"./vue-ionic-CB3fsSQu.js";import{a0 as O,a as R,d as Q,s as W,r as S,h as v,j as h}from"./index-FAKGUJAJ.js";import{u as X}from"./useInfiniteServerClient-CbmLNZgm.js";import{_ as ee}from"./MediaCard.vue_vue_type_script_setup_true_lang-trwJvObZ.js";import{_ as ae}from"./PersonCard.vue_vue_type_script_setup_true_lang-CkLxsM9j.js";import{_ as oe,a as re}from"./EmptyCard.vue_vue_type_script_setup_true_lang-CScmMTxi.js";import{_ as te}from"./ScrollContainer.vue_vue_type_script_setup_true_lang-BC0HU8gf.js";import{_ as se}from"./NotFound.vue_vue_type_script_setup_true_lang-wPBUfRsR.js";import"./vendor-D67oQ9Zt.js";import"./icons-BW5E66pf.js";import"./rxjs-BCp2L9Rn.js";import"./media-C2AqgyMX.js";import"./api-BBofn2cc.js";import"./swiper-DhG1br88.js";import"./music-player-DVxBCkzH.js";import"./TMDBImage.vue_vue_type_script_setup_true_lang-CwnWFu3m.js";import"./AppLogoSquare-BQzxVNwo.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./CardIndicator.vue_vue_type_script_setup_true_lang-Cx9qA_Rb.js";import"./OptimizedIcon.vue_vue_type_script_setup_true_lang-DQt-oQaH.js";import"./NoResultImage.vue_vue_type_script_setup_true_lang-Do1dxZvT.js";const ne="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",le="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",Ie=j({__name:"Desktop",setup(de){const c=q(),{data:s,fetchNextPage:y,hasNextPage:k,isError:T}=X({queryKey:["libraries",(c==null?void 0:c.params.id)??c.name],limit:20,keepForever:!0});B(()=>{O(),R(null),Q(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),$(s,a=>{a&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const V=H(()=>{var t,l,n,i;const a=(i=(n=(l=(t=s.value)==null?void 0:t.pages)==null?void 0:l[0])==null?void 0:n.data)==null?void 0:i[0];return a&&W.value&&a.media_type!=="person"&&a.media_type!=="genres"});U(()=>{stop(),R(null)});const D=g(),F=g();B(()=>{var a,t;F.value=c.params.id??c.name,k.value&&(((t=(a=s==null?void 0:s.value)==null?void 0:a.pages)==null?void 0:t.length)??0)<50&&y(),document.addEventListener("scrollToDiv",l=>{var n;(n=D.value)==null||n.scrollTo({top:l.detail.top-100,behavior:"smooth"})})}),Y(()=>{document.dispatchEvent(new Event("indexer"))}),$(s,a=>{var t;a&&k.value&&((t=a==null?void 0:a.pages)==null?void 0:t.length)<50&&y()});const z=g(),K=g(),m=(a,t)=>{z.value=t,K.value.show(a)};return(a,t)=>(r(),d(o(J),null,{default:x(()=>[Z(o(A),{fullscreen:!0},{default:x(()=>{var l;return[o(T)&&!((l=o(s))!=null&&l.pages)?(r(),d(se,{key:0})):(r(),d(te,{key:1,autoHide:!0,static:!0,id:o(S).currentRoute.value.fullPath},{default:x(()=>{var n,i;return[(r(),u("div",{ref:"containerRef",class:N(["z-0 flex flex-col gap-4 rounded-3xl border-0 p-4 w-available scrollbar-none border-auto-3 transform-gpu will-change-auto",{"pb-24":o(v)&&!o(h),"pb-40":o(v)&&o(h),"children:pb-4 sm:children:pb-3":!o(v)&&o(h)}]),key:(n=o(S).currentRoute.value.params)==null?void 0:n.id},[G("div",{class:N(`grid w-full gap-4 scroll-smooth music-showing:pb-0 whitespace-pre ${V.value?ne:le}`)},[(r(!0),u(f,null,I(((i=o(s))==null?void 0:i.pages)??[],(C,L)=>{var b,w,E,M;return r(),u(f,{key:L},[C.data.length>0?(r(!0),u(f,{key:0},I(C.data??[],(e,_)=>(r(),u(f,null,[(e==null?void 0:e.media_type)==="tv"||(e==null?void 0:e.media_type)=="movie"||(e==null?void 0:e.media_type)=="collection"||(e==null?void 0:e.media_type)=="specials"?(r(),d(ee,{key:e.id,data:e,onContextMenu:p=>m(p,e),index:_},null,8,["data","onContextMenu","index"])):(e==null?void 0:e.media_type)==="person"?(r(),d(ae,{key:e.id+"_person",data:e,onContextMenu:p=>m(p,e),index:_},null,8,["data","onContextMenu","index"])):(e==null?void 0:e.media_type)==="genres"?(r(),d(oe,{key:e.id+"_genres",data:e,onContextMenu:p=>m(p,e),index:_},null,8,["data","onContextMenu","index"])):P("",!0)],64))),256)):((M=(E=(w=(b=o(s))==null?void 0:b.pages)==null?void 0:w[0])==null?void 0:E.data)==null?void 0:M.length)==0?(r(),d(re,{key:1})):P("",!0)],64)}),128))],2)],2))]}),_:1},8,["id"]))]}),_:1})]),_:1}))}});export{Ie as default};
