import{Y as V,d as K,w as Q,f as R,aC as Y,c as Z,o as j,l as q,i as z,Z as G,an as J,Q as n}from"./vue-ionic-D3xJGFcP.js";import{g as i}from"./imageModal-Cufayies.js";import{A as W,S as X}from"./autoSkipPlugin-DnbvvCcT.js";import"./vendor-CKnYbqeP.js";import{D as $}from"./desktopUIPlugin-tMeOpW9a.js";import{n as ee,K as ae,O as oe}from"./video-player-B8ZC2WFO.js";import{l as se,u as le,r as H,n as te}from"./index-m4cPkZcj.js";import{u as ne}from"./useServerClient-DE6jxTTP.js";import"./media-C2AqgyMX.js";import"./icons-BW5E66pf.js";import"./api-BBofn2cc.js";import"./swiper-D00Cnjmx.js";import"./buttons-DnucOQvv.js";import"./rxjs-BCp2L9Rn.js";import"./baseUIPlugin-D2klSchp.js";import"./subtitles-octopus-By2PrHjB.js";import"./music-player-Ct3VsQMm.js";import"./useInfiniteServerClient-B1gkYmgo.js";const De=V({__name:"Desktop",setup(re){const{data:u}=ne(),e=K(),c=o=>{var p,d,m,v,g,f,y,P,k,b,w,S,h,C,_,D,E,I,M,T,U;const s={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:(o==null?void 0:o.filter(a=>!!a.id))??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:(p=le.value)==null?void 0:p.accessToken,basePath:(d=se.value)==null?void 0:d.serverBaseUrl,forceTvMode:(n("android")||n("ios"))&&!n("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||n("capacitor"),renderAhead:100};e.value=ee("player1").setup(s),(m=e.value)==null||m.once("back",()=>{H.back()});const B=new $;(v=e.value)==null||v.registerPlugin("desktopUI",B),(g=e.value)==null||g.usePlugin("desktopUI");const O=new W;(f=e.value)==null||f.registerPlugin("autoSkip",O),(y=e.value)==null||y.usePlugin("autoSkip");const A=new ae;(P=e.value)==null||P.registerPlugin("keyHandler",A),(k=e.value)==null||k.usePlugin("keyHandler");const F=new X;(b=e.value)==null||b.registerPlugin("sync",F),(w=e.value)==null||w.usePlugin("sync");const L=new oe;(S=e.value)==null||S.registerPlugin("octopus",L),(h=e.value)==null||h.usePlugin("octopus"),(C=e.value)==null||C.once("play",()=>{var a;(a=e.value)==null||a.enterFullscreen()}),(_=e.value)==null||_.on("playlistComplete",()=>{var a;(a=e.value)==null||a.dispose(),H.back()}),(D=e.value)==null||D.once("back",()=>{}),(E=e.value)==null||E.on("play",()=>{i(!0)}),(I=e.value)==null||I.on("pause",()=>{i(!1)}),(M=e.value)==null||M.on("fullscreen",a=>{var l,t;(t=(l=window.external)==null?void 0:l.sendMessage)==null||t.call(l,a?"enterFullscreen":"exitFullscreen")}),(T=e.value)==null||T.on("ready",()=>{var t;te.stop();const a=new MutationObserver(N=>N.filter(r=>r.type==="childList").forEach(r=>{r.addedNodes.forEach(x=>{x instanceof HTMLElement&&x.tagName==="VIDEO"&&console.log("video removed")})})),l=(t=e.value)==null?void 0:t.getVideoElement();l&&a.observe(l,{childList:!0,subtree:!0})}),(U=e.value)==null||U.on("item",()=>{var a;(a=e.value)==null||a.play()})};return Q(u,o=>{var s;(s=e.value)==null||s.dispose(),c(o)}),R(()=>{var o;(o=e.value)==null||o.dispose(),c(u.value)}),Y(()=>{var o;(o=e.value)==null||o.dispose(),i(!1)}),(o,s)=>(j(),Z(G(J),null,{default:q(()=>s[0]||(s[0]=[z("div",{id:"player1",class:"group nomercyplayer"},null,-1)])),_:1}))}});export{De as default};
