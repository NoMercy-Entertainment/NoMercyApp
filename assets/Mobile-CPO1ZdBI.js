import{$ as Q,d as R,w as $,f as E,aG as H,aJ as W,c as z,o as J,l as L,y as X,a0 as l,au as Y,T as Z,i as O,t as ee,ar as ae,Q as n}from"./vue-ionic-DNlOg-eX.js";import{b1 as oe}from"./vendor-C28OoIfY.js";import{u as s,l as j,i as q,k as se,r as u,aq as te,bI as le,bJ as ne,bK as re}from"./index-BmWDEClZ.js";import{g as i}from"./imageModal-C87_bPhe.js";import{V as ue,S as ie}from"./videoNoMercyConnectPlugin-D5KsMNSU.js";import{A as ce}from"./autoSkipPlugin-BIKdym6G.js";import{D as pe}from"./desktopUIPlugin-DK5t7K0H.js";import{n as me,O as de}from"./video-player-nmsKO7Go.js";import{u as ve}from"./useServerClient-MEtEk74o.js";import"./media-C2AqgyMX.js";import"./icons-BW5E66pf.js";import"./api-BBofn2cc.js";import"./swiper-D00Cnjmx.js";import"./rxjs-BCp2L9Rn.js";import"./music-player-JWnzXDV1.js";import"./buttons-DnucOQvv.js";import"./baseUIPlugin-2qw8wsfO.js";import"./subtitles-octopus-By2PrHjB.js";import"./useInfiniteServerClient-DaaqPidf.js";const Ve=Q({__name:"Mobile",setup(fe){var p;const{data:c}=ve({enabled:!((p=s.value.features)!=null&&p.nomercyConnect)}),e=R();function r(o){var m,d,v,f,g,y,b,k,P,C,S,w,I,M,_,N,T,U,h,B,A,x,D,V;const t={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:(o==null?void 0:o.filter(a=>!!a.id))??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:((m=s.value)==null?void 0:m.accessToken)||localStorage.getItem("access_token")||"",basePath:(d=se.value)==null?void 0:d.serverBaseUrl,forceTvMode:(n("android")||n("ios"))&&!n("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||n("capacitor"),renderAhead:100,disableAutoPlayback:(v=s.value.features)==null?void 0:v.nomercyConnect};if(e.value=me("player1").setup(t),(f=e.value)==null||f.once("back",()=>{}),(g=s.value.features)!=null&&g.nomercyConnect){const a=new ue;(y=e.value)==null||y.registerPlugin("videoNoMercyConnect",a),(b=e.value)==null||b.usePlugin("videoNoMercyConnect")}const F=new pe;(k=e.value)==null||k.registerPlugin("desktopUI",F),(P=e.value)==null||P.usePlugin("desktopUI");const G=new ce;if((C=e.value)==null||C.registerPlugin("autoSkip",G),(S=e.value)==null||S.usePlugin("autoSkip"),!((w=s.value.features)!=null&&w.nomercyConnect)){const a=new ie;(I=e.value)==null||I.registerPlugin("sync",a),(M=e.value)==null||M.usePlugin("sync")}const K=new de;(_=e.value)==null||_.registerPlugin("octopus",K),(N=e.value)==null||N.usePlugin("octopus"),(T=e.value)==null||T.once("play",()=>{var a;(a=e.value)==null||a.enterFullscreen()}),(U=e.value)==null||U.on("playlistComplete",()=>{var a;(a=e.value)==null||a.dispose(),u.back()}),(h=e.value)==null||h.on("dispose",()=>{te(),le(),u.back()}),(B=e.value)==null||B.on("back",()=>{var a;(a=e.value)==null||a.dispose()}),(A=e.value)==null||A.on("play",()=>{i(!0)}),(x=e.value)==null||x.on("pause",()=>{i(!1)}),(D=e.value)==null||D.on("ready",()=>{ne(),re(),j.stop()}),(V=e.value)==null||V.on("item",()=>{var a;(a=e.value)==null||a.play()}),oe.addListener("backButton",()=>{var a;(a=e.value)==null||a.emit("back-button-hyjack"),u.back()})}return $(c,o=>{r(o)}),E(()=>{var o;j.stop(),(o=s.value.features)!=null&&o.nomercyConnect?r():r(c.value)}),H(()=>{i(!1)}),W(()=>{var o;(o=e.value)==null||o.dispose()}),(o,t)=>(J(),z(l(ae),null,{default:L(()=>[X(l(Y),{fullscreen:!0},{default:L(()=>[(J(),z(Z,{to:"body"},[O("div",{class:ee(["absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199",{"mb-28":l(q),"mb-0":!l(q)}])},t[0]||(t[0]=[O("div",{id:"player1",class:"group nomercyplayer"},null,-1)]),2)]))]),_:1})]),_:1}))}});export{Ve as default};
