import"./useBaseQuery-BD2bvG9f.js";import"./useInfiniteServerClient-DsIFlj9d.js";import"./useQueryClient-D6q0hgG8.js";import"./useQuery-CBoq9typ.js";import{Ai as P,Ks as _,Ls as k,Mc as c,Ps as b,Rs as p,Tc as C,U as w,Ws as h,_c as M,ca as s,i as n,ic as S,mo as U,oc as d,oo as x,ps as o,rc as I,ws as N,yc as f}from"./index-DO6J_9Tp.js";import{s as i}from"./imageModal-B_6nwhoD.js";import{t as T}from"./useServerClient-BHDPuUSe.js";import{i as D,n as A,o as B,r as H,s as F}from"./VideoPlayer-DyE3_3qC.js";import"./buttons-Dz19tni1.js";import{t as V}from"./keyHandlerPlugin-C7-tbUUC.js";import{t as K}from"./videoNoMercyConnectPlugin-C8ENZqb8.js";N();var L=_({__name:"Desktop",setup(R){const{data:u}=T({enabled:!s.value.features?.nomercyConnect}),e=C();function r(t){const l={controls:!1,debug:!1,playlist:t?.filter(a=>!!a.id)??[],accessToken:s.value?.accessToken,basePath:P.value?.serverBaseUrl,forceTvMode:(o("android")||o("ios"))&&!o("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||o("capacitor"),renderAhead:100,disableAutoPlayback:s.value.features?.nomercyConnect};if(e.value=H("player1").setup(l),e.value.once("back",()=>{history.state.back?n.back():n.replace("/")}),s.value.features?.nomercyConnect){const a=new K;e.value.registerPlugin("videoNoMercyConnect",a),e.value.usePlugin("videoNoMercyConnect")}const v=new D;e.value.registerPlugin("desktopUI",v),e.value.usePlugin("desktopUI");const g=new B;e.value.registerPlugin("autoSkip",g),e.value.usePlugin("autoSkip");const y=new V;if(e.value.registerPlugin("keyHandler",y),e.value.usePlugin("keyHandler"),!s.value.features?.nomercyConnect){const a=new F;e.value.registerPlugin("sync",a),e.value.usePlugin("sync")}const m=new A;e.value.registerPlugin("octopus",m),e.value.usePlugin("octopus"),e.value.once("play",()=>{e.value.enterFullscreen()}),e.value.on("playlistComplete",()=>{console.log("Playlist complete"),history.state.back?n.back():n.replace("/")}),e.value.on("play",()=>{i(!0)}),e.value.on("pause",()=>{i(!1)}),e.value.on("fullscreen",a=>{window.external?.sendMessage?.(a?"enterFullscreen":"exitFullscreen")})}return M(u,t=>{t?.length&&r(t)}),I(()=>{w.stop(),s.value.features?.nomercyConnect?r():u.value?.length&&r(u.value)}),S(()=>{e.value?.dispose(),i(!1)}),(t,l)=>(d(),p(c(U),null,{default:f(()=>[h(c(x),{fullscreen:!0},{default:f(()=>[(d(),p(b,{to:"body"},[l[0]||(l[0]=k("div",{id:"player1",class:"group nomercyplayer text-white"},null,-1))]))]),_:1})]),_:1}))}}),Z=L;export{Z as default};
