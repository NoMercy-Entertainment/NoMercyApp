import{C as n,Ct as l,K as c,S as p,c as P,it as w,j as h,k as C,mt as I,ot as d,wt as S,y as M}from"./i18n-fABvX7Av.js";import{ya as o}from"./ionic-DIYphHxf.js";import{C as B,I as T,L as U,_ as x}from"./vue-core-hXf_Oh5G.js";import"./dist-CJipjyJM.js";import"./query-BsKzQ1i8.js";import{t as D}from"./esm-D1nPlPuN.js";import{H as v,Jt as V,Ut as L,Vi as m,Wt as A,Yt as N,an as j,k as a,qi as z,s as u,va as f}from"./index-B13NG93S.js";import"./useInfiniteServerClient-CEPQIZfY.js";import{t as q}from"./useServerClient-CbP6Nyuo.js";import{a as E,i as F,n as H,o as J,r as K}from"./VideoPlayer-B6IApVAs.js";import"./buttons-CU4wCn28.js";P();var O=h({__name:"Mobile",setup(R){const{data:i}=q({}),e=I();function r(t){const s={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:t?.filter(_=>!!_.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:f.value?.accessToken||localStorage.getItem("access_token")||"",basePath:z.value?.serverBaseUrl,imageBasePath:"https://app.nomercy.tv/tmdb-images",forceTvMode:(o("android")||o("ios"))&&!o("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||o("capacitor"),renderAhead:100};e.value=K("player1").setup(s),e.value?.once("back",()=>{history.state.back?a.back():a.replace("/")});const g=new F;e.value?.registerPlugin("desktopUI",g),e.value?.usePlugin("desktopUI");const b=new E;e.value?.registerPlugin("autoSkip",b),e.value?.usePlugin("autoSkip");const k=new J;e.value?.registerPlugin("sync",k),e.value?.usePlugin("sync");const y=new H;e.value?.registerPlugin("octopus",y),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?a.back():a.replace("/")}),e.value?.on("dispose",async()=>{await N(),await L(),history.state.back?a.back():await a.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{u(!0)}),e.value?.on("pause",()=>{u(!1)}),e.value?.on("ready",async()=>{await V(),await j(),await A(),v.stop()}),e.value?.on("item",()=>{e.value?.play()}),D.addListener("backButton",()=>{e.value?.emit("back-button-hyjack"),e.value?.dispose()})}return w(i,t=>{t?.length&&r(t)}),T(()=>{v.stop(),f.value.features?.nomercyConnect?r():i.value?.length&&r(i.value)}),U(()=>{e.value?.dispose(),u(!1)}),(t,s)=>(c(),n(l(B),null,{default:d(()=>[C(l(x),{fullscreen:!0},{default:d(()=>[(c(),n(M,{to:"body"},[p("div",{class:S([{"mb-28":l(m),"mb-0":!l(m)},"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"])},[...s[0]||(s[0]=[p("div",{id:"player1",class:"group nomercyplayer"},null,-1)])],2)]))]),_:1})]),_:1}))}}),le=O;export{le as default};
