import{i as we,Z as ke,p as fe,bq as me}from"./index-BZi9gin7.js";import{b0 as $e}from"./vendor-B4CMB5r9.js";import{D as _e}from"./desktopUIPlugin-JM5pE7Nx.js";import{n as Ce,K as Se}from"./video-player-DwTDwcfz.js";import"./subtitles-octopus-By2PrHjB.js";import{s as be,c as ze,a as ve}from"./sidebar-UHgIqw9r.js";import{g as ge}from"./imageModal-DMXtofcP.js";import{$ as D,d as L,f as qe,R as Ie,aG as Pe,h as I,o as f,i as s,a0 as d,j as Ve,c as z,b as T,H as V,t as B,l as q,y as h,v as p,a7 as Be,w as Le,ai as pe,p as Ne,F as Te}from"./vue-ionic-BZKAFNsD.js";import{C as De}from"./Carousel-WvfMxqpl.js";import{_ as Fe}from"./Select.vue_vue_type_script_setup_true_lang-B_jODRWA.js";import{_ as he}from"./TMDBImage.vue_vue_type_script_setup_true_lang-CUAz2t9G.js";import{_ as xe}from"./OptimizedIcon.vue_vue_type_script_setup_true_lang-CBcusWU1.js";const Ue=["data-music","data-sidebar"],mt=D({__name:"Trailer",props:{videos:{type:Array,required:!0},toggle:{type:Function,required:!0},open:{type:Boolean,required:!0},title:{type:String,required:!0},index:{type:Number,required:!0},incrementTrailerIndex:{type:Function,required:!0}},setup(e){const t=e,P=L(),g=L(),a=L();return qe(()=>{var b,v,l,i,c,u,x,y,w,k,$,_,C;if(g.value=be.value,ze(),ge(!0),!((b=t.videos[t.index])!=null&&b.src))return;const r={muted:!1,controls:!1,autoPlay:!0,chapters:!1,preload:"auto",playlist:[{id:t.videos[t.index].src,image:`https://trailer.nomercy.tv/${t.videos[t.index].src}/${t.videos[t.index].src}.jpg`,file:`https://trailer.nomercy.tv/${t.videos[t.index].src}/${t.videos[t.index].src}.webm`,title:`${t.videos[t.index].name.toLocaleLowerCase().includes(t.title.toLocaleLowerCase())?"":`${t.title} - `}${t.videos[t.index].name}`.toTitleCase(),duration:"",description:"",tracks:[{id:1,label:"full",file:`https://trailer.nomercy.tv/${t.videos[t.index].src}/${t.videos[t.index].src}.en.vtt`,language:"eng",kind:"subtitles"}]}],playbackRates:[]};a.value=Ce("trailer").setup(r),(v=a.value)==null||v.once("back",()=>{t.toggle()});const o=new _e;(l=a.value)==null||l.registerPlugin("desktopUI",o),(i=a.value)==null||i.usePlugin("desktopUI");const m=new Se;(c=a.value)==null||c.registerPlugin("keyHandler",m),(u=a.value)==null||u.usePlugin("keyHandler"),window.trailer=Ie(a.value),(x=a.value)==null||x.once("ready",()=>{var n;we.value&&((n=a.value)==null||n.enterFullscreen())}),(y=a.value)==null||y.on("ended",()=>{ve(g.value),t.toggle()}),(w=a.value)==null||w.on("remove",()=>{t.toggle(),t.incrementTrailerIndex()}),(k=a.value)==null||k.on("error",()=>{t.toggle()}),($=a.value)==null||$.on("close",()=>{t.toggle()}),(_=a.value)==null||_.on("captionsChanged",n=>{n.track===-1?localStorage.setItem("trailerSubtitles","off"):localStorage.setItem("trailerSubtitles",n.track)}),(C=a.value)==null||C.on("play",()=>{var n,S;localStorage.getItem("trailerSubtitles")==="off"?(n=a.value)==null||n.setCurrentCaption(-1):(S=a.value)==null||S.setCurrentCaption(Number.parseInt(localStorage.getItem("trailerSubtitles")??"-1",10))}),$e.addListener("backButton",t.toggle)}),Pe(()=>{var r;if(ve(g.value),ge(!1),a.value)try{(r=a.value)==null||r.dispose()}catch{}}),(r,o)=>(f(),I("button",{class:"fixed h-full w-full overflow-hidden rounded-lg bg-black/50",onClick:o[0]||(o[0]=m=>e.toggle(m))},[s("div",{"data-music":d(ke),"data-sidebar":d(be),class:"absolute w-screen h-available sm:w-auto sm:overflow-hidden sm:inset-1/2 sm:aspect-video sm:-translate-y-[50%] sidebar-closed:sm:h-full sidebar-closed:sm:max-w-[90vw] sidebar-closed:sm:max-h-[93%] sidebar-closed:px-4 sidebar-closed:py-2 sidebar-closed:xl:px-[1.8rem] sidebar-closed:xl:py-4 sm:-translate-x-[50%] sidebar-open:h-5/6 sidebar-open:px-10 sidebar-open:py-6 sidebar-open:xl:px-[2.8rem] sidebar-open:xl:py-6"},[s("div",{ref_key:"trailerContainer",ref:P,class:"relative rounded-2xl flex overflow-clip children:overflow-clip h-auto top-1/2 -translate-y-1/2 w-full sm:h-full children:!w-full children:!h-auto children:!aspect-video"},o[1]||(o[1]=[s("div",{id:"trailer",class:"group nomercyplayer"},null,-1)]),512)],8,Ue)]))}}),je={class:"relative mb-1 h-auto w-full overflow-clip rounded-t-md group-focus-visible/season:rounded-b-none group-hover/season:rounded-b-none aspect-backdrop bg-auto-1"},Ae={class:"transitioning hover:scale-110",style:{"--stroke-width":"1"}},He={key:0,class:"absolute bottom-0 left-0 z-40 mb-3 w-full px-3"},Re=["id"],Ke=["id"],Ee={class:"grid w-full items-stretch gap-1 rounded-b-md p-2 transitioning text-left"},Ge=["title"],Me=["title"],Oe={class:"relative mb-1 h-auto w-full overflow-clip rounded-t-md group-focus-visible/season:rounded-b-none group-hover/season:rounded-b-none aspect-backdrop bg-auto-1"},Ze={class:"transitioning hover:scale-110",style:{"--stroke-width":"1"}},Je={key:0,class:"absolute bottom-0 left-0 z-40 mb-3 w-full px-3"},Qe=["id"],We=["id"],Xe={class:"grid w-full items-stretch gap-1 rounded-b-md p-2 transitioning text-left"},Ye=["title"],et=["title"],ye=D({__name:"SeasonCard",props:{data:{type:Object,required:!0},suffix:{type:String,required:!1,default:""}},setup(e){const t=e;return(P,g)=>{var r,o,m,b,v,l,i,c,u,x,y,w,k,$,_,C,n,S,F,U,j,A,H,R,K,E,G,M,O,Z;const a=Ve("RouterLink");return(r=e.data)!=null&&r.id&&((o=e.data)!=null&&o.available)?(f(),z(a,{key:0,id:(m=e.data)==null?void 0:m.id,class:B(`frosting border-0 border-[rgb(var(--color-focus))] flex flex-col h-auto items-center group/season focus-shift focus-outline transition-all duration-200 overflow-clip relative !rounded-lg select-none shadow-[0px_0px_0_1px_rgb(var(--color-focus,var(--color-theme-6))/70%)] w-full z-0 bg-auto-1/12  text-slate-lightA-12/90  dark:text-slate-darkA-12/80 ${(b=e.data)!=null&&b.available?"cursor-pointer":"cursor-not-allowed"}`),onfocus:d(me)(),style:V(`--color-focus: ${d(fe)((l=(v=t.data)==null?void 0:v.color_palette)==null?void 0:l.still).replace(/,/gu," ").replace(")","").replace("rgb(","")};`),"data-card":"true",to:(i=e.data)!=null&&i.available?(c=e.data)==null?void 0:c.link:"#"},{default:q(()=>{var N,J,Q,W,X,Y,ee,te,ae,le,se,oe,ie,re,ne,de,ce,ue;return[s("div",je,[h(he,{path:(N=e.data)==null?void 0:N.still,title:(J=e.data)==null?void 0:J.title,"color-palette":(W=(Q=e.data)==null?void 0:Q.color_palette)==null?void 0:W.still,class:"h-40",size:660,aspect:"backdrop","class-name":"pointer-events-none absolute z-20 flex h-full w-full select-none object-cover transitioning trickle-div",type:"image"},null,8,["path","title","color-palette"]),s("div",{class:B(`absolute inset-0 z-30 grid w-full text-white place-items-center group-focus-visible/season:bg-black opacity-0 group-focus-visible/season:opacity-100 transitioning group-hover/season:opacity-100 [background:radial-gradient(75%_50%_at_50%_50%,_rgba(0,_0,_0,_0.40)_0%,_rgba(0,_0,_0,_0.00)_100%),_rgba(0,_0,_0,_0.09)] ${(X=e.data)!=null&&X.available?"":"hidden"}`)},[s("div",Ae,[h(xe,{icon:"playCircle","class-name":"w-20",stroke:"1"})])],2),(Y=e.data)!=null&&Y.progress?(f(),I("div",He,[s("div",{id:`episode-${(ee=e.data)==null?void 0:ee.id}-slider-container`,class:"relative z-40 flex h-1 w-full overflow-clip rounded-full pt-2 pr-8 bg-gray-dark-12"},[s("div",{id:`episode-${(te=e.data)==null?void 0:te.id}-progress-bar`,class:"absolute top-0 left-0 h-full bg-[rgb(var(--color-focus))]",style:V({width:((ae=e.data)==null?void 0:ae.progress)>=99?"100%":`${(le=e.data)==null?void 0:le.progress}%`})},null,12,Ke)],8,Re)])):T("",!0)]),s("div",Ee,[s("p",{class:"z-10 w-auto flex-shrink-0 flex-grow-0 self-stretch text-2xs sm:text-sm font-bold !leading-5 h-11 line-clamp-2 sm:line-clamp-1",title:`${(se=e.data)!=null&&se.episode_number?`${(oe=e.data)==null?void 0:oe.episode_number} - `:""}${(ie=e.data)==null?void 0:ie.title}`},p((re=e.data)!=null&&re.episode_number?`${(ne=e.data)==null?void 0:ne.episode_number} - `:"")+p((de=e.data)==null?void 0:de.title),9,Ge),s("p",{class:"z-10 h-8 w-auto flex-shrink-0 flex-grow-0 self-stretch hidden sm:flex text-xs min-h-8 line-clamp-2 leading-[1.2] text-auto-12/80",title:(ce=e.data)==null?void 0:ce.overview},p((ue=e.data)==null?void 0:ue.overview),9,Me)])]}),_:1},8,["id","class","onfocus","style","to"])):(u=e.data)!=null&&u.id?(f(),I("div",{key:1,class:B(`border-0 border-[rgb(var(--color-focus))] flex flex-col h-auto items-center group/season focus-shift focus-outline transition-all duration-200 overflow-clip relative !rounded-lg select-none shadow-[0px_0px_0_1px_rgb(var(--color-focus,var(--color-theme-6))/70%)] w-full z-0 bg-auto-1/12 ${(x=e.data)!=null&&x.available?"cursor-pointer":"cursor-not-allowed"}`),style:V(`--color-focus: ${d(fe)((w=(y=t.data)==null?void 0:y.color_palette)==null?void 0:w.still).replace(/,/gu," ").replace(")","").replace("rgb(","")};`),"data-card":"true",onFocus:g[0]||(g[0]=N=>d(me)())},[s("div",Oe,[h(he,{path:(k=e.data)==null?void 0:k.still,title:($=e.data)==null?void 0:$.title,"color-palette":(C=(_=e.data)==null?void 0:_.color_palette)==null?void 0:C.still,class:"h-40",size:660,aspect:"backdrop","class-name":"pointer-events-none absolute z-20 flex h-full w-full select-none object-cover transitioning trickle-div",type:"image"},null,8,["path","title","color-palette"]),s("div",{class:B(`absolute inset-0 z-30 grid w-full text-white place-items-center group-focus-visible/season:bg-black opacity-0 group-focus-visible/season:opacity-100 transitioning group-hover/season:opacity-100 [background:radial-gradient(75%_50%_at_50%_50%,_rgba(0,_0,_0,_0.40)_0%,_rgba(0,_0,_0,_0.00)_100%),_rgba(0,_0,_0,_0.09)] ${(n=e.data)!=null&&n.available?"":"hidden"}`)},[s("div",Ze,[h(xe,{icon:"playCircle","class-name":"w-20",stroke:"1"})])],2),(S=e.data)!=null&&S.progress?(f(),I("div",Je,[s("div",{id:`episode-${(F=e.data)==null?void 0:F.id}-slider-container`,class:"relative z-40 flex h-1 w-full overflow-clip rounded-full pt-2 pr-8 bg-gray-dark-12"},[s("div",{id:`episode-${(U=e.data)==null?void 0:U.id}-progress-bar`,class:"absolute top-0 left-0 h-full bg-[rgb(var(--color-focus))]",style:V({width:((j=e.data)==null?void 0:j.progress)>=99?"100%":`${(A=e.data)==null?void 0:A.progress}%`})},null,12,We)],8,Qe)])):T("",!0)]),s("div",Xe,[s("p",{class:"z-10 w-auto flex-shrink-0 flex-grow-0 self-stretch text-sm font-bold !leading-5 line-clamp-1",title:`${(H=e.data)!=null&&H.episode_number?`${(R=e.data)==null?void 0:R.episode_number} - `:""}${(K=e.data)==null?void 0:K.title}`},p((E=e.data)!=null&&E.episode_number?`${(G=e.data)==null?void 0:G.episode_number} - `:"")+p((M=e.data)==null?void 0:M.title),9,Ye),s("p",{class:"z-10 h-8 w-auto flex-shrink-0 flex-grow-0 self-stretch text-xs min-h-8 line-clamp-2 leading-[1.2] text-auto-12/80",title:(O=e.data)==null?void 0:O.overview},p((Z=e.data)==null?void 0:Z.overview),9,et)])],38)):T("",!0)}}}),bt=D({__name:"SeasonCarousel",props:{data:{type:Array,required:!0},type:{type:String,required:!1,default:"poster"},limitCardCountBy:{type:Number,required:!1}},setup(e){var b,v;const t=e,{t:P}=Be();function g(l){}let a=(b=t.data)==null?void 0:b.findIndex(l=>l.season_number===1);a===-1&&(a=0);const r=((v=t.data)==null?void 0:v.map((l,i)=>({index:i,id:l.id,name:`${l.season_number} - ${l.title}`,season_number:l.season_number,episodes:l.episodes})))??[],o=L(r[a]);function m(){var i;const l=(i=document.querySelector(".swiper-undefined"))==null?void 0:i.swiper;l==null||l.slideTo(0,300)}return Le(o,m),(l,i)=>(f(),z(De,{index:o.value.season_number,"limit-card-count-by":e.limitCardCountBy,type:e.type},{selector:q(()=>[h(Fe,{id:"season-selector",modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=c=>o.value=c),disabled:d(r).length===1,items:d(r),"option-label":"title",class:"min-w-[21rem] ml-3",label:"",variant:"normal"},null,8,["modelValue","disabled","items"])]),default:q(()=>{var c;return[((c=o.value.episodes)==null?void 0:c.length)===0?(f(),z(d(pe),{key:0,class:"flex sm:p-1 sm:pl-0"},{default:q(()=>[(f(),z(ye,{id:"item-0",key:0,data:{id:1,title:d(P)("To be announced"),season_number:null,episode_number:null,available:!1,overview:"",airDate:"",still:"",link:"",color_palette:{still:{darkVibrant:"",lightVibrant:""}},progress:null},onclick:()=>{}},null,8,["data"]))]),_:1})):(f(!0),I(Te,{key:1},Ne(o.value.episodes,u=>(f(),z(d(pe),{key:u.id,class:"flex sm:p-1 sm:pl-0"},{default:q(()=>[h(ye,{id:`item-${u.id}`,data:u,onclick:()=>void 0},null,8,["id","data","onclick"])]),_:2},1024))),128))]}),_:1},8,["index","limit-card-count-by","type"]))}});export{bt as _,mt as a};
