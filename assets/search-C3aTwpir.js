import{An as a,Lt as f,Tt as _,bn as i}from"./index-CymNhKD_.js";import{v as m}from"./client-CxRn8_4O.js";import{t as b}from"./currentServer-DzE7mepP.js";import{o as d}from"./config-BZ-AEJ_J.js";import{h as g,l as y}from"./core-9rxtqojv.js";import{s as R}from"./user-DlzWNC9W.js";_();const n=a(!1),p=a("video"),t=a("");var c=a([]);const S=f(()=>c.value);i(g(t,700),e=>{if(e===""){c.value=[];return}n.value=!0;const s=`${b.value?.serverBaseUrl}/api/v1/music/search?query=${e}`;fetch(s,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${R.value?.accessToken}`}}).then(u=>u.json()).then(u=>{c.value=u.data,n.value=!1})});const r=a(""),v=a(!1);var o=a([]);const T=f(()=>o.value);var $=g(r,700),l=a(1);i($,e=>{if(e===""){o.value=[];return}v.value=!1,n.value=!0,l.value=1;const s=`https://api.themoviedb.org/3/search/multi?api_key=${d}&language=${m.language}&query=${e}&page=${l.value}&include_adult=false`;fetch(s).then(u=>u.json()).then(u=>{o.value=u.results,v.value=u.total_pages>1,n.value=!1})});function V(){l.value+=1;const e=`https://api.themoviedb.org/3/search/multi?api_key=${d}&language=${m.language}&query=${$.value}&page=${l.value}&include_adult=false`;fetch(e).then(s=>s.json()).then(s=>{o.value=[...o.value,...s.results],s.results.length===0?v.value=!1:v.value=s.total_pages>l.value})}var{stop:E}=y(a(null),([{isIntersecting:e}],s)=>{e&&V()});const L=a(),h=a(""),w=f(()=>p.value==="video"?T.value:S.value);i(p,e=>{e==="video"?(t.value="",r.value=h.value):(r.value="",t.value=h.value)});i(h,e=>{p.value==="video"?(r.value=e,t.value=""):(r.value="",t.value=e)});export{n as a,T as c,L as i,v as n,p as o,S as r,h as s,V as t};
