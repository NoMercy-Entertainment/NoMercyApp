import{C as n,Ct as a,J as x,K as r,S as R,T as l,U as h,W as V,c as z,g as i,it as y,j as F,k as U,mt as u,ot as m,w as k,wt as C,x as $}from"./i18n-fABvX7Av.js";import"./ionic-DIYphHxf.js";import{C as K,I as L,U as W,W as j,_ as q}from"./vue-core-hXf_Oh5G.js";import"./dist-CJipjyJM.js";import"./query-BsKzQ1i8.js";import"./esm-D1nPlPuN.js";import{Rn as w,Vi as b,Y as E,gi as G,ia as J,k as M,zn as Y}from"./index-D70HP9b0.js";import{n as A}from"./useInfiniteServerClient-CqYT9R1N.js";import{t as H}from"./ScrollContainer-BQE8uB0u.js";import"./CardIndicator-XmtLhctD.js";import{t as O}from"./NMCard-DtDu3kZU.js";import{t as Q}from"./NotFound-DJzjg6yT.js";import{t as X}from"./PersonCard-CmkjXwgO.js";import{n as Z,t as ee}from"./EmptyCard-DIzB0Kym.js";z();W();var te="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",ae="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",re=F({__name:"Desktop",setup(oe){const d=j(),{data:o,fetchNextPage:g,hasNextPage:_,isError:N}=A({queryKey:["libraries",d?.params.id??d.name],limit:20,keepForever:!0});h(()=>{G(),w(null),Y(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),y(o,t=>{t&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const B=$(()=>{const t=o.value?.pages?.[0]?.data?.[0];return t&&J.value&&t.media_type!=="person"&&t.media_type!=="genres"});V(()=>{stop(),w(null)});const S=u(),I=u();h(()=>{I.value=d.params.id??d.name,_.value&&(o?.value?.pages?.length??0)<10&&g(),document.addEventListener("scrollToDiv",t=>{S.value?.scrollTo({top:t.detail.top-100,behavior:"smooth"})})}),L(()=>{document.dispatchEvent(new Event("indexer"))}),y(o,t=>{t&&_.value&&t?.pages?.length<10&&g()});const P=u(),T=u();function c(t,f){P.value=f,T.value.show(t)}return(t,f)=>(r(),n(a(K),null,{default:m(()=>[U(a(q),{fullscreen:!0},{default:m(()=>[a(N)&&!a(o)?.pages?(r(),n(Q,{key:0})):(r(),n(H,{key:1,id:a(M).currentRoute.value.fullPath,"auto-hide":!0,static:!0},{default:m(()=>[(r(),l("div",{key:a(M).currentRoute.value.params?.id,class:C([{"pb-24":a(b)&&!a(E),"pb-40":a(b)&&a(E)},"z-0 flex flex-col gap-4 rounded-3xl border-0 p-4 w-available scrollbar-none border-surface-3 transform-gpu will-change-auto"])},[R("div",{class:C(`grid w-full gap-4 scroll-smooth music-showing:pb-0 whitespace-pre ${B.value?te:ae}`)},[(r(!0),l(i,null,x(a(o)?.pages??[],(v,D)=>(r(),l(i,{key:D},[v.data.length>0?(r(!0),l(i,{key:0},x(v.data??[],(e,p)=>(r(),l(i,null,[e?.media_type==="tv"||e?.media_type==="movie"||e?.media_type==="collection"||e?.media_type==="specials"?(r(),n(O,{key:e.id,data:e,index:p,onContextMenu:s=>c(s,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="person"?(r(),n(X,{key:`${e.id}_person`,data:e,index:p,onContextMenu:s=>c(s,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="genres"?(r(),n(Z,{key:`${e.id}_genres`,data:e,index:p,onContextMenu:s=>c(s,e)},null,8,["data","index","onContextMenu"])):k("",!0)],64))),256)):a(o)?.pages?.[0]?.data?.length===0?(r(),n(ee,{key:1})):k("",!0)],64))),128))],2)],2))]),_:1},8,["id"]))]),_:1})]),_:1}))}}),he=re;export{he as default};
