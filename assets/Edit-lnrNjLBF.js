import{$ as w,At as V,C as J,Et as le,K as Y,O as h,S as u,T as g,Y as _,Z as z,_t as i,c as te,g as G,j as se,k as o,lt as s,st as N,w as H}from"./i18n-DBb78QAI.js";import"./ionic-DNKsarlx.js";import{I as me,P as _e}from"./vue-core-C9HAaO_1.js";import{w as be}from"./primevue-CDzFprnl.js";import{c as Ve}from"./query-Dwz_k4KB.js";import{Zi as ye,k as ue,xi as ae}from"./index-A9ZXfM_l.js";import"./useInfiniteServerClient-CfrVy_UX.js";import{t as oe}from"./useServerClient-D7utCp4C.js";import"./ScrollContainer-COxBM-C8.js";import"./useMounted-BpvfXUCe.js";import"./RipperOverlay-Co5yS9RL.js";import"./ripperSocket-BF5Gj0oB.js";import"./FloatingBackButton-CFBsz6Nk.js";import{t as ge}from"./DashboardLayout-_Yj4z20y.js";_e();te();var we={class:"my-6 text-sm text-surface-10"},he=se({__name:"DeleteEncoderProfileModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},name:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},setup(k){const P=k,U=Ve(),B=be(),p=i(!1);async function t(){if(!p.value){p.value=!0;try{const{data:v}=await ye().delete(`dashboard/encoderprofiles/${P.id}`);B.add({severity:v.status==="ok"?"success":"error",summary:ae(v.status==="ok"?"Success":"Error"),detail:ae(v.message,...v.args??[]),life:5e3}),U.invalidateQueries({queryKey:["dashboard","encoderProfiles"]}),P.close(),P.noRedirect||ue.back()}catch{p.value=!1}}}return(v,W)=>{const A=w("Button"),E=w("Modal");return _(),J(E,{close:k.close,open:k.open,params:{profile:P.name},"max-width":"max-w-xl",title:"Delete encoder profile {{profile}}"},{actions:s(()=>[o(A,{id:"yes",disabled:p.value,onclick:t,color:"red","end-icon":"trash",type:"button",variant:"contained"},{default:s(()=>[h(V(p.value?v.$t("Deleting..."):v.$t("Delete")),1)]),_:1},8,["disabled"]),o(A,{id:"no",disabled:p.value,onclick:k.close,color:"auto",type:"button",variant:"text"},{default:s(()=>[h(V(v.$t("Cancel")),1)]),_:1},8,["disabled","onclick"])]),default:s(()=>[u("div",we,V(v.$t("Are you sure you want to delete this encoder profile?")),1)]),_:1},8,["close","open","params"])}}}),Pe=he;te();var Ce={class:"block whitespace-nowrap text-sm font-medium"},$e={key:0,class:"grid w-full grid-cols-12 gap-4"},ke={key:1,class:"flex w-full flex-col"},Ue={class:"flex w-full justify-between"},Se={class:"block whitespace-nowrap text-sm font-medium"},Le={class:"grid h-auto w-full grid-cols-8 flex-wrap gap-2"},Ne=["for"],Ae=["for"],De=["for"],Be=["for"],Ee=["for"],Me=["for"],qe=["for"],Re=["for"],Te=["for"],Fe={class:"flex w-full justify-between"},Ie={class:"mt-2 block whitespace-nowrap text-sm font-medium"},je={class:"grid h-auto w-full grid-cols-8 flex-wrap gap-2"},Ke=["for"],Oe=["for"],Qe={class:"flex w-full justify-between"},Ze={class:"mt-2 block whitespace-nowrap text-sm font-medium"},Ye={class:"grid h-auto w-full grid-cols-8 flex-wrap gap-2"},ze=["for"],Ge=se({__name:"Edit",setup(k){const P=me(),{data:U,error:B}=oe({path:"dashboard/encoderProfiles",queryKey:["dashboard","encoderProfiles"]}),{data:p}=oe({path:"dashboard/encoderProfiles/containers",queryKey:["dashboard","videoContainers"]}),t=i();N(U,a=>{a&&(t.value=a.find(e=>e.id===P.params.id))}),Y(()=>{U.value&&(t.value=U.value.find(a=>a.id===P.params.id))});const v=i(!1),W=()=>{v.value=!0},A=()=>{v.value=!1},E=()=>{ue.back()},ne=()=>{},S=i([{label:"audio",value:"audio"},{label:"video",value:"video"},{label:"image",value:"image"}]),M=i(t.value?.name),L=i(S.value?.find(a=>a.value===t.value?.type)),f=i(p.value?.find(a=>a.type===t.value?.type)),m=i([]),q=i([]),R=i([]),T=i([]),de=i([]),F=i([]),I=i([]),D=i([]),j=i([]),K=i([]),O=i([]),C=i([]),Q=i([]),$=i([]),Z=i([]),ie=()=>{m.value.push({})},re=()=>{C.value.push({})},ce=()=>{$.value.push({})},ve=a=>{m.value.splice(a,1)},pe=a=>{C.value.splice(a,1)},fe=a=>{$.value.splice(a,1)};Y(()=>{L.value=S.value.find(a=>a.value===t.value?.type),f.value=p.value?.find(a=>a.type===t.value?.type)}),N(t,a=>{a&&(M.value=a.name)}),N(p,a=>{a&&(f.value=a.find(e=>e.value===t.value.container))});const X=a=>{a&&(console.raw("container",a,S.value),L.value=S.value.find(e=>e.value===a.type),m.value=t.value.videoProfiles?.map(e=>a.available_video_codecs.find(n=>n.value===e.codec))??[],C.value=t.value.audioProfiles?.map(e=>a.available_audio_codecs.find(n=>n.value===e.codec))??[],$.value=t.value.subtitleProfiles?.map(e=>a.available_subtitle_codecs.find(n=>n.value===e.codec))??[],q.value=t.value.videoProfiles?.map(e=>a.available_resolutions.find(n=>n.width===e.width))??[],R.value=t.value.videoProfiles.map(e=>m.value.find(n=>n.value===e.codec)?.color_spaces.find(n=>n.value===e.colorSpace)),F.value=t.value.videoProfiles.map(e=>m.value.find(n=>n.value===e.codec)?.tunes.find(n=>n.value===e.tune)),I.value=t.value.videoProfiles.map(e=>m.value.find(n=>n.value===e.codec)?.profiles.find(n=>n.value===e.profile)),D.value=t.value.videoProfiles.map(e=>m.value.find(n=>n.value===e.codec)?.presets.find(n=>n.value===e.preset)),console.log("presets",D.value),Z.value=C.value.map(e=>e?.available_languages??[]),Q.value=$.value.map(e=>e?.available_languages??[]),T.value=t.value.videoProfiles?.map(e=>e.crf)??[],O.value=t.value.videoProfiles?.map(e=>e.bitrate)??[],j.value=t.value.videoProfiles?.map(e=>e.playlistName)??[],K.value=t.value.videoProfiles?.map(e=>e.segmentName)??[],de.value=t.value.videoProfiles?.map(e=>e.width)??[])};return N(f,X),Y(()=>{X(f.value),f.value=p.value?.find(a=>a.value===t.value.container)}),N(m,a=>{a&&console.log("videoCodecs",a)}),(a,e)=>{const n=w("InputText"),r=w("FloatLabel"),b=w("Select"),y=w("Button"),x=w("InputNumber"),ee=w("MultiSelect");return _(),J(ge,{error:le(B),gridStyle:4,params:{name:t.value?.name},title:"Encoder profile: {{name}}"},{cta:s(()=>[...e[3]||(e[3]=[])]),actions:s(()=>[o(y,{id:"remove",class:"children:text-gray-400 children:transition-colors children:duration-100 children:hover:text-red-dark-8",color:"auto",startIcon:"folderRemove",type:"button",variant:"text",onClick:W},{default:s(()=>[h(V(a.$t("Remove")),1)]),_:1}),o(y,{id:"cancel",color:"white",type:"button",variant:"text",onClick:E},{default:s(()=>[h(V(a.$t("Cancel")),1)]),_:1}),o(y,{id:"save",class:"ml-auto",color:"theme",form:"myForm",type:"submit",onClick:ne},{default:s(()=>[h(V(a.$t("Save")),1)]),_:1})]),default:s(()=>[u("span",Ce,V(a.$t("Profiles settings")),1),t.value?(_(),g("div",$e,[o(r,{class:"col-span-3",variant:"on"},{default:s(()=>[o(n,{id:"name",modelValue:M.value,"onUpdate:modelValue":e[0]||(e[0]=c=>M.value=c),class:"w-full",name:"Name"},null,8,["modelValue"]),e[4]||(e[4]=u("label",{for:"name"},"Name",-1))]),_:1}),o(r,{class:"col-span-2",variant:"on"},{default:s(()=>[o(b,{id:"type",modelValue:L.value,"onUpdate:modelValue":e[1]||(e[1]=c=>L.value=c),options:S.value,class:"w-full",optionLabel:"label"},null,8,["modelValue","options"]),e[5]||(e[5]=u("label",{for:"type"},"Media type",-1))]),_:1}),o(r,{class:"col-span-2",variant:"on"},{default:s(()=>[o(b,{id:"container",modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=c=>f.value=c),options:le(p)?.filter(c=>c.type===L.value?.value)??[],class:"w-full",optionLabel:"label"},null,8,["modelValue","options"]),e[6]||(e[6]=u("label",{for:"container"},"Container",-1))]),_:1})])):H("",!0),t.value?(_(),g("div",ke,[u("div",Ue,[u("span",Se,V(a.$t("Video Profiles")),1),o(y,{id:"addVideoProfile",type:"button",onClick:ie},{default:s(()=>[...e[7]||(e[7]=[h("Add Video Profile ",-1)])]),_:1})]),(_(!0),g(G,null,z(m.value,(c,l)=>(_(),g("div",{key:l,class:"m-2 mt-2 ml-0 flex w-full rounded-md border-white/5 p-4 border-1 odd:bg-surface-1/5 even:bg-surface-2/2"},[u("div",Le,[o(r,{class:"col-span-2",variant:"on"},{default:s(()=>[o(b,{id:`videoProfiles_${l}`,modelValue:m.value[l],"onUpdate:modelValue":d=>m.value[l]=d,options:f.value?.available_video_codecs??[],class:"col-span-2",label:"Codec",optionLabel:"label"},null,8,["id","modelValue","onUpdate:modelValue","options"]),u("label",{for:`videoProfiles_${l}`},"Codec",8,Ne)]),_:2},1024),o(r,{class:"col-span-2",variant:"on"},{default:s(()=>[o(b,{id:`resolutions_${l}`,modelValue:q.value[l],"onUpdate:modelValue":d=>q.value[l]=d,options:f.value?.available_resolutions??[],class:"col-span-2",label:"Resolution",optionLabel:"name"},null,8,["id","modelValue","onUpdate:modelValue","options"]),u("label",{for:`resolutions_${l}`},"Resolution",8,Ae)]),_:2},1024),o(r,{class:"col-span-2",variant:"on"},{default:s(()=>[o(b,{id:`colorSpaces_${l}`,modelValue:R.value[l],"onUpdate:modelValue":d=>R.value[l]=d,options:c?.color_spaces??[],class:"col-span-2",optionLabel:"label"},null,8,["id","modelValue","onUpdate:modelValue","options"]),u("label",{for:`colorSpaces_${l}`},"Colorspace",8,De)]),_:2},1024),o(r,{class:"col-span-2",variant:"on"},{default:s(()=>[o(b,{id:`profiles_${l}`,modelValue:I.value[l],"onUpdate:modelValue":d=>I.value[l]=d,options:c?.profiles??[],class:"col-span-2",l:"",optionLabel:"label"},null,8,["id","modelValue","onUpdate:modelValue","options"]),u("label",{for:`profiles_${l}`},"Profile",8,Be)]),_:2},1024),o(r,{class:"col-span-2",variant:"on"},{default:s(()=>[o(b,{id:`presets_${l}`,modelValue:D.value[l],"onUpdate:modelValue":d=>D.value[l]=d,options:c?.presets??[],class:"col-span-2",l:"",optionLabel:"label"},null,8,["id","modelValue","onUpdate:modelValue","options"]),u("label",{for:`presets_${l}`},"Preset",8,Ee)]),_:2},1024),o(r,{class:"col-span-2",variant:"on"},{default:s(()=>[o(b,{id:`tunes_${l}`,modelValue:F.value[l],"onUpdate:modelValue":d=>F.value[l]=d,options:c?.tunes??[],class:"col-span-2",optionLabel:"label"},null,8,["id","modelValue","onUpdate:modelValue","options"]),e[8]||(e[8]=u("label",{for:"`tunes_${index}`"},"Tune",-1))]),_:2},1024),o(r,{class:"col-span-2",variant:"on"},{default:s(()=>[o(x,{id:`crfs_${l}`,modelValue:T.value[l],"onUpdate:modelValue":d=>T.value[l]=d,max:51,min:0,class:"w-full",type:"number"},null,8,["id","modelValue","onUpdate:modelValue"]),u("label",{for:`crfs_${l}`},"CRF",8,Me)]),_:2},1024),o(r,{class:"col-span-2",variant:"on"},{default:s(()=>[o(x,{id:`bitrates_${l}`,modelValue:O.value[l],"onUpdate:modelValue":d=>O.value[l]=d,max:1e6,min:0,class:"w-full",type:"number"},null,8,["id","modelValue","onUpdate:modelValue"]),u("label",{for:`bitrates_${l}`},"Bitrate",8,qe)]),_:2},1024),o(r,{class:"col-span-4",variant:"on"},{default:s(()=>[o(n,{id:`segmentNames_${l}`,modelValue:K.value[l],"onUpdate:modelValue":d=>K.value[l]=d,class:"w-full"},null,8,["id","modelValue","onUpdate:modelValue"]),u("label",{for:`segmentNames_${l}`},"Segment name",8,Re)]),_:2},1024),o(r,{class:"col-span-4",variant:"on"},{default:s(()=>[o(n,{id:`playlistNames_${l}`,modelValue:j.value[l],"onUpdate:modelValue":d=>j.value[l]=d,class:"w-full"},null,8,["id","modelValue","onUpdate:modelValue"]),u("label",{for:`playlistNames_${l}`},"Playlist name",8,Te)]),_:2},1024)]),o(y,{id:"addVideoProfile",class:"col-span-2","end-icon":"trash",type:"button",variant:"text",onClick:()=>ve(l)},null,8,["onClick"])]))),128)),u("div",Fe,[u("span",Ie,V(a.$t("Audio Profiles")),1),o(y,{id:"addAudioProfile",type:"button",onClick:re},{default:s(()=>[...e[9]||(e[9]=[h("Add Audio Profile ",-1)])]),_:1})]),(_(!0),g(G,null,z(C.value,(c,l)=>(_(),g("div",{key:l,class:"m-2 mt-2 ml-0 flex w-full rounded-md border-white/5 p-4 border-1 odd:bg-surface-1/5 even:bg-surface-2/2"},[u("div",je,[o(r,{class:"col-span-2",variant:"on"},{default:s(()=>[o(b,{id:`audioCodecs_${l}`,modelValue:C.value[l],"onUpdate:modelValue":d=>C.value[l]=d,options:f.value?.available_audio_codecs??[],class:"col-span-2",optionLabel:"label"},null,8,["id","modelValue","onUpdate:modelValue","options"]),u("label",{for:`audioCodecs_${l}`},"Codec",8,Ke)]),_:2},1024),o(r,{class:"col-span-2",variant:"on"},{default:s(()=>[o(ee,{id:`allowedAudioLanguages_${l}`,modelValue:Q.value[l],"onUpdate:modelValue":d=>Q.value[l]=d,options:c?.available_languages??[],class:"col-span-2",optionLabel:"label"},null,8,["id","modelValue","onUpdate:modelValue","options"]),u("label",{for:`allowedAudioLanguages_${l}`},"Allowed languages",8,Oe)]),_:2},1024)]),o(y,{id:"addVideoProfile",class:"col-span-2","end-icon":"trash",type:"button",variant:"text",onClick:()=>pe(l)},null,8,["onClick"])]))),128)),u("div",Qe,[u("span",Ze,V(a.$t("Subtitle Profiles")),1),o(y,{id:"addSubtitleProfile",type:"button",onClick:ce},{default:s(()=>[...e[10]||(e[10]=[h("Add Subtitle Profile ",-1)])]),_:1})]),(_(!0),g(G,null,z($.value,(c,l)=>(_(),g("div",{key:l,class:"m-2 mt-2 ml-0 flex w-full rounded-md border-white/5 p-4 border-1 odd:bg-surface-1/5 even:bg-surface-2/2"},[u("div",Ye,[o(r,{class:"col-span-2",variant:"on"},{default:s(()=>[o(b,{id:"subtitleProfiles",modelValue:$.value[l],"onUpdate:modelValue":d=>$.value[l]=d,options:f.value?.available_subtitle_codecs??[],class:"col-span-2",optionLabel:"label"},null,8,["modelValue","onUpdate:modelValue","options"]),e[11]||(e[11]=u("label",{for:"subtitleProfiles"},"Codec",-1))]),_:2},1024),o(r,{class:"col-span-2",variant:"on"},{default:s(()=>[o(ee,{id:`allowedSubtitleLanguages_${l}`,modelValue:Z.value[l],"onUpdate:modelValue":d=>Z.value[l]=d,options:c?.available_languages??[],class:"col-span-2",multiple:"",optionLabel:"label"},null,8,["id","modelValue","onUpdate:modelValue","options"]),u("label",{for:`allowedSubtitleLanguages_${l}`},"Allowed languages",8,ze)]),_:2},1024)]),o(y,{id:"addVideoProfile",class:"col-span-2","end-icon":"trash",type:"button",variant:"text",onClick:()=>fe(l)},null,8,["onClick"])]))),128))])):H("",!0),t.value?.id?(_(),J(Pe,{key:2,id:t.value?.id??"",close:A,name:t.value?.name??"",open:v.value},null,8,["id","name","open"])):H("",!0)]),_:1},8,["error","params"])}}}),il=Ge;export{il as default};
