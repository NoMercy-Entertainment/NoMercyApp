import{$ as M,D as $,Dn as q,H as A,Ht as j,In as _,Qn as T,Rn as L,Sn as N,Tn as s,Wn as n,Y as P,Yt as R,Zn as r,cn as g,in as S,jt as V,nn as x,rn as E,tn as u,un as D,x as O}from"./index-04Sh3wNb.js";import"./dist-CVoPesok.js";import"./esm-BuFVrMo0.js";import"./esm-9iWgK55i.js";import"./esm-cDzTb79E.js";import"./esm-BfF1RlcU.js";import"./dist-B3n7-doU.js";import"./focus-visible-CHAJCf_J.js";import"./index5-B30D6T27.js";import"./client-rtF7IPPI.js";import"./ionic-global--aoJHCDL.js";import"./hardware-back-button-h528z6zo.js";import"./index3-CSo3jo06.js";import"./helpers-CXS86XKs.js";import"./index6-CZ6rqL_0.js";import"./index8-BpkFXja0.js";import"./keyboard-cU79cwdW.js";import"./index2-op38TIl9.js";import"./ios.transition-C8T7q-Bo.js";import"./keyboard2-DETZ41vp.js";import"./md.transition-BqH5iNQr.js";import"./dir-BUtgAzbR.js";import"./basecomponent-Dw-Pzf3B.js";import"./classnames-DtEYS8u9.js";import"./button-Bwdcz6Ds.js";import"./baseicon-pCfUe6Zj.js";import{l as W,m as c,o as y,p as d}from"./ui-BT6EUdI0.js";import"./client-DMa-uSBE.js";import{v as Y,x as Q}from"./currentServer-B7-kbkE-.js";import"./config-BOA2pGQM.js";import"./esm-CcKFjObu.js";import"./global-gyhCjh_P.js";import"./esm-BuRgllmc.js";import"./user-C1ciKa7-.js";import"./serverClient-FHPKIHPu.js";import{t as Z}from"./router-C_xBvmya.js";import"./utils-D5DD-7jP.js";import"./useBaseQuery-CNJp2kAB.js";import"./useInfiniteServerClient-By5CuBlL.js";import"./SocketClient-DPmgFkP-.js";import"./useQueryClient-s6ZLwuD6.js";import"./useQuery-C7DDAmeN.js";import"./apiClient-Cw7f36ko.js";import"./notifications-Bi_dU6lP.js";import"./utils-CdenF_Jv.js";import"./bundle-mjs-Xm_uQvzT.js";import"./deviceInfo-Bcw3-ht5.js";import"./helpers-fSCF1qXj.js";import"./auth-DfyD43WY.js";import"./musicPlaylists-CCn4HshY.js";import"./contextMenuItems-kfaglZX4.js";import"./_plugin-vue_export-helper-B_iOTHZb.js";import"./AppLogoSquare-DJq6h5gt.js";import{t as G}from"./MoooomIcon-DNWQYuYD.js";import"./DropdownMenu-DlwBmVb0.js";import"./dist-iWIfSzlj.js";import{t as J}from"./useServerClient-CroZbKWw.js";import"./CoverImage-_aGqf_Rg.js";import"./MusicButton-OKP8kSIv.js";import"./BannerButton-BVJ9NTRE.js";import"./MediaLikeButton-Cg9WrOdx.js";import"./PlayerIcon-DPtv61Du.js";import{t as K}from"./Marquee-B69hKqb8.js";import"./BigPlayButton-BSACVqFp.js";import"./EqSpinner-DZk0vZKp.js";import{t as U}from"./NotFound-C4uzBqO2.js";import"./ShareButton-B9i6bcLG.js";import{i as X,n as ee,r as te,t as re}from"./TrackRow-pkDkuJkp.js";j();P();var oe={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},ae={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},le=D({__name:"Mobile",setup(ie){const b=M(),{data:e,isError:H}=J({path:b.fullPath}),B=n(null),k=n(),i=n("");_(e,t=>{Y(t?.name??null),p(t?.tracks??[],c.value,d.value,i.value),y(t?.color_palette?.cover)}),_(d,t=>{p(e.value?.tracks??[],c.value,t,i.value)}),_(c,t=>{p(e.value?.tracks??[],t,d.value,i.value)}),_(i,t=>{p(e.value?.tracks??[],c.value,d.value,t)});function p(t,a,l,o){const C=Q(t??[],a,l,W);o===""?k.value=C:k.value=C?.filter(w=>w.name?.toLowerCase().includes(o?.toLowerCase?.())||w.artist_track?.some(I=>I.name.toLowerCase().includes(o?.toLowerCase?.()))||w.album_track?.[0]?.name.toLowerCase().includes(o?.toLowerCase?.()))??[]}N(()=>{p(e?.value?.tracks??[],c.value,d.value,i.value),e.value?.color_palette?.cover&&y(e.value?.color_palette?.cover)}),A(()=>{p(e?.value?.tracks??[],c.value,d.value,i.value),e.value?.color_palette?.cover&&y(e.value?.color_palette?.cover)});function z(){Z.back()}const f=n(!1),F=n(!1),m=n(),h=n();function v(){const l=V("capacitor")?88:64,o=m.value?.$el?.getBoundingClientRect().top;if(!o){requestAnimationFrame(v);return}if(f.value=o<=170,F.value=o<=160,window.CSS.supports("container-type","scroll-state")){requestAnimationFrame(v);return}o===l?(m.value?.$el?.classList.add("!bg-focus"),m.value?.$el?.firstChild?.classList.add("!bg-surface-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")):(m.value?.$el?.classList.remove("!bg-focus"),m.value?.$el?.firstChild?.classList.remove("!bg-surface-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")),requestAnimationFrame(v)}return _(h,()=>{requestAnimationFrame(v)}),(t,a)=>(s(),x(r($),null,{default:L(()=>[g(r(O),{ref_key:"container",ref:h,"scroll-events":!0,onIonScroll:v},{default:L(()=>[r(H)&&!r(e)?(s(),x(U,{key:0})):!r(b).params.id||r(b).params.id&&r(e)?.id===r(b).params.id?(s(),S("div",{key:1,ref_key:"main",ref:B,class:"flex flex-col h-auto overflow-x-clip w-available sm:rounded-2xl -mt-6 text-surface-12"},[g(te,{data:r(e)},null,8,["data"]),u("div",oe,[a[2]||(a[2]=u("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),u("div",{id:"navbar",class:T([{"opacity-0 pointer-events-none":!f.value,"opacity-100 pointer-events-auto":f.value},"fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-surface-11 dark:bg-surface-1 top-0 pt-4 transition-all duration-200"])},[a[1]||(a[1]=u("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-all duration-200 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),u("button",{class:"z-30 flex h-10 w-11 items-center justify-center rounded-md",onClick:z},[g(G,{icon:"arrowLeft"})]),u("div",{id:"navText",class:T([{"opacity-0 pointer-events-none":!f.value,"opacity-100 pointer-events-auto":f.value},"pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-all duration-200 w-[70%] overflow-clip text-xl"])},[g(K,{text:r(e)?.name},null,8,["text"])],2)],2),(s(),x(X,{key:r(e)?.id,data:r(e),filter:i.value,onFilterChange:a[0]||(a[0]=l=>i.value=l)},null,8,["data","filter"])),u("div",ae,[(s(),x(ee,{key:r(e)?.id,ref_key:"sortHeader",ref:m})),(s(!0),S(R,null,q(k.value,(l,o)=>(s(),x(re,{key:l.id+l?.favorite,data:l,"display-list":k.value,index:o},null,8,["data","display-list","index"]))),128))])])],512)):E("",!0)]),_:1},512)]),_:1}))}}),wt=le;export{wt as default};
