import{aw as $,b3 as j,b1 as A,dz as q,cU as o,I as G,az as J,bd as B,cy as t,b7 as Q,c8 as W,e as H,a7 as X,aB as n,o as M,et as Y,a as x,z as Z,ck as N,bF as ee}from"./index-16sqk8Bx.js";import{O as ae,A as se,S as le}from"./octopusPlugin-Dq5N_GTY.js";import{n as oe}from"./subtitles-octopus-_pTWOwcM.js";import{D as ue}from"./desktopUIPlugin-DvRPuxyl.js";import{K as te}from"./keyHandlerPlugin-Bho4MiSD.js";const ve=$({__name:"Desktop",setup(ne){var r,i,c;const O=j(),L={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:`${(r=A.value)==null?void 0:r.serverApiUrl}${O.fullPath}`,controlsTimeout:3e3,doubleClickDelay:500,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:(i=q.value)==null?void 0:i.accessToken,basePath:(c=A.value)==null?void 0:c.serverBaseUrl,forceTvMode:(o("android")||o("ios"))&&!o("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||o("capacitor"),renderAhead:100},e=G();return J(()=>{var p,d,v,g,f,m,b,P,k,y,w,h,S,U,C,I,T,_;e.value??(e.value=oe("player1").setup(L)),(p=e.value)==null||p.once("back",()=>{B.back()});const s=new ue;(d=e.value)==null||d.registerPlugin("desktopUI",s),(v=e.value)==null||v.usePlugin("desktopUI");const l=new ae;(g=e.value)==null||g.registerPlugin("octopus",l),(f=e.value)==null||f.usePlugin("octopus");const V=new se;(m=e.value)==null||m.registerPlugin("autoSkip",V),(b=e.value)==null||b.usePlugin("autoSkip");const F=new te;(P=e.value)==null||P.registerPlugin("keyHandler",F),(k=e.value)==null||k.usePlugin("keyHandler");const K=new le;(y=e.value)==null||y.registerPlugin("sync",K),(w=e.value)==null||w.usePlugin("sync"),(h=e.value)==null||h.once("play",()=>{var a;(a=e.value)==null||a.enterFullscreen()}),(S=e.value)==null||S.on("playlistComplete",()=>{var a;(a=e.value)==null||a.dispose(),B.back()}),(U=e.value)==null||U.once("back",()=>{}),(C=e.value)==null||C.on("play",()=>{t(!0)}),(I=e.value)==null||I.on("pause",()=>{t(!1)}),(T=e.value)==null||T.on("ready",()=>{var E;Q.stop();const a=new MutationObserver(R=>R.filter(u=>u.type==="childList").forEach(u=>{u.addedNodes.forEach(z=>{z instanceof HTMLElement&&z.tagName==="VIDEO"&&console.log("video removed")})})),D=(E=e.value)==null?void 0:E.getVideoElement();D&&a.observe(D,{childList:!0,subtree:!0})}),(_=e.value)==null||_.on("item",()=>{var a;(a=e.value)==null||a.play()})}),W(()=>{var s;(s=e.value)==null||s.dispose(),t(!1)}),(s,l)=>(M(),H(n(ee),null,{default:X(()=>[(M(),H(Y,{to:"body",keepAlive:!0},[x("div",{class:Z(["absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199",{"mb-28":n(N),"mb-0":!n(N)}])},l[0]||(l[0]=[x("div",{id:"player1",class:"group nomercyplayer"},null,-1)]),2)]))]),_:1}))}});export{ve as default};
//# sourceMappingURL=Desktop-B0hly0R6.js.map
