import{aw as g,ax as h,k as p}from"./index-4xkagrUD.js";/*!
  * vue-keycloak-js v3.0.3
  * @license ISC
  */let d=!1;const l=p(k()),A={install:function(t,o={}){if(d)return;d=!0;const n={config:window.__BASEURL__?`${window.__BASEURL__}/config`:"/config",init:{onLoad:"login-required"}},e=Object.assign({},n,o),s=v(e);if(s.hasError)throw new Error(`Invalid options given: ${s.error}`);if(t.config.globalProperties.$keycloak=g(l),!e.config)throw new Error("Keycloak config is required");R(e.config).then(a=>{y(a,l,e)}).catch(a=>{console.log(a)})}};function E(){return g(l)}function k(){return{ready:!1,authenticated:!1,userName:void 0,fullName:void 0,token:void 0,tokenParsed:void 0,logoutFn:void 0,loginFn:void 0,login:void 0,createLoginUrl:void 0,createLogoutUrl:void 0,createRegisterUrl:void 0,register:void 0,accountManagement:void 0,createAccountUrl:void 0,loadUserProfile:void 0,subject:void 0,idToken:void 0,idTokenParsed:void 0,realmAccess:void 0,resourceAccess:void 0,refreshToken:void 0,refreshTokenParsed:void 0,timeSkew:void 0,responseMode:void 0,responseType:void 0,hasRealmRole:void 0,hasResourceRole:void 0,keycloak:void 0}}async function y(t,o,n){const e=new h(t),{updateInterval:s,autoRefreshToken:a=!0}=n;function i(r=!1){o.authenticated=r,o.loginFn=e.login,o.login=e.login,o.createLoginUrl=e.createLoginUrl,o.createLogoutUrl=e.createLogoutUrl,o.createRegisterUrl=e.createRegisterUrl,o.register=e.register,o.keycloak=e,r&&(o.accountManagement=e.accountManagement,o.createAccountUrl=e.createAccountUrl,o.hasRealmRole=e.hasRealmRole,o.hasResourceRole=e.hasResourceRole,o.loadUserProfile=e.loadUserProfile,o.token=e.token,o.subject=e.subject,o.idToken=e.idToken,o.idTokenParsed=e.idTokenParsed,o.realmAccess=e.realmAccess,o.resourceAccess=e.resourceAccess,o.refreshToken=e.refreshToken,o.refreshTokenParsed=e.refreshTokenParsed,o.timeSkew=e.timeSkew,o.responseMode=e.responseMode,o.responseType=e.responseType,o.tokenParsed=e.tokenParsed,o.userName=e.tokenParsed.preferred_username,o.fullName=e.tokenParsed.name)}e.onReady=function(r){i(r),o.ready=!0,typeof n.onReady=="function"&&n.onReady(e,o)},e.onAuthSuccess=function(){let r;a&&(r=setInterval(()=>{e.updateToken(60).then(c=>{var u;(u=n.init)!=null&&u.enableLogging&&console.log(`[vue-keycloak-js] Token ${c?"updated":"not updated"}`)}).catch(c=>{var u;(u=n.init)!=null&&u.enableLogging&&console.log(`[vue-keycloak-js] Error while updating token: ${c}`),e.clearToken()})},s??1e4)),o.logoutFn=()=>(r&&clearInterval(r),e.logout(n.logout))},e.onAuthRefreshSuccess=function(){i(!0),typeof n.onAuthRefreshSuccess=="function"&&n.onAuthRefreshSuccess(e)},e.onAuthRefreshError=function(){i(!1),typeof n.onAuthRefreshError=="function"&&n.onAuthRefreshError(e)},e.onAuthLogout=function(){i(!1),typeof n.onAuthLogout=="function"&&n.onAuthLogout(e)};try{const r=await e.init(n.init);i(r),typeof n.onInitSuccess=="function"&&n.onInitSuccess(r)}catch(r){i(!1);const c=new Error("Failure during initialization of keycloak-js adapter",{cause:r});typeof n.onInitError=="function"?n.onInitError(c,r):console.error(c,r)}}function v(t){const{config:o,init:n,onReady:e,onInitError:s,onAuthRefreshError:a,onAuthLogout:i}=t;return typeof o!="string"&&!f(o)?{hasError:!0,error:`'config' option must be a string or an object. Found: '${typeof o}'`}:!f(n)||typeof n?.onLoad!="string"?{hasError:!0,error:`'init' option must be an object with an 'onLoad' property. Found: '${n}'`}:e&&typeof e!="function"?{hasError:!0,error:`'onReady' option must be a function. Found: '${typeof e}'`}:s&&typeof s!="function"?{hasError:!0,error:`'onInitError' option must be a function. Found: '${typeof s}'`}:a&&typeof a!="function"?{hasError:!0,error:`'onAuthRefreshError' option must be a function. Found: '${typeof a}'`}:i&&typeof i!="function"?{hasError:!0,error:`'onAuthLogout' option must be a function. Found: '${typeof i}'`}:{hasError:!1,error:null}}function R(t){return f(t)?Promise.resolve(t):fetch(t,{headers:{Accept:"application/json"}}).then(o=>{if(!o.ok)throw new Error(`Failed to fetch config: ${o.statusText}`);return o.json()})}function f(t){return t!==null&&typeof t=="object"&&Object.prototype.toString.call(t)!=="[object Array]"}export{A as default,E as useKeycloak};
