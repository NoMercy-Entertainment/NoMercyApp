import{I as T,$ as V,E as y,b1 as D,ab as b,a8 as F,w as k,C as z,a1 as K,bM as L,l as d,ci as j,d as n,o,s as m,j as q,K as t,bu as U,a5 as C,c as l,n as w,a3 as g,a4 as f,a as A,F as c,h as E,b as $,bh as G}from"./index-H-vD2rqS.js";import{u as H}from"./useInfiniteServerClient-B-2LPPx2.js";import{_ as J}from"./NMCard.vue_vue_type_script_setup_true_lang-DjnXwaQx.js";import{_ as O}from"./PersonCard.vue_vue_type_script_setup_true_lang-BBfyrJj2.js";import{_ as Q,a as W}from"./EmptyCard.vue_vue_type_script_setup_true_lang-B1ACRK0s.js";import{_ as X}from"./ScrollContainer.vue_vue_type_script_setup_true_lang-OA0oELVZ.js";import{_ as Y}from"./NotFound.vue_vue_type_script_setup_true_lang-BB63iPHL.js";import"./useBaseQuery-x8hgGQVw.js";import"./useQueryClient-B5STIjF7.js";import"./contextMenuItems-bcJxOkHl.js";import"./musicPlaylists-B4sItztb.js";import"./TMDBImage.vue_vue_type_script_setup_true_lang-8xduYhZZ.js";import"./AppLogoSquare-CvwU0jNv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./CardIndicator.vue_vue_type_script_setup_true_lang-CT5nh0HQ.js";import"./index-5TqZ8QDo.js";import"./OptimizedIcon.vue_vue_type_script_setup_true_lang-CX14zQZK.js";import"./NoResultImage.vue_vue_type_script_setup_true_lang-DSBteXo4.js";const Z="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",ee="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",ye=T({__name:"Desktop",setup(te){const i=V(),{data:r,fetchNextPage:_,hasNextPage:v,isError:M}=H({queryKey:["libraries",i?.params.id??i.name],limit:20,keepForever:!0});y(()=>{D(),b(null),F(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),k(r,a=>{a&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const B=z(()=>{const a=r.value?.pages?.[0]?.data?.[0];return a&&K.value&&a.media_type!=="person"&&a.media_type!=="genres"});L(()=>{stop(),b(null)});const I=d(),N=d();y(()=>{N.value=i.params.id??i.name,v.value&&(r?.value?.pages?.length??0)<50&&_(),document.addEventListener("scrollToDiv",a=>{I.value?.scrollTo({top:a.detail.top-100,behavior:"smooth"})})}),j(()=>{document.dispatchEvent(new Event("indexer"))}),k(r,a=>{a&&v.value&&a?.pages?.length<50&&_()});const P=d(),R=d();function u(a,x){P.value=x,R.value.show(a)}return(a,x)=>(o(),n(t(G),null,{default:m(()=>[q(t(U),{fullscreen:!0},{default:m(()=>[t(M)&&!t(r)?.pages?(o(),n(Y,{key:0})):(o(),n(X,{key:1,id:t(C).currentRoute.value.fullPath,"auto-hide":!0,static:!0},{default:m(()=>[(o(),l("div",{ref:"containerRef",key:t(C).currentRoute.value.params?.id,class:w(["z-0 flex flex-col gap-4 rounded-3xl border-0 p-4 w-available scrollbar-none border-auto-3 transform-gpu will-change-auto",{"pb-24":t(g)&&!t(f),"pb-40":t(g)&&t(f),"children:pb-4 sm:children:pb-3":!t(g)&&t(f)}])},[A("div",{class:w(`grid w-full gap-4 scroll-smooth music-showing:pb-0 whitespace-pre ${B.value?Z:ee}`)},[(o(!0),l(c,null,E(t(r)?.pages??[],(h,S)=>(o(),l(c,{key:S},[h.data.length>0?(o(!0),l(c,{key:0},E(h.data??[],(e,p)=>(o(),l(c,null,[e?.media_type==="tv"||e?.media_type==="movie"||e?.media_type==="collection"||e?.media_type==="specials"?(o(),n(J,{key:e.id,data:e,index:p,onContextMenu:s=>u(s,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="person"?(o(),n(O,{key:`${e.id}_person`,data:e,index:p,onContextMenu:s=>u(s,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="genres"?(o(),n(Q,{key:`${e.id}_genres`,data:e,index:p,onContextMenu:s=>u(s,e)},null,8,["data","index","onContextMenu"])):$("",!0)],64))),256)):t(r)?.pages?.[0]?.data?.length===0?(o(),n(W,{key:1})):$("",!0)],64))),128))],2)],2))]),_:1},8,["id"]))]),_:1})]),_:1}))}});export{ye as default};
