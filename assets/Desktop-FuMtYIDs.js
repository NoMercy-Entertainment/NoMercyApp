import{$t as Wt,An as B,Bn as Kt,Bt as Ae,En as pr,Gt as D,Hn as Pt,I as hr,Ln as Bt,Lt as Se,M as mr,Mt as Ne,Pn as ke,Rt as p,Sn as N,Tt as z,Un as k,Vt as Y,Wt as V,_ as vr,bn as ne,cn as S,dn as gr,fn as Ke,i as br,n as De,qt as Q,tn as yr,u as _r,un as st,yn as Ot,zn as We,zt as q}from"./index-CymNhKD_.js";import"./dist-BzCNKCKQ.js";import"./esm-ACLeELb5.js";import"./esm-D_D4nCnV.js";import"./dist-DXrN7I-1.js";import"./client-B3lu4kSB.js";import"./ionic-global-CJHxMOPd.js";import"./hardware-back-button-D60wdz2_.js";import"./index3-D8TaXO-z.js";import"./index8-DyEBw6N5.js";import"./keyboard-CzXNBarC.js";import"./index2-YLkJp4Cu.js";import"./ios.transition-De37_SF6.js";import"./keyboard2-F9Kv6wST.js";import"./md.transition-DlofogM3.js";import{f as wr}from"./ui-CVk4xI0v.js";import"./client-CxRn8_4O.js";import{C as X}from"./currentServer-DzE7mepP.js";import{r as xr}from"./config-BZ-AEJ_J.js";import{_ as Er,g as Sr,h as Ut,r as Dr,t as kr}from"./core-9rxtqojv.js";import"./esm-B369UUD9.js";import"./global-lh4aio7e.js";import"./esm-L6OojSyq.js";import"./bundle-mjs-CKr78mlm.js";import"./user-DlzWNC9W.js";import{t as J}from"./serverClient-BuGPA0-U.js";import{E as Cr,a as Tr,t as qt}from"./router-Ch9jBD0u.js";import"./utils-DO5s4OOL.js";import"./useInfiniteServerClient-vxekqC7x.js";import"./SocketClient-DIjrmZvk.js";import{t as ve}from"./useQueryClient-q2-SvbEv.js";import"./apiClient-DbAYXZY3.js";import"./notifications-C159qvRm.js";import"./utils-D5LXfnop.js";import"./deviceInfo-AeSN8xPw.js";import"./auth-Csw53SQZ.js";import{t as Or}from"./_plugin-vue_export-helper-pDp7unP0.js";import{t as he}from"./MoooomIcon-D8Onw6Et.js";import{n as Ir}from"./dist-5Ks7n5tk.js";import{t as Nr}from"./AppLogo-C1j733-b.js";import{t as It}from"./useServerClient-BC86_TUk.js";import"./ScrollContainer-C0xGPQP4.js";import{t as Ee}from"./Button-XliGAeXF.js";import{t as ht}from"./Modal-CiUDBaRz.js";import{t as $r}from"./FolderBrowser-8rLqq8WI.js";z();var Ar={class:"-mt-12 px-4"},Fr={class:"text-xl font-bold"},Mr={"aria-hidden":"true",class:"mt-4"},Pr={class:"overflow-hidden rounded-full bg-surface-11"},Br=Q({__name:"Stepper",props:{steps:{type:Array,required:!0},currentStep:{type:String,required:!0}},setup(r){const e=r,n=Se(()=>e.steps?e.steps?.indexOf(e.currentStep):0),t=Se(()=>e.steps?(n.value+1)/e.steps.length*100:0);return(o,i)=>(S(),Y("div",Ar,[p("h4",Fr,k(o.$t(r.currentStep)),1),p("div",Mr,[p("div",Pr,[p("div",{style:Pt(`width: ${t.value}%`),class:"h-1 rounded-full bg-focus transition-all duration-300"},null,4)]),p("div",{style:Pt(`grid-template-columns: repeat(${r.steps.length}, minmax(0, 1fr))`),class:"mt-6 hidden text-sm font-medium text-surface-12/12 sm:grid"},[(S(!0),Y(Ne,null,st(r.steps,a=>(S(),Y("div",{key:a,class:"text-center font-semibold"},k(o.$t(a)),1))),128))],4)])]))}}),qr=Br;z();var Lr={class:"mx-auto grid h-available place-content-center px-4 sm:px-6 lg:px-8 text-surface-12"},jr={class:"mx-auto w-screen max-w-6xl"},Rr={class:"flex h-full w-full flex-col gap-4 overflow-hidden p-8 pb-0 min-h-[80vh] max-h-[80vh] h-available"},Yr={class:"mx-auto h-44 w-auto p-2"},Vr={class:"overflow-hidden p-4 h-available"},Xr={class:"mt-auto flex h-16 w-full justify-end gap-4 rounded-b-lg p-4"},zr=Q({__name:"Frame",props:{steps:{type:Array,required:!0},nextButtonLocked:{type:Boolean,default:!1},currentStep:{type:String,required:!0},setCurrentStep:{type:Function,required:!0},finish:{type:Function,required:!0}},setup(r){const e=r,n=Se(()=>e.steps.findIndex(a=>a===e.currentStep)===0),t=Se(()=>e.steps.findIndex(a=>a===e.currentStep)===e.steps.length-1);function o(){e.steps.findIndex(a=>a===e.currentStep)<e.steps.length-1&&e.setCurrentStep(e.steps[e.steps.findIndex(a=>a===e.currentStep)+1])}function i(){e.steps.findIndex(a=>a===e.currentStep)>0&&e.setCurrentStep(e.steps[e.steps.findIndex(a=>a===e.currentStep)-1])}return(a,s)=>(S(),Y("div",Lr,[p("div",jr,[p("div",{class:Kt(["animate-loading","w-full h-full gap-2.5 flex flex-col ml-auto overflow-hidden rounded-xl bg-surface-1 dark:bg-surface-2 bg-cover border-2 border-transparent text-start transition-all duration-300"]),style:{"--bg-color":"linear-gradient(rgb(var(--surface-2)), rgb(var(--surface-2)))","--border-color":`linear-gradient(var(--angle, 45deg),
						rgb(var(--color-theme-8) / 0.7) 0%,
						rgb(var(--color-theme-8) / 0.3) 33.33%,
						rgb(var(--color-theme-8) / 0.14) 66.67%,
						rgb(var(--color-theme-8) / 0.1) 100%
					)`}},[p("div",Rr,[p("div",Yr,[D(Nr,{class:"pb-8"})]),D(qr,{"current-step":r.currentStep,steps:r.steps},null,8,["current-step","steps"]),p("div",Vr,[gr(a.$slots,"default")])]),p("div",Xr,[n.value?Ae("",!0):(S(),q(Ee,{key:0,id:"yes",class:"ml-auto !w-28",color:"contrast",type:"button",variant:"text",onClick:i},{default:N(()=>[V(k(a.$t("Back")),1)]),_:1})),t.value?(S(),q(Ee,{key:1,id:"cancel",disabled:r.nextButtonLocked,class:"!w-28",color:"theme",type:"button",variant:"default",onClick:r.finish},{default:N(()=>[V(k(a.$t("Finish")),1)]),_:1},8,["disabled","onClick"])):(S(),q(Ee,{key:2,id:"save",disabled:r.nextButtonLocked,class:"!w-28",color:"theme",type:"button",variant:"default",onClick:o},{default:N(()=>[V(k(a.$t("Next")),1)]),_:1},8,["disabled"]))])])])]))}}),Hr=zr;function Lt(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function ie(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Lt(Object(n),!0).forEach(function(t){Gr(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function nt(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?nt=function(e){return typeof e}:nt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(r)}function Gr(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function se(){return se=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r},se.apply(this,arguments)}function Wr(r,e){if(r==null)return{};var n={},t=Object.keys(r),o,i;for(i=0;i<t.length;i++)o=t[i],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}function Kr(r,e){if(r==null)return{};var n=Wr(r,e),t,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(o=0;o<i.length;o++)t=i[o],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}var Ur="1.15.6";function le(r){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(r)}var ue=le(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ue=le(/Edge/i),jt=le(/firefox/i),Ve=le(/safari/i)&&!le(/chrome/i)&&!le(/android/i),Nt=le(/iP(ad|od|hone)/i),Qt=le(/chrome/i)&&le(/android/i),Zt={capture:!1,passive:!1};function x(r,e,n){r.addEventListener(e,n,!ue&&Zt)}function w(r,e,n){r.removeEventListener(e,n,!ue&&Zt)}function ut(r,e){if(e){if(e[0]===">"&&(e=e.substring(1)),r)try{if(r.matches)return r.matches(e);if(r.msMatchesSelector)return r.msMatchesSelector(e);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(e)}catch{return!1}return!1}}function Jt(r){return r.host&&r!==document&&r.host.nodeType?r.host:r.parentNode}function te(r,e,n,t){if(r){n=n||document;do{if(e!=null&&(e[0]===">"?r.parentNode===n&&ut(r,e):ut(r,e))||t&&r===n)return r;if(r===n)break}while(r=Jt(r))}return null}var Rt=/\s+/g;function K(r,e,n){r&&e&&(r.classList?r.classList[n?"add":"remove"](e):r.className=((" "+r.className+" ").replace(Rt," ").replace(" "+e+" "," ")+(n?" "+e:"")).replace(Rt," "))}function g(r,e,n){var t=r&&r.style;if(t){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(r,""):r.currentStyle&&(n=r.currentStyle),e===void 0?n:n[e];!(e in t)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),t[e]=n+(typeof n=="string"?"":"px")}}function $e(r,e){var n="";if(typeof r=="string")n=r;else do{var t=g(r,"transform");t&&t!=="none"&&(n=t+" "+n)}while(!e&&(r=r.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function er(r,e,n){if(r){var t=r.getElementsByTagName(e),o=0,i=t.length;if(n)for(;o<i;o++)n(t[o],o);return t}return[]}function oe(){var r=document.scrollingElement;return r||document.documentElement}function A(r,e,n,t,o){if(!(!r.getBoundingClientRect&&r!==window)){var i,a,s,l,u,c,f;if(r!==window&&r.parentNode&&r!==oe()?(i=r.getBoundingClientRect(),a=i.top,s=i.left,l=i.bottom,u=i.right,c=i.height,f=i.width):(a=0,s=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(e||n)&&r!==window&&(o=o||r.parentNode,!ue))do if(o&&o.getBoundingClientRect&&(g(o,"transform")!=="none"||n&&g(o,"position")!=="static")){var _=o.getBoundingClientRect();a-=_.top+parseInt(g(o,"border-top-width")),s-=_.left+parseInt(g(o,"border-left-width")),l=a+i.height,u=s+i.width;break}while(o=o.parentNode);if(t&&r!==window){var h=$e(o||r),v=h&&h.a,m=h&&h.d;h&&(a/=m,s/=v,f/=v,c/=m,l=a+c,u=s+f)}return{top:a,left:s,bottom:l,right:u,width:f,height:c}}}function Yt(r,e,n){for(var t=me(r,!0),o=A(r)[e];t;){var i=A(t)[n],a=void 0;if(n==="top"||n==="left"?a=o>=i:a=o<=i,!a)return t;if(t===oe())break;t=me(t,!1)}return!1}function Fe(r,e,n,t){for(var o=0,i=0,a=r.children;i<a.length;){if(a[i].style.display!=="none"&&a[i]!==b.ghost&&(t||a[i]!==b.dragged)&&te(a[i],n.draggable,r,!1)){if(o===e)return a[i];o++}i++}return null}function $t(r,e){for(var n=r.lastElementChild;n&&(n===b.ghost||g(n,"display")==="none"||e&&!ut(n,e));)n=n.previousElementSibling;return n||null}function Z(r,e){var n=0;if(!r||!r.parentNode)return-1;for(;r=r.previousElementSibling;)r.nodeName.toUpperCase()!=="TEMPLATE"&&r!==b.clone&&(!e||ut(r,e))&&n++;return n}function Vt(r){var e=0,n=0,t=oe();if(r)do{var o=$e(r),i=o.a,a=o.d;e+=r.scrollLeft*i,n+=r.scrollTop*a}while(r!==t&&(r=r.parentNode));return[e,n]}function Qr(r,e){for(var n in r)if(r.hasOwnProperty(n)){for(var t in e)if(e.hasOwnProperty(t)&&e[t]===r[n][t])return Number(n)}return-1}function me(r,e){if(!r||!r.getBoundingClientRect)return oe();var n=r,t=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=g(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return oe();if(t||e)return n;t=!0}}while(n=n.parentNode);return oe()}function Zr(r,e){if(r&&e)for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r}function vt(r,e){return Math.round(r.top)===Math.round(e.top)&&Math.round(r.left)===Math.round(e.left)&&Math.round(r.height)===Math.round(e.height)&&Math.round(r.width)===Math.round(e.width)}var Xe;function tr(r,e){return function(){if(!Xe){var n=arguments,t=this;n.length===1?r.call(t,n[0]):r.apply(t,n),Xe=setTimeout(function(){Xe=void 0},e)}}}function Jr(){clearTimeout(Xe),Xe=void 0}function rr(r,e,n){r.scrollLeft+=e,r.scrollTop+=n}function nr(r){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(r).cloneNode(!0):n?n(r).clone(!0)[0]:r.cloneNode(!0)}function or(r,e,n){var t={};return Array.from(r.children).forEach(function(o){var i,a,s,l;if(!(!te(o,e.draggable,r,!1)||o.animated||o===n)){var u=A(o);t.left=Math.min((i=t.left)!==null&&i!==void 0?i:1/0,u.left),t.top=Math.min((a=t.top)!==null&&a!==void 0?a:1/0,u.top),t.right=Math.max((s=t.right)!==null&&s!==void 0?s:-1/0,u.right),t.bottom=Math.max((l=t.bottom)!==null&&l!==void 0?l:-1/0,u.bottom)}}),t.width=t.right-t.left,t.height=t.bottom-t.top,t.x=t.left,t.y=t.top,t}var R="Sortable"+new Date().getTime();function en(){var r=[],e;return{captureAnimationState:function(){r=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(t){if(!(g(t,"display")==="none"||t===b.ghost)){r.push({target:t,rect:A(t)});var o=ie({},r[r.length-1].rect);if(t.thisAnimationDuration){var i=$e(t,!0);i&&(o.top-=i.f,o.left-=i.e)}t.fromRect=o}})},addAnimationState:function(t){r.push(t)},removeAnimationState:function(t){r.splice(Qr(r,{target:t}),1)},animateAll:function(t){var o=this;if(!this.options.animation){clearTimeout(e),typeof t=="function"&&t();return}var i=!1,a=0;r.forEach(function(s){var l=0,u=s.target,c=u.fromRect,f=A(u),_=u.prevFromRect,h=u.prevToRect,v=s.rect,m=$e(u,!0);m&&(f.top-=m.f,f.left-=m.e),u.toRect=f,u.thisAnimationDuration&&vt(_,f)&&!vt(c,f)&&(v.top-f.top)/(v.left-f.left)===(c.top-f.top)/(c.left-f.left)&&(l=rn(v,_,h,o.options)),vt(f,c)||(u.prevFromRect=c,u.prevToRect=f,l||(l=o.options.animation),o.animate(u,v,f,l)),l&&(i=!0,a=Math.max(a,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(e),i?e=setTimeout(function(){typeof t=="function"&&t()},a):typeof t=="function"&&t(),r=[]},animate:function(t,o,i,a){if(a){g(t,"transition",""),g(t,"transform","");var s=$e(this.el),l=s&&s.a,u=s&&s.d,c=(o.left-i.left)/(l||1),f=(o.top-i.top)/(u||1);t.animatingX=!!c,t.animatingY=!!f,g(t,"transform","translate3d("+c+"px,"+f+"px,0)"),this.forRepaintDummy=tn(t),g(t,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),g(t,"transform","translate3d(0,0,0)"),typeof t.animated=="number"&&clearTimeout(t.animated),t.animated=setTimeout(function(){g(t,"transition",""),g(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},a)}}}}function tn(r){return r.offsetWidth}function rn(r,e,n,t){return Math.sqrt(Math.pow(e.top-r.top,2)+Math.pow(e.left-r.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*t.animation}var Ce=[],gt={initializeByDefault:!0},Qe={mount:function(e){for(var n in gt)gt.hasOwnProperty(n)&&!(n in e)&&(e[n]=gt[n]);Ce.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Ce.push(e)},pluginEvent:function(e,n,t){var o=this;this.eventCanceled=!1,t.cancel=function(){o.eventCanceled=!0};var i=e+"Global";Ce.forEach(function(a){n[a.pluginName]&&(n[a.pluginName][i]&&n[a.pluginName][i](ie({sortable:n},t)),n.options[a.pluginName]&&n[a.pluginName][e]&&n[a.pluginName][e](ie({sortable:n},t)))})},initializePlugins:function(e,n,t,o){Ce.forEach(function(s){var l=s.pluginName;if(!(!e.options[l]&&!s.initializeByDefault)){var u=new s(e,n,e.options);u.sortable=e,u.options=e.options,e[l]=u,se(t,u.defaults)}});for(var i in e.options)if(e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);typeof a<"u"&&(e.options[i]=a)}},getEventProperties:function(e,n){var t={};return Ce.forEach(function(o){typeof o.eventProperties=="function"&&se(t,o.eventProperties.call(n[o.pluginName],e))}),t},modifyOption:function(e,n,t){var o;return Ce.forEach(function(i){e[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[n]=="function"&&(o=i.optionListeners[n].call(e[i.pluginName],t))}),o}};function nn(r){var e=r.sortable,n=r.rootEl,t=r.name,o=r.targetEl,i=r.cloneEl,a=r.toEl,s=r.fromEl,l=r.oldIndex,u=r.newIndex,c=r.oldDraggableIndex,f=r.newDraggableIndex,_=r.originalEvent,h=r.putSortable,v=r.extraEventProperties;if(e=e||n&&n[R],!!e){var m,E=e.options,H="on"+t.charAt(0).toUpperCase()+t.substr(1);window.CustomEvent&&!ue&&!Ue?m=new CustomEvent(t,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(t,!0,!0)),m.to=a||n,m.from=s||n,m.item=o||n,m.clone=i,m.oldIndex=l,m.newIndex=u,m.oldDraggableIndex=c,m.newDraggableIndex=f,m.originalEvent=_,m.pullMode=h?h.lastPutMode:void 0;var C=ie(ie({},v),Qe.getEventProperties(t,e));for(var L in C)m[L]=C[L];n&&n.dispatchEvent(m),E[H]&&E[H].call(e,m)}}var on=["evt"],j=function(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=t.evt,i=Kr(t,on);Qe.pluginEvent.bind(b)(e,n,ie({dragEl:d,parentEl:I,ghostEl:y,rootEl:T,nextEl:xe,lastDownEl:ot,cloneEl:O,cloneHidden:pe,dragStarted:je,putSortable:F,activeSortable:b.active,originalEvent:o,oldIndex:Ie,oldDraggableIndex:ze,newIndex:U,newDraggableIndex:fe,hideGhostForTarget:sr,unhideGhostForTarget:ur,cloneNowHidden:function(){pe=!0},cloneNowShown:function(){pe=!1},dispatchSortableEvent:function(s){P({sortable:n,name:s,originalEvent:o})}},i))};function P(r){nn(ie({putSortable:F,cloneEl:O,targetEl:d,rootEl:T,oldIndex:Ie,oldDraggableIndex:ze,newIndex:U,newDraggableIndex:fe},r))}var d,I,y,T,xe,ot,O,pe,Ie,U,ze,fe,Je,F,Oe=!1,dt=!1,ct=[],_e,ee,bt,yt,Xt,zt,je,Te,He,Ge=!1,et=!1,it,M,_t=[],Dt=!1,ft=[],mt=typeof document<"u",tt=Nt,Ht=Ue||ue?"cssFloat":"float",an=mt&&!Qt&&!Nt&&"draggable"in document.createElement("div"),ir=function(){if(mt){if(ue)return!1;var r=document.createElement("x");return r.style.cssText="pointer-events:auto",r.style.pointerEvents==="auto"}}(),ar=function(e,n){var t=g(e),o=parseInt(t.width)-parseInt(t.paddingLeft)-parseInt(t.paddingRight)-parseInt(t.borderLeftWidth)-parseInt(t.borderRightWidth),i=Fe(e,0,n),a=Fe(e,1,n),s=i&&g(i),l=a&&g(a),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+A(i).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+A(a).width;if(t.display==="flex")return t.flexDirection==="column"||t.flexDirection==="column-reverse"?"vertical":"horizontal";if(t.display==="grid")return t.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&s.float&&s.float!=="none"){var f=s.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===f)?"vertical":"horizontal"}return i&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=o&&t[Ht]==="none"||a&&t[Ht]==="none"&&u+c>o)?"vertical":"horizontal"},ln=function(e,n,t){var o=t?e.left:e.top,i=t?e.right:e.bottom,a=t?e.width:e.height,s=t?n.left:n.top,l=t?n.right:n.bottom,u=t?n.width:n.height;return o===s||i===l||o+a/2===s+u/2},sn=function(e,n){var t;return ct.some(function(o){var i=o[R].options.emptyInsertThreshold;if(!(!i||$t(o))){var a=A(o),s=e>=a.left-i&&e<=a.right+i,l=n>=a.top-i&&n<=a.bottom+i;if(s&&l)return t=o}}),t},lr=function(e){function n(i,a){return function(s,l,u,c){var f=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(i==null&&(a||f))return!0;if(i==null||i===!1)return!1;if(a&&i==="clone")return i;if(typeof i=="function")return n(i(s,l,u,c),a)(s,l,u,c);var _=(a?s:l).options.group.name;return i===!0||typeof i=="string"&&i===_||i.join&&i.indexOf(_)>-1}}var t={},o=e.group;(!o||nt(o)!="object")&&(o={name:o}),t.name=o.name,t.checkPull=n(o.pull,!0),t.checkPut=n(o.put),t.revertClone=o.revertClone,e.group=t},sr=function(){!ir&&y&&g(y,"display","none")},ur=function(){!ir&&y&&g(y,"display","")};mt&&!Qt&&document.addEventListener("click",function(r){if(dt)return r.preventDefault(),r.stopPropagation&&r.stopPropagation(),r.stopImmediatePropagation&&r.stopImmediatePropagation(),dt=!1,!1},!0);var we=function(e){if(d){e=e.touches?e.touches[0]:e;var n=sn(e.clientX,e.clientY);if(n){var t={};for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.target=t.rootEl=n,t.preventDefault=void 0,t.stopPropagation=void 0,n[R]._onDragOver(t)}}},un=function(e){d&&d.parentNode[R]._isOutsideThisEl(e.target)};function b(r,e){if(!(r&&r.nodeType&&r.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(r));this.el=r,this.options=e=se({},e),r[R]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(r.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ar(r,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,s){a.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:b.supportPointer!==!1&&"PointerEvent"in window&&(!Ve||Nt),emptyInsertThreshold:5};Qe.initializePlugins(this,r,n);for(var t in n)!(t in e)&&(e[t]=n[t]);lr(e);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=e.forceFallback?!1:an,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?x(r,"pointerdown",this._onTapStart):(x(r,"mousedown",this._onTapStart),x(r,"touchstart",this._onTapStart)),this.nativeDraggable&&(x(r,"dragover",this),x(r,"dragenter",this)),ct.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),se(this,en())}b.prototype={constructor:b,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Te=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,d):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,t=this.el,o=this.options,i=o.preventOnFilter,a=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(s||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=o.filter;if(gn(t),!d&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||o.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Ve&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=te(l,o.draggable,t,!1),!(l&&l.animated)&&ot!==l)){if(Ie=Z(l),ze=Z(l,o.draggable),typeof c=="function"){if(c.call(this,e,l,this)){P({sortable:n,rootEl:u,name:"filter",targetEl:l,toEl:t,fromEl:t}),j("filter",n,{evt:e}),i&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(f){if(f=te(u,f.trim(),t,!1),f)return P({sortable:n,rootEl:f,name:"filter",targetEl:l,fromEl:t,toEl:t}),j("filter",n,{evt:e}),!0}),c)){i&&e.preventDefault();return}o.handle&&!te(u,o.handle,t,!1)||this._prepareDragStart(e,s,l)}}},_prepareDragStart:function(e,n,t){var o=this,i=o.el,a=o.options,s=i.ownerDocument,l;if(t&&!d&&t.parentNode===i){var u=A(t);if(T=i,d=t,I=d.parentNode,xe=d.nextSibling,ot=t,Je=a.group,b.dragged=d,_e={target:d,clientX:(n||e).clientX,clientY:(n||e).clientY},Xt=_e.clientX-u.left,zt=_e.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,d.style["will-change"]="all",l=function(){if(j("delayEnded",o,{evt:e}),b.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!jt&&o.nativeDraggable&&(d.draggable=!0),o._triggerDragStart(e,n),P({sortable:o,name:"choose",originalEvent:e}),K(d,a.chosenClass,!0)},a.ignore.split(",").forEach(function(c){er(d,c.trim(),wt)}),x(s,"dragover",we),x(s,"mousemove",we),x(s,"touchmove",we),a.supportPointer?(x(s,"pointerup",o._onDrop),!this.nativeDraggable&&x(s,"pointercancel",o._onDrop)):(x(s,"mouseup",o._onDrop),x(s,"touchend",o._onDrop),x(s,"touchcancel",o._onDrop)),jt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,d.draggable=!0),j("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Ue||ue))){if(b.eventCanceled){this._onDrop();return}a.supportPointer?(x(s,"pointerup",o._disableDelayedDrag),x(s,"pointercancel",o._disableDelayedDrag)):(x(s,"mouseup",o._disableDelayedDrag),x(s,"touchend",o._disableDelayedDrag),x(s,"touchcancel",o._disableDelayedDrag)),x(s,"mousemove",o._delayedDragTouchMoveHandler),x(s,"touchmove",o._delayedDragTouchMoveHandler),a.supportPointer&&x(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){d&&wt(d),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;w(e,"mouseup",this._disableDelayedDrag),w(e,"touchend",this._disableDelayedDrag),w(e,"touchcancel",this._disableDelayedDrag),w(e,"pointerup",this._disableDelayedDrag),w(e,"pointercancel",this._disableDelayedDrag),w(e,"mousemove",this._delayedDragTouchMoveHandler),w(e,"touchmove",this._delayedDragTouchMoveHandler),w(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?x(document,"pointermove",this._onTouchMove):n?x(document,"touchmove",this._onTouchMove):x(document,"mousemove",this._onTouchMove):(x(d,"dragend",this),x(T,"dragstart",this._onDragStart));try{document.selection?at(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(Oe=!1,T&&d){j("dragStarted",this,{evt:n}),this.nativeDraggable&&x(document,"dragover",un);var t=this.options;!e&&K(d,t.dragClass,!1),K(d,t.ghostClass,!0),b.active=this,e&&this._appendGhost(),P({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(ee){this._lastX=ee.clientX,this._lastY=ee.clientY,sr();for(var e=document.elementFromPoint(ee.clientX,ee.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ee.clientX,ee.clientY),e!==n);)n=e;if(d.parentNode[R]._isOutsideThisEl(e),n)do{if(n[R]){var t=void 0;if(t=n[R]._onDragOver({clientX:ee.clientX,clientY:ee.clientY,target:e,rootEl:n}),t&&!this.options.dragoverBubble)break}e=n}while(n=Jt(n));ur()}},_onTouchMove:function(e){if(_e){var n=this.options,t=n.fallbackTolerance,o=n.fallbackOffset,i=e.touches?e.touches[0]:e,a=y&&$e(y,!0),s=y&&a&&a.a,l=y&&a&&a.d,u=tt&&M&&Vt(M),c=(i.clientX-_e.clientX+o.x)/(s||1)+(u?u[0]-_t[0]:0)/(s||1),f=(i.clientY-_e.clientY+o.y)/(l||1)+(u?u[1]-_t[1]:0)/(l||1);if(!b.active&&!Oe){if(t&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<t)return;this._onDragStart(e,!0)}if(y){a?(a.e+=c-(bt||0),a.f+=f-(yt||0)):a={a:1,b:0,c:0,d:1,e:c,f};var _="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");g(y,"webkitTransform",_),g(y,"mozTransform",_),g(y,"msTransform",_),g(y,"transform",_),bt=c,yt=f,ee=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!y){var e=this.options.fallbackOnBody?document.body:T,n=A(d,!0,tt,!0,e),t=this.options;if(tt){for(M=e;g(M,"position")==="static"&&g(M,"transform")==="none"&&M!==document;)M=M.parentNode;M!==document.body&&M!==document.documentElement?(M===document&&(M=oe()),n.top+=M.scrollTop,n.left+=M.scrollLeft):M=oe(),_t=Vt(M)}y=d.cloneNode(!0),K(y,t.ghostClass,!1),K(y,t.fallbackClass,!0),K(y,t.dragClass,!0),g(y,"transition",""),g(y,"transform",""),g(y,"box-sizing","border-box"),g(y,"margin",0),g(y,"top",n.top),g(y,"left",n.left),g(y,"width",n.width),g(y,"height",n.height),g(y,"opacity","0.8"),g(y,"position",tt?"absolute":"fixed"),g(y,"zIndex","100000"),g(y,"pointerEvents","none"),b.ghost=y,e.appendChild(y),g(y,"transform-origin",Xt/parseInt(y.style.width)*100+"% "+zt/parseInt(y.style.height)*100+"%")}},_onDragStart:function(e,n){var t=this,o=e.dataTransfer,i=t.options;if(j("dragStart",this,{evt:e}),b.eventCanceled){this._onDrop();return}j("setupClone",this),b.eventCanceled||(O=nr(d),O.removeAttribute("id"),O.draggable=!1,O.style["will-change"]="",this._hideClone(),K(O,this.options.chosenClass,!1),b.clone=O),t.cloneId=at(function(){j("clone",t),!b.eventCanceled&&(t.options.removeCloneOnHide||T.insertBefore(O,d),t._hideClone(),P({sortable:t,name:"clone"}))}),!n&&K(d,i.dragClass,!0),n?(dt=!0,t._loopId=setInterval(t._emulateDragOver,50)):(w(document,"mouseup",t._onDrop),w(document,"touchend",t._onDrop),w(document,"touchcancel",t._onDrop),o&&(o.effectAllowed="move",i.setData&&i.setData.call(t,o,d)),x(document,"drop",t),g(d,"transform","translateZ(0)")),Oe=!0,t._dragStartId=at(t._dragStarted.bind(t,n,e)),x(document,"selectstart",t),je=!0,window.getSelection().removeAllRanges(),Ve&&g(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,t=e.target,o,i,a,s=this.options,l=s.group,u=b.active,c=Je===l,f=s.sort,_=F||u,h,v=this,m=!1;if(Dt)return;function E(Le,cr){j(Le,v,ie({evt:e,isOwner:c,axis:h?"vertical":"horizontal",revert:a,dragRect:o,targetRect:i,canSort:f,fromSortable:_,target:t,completed:C,onMove:function(Mt,fr){return rt(T,n,d,o,Mt,A(Mt),e,fr)},changed:L},cr))}function H(){E("dragOverAnimationCapture"),v.captureAnimationState(),v!==_&&_.captureAnimationState()}function C(Le){return E("dragOverCompleted",{insertion:Le}),Le&&(c?u._hideClone():u._showClone(v),v!==_&&(K(d,F?F.options.ghostClass:u.options.ghostClass,!1),K(d,s.ghostClass,!0)),F!==v&&v!==b.active?F=v:v===b.active&&F&&(F=null),_===v&&(v._ignoreWhileAnimating=t),v.animateAll(function(){E("dragOverAnimationComplete"),v._ignoreWhileAnimating=null}),v!==_&&(_.animateAll(),_._ignoreWhileAnimating=null)),(t===d&&!d.animated||t===n&&!t.animated)&&(Te=null),!s.dragoverBubble&&!e.rootEl&&t!==document&&(d.parentNode[R]._isOutsideThisEl(e.target),!Le&&we(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function L(){U=Z(d),fe=Z(d,s.draggable),P({sortable:v,name:"change",toEl:n,newIndex:U,newDraggableIndex:fe,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),t=te(t,s.draggable,n,!0),E("dragOver"),b.eventCanceled)return m;if(d.contains(e.target)||t.animated&&t.animatingX&&t.animatingY||v._ignoreWhileAnimating===t)return C(!1);if(dt=!1,u&&!s.disabled&&(c?f||(a=I!==T):F===this||(this.lastPutMode=Je.checkPull(this,u,d,e))&&l.checkPut(this,u,d,e))){if(h=this._getDirection(e,t)==="vertical",o=A(d),E("dragOverValid"),b.eventCanceled)return m;if(a)return I=T,H(),this._hideClone(),E("revert"),b.eventCanceled||(xe?T.insertBefore(d,xe):T.appendChild(d)),C(!0);var G=$t(n,s.draggable);if(!G||pn(e,h,this)&&!G.animated){if(G===d)return C(!1);if(G&&n===e.target&&(t=G),t&&(i=A(t)),rt(T,n,d,o,t,i,e,!!t)!==!1)return H(),G&&G.nextSibling?n.insertBefore(d,G.nextSibling):n.appendChild(d),I=n,L(),C(!0)}else if(G&&fn(e,h,this)){var ge=Fe(n,0,s,!0);if(ge===d)return C(!1);if(t=ge,i=A(t),rt(T,n,d,o,t,i,e,!1)!==!1)return H(),n.insertBefore(d,ge),I=n,L(),C(!0)}else if(t.parentNode===n){i=A(t);var re=0,be,Me=d.parentNode!==n,W=!ln(d.animated&&d.toRect||o,t.animated&&t.toRect||i,h),Pe=h?"top":"left",de=Yt(t,"top","top")||Yt(d,"top","top"),Be=de?de.scrollTop:void 0;Te!==t&&(be=i[Pe],Ge=!1,et=!W&&s.invertSwap||Me),re=hn(e,t,i,h,W?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,et,Te===t);var ae;if(re!==0){var ye=Z(d);do ye-=re,ae=I.children[ye];while(ae&&(g(ae,"display")==="none"||ae===y))}if(re===0||ae===t)return C(!1);Te=t,He=re;var qe=t.nextElementSibling,ce=!1;ce=re===1;var Ze=rt(T,n,d,o,t,i,e,ce);if(Ze!==!1)return(Ze===1||Ze===-1)&&(ce=Ze===1),Dt=!0,setTimeout(cn,30),H(),ce&&!qe?n.appendChild(d):t.parentNode.insertBefore(d,ce?qe:t),de&&rr(de,0,Be-de.scrollTop),I=d.parentNode,be!==void 0&&!et&&(it=Math.abs(be-A(t)[Pe])),L(),C(!0)}if(n.contains(d))return C(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){w(document,"mousemove",this._onTouchMove),w(document,"touchmove",this._onTouchMove),w(document,"pointermove",this._onTouchMove),w(document,"dragover",we),w(document,"mousemove",we),w(document,"touchmove",we)},_offUpEvents:function(){var e=this.el.ownerDocument;w(e,"mouseup",this._onDrop),w(e,"touchend",this._onDrop),w(e,"pointerup",this._onDrop),w(e,"pointercancel",this._onDrop),w(e,"touchcancel",this._onDrop),w(document,"selectstart",this)},_onDrop:function(e){var n=this.el,t=this.options;if(U=Z(d),fe=Z(d,t.draggable),j("drop",this,{evt:e}),I=d&&d.parentNode,U=Z(d),fe=Z(d,t.draggable),b.eventCanceled){this._nulling();return}Oe=!1,et=!1,Ge=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),kt(this.cloneId),kt(this._dragStartId),this.nativeDraggable&&(w(document,"drop",this),w(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ve&&g(document.body,"user-select",""),g(d,"transform",""),e&&(je&&(e.cancelable&&e.preventDefault(),!t.dropBubble&&e.stopPropagation()),y&&y.parentNode&&y.parentNode.removeChild(y),(T===I||F&&F.lastPutMode!=="clone")&&O&&O.parentNode&&O.parentNode.removeChild(O),d&&(this.nativeDraggable&&w(d,"dragend",this),wt(d),d.style["will-change"]="",je&&!Oe&&K(d,F?F.options.ghostClass:this.options.ghostClass,!1),K(d,this.options.chosenClass,!1),P({sortable:this,name:"unchoose",toEl:I,newIndex:null,newDraggableIndex:null,originalEvent:e}),T!==I?(U>=0&&(P({rootEl:I,name:"add",toEl:I,fromEl:T,originalEvent:e}),P({sortable:this,name:"remove",toEl:I,originalEvent:e}),P({rootEl:I,name:"sort",toEl:I,fromEl:T,originalEvent:e}),P({sortable:this,name:"sort",toEl:I,originalEvent:e})),F&&F.save()):U!==Ie&&U>=0&&(P({sortable:this,name:"update",toEl:I,originalEvent:e}),P({sortable:this,name:"sort",toEl:I,originalEvent:e})),b.active&&((U==null||U===-1)&&(U=Ie,fe=ze),P({sortable:this,name:"end",toEl:I,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){j("nulling",this),T=d=I=y=xe=O=ot=pe=_e=ee=je=U=fe=Ie=ze=Te=He=F=Je=b.dragged=b.ghost=b.clone=b.active=null,ft.forEach(function(e){e.checked=!0}),ft.length=bt=yt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":d&&(this._onDragOver(e),dn(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,t=this.el.children,o=0,i=t.length,a=this.options;o<i;o++)n=t[o],te(n,a.draggable,this.el,!1)&&e.push(n.getAttribute(a.dataIdAttr)||vn(n));return e},sort:function(e,n){var t={},o=this.el;this.toArray().forEach(function(i,a){var s=o.children[a];te(s,this.options.draggable,o,!1)&&(t[i]=s)},this),n&&this.captureAnimationState(),e.forEach(function(i){t[i]&&(o.removeChild(t[i]),o.appendChild(t[i]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return te(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var t=this.options;if(n===void 0)return t[e];var o=Qe.modifyOption(this,e,n);typeof o<"u"?t[e]=o:t[e]=n,e==="group"&&lr(t)},destroy:function(){j("destroy",this);var e=this.el;e[R]=null,w(e,"mousedown",this._onTapStart),w(e,"touchstart",this._onTapStart),w(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(w(e,"dragover",this),w(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ct.splice(ct.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!pe){if(j("hideClone",this),b.eventCanceled)return;g(O,"display","none"),this.options.removeCloneOnHide&&O.parentNode&&O.parentNode.removeChild(O),pe=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(pe){if(j("showClone",this),b.eventCanceled)return;d.parentNode==T&&!this.options.group.revertClone?T.insertBefore(O,d):xe?T.insertBefore(O,xe):T.appendChild(O),this.options.group.revertClone&&this.animate(d,O),g(O,"display",""),pe=!1}}};function dn(r){r.dataTransfer&&(r.dataTransfer.dropEffect="move"),r.cancelable&&r.preventDefault()}function rt(r,e,n,t,o,i,a,s){var l,u=r[R],c=u.options.onMove,f;return window.CustomEvent&&!ue&&!Ue?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=r,l.dragged=n,l.draggedRect=t,l.related=o||e,l.relatedRect=i||A(e),l.willInsertAfter=s,l.originalEvent=a,r.dispatchEvent(l),c&&(f=c.call(u,l,a)),f}function wt(r){r.draggable=!1}function cn(){Dt=!1}function fn(r,e,n){var t=A(Fe(n.el,0,n.options,!0)),o=or(n.el,n.options,y),i=10;return e?r.clientX<o.left-i||r.clientY<t.top&&r.clientX<t.right:r.clientY<o.top-i||r.clientY<t.bottom&&r.clientX<t.left}function pn(r,e,n){var t=A($t(n.el,n.options.draggable)),o=or(n.el,n.options,y),i=10;return e?r.clientX>o.right+i||r.clientY>t.bottom&&r.clientX>t.left:r.clientY>o.bottom+i||r.clientX>t.right&&r.clientY>t.top}function hn(r,e,n,t,o,i,a,s){var l=t?r.clientY:r.clientX,u=t?n.height:n.width,c=t?n.top:n.left,f=t?n.bottom:n.right,_=!1;if(!a){if(s&&it<u*o){if(!Ge&&(He===1?l>c+u*i/2:l<f-u*i/2)&&(Ge=!0),Ge)_=!0;else if(He===1?l<c+it:l>f-it)return-He}else if(l>c+u*(1-o)/2&&l<f-u*(1-o)/2)return mn(e)}return _=_||a,_&&(l<c+u*i/2||l>f-u*i/2)?l>c+u/2?1:-1:0}function mn(r){return Z(d)<Z(r)?1:-1}function vn(r){for(var e=r.tagName+r.className+r.src+r.href+r.textContent,n=e.length,t=0;n--;)t+=e.charCodeAt(n);return t.toString(36)}function gn(r){ft.length=0;for(var e=r.getElementsByTagName("input"),n=e.length;n--;){var t=e[n];t.checked&&ft.push(t)}}function at(r){return setTimeout(r,0)}function kt(r){return clearTimeout(r)}mt&&x(document,"touchmove",function(r){(b.active||Oe)&&r.cancelable&&r.preventDefault()});b.utils={on:x,off:w,css:g,find:er,is:function(e,n){return!!te(e,n,e,!1)},extend:Zr,throttle:tr,closest:te,toggleClass:K,clone:nr,index:Z,nextTick:at,cancelNextTick:kt,detectDirection:ar,getChild:Fe,expando:R};b.get=function(r){return r[R]};b.mount=function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(b.utils=ie(ie({},b.utils),t.utils)),Qe.mount(t)})};b.create=function(r,e){return new b(r,e)};b.version=Ur;var $=[],Re,Ct,Tt=!1,xt,Et,pt,Ye;function bn(){function r(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return r.prototype={dragStarted:function(n){var t=n.originalEvent;this.sortable.nativeDraggable?x(document,"dragover",this._handleAutoScroll):this.options.supportPointer?x(document,"pointermove",this._handleFallbackAutoScroll):t.touches?x(document,"touchmove",this._handleFallbackAutoScroll):x(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var t=n.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?w(document,"dragover",this._handleAutoScroll):(w(document,"pointermove",this._handleFallbackAutoScroll),w(document,"touchmove",this._handleFallbackAutoScroll),w(document,"mousemove",this._handleFallbackAutoScroll)),Gt(),lt(),Jr()},nulling:function(){pt=Ct=Re=Tt=Ye=xt=Et=null,$.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,t){var o=this,i=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(i,a);if(pt=n,t||this.options.forceAutoScrollFallback||Ue||ue||Ve){St(n,this.options,s,t);var l=me(s,!0);Tt&&(!Ye||i!==xt||a!==Et)&&(Ye&&Gt(),Ye=setInterval(function(){var u=me(document.elementFromPoint(i,a),!0);u!==l&&(l=u,lt()),St(n,o.options,u,t)},10),xt=i,Et=a)}else{if(!this.options.bubbleScroll||me(s,!0)===oe()){lt();return}St(n,this.options,me(s,!1),!1)}}},se(r,{pluginName:"scroll",initializeByDefault:!0})}function lt(){$.forEach(function(r){clearInterval(r.pid)}),$=[]}function Gt(){clearInterval(Ye)}var St=tr(function(r,e,n,t){if(e.scroll){var o=(r.touches?r.touches[0]:r).clientX,i=(r.touches?r.touches[0]:r).clientY,a=e.scrollSensitivity,s=e.scrollSpeed,l=oe(),u=!1,c;Ct!==n&&(Ct=n,lt(),Re=e.scroll,c=e.scrollFn,Re===!0&&(Re=me(n,!0)));var f=0,_=Re;do{var h=_,v=A(h),m=v.top,E=v.bottom,H=v.left,C=v.right,L=v.width,G=v.height,ge=void 0,re=void 0,be=h.scrollWidth,Me=h.scrollHeight,W=g(h),Pe=h.scrollLeft,de=h.scrollTop;h===l?(ge=L<be&&(W.overflowX==="auto"||W.overflowX==="scroll"||W.overflowX==="visible"),re=G<Me&&(W.overflowY==="auto"||W.overflowY==="scroll"||W.overflowY==="visible")):(ge=L<be&&(W.overflowX==="auto"||W.overflowX==="scroll"),re=G<Me&&(W.overflowY==="auto"||W.overflowY==="scroll"));var Be=ge&&(Math.abs(C-o)<=a&&Pe+L<be)-(Math.abs(H-o)<=a&&!!Pe),ae=re&&(Math.abs(E-i)<=a&&de+G<Me)-(Math.abs(m-i)<=a&&!!de);if(!$[f])for(var ye=0;ye<=f;ye++)$[ye]||($[ye]={});($[f].vx!=Be||$[f].vy!=ae||$[f].el!==h)&&($[f].el=h,$[f].vx=Be,$[f].vy=ae,clearInterval($[f].pid),(Be!=0||ae!=0)&&(u=!0,$[f].pid=setInterval((function(){t&&this.layer===0&&b.active._onTouchMove(pt);var qe=$[this.layer].vy?$[this.layer].vy*s:0,ce=$[this.layer].vx?$[this.layer].vx*s:0;typeof c=="function"&&c.call(b.dragged.parentNode[R],ce,qe,r,pt,$[this.layer].el)!=="continue"||rr($[this.layer].el,ce,qe)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&_!==l&&(_=me(_,!1)));Tt=u}},30),dr=function(e){var n=e.originalEvent,t=e.putSortable,o=e.dragEl,i=e.activeSortable,a=e.dispatchSortableEvent,s=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var u=t||i;s();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(c.clientX,c.clientY);l(),u&&!u.el.contains(f)&&(a("spill"),this.onSpill({dragEl:o,putSortable:t}))}};function At(){}At.prototype={startIndex:null,dragStart:function(e){this.startIndex=e.oldDraggableIndex},onSpill:function(e){var n=e.dragEl,t=e.putSortable;this.sortable.captureAnimationState(),t&&t.captureAnimationState();var o=Fe(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(n,o):this.sortable.el.appendChild(n),this.sortable.animateAll(),t&&t.animateAll()},drop:dr};se(At,{pluginName:"revertOnSpill"});function Ft(){}Ft.prototype={onSpill:function(e){var n=e.dragEl,t=e.putSortable||this.sortable;t.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),t.animateAll()},drop:dr};se(Ft,{pluginName:"removeOnSpill"});b.mount(new bn);b.mount(Ft,At);var yn=b;z();function _n(r,e,n={}){let t;const{document:o=kr,...i}=n,a={onUpdate:c=>{En(e,c.oldIndex,c.newIndex,c)}},s=()=>{const c=typeof r=="string"?o?.querySelector(r):Dr(r);!c||t!==void 0||(t=new yn(c,{...a,...i}))},l=()=>{t?.destroy(),t=void 0},u=(c,f)=>{if(f!==void 0)t?.option(c,f);else return t?.option(c)};return Sr(s),Er(l),{stop:l,start:s,option:u}}function wn(r,e,n){const t=r.children[n];r.insertBefore(e,t)}function xn(r){r.parentNode&&r.parentNode.removeChild(r)}function En(r,e,n,t=null){t!=null&&(xn(t.item),wn(t.from,t.item,e));const o=pr(r),i=o?[...Bt(r)]:Bt(r);if(n>=0&&n<i.length){const a=i.splice(e,1)[0];yr(()=>{i.splice(n,0,a),o&&(r.value=i)})}}z();var Sn={class:"flex flex-col justify-start items-center flex-grow gap-4"},Dn={class:"flex justify-start items-start flex-grow-0 flex-shrink-0 relative gap-2 rounded-lg"},kn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-0.5"},Cn={class:"flex justify-start items-start self-stretch flex-grow-0 flex-shrink-0 relative gap-1.5"},Tn={class:"flex-grow w-full text-base font-medium text-center"},On=Q({__name:"TypeButton",props:{type:{type:Object,required:!0},selected:{type:Boolean,default:!1},className:{type:String,required:!1,default:""}},setup(r){const e=r,n=Se(()=>{let t="nomercy";switch(e.type?.value){case"music":t="noteDouble";break;case"tv":t="tv";break;case"image":t="picture";break;case"movie":t="film";break;default:t="nomercy"}return t});return(t,o)=>(S(),Y("div",{class:Kt([{"bg-white/11 dark:bg-black/8 outline outline-2 outline-focus hover:bg-focus/[0.15]":r.selected,"hover:bg-focus/[0.15]":!r.selected},"flex justify-start items-start flex-grow gap-1 px-2 py-4 rounded-xl"])},[p("div",Sn,[p("div",Dn,[D(he,{"class-name":r.className,icon:n.value},null,8,["class-name","icon"])]),p("div",kn,[p("div",Cn,[p("p",Tn,k(r.type.name),1)])])])],2))}}),In=On;z();var Nn={class:"my-6 text-sm text-surface-10"},$n=Q({__name:"DeleteFolderModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},libraryId:{type:String,required:!0},name:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},setup(r){const e=r,n=ve(),t=De();function o(){J().delete(`dashboard/libraries/${e.libraryId}/folders/${e.id}`).then(({data:i})=>{n.invalidateQueries({queryKey:["dashboard","libraries"]}),t.add({severity:i.status==="ok"?"success":"error",summary:X(i.status==="ok"?"Success":"Error"),detail:X(i.message,...i.args??[]),life:5e3}),e.close()}).catch(i=>{t.add({severity:"error",summary:X("Error"),detail:i.message,life:5e3}),e.close()})}return(i,a)=>{const s=Ke("Button");return S(),q(ht,{close:r.close,open:r.open,params:{folder:r.name},"max-width":"max-w-xl",title:"Delete folder {{folder}}"},{actions:N(()=>[D(s,{id:"yes",onclick:o,color:"red","end-icon":"trash",type:"button",variant:"contained"},{default:N(()=>[V(k(i.$t("Delete")),1)]),_:1}),D(s,{id:"no",onclick:r.close,color:"auto",type:"button",variant:"text"},{default:N(()=>[V(k(i.$t("Cancel")),1)]),_:1},8,["onclick"])]),default:N(()=>[p("div",Nn,k(i.$t("Are you sure you want to delete this folder?")),1)]),_:1},8,["close","open","params"])}}}),An=$n;z();var Fn={class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 gap-2 text-surface-1"},Mn={class:"flex flex-col justify-center items-center flex-grow gap-2"},Pn={class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 h-10 relative overflow-hidden gap-2 pl-3 pr-2.5 py-2.5 rounded-[10px] bg-surface-10/5 hover:bg-surface-12/5 active:bg-surface-12/5 text-surface-12/12 hover:text-surface-12"},Bn={class:"flex-grow w-available text-base font-semibold text-left"},qn=Q({__name:"FolderItem",props:Wt({folder:{type:Object,required:!0}},{modelValue:{type:Object,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const e=r,n=De(),t=ve(),o=Ot(r,"modelValue"),{data:i}=It({path:"dashboard/encoderProfiles",queryKey:["dashboard","encoderProfiles"]}),a=Se(()=>{switch(o.value.type){case"anime":return i.value?.filter(h=>h.container==="m3u8").map(h=>ke(h));case"movie":return i.value?.filter(h=>h.container==="m3u8").map(h=>ke(h));case"tv":return i.value?.filter(h=>h.container==="m3u8").map(h=>ke(h));case"music":return i.value?.filter(h=>h.container==="mp3"||h.container==="flac").map(h=>ke(h));default:return[]}}),s=B(a.value?.filter(h=>e.folder.folder?.encoder_profiles?.some(v=>v.id===h.id))??[]);ne([a,e],([h,v])=>{!h||!v||(s.value=h.filter(m=>v.folder.folder?.encoder_profiles.some(E=>E.id===m.id)))},{deep:!0});function l(h){const v=h.map(m=>ke(m));s.value=v,u(ke(e.folder),v)}function u(h,v){if(!o.value)return;const m=o.value.folder_library.map(E=>E.folder_id===h.folder_id?{...E,folder:{...E.folder,encoder_profiles:v.map(H=>H)}}:E);J().patch(`dashboard/libraries/${o.value.id}`,{folder_library:m}).then(()=>{t.invalidateQueries({queryKey:["dashboard","libraries"]})}).catch(E=>{n.add({severity:"error",summary:X("Error"),detail:E.message,life:5e3})})}ne(o,()=>{a.value&&(s.value=a.value.filter(h=>e.folder.folder?.encoder_profiles.some(v=>v.id===h.id)))});const c=B(!1);function f(){c.value=!0}function _(){c.value=!1}return(h,v)=>{const m=Ke("MultiSelect");return S(),Y(Ne,null,[p("div",Fn,[D(m,{id:"encoderProfiles","model-value":s.value,options:a.value,class:"w-[160px]","option-label":"name",placeholder:"Select","onUpdate:modelValue":l},null,8,["model-value","options"]),p("div",Mn,[p("div",Pn,[p("p",Bn,k(r.folder.folder.path),1),p("button",{class:"flex-grow-0 flex-shrink-0 cursor-pointer hover:text-surface-1",onClick:f},[D(he,{"class-name":"w-6 h-6",icon:"trash"})])])])]),D(An,{id:r.folder.folder.id,close:_,"library-id":o.value?.id,name:r.folder.folder.path,open:c.value},null,8,["id","library-id","name","open"])],64)}}}),Ln=qn;z();mr();var jn={class:"mx-auto flex w-full flex-col h-available"},Rn=Q({__name:"NewFolderModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},folder:{type:String,required:!0},setFolder:{type:Function,required:!0},library:{type:Object,required:!1}},setup(r){const e=r,n=hr(),t=ve(),o=De();function i(){J().post(`dashboard/libraries/${n.params.id??e.library?.id}/folders`,{path:e.folder}).then(({data:a})=>{t.invalidateQueries({queryKey:["dashboard","libraries"]}),o.add({severity:a.status==="ok"?"success":"error",summary:X(a.status==="ok"?"Success":"Error"),detail:X(a.message,...a.args),life:5e3}),e.setFolder("/"),e.close()}).catch(a=>{console.error("Error adding folder:",a),e.close()})}return(a,s)=>{const l=Ke("Button");return S(),q(ht,{close:r.close,open:r.open,"max-width":"max-w-5xl overflow-clip max-h-[60vh] h-[60vh]",title:"Add folder"},{actions:N(()=>[D(l,{id:"yes",onclick:i,color:"theme",type:"button",variant:"contained"},{default:N(()=>[V(k(a.$t("Add")),1)]),_:1}),D(l,{id:"no",onclick:r.close,color:"auto",type:"button",variant:"text"},{default:N(()=>[V(k(a.$t("Cancel")),1)]),_:1},8,["onclick"])]),default:N(()=>[p("div",jn,[D($r,{selected:r.folder,"set-selected":r.setFolder},null,8,["selected","set-selected"])])]),_:1},8,["close","open"])}}}),Yn=Rn;z();var Vn={class:"flex flex-col justify-start items-start flex-grow-0 flex-shrink-0 w-full relative gap-8 p-1 px-6"},Xn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-3"},zn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-6"},Hn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-4"},Gn={class:"grid grid-cols-4 justify-start items-start self-stretch gap-2"},Wn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-2"},Kn={class:"flex justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-2"},Un={class:"flex flex-col justify-start items-start flex-grow gap-1.5"},Qn={class:"flex justify-start items-center flex-grow-0 flex-shrink-0 relative gap-px"},Zn={class:"flex-grow-0 flex-shrink-0 text-sm font-medium text-left"},Jn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-3"},eo={class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 relative gap-2 rounded"},to={class:"flex-grow w-[501px] text-lg font-medium text-left"},ro={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-6"},no={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-2"},oo={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-2"},io={class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 relative gap-1"},ao={class:"flex-grow-0 flex-shrink-0 text-sm text-left"},lo={class:"flex w-full justify-end items-start self-stretch flex-grow-0 flex-shrink-0 gap-2 rounded-lg bg-white/[0.04] p-2"},so=Q({__name:"EditLibraryModal",props:Wt({open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},{modelValue:{type:Object,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const e=r,n=Ot(r,"modelValue"),t=ve(),o=De(),i=B(n.value?.title),a=Ut(i,500),s=B(n.value?.type??"movie");ne(n,m=>{m&&(i.value=m.title,s.value=m.type||"movie",n.value.folder_library||(n.value={...n.value,folder_library:[]}))},{deep:!0});const l=B([]),u=B("/");function c(m){u.value=m}const f=B(!1);function _(){f.value=!0}function h(){f.value=!1}function v(){J().patch(`dashboard/libraries/${n.value.id}`,{...n.value,subtitles:l.value.map(m=>m.iso_639_1),specialSeasonName:n.value.specialSeasonName}).then(()=>{t.invalidateQueries({queryKey:["dashboard","libraries"]}),e.close()}).catch(m=>{o.add({severity:"error",summary:X("Error"),detail:m.message,life:5e3}),e.close()})}return ne(a,m=>{m&&J().patch(`dashboard/libraries/${n.value.id}`,{title:m}).then(()=>{t.invalidateQueries({queryKey:["dashboard","libraries"]})}).catch(E=>{o.add({severity:"error",summary:X("Error"),detail:E.message,life:5e3})})}),ne(s,m=>{m&&J().patch(`dashboard/libraries/${n.value.id}`,{type:m}).then(()=>{t.invalidateQueries({queryKey:["dashboard","libraries"]})}).catch(E=>{o.add({severity:"error",summary:X("Error"),detail:E.message,life:5e3})})}),(m,E)=>{const H=Ke("InputText");return S(),Y(Ne,null,[D(ht,{id:"editLibraryModal",close:r.close,open:r.open,background:"","max-width":"max-w-[565px]","no-close":"",title:"Edit Library"},{actions:N(()=>[p("div",lo,[D(Ee,{id:"done",color:"theme",type:"button",variant:"contained",onClick:v},{default:N(()=>[V(k(m.$t("Done")),1)]),_:1})])]),default:N(()=>[p("div",Vn,[p("div",Xn,[p("div",zn,[p("div",Hn,[p("div",Gn,[(S(!0),Y(Ne,null,st(We(xr),C=>(S(),q(In,{key:C.value,selected:s.value===C.value,type:C,"class-name":"size-8",onClick:L=>s.value=C.value},null,8,["selected","type","onClick"]))),128))]),p("div",Wn,[p("div",Kn,[p("div",Un,[p("div",Qn,[p("p",Zn,k(m.$t("Library Title")),1),E[2]||(E[2]=p("p",{class:"flex-grow-0 flex-shrink-0 text-sm font-medium text-left text-focus"}," * ",-1))]),D(H,{id:"title",modelValue:i.value,"onUpdate:modelValue":E[0]||(E[0]=C=>i.value=C),class:"w-full",required:""},null,8,["modelValue"])])])])])])]),E[3]||(E[3]=p("div",{class:"flex-grow-0 flex-shrink-0 w-10 h-0.5 rounded bg-[#e2f0fd]/[0.08]"},null,-1)),p("div",Jn,[p("div",eo,[p("p",to,k(m.$t("Select one or more folders")),1)]),p("div",ro,[p("div",no,[p("div",oo,[p("button",{id:"save",class:"group/button flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 h-11 relative overflow-hidden gap-2 pl-3 pr-2.5 py-2.5 rounded-[10px] font-semibold transition-colors bg-surface-10/5 hover:bg-surface-12/5 active:bg-surface-12/5 text-surface-12/12 hover:text-surface-12",type:"button",onClick:_},[p("span",null,k(m.$t("Add folder")),1),D(he,{"class-name":"w-6 h-6 flex-grow-0 flex-shrink-0 ml-auto",icon:"folderAdd"})])]),n.value?.folder_library?(S(!0),Y(Ne,{key:0},st(n.value?.folder_library,C=>(S(),q(Ln,{key:C.folder_id,modelValue:n.value,"onUpdate:modelValue":E[1]||(E[1]=L=>n.value=L),folder:C},null,8,["modelValue","folder"]))),128)):Ae("",!0),p("div",io,[D(he,{"class-name":"w-4 h-4 flex-grow-0 flex-shrink-0",icon:"infoCircle"}),p("p",ao,k(m.$t("You can always add folder and change encoding profiles later")),1)])])])])])]),_:1},8,["close","open"]),D(Yn,{close:h,folder:u.value,library:n.value,open:f.value,"set-folder":c},null,8,["folder","library","open"])],64)}}}),uo=so;z();var co={class:"my-6 text-sm text-surface-10"},fo=Q({__name:"DeleteLibraryModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},name:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},setup(r){const e=r,n=ve(),t=De();function o(){J().delete(`dashboard/libraries/${e.id}`).then(({data:i})=>{t.add({severity:i.status==="ok"?"success":"error",summary:X(i.status==="ok"?"Success":"Error"),detail:X(i.message,...i.args??[]),life:5e3}),n.invalidateQueries({queryKey:["dashboard","libraries"]})}),e.close()}return(i,a)=>(S(),q(ht,{close:r.close,open:r.open,params:{library:e.name},"max-width":"max-w-xl",title:"Delete library {{library}}"},{actions:N(()=>[D(Ee,{id:"yes",onclick:o,color:"red","end-icon":"trash",type:"button",variant:"contained"},{default:N(()=>[V(k(i.$t("Delete")),1)]),_:1}),D(Ee,{id:"no",onclick:r.close,color:"auto",type:"button",variant:"text"},{default:N(()=>[V(k(i.$t("Cancel")),1)]),_:1},8,["onclick"])]),default:N(()=>[p("div",co,k(i.$t("Are you sure you want to delete this library?")),1)]),_:1},8,["close","open","params"]))}}),po=fo;z();var ho={class:"flex h-min children:cursor-default flex-col items-center rounded-lg w-inherit odd:bg-surface-12/5 even:bg-surface-12/2 dark:odd:bg-surface-12/5 dark:even:bg-surface-12/2 text-surface-12/80"},mo={class:"flex items-center gap-2 overflow-x-hidden py-2 pr-2 w-inherit overflow-y-show"},vo={class:"ml-2 h-auto w-8 p-2 handle"},go={class:"w-full line-clamp-1"},bo=Q({__name:"LibraryItem",props:{modelValue:{type:Object,required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(r){const e=Ot(r,"modelValue"),n=B(!1);function t(){n.value=!0}function o(){n.value=!1}const i=B(!1);function a(){i.value=!0}function s(){i.value=!1}const l=Se(()=>{let u;switch(e.value.type){case"music":u="noteDouble";break;case"tv":u="tv";break;case"image":u="camera";break;case"movie":u="film";break;default:u="nomercy"}return u});return(u,c)=>(S(),Y("div",ho,[p("div",mo,[p("button",vo,[D(he,{class:"h-6 w-6",icon:"menuDotsVertical"})]),D(he,{icon:l.value,class:"h-6 w-6"},null,8,["icon"]),p("span",go,k(e.value?.title),1),p("button",{class:"ml-auto flex justify-center items-center h-10 px-2.5 py-2 gap-2 rounded-lg text-sm select-none w-auto font-semibold leading-[100%] transition-all duration-150 button-text hover:outline-slate-11 dark:hover:outline-slate-11 outline-1 outline outline-transparent",type:"button",onClick:a},[D(he,{class:"h-6 w-6",icon:"folderEdit"})]),p("button",{class:"ml-auto flex justify-center items-center h-10 px-2.5 py-2 gap-2 rounded-lg text-sm select-none w-auto font-semibold leading-[100%] transition-all duration-150 button-text hover:outline-slate-11 dark:hover:outline-slate-11 outline-1 outline outline-transparent",type:"button",onClick:t},[D(he,{class:"h-6 w-6",icon:"folderRemove"})])]),e.value?(S(),q(uo,{key:0,id:e.value?.id,modelValue:e.value,"onUpdate:modelValue":c[0]||(c[0]=f=>e.value=f),close:s,open:i.value},null,8,["id","modelValue","open"])):Ae("",!0),e.value?(S(),q(po,{key:1,id:e.value?.id,close:o,name:e.value.title,open:n.value},null,8,["id","name","open"])):Ae("",!0)]))}}),yo=Or(bo,[["__scopeId","data-v-a50b62c6"]]);z();var _o={class:"flex flex-col overflow-hidden text-start h-available"},wo={class:"mb-2 text-xl font-semibold"},xo={class:"mb-4 text-sm"},Eo={key:0,class:"grid w-available h-available place-items-center overflow-hidden"},So={class:"mt-4 flex w-full justify-start"},Do=Q({__name:"Libraries",props:{setNextButtonLocked:{type:Function,required:!0}},setup(r){const e=r,n=ve(),{data:t,isLoading:o}=It({path:"dashboard/libraries",queryKey:["dashboard","libraries"]}),i=B(null),a=B(t.value??[]);ne(t,u=>{console.log("Libraries updated:",u),u&&(a.value=u,e.setNextButtonLocked(u?.length===0))});function s(){J().post("dashboard/libraries").then(()=>{n.invalidateQueries({queryKey:["dashboard","libraries"]})})}function l(){J().patch("dashboard/libraries/sort",{libraries:a.value.map((u,c)=>({id:u.id,order:c}))}).then(()=>{n.invalidateQueries({queryKey:["dashboard","libraries"]})})}return ne(a,()=>{l()}),_n(i,a,{animation:150,handle:".handle"}),(u,c)=>(S(),Y("div",_o,[p("h2",wo,k(u.$t("Organize your media library")),1),p("p",xo,k(u.$t("Add your media libraries to organize your content.")),1),We(o)?(S(),Y("div",Eo,[D(We(vr),{class:"ion-padding",name:"crescent"})])):Ae("",!0),p("div",{ref_key:"el",ref:i,class:"flex h-auto w-full flex-col overflow-y-auto text-start gap-1"},[(S(!0),Y(Ne,null,st(a.value,(f,_)=>(S(),q(yo,{key:f.id,modelValue:a.value[_],"onUpdate:modelValue":h=>a.value[_]=h},null,8,["modelValue","onUpdate:modelValue"]))),128))],512),p("div",So,[D(Ee,{id:"yes",color:"theme",type:"button",variant:"contained",onClick:s},{default:N(()=>[V(k(u.$t("Add media library")),1)]),_:1})])]))}}),ko=Do;z();var Co=Q({__name:"Finish",props:{setNextButtonLocked:{type:Function,required:!0}},setup(r){const{t:e}=Ir();return ve(),(n,t)=>null}}),To=Co;z();var Oo={class:"flex flex-col gap-2 h-available"},Io={class:"flex flex-col gap-2"},No={class:"mt-auto flex flex-col"},$o={class:"mb-4 text-sm"},Ao={class:"text-theme-10 hover:underline",href:"https://nomercy.tv/privacy-policy",target:"_blank"},Fo={class:"text-theme-10 hover:underline",href:"https://nomercy.tv/terms-of-service",target:"_blank"},Mo=Q({__name:"Base",props:{setNextButtonLocked:{type:Function,required:!0}},setup(r){const e=r,n=ve(),t=De(),{data:o}=It({path:"dashboard/server/info",queryKey:["serverinfo"]}),i=B(o.value?.server??""),a=Ut(i,500);ne(o,l=>{l&&(i.value=l.server)});function s(){J().patch("dashboard/server/info",{name:a.value}).then(({data:l})=>{t.add({severity:"success",summary:X("Success"),detail:X(l.message,...l.args??[]),life:5e3}),n.invalidateQueries({queryKey:["servers"]})})}return ne(a,(l,u)=>{!l||l===u||u===""||s()}),ne(i,l=>{e.setNextButtonLocked(!l)}),(l,u)=>{const c=Ke("InputText");return S(),Y("div",Oo,[p("div",Io,[u[1]||(u[1]=p("label",{for:"serverName"},"Server name",-1)),D(c,{id:"serverName",modelValue:i.value,"onUpdate:modelValue":u[0]||(u[0]=f=>i.value=f),class:"w-1/3",name:"Give your server a friendly name to help identify it."},null,8,["modelValue"])]),p("div",No,[p("p",$o,[V(k(l.$t("By using this NoMercy app, a NoMercy MediaServer, or any of our services, you agree to the"))+" ",1),p("a",Ao,k(l.$t("Privacy Policy")),1),V(" "+k(l.$t("and"))+" ",1),p("a",Fo,k(l.$t("Terms of Service")),1),u[2]||(u[2]=V(". ",-1))])])])}}}),Po=Mo;z();var Bo=Q({__name:"Desktop",setup(r){const e=De(),n=B(["Base info","Media libraries","Finish"]),t=B("Base info"),o=B(!1);async function i(){console.log("Finish"),await J().post("/dashboard/libraries/refresh").then(()=>{e.add({severity:"success",summary:X("Success"),detail:"Your media libraries are being scanned in the background.",life:16e3})}).catch(l=>{e.add({severity:"error",summary:"Error refreshing libraries",detail:l.message,life:16e3})}),await J().get("libraries").then(({data:l})=>{Cr(l.data),wr.value=!0,Tr.value=!0,qt.replace("/")}).catch(()=>{qt.replace({name:"Server offline"})})}function a(l){t.value=l}function s(l){o.value=l}return(l,u)=>(S(),q(We(_r),null,{default:N(()=>[D(We(br),{fullscreen:!0},{default:N(()=>[D(Hr,{"current-step":t.value,finish:i,"next-button-locked":o.value,"set-current-step":a,steps:n.value},{default:N(()=>[t.value==="Base info"?(S(),q(Po,{key:0,"set-next-button-locked":s})):t.value==="Media libraries"?(S(),q(ko,{key:1,"set-next-button-locked":s})):t.value==="Finish"?(S(),q(To,{key:2,"set-next-button-locked":s})):Ae("",!0)]),_:1},8,["current-step","next-button-locked","steps"])]),_:1})]),_:1}))}}),Ii=Bo;export{Ii as default};
