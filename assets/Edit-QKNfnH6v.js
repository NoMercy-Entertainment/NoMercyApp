import{$ as Ve,aa as ge,d as c,w as F,f as Q,j as C,c as oe,o as V,l as i,i as d,h as g,b as W,v as h,y as t,a0 as te,B as $,F as X,p as Y}from"./vue-ionic-DNlOg-eX.js";import{u as se}from"./useServerClient-CDyTS9IJ.js";import{_ as we}from"./DeleteEncoderProfileModal.vue_vue_type_script_setup_true_lang-C90ULAO6.js";import{_ as ye}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-BGCx-V1c.js";import"./vendor-C28OoIfY.js";import"./icons-BW5E66pf.js";import"./rxjs-BCp2L9Rn.js";import"./media-C2AqgyMX.js";import"./api-BBofn2cc.js";import"./swiper-D00Cnjmx.js";import"./index-NjjXUda8.js";import"./music-player-JWnzXDV1.js";import"./useInfiniteServerClient-B3vEkU8Q.js";import"./useMounted-tLTJ8WCA.js";import"./FloatingBackButton.vue_vue_type_script_setup_true_lang-D8j_NEKx.js";import"./OptimizedIcon.vue_vue_type_script_setup_true_lang-DOdXMHkh.js";import"./Button.vue_vue_type_script_setup_true_lang-Rs3Z5qEH.js";import"./ScrollContainer.vue_vue_type_script_setup_true_lang-B8B7EnXK.js";import"./RipperOverlay.vue_vue_type_script_setup_true_lang-CZJrulsj.js";import"./Button.vue_vue_type_script_setup_true_lang-Bl-eGSMs.js";const Pe={class:"block whitespace-nowrap text-sm font-medium"},he={key:0,class:"grid w-full grid-cols-12 gap-4"},Ce={key:1,class:"flex w-full flex-col"},$e={class:"flex w-full justify-between"},Ue={class:"block whitespace-nowrap text-sm font-medium"},ke={class:"grid h-auto w-full grid-cols-8 flex-wrap gap-2"},Se=["for"],Le=["for"],Ne=["for"],Ae=["for"],Be=["for"],Fe=["for"],Re=["for"],Te=["for"],Ie=["for"],je={class:"flex w-full justify-between"},Me={class:"mt-2 block whitespace-nowrap text-sm font-medium"},De={class:"grid h-auto w-full grid-cols-8 flex-wrap gap-2"},Ee=["for"],qe=["for"],Ke={class:"flex w-full justify-between"},Oe={class:"mt-2 block whitespace-nowrap text-sm font-medium"},ze={class:"grid h-auto w-full grid-cols-8 flex-wrap gap-2"},Ge=["for"],vl=Ve({__name:"Edit",setup(He){var ee,le,ae;const Z=ge(),{data:T,error:ue}=se({path:"dashboard/encoderProfiles",queryKey:["dashboard","encoderProfiles"]}),{data:U}=se({path:"dashboard/encoderProfiles/containers",queryKey:["dashboard","videoContainers"]}),n=c();F(T,l=>{l&&(n.value=l.find(a=>a.id===Z.params.id))}),Q(()=>{T.value&&(n.value=T.value.find(l=>l.id===Z.params.id))});const I=c(!1),ne=()=>{I.value=!0},de=()=>{I.value=!1},ie=()=>{window.history.back()},re=()=>{},k=c([{label:"audio",value:"audio"},{label:"video",value:"video"},{label:"image",value:"image"}]),j=c((ee=n.value)==null?void 0:ee.name),S=c((le=k.value)==null?void 0:le.find(l=>{var a;return l.value===((a=n.value)==null?void 0:a.type)})),b=c((ae=U.value)==null?void 0:ae.find(l=>{var a;return l.type===((a=n.value)==null?void 0:a.type)})),_=c([]),M=c([]),D=c([]),E=c([]),ce=c([]),q=c([]),K=c([]),R=c([]),O=c([]),z=c([]),G=c([]),w=c([]),H=c([]),y=c([]),J=c([]),pe=()=>{_.value.push({})},ve=()=>{w.value.push({})},me=()=>{y.value.push({})},fe=l=>{_.value.splice(l,1)},be=l=>{w.value.splice(l,1)},_e=l=>{y.value.splice(l,1)};Q(()=>{var l;S.value=k.value.find(a=>{var m;return a.value===((m=n.value)==null?void 0:m.type)}),b.value=(l=U.value)==null?void 0:l.find(a=>{var m;return a.type===((m=n.value)==null?void 0:m.type)})}),F(n,l=>{l&&(j.value=l.name)}),F(U,l=>{l&&(b.value=l.find(a=>a.value===n.value.container))});const x=l=>{var a,m,p,v,f,L,N,A,B;l&&(console.raw("container",l,k.value),S.value=k.value.find(s=>s.value===l.type),_.value=((a=n.value.videoProfiles)==null?void 0:a.map(s=>l.available_video_codecs.find(r=>r.value===s.codec)))??[],w.value=((m=n.value.audioProfiles)==null?void 0:m.map(s=>l.available_audio_codecs.find(r=>r.value===s.codec)))??[],y.value=((p=n.value.subtitleProfiles)==null?void 0:p.map(s=>l.available_subtitle_codecs.find(r=>r.value===s.codec)))??[],M.value=((v=n.value.videoProfiles)==null?void 0:v.map(s=>l.available_resolutions.find(r=>r.width===s.width)))??[],D.value=n.value.videoProfiles.map(s=>{var r;return(r=_.value.find(o=>o.value===s.codec))==null?void 0:r.color_spaces.find(o=>o.value===s.colorSpace)}),q.value=n.value.videoProfiles.map(s=>{var r;return(r=_.value.find(o=>o.value===s.codec))==null?void 0:r.tunes.find(o=>o.value===s.tune)}),K.value=n.value.videoProfiles.map(s=>{var r;return(r=_.value.find(o=>o.value===s.codec))==null?void 0:r.profiles.find(o=>o.value===s.profile)}),R.value=n.value.videoProfiles.map(s=>{var r;return(r=_.value.find(o=>o.value===s.codec))==null?void 0:r.presets.find(o=>o.value===s.preset)}),console.log("presets",R.value),J.value=w.value.map(s=>(s==null?void 0:s.available_languages)??[]),H.value=y.value.map(s=>(s==null?void 0:s.available_languages)??[]),E.value=((f=n.value.videoProfiles)==null?void 0:f.map(s=>s.crf))??[],G.value=((L=n.value.videoProfiles)==null?void 0:L.map(s=>s.bitrate))??[],O.value=((N=n.value.videoProfiles)==null?void 0:N.map(s=>s.playlistName))??[],z.value=((A=n.value.videoProfiles)==null?void 0:A.map(s=>s.segmentName))??[],ce.value=((B=n.value.videoProfiles)==null?void 0:B.map(s=>s.width))??[])};return F(b,x),Q(()=>{var l;x(b.value),b.value=(l=U.value)==null?void 0:l.find(a=>a.value===n.value.container)}),F(_,l=>{l&&console.log("videoCodecs",l)}),(l,a)=>{var A;const m=C("InputText"),p=C("FloatLabel"),v=C("Select"),f=C("Button"),L=C("InputNumber"),N=C("MultiSelect");return V(),oe(ye,{gridStyle:4,error:te(ue),title:"Encoder profile: {{name}}",params:{name:(A=n.value)==null?void 0:A.name}},{cta:i(()=>a[3]||(a[3]=[])),actions:i(()=>[t(f,{type:"button",id:"remove",variant:"text",class:"children:text-gray-400 children:transition-colors children:duration-100 children:hover:text-red-dark-8",color:"text-auto-alpha-11",startIcon:"folderRemove",onClick:ne},{default:i(()=>[$(h(l.$t("Remove")),1)]),_:1}),t(f,{type:"button",id:"cancel",variant:"text",color:"white",onClick:ie},{default:i(()=>[$(h(l.$t("Cancel")),1)]),_:1}),t(f,{type:"submit",id:"save",color:"theme",class:"ml-auto",form:"myForm",onClick:re},{default:i(()=>[$(h(l.$t("Save")),1)]),_:1})]),default:i(()=>{var B,s,r;return[d("span",Pe,h(l.$t("Profiles settings")),1),n.value?(V(),g("div",he,[t(p,{variant:"on",class:"col-span-3"},{default:i(()=>[t(m,{modelValue:j.value,"onUpdate:modelValue":a[0]||(a[0]=o=>j.value=o),id:"name",name:"Name",class:"w-full"},null,8,["modelValue"]),a[4]||(a[4]=d("label",{for:"name"},"Name",-1))]),_:1}),t(p,{variant:"on",class:"col-span-2"},{default:i(()=>[t(v,{modelValue:S.value,"onUpdate:modelValue":a[1]||(a[1]=o=>S.value=o),id:"type",class:"w-full",options:k.value,optionLabel:"label"},null,8,["modelValue","options"]),a[5]||(a[5]=d("label",{for:"type"},"Media type",-1))]),_:1}),t(p,{variant:"on",class:"col-span-2"},{default:i(()=>{var o;return[t(v,{modelValue:b.value,"onUpdate:modelValue":a[2]||(a[2]=e=>b.value=e),id:"container",class:"w-full",options:((o=te(U))==null?void 0:o.filter(e=>{var u;return e.type===((u=S.value)==null?void 0:u.value)}))??[],optionLabel:"label"},null,8,["modelValue","options"]),a[6]||(a[6]=d("label",{for:"container"},"Container",-1))]}),_:1})])):W("",!0),n.value?(V(),g("div",Ce,[d("div",$e,[d("span",Ue,h(l.$t("Video Profiles")),1),t(f,{type:"button",onClick:pe,id:"addVideoProfile"},{default:i(()=>a[7]||(a[7]=[$("Add Video Profile")])),_:1})]),(V(!0),g(X,null,Y(_.value,(o,e)=>(V(),g("div",{key:e,class:"m-2 mt-2 ml-0 flex w-full rounded-md border-white/5 p-4 border-1 odd:bg-auto-1/5 even:bg-auto-2/2"},[d("div",ke,[t(p,{variant:"on",class:"col-span-2"},{default:i(()=>{var u;return[t(v,{id:`videoProfiles_${e}`,label:"Codec",class:"col-span-2",modelValue:_.value[e],"onUpdate:modelValue":P=>_.value[e]=P,optionLabel:"label",options:((u=b.value)==null?void 0:u.available_video_codecs)??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),d("label",{for:`videoProfiles_${e}`},"Codec",8,Se)]}),_:2},1024),t(p,{variant:"on",class:"col-span-2"},{default:i(()=>{var u;return[t(v,{id:`resolutions_${e}`,label:"Resolution",class:"col-span-2",modelValue:M.value[e],"onUpdate:modelValue":P=>M.value[e]=P,optionLabel:"name",options:((u=b.value)==null?void 0:u.available_resolutions)??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),d("label",{for:`resolutions_${e}`},"Resolution",8,Le)]}),_:2},1024),t(p,{variant:"on",class:"col-span-2"},{default:i(()=>[t(v,{id:`colorSpaces_${e}`,class:"col-span-2",modelValue:D.value[e],"onUpdate:modelValue":u=>D.value[e]=u,optionLabel:"label",options:(o==null?void 0:o.color_spaces)??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),d("label",{for:`colorSpaces_${e}`},"Colorspace",8,Ne)]),_:2},1024),t(p,{variant:"on",class:"col-span-2"},{default:i(()=>[t(v,{id:`profiles_${e}`,l:"",class:"col-span-2",modelValue:K.value[e],"onUpdate:modelValue":u=>K.value[e]=u,optionLabel:"label",options:(o==null?void 0:o.profiles)??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),d("label",{for:`profiles_${e}`},"Profile",8,Ae)]),_:2},1024),t(p,{variant:"on",class:"col-span-2"},{default:i(()=>[t(v,{id:`presets_${e}`,l:"",class:"col-span-2",modelValue:R.value[e],"onUpdate:modelValue":u=>R.value[e]=u,optionLabel:"label",options:(o==null?void 0:o.presets)??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),d("label",{for:`presets_${e}`},"Preset",8,Be)]),_:2},1024),t(p,{variant:"on",class:"col-span-2"},{default:i(()=>[t(v,{id:`tunes_${e}`,class:"col-span-2",modelValue:q.value[e],"onUpdate:modelValue":u=>q.value[e]=u,optionLabel:"label",options:(o==null?void 0:o.tunes)??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),a[8]||(a[8]=d("label",{for:"`tunes_${index}`"},"Tune",-1))]),_:2},1024),t(p,{variant:"on",class:"col-span-2"},{default:i(()=>[t(L,{id:`crfs_${e}`,type:"number",min:0,max:51,class:"w-full",modelValue:E.value[e],"onUpdate:modelValue":u=>E.value[e]=u},null,8,["id","modelValue","onUpdate:modelValue"]),d("label",{for:`crfs_${e}`},"CRF",8,Fe)]),_:2},1024),t(p,{variant:"on",class:"col-span-2"},{default:i(()=>[t(L,{id:`bitrates_${e}`,type:"number",min:0,max:1e6,class:"w-full",modelValue:G.value[e],"onUpdate:modelValue":u=>G.value[e]=u},null,8,["id","modelValue","onUpdate:modelValue"]),d("label",{for:`bitrates_${e}`},"Bitrate",8,Re)]),_:2},1024),t(p,{variant:"on",class:"col-span-4"},{default:i(()=>[t(m,{id:`segmentNames_${e}`,class:"w-full",modelValue:z.value[e],"onUpdate:modelValue":u=>z.value[e]=u},null,8,["id","modelValue","onUpdate:modelValue"]),d("label",{for:`segmentNames_${e}`},"Segment name",8,Te)]),_:2},1024),t(p,{variant:"on",class:"col-span-4"},{default:i(()=>[t(m,{id:`playlistNames_${e}`,class:"w-full",modelValue:O.value[e],"onUpdate:modelValue":u=>O.value[e]=u},null,8,["id","modelValue","onUpdate:modelValue"]),d("label",{for:`playlistNames_${e}`},"Playlist name",8,Ie)]),_:2},1024)]),t(f,{type:"button",onClick:()=>fe(e),id:"addVideoProfile",class:"col-span-2",variant:"text","end-icon":"trash"},null,8,["onClick"])]))),128)),d("div",je,[d("span",Me,h(l.$t("Audio Profiles")),1),t(f,{type:"button",onClick:ve,id:"addAudioProfile"},{default:i(()=>a[9]||(a[9]=[$("Add Audio Profile")])),_:1})]),(V(!0),g(X,null,Y(w.value,(o,e)=>(V(),g("div",{key:e,class:"m-2 mt-2 ml-0 flex w-full rounded-md border-white/5 p-4 border-1 odd:bg-auto-1/5 even:bg-auto-2/2"},[d("div",De,[t(p,{variant:"on",class:"col-span-2"},{default:i(()=>{var u;return[t(v,{id:`audioCodecs_${e}`,class:"col-span-2",optionLabel:"label",modelValue:w.value[e],"onUpdate:modelValue":P=>w.value[e]=P,options:((u=b.value)==null?void 0:u.available_audio_codecs)??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),d("label",{for:`audioCodecs_${e}`},"Codec",8,Ee)]}),_:2},1024),t(p,{variant:"on",class:"col-span-2"},{default:i(()=>[t(N,{id:`allowedAudioLanguages_${e}`,class:"col-span-2",optionLabel:"label",modelValue:H.value[e],"onUpdate:modelValue":u=>H.value[e]=u,options:(o==null?void 0:o.available_languages)??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),d("label",{for:`allowedAudioLanguages_${e}`},"Allowed languages",8,qe)]),_:2},1024)]),t(f,{type:"button",onClick:()=>be(e),id:"addVideoProfile",class:"col-span-2",variant:"text","end-icon":"trash"},null,8,["onClick"])]))),128)),d("div",Ke,[d("span",Oe,h(l.$t("Subtitle Profiles")),1),t(f,{type:"button",onClick:me,id:"addSubtitleProfile"},{default:i(()=>a[10]||(a[10]=[$("Add Subtitle Profile")])),_:1})]),(V(!0),g(X,null,Y(y.value,(o,e)=>(V(),g("div",{key:e,class:"m-2 mt-2 ml-0 flex w-full rounded-md border-white/5 p-4 border-1 odd:bg-auto-1/5 even:bg-auto-2/2"},[d("div",ze,[t(p,{variant:"on",class:"col-span-2"},{default:i(()=>{var u;return[t(v,{modelValue:y.value[e],"onUpdate:modelValue":P=>y.value[e]=P,id:"subtitleProfiles",optionLabel:"label",class:"col-span-2",options:((u=b.value)==null?void 0:u.available_subtitle_codecs)??[]},null,8,["modelValue","onUpdate:modelValue","options"]),a[11]||(a[11]=d("label",{for:"subtitleProfiles"},"Codec",-1))]}),_:2},1024),t(p,{variant:"on",class:"col-span-2"},{default:i(()=>[t(N,{modelValue:J.value[e],"onUpdate:modelValue":u=>J.value[e]=u,id:`allowedSubtitleLanguages_${e}`,class:"col-span-2",optionLabel:"label",options:(o==null?void 0:o.available_languages)??[],multiple:""},null,8,["modelValue","onUpdate:modelValue","id","options"]),d("label",{for:`allowedSubtitleLanguages_${e}`},"Allowed languages",8,Ge)]),_:2},1024)]),t(f,{type:"button",onClick:()=>_e(e),id:"addVideoProfile",class:"col-span-2",variant:"text","end-icon":"trash"},null,8,["onClick"])]))),128))])):W("",!0),(B=n.value)!=null&&B.id?(V(),oe(we,{key:2,id:((s=n.value)==null?void 0:s.id)??"",name:((r=n.value)==null?void 0:r.name)??"",close:de,open:I.value},null,8,["id","name","open"])):W("",!0)]}),_:1},8,["error","params"])}}});export{vl as default};
