import{C as l,Ct as e,Et as B,K as a,S as d,T as p,U as T,X as I,c as v,it as q,j as h,k as s,mt as C,ot as V,w as f,x}from"./i18n-Rm1NkeNf.js";import"./ionic-vX7GXDhi.js";import"./vue-core-D-3YrIBp.js";import"./primevue-DkuV93HA.js";import{Aa as E,At as $,Dt as R,H as S,Ki as K,Na as H,V as J,Y as r,b as n,dt as Q,ft as w,g as U,hi as X,jt as M,kt as c,pt as z,qi as Y,st as P,xa as L}from"./index-nwvNBojr.js";import{o as m}from"./sidebar-0N2uvkvI.js";import{t as A}from"./MusicButton-DkfG7Mbm.js";import"./BannerButton-ClXgoIg9.js";import{t as Z}from"./MediaLikeButton-DzYt_4rT.js";import{n as F,r as G,t as W}from"./TrackLinks-DPQfLLGt.js";import{a as ee,c as te,i as ae,n as re,o as se,r as le,s as ue,t as ie}from"./EqButton-DKCi4_2k.js";import{t as oe}from"./SliderBar-CEBnH4HL.js";import{t as ne}from"./Marquee-D5r-pffH.js";v();var ce=h({__name:"VolumeButton",setup(y){function i(u){if(u?.stopPropagation(),!L.value.features?.nomercyConnect){S.toggleMute();return}$.value?.invoke("PlaybackCommand","mute",!P.value)}return(u,o)=>(a(),l(A,{onclick:i,label:"Mute","no-tooltip":""},{default:V(()=>[(e(M)?.muted_state===void 0?e(P):e(M).muted_state)?(a(),l(n,{key:0,class:"h-6 w-6",icon:"volumeMuted"})):e(c)===0?(a(),l(n,{key:1,class:"h-6 w-6",icon:"volumeZero"})):e(c)>30&&e(c)<=70?(a(),l(n,{key:2,class:"h-6 w-6",icon:"volumeTwo"})):e(c)>70?(a(),l(n,{key:3,class:"h-6 w-6",icon:"volumeThree"})):(a(),l(n,{key:4,class:"h-6 w-6",icon:"volumeOne"}))]),_:1}))}}),de=ce;v();var _e=h({__name:"VolumeSlider",setup(y){const i=C(0);q(H(i,50),o=>{$.value?.invoke("ChangeVolumeCommand",o)});function u(o){i.value=o,c.value=o,J.setVolume(i.value)}return(o,k)=>(a(),l(oe,{percentage:e(c),value:e(c),min:0,step:1,max:100,onInput:k[0]||(k[0]=b=>u(Number(b.target.value)))},null,8,["percentage","value"]))}}),fe=_e;v();var me=["data-size"],pe=["data-size"],ve=h({__name:"VolumeContainer",setup(y){return(i,u)=>(a(),p("div",{class:"mr-2 flex w-32 min-w-28 items-center gap-2","data-size":e(w)},[s(de),d("div",{class:"w-full h-full items-center flex full:mb-2 !mb-0","data-size":e(w)},[s(fe)],8,pe)],8,me))}}),he=ve;v();var ye=h({__name:"LyricsButton",setup(y){function i(u){u?.stopPropagation(),R()}return(u,o)=>(a(),l(A,{onclick:i,label:"Lyrics"},{default:V(()=>[e(Q)?(a(),l(n,{key:0,class:"h-6 w-6 text-focus",icon:"lyrics"})):(a(),l(n,{key:1,class:"h-6 w-6",icon:"lyrics"}))]),_:1}))}}),ke=ye;v();var ge=["data-music","data-sidebar","inert"],xe={key:0,class:"flex h-full w-full items-center gap-8 music-showing:transition-all music-showing:duration-75"},we={key:0,class:"mx-4 flex flex-col overflow-hidden gap-0.5 w-available hover-animate-pause"},be=["data-size"],Be={class:"flex justify-center"},Ce={class:"flex flex-shrink-0 flex-grow-0 items-center justify-center gap-2"},Se=["data-size"],Ve=h({__name:"MusicPlayerDesktop",setup(y){const i=C(),u=C(!0),o=E("nmplayer-music-supports-audio-context",!1),k=x(()=>m.value==="open"?100/4:m.value==="closed"?100/3.2:100/3),b=x(()=>100/3),j=x(()=>m.value==="open"?100/2.9:(m.value==="closed",100/3)),D=x(()=>`/music/album/${r.value?.album_track.at(0)?.id}`);function N(t){if(t)return JSON.stringify({id:t?.id,Artist:t?.Artist,host:t.host,track:`${t.libraryId}${t.folder}${t.filename}`,type:t?.type,favorite_track:t?.favorite_track,Album:t?.Album,playlists:t?.playlists})}async function O(){r.value&&await K().post(`music/tracks/${r.value?.id}/playback`)}return T(()=>{Y.value&&(S.on?.("song",t=>{t&&(u.value=!0,t&&X(`${t.name} - ${t.artist_track.at(0)?.name} - ${t.album_track.at(0)?.name}`),i.value=N(Object.keys(t).filter(_=>_!=="lyrics").reduce((_,g)=>(_[g]=t[g],_),{})))}),S.on?.("time",t=>{Math.floor(t.percentage)===50&&u.value&&(u.value=!1,L.value.features?.nomercyConnect||O())}))}),(t,_)=>{const g=I("RouterLink");return a(),p("div",{id:"fullPlayer","data-music":e(z),"data-sidebar":e(m),inert:e(z)==="hidden",class:"bg-surface-12/3 hidden h-0 music-showing:h-20 flex-shrink-0 flex-grow-0 flex-row items-center justify-start gap-12 self-stretch pr-6 sidebar-closed:ml-16 sidebar-open:ml-64 rounded-lg m-2 pl-4 mx-5 transition-all duration-200 sm:flex 2xl:sidebar-open:ml-[16.3rem]"},[e(r)?(a(),p("div",xe,[d("div",{id:"left",style:B({width:`${k.value}%`}),class:"flex flex-grow items-center justify-start transition-width duration-200 gap-2 overflow-clip h-16","data-target":"track"},[s(g,{to:D.value},{default:V(()=>[e(r)?(a(),l(U,{key:0,data:e(r),size:100,"class-name":"w-14 h-14 max-h-14 !max-w-14 overflow-clip cursor-pointer"},null,8,["data"])):f("",!0)]),_:1},8,["to"]),e(r)?(a(),p("div",we,[s(ne,{text:e(r)?.name},null,8,["text"]),(a(),p("div",{key:e(r).id,"data-size":e(w),class:"inline-flex gap-1 overflow-hidden whitespace-nowrap text-xs w-available line-clamp-1 hover-animate-pause"},[e(r)?(a(),l(W,{id:e(r).id,key:e(r).id,data:e(r).artist_track,suffix:"player",type:"artists"},null,8,["id","data"])):f("",!0)],8,be))])):f("",!0),(a(),l(Z,{key:e(r).id,data:e(r),class:"hidden sm:flex mr-1",color:"var(--color-theme-8)",type:"music"},null,8,["data"]))],4),d("div",{id:"center",style:B({width:`${b.value}%`}),class:"flex w-full flex-grow flex-col items-center justify-start transition-width duration-200"},[d("div",Be,[d("div",Ce,[s(le),s(ue),s(F,{class:"children:h-10 h-12 children:w-10 w-12 !bg-surface-12/4 hover:!bg-surface-12/6"}),s(te),s(ae)])]),s(se)],4),d("div",{id:"right","data-size":e(w),style:B({width:`${j.value}%`}),class:"relative flex flex-grow items-center justify-end gap-2 transition-width duration-200"},[s(re),s(ke),s(ee),e(o)?(a(),l(ie,{key:0})):f("",!0),s(G),s(he)],12,Se)])):f("",!0)],8,ge)}}}),Ee=Ve;export{Ee as default};
