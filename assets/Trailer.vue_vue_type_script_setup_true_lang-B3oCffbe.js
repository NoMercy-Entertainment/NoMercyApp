import{aG as L,K as n,az as B,cI as I,cJ as U,cK as S,bJ as H,cu as K,cL as P,bx as T,ch as D,c as F,o as N,a as d,aI as $,cM as A}from"./index-Dt4h7nLc.js";import{n as J}from"./subtitles-octopus-DEr3Wy_z.js";import{D as M}from"./desktopUIPlugin-BT6M2S1L.js";import{K as R}from"./keyHandlerPlugin-BlnNHO5h.js";const V=["data-music","data-sidebar"],O=L({__name:"Trailer",props:{videos:{type:Array,required:!0},toggle:{type:Function,required:!0},open:{type:Boolean,required:!0},title:{type:String,required:!0},index:{type:Number,required:!0},incrementTrailerIndex:{type:Function,required:!0}},setup(i){const e=i,q=n(),o=n(),a=n();return B(()=>{var u,c,p,v,m,g,f,b,y,x,k,w,h;if(o.value=I.value,U(),S(!0),!((u=e.videos[e.index])!=null&&u.src))return;const l={muted:!1,controls:!1,autoPlay:!0,chapters:!1,preload:"auto",playlist:[{id:e.videos[e.index].src,image:`https://trailer.nomercy.tv/${e.videos[e.index].src}/${e.videos[e.index].src}.jpg`,file:`https://trailer.nomercy.tv/${e.videos[e.index].src}/${e.videos[e.index].src}.webm`,title:`${e.videos[e.index].name.toLocaleLowerCase().includes(e.title.toLocaleLowerCase())?"":`${e.title} - `}${e.videos[e.index].name}`.toTitleCase(),duration:"",description:"",tracks:[{label:"full",file:`https://trailer.nomercy.tv/${e.videos[e.index].src}/${e.videos[e.index].src}.en.vtt`,language:"eng",kind:"subtitles"}]}],playbackRates:[]};a.value=J("trailer").setup(l),(c=a.value)==null||c.once("back",()=>{e.toggle()});const t=new M;(p=a.value)==null||p.registerPlugin("desktopUI",t),(v=a.value)==null||v.usePlugin("desktopUI");const s=new R;(m=a.value)==null||m.registerPlugin("keyHandler",s),(g=a.value)==null||g.usePlugin("keyHandler"),window.trailer=H(a.value),(f=a.value)==null||f.once("ready",()=>{var r;K.value&&((r=a.value)==null||r.enterFullscreen())}),(b=a.value)==null||b.on("ended",()=>{P(o.value),e.toggle()}),(y=a.value)==null||y.on("remove",()=>{e.toggle(),e.incrementTrailerIndex()}),(x=a.value)==null||x.on("error",()=>{e.toggle()}),(k=a.value)==null||k.on("close",()=>{e.toggle()}),(w=a.value)==null||w.on("captionsChanged",r=>{r.track==-1?localStorage.setItem("trailerSubtitles","off"):localStorage.setItem("trailerSubtitles",r.track)}),(h=a.value)==null||h.on("play",()=>{var r,C;localStorage.getItem("trailerSubtitles")=="off"?(r=a.value)==null||r.setCurrentCaption(-1):(C=a.value)==null||C.setCurrentCaption(parseInt(localStorage.getItem("trailerSubtitles")??"-1",10))}),T.addListener("backButton",e.toggle)}),D(()=>{var l;if(P(o.value),S(!1),a.value)try{(l=a.value)==null||l.dispose()}catch{}}),(l,t)=>(N(),F("div",{onClick:t[1]||(t[1]=(...s)=>i.toggle&&i.toggle(...s)),class:"fixed h-full w-full overflow-hidden rounded-lg bg-black/50"},[d("div",{"data-music":$(A),"data-sidebar":$(I),class:"absolute w-screen h-available sm:w-auto sm:overflow-hidden sm:inset-1/2 sm:aspect-video sm:-translate-y-[50%] sidebar-closed:sm:h-full sidebar-closed:sm:max-w-[90vw] sidebar-closed:sm:max-h-[93%] sidebar-closed:px-4 sidebar-closed:py-2 sidebar-closed:xl:px-[1.8rem] sidebar-closed:xl:py-4 sm:-translate-x-[50%] sidebar-open:h-5/6 sidebar-open:px-10 sidebar-open:py-6 sidebar-open:xl:px-[2.8rem] sidebar-open:xl:py-6"},[d("div",{ref_key:"trailerContainer",ref:q,onClick:t[0]||(t[0]=s=>s.stopPropagation()),class:"relative rounded-2xl flex overflow-clip children:overflow-clip h-auto top-1/2 -translate-y-1/2 w-full sm:h-full children:!w-full children:!h-auto children:!aspect-video"},t[2]||(t[2]=[d("div",{id:"trailer",class:"group nomercyplayer"},null,-1)]),512)],8,V)]))}});export{O as _};
//# sourceMappingURL=Trailer.vue_vue_type_script_setup_true_lang-B3oCffbe.js.map
