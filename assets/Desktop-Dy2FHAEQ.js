import{C as p,Et as F,G as $,J as u,K as j,Ot as L,S as c,T as C,Tt as e,X as A,c as D,ct as O,g as G,gt as H,j as K,k as V,ot as f,w as M,x as i,yt as U}from"./i18n-Cs-AFcrY.js";import"./ionic-XwZpO7IE.js";import{I as X,P as J}from"./vue-core-CKeWI2Kt.js";import"./primevue-DNc5dNs0.js";import"./query-28IwY2wK.js";import{t as Q}from"./esm-C_OAQAej.js";import{Br as Y,Hn as Z,Kn as q,Qn as v,Un as w,Vn as ee,Wi as S,X as B,Zn as h,_i as te}from"./index-BnnbGJJT.js";import"./useInfiniteServerClient-BaqYBifM.js";import{t as ae}from"./useServerClient-BaNodTh9.js";import"./DropdownMenu-DGdHKLP4.js";import{t as re}from"./ScrollContainer-DGY1ZpQv.js";import"./MusicButton-v8SrJ9sU.js";import"./BannerButton-C04tAEET.js";import"./MediaLikeButton-BQrqSND8.js";import"./Marquee-DvLhCcT0.js";import"./TrackLinks-VbZtnAiK.js";import"./BigPlayButton-c0h-7iRR.js";import"./EqSpinner-D10KcGGk.js";import{t as se}from"./NotFound-BjbZz_XB.js";import"./ShareButton-CFJoKBDH.js";import{i as oe,n as ie,r as le,t as ue}from"./TrackRow-CYBDacru.js";D();J();var ne={key:0,ref:"main",class:"flex flex-col w-available h-available sm:rounded-2xl"},de={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},me=K({__name:"Desktop",setup(pe){const o=X(),y=i(()=>o.path.startsWith("/music/album")),_=i(()=>o.path.startsWith("/music/artist")),g=i(()=>o.path.startsWith("/music/playlists")),k=i(()=>o.path.startsWith("/music/tracks")),x=i(()=>o.path.startsWith("/music/genres")),W=i(()=>y.value?"album":_.value?"artist":g.value?"playlist":k.value?"favorite":x.value?"genre":"unknown"),I=i(()=>String(o.params.id??"")),{data:r,isError:N}=ae({path:o.fullPath}),l=U([]),n=H(""),T=Q(i(()=>{const t=ee.value??null;return{count:l.value?.length??0,getScrollElement:()=>t,estimateSize:()=>64,overscan:10,initialRect:{width:0,height:800}}}));f(r,t=>{t&&(te(t?.name??null),d(t?.tracks??[],v.value,h.value,n.value),w(t?.color_palette?.cover))},{immediate:!0}),f(h,t=>{d(r.value?.tracks??[],v.value,t,n.value)}),f(v,t=>{d(r.value?.tracks??[],t,h.value,n.value)}),f(n,t=>{d(r.value?.tracks??[],v.value,h.value,t)});function d(t,s,a,m){const E=Y(t??[],s,a,q);m===""?l.value=E:l.value=E?.filter(b=>b.name?.toLowerCase().includes(m?.toLowerCase?.())||b.artist_track?.some(R=>R.name.toLowerCase().includes(m?.toLowerCase?.()))||b.album_track?.[0]?.name.toLowerCase().includes(m?.toLowerCase?.()))??[]}$(()=>{r.value?.color_palette?.cover&&w(r.value?.color_palette?.cover)}),j(()=>{document.getElementById("navbar")&&(document.getElementById("navbar").style.display="flex"),w(null),Z(null)});const z=H();function P(){const s=z.value?.$el,a=s?.firstChild;!s||!a||(Math.ceil(s.getBoundingClientRect()?.top??500)<=67?(a.style.background="var(--color-theme-8)",s.style.color="white"):(a.style.background="",s.style.color=""))}return(t,s)=>e(N)&&!e(r)?(u(),p(se,{key:0})):(u(),p(re,{key:1,"auto-hide":!0,static:!0,onScroll:P},{default:O(()=>[!e(o).params.id||e(o).params.id&&e(r)?.id===e(o).params.id?(u(),C("div",ne,[V(le,{data:e(r)},null,8,["data"]),c("div",de,[s[1]||(s[1]=c("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),(u(),p(oe,{key:e(r)?.id,data:e(r),filter:n.value,onFilterChange:s[0]||(s[0]=a=>n.value=a)},null,8,["data","filter"])),c("div",{class:F([{"pb-24":e(S)&&!e(B),"pb-40":e(S)&&e(B),"pb-4 sm:pb-4":!e(S)&&e(B)},"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-3 flex-grow-1 gap-0.5 sm:p-4"])},[(u(),p(ie,{key:e(r)?.id,ref_key:"sortHeader",ref:z,"is-album-route":y.value,"is-artist-route":_.value,"is-playlists-route":g.value,"is-favorites-route":k.value,"is-genres-route":x.value},null,8,["is-album-route","is-artist-route","is-playlists-route","is-favorites-route","is-genres-route"])),c("div",{style:L({height:`${e(T).getTotalSize()}px`,width:"100%",position:"relative"})},[(u(!0),C(G,null,A(e(T).getVirtualItems(),a=>(u(),C("div",{key:l.value[a.index]?.id+l.value[a.index]?.favorite,style:L({position:"absolute",top:0,left:0,width:"100%",height:`${a.size}px`,transform:`translateY(${a.start}px)`})},[V(ue,{data:l.value[a.index],"display-list":l.value,index:a.index,"is-album-route":y.value,"is-artist-route":_.value,"is-playlists-route":g.value,"is-favorites-route":k.value,"is-genres-route":x.value,"route-type":W.value,"route-param-id":I.value},null,8,["data","display-list","index","is-album-route","is-artist-route","is-playlists-route","is-favorites-route","is-genres-route","route-type","route-param-id"])],4))),128))],4)],2)])],512)):M("",!0)]),_:1}))}}),Ie=me;export{Ie as default};
