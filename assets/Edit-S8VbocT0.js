import{$ as O,Ht as I,In as U,Rn as r,Sn as Q,Tn as S,Wn as u,Y as A,Zn as s,cn as a,kn as B,nn as D,rn as F,sn as _,tn as o,tr as d,un as M,y as H,yn as P}from"./index-04Sh3wNb.js";import"./dist-CVoPesok.js";import"./esm-BuFVrMo0.js";import"./esm-9iWgK55i.js";import"./esm-cDzTb79E.js";import"./esm-BfF1RlcU.js";import"./dist-B3n7-doU.js";import"./focus-visible-CHAJCf_J.js";import"./index5-B30D6T27.js";import"./client-rtF7IPPI.js";import"./ionic-global--aoJHCDL.js";import"./hardware-back-button-h528z6zo.js";import"./index3-CSo3jo06.js";import"./helpers-CXS86XKs.js";import"./index6-CZ6rqL_0.js";import"./index8-BpkFXja0.js";import"./keyboard-cU79cwdW.js";import"./index2-op38TIl9.js";import"./ios.transition-C8T7q-Bo.js";import"./keyboard2-DETZ41vp.js";import"./md.transition-BqH5iNQr.js";import"./dir-BUtgAzbR.js";import"./basecomponent-Dw-Pzf3B.js";import"./classnames-DtEYS8u9.js";import"./ui-BT6EUdI0.js";import"./client-DMa-uSBE.js";import{S as q,t as C}from"./currentServer-B7-kbkE-.js";import"./config-BOA2pGQM.js";import"./esm-CcKFjObu.js";import"./global-gyhCjh_P.js";import"./esm-BuRgllmc.js";import"./user-C1ciKa7-.js";import{t as R}from"./serverClient-FHPKIHPu.js";import{t as N}from"./router-C_xBvmya.js";import"./utils-D5DD-7jP.js";import"./useBaseQuery-CNJp2kAB.js";import"./useInfiniteServerClient-By5CuBlL.js";import"./SocketClient-DPmgFkP-.js";import{t as W}from"./useQueryClient-s6ZLwuD6.js";import"./useQuery-C7DDAmeN.js";import"./apiClient-Cw7f36ko.js";import"./notifications-Bi_dU6lP.js";import"./utils-CdenF_Jv.js";import"./bundle-mjs-Xm_uQvzT.js";import"./deviceInfo-Bcw3-ht5.js";import"./helpers-fSCF1qXj.js";import"./auth-DfyD43WY.js";import"./MoooomIcon-DNWQYuYD.js";import"./baseeditableholder-CPfgMqWC.js";import{t as b}from"./inputtext-FoiCFKHp.js";import{t as Y}from"./useServerClient-CroZbKWw.js";import"./ScrollContainer-3_hZWeKa.js";import"./useMounted-CBZpV1fi.js";import"./RipperOverlay-BWEr7uxe.js";import"./HubConnection-BtQMN1V5.js";import"./ripperSocket-C9kIp3Ty.js";import{t as $}from"./Button-BOqv4y1r.js";import{t as Z}from"./Modal-B2WRzJvm.js";import"./FloatingBackButton-D3UgtlFi.js";import{t as j}from"./DashboardLayout-CXf1x5EO.js";A();I();var z={class:"my-6 text-sm text-surface-10"},G=M({__name:"DeleteSpecialModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},name:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},setup(p){const n=p,m=W(),k=H();function h(){R().delete(`dashboard/specials/${n.id}`).then(({data:t})=>{k.add({severity:t.status==="ok"?"success":"error",summary:q(t.status==="ok"?"Success":"Error"),detail:q(t.message,...t.args??[]),life:5e3}),m.invalidateQueries({queryKey:["dashboard","specials"]}),!n.noRedirect&&N.back()}),n.close()}return(t,g)=>{const x=B("Button");return S(),D(Z,{close:p.close,open:p.open,params:{special:n.name},"max-width":"max-w-xl",title:"Delete special {{special}}"},{actions:r(()=>[a(x,{id:"yes",onclick:h,color:"red","end-icon":"trash",type:"button"},{default:r(()=>[_(d(t.$t("Delete")),1)]),_:1}),a(x,{id:"no",onclick:p.close,color:"auto",type:"button",variant:"text"},{default:r(()=>[_(d(t.$t("Cancel")),1)]),_:1},8,["onclick"])]),default:r(()=>[o("div",z,d(t.$t("Are you sure you want to delete this special?")),1)]),_:1},8,["close","open","params"])}}}),J=G;I();var X={class:"flex flex-col gap-5 col-span-5 col-start-1 2xl:col-start-1"},ee={class:"flex flex-col gap-2"},te={class:"flex flex-col gap-2"},le={class:"flex gap-4 w-full"},oe={class:"flex flex-col gap-4 w-full"},ae={class:"flex flex-col gap-2"},re={class:"flex flex-col gap-4 w-full"},ie={class:"flex flex-col gap-2"},se={class:"flex flex-col gap-4 col-span-2 row-start-1 col-start-1 2xl:col-start-6"},ne={class:"flex flex-col gap-5"},ue={class:"flex flex-col gap-2"},de=M({__name:"Edit",setup(p){const n=O(),{data:m,error:k,refetch:h}=Y({path:"dashboard/specials",queryKey:["dashboard","specials"]}),t=u();P(()=>{h()}),Q(()=>{m.value&&(t.value=m.value.find(l=>l.id===n.params.id))}),U(m,l=>{l&&(t.value=l.find(e=>e.id===n.params.id))});const g=u(!1);function x(){g.value=!0}function T(){g.value=!1}function E(){N.back()}const y=u(t.value?.title||""),w=u(t.value?.overview||""),v=u(t.value?.backdrop||""),c=u(t.value?.poster||""),f=u(t.value?.logo||"");U(t,l=>{l&&(y.value=l?.title,w.value=l?.overview,v.value=l?.backdrop,c.value=l?.poster,f.value=l?.logo)});function K(){R().patch(`/dashboard/specials/${t.value?.id}`,{title:y.value,overview:w.value,backdrop:v.value,poster:c.value,logo:f.value}).then(({data:l})=>{console.log(l)})}return(l,e)=>{const L=B("Textarea"),V=B("Image");return S(),D(j,{error:s(k),"grid-style":1,params:{title:t.value?.title},title:"Special: {{title}}"},{cta:r(()=>[...e[5]||(e[5]=[])]),actions:r(()=>[a($,{id:"remove",class:"children:text-gray-400 children:transition-colors children:duration-100 children:hover:text-red-dark-8",color:"auto","start-icon":"folderRemove",type:"button",variant:"text",onClick:x},{default:r(()=>[_(d(l.$t("Remove")),1)]),_:1}),a($,{id:"cancel",color:"white",type:"button",variant:"text",onClick:E},{default:r(()=>[_(d(l.$t("Cancel")),1)]),_:1}),a($,{id:"save",class:"ml-auto",color:"theme",type:"button",onClick:K},{default:r(()=>[_(d(l.$t("Save")),1)]),_:1})]),default:r(()=>[o("div",X,[o("div",ee,[e[6]||(e[6]=o("label",{for:"name"},"Name",-1)),a(s(b),{id:"name",modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=i=>y.value=i),class:"w-full",variant:"filled"},null,8,["modelValue"])]),o("div",te,[e[7]||(e[7]=o("label",{for:"overview"},"Overview",-1)),a(L,{id:"overview",modelValue:w.value,"onUpdate:modelValue":e[1]||(e[1]=i=>w.value=i),rows:8,class:"w-full",variant:"filled"},null,8,["modelValue"])]),o("div",le,[o("div",oe,[o("div",ae,[e[8]||(e[8]=o("label",{for:"backdrop"},"Backdrop",-1)),a(s(b),{id:"backdrop",modelValue:v.value,"onUpdate:modelValue":e[2]||(e[2]=i=>v.value=i),class:"w-full",variant:"filled"},null,8,["modelValue"])]),a(V,{src:`${s(C)?.serverBaseUrl}/images/original${v.value}`,alt:"Image",class:"mx-2",preview:"",width:"100%"},null,8,["src"])]),o("div",re,[o("div",ie,[e[9]||(e[9]=o("label",{for:"logo"},"Logo",-1)),a(s(b),{id:"logo",modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=i=>f.value=i),class:"w-full",variant:"filled"},null,8,["modelValue"])]),a(V,{src:`${s(C)?.serverBaseUrl}/images/original${f.value}`,alt:"Image",class:"mx-2",preview:"",width:"100%"},null,8,["src"])])])]),o("div",se,[o("div",ne,[o("div",ue,[e[10]||(e[10]=o("label",{for:"poster"},"Poster",-1)),a(s(b),{id:"poster",modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=i=>c.value=i),class:"w-full",variant:"filled"},null,8,["modelValue"])]),a(V,{src:`${s(C)?.serverBaseUrl}/images/original${c.value}`,alt:"Image",class:"mx-2",preview:"",width:"100%"},null,8,["src"])])]),t.value?.id?(S(),D(J,{key:0,id:t.value?.id,close:T,name:t.value?.title,open:g.value},null,8,["id","name","open"])):F("",!0)]),_:1},8,["error","params"])}}}),gt=de;export{gt as default};
