import{C as l,Ct as r,J as w,K as o,S as f,T as n,U as E,W as z,c as R,g as u,it as M,j as U,k as B,mt as c,ot as I,w as g,wt as v,x as D}from"./i18n-Rm1NkeNf.js";import"./ionic-vX7GXDhi.js";import{C as F,I as K,U as L,W,_ as j}from"./vue-core-ChFWZS_w.js";import"./query-BPfDyGC_.js";import{Bn as N,Vi as _,Vn as q,Y as x,hi as G,ia as J,k as Y}from"./index-DJ65HgKB.js";import"./scrollHandlers-BwNtCy8O.js";import{t as A}from"./Indexer-c0vVUVjk.js";import{n as H}from"./useInfiniteServerClient-C68tN-RX.js";import"./CardIndicator-HtUlzIwR.js";import{t as O}from"./NMCard-DLaNFM5v.js";import{t as Q}from"./PersonCard-ooF-TO21.js";import{n as X,t as Z}from"./EmptyCard-Be3omLqb.js";R();L();var $="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",ee="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",te=U({__name:"Mobile",setup(re){const i=W(),{data:a,fetchNextPage:y,hasNextPage:b,isError:oe}=H({queryKey:["libraries",(i.params.id??i.name)?.split("&").at(0)],limit:20,keepForever:!0});E(()=>{G(),N(null),q(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),M(a,t=>{t&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const S=D(()=>{const t=a.value?.pages?.[0]?.data?.[0];return t&&J.value&&t.media_type!=="person"&&t.media_type!=="genres"});z(()=>{stop(),N(null)});const h=c(),C=c();E(()=>{C.value=i.params.id??i.name,b.value&&(a?.value?.pages?.length??0)<50&&y(),document.addEventListener("scrollToDiv",t=>{h.value?.scrollTo({top:t.detail.top-100,behavior:"smooth"})})}),K(()=>{document.dispatchEvent(new Event("indexer"))}),M(a,t=>{t&&b.value&&t?.pages?.length<50&&y()});const T=c(),V=c();function p(t,d){T.value=d,V.value.show(t)}return(t,d)=>(o(),l(r(F),null,{default:I(()=>[B(r(j),{fullscreen:!0,class:"ion-padding",style:{"--padding-bottom":"0"}},{default:I(()=>[d[0]||(d[0]=f("div",{class:"fixed top-0 pt-safe w-full bg-surface-1 z-1199"},null,-1)),f("div",{ref_key:"lib",ref:h,class:"pt-safe-offset-9 flex h-auto w-full pr-8 overflow-auto scroll-container"},[(o(),n("div",{key:r(Y).currentRoute.value.params?.id,class:v([{"pb-2":r(_)&&r(x)},"z-0 flex flex-col gap-4 rounded-3xl border-0 w-available scrollbar-none border-surface-3"])},[f("div",{class:v(`grid w-full gap-4 scroll-smooth music-showing:pb-0 pl-1 py-4 ${S.value?$:ee}`)},[r(a)?(o(!0),n(u,{key:0},w(r(a).pages??[],(k,P)=>(o(),n(u,{key:P},[k.data.length>0?(o(!0),n(u,{key:0},w(k.data??[],(e,m)=>(o(),n(u,null,[e?.media_type==="tv"||e?.media_type==="movie"||e?.media_type==="collection"||e?.media_type==="specials"?(o(),l(O,{key:e.id,data:e,index:m,onContextMenu:s=>p(s,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="person"?(o(),l(Q,{key:`${e.id}_person`,data:e,index:m,onContextMenu:s=>p(s,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="genres"?(o(),l(X,{key:`${e.id}_genres`,data:e,index:m,onContextMenu:s=>p(s,e)},null,8,["data","index","onContextMenu"])):g("",!0)],64))),256)):r(a).pages?.[0]?.data?.length===0?(o(),l(Z,{key:1})):g("",!0)],64))),128)):g("",!0)],2)],2)),B(A,{id:C.value,class:v([{"h-available":!r(_),"h-inherit top-24":r(_),"-mt-4 pt-4 pb-4 mb-0":!r(x),"-mt-4 pt-4 pb-4 mb-14":r(x)},"w-8 fixed right-0 bg-surface-1 transition-all duration-200"])},null,8,["id","class"])],512)]),_:1})]),_:1}))}}),ve=te;export{ve as default};
