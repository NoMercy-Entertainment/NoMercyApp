import{an as v,aR as g,aY as q,aa as K,W as m,w as p,R as Q}from"./vue-ionic-DNlOg-eX.js";import{y as a,bc as w,k as M,w as f,r as C}from"./index-BmWDEClZ.js";function o(t){var n;const e=K(),u=[];return(n=t??(e==null?void 0:e.path))==null||n.split("/").slice(1).forEach(r=>{r.includes("?")?(u.push(r.split("?")[0]),u.push(r.split("?")[1].split("=")[1])):u.push(r)}),u}function k({queryKey:t,path:e}={queryKey:void 0,path:void 0}){return v({mutationKey:t??o(e)})}const b=m();p(b,async t=>{t&&(await a.invalidateQueries(),a.getMutationCache().clear())});p(M,async t=>{t||w(),a.getQueriesData({type:"all"}).forEach(e=>{a.invalidateQueries({queryKey:e}),a.removeQueries({queryKey:e}),a.getMutationCache().clear(),a.clear()}),await a.invalidateQueries(),a.removeQueries(),a.getMutationCache().clear(),a.clear()});function E({queryKey:t,path:e}={queryKey:void 0,path:void 0}){return g({queryKey:t??o(e),queryFn:async()=>f().get(e??C.currentRoute.value.path).then(({data:u})=>u.data)})}function F({queryKey:t,path:e,homeData:u}){return q({mutationKey:t??o(e),mutationFn:async n=>{var c;const r=[...((c=u.value)==null?void 0:c.map(i=>structuredClone(Q(i))))??[]];for(const i of n)await f().post(e??i.update.link,{replace_id:i.update.body.replace_id}).then(h=>{var y,l,d;for(let s=0;s<r.length;s++)r[s].id===((l=(y=i.update)==null?void 0:y.body)==null?void 0:l.replace_id)&&(r[s]=(d=h.data)==null?void 0:d.data[0])});return r}})}export{E as a,F as b,k as g,o as q};
