import"./useBaseQuery-DhMTNjjH.js";import"./useInfiniteServerClient-BOGzXRLT.js";import"./useQueryClient-BDTWlHnP.js";import"./useQuery-UqFzG2sc.js";import{Ba as I,Ea as A,Hs as _,Io as M,Ja as N,Ks as L,Ns as $,Os as j,Ua as E,Ws as T,Yo as O,bn as p,cs as b,dn as y,ec as i,gs as P,i as V,js as n,ls as R,mn as W,ms as g,ns as J,qa as K,sc as a,sr as U,ss as u,ur as Y,us as S,va as D,yn as f}from"./index-zK1-WOQT.js";import"./basecomponent-BCCSVKeT.js";import"./classnames-BTI3HSIl.js";import"./button-BFgBlxd4.js";import"./baseicon-BujroYwJ.js";import"./musicPlaylists-C_vb7EZC.js";import"./contextMenuItems-DhNO6yQR.js";import"./_plugin-vue_export-helper-CksOYaUN.js";import"./AppLogoSquare-ClEEG0E7.js";import{t as G}from"./OptimizedIcon-BHUzMN75.js";import"./DropdownMenu-CoedV5mz.js";import"./dist-YiGZl1e5.js";import{t as Q}from"./useServerClient-BWjN3Na1.js";import"./CoverImage-TSBXufAd.js";import"./MusicButton-CWjcKUpW.js";import"./MediaLikeButton-BMj5yK2v.js";import"./PlayerIcon-BBwNC4v3.js";import{t as X}from"./Marquee-DiB7YgKA.js";import"./EqSpinner-DE6fOqoz.js";import"./BannerButton-DvbbYtyg.js";import"./FavoriteImage-Dne74lT9.js";import"./TrackLinks-CK8QQgs_.js";import"./BigPlayButton-B2Vqc5h3.js";import{t as Z}from"./NotFound-CMMKlcNX.js";import"./ShareButton-CnMD2Dif.js";import{i as ee,n as te,r as ae,t as re}from"./TrackRow-gStQWKvN.js";O();K();I();var oe={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},se={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},le=P({__name:"Mobile",setup(ie){const x=N(),{data:e,isError:B}=Q({path:x.fullPath}),H=i(null),k=i(),l=i("");_(e,t=>{U(t?.name??null),c(t?.tracks??[],p.value,f.value,l.value),y(t?.color_palette?.cover)}),_(f,t=>{c(e.value?.tracks??[],p.value,t,l.value)}),_(p,t=>{c(e.value?.tracks??[],t,f.value,l.value)}),_(l,t=>{c(e.value?.tracks??[],p.value,f.value,t)});function c(t,o,s,r){const C=Y(t??[],o,s,W);r===""?k.value=C:k.value=C?.filter(w=>w.name?.toLowerCase().includes(r?.toLowerCase?.())||w.artist_track?.some(q=>q.name.toLowerCase().includes(r?.toLowerCase?.()))||w.album_track?.[0]?.name.toLowerCase().includes(r?.toLowerCase?.()))??[]}j(()=>{c(e?.value?.tracks??[],p.value,f.value,l.value),e.value?.color_palette?.cover&&y(e.value?.color_palette?.cover)}),E(()=>{c(e?.value?.tracks??[],p.value,f.value,l.value),e.value?.color_palette?.cover&&y(e.value?.color_palette?.cover)});function z(){V.back()}const m=i(!1),F=i(!1),d=i(),h=i();function v(){const s=M("capacitor")?88:64,r=d.value?.$el?.getBoundingClientRect().top;if(!r){requestAnimationFrame(v);return}if(m.value=r<=170,F.value=r<=160,window.CSS.supports("container-type","scroll-state")){requestAnimationFrame(v);return}r===s?(d.value?.$el?.classList.add("!bg-focus"),d.value?.$el?.firstChild?.classList.add("!bg-surface-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")):(d.value?.$el?.classList.remove("!bg-focus"),d.value?.$el?.firstChild?.classList.remove("!bg-surface-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")),requestAnimationFrame(v)}return _(h,()=>{requestAnimationFrame(v)}),(t,o)=>(n(),b(a(A),null,{default:T(()=>[g(a(D),{ref_key:"container",ref:h,"scroll-events":!0,onIonScroll:v},{default:T(()=>[a(B)&&!a(e)?(n(),b(Z,{key:0})):!a(x).params.id||a(x).params.id&&a(e)?.id===a(x).params.id?(n(),S("div",{key:1,ref_key:"main",ref:H,class:"flex flex-col h-auto overflow-x-clip w-available sm:rounded-2xl -mt-6 text-surface-12"},[g(ae,{data:a(e)},null,8,["data"]),u("div",oe,[o[2]||(o[2]=u("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),u("div",{id:"navbar",class:L([{"opacity-0 pointer-events-none":!m.value,"opacity-100 pointer-events-auto":m.value},"fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-surface-11 dark:bg-surface-1 top-0 pt-4 transition-all duration-200"])},[o[1]||(o[1]=u("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-all duration-200 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),u("button",{class:"z-30 flex h-10 w-11 items-center justify-center rounded-md",onClick:z},[g(G,{icon:"arrowLeft"})]),u("div",{id:"navText",class:L([{"opacity-0 pointer-events-none":!m.value,"opacity-100 pointer-events-auto":m.value},"pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-all duration-200 w-[70%] overflow-clip text-xl"])},[g(X,{text:a(e)?.name},null,8,["text"])],2)],2),(n(),b(ee,{key:a(e)?.id,data:a(e),filter:l.value,onFilterChange:o[0]||(o[0]=s=>l.value=s)},null,8,["data","filter"])),u("div",se,[(n(),b(te,{key:a(e)?.id,ref_key:"sortHeader",ref:d})),(n(!0),S(J,null,$(k.value,(s,r)=>(n(),b(re,{key:s.id+s?.favorite,data:s,"display-list":k.value,index:r},null,8,["data","display-list","index"]))),128))])])],512)):R("",!0)]),_:1},512)]),_:1}))}}),je=le;export{je as default};
