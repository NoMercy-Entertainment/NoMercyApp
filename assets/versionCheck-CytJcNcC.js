import"./i18n-Cs-AFcrY.js";import{cn as r}from"./index-ChgnbCd2.js";import{setUpdatePending as o}from"./updateState-CCNvaOB0.js";import{t as n}from"./pwa-CPExTLaB.js";var i=300*1e3,s="/version.json",c=null;function d(){return localStorage.getItem("language")||navigator.language.split("-")[0]||"en"}function l(){const e=n[d()]||n.en;r({id:"version-update-pending",type:"update",title:e.newVersion,body:e.updateNow,from:"system",read:!1,created_at:Date.now(),updated_at:Date.now(),notify:!0,link:"reload"})}async function a(){try{const e=await fetch(s,{cache:"no-store",headers:{"Cache-Control":"no-cache"}});if(!e.ok||!(e.headers.get("content-type")??"").includes("application/json"))return!1;const t=await e.json();return t.version!=="5f8e24a"?(o(t.version),l(),!0):!1}catch(e){return console.error("Version check failed:",e),!1}}function v(){c=window.setInterval(a,i),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&a()})}export{a as checkForUpdates,v as startVersionChecks};
