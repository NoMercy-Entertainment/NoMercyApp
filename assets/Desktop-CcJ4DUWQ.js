import{C as o,Et as b,G as ce,J as a,O as pe,Ot as fe,Q as me,S as s,T as f,Tt as e,X as he,c as G,ct as n,g as ve,gt as _e,j as O,k as d,kt as i,n as ge,ot as ye,w as l,x as y}from"./i18n-Bgv5p1Yb.js";import"./ionic-B1wlflFe.js";import{C as be,G as U,U as J,_ as ke,r as xe}from"./vue-core-Dey0Eikg.js";import{C as we}from"./primevue-CuC2W_MW.js";import{r as Ce}from"./utils-D8i-hqKp.js";import"./query-xyWPY_A0.js";import{$n as Me,Bn as j,Fn as I,Fr as Te,Hn as R,Ki as x,Ni as $e,Vi as De,Vn as N,Y as Se,_i as u,_r as ze,b as g,hi as A,la as D,n as F,v as Ee,x as Be}from"./index-DLX3dE7o.js";import"./useInfiniteServerClient-DG5_vM7O.js";import{t as V}from"./useServerClient-BXRsp2bm.js";import{o as L}from"./sidebar-BLXzF9ih.js";import{t as Q}from"./ScrollContainer-CeB9S2n1.js";import"./MusicButton-DWvb0ZRE.js";import{t as w}from"./BannerButton-H0Q5uxS0.js";import{t as Pe}from"./MediaLikeButton-wHnQCr2v.js";import"./swiper-Cpp-XWJj.js";import"./CardIndicator-KDzAuof1.js";import"./nmComponentMap-CIBGuEdz.js";import"./swiper-config-Dx0GnZw9.js";import{t as je}from"./FloatingBackButton-1LbxvOkI.js";import{n as q,r as Ie,t as H}from"./ImageCarousel-BQ6bvxgf.js";import{t as C}from"./InfoHeaderItem-C5shidhE.js";import{t as Re}from"./NotFound-DHJ2nPKx.js";import{t as Ne}from"./ShareButton-BAErQC4j.js";import"./Carousel-B5Y5YEC3.js";import"./PersonCard-CZ366e8f.js";import{t as K}from"./ListControlHeaderMoreMenu-D2fbJs5I.js";import{t as h}from"./InfoItem-DG9wqqcw.js";import{t as Ae}from"./NMComponent-D5rgE8tC.js";import{n as Fe,r as Ve,t as Le}from"./Trailer-D6D9gpqP.js";import{t as W}from"./MediaCarousel-20eXpaso.js";import"./VideoPlayer-D_qlXqbb.js";import"./buttons-CU4wCn28.js";G();J();var qe=O({__name:"MissingEpisodes",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0}},setup(M){const c=U(),v=y(()=>{const p=`${c.path}/missing`.split("/");return p[0]="base",p});return(p,t)=>(a(),o(Be,{open:M.open,close:M.close,title:"Missing episodes","max-width":"max-w-7xl"},{default:n(()=>[d(Q,{"auto-hide":!0,static:!0},{default:n(()=>[d(Ae,{path:`${e(c).path}/missing`,options:{queryKey:v.value}},null,8,["path","options"])]),_:1})]),_:1},8,["open","close"]))}}),He=qe;G();J();var Ke={key:0,class:""},We={class:"flex flex-col gap-4 overflow-clip rounded-3xl border-0 pb-2 w-available scrollbar-none border-surface-3"},Ge={class:"flex flex-col relative mx-auto w-full gap-4 rounded-lg p-4 max-w-screen-4xl justify-end min-h-[calc(100vh-6rem)] z-10"},Oe={class:"z-0 flex w-full flex-grow flex-col items-end justify-end gap-2"},Ue={class:"children:absolute relative right-1 bottom-0 col-start-1 col-end-2 flex h-auto w-auto select-none justify-end pb-2 max-w-[20vw] w-available translate-x-[4px] sm:h-40 lg:max-w-[30vw] aspect-[32/9]"},Je={class:"relative col-start-2 col-end-4 grid flex-shrink-0 flex-grow-0 grid-cols-3 items-start justify-start self-stretch rounded-2xl bg-gradient-to-b p-6 from-surface-1/12 via-surface-2/12 to-surface-2/11 border-surface-5/8 border-1 min-h-[23.5rem]"},Qe={class:"inset-0 grid group-hover/card:grid h-full w-full place-content-center group-focus-visible/card:bg-none group-hover/card:bg-none text-5xl text-transparent transition-transform duration-200 group-focus-visible/card:transitioning group-hover/card:text-surface-12"},Xe={class:"col-start-1 content-center col-end-2 mt-auto bottom-6 left-8 w-full flex-shrink-0 select-none flex-grow-0 text-sm text-surface-12/70 dark:text-surface-12/80"},Ye={class:"col-start-2 col-end-4 flex w-full flex-grow flex-col items-start justify-start gap-4"},Ze={class:"relative flex flex-shrink-0 flex-grow-0 items-center justify-start gap-4 self-stretch"},et={class:"flex-grow text-5xl font-bold w-[806px]",style:{"font-size":"clamp(1.25rem, 2.309vw + 0.652rem, 2rem)","line-height":`clamp(
                            1.875rem,
                            2.54vw + 1.218rem,
                            2.75rem
                          )`}},tt={key:0,class:"relative flex flex-shrink-0 flex-grow-0 items-center justify-start gap-4"},at={class:"whitespace-nowrap text-base font-semibold"},rt=["alt","src"],st={class:"w-full whitespace-nowrap col-span-4 text-base font-semibold"},lt={class:"whitespace-nowrap text-base font-semibold ml-1"},ot={key:0,class:"flex flex-shrink-0 items-center justify-start gap-4 self-stretch"},it={class:"flex-shrink-0 text-sm font-bold uppercase"},nt={class:"flex-shrink-0 flex-grow-0 text-sm font-bold uppercase"},dt={class:"flex-shrink-0 flex-grow-0 text-sm font-bold uppercase"},ut={class:"flex-shrink-0 flex-grow-0 text-sm font-bold -ml-0.5"},ct={key:4,class:"relative overflow-hidden"},pt={key:1,class:"relative flex flex-col items-start justify-start gap-2 self-stretch"},ft={class:"w-full text-lg font-medium mb-4"},mt={key:0,class:""},ht={class:""},vt=["href"],_t={class:"relative grid w-full flex-shrink-0 flex-grow-0 grid-cols-7 items-start justify-start gap-1"},gt={class:"grid-cols-3 text-xs font-bold uppercase text-surface-12/70 dark:text-surface-12/80"},yt={class:"col-span-6 col-start-3 flex w-full max-w-fit flex-wrap gap-1 self-center xl:col-start-3 2xl:col-start-2 text-surface-12 dark:text-surface-12/80 font-semibold"},bt={class:"gap-1 children:whitespace-nowrap text-sm"},kt=["href"],xt={key:0,class:"gap-1 children:whitespace-nowrap text-sm"},wt=["href"],Ct={key:1,class:"gap-1 children:whitespace-nowrap text-sm"},Mt=["href"],Tt=O({__name:"Desktop",setup(M){const c=U(),{t:v}=ge(),p=we(),{data:t,isError:S,error:z}=V({keepForever:!0,queryKey:["base","info",c.params.id],path:c?.fullPath}),{data:k}=V({queryKey:["base","info",c.params.id,"available"],path:`${c.fullPath}/available`}),{buttonState:T,trailerOpen:X,resolvedTrailer:E,toggleTrailer:B}=Ve(t),$=_e(!1),Y=y(()=>({url:`https://app.nomercy.tv${c.fullPath}`})),Z=y(()=>Me(v,t.value?.duration??0,!0)),P=y(()=>!t?.value?.duration||!D?.language||D.language==="undefined"?null:new Date(new Date().getTime()+t.value.duration*60*1e3).toLocaleTimeString(D?.language??"en-US",{hour:"2-digit",minute:"2-digit"})),ee=y(()=>t?.value?.duration&&P.value?v("Ends at {{time}}",{time:P.value}):v("Play"));function te(){$.value=!0}function ae(){$.value=!1}function re(){}function se(){x().post(`${c.fullPath}/rescan`).then(({data:r})=>{p.add({severity:r.status==="ok"?"success":"error",summary:u("Success"),detail:u(r.message,...r.args),life:5e3})}).catch(()=>{p.add({severity:"error",summary:u("error"),detail:u("An error occurred while rescanning the library folders"),life:5e3})})}function le(){x().post(`${c.fullPath}/refresh`).then(({data:r})=>{p.add({severity:r.status==="ok"?"success":"error",summary:u(r.status==="ok"?"Success":"Error"),detail:u(r.message,...r.args),life:5e3})}).catch(()=>{p.add({severity:"error",summary:u("Error"),detail:u("An error occurred while rescanning the library folders"),life:5e3})})}function oe(){x().delete(`${c.fullPath}`).then(({data:r})=>{p.add({severity:r.status==="ok"?"success":"error",summary:u(r.status==="ok"?"Success":"Error"),detail:u(r.message,...r.args),life:5e3})}).catch(()=>{p.add({severity:"error",summary:u("error"),detail:u("An error occurred while rescanning the library folders"),life:5e3})})}function ie(){x().post(`${c.fullPath}/add`).then(({data:r})=>{p.add({severity:r.status==="ok"?"success":"error",summary:u(r.status==="ok"?"Success":"Error"),detail:u(r.message,...r.args),life:5e3})}).catch(()=>{p.add({severity:"error",summary:u("Error"),detail:u("An error occurred while rescanning the library folders"),life:5e3})})}const ne=y(()=>[{icon:"arrowRefreshHorizontal",onclick:se,title:"Rescan files",privileged:!0},{icon:"arrowRefreshHorizontal",onclick:le,title:"Refresh data",privileged:!0},{icon:"folderAdd",onclick:ie,title:`Add ${t?.value?.media_type==="movie"?"movie":"TV show"}`,privileged:!0},{icon:"folderRemove",onclick:oe,title:`Delete ${t?.value?.media_type==="movie"?"movie":"TV show"}`,privileged:!0},{icon:"searchMagnifyingGlass",onclick:te,title:"Show missing episodes",privileged:!0},{icon:"edit",onclick:()=>{window.open(`https://www.themoviedb.org/${t?.value?.media_type}/${t?.value?.id}/edit`,"_blank")},title:"Edit on TMDb"}]);return ce(()=>{A(t?.value?.name),t?.value?.backdrop&&I.value!==t?.value?.backdrop&&j(t?.value?.backdrop),t?.value?.logo&&R(t?.value?.logo),(t?.value?.color_palette?.backdrop||t?.value?.color_palette?.poster)&&N(t?.value?.color_palette?.poster??t?.value?.color_palette?.backdrop)}),ye(t,r=>{A(r?.title??r?.name),r?.backdrop&&I.value!==r?.backdrop&&j(r?.backdrop),r?.logo&&R(r?.logo),(r?.color_palette?.backdrop||r?.color_palette?.poster)&&N(r?.color_palette?.poster||r?.color_palette?.backdrop)}),(r,_)=>{const de=me("RouterLink");return a(),o(e(be),null,{default:n(()=>[d(e(ke),{fullscreen:!0},{default:n(()=>[e(S)&&!e(t)?(a(),o(Re,{key:0})):(a(),o(Q,{key:1,"auto-hide":!0,static:!0},{default:n(()=>[s("div",{class:b([{"pb-2":e(De)&&e(Se)},"z-0 flex flex-col gap-4 rounded-3xl border-0 w-available scrollbar-none border-surface-3 text-surface-12/70 dark:text-surface-12/80"])},[e(S)||e(z)?(a(),f("div",Ke,[s("p",null,i(e(z)),1)])):l("",!0),s("div",We,[d(je),s("div",Ge,[_[2]||(_[2]=s("div",{class:"z-0 flex w-full flex-grow flex-col min-h-40"},null,-1)),s("div",Oe,[s("div",Ue,[e(t)?.logo?(a(),o(F,{key:e(t)?.logo,"auto-shadow":!0,path:e(t)?.logo,right:!0,shadow:e(ze)(e(t)?.color_palette?.poster),size:500,title:e(t)?.title,class:"pointer-events-none relative mx-auto flex h-full w-full select-none place-self-start overflow-hidden p-4 items-end justify-end","class-name":"relative bottom-0 h-auto w-auto p-4",type:"logo"},null,8,["path","shadow","title"])):l("",!0)]),s("div",Je,[e(t)?.poster?(a(),f("div",{key:0,class:b([{"":e(k)},"absolute z-10 col-start-1 content-center col-end-2 h-auto w-full items-start justify-start rounded-lg top-0 -translate-y-[35%] sm:block"])},[d(de,{"aria-label":r.$t("Play"),class:b([{" 4xl:-mt-10 5xl:-mt-20 6xl:-mt-28 mb-20 6xl:mb-28":e(L)==="open"," 4xl:-mt-2 5xl:-mt-60 6xl:-mt-28 mb-60 6xl:mb-28":e(L)!=="open","hover:!scale-100 hover:-translate-y-1":e(k)},"relative h-available m-auto mx-auto flex-1 flex max-w-[75%] scale-95 cursor-default group/card z-0 transitioning rounded-2xl aspect-poster overflow-clip select-none cover !shadow-none max-h-available"]),to:`${e(t)?.link}/watch`,"data-nav":"true","data-nav-r":"play","data-nav-reset":"true"},{default:n(()=>[(a(),o(F,{key:e(t)?.poster||"poster","auto-shadow":!0,"color-palette":e(t)?.color_palette?.poster,path:e(t)?.poster,size:760,title:e(t)?.title,aspect:"poster",class:"m-auto scale-100 rounded-2xl","class-name":"pointer-events-none absolute -inset-1 z-20 flex scale-100 select-none items-center place-self-start overflow-hidden rounded-2xl",priority:"high",type:"image"},null,8,["color-palette","path","title"])),s("span",{class:b(`tv:group-focus-visible/card:bg-black/3 absolute -inset-1 z-20 grid h-available w-full items-center transition-transform duration-200 opacity-0 [background:radial-gradient(75%_50%_at_50%_50%,_rgba(0,_0,_0,_0.40)_0%,_rgba(0,_0,_0,_0.00)_100%),_rgba(0,_0,_0,_0.09)] mx-auto ${e(k)?"group-hover/card:opacity-100":""}`)},[s("span",Qe,[d(g,{"class-name":"w-20 text-surface-12/70 dark:text-surface-12/80",icon:"play"})])],2)]),_:1},8,["aria-label","class","to"])],2)):l("",!0),s("p",Xe,i(r.$t("Data provided by The Movie Database(TMDb)"))+". ",1),s("div",Ye,[s("div",Ze,[s("p",et,i(e(t)?.title?.replace(/(: | en de )/,`
`)),1),e(t)?(a(),f("div",tt,[e(k)?(a(),o(w,{key:0,href:`${e(t)?.link}/watch`,"show-delay":0,title:ee.value,class:"bg-surface-6"},{default:n(()=>[d(g,{"class-name":"w-6 text-surface-12/70  dark:text-surface-12/80",icon:"play"})]),_:1},8,["href","title"])):e(t)&&e(t).watch_providers&&e(t).watch_providers.length>0?(a(),o(K,{key:1,items:[],class:"text-surface-12/70 dark:text-surface-12/80","class-name":"max-h-80 overflow-y-auto overflow-x-hidden !ml-0 !-translate-x-1/3"},{button:n(()=>[s("span",at,i(r.$t("Watch options")),1),d(g,{"class-name":"w-6",icon:"chevronDown"})]),default:n(()=>[(a(!0),f(ve,null,he(e(t).watch_providers.toSorted((m,ue)=>ue.display_priority-m.display_priority),m=>(a(),o(e(xe),{key:m.id,class:b(e(Ce)(e($e),"w-fit min-w-60 !flex h-12 pl-1.5 sm:bg-surface-transparent")),href:m.link,as:"a",target:"_blank"},{default:n(()=>[m?.logo?(a(),f("img",{key:0,alt:m?.name,src:`https://image.tmdb.org/t/p/w92${m?.logo}`,class:"inline h-10 w-10 rounded-sm align-middle col-span-1"},null,8,rt)):l("",!0),s("span",st,i(m?.name),1)]),_:2},1032,["class","href"]))),128))]),_:1})):(a(),o(w,{key:2,"no-tip":"",title:"Not available"},{default:n(()=>[s("span",lt,i(r.$t("Not available")),1),d(g,{"class-name":"w-6",icon:"playUnavailable"})]),_:1})),d(w,{class:"bg-surface-6",title:"Watch trailer",onClick:_[0]||(_[0]=m=>e(T)==="available"?e(B)(m):null)},{default:n(()=>[d(g,{style:fe(`color: ${e(T)==="available"?"var(--color-green-8)":e(T)==="unavailable"?"var(--color-red-8)":"var(--color-gray-8)"}`),"class-name":"w-6",icon:"film"},null,8,["style"])]),_:1}),d(w,{class:"bg-surface-6",title:"Mark as watched",onClick:re},{default:n(()=>[d(g,{"class-name":"w-6 text-surface-12/70  dark:text-surface-12/80",icon:"check"})]),_:1}),d(Ne,{"share-data":Y.value,class:"!p-0"},null,8,["share-data"]),e(t)?(a(),o(Pe,{key:3,data:e(t),type:"video"},null,8,["data"])):l("",!0),d(K,{items:ne.value,class:"text-surface-12/70 dark:text-surface-12/80"},null,8,["items"])])):l("",!0)]),e(t)?(a(),f("div",ot,[e(t)?.year?(a(),o(C,{key:0},{default:n(()=>[s("p",it,i(e(t)?.year),1)]),_:1})):l("",!0),e(t)?.number_of_items?(a(),o(C,{key:1},{default:n(()=>[s("p",nt,i(e(t)?.number_of_items)+" "+i(r.$t("ep"))+". ",1)]),_:1})):l("",!0),e(t)?.duration?(a(),o(C,{key:2},{default:n(()=>[s("p",dt,i(Z.value),1)]),_:1})):l("",!0),e(t)?.voteAverage?(a(),o(C,{key:3},{default:n(()=>[s("p",ut," ⭐ ️"+i(e(t)?.voteAverage?.toFixed(0))+"/10 ",1)]),_:1})):l("",!0),e(t)?.content_ratings?(a(),f("div",ct,[d(Ie,{ratings:e(t)?.content_ratings,size:6,class:"h-full min-!h-[1rem] object-scale-down rounded-lg overflow-clip"},null,8,["ratings"])])):l("",!0)])):l("",!0),e(t)?(a(),f("div",pt,[_[1]||(_[1]=s("div",{class:"h-px bg-surface-1/10"},null,-1)),s("div",ft,[e(t)?.overview?l("",!0):(a(),f("div",mt,[s("span",ht,i(r.$t("We don't have an overview for "))+" "+i(e(t).name)+". "+i(r.$t("Feel free to contribute!")),1),s("a",{href:`https://www.themoviedb.org/${e(c).params?.type}/${e(c).params?.id}/edit`,class:"underline underline-offset-4"},i(r.$t("Contribute to TMDb")),9,vt)])),pe(" "+i(e(t)?.overview),1)]),e(t)?.genres?(a(),o(h,{key:0,data:e(t),"key-name":"genres",prefix:"genres",title:"Genres"},null,8,["data"])):l("",!0),e(t)?.writer?(a(),o(h,{key:1,data:{writer:[e(t)?.writer]},"key-name":"writer",prefix:"person",title:"Writer"},null,8,["data"])):l("",!0),e(t)?.creator?(a(),o(h,{key:2,data:{creator:[e(t)?.creator]},"key-name":"creator",prefix:"person",title:"Creator"},null,8,["data"])):l("",!0),e(t)?.director?(a(),o(h,{key:3,data:{director:[e(t)?.director]},"key-name":"director",prefix:"person",title:"Director"},null,8,["data"])):l("",!0),e(t)?.creators?.length>0?(a(),o(h,{key:4,data:e(t),"key-name":"creators",prefix:"person",title:"Creators"},null,8,["data"])):l("",!0),e(t)?.directors?.length>0?(a(),o(h,{key:5,data:e(t),"key-name":"directors",prefix:"person",title:"Directors"},null,8,["data"])):l("",!0),e(t)?.writers?.length>0?(a(),o(h,{key:6,data:e(t),"key-name":"writers",prefix:"person",title:"Writers"},null,8,["data"])):l("",!0),e(t)?.keywords?.length>0?(a(),o(h,{key:7,data:e(t),"key-name":"keywords",title:"Keywords"},null,8,["data"])):l("",!0),e(t)?.networks?.length>0?(a(),o(h,{key:8,data:e(t),"key-name":"networks",title:"Networks"},null,8,["data"])):l("",!0),e(t)?.companies?.length>0?(a(),o(h,{key:9,data:e(t),"key-name":"companies",title:"Companies"},null,8,["data"])):l("",!0),s("div",_t,[s("p",gt,i(r.$t("External links")),1),s("div",yt,[s("div",bt,[s("a",{href:`https://themoviedb.org/${e(t)?.media_type}/${e(t)?.id}`,class:"inline-block underline-offset-4 hover:underline focus-visible:underline",target:"_blank"}," TheMovieDb ",8,kt),s("span",null,i(e(t)?.external_ids?.imdb_id||e(t)?.external_ids?.tvdb_id?",":""),1)]),e(t)?.external_ids?.imdb_id?(a(),f("div",xt,[s("a",{href:`https://imdb.com/title/${e(t)?.external_ids?.imdb_id}`,class:"inline-block underline-offset-4 hover:underline focus-visible:underline",target:"_blank"}," IMDb ",8,wt),s("span",null,i(e(t)?.external_ids?.tvdb_id?",":""),1)])):l("",!0),e(t)?.external_ids?.tvdb_id?(a(),f("div",Ct,[s("a",{href:`https://thetvdb.com/?tab=series&id=${e(t)?.external_ids?.tvdb_id}&lid=eng`,class:"inline-block underline-offset-4 hover:underline focus-visible:underline",target:"_blank"}," TheTvDb ",8,Mt)])):l("",!0)])])])):l("",!0)])])])]),e(t)?.seasons&&e(t)?.seasons?.length>0?(a(),o(Fe,{key:0,data:e(t)?.seasons,type:"backdrop"},null,8,["data"])):l("",!0),e(t)?.cast&&e(t)?.cast?.length>0?(a(),o(q,{key:1,data:e(t)?.cast.slice(0,50),title:"Cast"},null,8,["data"])):l("",!0),e(t)?.crew&&e(t)?.crew?.length>0?(a(),o(q,{key:2,data:e(Te)(e(t)?.crew,"profile","id").slice(0,50),title:"Crew"},null,8,["data"])):l("",!0),e(t)?.posters&&e(t)?.posters?.length>0?(a(),o(H,{key:3,data:e(t)?.posters,title:"Poster",type:"poster"},null,8,["data"])):l("",!0),e(t)?.backdrops&&e(t)?.backdrops?.length>0?(a(),o(H,{key:4,"color-palette":e(t)?.color_palette?.poster,data:e(t)?.backdrops,title:"Backdrop",type:"backdrop"},null,8,["color-palette","data"])):l("",!0),e(t)?.recommendations&&e(t)?.recommendations?.length>0?(a(),o(W,{key:5,"color-palette":e(t)?.color_palette,data:e(t)?.recommendations,title:"Recommendations",type:"poster"},null,8,["color-palette","data"])):l("",!0),e(t)?.similar&&e(t)?.similar?.length>0?(a(),o(W,{key:6,"color-palette":e(t)?.color_palette,data:e(t)?.similar,title:"Similar",type:"poster"},null,8,["color-palette","data"])):l("",!0)]),e(E)&&e(X)?(a(),o(Le,{key:1,"resolved-trailer":e(E),toggle:e(B),class:"inset-0 h-full w-full z-999"},null,8,["resolved-trailer","toggle"])):l("",!0)],2)]),_:1})),d(He,{close:ae,open:$.value},null,8,["open"])]),_:1})]),_:1})}}}),la=Ee(Tt,[["__scopeId","data-v-1413191d"]]);export{la as default};
