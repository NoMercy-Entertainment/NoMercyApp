import{Y as Z,aa as J,f as O,w as Q,d as q,aK as W,C as X,c as P,o as p,l as c,y as s,Z as t,ar as ee,h as w,H as te,i as d,bb as z,bc as C,bd as _,b as I,v as h,av as ae,F as le,p as se,at as oe,ay as ie,t as re,K as F,N as j,B as ne,an as ce}from"./vue-ionic-CB3fsSQu.js";import{u as ue}from"./useServerClient-D4gfwMQm.js";import{_ as L}from"./CoverImage.vue_vue_type_script_setup_true_lang-kum-8dJE.js";import{_ as de}from"./OptimizedIcon.vue_vue_type_script_setup_true_lang-DQt-oQaH.js";import{d as V,bb as B,l as fe,a7 as me,j as g,t as pe,u as ve,ad as D,n as S,w as M,as as be,o as N,at as E}from"./index-FAKGUJAJ.js";import{_ as we}from"./BigPlayButton.vue_vue_type_script_setup_true_lang-2uiiA5Ni.js";import{_ as xe}from"./MusicButton.vue_vue_type_script_setup_true_lang-Cm7aQ_Gx.js";import{_ as _e}from"./TrackLinks.vue_vue_type_script_setup_true_lang-Dd1saI89.js";import{E as ye}from"./EqSpinner-CkFdOnEv.js";import{M as K}from"./MediaLikeButton-Gi3gSL5M.js";import{_ as ke}from"./Marquee.vue_vue_type_script_setup_true_lang-DGlCmzit.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-D67oQ9Zt.js";import"./icons-BW5E66pf.js";import"./rxjs-BCp2L9Rn.js";import"./media-C2AqgyMX.js";import"./api-BBofn2cc.js";import"./swiper-DhG1br88.js";import"./useInfiniteServerClient-CbmLNZgm.js";import"./AppLogoSquare-BQzxVNwo.js";import"./music-player-DVxBCkzH.js";import"./PlayerIcon.vue_vue_type_script_setup_true_lang-CKfHBUj-.js";const ge={class:"w-available h-available absolute left-[202px] top-0 overflow-hidden bg-focus"},Se=["src"],Ce={class:"flex justify-center w-available aspect-square my-8 ml-8 mr-16"},Ie={key:0,class:"relative mb-8 flex w-full flex-1 flex-shrink-0 flex-col items-start justify-start gap-4 flex-grow-1 text-left"},$e=["innerHTML"],Te={key:1,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap"},qe={class:"flex items-center h-8 gap-2 self-stretch w-full text-xs font-medium text-left"},Pe={key:0,class:"flex gap-2"},ze={key:1,class:"flex gap-2"},Fe={class:"flex gap-2 items-center justify-between w-full"},je=["data-index","data-id","onClick"],Le={class:"flex w-available overflow-clip items-end"},Ve=Z({__name:"Tv",setup(Be){const A=J(),{data:l}=ue({path:A.fullPath});O(()=>{var a,e,o,r;(e=(a=l.value)==null?void 0:a.color_palette)!=null&&e.cover&&V((r=(o=l.value)==null?void 0:o.color_palette)==null?void 0:r.cover),setTimeout(()=>{const n=document.querySelector(".focusable");n&&n.focus()},100)}),Q(l,a=>{var e,o;(e=a==null?void 0:a.color_palette)!=null&&e.cover&&V((o=a==null?void 0:a.color_palette)==null?void 0:o.cover),setTimeout(()=>{const r=document.querySelector(".focusable");r&&r.focus()},100)});const $=q(),H=q();W(()=>{setTimeout(()=>{const a=document.querySelector(".focusable");a&&a.focus()},100)});const U=a=>{var n;const e=a.target,o=((n=$.value)==null?void 0:n.getAttribute("data-index"))??0,r=e.querySelector(`[data-index="${o}"] .focusable`);r&&r.focus()},R=a=>{var n;const e=a.target;$.value=e,e&&e.scrollIntoView({behavior:"smooth",block:"center"});const o=(n=e.closest("[data-id]"))==null?void 0:n.getAttribute("data-id"),r=e.querySelector(`[data-index="${o}"] .focusable`);r&&r.focus()},G=a=>{var o,r;const e=a.target;if(a.key=="ArrowUp"){const u=((o=e.closest("ion-item"))==null?void 0:o.previousSibling).querySelector(".focusable");u&&(u.focus(),u.scrollIntoView({behavior:"smooth",block:"center"}))}else if(a.key=="ArrowDown"){const u=((r=e.closest("ion-item"))==null?void 0:r.nextSibling).querySelector(".focusable");u&&(u.focus(),u.scrollIntoView({behavior:"smooth",block:"center"}))}},y=X(()=>{var a,e,o;return`${(e=(a=l.value)==null?void 0:a.type)==null?void 0:e.replace(/s$/u,"")}/${(o=l.value)==null?void 0:o.id}`}),Y=a=>{var e,o,r,n,u,m,i,v,f;if((e=l.value)!=null&&e.tracks){if(!((o=ve.value.features)!=null&&o.nomercyConnect)){if(D.value===y.value){S.togglePlayback();return}S.playTrack(a,(r=l.value)==null?void 0:r.tracks),M(y.value);return}if(be.value||(n=N.value)==null||n.invoke("ChangeDeviceCommand",E.value).then(()=>{console.log("Switched to device:",E.value)}).catch(b=>{console.error("Error switching device:",b)}),(v=N.value)==null||v.invoke("StartPlaybackCommand",(u=l.value)==null?void 0:u.type.replace(/s$/u,""),(m=l.value)==null?void 0:m.id,((i=g.value)==null?void 0:i.id)??(a==null?void 0:a.id)),D.value===y.value){S.togglePlayback();return}S.playTrack(a,(f=l.value)==null?void 0:f.tracks),M(y.value)}};return(a,e)=>(p(),P(t(ce),null,{default:c(()=>[s(t(ee),{fullscreen:!0},{default:c(()=>{var o,r,n,u;return[(p(),w("div",{class:"w-full h-full absolute left-0 top-0 bg-[#131314] pointer-events-none -z-10",key:(o=t(l))==null?void 0:o.id,style:te(t(B)?`--color-focus: ${t(B)}`:"")},[d("div",ge,[d("img",{class:"w-available h-available absolute left-[-0.39px] top-[-0.39px] opacity-40 object-cover object-center",src:`${(r=t(fe))==null?void 0:r.serverBaseUrl}${((n=t(l))==null?void 0:n.backdrop)??((u=t(l))==null?void 0:u.cover)}`,alt:""},null,8,Se),e[5]||(e[5]=d("div",{class:"w-[150vw] h-[150vw] absolute left-[-30%] bottom-[-50%]",style:{background:`radial-gradient(
                    closest-side,
                    rgba(19, 19, 20, 0.1) 0%,
                    rgba(19, 19, 20, 1) 70.73974609375%
                  )`}},null,-1))])],4)),s(t(z),null,{default:c(()=>[s(t(C),{class:"ion-align-items-end"},{default:c(()=>[s(t(_),{size:"3"},{default:c(()=>{var m,i,v,f,b,x,k,T;return[d("div",Ce,[s(L,{data:t(l),alt:(m=t(l))==null?void 0:m.name,class:"w-auto h-full aspect-square"},null,8,["data","alt"])]),(i=t(l))!=null&&i.name?(p(),w("div",Ie,[t(l).name.length>50?(p(),w("div",{key:0,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap",innerHTML:t(me)(((v=t(l))==null?void 0:v.name)??"Songs you like","text-xs line-clamp-1")},null,8,$e)):(p(),w("p",Te,h((f=t(l))==null?void 0:f.name),1)),d("div",qe,[(b=t(l))!=null&&b.type?(p(),w("span",Pe,[d("span",null,h((x=t(l))==null?void 0:x.type.replace(/s$/u,"").toTitleCase()),1)])):I("",!0),(k=t(l))!=null&&k.tracks?(p(),w("span",ze,[e[6]||(e[6]=d("span",null,"â€¢",-1)),d("span",null,h((T=t(l))==null?void 0:T.tracks.length)+" "+h(a.$t("tracks")),1)])):I("",!0)]),d("div",Fe,[s(K,{data:t(l)},null,8,["data"]),s(we,{data:t(l),class:"w-12 h-12 ml-auto"},null,8,["data"])])])):I("",!0)]}),_:1}),s(t(_),{size:"6",ref_key:"scrollContainer",ref:H,onFocus:e[4]||(e[4]=m=>U(m)),tabindex:"0",class:"w-full h-available overflow-auto scroll-smooth"},{default:c(()=>[s(t(ae),{mode:"md",lines:"none"},{default:c(()=>{var m;return[(p(!0),w(le,null,se((m=t(l))==null?void 0:m.tracks,(i,v)=>(p(),P(t(oe),{key:i.id+(i==null?void 0:i.favorite),tabindex:"-1",mode:"md",class:"group/track focus-within:bg-white/4 rounded-md overflow-clip"},{default:c(()=>[s(t(z),null,{default:c(()=>[s(t(C),{"data-index":v,"data-id":i.id,tabindex:"-1",class:"items-center !rounded-md !overflow-clip"},{default:c(()=>[s(t(_),{size:"2",tabindex:"-1"},{default:c(()=>[d("div",{tabindex:"0","data-index":v,"data-id":i.id,class:"focusable flex justify-center w-full aspect-video focus:outline outline-focus outline-2 outline-offset-2 mr-2 overflow-clip",onFocus:e[0]||(e[0]=f=>R(f)),onClick:f=>Y(i)},[s(L,{data:i,alt:i.name,class:"w-auto h-full aspect-square"},null,8,["data","alt"])],40,je)]),_:2},1024),s(t(_),{size:"8",tabindex:"-1",class:"my-auto mt-2"},{default:c(()=>[s(t(ie),{tabindex:"-1"},{default:c(()=>{var f,b,x;return[d("div",Le,[d("div",{class:re(["flex items-center justify-center h-full aspect-square overflow-clip transition-width duration-200",{"w-0":((f=t(g))==null?void 0:f.id)!=i.id,"w-6 mr-1":((b=t(g))==null?void 0:b.id)==i.id}])},[s(ye,{playing:t(pe)},null,8,["playing"])],2),s(ke,{playing:!!((x=t(g))!=null&&x.id),text:i.name,class:"!w-[calc(100%-30px)] text-auto-12 children:leading-none w-available overflow-clip"},null,8,["playing","text"])]),s(_e,{data:i.artist_track,type:"artists",id:i.id,onKeydown:[e[1]||(e[1]=F(j(()=>{},["prevent"]),["up"])),e[2]||(e[2]=F(j(()=>{},["prevent"]),["down"]))],onKeyup:e[3]||(e[3]=k=>G(k)),suffix:"track"},null,8,["data","id"])]}),_:2},1024)]),_:2},1024),s(t(_),{size:"2",tabindex:"-1",class:"opacity-0 group-focus-within/track:opacity-100 -ml-2"},{default:c(()=>[s(t(C),{tabindex:"-1",class:"flex flex-nowrap"},{default:c(()=>[s(K,{data:i},null,8,["data"]),e[7]||(e[7]=ne()),s(xe,{label:"",tabindex:"1",onclick:()=>{},class:"!bg-transparent mr-2"},{default:c(()=>[s(de,{icon:"menuDotsHorizontal",class:"text-white"})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1032,["data-index","data-id"])]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1},512)]),_:1})]),_:1})]}),_:1})]),_:1}))}}),ot=he(Ve,[["__scopeId","data-v-ab5aecf8"]]);export{ot as default};
