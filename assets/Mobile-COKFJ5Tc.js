import{An as m,Bn as S,Bt as $,Gt as _,Hn as z,I as N,Lt as P,M as j,Mt as F,Rt as i,Sn as L,T as q,Tt as A,Vt as g,an as O,bn as y,cn as c,i as G,mt as W,qt as Y,u as D,un as J,zn as o,zt as k}from"./index-CymNhKD_.js";import"./dist-BzCNKCKQ.js";import"./esm-ACLeELb5.js";import"./esm-D_D4nCnV.js";import"./dist-DXrN7I-1.js";import"./client-B3lu4kSB.js";import"./ionic-global-CJHxMOPd.js";import"./hardware-back-button-D60wdz2_.js";import"./index3-D8TaXO-z.js";import"./index8-DyEBw6N5.js";import"./keyboard-CzXNBarC.js";import"./index2-YLkJp4Cu.js";import"./ios.transition-De37_SF6.js";import"./keyboard2-F9Kv6wST.js";import"./md.transition-DlofogM3.js";import"./basecomponent-Bn5la5w8.js";import"./button-fwbJbD2G.js";import{h as f,l as K,m as v,o as b}from"./ui-CVk4xI0v.js";import"./client-CxRn8_4O.js";import{v as Q,x as U}from"./currentServer-DzE7mepP.js";import"./config-BZ-AEJ_J.js";import"./esm-B369UUD9.js";import"./global-lh4aio7e.js";import"./esm-L6OojSyq.js";import"./bundle-mjs-CKr78mlm.js";import"./user-DlzWNC9W.js";import"./serverClient-BuGPA0-U.js";import{t as X}from"./router-Ch9jBD0u.js";import"./utils-DO5s4OOL.js";import"./useInfiniteServerClient-vxekqC7x.js";import"./SocketClient-DIjrmZvk.js";import"./apiClient-DbAYXZY3.js";import"./notifications-C159qvRm.js";import"./utils-D5LXfnop.js";import"./deviceInfo-AeSN8xPw.js";import"./auth-Csw53SQZ.js";import"./musicPlaylists-CmQ_i0Iu.js";import"./esm-BbrE0WBs.js";import"./contextMenuItems-BpxGjgB3.js";import{r as Z}from"./BigPlayButton-BKZ4wRc8.js";import"./AppLogoSquare-yoQIEFk_.js";import{t as R}from"./MoooomIcon-D8Onw6Et.js";import"./DropdownMenu-BAH5C5rx.js";import"./dist-5Ks7n5tk.js";import{t as ee}from"./useServerClient-BC86_TUk.js";import"./CoverImage-B-cOA2tn.js";import"./MusicButton-Bje5gNcL.js";import"./BannerButton-CuetxwW8.js";import"./MediaLikeButton-BycqhWSF.js";import{t as te}from"./Marquee-C02Cd3_e.js";import"./EqSpinner-ylvqFUdD.js";import{t as oe}from"./NotFound-CSCEXDsO.js";import"./ShareButton-DP6ttAtT.js";import{i as ae,n as re,r as le,t as se}from"./TrackRow-BP_N811I.js";A();j();var ie={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},ne={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},ue=Y({__name:"Mobile",setup(pe){const h=N(),{data:e,isError:B}=ee({path:h.fullPath}),H=m(null),n=m([]),s=m("");y(e,t=>{Q(t?.name??null),d(t?.tracks??[],f.value,v.value,s.value),b(t?.color_palette?.cover)}),y(v,t=>{d(e.value?.tracks??[],f.value,t,s.value)}),y(f,t=>{d(e.value?.tracks??[],t,v.value,s.value)}),y(s,t=>{d(e.value?.tracks??[],f.value,v.value,t)});function d(t,l,a,r){const u=U(t??[],l,a,K);r===""?n.value=u:n.value=u?.filter(p=>p.name?.toLowerCase().includes(r?.toLowerCase?.())||p.artist_track?.some(V=>V.name.toLowerCase().includes(r?.toLowerCase?.()))||p.album_track?.[0]?.name.toLowerCase().includes(r?.toLowerCase?.()))??[]}O(()=>{d(e?.value?.tracks??[],f.value,v.value,s.value),e.value?.color_palette?.cover&&b(e.value?.color_palette?.cover)}),q(()=>{d(e?.value?.tracks??[],f.value,v.value,s.value),e.value?.color_palette?.cover&&b(e.value?.color_palette?.cover)});function M(){X.back()}const x=m(!1),E=m(!1),w=m(),C=m(),T=P(()=>Z({count:n.value?.length??0,getScrollElement:()=>C.value?.$el??null,estimateSize:()=>56,overscan:10}));function I(){const a=W("capacitor")?88:64,r=w.value?.$el,u=r?.firstChild;if(!r||!u)return;const p=r.getBoundingClientRect().top;x.value=p<=170,E.value=p<=160,p<=a?document.documentElement.classList.contains("scheme-dark")?u.style.background="hsl(from var(--color-theme-8) h s 23%)":(u.style.background="var(--color-theme-8)",r.style.color="white"):(u.style.background="",r.style.color="")}return(t,l)=>(c(),k(o(D),null,{default:L(()=>[_(o(G),{ref_key:"container",ref:C,"scroll-events":!0,onIonScroll:I},{default:L(()=>[o(B)&&!o(e)?(c(),k(oe,{key:0})):!o(h).params.id||o(h).params.id&&o(e)?.id===o(h).params.id?(c(),g("div",{key:1,ref_key:"main",ref:H,class:"flex flex-col h-auto overflow-x-clip w-available sm:rounded-2xl -mt-6 text-surface-12"},[_(le,{data:o(e)},null,8,["data"]),i("div",ie,[l[2]||(l[2]=i("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),i("div",{id:"navbar",class:S([{"opacity-0 pointer-events-none":!x.value,"opacity-100 pointer-events-auto":x.value},"fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-surface-11 dark:bg-surface-1 top-0 pt-4 transition-all duration-200"])},[l[1]||(l[1]=i("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-all duration-200 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),i("button",{class:"z-30 flex h-10 w-11 items-center justify-center rounded-md",onClick:M},[_(R,{icon:"arrowLeft"})]),i("div",{id:"navText",class:S([{"opacity-0 pointer-events-none":!x.value,"opacity-100 pointer-events-auto":x.value},"pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-all duration-200 w-[70%] overflow-clip text-xl"])},[_(te,{text:o(e)?.name},null,8,["text"])],2)],2),(c(),k(ae,{key:o(e)?.id,data:o(e),filter:s.value,onFilterChange:l[0]||(l[0]=a=>s.value=a)},null,8,["data","filter"])),i("div",ne,[(c(),k(re,{key:o(e)?.id,ref_key:"sortHeader",ref:w})),i("div",{style:z({height:`${T.value.value.getTotalSize()}px`,width:"100%",position:"relative"})},[(c(!0),g(F,null,J(T.value.value.getVirtualItems(),a=>(c(),g("div",{key:n.value[a.index]?.id+n.value[a.index]?.favorite,style:z({position:"absolute",top:0,left:0,width:"100%",height:`${a.size}px`,transform:`translateY(${a.start}px)`})},[_(se,{data:n.value[a.index],"display-list":n.value,index:a.index},null,8,["data","display-list","index"])],4))),128))],4)])])],512)):$("",!0)]),_:1},512)]),_:1}))}}),mt=ue;export{mt as default};
