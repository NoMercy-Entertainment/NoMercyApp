import{Bl as R,Cl as T,D as G,Gl as I,Gr as b,Hl as x,R as O,St as z,bl as E,gu as f,hu as M,kl as U,ll as V,su as g,vl as Y,vu as j,xl as J,zl as K}from"./index-DhiB0zJh.js";V();var P=["data-music"],Q=U({__name:"ScrollContainer",props:{autoHide:{type:Boolean,default:!1},className:{type:String,required:!1,default:""},static:{type:Boolean,default:!0},frame:{type:Boolean,default:!1}},emits:["scroll"],setup(r){const c=g(),m=g(),a=g(!1),v=g(!1);let n=null,s=null,i=null,w={clientHeight:0,scrollHeight:0},u=null;function B(){k();const t=c.value,l=m.value,e=b.value;if(!t||!e||!l)return;e.scrollTop=0;const o=()=>{e&&(w.clientHeight=e.clientHeight,w.scrollHeight=e.scrollHeight,n&&n())},d=()=>{if(!e||!t||!l)return;const h=e.clientHeight,C=e.scrollHeight,N=e.scrollTop;if(C<=h){a.value=v.value,s=null;return}a.value=!0;const L=Math.ceil(h/C*h),q=l.clientHeight-L,S=C-h,A=(S>0?N/S:0)*q;t.style.height=`${L}px`,t.style.translate=`0 ${A}px`,s=null};n=()=>{s===null&&(s=requestAnimationFrame(d),v.value=!0,i!==null&&clearTimeout(i),i=window.setTimeout(()=>{v.value=!1,d()},1e3))},o(),requestAnimationFrame(()=>{o(),d()}),u=new ResizeObserver(()=>{o()}),u.observe(e),e.firstElementChild&&u.observe(e.firstElementChild),e.addEventListener("scroll",n,{passive:!0}),t.addEventListener("mousedown",_)}function p(){document.removeEventListener("mouseup",p),document.removeEventListener("mousemove",y)}function _(t){t.preventDefault(),document.addEventListener("mouseup",p),document.addEventListener("mousemove",y)}function D(t,l,e){return Math.min(Math.max(t,l),e)}function y(t){t.preventDefault();const l=c.value,e=m.value,o=b.value;if(!l||!o||!e||t.target?.dataset?.scrollbar)return;const d=D(0,t.clientY-e.getBoundingClientRect().top,e.clientHeight)-l.clientHeight/2;o.scrollTop=(o.scrollHeight-o.clientHeight)*(d/(e.clientHeight-l.clientHeight))}function k(){const t=c.value,l=b.value;s!==null&&(cancelAnimationFrame(s),s=null),i!==null&&(clearTimeout(i),i=null),v.value=!1,u&&(u.disconnect(),u=null),l&&n&&l.removeEventListener("scroll",n),n=null,t&&t.removeEventListener("mousedown",_),document.removeEventListener("mouseup",p),document.removeEventListener("mousemove",y)}K(()=>{B()}),R(()=>{k()}),O.afterEach(B);function H(){a.value=!0}function F(){a.value=!1}function $(){}return(t,l)=>(x(),T("div",{ref_key:"scrollContainerElement",ref:b,class:f([{"group/scrollContainer":!r.frame,"group/scrollContainer-frame":r.frame},"flex flex-1 h-available music-showing:h-[calc(100vh-7rem)] sm:music-showing:h-[calc(100vh-11rem)] z-0 isolate overflow-auto will-change-scroll w-full flex-col scrollbar-none scroll-container text-surface-12"]),"data-music":M(z),tabindex:"1",onFocus:$,onMouseleave:F,onMousemove:H,onScroll:l[0]||(l[0]=e=>t.$emit("scroll",e))},[I(t.$slots,"default",{},void 0,!0),r.static?(x(),J(Y,{key:0,to:"body"},[E("div",{ref_key:"refBar",ref:m,onMousemove:H,class:f([{"opacity-100":a.value,"opacity-0":!a.value,"top-16 bottom-6 mr-1":r.static,"top-0 bottom-0 mr-1":!r.static,"bottom-20":M(z)==="showing",className:r.className},"right-0 mt-2 mb-2 hidden rounded-full border-r-2 border-l-4 border-transparent w-3.5 group-active/scrollContainer-frame:bg-surface-12/6 hover:bg-surface-12/6 sm:flex"]),style:j(`position: ${r.static?"fixed":"absolute"}`),"data-scrollbar":""},[E("span",{ref_key:"refHandle",ref:c,class:f([{"opacity-0 group-hover/scrollContainer-frame:opacity-100":r.autoHide&&!a.value,"!transition-none":!a.value},"scrollbar-handle absolute top-0 z-10 h-available right-0 bottom-0 hidden rounded-full border-r-2 border-l-4 border-transparent w-2.5 bg-surface-12/11 sm:flex scale-y-[105%]"]),"data-scrollbar":"",draggable:"true"},null,2)],38)])):(x(),T("div",{key:1,ref_key:"refBar",ref:m,onMousemove:H,class:f([{"opacity-100":a.value,"opacity-0":!a.value},"group/bar absolute top-0 mr-1 z-10 h-available right-0 bottom-0 hidden rounded-full border-r-2 border-l-4 border-transparent w-3.5 group-active/scrollContainer-frame:bg-surface-12/6 hover:bg-surface-12/6 sm:flex scale-[100%_96%]"]),"data-scrollbar":""},[E("span",{ref_key:"refHandle",ref:c,class:f([{"opacity-0 group-hover/scrollContainer:opacity-100 group-active/scrollContainer:bg-surface-2/9":!r.static&&r.autoHide,"!transition-none":!a.value},"scrollbar-handle absolute top-0 z-10 h-available right-0 bottom-0 hidden rounded-full border-r-2 border-l-4 border-transparent w-2.5 bg-surface-12/11 sm:flex scale-y-[105%]"]),"data-scrollbar":"",draggable:"true"},null,2)],34))],42,P))}}),X=G(Q,[["__scopeId","data-v-8918dcc7"]]);export{X as t};
