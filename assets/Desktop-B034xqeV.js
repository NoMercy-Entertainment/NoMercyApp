import{D as T,Ht as A,In as s,Jn as E,Rn as d,Sn as M,Tn as b,Wn as n,Zn as i,cn as m,en as R,in as S,kn as j,nn as z,rn as q,sn as F,tn as t,tr as G,un as H,x as J}from"./index-04Sh3wNb.js";import"./dist-CVoPesok.js";import"./esm-BuFVrMo0.js";import"./esm-9iWgK55i.js";import"./esm-cDzTb79E.js";import"./esm-BfF1RlcU.js";import"./dist-B3n7-doU.js";import"./focus-visible-CHAJCf_J.js";import"./index5-B30D6T27.js";import"./client-rtF7IPPI.js";import"./ionic-global--aoJHCDL.js";import"./hardware-back-button-h528z6zo.js";import"./index3-CSo3jo06.js";import"./helpers-CXS86XKs.js";import"./index6-CZ6rqL_0.js";import"./index8-BpkFXja0.js";import"./keyboard-cU79cwdW.js";import"./index2-op38TIl9.js";import"./ios.transition-C8T7q-Bo.js";import"./keyboard2-DETZ41vp.js";import"./md.transition-BqH5iNQr.js";import"./dir-BUtgAzbR.js";import"./basecomponent-Dw-Pzf3B.js";import"./classnames-DtEYS8u9.js";import"./baseicon-pCfUe6Zj.js";import"./ui-BT6EUdI0.js";import"./client-DMa-uSBE.js";import{n as U,t as l}from"./currentServer-B7-kbkE-.js";import"./config-BOA2pGQM.js";import"./esm-CcKFjObu.js";import"./global-gyhCjh_P.js";import"./esm-BuRgllmc.js";import"./user-C1ciKa7-.js";import{t as K}from"./serverClient-FHPKIHPu.js";import{o as I,s as D}from"./router-C_xBvmya.js";import"./utils-D5DD-7jP.js";import"./useBaseQuery-CNJp2kAB.js";import"./useInfiniteServerClient-By5CuBlL.js";import"./SocketClient-DPmgFkP-.js";import{t as L}from"./useQueryClient-s6ZLwuD6.js";import"./useQuery-C7DDAmeN.js";import"./apiClient-Cw7f36ko.js";import"./notifications-Bi_dU6lP.js";import"./utils-CdenF_Jv.js";import"./bundle-mjs-Xm_uQvzT.js";import"./deviceInfo-Bcw3-ht5.js";import"./helpers-fSCF1qXj.js";import"./auth-DfyD43WY.js";import{t as W}from"./MoooomIcon-DNWQYuYD.js";import"./baseeditableholder-CPfgMqWC.js";import{t as Z}from"./Toggle-DSbq3Ccp.js";import{t as X}from"./inputtext-FoiCFKHp.js";import{t as V}from"./inputnumber-v_7V1hLO.js";import{t as Y}from"./useServerClient-CroZbKWw.js";import"./ScrollContainer-3_hZWeKa.js";import"./useMounted-CBZpV1fi.js";import"./RipperOverlay-BWEr7uxe.js";import"./HubConnection-BtQMN1V5.js";import"./ripperSocket-C9kIp3Ty.js";import"./Button-BOqv4y1r.js";import"./FloatingBackButton-D3UgtlFi.js";import{t as ee}from"./DashboardLayout-CXf1x5EO.js";A();var re={key:0,class:"col-span-2 col-start-1 2xl:col-start-1"},oe={class:"flex flex-col gap-2"},te={class:"flex flex-col gap-2"},ae={class:"flex flex-col gap-2"},le={key:1,class:"col-span-2 col-start-1 2xl:col-start-3"},se={class:"flex flex-col gap-2"},ne={class:"flex flex-col gap-2"},ue={class:"flex flex-col gap-2"},ie={key:2,class:"col-span-2 col-start-1 2xl:col-start-5"},me={class:"flex flex-col gap-2"},pe={class:"flex gap-4"},ve=["aria-label","href"],de=H({__name:"Desktop",setup(fe){const{data:o,refetch:N,error:$}=Y({path:"/dashboard/configuration"}),f=n(!1),u=n(o.value??{}),p=(e,r)=>{if(o.value){if(E(o.value[e])===r){delete u.value[e],u.value={...u.value};return}u.value={...u.value,[e]:r??void 0}}};s(o,e=>{e&&(u.value={},_.value=e?.name,g.value=e?.external_port,w.value=e?.internal_port,k.value=e?.queue_workers,y.value=e?.cron_workers,B.value=e?.data_workers,C.value=e?.request_workers,x.value=e?.encoder_workers,c.value=e?.image_workers,v.value=e?.swagger,f.value=!0)}),M(()=>{o.value&&(u.value={},_.value=o.value?.name,g.value=o.value?.external_port,w.value=o.value?.internal_port,k.value=o.value?.queue_workers,y.value=o.value?.cron_workers,B.value=o.value?.data_workers,C.value=o.value?.request_workers,x.value=o.value?.encoder_workers,c.value=o.value?.image_workers,v.value=o.value?.swagger,f.value=!0)});const _=n(o.value?.name??"");s(_,e=>{p("name",e),l.value&&(D([...I.value.filter(r=>r.id!==l.value.id),{...l.value,name:e.toString()}]),U({...l.value,name:e.toString()}))});const g=n(o.value?.external_port??0);s(g,e=>{p("external_port",e),l.value&&(D([...I.value.filter(r=>r.id!==l.value.id),{...l.value,external_port:e.toString()}]),U({...l.value,external_port:e.toString()}))});const w=n(o.value?.internal_port??0);s(w,e=>{p("internal_port",e),l.value&&(D([...I.value.filter(r=>r.id!==l.value.id),{...l.value,internal_port:e.toString()}]),U({...l.value,internal_port:e.toString()}))});const k=n(o.value?.queue_workers??0);s(k,e=>{p("queue_workers",e)});const y=n(o.value?.cron_workers??0);s(y,e=>{p("cron_workers",e)});const B=n(o.value?.data_workers??0);s(B,e=>{p("data_workers",e)});const C=n(o.value?.request_workers??0);s(C,e=>{p("request_workers",e)});const c=n(o.value?.image_workers??0);s(c,e=>{p("image_workers",e)});const x=n(o.value?.encoder_workers??0);s(x,e=>{p("encoder_workers",e)});const v=n(o.value?.swagger??!1);s(v,e=>{p("swagger",e)});const h=R(()=>Object.keys(u.value).length>0);s(u,e=>{console.log(e)});const O=L(),P=()=>{console.raw(u.value),K().patch("/dashboard/configuration",u.value).then(()=>{N(),O.invalidateQueries({queryKey:["serverInfo"]})})};return(e,r)=>{const Q=j("Button");return b(),z(i(T),null,{default:d(()=>[m(i(J),{fullscreen:!0},{default:d(()=>[m(ee,{error:i($),gridStyle:2,description:"",title:"General"},{cta:d(()=>[...r[8]||(r[8]=[])]),actions:d(()=>[m(Q,{id:"save",disabled:!h.value,class:"ml-auto",color:"theme",form:"myForm",type:"submit",onClick:r[7]||(r[7]=a=>P())},{default:d(()=>[F(G(e.$t("Save")),1)]),_:1},8,["disabled"])]),default:d(()=>[f.value?(b(),S("div",re,[t("div",oe,[r[9]||(r[9]=t("label",{for:"name"},"Server name",-1)),m(i(X),{id:"name",modelValue:_.value,"onUpdate:modelValue":r[0]||(r[0]=a=>_.value=a),class:"mb-4"},null,8,["modelValue"])]),t("div",te,[r[10]||(r[10]=t("label",{for:"internal_port"},"Secure internal port",-1)),m(i(V),{id:"internal_port",modelValue:w.value,"onUpdate:modelValue":r[1]||(r[1]=a=>w.value=a),min:2e3,useGrouping:!1,class:"mb-4",showButtons:""},null,8,["modelValue"])]),t("div",ae,[r[11]||(r[11]=t("label",{for:"external_port"},"Secure external port",-1)),m(i(V),{id:"external_port",modelValue:g.value,"onUpdate:modelValue":r[2]||(r[2]=a=>g.value=a),min:2e3,useGrouping:!1,class:"mb-4",showButtons:""},null,8,["modelValue"])])])):q("",!0),f.value?(b(),S("div",le,[t("div",se,[r[12]||(r[12]=t("label",{for:"encoder_workers"},"Encoder workers",-1)),m(i(V),{id:"encoder_workers",modelValue:x.value,"onUpdate:modelValue":r[3]||(r[3]=a=>x.value=a),min:0,useGrouping:!1,class:"mb-4",showButtons:""},null,8,["modelValue"])]),t("div",ne,[r[13]||(r[13]=t("label",{for:"image_workers"},"Image workers",-1)),m(i(V),{id:"image_workers",modelValue:c.value,"onUpdate:modelValue":r[4]||(r[4]=a=>c.value=a),min:0,useGrouping:!1,class:"mb-4",showButtons:""},null,8,["modelValue"])]),t("div",ue,[r[14]||(r[14]=t("label",{for:"queue_workers"},"Queue workers",-1)),m(i(V),{id:"queue_workers",modelValue:k.value,"onUpdate:modelValue":r[5]||(r[5]=a=>k.value=a),min:0,useGrouping:!1,class:"mb-4",showButtons:""},null,8,["modelValue"])])])):q("",!0),f.value?(b(),S("div",ie,[t("div",me,[t("span",pe,[r[15]||(r[15]=t("label",{for:"swagger"},"Open API / Swagger Ui",-1)),v.value&&i(l)?.serverBaseUrl?(b(),S("a",{key:0,"aria-label":e.$t("Open API / Swagger Ui in a new tab"),href:i(l)?.serverBaseUrl,class:"flex gap-1 items-center underline underline-offset-4 h-4 text-sm",target:"_blank"},[t("span",null,G(e.$t("Open")),1),m(W,{className:"size-4",color:"theme",icon:"shareSquare"})],8,ve)):q("",!0)]),m(Z,{"model-value":v.value,"onUpdate:modelValue":r[6]||(r[6]=a=>v.value=a)},null,8,["model-value"])])])):q("",!0)]),_:1},8,["error"])]),_:1})]),_:1})}}}),Sr=de;export{Sr as default};
