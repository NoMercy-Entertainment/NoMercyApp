import{C as P,Ft as _,Gt as w,Ln as s,Rn as C,Rt as c,Tt as h,cn as m,i as I,kn as M,mt as l,qt as S,u as N,w as T,xn as d,yn as x,zt as v}from"./index-C8wrpkyN.js";import"./dist-DT2yuChF.js";import{t as B}from"./esm-DnlYWABm.js";import"./esm-CdHIRdo_.js";import"./dist-DtOedwIT.js";import"./focus-visible-C1DWu8Oz.js";import"./index5-C9RIJ-sZ.js";import"./client-DAXuPTec.js";import"./ionic-global-QXgPMqNd.js";import"./hardware-back-button-9ZINzT5a.js";import"./index3-BubtwhWu.js";import"./helpers-D5mJiZ9q.js";import"./index6-Cj1ScfU-.js";import"./index8-DaGgXvc2.js";import"./keyboard-COERgV0V.js";import"./index2-BuY1gQTr.js";import"./ios.transition-BUwO3_AE.js";import"./keyboard2-CSWHSxpI.js";import"./md.transition-Dd2SUgMb.js";import"./dir-CJiJYBc7.js";import"./ui-BWVnjNNY.js";import"./client-BmAhQ-69.js";import{t as D}from"./currentServer-B_KQACAB.js";import"./config-BZ-AEJ_J.js";import"./core-BLZUGO-K.js";import"./esm-BiKSXF-U.js";import{p as f}from"./global-WVsx5src.js";import"./esm-B8xVkXPy.js";import"./bundle-mjs-DzMTChaT.js";import{s as t}from"./user-CXzDmTwG.js";import"./serverClient-K02oLPZR.js";import{t as a}from"./router-I2PvuKTp.js";import"./utils-CYCtUrjH.js";import"./useBaseQuery-B6wsCOmB.js";import"./useInfiniteServerClient-D5CFD8Z7.js";import{l as y}from"./SocketClient-CeGi9Yeo.js";import"./useQueryClient-mZLXzkAX.js";import"./useQuery-BBjfmHCe.js";import"./apiClient-CnOywAmP.js";import"./notifications-DAOHq0v-.js";import{c as U,i as V,l as A,r as L,y as z}from"./utils-T6SCnbWu.js";import"./deviceInfo-DQllL7m1.js";import"./auth-D3TfzZqc.js";import{s as p}from"./imageModal-KC5z1j1w.js";import{t as R}from"./useServerClient-Bvu1z2Rs.js";import{a as F,i as j,n as q,o as E,r as G}from"./VideoPlayer-DFyC6JIv.js";import"./buttons-BrAf7pXX.js";import{t as O}from"./videoNoMercyConnectPlugin-s64W0HdJ.js";h();var H=S({__name:"Mobile",setup(J){const{data:n}=R({enabled:!t.value.features?.nomercyConnect}),e=M();function u(o){const i={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:o?.filter(r=>!!r.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:t.value?.accessToken||localStorage.getItem("access_token")||"",basePath:D.value?.serverBaseUrl,imageBasePath:"https://app.nomercy.tv/tmdb-images",forceTvMode:(l("android")||l("ios"))&&!l("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||l("capacitor"),renderAhead:100,disableAutoPlayback:t.value.features?.nomercyConnect};if(e.value=G("player1").setup(i),e.value?.once("back",()=>{history.state.back?a.back():a.replace("/")}),t.value.features?.nomercyConnect){const r=new O;e.value?.registerPlugin("videoNoMercyConnect",r),e.value?.usePlugin("videoNoMercyConnect")}const g=new j;e.value?.registerPlugin("desktopUI",g),e.value?.usePlugin("desktopUI");const b=new F;if(e.value?.registerPlugin("autoSkip",b),e.value?.usePlugin("autoSkip"),!t.value.features?.nomercyConnect){const r=new E;e.value?.registerPlugin("sync",r),e.value?.usePlugin("sync")}const k=new q;e.value?.registerPlugin("octopus",k),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?a.back():a.replace("/")}),e.value?.on("dispose",async()=>{await A(),await L(),history.state.back?a.back():await a.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{p(!0)}),e.value?.on("pause",()=>{p(!1)}),e.value?.on("ready",async()=>{await U(),await z(),await V(),y.stop()}),e.value?.on("item",()=>{e.value?.play()}),B.addListener("backButton",()=>{e.value?.emit("back-button-hyjack"),e.value?.dispose()})}return x(n,o=>{o?.length&&u(o)}),P(()=>{y.stop(),t.value.features?.nomercyConnect?u():n.value?.length&&u(n.value)}),T(()=>{e.value?.dispose(),p(!1)}),(o,i)=>(m(),v(s(N),null,{default:d(()=>[w(s(I),{fullscreen:!0},{default:d(()=>[(m(),v(_,{to:"body"},[c("div",{class:C([{"mb-28":s(f),"mb-0":!s(f)},"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"])},[...i[0]||(i[0]=[c("div",{id:"player1",class:"group nomercyplayer"},null,-1)])],2)]))]),_:1})]),_:1}))}}),qe=H;export{qe as default};
