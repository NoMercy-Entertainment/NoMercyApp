import{a as F}from"./index-BQx8LJO8.js";import{_ as S}from"./ScrollContainer.vue_vue_type_script_setup_true_lang-B8ZiOtVw.js";import{_ as g}from"./OptimizedIcon.vue_vue_type_script_setup_true_lang-CWob-vhG.js";import{$ as V,d as s,w as c,f as $,k as B,h as d,o as u,j as l,z as n,x as p,p as N,v as q,F as b,q as T}from"./vue-ionic-DRNtAYzz.js";const j={class:"relative mt-1 w-full"},z={class:"relative flex w-full flex-col overflow-clip h-[88%] even:text-lg"},I={class:"flex p-2 pt-4 border-b !bg-transparent text-sm select-none"},U={class:""},D={class:"mr-auto ml-4"},E={class:"relative flex w-full flex-col h-inherit"},G={class:"relative w-full h-auto"},L=["onClick"],M={class:"mr-auto !ml-7 text-sm select-none"},K=V({__name:"FolderBrowser",props:{selected:{type:String,required:!0},setSelected:{type:Function,required:!0}},setup(x){const i=x,t=s(i.selected??"/"),m=s(!1),f=s("/");c(i,e=>{t.value=e.selected}),c(t,e=>{i.setSelected(e),m.value=!1});const v=s([]),w=s(!1);function h(e){F().post("/dashboard/server/directorytree",{folder:e}).then(({data:o})=>{var r,a,_;v.value=o.data.filter(C=>C.type==="folder"),f.value=((_=(a=(r=o.data.at(0))==null?void 0:r.full_path)==null?void 0:a.match(/[\\/]/gu))==null?void 0:_.at(-1))??"/"}).then(()=>w.value=!1)}c(t,e=>{e&&h(e??"")});function y(){var e;m.value=!0,t.value=t.value.split(/[/\\]/gu).slice(0,-1).join(f.value),(e=t.value.match(/[/\\]/gu))!=null&&e.length||(t.value="/")}function k(e){t.value=e.full_path}return $(()=>{h(t.value??"")}),(e,o)=>{const r=B("InputText");return u(),d(b,null,[l("div",j,[n(r,{id:"folderName",modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=a=>t.value=a),name:"","no-ring":"",class:"w-full"},null,8,["modelValue"])]),l("div",z,[l("div",I,[l("span",U,p(e.$t("Type")),1),l("span",D,p(e.$t("Name")),1)]),l("div",E,[n(S,{static:!1,"auto-hide":!1,"class-name":"ml-2"},{default:N(()=>[l("div",{class:q(["bg-auto-6/4 hover:bg-auto-200 border-t-0 border-b border-solid border-[rgba(34,34,34,0.9)] contain flex items-center text-current cursor-pointer overflow-hidden py-1 px-2 align-middle h-10 min-h-10 leading-6 select-none",t.value==="/"?"opacity-50":""]),onClick:y},[n(g,{icon:"returnPackage",class:"mt-1 h-5 w-5"}),o[1]||(o[1]=l("span",{class:"mr-auto !ml-7"},"...",-1))],2),l("div",G,[(u(!0),d(b,null,T(v.value,a=>(u(),d("div",{key:a.full_path,class:"even:bg-auto-6/2 odd:bg-auto-100 hover:bg-auto-200 border-t-0 border-b border-solid border-[rgba(34,34,34,0.9)] contain flex items-center bg-transparent text-current cursor-pointer overflow-hidden py-1 px-2 align-middle h-10 leading-6",onClick:()=>k(a)},[n(g,{icon:"folder",class:"h-5 w-5"}),l("span",M,p(a.path.replace(/[\\\/]/u,"")),1)],8,L))),128))])]),_:1})])])],64)}}});export{K as _};
