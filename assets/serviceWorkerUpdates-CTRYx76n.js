import{bf as a,be as o}from"./index-CuFkuKu6.js";import"./icons-BW5E66pf.js";import"./vue-ionic-Cv2or74p.js";import"./vendor-F08gofix.js";import"./rxjs-BCp2L9Rn.js";import"./media-C2AqgyMX.js";import"./api-BBofn2cc.js";import"./swiper-DhG1br88.js";import"./music-player-Dgg5bFLw.js";function n(){return localStorage.getItem("language")||navigator.language.split("-")[0]||"en"}function i(){const e=n(),t=o[e]||o.en;return{id:`sw-update-${Date.now()}`,type:"update",title:t.newVersion,body:t.updateNow,from:"system",read:!1,created_at:Date.now(),updated_at:Date.now(),notify:!0,link:"reload"}}function m(){if(!("serviceWorker"in navigator)){console.log("Service worker not supported");return}navigator.serviceWorker.ready.then(e=>{e.waiting&&r(),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{t.state==="installed"&&navigator.serviceWorker.controller?r():t.state==="installed"&&console.log("Service worker installed but no controller (first install)")})})}).catch(e=>{console.error("Service worker ready failed:",e)}),document.addEventListener("sw-update-accepted",()=>{console.log("User accepted update, reloading..."),window.location.reload()})}function r(){const e=i();a(e)}export{m as setupServiceWorkerUpdates};
