import{C as g,Et as k,G as y,H as P,J as _,S as r,Tt as n,c as w,gt as h,j as S,ot as C,y as M}from"./i18n-Cs-AFcrY.js";import{qi as l}from"./ionic-XwZpO7IE.js";import"./vue-core-CKeWI2Kt.js";import"./query-28IwY2wK.js";import{$t as B,Ea as I,Ki as c,Kt as T,Qi as U,Qt as x,Ut as A,W as p,k as a,ln as D,qt as j,s as o}from"./index-CpapolHX.js";import"./useInfiniteServerClient-CzMUf_PK.js";import{t as q}from"./useServerClient-1EesMW3F.js";import{a as z,i as E,n as K,o as L,r as N}from"./VideoPlayer-D3WSeDbI.js";import"./buttons-DCxuLQcY.js";w();var Q=S({__name:"Mobile",setup(F){const{data:i}=q({}),e=h();function u(t){const s={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:t?.filter(b=>!!b.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:I.value?.accessToken||localStorage.getItem("access_token")||"",basePath:U.value?.serverBaseUrl,imageBasePath:"https://app.nomercy.tv/tmdb-images",forceTvMode:(l("android")||l("ios"))&&!l("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||l("capacitor"),renderAhead:100};e.value=N("player1").setup(s),e.value?.once("back",()=>{history.state.back?a.back():a.replace("/")});const d=new E;e.value?.registerPlugin("desktopUI",d),e.value?.usePlugin("desktopUI");const v=new z;e.value?.registerPlugin("autoSkip",v),e.value?.usePlugin("autoSkip");const m=new L;e.value?.registerPlugin("sync",m),e.value?.usePlugin("sync");const f=new K;e.value?.registerPlugin("octopus",f),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?a.back():a.replace("/")}),e.value?.on("dispose",async()=>{await B(),await T(),history.state.back?a.back():await a.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{o(!0)}),e.value?.on("pause",()=>{o(!1)}),e.value?.on("ready",async()=>{await x(),await D(),await j(),p.stop()}),e.value?.on("item",()=>{e.value?.play()}),A.addListener("backButton",()=>{e.value?.emit("back-button-hyjack"),e.value?.dispose()})}return C(i,t=>{t?.length&&u(t)}),y(()=>{p.stop(),u(i.value)}),P(()=>{e.value?.dispose(),o(!1)}),(t,s)=>(_(),g(M,{to:"body"},[r("div",{class:k([{"mb-28":n(c),"mb-0":!n(c)},"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"])},[...s[0]||(s[0]=[r("div",{id:"player1",class:"group nomercyplayer"},null,-1)])],2)]))}}),Y=Q;export{Y as default};
