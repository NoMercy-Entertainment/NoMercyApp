import{n as z}from"./rolldown-runtime-C0YIJfRR.js";var P,k,R,W,D,O,U,j,S,H,F,Q,q,M,B,I,G,X,Z=z(()=>{(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(P||(P={})),k=class extends Error{constructor(e,r,t){super(e),this.message=e,this.code=r,this.data=t}},R=e=>{var r,t;return e?.androidBridge?"android":!((t=(r=e?.webkit)===null||r===void 0?void 0:r.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},W=e=>{const r=e.CapacitorCustomPlatform||null,t=e.Capacitor||{},s=t.Plugins=t.Plugins||{},n=()=>r!==null?r.name:R(e),d=()=>n()!=="web",o=i=>{const a=p.get(i);return!!(a?.platforms.has(n())||l(i))},l=i=>{var a;return(a=t.PluginHeaders)===null||a===void 0?void 0:a.find(L=>L.name===i)},m=i=>e.console.error(i),p=new Map,$=(i,a={})=>{const L=p.get(i);if(L)return console.warn(`Capacitor plugin "${i}" already registered. Cannot register plugins twice.`),L.proxy;const y=n(),v=l(i);let h;const K=async()=>(!h&&y in a?h=typeof a[y]=="function"?h=await a[y]():h=a[y]:r!==null&&!h&&"web"in a&&(h=typeof a.web=="function"?h=await a.web():h=a.web),h),V=(c,u)=>{var f,w;if(v){const b=v?.methods.find(g=>u===g.name);if(b)return b.rtype==="promise"?g=>t.nativePromise(i,u.toString(),g):(g,C)=>t.nativeCallback(i,u.toString(),g,C);if(c)return(f=c[u])===null||f===void 0?void 0:f.bind(c)}else{if(c)return(w=c[u])===null||w===void 0?void 0:w.bind(c);throw new k(`"${i}" plugin is not implemented on ${y}`,P.Unimplemented)}},x=c=>{let u;const f=(...w)=>{const b=K().then(g=>{const C=V(g,c);if(C){const E=C(...w);return u=E?.remove,E}else throw new k(`"${i}.${c}()" is not implemented on ${y}`,P.Unimplemented)});return c==="addListener"&&(b.remove=async()=>u()),b};return f.toString=()=>`${c.toString()}() { [capacitor code] }`,Object.defineProperty(f,"name",{value:c,writable:!1,configurable:!1}),f},T=x("addListener"),_=x("removeListener"),J=(c,u)=>{const f=T({eventName:c},u),w=async()=>{_({eventName:c,callbackId:await f},u)},b=new Promise(g=>f.then(()=>g({remove:w})));return b.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await w()},b},A=new Proxy({},{get(c,u){switch(u){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return v?J:T;case"removeListener":return _;default:return x(u)}}});return s[i]=A,p.set(i,{name:i,proxy:A,platforms:new Set([...Object.keys(a),...v?[y]:[]])}),A};return t.convertFileSrc||(t.convertFileSrc=i=>i),t.getPlatform=n,t.handleError=m,t.isNativePlatform=d,t.isPluginAvailable=o,t.registerPlugin=$,t.Exception=k,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},D=e=>e.Capacitor=W(e),O=D(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),U=O.registerPlugin,j=class{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,r){let t=!1;this.listeners[e]||(this.listeners[e]=[],t=!0),this.listeners[e].push(r);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s),t&&this.sendRetainedArgumentsForEvent(e);const n=async()=>this.removeListener(e,r);return Promise.resolve({remove:n})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,r,t){const s=this.listeners[e];if(!s){if(t){let n=this.retainedEventArguments[e];n||(n=[]),n.push(r),this.retainedEventArguments[e]=n}return}s.forEach(n=>n(r))}hasListeners(e){var r;return!!(!((r=this.listeners[e])===null||r===void 0)&&r.length)}registerWindowListener(e,r){this.windowListeners[r]={registered:!1,windowEventName:e,pluginEventName:r,handler:t=>{this.notifyListeners(r,t)}}}unimplemented(e="not implemented"){return new O.Exception(e,P.Unimplemented)}unavailable(e="not available"){return new O.Exception(e,P.Unavailable)}async removeListener(e,r){const t=this.listeners[e];if(!t)return;const s=t.indexOf(r);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const r=this.retainedEventArguments[e];r&&(delete this.retainedEventArguments[e],r.forEach(t=>{this.notifyListeners(e,t)}))}},S=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),H=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent),F=class extends j{async getCookies(){const e=document.cookie,r={};return e.split(";").forEach(t=>{if(t.length<=0)return;let[s,n]=t.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=H(s).trim(),n=H(n).trim(),r[s]=n}),r}async setCookie(e){try{const r=S(e.key),t=S(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,n=(e.path||"/").replace("path=",""),d=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${r}=${t||""}${s}; path=${n}; ${d};`}catch(r){return Promise.reject(r)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const r of e)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}},Q=U("CapacitorCookies",{web:()=>new F}),q=async e=>new Promise((r,t)=>{const s=new FileReader;s.onload=()=>{const n=s.result;r(n.indexOf(",")>=0?n.split(",")[1]:n)},s.onerror=n=>t(n),s.readAsDataURL(e)}),M=(e={})=>{const r=Object.keys(e);return Object.keys(e).map(t=>t.toLocaleLowerCase()).reduce((t,s,n)=>(t[s]=e[r[n]],t),{})},B=(e,r=!0)=>e?Object.entries(e).reduce((t,s)=>{const[n,d]=s;let o,l;return Array.isArray(d)?(l="",d.forEach(m=>{o=r?encodeURIComponent(m):m,l+=`${n}=${o}&`}),l.slice(0,-1)):(o=r?encodeURIComponent(d):d,l=`${n}=${o}`),`${t}&${l}`},"").substr(1):null,I=(e,r={})=>{const t=Object.assign({method:e.method||"GET",headers:e.headers},r),s=M(e.headers)["content-type"]||"";if(typeof e.data=="string")t.body=e.data;else if(s.includes("application/x-www-form-urlencoded")){const n=new URLSearchParams;for(const[d,o]of Object.entries(e.data||{}))n.set(d,o);t.body=n.toString()}else if(s.includes("multipart/form-data")||e.data instanceof FormData){const n=new FormData;if(e.data instanceof FormData)e.data.forEach((o,l)=>{n.append(l,o)});else for(const o of Object.keys(e.data))n.append(o,e.data[o]);t.body=n;const d=new Headers(t.headers);d.delete("content-type"),t.headers=d}else(s.includes("application/json")||typeof e.data=="object")&&(t.body=JSON.stringify(e.data));return t},G=class extends j{async request(e){const r=I(e,e.webFetchExtra),t=B(e.params,e.shouldEncodeUrlParams),s=t?`${e.url}?${t}`:e.url,n=await fetch(s,r),d=n.headers.get("content-type")||"";let{responseType:o="text"}=n.ok?e:{};d.includes("application/json")&&(o="json");let l,m;switch(o){case"arraybuffer":case"blob":m=await n.blob(),l=await q(m);break;case"json":l=await n.json();break;case"document":case"text":default:l=await n.text()}const p={};return n.headers.forEach(($,i)=>{p[i]=$}),{data:l,headers:p,status:n.status,url:n.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}},X=U("CapacitorHttp",{web:()=>new G})});export{Z as n,U as r,j as t};
