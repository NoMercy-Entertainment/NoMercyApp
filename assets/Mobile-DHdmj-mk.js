import{I as K,Y as L,D as N,b1 as j,a8 as S,a5 as q,w as T,B as U,_ as Y,bM as A,l as d,ch as G,d as c,o as r,s as P,j as V,K as t,bu as H,a as b,c as p,n as h,a0 as g,a1 as f,a2 as J,b as y,F as x,h as z,bh as O}from"./index-DkQngsHe.js";import{u as Q}from"./useInfiniteServerClient-BHsBwDbE.js";import{I as W}from"./Indexer-Dz26lqhy.js";import{_ as X}from"./NMCard.vue_vue_type_script_setup_true_lang-6wcX0Zij.js";import{_ as Z}from"./PersonCard.vue_vue_type_script_setup_true_lang-DgVRNc9a.js";import{_ as ee,a as oe}from"./EmptyCard.vue_vue_type_script_setup_true_lang-DARzMW-c.js";import"./useBaseQuery-BnGe7Aaf.js";import"./useQueryClient-Cy1MABnp.js";import"./scrollHandlers-lzjoFM9d.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./contextMenuItems-C4wnSRb1.js";import"./musicPlaylists-DnxyARx3.js";import"./TMDBImage.vue_vue_type_script_setup_true_lang-TirsOY0V.js";import"./AppLogoSquare-BLQmk_bo.js";import"./CardIndicator.vue_vue_type_script_setup_true_lang-BiUo6g5N.js";import"./index-Czi9s18M.js";import"./OptimizedIcon.vue_vue_type_script_setup_true_lang-BBYVQkaB.js";import"./NoResultImage.vue_vue_type_script_setup_true_lang-D3zSjf4t.js";const te="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",se="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",Ce=K({__name:"Mobile",setup(re){var M;const u=L(),{data:n,fetchNextPage:k,hasNextPage:w,isError:ne}=Q({queryKey:["libraries",(M=u.params.id??u.name)==null?void 0:M.split("&").at(0)],limit:20,keepForever:!0});N(()=>{j(),S(null),q(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),T(n,o=>{o&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const D=U(()=>{var s,i,l,m;const o=(m=(l=(i=(s=n.value)==null?void 0:s.pages)==null?void 0:i[0])==null?void 0:l.data)==null?void 0:m[0];return o&&Y.value&&o.media_type!=="person"&&o.media_type!=="genres"});A(()=>{stop(),S(null)});const C=d(),E=d();N(()=>{var o,s;E.value=u.params.id??u.name,w.value&&(((s=(o=n==null?void 0:n.value)==null?void 0:o.pages)==null?void 0:s.length)??0)<50&&k(),document.addEventListener("scrollToDiv",i=>{var l;(l=C.value)==null||l.scrollTo({top:i.detail.top-100,behavior:"smooth"})})}),G(()=>{document.dispatchEvent(new Event("indexer"))}),T(n,o=>{var s;o&&w.value&&((s=o==null?void 0:o.pages)==null?void 0:s.length)<50&&k()});const F=d(),R=d();function v(o,s){F.value=s,R.value.show(o)}return(o,s)=>(r(),c(t(O),null,{default:P(()=>[V(t(H),{fullscreen:!0,class:"ion-padding",style:{"--padding-bottom":"0"}},{default:P(()=>{var i;return[s[0]||(s[0]=b("div",{class:"fixed top-0 pt-safe w-full bg-slate-light-1 dark:bg-slate-dark-3 z-1199"},null,-1)),b("div",{ref_key:"lib",ref:C,class:"pt-safe-offset-9 flex h-auto w-full pr-8 overflow-auto scroll-container"},[(r(),p("div",{key:(i=t(J).currentRoute.value.params)==null?void 0:i.id,class:h(["z-0 flex flex-col gap-4 rounded-3xl border-0 w-available scrollbar-none border-auto-3",{"pb-2":t(g)&&t(f),"children:pb-4 sm:children:pb-3":!t(g)&&t(f)}])},[b("div",{class:h(`grid w-full gap-4 scroll-smooth music-showing:pb-0 pl-1 py-4 ${D.value?te:se}`)},[t(n)?(r(!0),p(x,{key:0},z(t(n).pages??[],(l,m)=>{var B,I,$;return r(),p(x,{key:m},[l.data.length>0?(r(!0),p(x,{key:0},z(l.data??[],(e,_)=>(r(),p(x,null,[(e==null?void 0:e.media_type)==="tv"||(e==null?void 0:e.media_type)==="movie"||(e==null?void 0:e.media_type)==="collection"||(e==null?void 0:e.media_type)==="specials"?(r(),c(X,{key:e.id,data:e,index:_,onContextMenu:a=>v(a,e)},null,8,["data","index","onContextMenu"])):(e==null?void 0:e.media_type)==="person"?(r(),c(Z,{key:`${e.id}_person`,data:e,index:_,onContextMenu:a=>v(a,e)},null,8,["data","index","onContextMenu"])):(e==null?void 0:e.media_type)==="genres"?(r(),c(ee,{key:`${e.id}_genres`,data:e,index:_,onContextMenu:a=>v(a,e)},null,8,["data","index","onContextMenu"])):y("",!0)],64))),256)):(($=(I=(B=t(n).pages)==null?void 0:B[0])==null?void 0:I.data)==null?void 0:$.length)===0?(r(),c(oe,{key:1})):y("",!0)],64)}),128)):y("",!0)],2)],2)),V(W,{id:E.value,class:h(["w-8 fixed right-0 bg-slate-light-1 dark:bg-slate-dark-3 transition-all duration-200",{"h-available":!t(g),"h-inherit top-24":t(g),"-mt-4 pt-4 pb-4 mb-0":!t(f),"-mt-4 pt-4 pb-4 mb-14":t(f)}])},null,8,["id","class"])],512)]}),_:1})]),_:1}))}});export{Ce as default};
