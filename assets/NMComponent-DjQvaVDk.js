import{i as f,n as K,r as k,t as w}from"./routerHelper-DbQLPKqG.js";import{Dc as o,Do as b,Ks as C,Ls as E,Ms as N,Ns as v,Oo as D,Qs as I,Va as S,Zs as _,_s as V,dc as c,ec as l,ho as x,i as O,js as B,nc as j,oc as F,ws as H,zs as P}from"./index-CANHr9D7.js";V();b();var Q={key:0,class:"grid w-available h-available place-items-center"},R=P({__name:"NMComponent",props:{path:{type:String,required:!1,default:void 0},options:{type:Object,required:!1,default:()=>({keepForever:!0,queryKey:f()})}},setup(y){const s=y,i=s.options.queryKey??f(),g=w({queryKey:i,path:s.path}),{data:t,isLoading:h}=k({queryKey:i,path:s.path}),{data:M,mutate:m}=K({queryKey:i,homeData:t}),n=S(),u=D();function d(){if(!t.value||!n.value)return;const e=t.value.filter(a=>a?.update?.when==="pageLoad")??[];m(e)}function q(){if(!t.value||!n.value)return;const e=t.value.filter(a=>a?.update?.when==="online")??[];m(e)}function p(e){if(!t.value||!n.value)return;const a=t.value.filter(r=>r?.id===e.detail.id)??[];m(a)}return _(()=>{document.addEventListener("mutateId",p),!(!t.value||u.name!=="Home"&&u.name!=="Libraries"&&u.name!=="Music Start")&&n.value&&d()}),I(()=>{document.removeEventListener("mutateId",p)}),c(n,e=>{e&&q()}),c(t,e=>{e&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),_(()=>{c(u,(e,a)=>{console.log("onIonViewWillEnter triggered",e.name),!(!t.value||e.name!==O.currentRoute.value.name||e.name!=="Home"&&e.name!=="Libraries"&&e.name!=="Music Start")&&n.value&&d()})}),(e,a)=>o(h)?(l(),v("div",Q,[E(o(x),{class:"ion-padding",name:"crescent"})])):o(g)?N("",!0):(l(!0),v(H,{key:1},j(o(M)??o(t)??[],(r,L)=>(l(),B(F(r?.component),C({key:r.id,index:L},{ref_for:!0},r.props),null,16,["index"]))),128))}}),U=R;export{U as t};
