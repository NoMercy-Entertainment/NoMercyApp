import{I as K,di as L,Y as M,D as k,bM as w,w as m,a6 as E,c as f,b as I,K as s,o as l,j as S,dj as x,h as C,d as D,e as j,m as B,F}from"./index-DkQngsHe.js";import{q as v,g as N,a as O,b as V}from"./routerHelper-ByfMj4fo.js";const H={key:0,class:"grid w-available h-available place-items-center"},R=K({__name:"NMComponent",props:{path:{type:String,required:!1,default:void 0},options:{type:Object,required:!1,default:()=>({keepForever:!0,queryKey:v()})}},setup(y){const r=y,i=r.options.queryKey??v(),g=N({queryKey:i,path:r.path}),{data:t,isLoading:h}=O({queryKey:i,path:r.path}),{data:q,mutate:c}=V({queryKey:i,homeData:t}),o=L(),u=M();function d(){if(!t.value||!o.value)return;const a=t.value.filter(n=>{var e;return((e=n==null?void 0:n.update)==null?void 0:e.when)==="pageLoad"})??[];c(a)}function _(){if(!t.value||!o.value)return;const a=t.value.filter(n=>{var e;return((e=n==null?void 0:n.update)==null?void 0:e.when)==="online"})??[];c(a)}function p(a){if(!t.value||!o.value)return;const n=t.value.filter(e=>(e==null?void 0:e.id)===a.detail.id)??[];c(n)}return k(()=>{document.addEventListener("mutateId",p),!(!t.value||u.name!=="Home"&&u.name!=="Libraries"&&u.name!=="Music Start")&&o.value&&d()}),w(()=>{document.removeEventListener("mutateId",p)}),m(o,a=>{a&&_()}),m(t,a=>{a&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),E(()=>{!t.value||u.name!=="Home"&&u.name!=="Libraries"&&u.name!=="Music Start"||o.value&&d()}),(a,n)=>s(h)?(l(),f("div",H,[S(s(x),{name:"crescent",class:"ion-padding"})])):!s(g)||!s(o)?(l(!0),f(F,{key:1},C(s(q)??s(t)??[],(e,b)=>(l(),D(j(e==null?void 0:e.component),B({key:e.id,index:b,ref_for:!0},e.props),null,16,["index"]))),128)):I("",!0)}});export{R as _};
