import{aw as q,c8 as G,dT as J,az as I,b_ as K,aT as R,aD as O,J as S,aC as j,c9 as A,I as v,e as u,a7 as $,aB as o,aO as H,o as t,v as F,a as _,c as d,z as b,F as m,u as P,h,cl as g,b6 as V,bd as Q,dU as W,bF as X,bG as Y}from"./index-CVV9HtC-.js";import{_ as Z}from"./MediaCard.vue_vue_type_script_setup_true_lang-BALL236N.js";import{_ as ee}from"./PersonCard.vue_vue_type_script_setup_true_lang-CH1cXDbY.js";import{_ as se,a as le}from"./EmptyCard.vue_vue_type_script_setup_true_lang-f4XgKlHe.js";import"./CardIndicator.vue_vue_type_script_setup_true_lang-BlcAy4cw.js";import"./NoResultImage.vue_vue_type_script_setup_true_lang-DfXiF8fu.js";const oe="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",re="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",me=q({__name:"Mobile",setup(te){var E,M,B,T;const y=G(),{data:r,fetchNextPage:k,hasNextPage:C,isError:ne}=J({queryKey:["libraries",(T=((M=(E=y.currentRoute)==null?void 0:E.value)==null?void 0:M.params.id)??((B=y.currentRoute)==null?void 0:B.value.name))==null?void 0:T.split("&").at(0)],limit:20,keepForever:!0});I(()=>{K(),R(null),O(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),S(r,s=>{s&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const D=j(()=>{var s,l,i,n,p,a;return H.value&&((i=(l=(s=r.value)==null?void 0:s.pages)==null?void 0:l[0])==null?void 0:i.data[0].media_type)!=="person"&&((a=(p=(n=r.value)==null?void 0:n.pages)==null?void 0:p[0])==null?void 0:a.data[0].media_type)!=="genres"});A(()=>{stop(),R(null)});const w=v();I(()=>{var s,l;C.value&&(((l=(s=r==null?void 0:r.value)==null?void 0:s.pages)==null?void 0:l.length)??0)<50&&k(),document.addEventListener("scrollToDiv",i=>{var n;(n=w.value)==null||n.scrollTo({top:i.detail.top-100,behavior:"smooth"})})}),S(r,s=>{var l;s&&C.value&&((l=s==null?void 0:s.pages)==null?void 0:l.length)<50&&k()});const L=v(),U=v(),f=(s,l)=>{L.value=l,U.value.show(s)};return(s,l)=>(t(),u(o(Y),null,{default:$(()=>[F(o(X),{fullscreen:!0,class:"ion-padding"},{default:$(()=>{var i;return[l[0]||(l[0]=_("div",{class:"fixed top-0 pt-safe w-full bg-slate-light-1 dark:bg-slate-dark-3 z-1199"},null,-1)),_("div",{ref_key:"lib",ref:w,class:"pt-safe-offset-10 flex h-auto w-full pr-8 overflow-auto py-0 scroll-container"},[(t(),d("div",{class:b(["z-0 flex flex-col gap-4 rounded-3xl border-0 w-available scrollbar-none border-auto-3 pt-2",{"pb-2":o(g)&&o(V),"children:pb-4 sm:children:pb-3":!o(g)&&o(V)}]),key:(i=o(Q).currentRoute.value.params)==null?void 0:i.id},[_("div",{class:b(`grid w-full gap-4 scroll-smooth music-showing:pb-0 pl-1 ${D.value?oe:re}`)},[o(r)?(t(!0),d(m,{key:0},P(o(r).pages??[],(n,p)=>{var a,N,z;return t(),d(m,{key:p},[n.data.length>0?(t(!0),d(m,{key:0},P(n.data??[],(e,x)=>(t(),d(m,null,[(e==null?void 0:e.media_type)==="tv"||(e==null?void 0:e.media_type)=="movie"||(e==null?void 0:e.media_type)=="collection"||(e==null?void 0:e.media_type)=="specials"?(t(),u(Z,{key:e.id,data:e,onContextMenu:c=>f(c,e),index:x},null,8,["data","onContextMenu","index"])):(e==null?void 0:e.media_type)==="person"?(t(),u(ee,{key:e.id+"_person",data:e,onContextMenu:c=>f(c,e),index:x},null,8,["data","onContextMenu","index"])):(e==null?void 0:e.media_type)==="genres"?(t(),u(se,{key:e.id+"_genres",data:e,onContextMenu:c=>f(c,e),index:x},null,8,["data","onContextMenu","index"])):h("",!0)],64))),256)):((z=(N=(a=o(r).pages)==null?void 0:a[0])==null?void 0:N.data)==null?void 0:z.length)==0?(t(),u(le,{key:1})):h("",!0)],64)}),128)):h("",!0)],2)],2)),F(W,{class:b(["w-8 !-mt-4 pt-4 pb-4 mb-0 fixed right-0 bg-slate-light-1 dark:bg-slate-dark-3",{"h-available":!o(g),"h-inherit top-24":o(g)}])},null,8,["class"])],512)]}),_:1})]),_:1}))}});export{me as default};
//# sourceMappingURL=Mobile-B399qXLZ.js.map
