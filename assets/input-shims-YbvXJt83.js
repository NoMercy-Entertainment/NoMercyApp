import{$t as Y,Cn as G,Dn as I,En as W,an as j,en as z,gn as y,hn as J,in as Q,mn as T,nn as V,qc as X,rn as Z,tn as E,wn as ee,xn as P}from"./index-trdChKHY.js";var A,D,R,k,N,te,O,re,F,H,$,q,x,_,M,m,B,U,C,K,se,oe,ie=X({"node_modules/@nomercy-entertainment/nomercy-music-player/node_modules/@ionic/core/components/input-shims.js":()=>{J(),Q(),ee(),E(),A=new WeakMap,D=(e,r,t,s=0,i=!1)=>{A.has(e)!==t&&(t?k(e,r,s,i):N(e,r))},R=e=>e===e.getRootNode().activeElement,k=(e,r,t,s=!1)=>{const i=r.parentNode,o=r.cloneNode(!1);o.classList.add("cloned-input"),o.tabIndex=-1,s&&(o.disabled=!0),i.appendChild(o),A.set(e,o);const a=e.ownerDocument.dir==="rtl"?9999:-9999;e.style.pointerEvents="none",r.style.transform=`translate3d(${a}px,${t}px,0) scale(0)`},N=(e,r)=>{const t=A.get(e);t&&(A.delete(e),t.remove()),e.style.pointerEvents="",r.style.transform=""},te=50,O=(e,r,t)=>{if(!t||!r)return()=>{};const s=u=>{R(r)&&D(e,r,u)},i=()=>D(e,r,!1),o=()=>s(!0),a=()=>s(!1);return P(t,"ionScrollStart",o),P(t,"ionScrollEnd",a),r.addEventListener("blur",i),()=>{I(t,"ionScrollStart",o),I(t,"ionScrollEnd",a),r.removeEventListener("blur",i)}},re="input, textarea, [no-blur], [contenteditable]",F=()=>{let e=!0,r=!1;const t=document,s=()=>{r=!0},i=()=>{e=!0},o=a=>{if(r){r=!1;return}const u=t.activeElement;if(!u||u.matches("input, textarea, [no-blur], [contenteditable]"))return;const f=a.target;f!==u&&(f.matches("input, textarea, [no-blur], [contenteditable]")||f.closest("input, textarea, [no-blur], [contenteditable]")||(e=!1,setTimeout(()=>{e||u.blur()},50)))};return P(t,"ionScrollStart",s),t.addEventListener("focusin",i,!0),t.addEventListener("touchend",o,!1),()=>{I(t,"ionScrollStart",s,!0),t.removeEventListener("focusin",i,!0),t.removeEventListener("touchend",o,!1)}},H=.3,$=(e,r,t,s)=>{var i;const o=(i=e.closest("ion-item,[ion-item]"))!==null&&i!==void 0?i:e;return q(o.getBoundingClientRect(),r.getBoundingClientRect(),t,s)},q=(e,r,t,s)=>{const i=e.top,o=e.bottom,a=r.top,u=Math.min(r.bottom,s-t),f=a+15,d=u-50-o,c=f-i,l=Math.round(d<0?-d:c>0?-c:0),v=Math.min(l,i-a),S=Math.abs(v)/H;return{scrollAmount:v,scrollDuration:Math.min(400,Math.max(150,S)),scrollPadding:t,inputSafeY:-(i-f)+4}},x="$ionPaddingTimer",_=(e,r,t)=>{const s=e[x];s&&clearTimeout(s),r>0?e.style.setProperty("--keyboard-offset",`${r}px`):e[x]=setTimeout(()=>{e.style.setProperty("--keyboard-offset","0px"),t&&t()},120)},M=(e,r,t)=>{const s=()=>{r&&_(r,0,t)};e.addEventListener("focusout",s,{once:!0})},m=0,B="data-ionic-skip-scroll-assist",U=(e,r,t,s,i,o,a,u=!1)=>{const f=o&&(a===void 0||a.mode===z.None);let d=!1;const c=y!==void 0?y.innerHeight:0,l=b=>{if(d===!1){d=!0;return}K(e,r,t,s,b.detail.keyboardHeight,f,u,c,!1)},v=()=>{d=!1,y===null||y===void 0||y.removeEventListener("ionKeyboardDidShow",l),e.removeEventListener("focusout",v)},S=async()=>{if(r.hasAttribute("data-ionic-skip-scroll-assist")){r.removeAttribute(B);return}K(e,r,t,s,i,f,u,c),y===null||y===void 0||y.addEventListener("ionKeyboardDidShow",l),e.addEventListener("focusout",v)};return e.addEventListener("focusin",S),()=>{e.removeEventListener("focusin",S),y===null||y===void 0||y.removeEventListener("ionKeyboardDidShow",l),e.removeEventListener("focusout",v)}},C=e=>{document.activeElement!==e&&(e.setAttribute(B,"true"),e.focus())},K=async(e,r,t,s,i,o,a=!1,u=0,f=!0)=>{if(!t&&!s)return;const d=$(e,t||s,i,u);if(t&&Math.abs(d.scrollAmount)<4){C(r),o&&t!==null&&(_(t,m),M(r,t,()=>m=0));return}if(D(e,r,!0,d.inputSafeY,a),C(r),W(()=>e.click()),o&&t&&(m=d.scrollPadding,_(t,m)),typeof window<"u"){let c;const l=async()=>{c!==void 0&&clearTimeout(c),window.removeEventListener("ionKeyboardDidShow",v),window.removeEventListener("ionKeyboardDidShow",l),t&&await j(t,0,d.scrollAmount,d.scrollDuration),D(e,r,!1,d.inputSafeY),C(r),o&&M(r,t,()=>m=0)},v=()=>{window.removeEventListener("ionKeyboardDidShow",v),window.addEventListener("ionKeyboardDidShow",l)};if(t){const S=await Z(t),b=S.scrollHeight-S.clientHeight;if(f&&d.scrollAmount>b-S.scrollTop){r.type==="password"?(d.scrollAmount+=50,window.addEventListener("ionKeyboardDidShow",v)):window.addEventListener("ionKeyboardDidShow",l),c=setTimeout(l,1e3);return}}l()}},se=!0,oe=async(e,r)=>{if(T===void 0)return;const t=r==="ios",s=r==="android",i=e.getNumber("keyboardHeight",290),o=e.getBoolean("scrollAssist",!0),a=e.getBoolean("hideCaretOnScroll",t),u=e.getBoolean("inputBlurring",!1),f=e.getBoolean("scrollPadding",!0),d=Array.from(T.querySelectorAll("ion-input, ion-textarea")),c=new WeakMap,l=new WeakMap,v=await Y.getResizeMode(),S=async n=>{await new Promise(g=>G(n,g));const h=n.shadowRoot||n,w=h.querySelector("input")||h.querySelector("textarea"),L=V(n),p=L?null:n.closest("ion-footer");if(w){if(L&&a&&!c.has(n)){const g=O(n,w,L);c.set(n,g)}if(!(w.type==="date"||w.type==="datetime-local")&&(L||p)&&o&&!l.has(n)){const g=U(n,w,L,p,i,f,v,s);l.set(n,g)}}},b=n=>{if(a){const h=c.get(n);h&&h(),c.delete(n)}if(o){const h=l.get(n);h&&h(),l.delete(n)}};u&&F();for(const n of d)S(n);T.addEventListener("ionInputDidLoad",n=>{S(n.detail)}),T.addEventListener("ionInputDidUnload",n=>{b(n.detail)})}}});ie();export{oe as startInputShims};
