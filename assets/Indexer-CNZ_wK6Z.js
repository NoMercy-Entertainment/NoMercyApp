import{C as z,Ct as r,Dt as _,J as T,K as i,S as h,T as c,U as I,W as B,c as k,g,j as Z,mt as E,ot as j,wt as P,x as L}from"./i18n-Rm1NkeNf.js";import{H as U,U as $,W as D}from"./vue-core-D-3YrIBp.js";import{Bi as b,Qr as M,Vi as y,k as o,v as N}from"./index-Dg48D17d.js";import{n as Q,t as w}from"./scrollHandlers-D69YXb7q.js";k();var f=E(!1);const te=L(()=>f.value);function V(n){f.value=n}var W=E([]);const H=L(()=>{const n=new Set;return W.value?.forEach(s=>{const l=s.props?.data?.title||s.props?.data?.name||s.props?.name||"";if(l){const u=l.charAt(0).toUpperCase();/[A-Z0-9]/.test(u)?n.add(u):n.add("#")}}),n});var m=f;k();$();var F={class:"flex-shrink-0 flex-grow-0 text-center text-xs sm:text-base font-semibold leading-none"},G=["data-indexer","onClick"],J={class:"flex-shrink-0 flex-grow-0 text-center text-xs sm:text-base font-semibold leading-none"},K=Z({__name:"Indexer",setup(n){const s=["Libraries","Library","Collections","Albums","Artists","Music Genres"],l=[new RegExp("music/albums"),new RegExp("music/artists"),new RegExp("libraries/[a-zA-Z0-9]+/letter/[a-zA-Z0-9_]"),new RegExp("music/genres/letter/[a-zA-Z0-9_]")];function u(e){return s.some(a=>e.startsWith(a))}function d(e){return l.some(a=>e.match(a))}const S=D();function p(){setTimeout(()=>{document.querySelector(b.value?"ion-tabs ion-router-outlet  div.ion-page:not(.ion-page-hidden) [indexer]":"[indexer]")?.querySelectorAll("[data-indexer]").forEach(e=>{const a=e.dataset.indexer??"";let t;a==="#"?t=document.querySelector?.("ion-tabs ion-router-outlet div.ion-page:not(.ion-page-hidden) [data-scroll]"):t=document.querySelector?.(`ion-tabs ion-router-outlet div.ion-page:not(.ion-page-hidden) [data-scroll='scroll_${a}']`);const x=!!t,A=d(o.currentRoute.value.path),q=H.value.has(a);x||A||q?e.classList.remove("opacity-20","!cursor-not-allowed"):e.classList.add("opacity-20","!cursor-not-allowed")})},500)}function C(e){Q(e),document.dispatchEvent(new CustomEvent("scrollToLetter",{detail:{letter:e}}))}function R(){document.querySelector(b.value?"ion-tabs ion-router-outlet  div.ion-page:not(.ion-page-hidden) [indexer]":"[indexer]")?.querySelectorAll("[data-indexer]").forEach(e=>{e.classList.add("opacity-20","!cursor-not-allowed")})}function v(e){V(u(e)),p()}return o.afterEach(e=>{setTimeout(()=>{v(e.name??e.path)},150)}),o.beforeEach(()=>{d(o.currentRoute.value.path)||R()}),I(()=>{setTimeout(()=>{v(o.currentRoute.value.name??o.currentRoute.value.path)},150),document.addEventListener("indexer",p),document.addEventListener("keydown",w)}),B(()=>{document.removeEventListener("indexer",p),document.removeEventListener("keydown",w)}),(e,a)=>(i(),c("div",{class:P([{"w-8 opacity-100":r(m),"w-0 opacity-0 translate-x-4 pointer-events-none!":!r(m),"sm:ml-2":!r(y)&&r(m),"bottom-0":r(y)},"z-0 h-available sm:h-available flex flex-col items-center justify-between self-stretch overflow-clip transition-[width,opacity,transform] duration-200 sm:-translate-x-3 pt-2 text-surface-12"]),indexer:""},[(i(!0),c(g,null,T(r(M)("#","Z"),t=>(i(),c(g,{key:t},[d(r(S).path)?(i(),z(r(U),{key:0,"data-indexer":t,to:`${t.replace("#","_")}`,class:"pointer-events-auto relative flex p-1 size-6 sm:size-6 aspect-square rounded-lg overflow-clip cursor-pointer flex-col items-center justify-center hover:bg-surface-5",tabindex:"-1"},{default:j(()=>[h("p",F,_(t),1)]),_:2},1032,["data-indexer","to"])):(i(),c("button",{key:1,"data-indexer":t,class:"pointer-events-auto relative flex p-1 size-6 sm:size-6 aspect-square rounded-lg overflow-clip cursor-pointer flex-col items-center justify-center hover:bg-surface-5/11",tabindex:"-1",onClick:x=>C(t)},[h("p",J,_(t),1)],8,G))],64))),128))],2))}}),ae=N(K,[["__scopeId","data-v-53fa1abd"]]);export{m as n,ae as t};
