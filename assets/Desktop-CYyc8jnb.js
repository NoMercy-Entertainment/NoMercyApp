import{C as u,Ct as s,Dt as y,J as x,K as t,S as n,T as v,c as g,g as p,j as h,k as l,mt as C,n as w,ot as o,w as D,wt as S}from"./i18n-fABvX7Av.js";import"./ionic-DIYphHxf.js";import{C as A,_ as $}from"./vue-core-hXf_Oh5G.js";import{C as P}from"./primevue-C3smGU9Q.js";import"./dist-CJipjyJM.js";import{c as E}from"./query-BsKzQ1i8.js";import"./esm-D1nPlPuN.js";import{Ki as I,b as V,vi as b}from"./index-B13NG93S.js";import"./useInfiniteServerClient-CEPQIZfY.js";import{t as j}from"./useServerClient-CbP6Nyuo.js";import"./ScrollContainer-BEcwwM2f.js";import"./useMounted-C90o8FQQ.js";import"./RipperOverlay-2OQOY0LV.js";import"./ripperSocket-C7wMYtI4.js";import"./FloatingBackButton-B68Kn4nk.js";import{t as q}from"./DashboardLayout-Dn-NW7xh.js";import{t as B}from"./DashboardCard-CbgQjr5J.js";import{t as K}from"./DeviceIcon-Cgmusn0D.js";g();var M={class:"flex flex-col justify-start items-start self-stretch bg-surface-1 bg-[radial-gradient(81.87%_66.22%_at_0%_0%,rgba(255,255,255,0.2)_0%,rgba(255,255,255,0)_100%)] w-full h-auto aspect-video"},T={class:"relative m-auto flex aspect-video h-auto w-full flex-shrink-0 flex-grow-0 flex-col items-center justify-center self-stretch bg-focus/8"},O=h({__name:"ServerDeviceCard",props:{server:{type:Object,required:!0},basePath:{type:String,required:!1,default:"server"}},setup(a){const i=a;let e;switch(i.server.browser.replace(/[\d.]+/gu,"").trim()){case"android":case"Android":case"android tv":case"Android TV":case"Chrome WebView":case"Android 10":case"Android 11":case"Android 12":case"Android 13":case"Android 14":case"Android 15":e="android";break;case"apple":case"Apple":case"Apple iPhone":case"iPhone":case"iPad":e="apple";break;case"Mobile Safari":e="safari";break;case"arc":case"Arc":e="arc";break;case"brave":case"Brave":e="brave";break;case"chrome":case"Chrome":case"chromium":case"Chromium":case"Mobile Chrome":case"google chrome":case"Google Chrome":e="chrome";break;case"edge":case"Edge":case"microsoft edge":case"Microsoft Edge":e="edgeOld";break;case"edge chromium":case"Edge Chromium":e="edge";break;case"firefox":case"Firefox":e="firefox";break;case"html5":case"Html5":e="html5";break;case"kodi":case"Kodi":e="kodi";break;case"msie":case"Msie":e="msie";break;case"opera":case"Opera":case"opera gx":case"Opera GX":e="opera";break;case"playstation":case"Playstation":e="playstation";break;case"safari":case"Safari":e="safari";break;case"samsung":case"Samsung":case"samsung tv":case"Samsung TV":e="samsung";break;case"samsung internet":case"Samsung Internet":e="samsungInternet";break;case"windows":case"Windows":e="windows";break;case"xbox":case"Xbox":e="xbox";break;case"electron":case"Electron":e="electron";break;case"linux":case"Linux":e="linux";break;default:e="html5";break}return console.log("ServerDeviceCard",i.server.browser,e),(c,m)=>(t(),u(B,{line1:a.server.custom_name??a.server.name,line2:a.server.ip,route:`/dashboard/${a.basePath}/${a.server.id}`},{image:o(()=>[n("div",M,[n("div",T,[l(K,{icon:s(e),"class-name":"!w-[40%]"},null,8,["icon"])])])]),_:1},8,["line1","line2","route"]))}}),L=O;g();var N=["disabled"],F={class:"text-left text-xs font-semibold line-clamp-1 sm:text-sm"},G=h({__name:"Desktop",setup(a){const i=E(),e=P(),{t:c}=w(),{data:m,error:_}=j({path:"dashboard/devices",queryKey:["dashboard","devices"]}),r=C(!1);async function k(){if(!r.value){r.value=!0;try{await I().delete("/dashboard/devices",{forceUpdate:!0,synchronous:!1}),i.invalidateQueries({queryKey:["devices"]}),e.add({severity:"success",summary:b("Success"),detail:c("Activity logs deleted"),life:5e3})}catch{e.add({severity:"error",summary:b("Error"),detail:`${c("Something went wrong")} ${c("trying to delete activity logs")}`,life:5e3})}finally{r.value=!1}}}return(f,Q)=>(t(),u(s(A),null,{default:o(()=>[l(s($),{fullscreen:!0},{default:o(()=>[l(q,{error:s(_),"grid-style":1,title:"Devices"},{cta:o(()=>[n("button",{disabled:r.value,class:S([r.value?"opacity-50 cursor-not-allowed":"","relative flex h-10 flex-shrink-0 flex-grow-0 items-center justify-center gap-2 overflow-hidden rounded-lg border px-4 py-2.5 bg-theme-9 border-theme-5"]),onClick:k},[l(V,{icon:"trash"}),n("p",F,y(r.value?f.$t("Deleting..."):f.$t("Delete all")),1)],10,N)]),default:o(()=>[(t(!0),v(p,null,x(s(m)??[],d=>(t(),v(p,{key:d.id},[d?.id?(t(),u(L,{key:0,server:d,"base-path":"devices"},null,8,["server"])):D("",!0)],64))),128))]),_:1},8,["error"])]),_:1})]),_:1}))}}),ne=G;export{ne as default};
