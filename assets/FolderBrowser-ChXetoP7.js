import{An as o,Bn as k,Gt as s,Mt as g,Rt as a,Sn as B,Tt as F,Un as u,Vt as d,an as S,bn as c,cn as v,fn as b,qt as V,un as I}from"./index-Dv83kAv_.js";import{t as M}from"./serverClient-Dh7JrGPq.js";import{t as N}from"./ScrollContainer-UnRcXO1f.js";F();var T={class:"relative mt-1 w-full"},q={class:"relative flex w-full flex-col overflow-clip h-[88%] even:text-lg"},U={class:"flex p-2 pt-4 border-b !bg-transparent text-sm select-none"},G={class:""},$={class:"mr-auto ml-4"},j={class:"relative flex w-full flex-col h-inherit"},z={class:"relative w-full h-auto"},A=["onClick"],D={class:"mr-auto !ml-7 text-sm select-none"},E=V({__name:"FolderBrowser",props:{selected:{type:String,required:!0},setSelected:{type:Function,required:!0}},setup(x){const n=x,t=o(n.selected??"/"),p=o(!1),f=o("/");c(n,e=>{t.value=e.selected}),c(t,e=>{n.setSelected(e),p.value=!1});const m=o([]),w=o(!1);function _(e){M().post("/dashboard/server/directorytree",{folder:e}).then(({data:l})=>{m.value=l.data.filter(i=>i.type==="folder"),f.value=l.data.at(0)?.full_path?.match(/[\\/]/gu)?.at(-1)??"/"}).then(()=>w.value=!1)}c(t,e=>{e&&_(e??"")});function y(){p.value=!0,t.value=t.value.split(/[/\\]/gu).slice(0,-1).join(f.value),t.value.match(/[/\\]/gu)?.length||(t.value="/")}function C(e){t.value=e.full_path}return S(()=>{_(t.value??"")}),(e,l)=>{const i=b("InputText"),h=b("MoooomIcon");return v(),d(g,null,[a("div",T,[s(i,{id:"folderName",modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=r=>t.value=r),class:"w-full",name:"","no-ring":""},null,8,["modelValue"])]),a("div",q,[a("div",U,[a("span",G,u(e.$t("Type")),1),a("span",$,u(e.$t("Name")),1)]),a("div",j,[s(N,{"auto-hide":!1,static:!1,"class-name":"ml-2"},{default:B(()=>[a("div",{class:k([t.value==="/"?"opacity-50":"","bg-surface-6/4 hover:bg-surface-2 border-t-0 border-b border-solid border-[rgba(34,34,34,0.9)] contain flex items-center text-current cursor-pointer overflow-hidden py-1 px-2 align-middle h-10 min-h-10 leading-6 select-none"]),onClick:y},[s(h,{class:"mt-1 h-5 w-5",icon:"returnPackage"}),l[1]||(l[1]=a("span",{class:"mr-auto !ml-7"},"...",-1))],2),a("div",z,[(v(!0),d(g,null,I(m.value,r=>(v(),d("div",{key:r.full_path,class:"even:bg-surface-4 odd:bg-surface-2 even:hover:bg-surface-5 odd:hover:bg-surface-3 border-t-0 border-b border-solid border-[rgba(34,34,34,0.9)] contain flex items-center bg-transparent text-current cursor-pointer overflow-hidden py-1 px-2 align-middle h-10 leading-6",onClick:()=>C(r)},[s(h,{class:"h-5 w-5",icon:"folder"}),a("span",D,u(r.path.replace(/[\\\/]/u,"")),1)],8,A))),128))])]),_:1})])])],64)}}}),H=E;export{H as t};
