import{$ as Q,Dn as ae,Ht as j,In as H,Qn as v,Rn as w,Sn as re,Tn as r,Wn as L,Y,Yt as Z,Zn as t,cn as u,en as E,er as ie,in as g,jt as b,kn as K,nn as m,rn as c,sn as J,tn as a,tr as y,un as q}from"./index-04Sh3wNb.js";import{B as le,I as se,b as ne,l as D,m as $,n as oe,p as P,u as de,x as ue}from"./ui-BT6EUdI0.js";import{g as A}from"./client-DMa-uSBE.js";import{E as _,T as C,o as I}from"./currentServer-B7-kbkE-.js";import{f as N}from"./global-gyhCjh_P.js";import{c as ce}from"./user-C1ciKa7-.js";import{l as z,x as me}from"./router-C_xBvmya.js";import{N as fe,Z as pe,c as he,g as B,k as O,l as p}from"./SocketClient-DPmgFkP-.js";import{a as ge}from"./contextMenuItems-kfaglZX4.js";import{t as ve}from"./_plugin-vue_export-helper-B_iOTHZb.js";import{t as R}from"./MoooomIcon-DNWQYuYD.js";import{t as ye}from"./DropdownMenu-DlwBmVb0.js";import{n as X}from"./dist-iWIfSzlj.js";import{t as M}from"./CoverImage-_aGqf_Rg.js";import{t as xe}from"./MusicButton-OKP8kSIv.js";import{t as ke}from"./BannerButton-BVJ9NTRE.js";import{t as ee}from"./MediaLikeButton-Cg9WrOdx.js";import{t as V}from"./PlayerIcon-DPtv61Du.js";import{t as F}from"./Marquee-B69hKqb8.js";import{n as be,t as G}from"./BigPlayButton-BSACVqFp.js";import{n as U,t as we}from"./EqSpinner-DZk0vZKp.js";import{t as W}from"./ShareButton-B9i6bcLG.js";j();Y();var _e={class:"flex sm:gap-4 items-center py-4 px-4 sm:px-8 w-full pl-3 pr-4 sm:pr-10 h-20 z-40","data-index":"1"},Se={class:"relative hidden h-fit cursor-pointer items-center justify-center focus-within:text-surface sm:flex mr-auto"},Ce=["value"],$e={class:"absolute top-2 right-2 bottom-2 flex items-center justify-center"},Te=q({__name:"ControlHeader",props:{data:{type:Object,required:!1},filter:{type:String,required:!0}},emits:["filter-change"],setup(e){const l=e,h=Q();function n(){p.setQueue(l.data?.tracks??[])}const s=E(()=>({title:l.data?.name??"",url:`https://app.nomercy.tv${h.fullPath}`}));return(f,x)=>(r(),g(Z,null,[x[1]||(x[1]=a("div",{class:"pointer-events-none absolute z-0 h-96 w-full"},null,-1)),a("div",_e,[e.data?.tracks?(r(),m(G,{key:0,data:e.data,class:"hidden sm:flex"},null,8,["data"])):c("",!0),a("div",Se,[a("input",{id:"search",value:e.filter,class:"bg-transparent border-surface-12/5 border-2 rounded-md focus-visible:!border-surface-12/9 focus-visible:text-current placeholder-current p-2",name:"search",placeholder:"Filter…",type:"text",onInput:x[0]||(x[0]=S=>f.$emit("filterChange",S.target?.value))},null,40,Ce),a("div",$e,[u(R,{class:"!w-7",icon:"searchMagnifyingGlass"})])]),u(W,{"share-data":s.value,class:"!p-0 hidden sm:flex sm:ml-auto"},null,8,["share-data"]),u(ee,{data:e.data,"class-name":"!w-8 !h-8",color:"var(--color-theme-8)"},null,8,["data"]),u(W,{class:"!p-0 sm:hidden"}),t(me)?(r(),m(xe,{key:1,id:"add",onclick:n,class:"",label:"Add"},{default:w(()=>[u(R,{class:"!w-7",icon:"add"})]),_:1})):c("",!0)]),a("div",{class:v([{"top-11":!t(b)("capacitor"),"top-10":t(b)("capacitor")},"sm:hidden sticky left-full -mt-16 z-1199 flex justify-center items-center gap-2 mr-4 h-auto"]),style:{"box-shadow":"0 1px 2px 0 rgba(16, 24, 40, 0.05)"}},[e.data?.tracks?(r(),m(G,{key:0,data:e.data},null,8,["data"])):c("",!0)],2)],64))}}),St=Te;j();var Ee={key:0,class:"relative my-4 flex w-full flex-1 flex-shrink-0 flex-col items-start justify-start gap-4 flex-grow-1 sm:hidden"},Re=["innerHTML"],je={class:"relative hidden flex-1 flex-shrink-0 flex-col items-start justify-start gap-1 flex-grow-1 sm:flex"},qe={class:"text-left font-semibold uppercase"},ze=["innerHTML"],He={class:"relative flex items-center justify-start gap-2"},Le={key:0,class:"flex items-center gap-4 text-sm font-medium"},Pe={key:0,class:"relative aspect-square h-12 w-12 overflow-clip rounded-full min-w-12"},Ae={key:1,class:"text-left text-sm font-medium"},Be={class:"text-left text-sm font-medium"},Me={key:2,class:"text-left text-sm font-medium"},De={class:"text-left text-sm font-medium"},Ie=q({__name:"ArtistHeader",props:{data:{type:Object,required:!1}},setup(e){const l=e,{t:h}=X(),n=L(""),s=L(),f=L();function x(i){if(i)return ne(h,i?.tracks?.map(o=>ue(o.duration)).reduce((o,k)=>o+k,0)??0)}H(l,i=>{i&&(n.value=x(i.data))}),re(()=>{n.value=x(l.data)}),H(s,i=>{if(!i)return;const o=i.getContext("2d",{willReadFrequently:!0,desynchronized:!0}),k=()=>{const d=p._audioElement1?.motion?.canvas;d&&f.value&&(p._audioElement1.isPlaying()?(p._audioElement1?.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(f.value).backgroundColor]}),p._audioElement1.motion.gradient="theme",i.width=d.width,i.height=d.height,o.clearRect(0,0,i.width,i.height),o.drawImage(d,0,0,i.width,i.height)):p._audioElement2.isPlaying()&&(p._audioElement2?.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(f.value).backgroundColor]}),p._audioElement2.motion.gradient="theme",i.width=d.width,i.height=d.height,o.clearRect(0,0,i.width,i.height),o.drawImage(d,0,0,i.width,i.height))),requestAnimationFrame(k)};k()}),H(f,i=>{!i||!p._audioElement1?.motion||!p._audioElement2?.motion||(p._audioElement1?.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(i).backgroundColor]}),p._audioElement1.motion.gradient="theme",p._audioElement2?.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(i).backgroundColor]}),p._audioElement2.motion.gradient="theme")});const S=E(()=>le(se(oe.value),150));return(i,o)=>{const k=K("RouterLink");return r(),g("div",{id:"artist-header",class:v([{"pt-safe-offset-16 px-8 gap-4":t(b)("capacitor"),"pt-24 px-6 gap-2 sm:gap-12":!t(b)("capacitor"),"text-black/12":S.value,"text-white/12":!S.value},"relative z-0 flex flex-col items-end justify-start sm:flex-row sm:gap-9 sm:pt-8 sm:pb-8 sm:px-8"])},[a("div",{id:"audio-color",ref_key:"audioColor",ref:f,class:"absolute top-0 left-0 h-full w-full overflow-clip bg-focus",style:{background:"hsl(from var(--color-theme-8) h s 32%)"}},null,512),o[0]||(o[0]=a("div",{class:"absolute top-0 left-0 h-full w-full overflow-clip"},null,-1)),a("canvas",{id:"audio-visualizer",ref_key:"canvas",ref:s,class:"absolute top-0 left-96 my-12 ml-6 mr-6 mt-full h-available w-available overflow-clip pointer-events-none"},null,512),a("div",{class:v([{"-mt-4":t(b)("capacitor"),"":!t(b)("capacitor")},"frosting relative mx-auto flex aspect-square w-80 max-w-[90%] flex-col items-center justify-center rounded-xl bg-gradient-to-br min-w-64 bg-theme-6 from-theme-5 via-theme-6 to-theme-9 shadow"])},[e.data?.cover?(r(),m(M,{key:0,id:"image",data:e.data,size:250,"class-name":"aspect-square rounded-xl w-full",loading:"eager"},null,8,["data"])):e.data?.id?(r(),m(be,{key:1,id:e.data.id,type:e.data.type,class:"aspect-square rounded-xl w-full"},null,8,["id","type"])):c("",!0)],2),e.data?.name?(r(),g("div",Ee,[a("div",{class:"w-full text-2xl font-semibold whitespace-pre-line",innerHTML:t(I)(e.data?.name??"Songs you like","text-sm line-clamp-1")},null,8,Re)])):c("",!0),a("div",je,[a("p",qe,y(e.data?.type?.replace(/s$/u,"")),1),a("div",{class:"w-full text-5xl font-semibold line-clamp-2 leading-[130%] whitespace-pre",innerHTML:t(I)(e.data?.name??"Songs you like","text-2xl line-clamp-1")},null,8,ze),a("div",He,[e.data?.artists?.length?(r(),g("div",Le,[e.data?.artists?.[0].cover?(r(),g("div",Pe,[u(M,{id:"image",data:e.data?.artists?.[0],size:250,"class-name":"h-full w-full",loading:"eager"},null,8,["data"])])):c("",!0),u(k,{to:e.data?.artists?.[0].link??"#",class:"text-sm empty:hidden"},{default:w(()=>[J(y(e.data?.artists?.[0]?.name??"Various artists"),1)]),_:1},8,["to"])])):c("",!0),e.data?.tracks?(r(),g("p",Ae," • ")):c("",!0),a("p",Be,y(e.data?.tracks?.length)+" "+y(e.data?.tracks?.length===1?t(h)("song"):t(h)("songs")),1),n.value?(r(),g("p",Me," • ")):c("",!0),a("p",De,y(n.value),1)])])],2)}}}),Ct=Ie;j();var Ne=["onclick"],Oe={class:""},Ve=q({__name:"SortButton",props:{name:{type:String,required:!0},sortingType:{type:String,required:!0},iconSpacer:{type:String,default:""}},setup(e){function l(n){console.log("handleSortChange",n),$.value===n?D(P.value===C.asc?C.desc:C.asc):D(C.asc),de(n)}function h(n){const s=n.target;if(n.key==="ArrowUp"){const f=s.parentElement?.parentElement?.previousElementSibling;f&&f.nodeName==="BUTTON"||f.nodeName==="A"?f.focus():document.querySelector("#playList")?.focus()}else n.key==="ArrowDown"?s.parentElement?.parentElement?.nextElementSibling?.focus():n.key==="ArrowLeft"?s.previousElementSibling?.focus():n.key==="ArrowRight"&&s.nextElementSibling?.focus()}return(n,s)=>(r(),g("button",{onclick:()=>l(e.sortingType),onkeyup:h,class:"relative cursor-pointer items-center focus-visible:underline focus-visible:underline-offset-2","no-ring":""},[a("span",Oe,y(n.$t(e.name)),1),t(P)===t(C).asc&&t($)===e.sortingType&&t($)!==t(_).index?(r(),m(R,{key:0,class:v(`w-6 h-6 ${e.iconSpacer}`),icon:"chevronUp"},null,8,["class"])):t(P)===t(C).desc&&t($)===e.sortingType&&t($)!==t(_).index?(r(),m(R,{key:1,class:v(`w-6 h-6 ${e.iconSpacer}`),icon:"chevronDown"},null,8,["class"])):c("",!0)],8,Ne))}}),T=Ve;j();var Fe=q({__name:"SortHeader",setup(e){return(l,h)=>(r(),g("div",{id:"sortHeaderElement",class:v([{"top-safe-offset-[4rem]":t(b)("capacitor"),"top-safe-offset-16":!t(b)("capacitor")},"sticky -mx-4 px-4 z-30 mt-4 block h-10 content-center items-center justify-start self-stretch bg-transparent text-sm font-medium transition-all duration-200 w-available group/track sm:w-available sm:-top-px"])},[h[0]||(h[0]=a("span",{id:"sorterChild",class:"absolute inset-0 h-10 sm:rounded-t-2xl overflow-clip w-full transition-all duration-200"},null,-1)),a("span",{class:v([{"album-grid":t(z),"artist-grid":!t(z)},"grid justify-start items-center self-stretch pr-3 sm:px-3 rounded-lg group/track text-sm font-medium py-2 z-0 group/track gap-2"])},[u(T,{id:"sortIndex","aria-label":l.$t("Sort by index"),"sorting-type":t(_).index,class:"!flex justify-center","icon-spacer":"absolute left-6",name:"#"},null,8,["aria-label","sorting-type"]),u(T,{"aria-label":l.$t("Sort by name"),"sorting-type":t(_).name,class:"flex sm:flex","icon-spacer":"w-6 h-6",name:"Title"},null,8,["aria-label","sorting-type"]),u(T,{"aria-label":l.$t("Sort by album"),class:v([{"opacity-0":!t(z),"opacity-100":t(z)},"!hidden sm:!flex"]),"sorting-type":t(_).album,"icon-spacer":"w-6 h-6",name:"Album"},null,8,["aria-label","class","sorting-type"]),u(T,{"aria-label":l.$t("Sort by date"),"sorting-type":t(_).date,class:"!hidden sm:!flex","icon-spacer":"w-6 h-6",name:"Release date"},null,8,["aria-label","sorting-type"]),u(T,{"aria-label":l.$t("Sort by duration"),"sorting-type":t(_).duration,class:"!hidden sm:!flex gap-2 flex-row-reverse pr-[4.5rem]","icon-spacer":"w-6 h-6",name:"Duration"},null,8,["aria-label","sorting-type"])],2)],2))}}),$t=ve(Fe,[["__scopeId","data-v-c3e4ca4e"]]);j();Y();var Ge=["data-track-id"],Ue={class:"flex justify-center text-center"},We={key:0,class:"group-focus-visible/track:sm:hidden group-hover/track:sm:hidden"},Qe={class:"flex h-12 items-center gap-2 overflow-hidden w-available sm:gap-4"},Ye={class:"flex h-full flex-col justify-evenly overflow-clip w-inherit"},Ze={class:"flex h-6 flex-nowrap overflow-clip text-left line-clamp-1 w-inherit tracking-wide leading-6 px-2 py-1 -ml-2"},Ke=["data-size"],Je={class:"flex whitespace-nowrap"},Xe={class:"hidden sm:flex invisible max-h-12 md:visible"},et={class:"hidden sm:flex mr-4 monospace sm:mr-0"},tt=q({__name:"TrackRow",props:{data:{type:Object,required:!0},index:{type:Number,required:!0},displayList:{type:Array,required:!0}},setup(e){const l=e,h=Q(),{t:n}=X(),s=E(()=>h.path.startsWith("/music/album")),f=E(()=>h.path.startsWith("/music/artist"));function x(){if(!ce.value.features?.nomercyConnect){he.playTrack(l.data,l.displayList);return}pe.value?.invoke("StartPlaybackCommand",s.value?"album":"artist",s.value?l.data?.album_track.at(0)?.id:l.data?.artist_track.at(0)?.id,l.data.id)}const S=E(()=>!l.data?.date||!A?.language||A.language==="undefined"?null:new Date(l.data.date).toLocaleDateString(A?.language??"en-US",{year:"numeric",month:"long",day:"2-digit"}));return(i,o)=>{const k=K("RouterLink");return r(),g("button",{class:v([{"album-grid":s.value,"artist-grid":!s.value},"grid justify-start children:pointer-events-none items-center self-stretch pr-3 sm:px-3 rounded-lg sm:hover:bg-surface-6/8 group/track text-sm font-medium py-2 z-10"]),"data-track-id":e.data?.id,onclick:x,"data-target":"track",tabindex:"0",onContextmenu:o[1]||(o[1]=d=>t(ge)(d,e.data))},[a("span",Ue,[t(B)?.id!==e.data.id?(r(),g("span",We,y(e.index+1),1)):c("",!0),t(B)?.id===e.data.id?(r(),m(we,{key:1,playing:t(O),class:"hidden group-focus-visible/track:sm:!hidden group-hover/track:sm:!hidden",color:"var(--color-theme-8)"},null,8,["playing"])):c("",!0),t(B)?.id===e.data.id&&t(O)?(r(),m(V,{key:2,class:"hidden h-6 w-6 group-focus-visible/track:sm:block group-hover/track:sm:block",icon:"nmPause"})):(r(),m(V,{key:3,class:"hidden h-6 w-6 group-focus-visible/track:sm:block group-hover/track:sm:block",icon:"nmPlay"}))]),a("span",Qe,[s.value?(r(),m(M,{key:0,data:e.data,size:100,style:ie({display:s.value?"none":""}),"class-name":"relative hidden h-12 w-12 overflow-hidden min-w-[3rem] sm:block",loading:"eager"},null,8,["data","style"])):c("",!0),a("span",Ye,[a("span",Ze,y(e.data.name),1),a("span",{"data-size":t(fe),class:"inline-flex h-6 w-available gap-1 overflow-hidden whitespace-nowrap text-slate-3 dark:slate-dark-3 line-clamp-1 text-2xs hover:animate-pause leading-6"},[u(F,null,{default:w(()=>[e.data&&!f.value?(r(),m(U,{key:0,id:e.data.id,data:e.data.artist_track,onclick:d=>d.stopPropagation(),"data-target":"artist",type:"artists"},null,8,["id","data","onclick"])):c("",!0),e.data&&!s.value?(r(),m(U,{key:1,id:e.data.id,data:e.data.album_track,onclick:d=>d.stopPropagation(),"data-target":"album",type:"albums"},null,8,["id","data","onclick"])):c("",!0)]),_:1})],8,Ke)])]),(r(!0),g(Z,null,ae(e.data.album_track,d=>(r(),g("button",{key:d.id,class:v([{"opacity-0":!s.value,"opacity-100":s.value},"hidden items-center overflow-clip pr-2 line-clamp-2 h-inherit w-inherit sm:flex"]),onClick:o[0]||(o[0]=te=>te.stopPropagation())},[u(k,{to:d?.link,class:"flex items-center gap-1 whitespace-nowrap font-semibold line-clamp-1 hover:underline focus:underline dark:font-medium pointer-events-auto","data-target":"album","no-ring":"",tabindex:"0"},{default:w(()=>[a("span",Je,[u(F,{text:d.name},null,8,["text"])])]),_:2},1032,["to"])],2))),128)),a("span",Xe,y(S.value),1),a("span",{class:v([{"mr-16":!t(N)},"flex items-center justify-end gap-2 text-end"])},[(r(),m(ee,{key:e.data.id+e.data?.favorite,data:e.data,color:"var(--color-theme-8)","no-background":""},null,8,["data"])),a("span",et,y(e.data.duration),1),t(N)?(r(),m(ye,{key:0,direction:"down"},{button:w(()=>[u(ke,{class:"",title:""},{default:w(()=>[u(R,{"class-name":"relative h-5 w-5",icon:"menuDotsVertical"})]),_:1})]),default:w(()=>[o[2]||(o[2]=J(" Hellooo ",-1))]),_:1})):c("",!0)],2)],42,Ge)}}}),Tt=tt;export{St as i,$t as n,Ct as r,Tt as t};
