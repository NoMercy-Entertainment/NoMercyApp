import{aw as re,a_ as ge,br as we,q as w,o as V,e as te,a7 as d,v as a,a6 as h,t as y,aB as I,a as i,bv as he,b3 as Pe,bt as ie,I as c,J as F,az as ee,c as g,h as le,F as ae,u as oe}from"./index-1WLsC2v6.js";import{_ as Ce}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-g3My6HM7.js";import"./FloatingBackButton.vue_vue_type_script_setup_true_lang-BZWYt5_d.js";import"./Button.vue_vue_type_script_setup_true_lang-CqZlgRDM.js";const $e={class:"my-6 text-sm text-auto-10"},ke=re({__name:"DeleteEncoderProfileModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},name:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},setup(L){const P=L,{t:C}=ge(),j=we(),$=()=>{he().delete(`dashboard/encoderprofiles/${P.id}`).then(({data:u})=>{j.invalidateQueries({queryKey:["dashboard","encoderProfiles"]}),!P.noRedirect&&window.history.back()}),P.close()};return(u,M)=>{const T=w("Button"),K=w("Modal");return V(),te(K,{close:L.close,open:L.open,maxWidth:"max-w-xl",params:{profile:P.name},title:"Delete encoder profile {{profile}}"},{actions:d(()=>[a(T,{id:"yes",onclick:$,endIcon:"trash",color:"red",type:"button",variant:"contained"},{default:d(()=>[h(y(I(C)("Delete")),1)]),_:1}),a(T,{id:"no",onClick:L.close,type:"button",color:"text-auto-alpha-11",variant:"text"},{default:d(()=>[h(y(I(C)("Cancel")),1)]),_:1},8,["onClick"])]),default:d(()=>[i("div",$e,y(I(C)("Are you sure you want to delete this encoder profile?")),1)]),_:1},8,["close","open","params"])}}}),Ue={class:"block whitespace-nowrap text-sm font-medium text-contrast"},Se={key:0,class:"grid w-full grid-cols-12 gap-4"},Le={key:1,class:"flex w-full flex-col"},Ne={class:"flex w-full justify-between"},Ae={class:"block whitespace-nowrap text-sm font-medium text-contrast"},Be={class:"grid h-auto w-full grid-cols-8 flex-wrap gap-2"},qe=["for"],Re=["for"],De=["for"],Fe=["for"],Ie=["for"],Me=["for"],Te=["for"],Ee=["for"],je=["for"],Ke={class:"flex w-full justify-between"},Qe={class:"mt-2 block whitespace-nowrap text-sm font-medium text-contrast"},ze={class:"grid h-auto w-full grid-cols-8 flex-wrap gap-2"},Je=["for"],Oe=["for"],We={class:"flex w-full justify-between"},Ge={class:"mt-2 block whitespace-nowrap text-sm font-medium text-contrast"},He={class:"grid h-auto w-full grid-cols-8 flex-wrap gap-2"},Xe=["for"],ll=re({__name:"Edit",setup(L){var ne,ue,de;const P=Pe(),{data:C,error:j}=ie({path:"dashboard/encoderProfiles",queryKey:["dashboard","encoderProfiles"]}),{data:$}=ie({path:"dashboard/encoderProfiles/containers",queryKey:["dashboard","videoContainers"]}),u=c();F(C,l=>{l&&(u.value=l.find(o=>o.id==P.params.id))}),ee(()=>{C.value&&(u.value=C.value.find(l=>l.id==P.params.id))});const M=c(!1),T=()=>{M.value=!0},K=()=>{M.value=!1},ce=()=>{window.history.back()},ve=()=>{},N=c([{label:"audio",value:"audio"},{label:"video",value:"video"},{label:"image",value:"image"}]),Q=c((ne=u.value)==null?void 0:ne.name),A=c((ue=N.value)==null?void 0:ue.find(l=>{var o;return l.value===((o=u.value)==null?void 0:o.type)})),b=c((de=$.value)==null?void 0:de.find(l=>{var o;return l.type==((o=u.value)==null?void 0:o.type)})),_=c([]),z=c([]),J=c([]),O=c([]),pe=c([]),W=c([]),G=c([]),E=c([]),H=c([]),X=c([]),Y=c([]),k=c([]),Z=c([]),U=c([]),x=c([]),me=()=>{_.value.push({})},fe=()=>{k.value.push({})},be=()=>{U.value.push({})},_e=l=>{_.value.splice(l,1)},Ve=l=>{k.value.splice(l,1)},ye=l=>{U.value.splice(l,1)};ee(()=>{var l;A.value=N.value.find(o=>{var m;return o.value===((m=u.value)==null?void 0:m.type)}),b.value=(l=$.value)==null?void 0:l.find(o=>{var m;return o.type==((m=u.value)==null?void 0:m.type)})}),F(u,l=>{l&&(Q.value=l.name)}),F($,l=>{l&&(b.value=l.find(o=>o.value==u.value.container))});const se=l=>{var o,m,v,p,f,B,q,R,D;l&&(console.raw("container",l,N.value),A.value=N.value.find(s=>s.value===l.type),_.value=((o=u.value.videoProfiles)==null?void 0:o.map(s=>l.available_video_codecs.find(r=>r.value==s.codec)))??[],k.value=((m=u.value.audioProfiles)==null?void 0:m.map(s=>l.available_audio_codecs.find(r=>r.value==s.codec)))??[],U.value=((v=u.value.subtitleProfiles)==null?void 0:v.map(s=>l.available_subtitle_codecs.find(r=>r.value==s.codec)))??[],z.value=((p=u.value.videoProfiles)==null?void 0:p.map(s=>l.available_resolutions.find(r=>r.width==s.width)))??[],J.value=u.value.videoProfiles.map(s=>{var r;return(r=_.value.find(t=>t.value==s.codec))==null?void 0:r.color_spaces.find(t=>t.value==s.colorSpace)}),W.value=u.value.videoProfiles.map(s=>{var r;return(r=_.value.find(t=>t.value==s.codec))==null?void 0:r.tunes.find(t=>t.value==s.tune)}),G.value=u.value.videoProfiles.map(s=>{var r;return(r=_.value.find(t=>t.value==s.codec))==null?void 0:r.profiles.find(t=>t.value==s.profile)}),E.value=u.value.videoProfiles.map(s=>{var r;return(r=_.value.find(t=>t.value==s.codec))==null?void 0:r.presets.find(t=>t.value==s.preset)}),console.log("presets",E.value),x.value=k.value.map(s=>(s==null?void 0:s.available_languages)??[]),Z.value=U.value.map(s=>(s==null?void 0:s.available_languages)??[]),O.value=((f=u.value.videoProfiles)==null?void 0:f.map(s=>s.crf))??[],Y.value=((B=u.value.videoProfiles)==null?void 0:B.map(s=>s.bitrate))??[],H.value=((q=u.value.videoProfiles)==null?void 0:q.map(s=>s.playlistName))??[],X.value=((R=u.value.videoProfiles)==null?void 0:R.map(s=>s.segmentName))??[],pe.value=((D=u.value.videoProfiles)==null?void 0:D.map(s=>s.width))??[])};return F(b,se),ee(()=>{var l;se(b.value),b.value=(l=$.value)==null?void 0:l.find(o=>o.value==u.value.container)}),F(_,l=>{l&&console.log("videoCodecs",l)}),(l,o)=>{var R;const m=w("InputText"),v=w("FloatLabel"),p=w("Select"),f=w("Button"),B=w("InputNumber"),q=w("MultiSelect");return V(),te(Ce,{gridStyle:4,error:I(j),title:"Encoder profile: {{name}}",params:{name:(R=u.value)==null?void 0:R.name}},{cta:d(()=>o[3]||(o[3]=[])),actions:d(()=>[a(f,{type:"button",id:"remove",variant:"text",class:"children:text-gray-400 children:transition-colors children:duration-100 children:hover:text-red-dark-8",color:"text-auto-alpha-11",startIcon:"folderRemove",onClick:T},{default:d(()=>[h(y(l.$t("Remove")),1)]),_:1}),a(f,{type:"button",id:"cancel",variant:"text",color:"white",onClick:ce},{default:d(()=>[h(y(l.$t("Cancel")),1)]),_:1}),a(f,{type:"submit",id:"save",color:"theme",class:"ml-auto",form:"myForm",onClick:ve},{default:d(()=>[h(y(l.$t("Save")),1)]),_:1})]),default:d(()=>{var D,s,r;return[i("span",Ue,y(l.$t("Profiles settings")),1),u.value?(V(),g("div",Se,[a(v,{variant:"on",class:"col-span-3"},{default:d(()=>[a(m,{modelValue:Q.value,"onUpdate:modelValue":o[0]||(o[0]=t=>Q.value=t),id:"name",name:"Name",class:"w-full"},null,8,["modelValue"]),o[4]||(o[4]=i("label",{for:"name"},"Name",-1))]),_:1}),a(v,{variant:"on",class:"col-span-2"},{default:d(()=>[a(p,{modelValue:A.value,"onUpdate:modelValue":o[1]||(o[1]=t=>A.value=t),id:"type",class:"w-full",options:N.value,optionLabel:"label"},null,8,["modelValue","options"]),o[5]||(o[5]=i("label",{for:"type"},"Media type",-1))]),_:1}),a(v,{variant:"on",class:"col-span-2"},{default:d(()=>{var t;return[a(p,{modelValue:b.value,"onUpdate:modelValue":o[2]||(o[2]=e=>b.value=e),id:"container",class:"w-full",options:((t=I($))==null?void 0:t.filter(e=>{var n;return e.type==((n=A.value)==null?void 0:n.value)}))??[],optionLabel:"label"},null,8,["modelValue","options"]),o[6]||(o[6]=i("label",{for:"container"},"Container",-1))]}),_:1})])):le("",!0),u.value?(V(),g("div",Le,[i("div",Ne,[i("span",Ae,y(l.$t("Video Profiles")),1),a(f,{type:"button",onClick:me,id:"addVideoProfile"},{default:d(()=>o[7]||(o[7]=[h("Add Video Profile")])),_:1})]),(V(!0),g(ae,null,oe(_.value,(t,e)=>(V(),g("div",{key:e,class:"m-2 mt-2 ml-0 flex w-full rounded-md border-white/5 p-4 border-1 odd:bg-auto-1/5 even:bg-auto-2/2"},[i("div",Be,[a(v,{variant:"on",class:"col-span-2"},{default:d(()=>{var n;return[a(p,{id:`videoProfiles_${e}`,label:"Codec",class:"col-span-2",modelValue:_.value[e],"onUpdate:modelValue":S=>_.value[e]=S,optionLabel:"label",options:((n=b.value)==null?void 0:n.available_video_codecs)??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),i("label",{for:`videoProfiles_${e}`},"Codec",8,qe)]}),_:2},1024),a(v,{variant:"on",class:"col-span-2"},{default:d(()=>{var n;return[a(p,{id:`resolutions_${e}`,label:"Resolution",class:"col-span-2",modelValue:z.value[e],"onUpdate:modelValue":S=>z.value[e]=S,optionLabel:"name",options:((n=b.value)==null?void 0:n.available_resolutions)??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),i("label",{for:`resolutions_${e}`},"Resolution",8,Re)]}),_:2},1024),a(v,{variant:"on",class:"col-span-2"},{default:d(()=>[a(p,{id:`colorSpaces_${e}`,class:"col-span-2",modelValue:J.value[e],"onUpdate:modelValue":n=>J.value[e]=n,optionLabel:"label",options:(t==null?void 0:t.color_spaces)??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),i("label",{for:`colorSpaces_${e}`},"Colorspace",8,De)]),_:2},1024),a(v,{variant:"on",class:"col-span-2"},{default:d(()=>[a(p,{id:`profiles_${e}`,l:"",class:"col-span-2",modelValue:G.value[e],"onUpdate:modelValue":n=>G.value[e]=n,optionLabel:"label",options:(t==null?void 0:t.profiles)??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),i("label",{for:`profiles_${e}`},"Profile",8,Fe)]),_:2},1024),a(v,{variant:"on",class:"col-span-2"},{default:d(()=>[a(p,{id:`presets_${e}`,l:"",class:"col-span-2",modelValue:E.value[e],"onUpdate:modelValue":n=>E.value[e]=n,optionLabel:"label",options:(t==null?void 0:t.presets)??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),i("label",{for:`presets_${e}`},"Preset",8,Ie)]),_:2},1024),a(v,{variant:"on",class:"col-span-2"},{default:d(()=>[a(p,{id:`tunes_${e}`,class:"col-span-2",modelValue:W.value[e],"onUpdate:modelValue":n=>W.value[e]=n,optionLabel:"label",options:(t==null?void 0:t.tunes)??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),o[8]||(o[8]=i("label",{for:"`tunes_${index}`"},"Tune",-1))]),_:2},1024),a(v,{variant:"on",class:"col-span-2"},{default:d(()=>[a(B,{id:`crfs_${e}`,type:"number",min:0,max:51,class:"w-full",modelValue:O.value[e],"onUpdate:modelValue":n=>O.value[e]=n},null,8,["id","modelValue","onUpdate:modelValue"]),i("label",{for:`crfs_${e}`},"CRF",8,Me)]),_:2},1024),a(v,{variant:"on",class:"col-span-2"},{default:d(()=>[a(B,{id:`bitrates_${e}`,type:"number",min:0,max:1e6,class:"w-full",modelValue:Y.value[e],"onUpdate:modelValue":n=>Y.value[e]=n},null,8,["id","modelValue","onUpdate:modelValue"]),i("label",{for:`bitrates_${e}`},"Bitrate",8,Te)]),_:2},1024),a(v,{variant:"on",class:"col-span-4"},{default:d(()=>[a(m,{id:`segmentNames_${e}`,class:"w-full",modelValue:X.value[e],"onUpdate:modelValue":n=>X.value[e]=n},null,8,["id","modelValue","onUpdate:modelValue"]),i("label",{for:`segmentNames_${e}`},"Segment name",8,Ee)]),_:2},1024),a(v,{variant:"on",class:"col-span-4"},{default:d(()=>[a(m,{id:`playlistNames_${e}`,class:"w-full",modelValue:H.value[e],"onUpdate:modelValue":n=>H.value[e]=n},null,8,["id","modelValue","onUpdate:modelValue"]),i("label",{for:`playlistNames_${e}`},"Playlist name",8,je)]),_:2},1024)]),a(f,{type:"button",onClick:()=>_e(e),id:"addVideoProfile",class:"col-span-2",variant:"text","end-icon":"trash"},null,8,["onClick"])]))),128)),i("div",Ke,[i("span",Qe,y(l.$t("Audio Profiles")),1),a(f,{type:"button",onClick:fe,id:"addAudioProfile"},{default:d(()=>o[9]||(o[9]=[h("Add Audio Profile")])),_:1})]),(V(!0),g(ae,null,oe(k.value,(t,e)=>(V(),g("div",{key:e,class:"m-2 mt-2 ml-0 flex w-full rounded-md border-white/5 p-4 border-1 odd:bg-auto-1/5 even:bg-auto-2/2"},[i("div",ze,[a(v,{variant:"on",class:"col-span-2"},{default:d(()=>{var n;return[a(p,{id:`audioCodecs_${e}`,class:"col-span-2",optionLabel:"label",modelValue:k.value[e],"onUpdate:modelValue":S=>k.value[e]=S,options:((n=b.value)==null?void 0:n.available_audio_codecs)??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),i("label",{for:`audioCodecs_${e}`},"Codec",8,Je)]}),_:2},1024),a(v,{variant:"on",class:"col-span-2"},{default:d(()=>[a(q,{id:`allowedAudioLanguages_${e}`,class:"col-span-2",optionLabel:"label",modelValue:Z.value[e],"onUpdate:modelValue":n=>Z.value[e]=n,options:(t==null?void 0:t.available_languages)??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),i("label",{for:`allowedAudioLanguages_${e}`},"Allowed languages",8,Oe)]),_:2},1024)]),a(f,{type:"button",onClick:()=>Ve(e),id:"addVideoProfile",class:"col-span-2",variant:"text","end-icon":"trash"},null,8,["onClick"])]))),128)),i("div",We,[i("span",Ge,y(l.$t("Subtitle Profiles")),1),a(f,{type:"button",onClick:be,id:"addSubtitleProfile"},{default:d(()=>o[10]||(o[10]=[h("Add Subtitle Profile")])),_:1})]),(V(!0),g(ae,null,oe(U.value,(t,e)=>(V(),g("div",{key:e,class:"m-2 mt-2 ml-0 flex w-full rounded-md border-white/5 p-4 border-1 odd:bg-auto-1/5 even:bg-auto-2/2"},[i("div",He,[a(v,{variant:"on",class:"col-span-2"},{default:d(()=>{var n;return[a(p,{modelValue:U.value[e],"onUpdate:modelValue":S=>U.value[e]=S,id:"subtitleProfiles",optionLabel:"label",class:"col-span-2",options:((n=b.value)==null?void 0:n.available_subtitle_codecs)??[]},null,8,["modelValue","onUpdate:modelValue","options"]),o[11]||(o[11]=i("label",{for:"subtitleProfiles"},"Codec",-1))]}),_:2},1024),a(v,{variant:"on",class:"col-span-2"},{default:d(()=>[a(q,{modelValue:x.value[e],"onUpdate:modelValue":n=>x.value[e]=n,id:`allowedSubtitleLanguages_${e}`,class:"col-span-2",optionLabel:"label",options:(t==null?void 0:t.available_languages)??[],multiple:""},null,8,["modelValue","onUpdate:modelValue","id","options"]),i("label",{for:`allowedSubtitleLanguages_${e}`},"Allowed languages",8,Xe)]),_:2},1024)]),a(f,{type:"button",onClick:()=>ye(e),id:"addVideoProfile",class:"col-span-2",variant:"text","end-icon":"trash"},null,8,["onClick"])]))),128))])):le("",!0),(D=u.value)!=null&&D.id?(V(),te(ke,{key:2,id:((s=u.value)==null?void 0:s.id)??"",name:((r=u.value)==null?void 0:r.name)??"",close:K,open:M.value},null,8,["id","name","open"])):le("",!0)]}),_:1},8,["error","params"])}}});export{ll as default};
//# sourceMappingURL=Edit-BDU4erAc.js.map
