import{C as d,Ct as e,Et as W,J as $,K as o,S as v,T as C,U as j,W as A,_t as D,c as U,g as J,it as _,j as M,k as w,mt as I,ot as S,w as O,wt as Y,x as i}from"./i18n-fABvX7Av.js";import"./ionic-DIYphHxf.js";import{C as q,U as G,W as K,_ as Q}from"./vue-core-CySh1wU7.js";import"./primevue-C3smGU9Q.js";import"./dist-CJipjyJM.js";import"./query-BsKzQ1i8.js";import"./esm-D1nPlPuN.js";import{t as X}from"./esm-Dqy1ik-w.js";import{Hn as Z,Jn as p,Ln as ee,Rn as te,Vi as z,Y as B,gi as ae,qn as c,zn as L,zr as se}from"./index-C2s_qrrf.js";import"./DropdownMenu-WXWw6or4.js";import"./useInfiniteServerClient-CMO3-ZWw.js";import{t as re}from"./useServerClient-CuTLtZ_P.js";import{t as le}from"./ScrollContainer-BVHoA3Xt.js";import"./MusicButton-DjUzxkcN.js";import"./BannerButton-BuxuXs3n.js";import"./MediaLikeButton-B9kozM8r.js";import"./Marquee-CbaqDRNh.js";import"./TrackLinks-V7aE_JSU.js";import"./BigPlayButton-CQ2DlgeT.js";import"./EqSpinner-D6kcc6gr.js";import{t as oe}from"./NotFound-b74PvKIW.js";import"./ShareButton-D9UxC6Lf.js";import{i as ie,n as ue,r as ne,t as me}from"./TrackRow-v32Fp14i.js";U();G();var de={key:0,ref:"main",class:"flex flex-col w-available h-available sm:rounded-2xl"},pe={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},ce=M({__name:"Desktop",setup(fe){const l=K(),y=i(()=>l.path.startsWith("/music/album")),h=i(()=>l.path.startsWith("/music/artist")),g=i(()=>l.path.startsWith("/music/playlists")),k=i(()=>l.path.startsWith("/music/tracks")),x=i(()=>l.path.startsWith("/music/genres")),V=i(()=>y.value?"album":h.value?"artist":g.value?"playlist":k.value?"favorite":x.value?"genre":"unknown"),N=i(()=>String(l.params.id??"")),{data:t,isError:P}=re({path:l.fullPath}),u=D([]),n=I(""),E=X(i(()=>({count:u.value?.length??0,getScrollElement:()=>ee.value??null,estimateSize:()=>64,overscan:10})));_(t,a=>{a&&(ae(a?.name??null),m(a?.tracks??[],p.value,c.value,n.value),L(a?.color_palette?.cover))}),_(c,a=>{m(t.value?.tracks??[],p.value,a,n.value)}),_(p,a=>{m(t.value?.tracks??[],a,c.value,n.value)}),_(n,a=>{m(t.value?.tracks??[],p.value,c.value,a)});function m(a,r,s,f){const H=se(a??[],r,s,Z);f===""?u.value=H:u.value=H?.filter(b=>b.name?.toLowerCase().includes(f?.toLowerCase?.())||b.artist_track?.some(F=>F.name.toLowerCase().includes(f?.toLowerCase?.()))||b.album_track?.[0]?.name.toLowerCase().includes(f?.toLowerCase?.()))??[]}j(()=>{t?.value?.tracks&&m(t?.value?.tracks??[],p.value,c.value,n.value),t.value?.color_palette?.cover&&L(t.value?.color_palette?.cover)}),A(()=>{document.getElementById("navbar")&&(document.getElementById("navbar").style.display="flex"),L(null),te(null)});const T=I();function R(){const r=T.value?.$el,s=r?.firstChild;!r||!s||(Math.ceil(r.getBoundingClientRect()?.top??500)<=67?(s.style.background="var(--color-theme-8)",r.style.color="white"):(s.style.background="",r.style.color=""))}return(a,r)=>(o(),d(e(q),null,{default:S(()=>[w(e(Q),{fullscreen:!0,class:"flex"},{default:S(()=>[e(P)&&!e(t)?(o(),d(oe,{key:0})):(o(),d(le,{key:1,"auto-hide":!0,static:!0,onScroll:R},{default:S(()=>[!e(l).params.id||e(l).params.id&&e(t)?.id===e(l).params.id?(o(),C("div",de,[w(ne,{data:e(t)},null,8,["data"]),v("div",pe,[r[1]||(r[1]=v("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),(o(),d(ie,{key:e(t)?.id,data:e(t),filter:n.value,onFilterChange:r[0]||(r[0]=s=>n.value=s)},null,8,["data","filter"])),v("div",{class:Y([{"pb-24":e(z)&&!e(B),"pb-40":e(z)&&e(B),"pb-4 sm:pb-4":!e(z)&&e(B)},"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-3 flex-grow-1 gap-0.5 sm:p-4"])},[(o(),d(ue,{key:e(t)?.id,ref_key:"sortHeader",ref:T,"is-album-route":y.value,"is-artist-route":h.value,"is-playlists-route":g.value,"is-favorites-route":k.value,"is-genres-route":x.value},null,8,["is-album-route","is-artist-route","is-playlists-route","is-favorites-route","is-genres-route"])),v("div",{style:W({height:`${e(E).getTotalSize()}px`,width:"100%",position:"relative"})},[(o(!0),C(J,null,$(e(E).getVirtualItems(),s=>(o(),C("div",{key:u.value[s.index]?.id+u.value[s.index]?.favorite,style:W({position:"absolute",top:0,left:0,width:"100%",height:`${s.size}px`,transform:`translateY(${s.start}px)`})},[w(me,{data:u.value[s.index],"display-list":u.value,index:s.index,"is-album-route":y.value,"is-artist-route":h.value,"is-playlists-route":g.value,"is-favorites-route":k.value,"is-genres-route":x.value,"route-type":V.value,"route-param-id":N.value},null,8,["data","display-list","index","is-album-route","is-artist-route","is-playlists-route","is-favorites-route","is-genres-route","route-type","route-param-id"])],4))),128))],4)],2)])],512)):O("",!0)]),_:1}))]),_:1})]),_:1}))}}),Fe=ce;export{Fe as default};
