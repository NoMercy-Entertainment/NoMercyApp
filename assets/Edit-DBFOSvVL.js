import{B as L,C as B,Ct as d,Dt as c,K as D,O as x,S as a,U as Q,X as S,c as I,it as q,j as N,k as r,mt as n,ot as s,w as j}from"./i18n-Rm1NkeNf.js";import"./ionic-vX7GXDhi.js";import{U as A,W as F}from"./vue-core-D-3YrIBp.js";import{C as P,m as k}from"./primevue-DkuV93HA.js";import{c as W}from"./query-BPfDyGC_.js";import{Ki as R,_i as M,k as E,qi as V,x as X,y as $}from"./index-DvNhFfKH.js";import"./useInfiniteServerClient-CoZZwjD7.js";import{t as z}from"./useServerClient-BIuEWXCM.js";import"./ScrollContainer-yJye6Yxq.js";import"./useMounted-A4MEnwHg.js";import"./RipperOverlay-Dwyszfk8.js";import"./ripperSocket-BTbiPgFI.js";import"./FloatingBackButton-Bl6ZF0Yj.js";import{t as G}from"./DashboardLayout-9lzttuhy.js";A();I();var H={class:"my-6 text-sm text-surface-10"},J=N({__name:"DeleteSpecialModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},name:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},setup(p){const v=p,f=W(),h=P(),u=n(!1);async function t(){if(!u.value){u.value=!0;try{const{data:o}=await R().delete(`dashboard/specials/${v.id}`);h.add({severity:o.status==="ok"?"success":"error",summary:M(o.status==="ok"?"Success":"Error"),detail:M(o.message,...o.args??[]),life:5e3}),f.invalidateQueries({queryKey:["dashboard","specials"]}),v.close(),v.noRedirect||E.back()}catch{u.value=!1}}}return(o,U)=>{const y=S("Button");return D(),B(X,{close:p.close,open:p.open,params:{special:v.name},"max-width":"max-w-xl",title:"Delete special {{special}}"},{actions:s(()=>[r(y,{id:"yes",disabled:u.value,onclick:t,color:"red","end-icon":"trash",type:"button"},{default:s(()=>[x(c(u.value?o.$t("Deleting..."):o.$t("Delete")),1)]),_:1},8,["disabled"]),r(y,{id:"no",disabled:u.value,onclick:p.close,color:"auto",type:"button",variant:"text"},{default:s(()=>[x(c(o.$t("Cancel")),1)]),_:1},8,["disabled","onclick"])]),default:s(()=>[a("div",H,c(o.$t("Are you sure you want to delete this special?")),1)]),_:1},8,["close","open","params"])}}}),Y=J;I();var Z={class:"flex flex-col gap-5 col-span-5 col-start-1 2xl:col-start-1"},ee={class:"flex flex-col gap-2"},le={class:"flex flex-col gap-2"},ae={class:"flex gap-4 w-full"},te={class:"flex flex-col gap-4 w-full"},oe={class:"flex flex-col gap-2"},re={class:"flex flex-col gap-4 w-full"},se={class:"flex flex-col gap-2"},ie={class:"flex flex-col gap-4 col-span-2 row-start-1 col-start-1 2xl:col-start-6"},ue={class:"flex flex-col gap-5"},de={class:"flex flex-col gap-2"},ne=N({__name:"Edit",setup(p){const v=F(),{data:f,error:h,refetch:u}=z({path:"dashboard/specials",queryKey:["dashboard","specials"]}),t=n();L(()=>{u()}),Q(()=>{f.value&&(t.value=f.value.find(l=>l.id===v.params.id))}),q(f,l=>{l&&(t.value=l.find(e=>e.id===v.params.id))});const o=n(!1);function U(){o.value=!0}function y(){o.value=!1}function K(){E.back()}const w=n(t.value?.title||""),b=n(t.value?.overview||""),m=n(t.value?.backdrop||""),_=n(t.value?.poster||""),g=n(t.value?.logo||"");q(t,l=>{l&&(w.value=l?.title,b.value=l?.overview,m.value=l?.backdrop,_.value=l?.poster,g.value=l?.logo)});function T(){R().patch(`/dashboard/specials/${t.value?.id}`,{title:w.value,overview:b.value,backdrop:m.value,poster:_.value,logo:g.value}).then(({data:l})=>{console.log(l)})}return(l,e)=>{const O=S("Textarea"),C=S("Image");return D(),B(G,{error:d(h),"grid-style":1,params:{title:t.value?.title},title:"Special: {{title}}"},{cta:s(()=>[...e[5]||(e[5]=[])]),actions:s(()=>[r($,{id:"remove",class:"children:text-gray-400 children:transition-colors children:duration-100 children:hover:text-red-dark-8",color:"auto","start-icon":"folderRemove",type:"button",variant:"text",onClick:U},{default:s(()=>[x(c(l.$t("Remove")),1)]),_:1}),r($,{id:"cancel",color:"white",type:"button",variant:"text",onClick:K},{default:s(()=>[x(c(l.$t("Cancel")),1)]),_:1}),r($,{id:"save",class:"ml-auto",color:"theme",type:"button",onClick:T},{default:s(()=>[x(c(l.$t("Save")),1)]),_:1})]),default:s(()=>[a("div",Z,[a("div",ee,[e[6]||(e[6]=a("label",{for:"name"},"Name",-1)),r(d(k),{id:"name",modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=i=>w.value=i),class:"w-full",variant:"filled"},null,8,["modelValue"])]),a("div",le,[e[7]||(e[7]=a("label",{for:"overview"},"Overview",-1)),r(O,{id:"overview",modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=i=>b.value=i),rows:8,class:"w-full",variant:"filled"},null,8,["modelValue"])]),a("div",ae,[a("div",te,[a("div",oe,[e[8]||(e[8]=a("label",{for:"backdrop"},"Backdrop",-1)),r(d(k),{id:"backdrop",modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=i=>m.value=i),class:"w-full",variant:"filled"},null,8,["modelValue"])]),r(C,{src:`${d(V)?.serverBaseUrl}/images/original${m.value}`,alt:"Image",class:"mx-2",preview:"",width:"100%"},null,8,["src"])]),a("div",re,[a("div",se,[e[9]||(e[9]=a("label",{for:"logo"},"Logo",-1)),r(d(k),{id:"logo",modelValue:g.value,"onUpdate:modelValue":e[3]||(e[3]=i=>g.value=i),class:"w-full",variant:"filled"},null,8,["modelValue"])]),r(C,{src:`${d(V)?.serverBaseUrl}/images/original${g.value}`,alt:"Image",class:"mx-2",preview:"",width:"100%"},null,8,["src"])])])]),a("div",ie,[a("div",ue,[a("div",de,[e[10]||(e[10]=a("label",{for:"poster"},"Poster",-1)),r(d(k),{id:"poster",modelValue:_.value,"onUpdate:modelValue":e[4]||(e[4]=i=>_.value=i),class:"w-full",variant:"filled"},null,8,["modelValue"])]),r(C,{src:`${d(V)?.serverBaseUrl}/images/original${_.value}`,alt:"Image",class:"mx-2",preview:"",width:"100%"},null,8,["src"])])]),t.value?.id?(D(),B(Y,{key:0,id:t.value?.id,close:y,name:t.value?.title,open:o.value},null,8,["id","name","open"])):j("",!0)]),_:1},8,["error","params"])}}}),Ve=ne;export{Ve as default};
