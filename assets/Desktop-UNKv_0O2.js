import{$ as j,ab as F,d as $,w as B,a6 as O,a7 as M,c as f,o as n,p as v,z as N,a0 as o,au as R,h as T,b as W,j as S,v as q,F as D,q as A,ar as G}from"./vue-ionic-Db_NiJFp.js";import{bM as x,bN as C,e as I,f as J,i as E,d as H,bO as K,bP as Q,_ as U}from"./index-dhF1HRpl.js";import{u as X}from"./useServerClient-CUQzpYwE.js";import{_ as Y,a as Z,S as tt,b as et}from"./TrackRow.vue_vue_type_script_setup_true_lang-Mw_Q1pGq.js";import{_ as st}from"./ScrollContainer.vue_vue_type_script_setup_true_lang-BY75sSIQ.js";import{_ as rt}from"./NotFound.vue_vue_type_script_setup_true_lang-ds4Z0OwI.js";import"./vendor-Dgtccx1h.js";import"./icons-BW5E66pf.js";import"./rxjs-BCp2L9Rn.js";import"./media-C2AqgyMX.js";import"./api-BBofn2cc.js";import"./swiper-D00Cnjmx.js";import"./music-player-bBxcOCLu.js";import"./primevue-Bn7Q4nqF.js";import"./useInfiniteServerClient-BLSEFIWT.js";import"./BigPlayButton.vue_vue_type_script_setup_true_lang-CUcza9Pc.js";import"./PlayerIcon.vue_vue_type_script_setup_true_lang-dBhx_TVd.js";import"./MusicButton.vue_vue_type_script_setup_true_lang-BeA2kCzX.js";import"./OptimizedIcon.vue_vue_type_script_setup_true_lang-DHzcpnxP.js";import"./MediaLikeButton-BECfZa1M.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ShareButton.vue_vue_type_script_setup_true_lang-CFxnFx3Y.js";import"./FavoriteImage.vue_vue_type_script_setup_true_lang-DFIgC-YQ.js";import"./CoverImage.vue_vue_type_script_setup_true_lang-BEGPgdAk.js";import"./AppLogoSquare-KpTTA6Sb.js";import"./contextMenuItems-DY4e3ZqZ.js";import"./musicPlaylists-CGhRwZ4V.js";import"./EqSpinner-CK0DbSUP.js";import"./TrackLinks.vue_vue_type_script_setup_true_lang-BAx7OqSg.js";import"./DropdownMenu.vue_vue_type_script_setup_true_lang-D20qCLnB.js";import"./BannerButton.vue_vue_type_script_setup_true_lang-DfxO9biF.js";import"./Marquee.vue_vue_type_script_setup_true_lang-omCARReS.js";const ot={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},Ft=j({__name:"Desktop",setup(at){const w=F(),{data:r,isError:V}=X({path:w.fullPath}),z=$(null),h=$(),c=$("");B(r,s=>{var e;s&&(U((s==null?void 0:s.name)??null),d((s==null?void 0:s.tracks)??[],C.value,x.value,c.value),I((e=s==null?void 0:s.color_palette)==null?void 0:e.cover))}),B(x,s=>{var e;d(((e=r.value)==null?void 0:e.tracks)??[],C.value,s,c.value)}),B(C,s=>{var e;d(((e=r.value)==null?void 0:e.tracks)??[],s,x.value,c.value)}),B(c,s=>{var e;d(((e=r.value)==null?void 0:e.tracks)??[],C.value,x.value,s)});function d(s,e,l,t){const i=K(s??[],e,l,Q);t===""?h.value=i:h.value=(i==null?void 0:i.filter(a=>{var m,u,_,b,k,y;return((u=a.name)==null?void 0:u.toLowerCase().includes((m=t==null?void 0:t.toLowerCase)==null?void 0:m.call(t)))||((_=a.artist_track)==null?void 0:_.some(L=>{var g;return L.name.toLowerCase().includes((g=t==null?void 0:t.toLowerCase)==null?void 0:g.call(t))}))||((y=(b=a.album_track)==null?void 0:b[0])==null?void 0:y.name.toLowerCase().includes((k=t==null?void 0:t.toLowerCase)==null?void 0:k.call(t)))}))??[]}O(()=>{var s,e,l,t,i,a;(s=r==null?void 0:r.value)!=null&&s.tracks&&d(((e=r==null?void 0:r.value)==null?void 0:e.tracks)??[],C.value,x.value,c.value),(t=(l=r.value)==null?void 0:l.color_palette)!=null&&t.cover&&I((a=(i=r.value)==null?void 0:i.color_palette)==null?void 0:a.cover)}),M(()=>{document.getElementById("navbar")&&(document.getElementById("navbar").style.display="flex"),I(null),J(null)});const p=$();function P(){var e,l,t,i,a,m,u,_,b,k,y,L,g;if(window.CSS.supports("container-type","scroll-state"))return;Math.ceil(((t=(l=(e=p.value)==null?void 0:e.$el)==null?void 0:l.getBoundingClientRect())==null?void 0:t.top)??500)<=67?((a=(i=p.value)==null?void 0:i.$el)==null||a.classList.add("!bg-focus"),(_=(u=(m=p.value)==null?void 0:m.$el)==null?void 0:u.firstChild)==null||_.classList.add("!bg-black/50")):((k=(b=p.value)==null?void 0:b.$el)==null||k.classList.remove("!bg-focus"),(g=(L=(y=p.value)==null?void 0:y.$el)==null?void 0:L.firstChild)==null||g.classList.remove("!bg-black/50"))}return(s,e)=>(n(),f(o(G),null,{default:v(()=>[N(o(R),{fullscreen:!0,class:"flex"},{default:v(()=>[o(V)&&!o(r)?(n(),f(rt,{key:0})):(n(),f(st,{key:1,"auto-hide":!0,static:!0,onScroll:P},{default:v(()=>{var l,t,i;return[!o(w).params.id||o(w).params.id&&((l=o(r))==null?void 0:l.id)===o(w).params.id?(n(),T("div",{key:0,ref_key:"main",ref:z,class:"flex flex-col overflow-x-clip w-available h-available sm:rounded-2xl"},[N(Y,{data:o(r)},null,8,["data"]),S("div",ot,[e[1]||(e[1]=S("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom bg-focus"},null,-1)),(n(),f(Z,{key:(t=o(r))==null?void 0:t.id,data:o(r),filter:c.value,onFilterChange:e[0]||(e[0]=a=>c.value=a)},null,8,["data","filter"])),S("div",{class:q(["flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-slate-light-1 dark:bg-slate-dark-2 flex-grow-1 gap-0.5 sm:p-4",{"pb-24":o(E)&&!o(H),"pb-40":o(E)&&o(H),"pb-4 sm:pb-4":!o(E)&&o(H)}])},[(n(),f(tt,{ref_key:"sortHeader",ref:p,key:(i=o(r))==null?void 0:i.id})),(n(!0),T(D,null,A(h.value,(a,m)=>(n(),f(et,{key:a.id+(a==null?void 0:a.favorite),data:a,"display-list":h.value,index:m},null,8,["data","display-list","index"]))),128))],2)])],512)):W("",!0)]}),_:1}))]),_:1})]),_:1}))}});export{Ft as default};
