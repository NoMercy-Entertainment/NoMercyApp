import{aG as K,bD as V,K as G,L as j,az as z,cg as R,cG as u,j as q,o as J,a7 as Q,a as W,aI as X,bN as Y,em as t,ba as Z,dd as $,bn as H,bd as ee}from"./index-DQ8-cro_.js";import{A as ae,S as se,O as oe}from"./octopusPlugin-BuCb9W0P.js";import{n as le}from"./subtitles-octopus-DfX7Tv-F.js";import{D as ne}from"./desktopUIPlugin-CcGUJ7H9.js";import{K as te}from"./keyHandlerPlugin-v5RgV3Kc.js";import"./buttons-DDRy-LjE.js";const ve=K({__name:"Desktop",setup(re){const{data:i}=V(),e=G(),c=o=>{var d,p,g,v,m,f,P,y,k,b,S,w,I,h,C,D,_,E,M,T,U;const l={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:(o==null?void 0:o.filter(a=>!!a.id))??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:(d=$.value)==null?void 0:d.accessToken,basePath:(p=Z.value)==null?void 0:p.serverBaseUrl,forceTvMode:(t("android")||t("ios"))&&!t("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||t("capacitor"),renderAhead:100,customStorage:{set:(a,s)=>new Promise(n=>{localStorage.setItem(a,s),n()}),get:a=>new Promise(s=>{s(localStorage.getItem(a))}),remove:a=>new Promise(s=>{localStorage.removeItem(a),s()})}};e.value=le("player1").setup(l),(g=e.value)==null||g.once("back",()=>{H.back()});const B=new ne;(v=e.value)==null||v.registerPlugin("desktopUI",B),(m=e.value)==null||m.usePlugin("desktopUI");const L=new ae;(f=e.value)==null||f.registerPlugin("autoSkip",L),(P=e.value)==null||P.usePlugin("autoSkip");const N=new te;(y=e.value)==null||y.registerPlugin("keyHandler",N),(k=e.value)==null||k.usePlugin("keyHandler");const O=new se;(b=e.value)==null||b.registerPlugin("sync",O),(S=e.value)==null||S.usePlugin("sync");const A=new oe;(w=e.value)==null||w.registerPlugin("octopus",A),(I=e.value)==null||I.usePlugin("octopus"),(h=e.value)==null||h.once("play",()=>{var a;(a=e.value)==null||a.enterFullscreen()}),(C=e.value)==null||C.on("playlistComplete",()=>{var a;(a=e.value)==null||a.dispose(),H.back()}),(D=e.value)==null||D.once("back",()=>{}),(_=e.value)==null||_.on("play",()=>{u(!0)}),(E=e.value)==null||E.on("pause",()=>{u(!1)}),(M=e.value)==null||M.on("fullscreen",a=>{var s,n;(n=(s=window.external)==null?void 0:s.sendMessage)==null||n.call(s,a?"enterFullscreen":"exitFullscreen")}),(T=e.value)==null||T.on("ready",()=>{var n;ee.stop();const a=new MutationObserver(F=>F.filter(r=>r.type==="childList").forEach(r=>{r.addedNodes.forEach(x=>{x instanceof HTMLElement&&x.tagName==="VIDEO"&&console.log("video removed")})})),s=(n=e.value)==null?void 0:n.getVideoElement();s&&a.observe(s,{childList:!0,subtree:!0})}),(U=e.value)==null||U.on("item",()=>{var a;(a=e.value)==null||a.play()})};return j(i,o=>{var l;(l=e.value)==null||l.dispose(),c(o)}),z(()=>{var o;(o=e.value)==null||o.dispose(),c(i.value)}),R(()=>{var o;(o=e.value)==null||o.dispose(),u(!1)}),(o,l)=>(J(),q(X(Y),null,{default:Q(()=>l[0]||(l[0]=[W("div",{id:"player1",class:"group nomercyplayer"},null,-1)])),_:1}))}});export{ve as default};
