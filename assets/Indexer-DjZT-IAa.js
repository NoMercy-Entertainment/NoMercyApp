import{At as _,C as R,Dt as z,Et as r,K as T,S as h,T as u,Y as i,Z as I,_t as w,c as E,g as y,j as Z,lt as j,q as B,x as k}from"./i18n-DXLa9EKW.js";import{g as P,x as $,y as D}from"./vue-core-DBpBuPMK.js";import{k as n,qi as g,ri as N,v as G}from"./index-CLM6Y7vI.js";import{n as M,t as b}from"./scrollHandlers-BK4sXoVp.js";E();var f=w(!1);const ee=k(()=>f.value);function Q(s){f.value=s}var U=w([]);const V=k(()=>{const s=new Set;return U.value?.forEach(o=>{const l=o.props?.data?.title||o.props?.data?.name||o.props?.name||"";if(l){const c=l.charAt(0).toUpperCase();/[A-Z0-9]/.test(c)?s.add(c):s.add("#")}}),s});var m=f;E();D();var F={class:"flex-shrink-0 flex-grow-0 text-center text-xs sm:text-base font-semibold leading-none"},H=["data-indexer","onClick"],K={class:"flex-shrink-0 flex-grow-0 text-center text-xs sm:text-base font-semibold leading-none"},O=Z({__name:"Indexer",setup(s){const o=["Library","Collections","Albums","Artists","Music Genres","Genre"],l=[new RegExp("music/albums"),new RegExp("music/artists"),new RegExp("libraries/[a-zA-Z0-9]+/letter/[a-zA-Z0-9_]"),new RegExp("music/genres/letter/[a-zA-Z0-9_]")];function c(e){return o.some(a=>e===a||e.startsWith(`${a} `))}function d(e){return l.some(a=>e.match(a))}const L=$();function p(){setTimeout(()=>{document.querySelector("[indexer]")?.querySelectorAll("[data-indexer]").forEach(e=>{const a=e.dataset.indexer??"";let t;a==="#"?t=document.querySelector?.("[data-scroll]"):t=document.querySelector?.(`[data-scroll='scroll_${a}']`);const v=!!t,A=d(n.currentRoute.value.path),C=V.value.has(a);v||A||C?e.classList.remove("opacity-20","!cursor-not-allowed"):e.classList.add("opacity-20","!cursor-not-allowed")})},500)}function S(e){M(e),document.dispatchEvent(new CustomEvent("scrollToLetter",{detail:{letter:e}}))}function q(){document.querySelector("[indexer]")?.querySelectorAll("[data-indexer]").forEach(e=>{e.classList.add("opacity-20","!cursor-not-allowed")})}function x(e){Q(c(e)),p()}return n.afterEach(e=>{setTimeout(()=>{x(e.name??e.path)},150)}),n.beforeEach(()=>{d(n.currentRoute.value.path)||q()}),T(()=>{setTimeout(()=>{x(n.currentRoute.value.name??n.currentRoute.value.path)},150),document.addEventListener("indexer",p),document.addEventListener("keydown",b)}),B(()=>{document.removeEventListener("indexer",p),document.removeEventListener("keydown",b)}),(e,a)=>(i(),u("div",{class:z([{"w-8 opacity-100":r(m),"w-0 opacity-0 translate-x-4 pointer-events-none!":!r(m),"sm:ml-2":!r(g)&&r(m),"bottom-0":r(g)},"z-0 h-available sm:h-available flex flex-col items-center justify-between self-stretch overflow-clip transition-[width,opacity,transform] duration-200 sm:-translate-x-3 pt-2 text-surface-12"]),indexer:""},[(i(!0),u(y,null,I(r(N)("#","Z"),t=>(i(),u(y,{key:t},[d(r(L).path)?(i(),R(r(P),{key:0,"data-indexer":t,to:`${t.replace("#","_")}`,class:"pointer-events-auto relative flex p-1 size-6 sm:size-6 aspect-square rounded-lg overflow-clip cursor-pointer flex-col items-center justify-center hover:bg-surface-5",tabindex:"-1"},{default:j(()=>[h("p",F,_(t),1)]),_:2},1032,["data-indexer","to"])):(i(),u("button",{key:1,"data-indexer":t,class:"pointer-events-auto relative flex p-1 size-6 sm:size-6 aspect-square rounded-lg overflow-clip cursor-pointer flex-col items-center justify-center hover:bg-surface-5/11",tabindex:"-1",onClick:v=>S(t)},[h("p",K,_(t),1)],8,H))],64))),128))],2))}}),te=G(O,[["__scopeId","data-v-8f165ddf"]]);export{m as n,te as t};
