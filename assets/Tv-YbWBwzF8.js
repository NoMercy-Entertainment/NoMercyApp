import{aG as Q,be as J,bE as W,az as X,aM as q,L as Y,K as F,d0 as Z,ax as ee,j as z,o as m,a7 as c,x as s,aI as e,bQ as te,c as x,av as ae,ez as P,a as d,ba as le,eA as L,eB as C,eC as _,h as I,bb as j,ca as se,t as h,aT as B,e6 as oe,F as ie,w as ne,e5 as re,eD as ce,C as ue,bh as g,bi as de,bg as fe,eE as pe,eF as me,eG as D,aF as V,dc as be,aS as ve,bO as xe,dd as we,da as E,bd as S,bm as M,de as _e,bc as A,df as K,b6 as ye}from"./index-DpwSIsRi.js";import{_ as ke}from"./BigPlayButton.vue_vue_type_script_setup_true_lang-DlY7EPlJ.js";const he={class:"w-available h-available absolute left-[202px] top-0 overflow-hidden bg-focus"},ge=["src"],Se={class:"flex justify-center w-available aspect-square my-8 ml-8 mr-16"},Ce={key:0,class:"relative mb-8 flex w-full flex-1 flex-shrink-0 flex-col items-start justify-start gap-4 flex-grow-1 text-left"},Ie=["innerHTML"],$e={key:1,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap"},Te={class:"flex items-center h-8 gap-2 self-stretch w-full text-xs font-medium text-left"},qe={key:0,class:"flex gap-2"},Fe={key:1,class:"flex gap-2"},ze={class:"flex gap-2 items-center justify-between w-full"},Pe=["data-index","data-id","onClick"],Le={class:"flex w-available overflow-clip items-end"},je=Q({__name:"Tv",setup(Be){const N=J(),{data:l}=W({path:N.fullPath,keepForever:!0});X(()=>{var a,t,o,i;(t=(a=l.value)==null?void 0:a.color_palette)!=null&&t.cover&&q((i=(o=l.value)==null?void 0:o.color_palette)==null?void 0:i.cover),setTimeout(()=>{const r=document.querySelector(".focusable");r&&r.focus()},100)}),Y(l,a=>{var t,o;(t=a==null?void 0:a.color_palette)!=null&&t.cover&&q((o=a==null?void 0:a.color_palette)==null?void 0:o.cover),setTimeout(()=>{const i=document.querySelector(".focusable");i&&i.focus()},100)});const $=F(),G=F();Z(()=>{setTimeout(()=>{const a=document.querySelector(".focusable");a&&a.focus()},100)});const H=a=>{var r;const t=a.target,o=((r=$.value)==null?void 0:r.getAttribute("data-index"))??0,i=t.querySelector(`[data-index="${o}"] .focusable`);i&&i.focus()},U=a=>{var r;const t=a.target;$.value=t,t&&t.scrollIntoView({behavior:"smooth",block:"center"});const o=(r=t.closest("[data-id]"))==null?void 0:r.getAttribute("data-id"),i=t.querySelector(`[data-index="${o}"] .focusable`);i&&i.focus()},R=a=>{var o,i;const t=a.target;if(a.key=="ArrowUp"){const u=((o=t.closest("ion-item"))==null?void 0:o.previousSibling).querySelector(".focusable");u&&(u.focus(),u.scrollIntoView({behavior:"smooth",block:"center"}))}else if(a.key=="ArrowDown"){const u=((i=t.closest("ion-item"))==null?void 0:i.nextSibling).querySelector(".focusable");u&&(u.focus(),u.scrollIntoView({behavior:"smooth",block:"center"}))}},y=ee(()=>{var a,t,o;return`${(t=(a=l.value)==null?void 0:a.type)==null?void 0:t.replace(/s$/u,"")}/${(o=l.value)==null?void 0:o.id}`}),O=a=>{var t,o,i,r,u,p,n,b,f;if((t=l.value)!=null&&t.tracks){if(!((o=we.value.features)!=null&&o.nomercyConnect)){if(E.value===y.value){S.togglePlayback();return}S.playTrack(a,(i=l.value)==null?void 0:i.tracks),M(y.value);return}if(_e.value||(r=A.value)==null||r.invoke("ChangeDeviceCommand",K.value).then(()=>{console.log("Switched to device:",K.value)}).catch(v=>{console.error("Error switching device:",v)}),(b=A.value)==null||b.invoke("StartPlaybackCommand",(u=l.value)==null?void 0:u.type.replace(/s$/u,""),(p=l.value)==null?void 0:p.id,((n=g.value)==null?void 0:n.id)??(a==null?void 0:a.id)),E.value===y.value){S.togglePlayback();return}S.playTrack(a,(f=l.value)==null?void 0:f.tracks),M(y.value)}};return(a,t)=>(m(),z(e(xe),null,{default:c(()=>[s(e(te),{fullscreen:!0},{default:c(()=>{var o,i,r,u;return[(m(),x("div",{class:"w-full h-full absolute left-0 top-0 bg-[#131314] pointer-events-none -z-10",key:(o=e(l))==null?void 0:o.id,style:ae(e(P)?`--color-focus: ${e(P)}`:"")},[d("div",he,[d("img",{class:"w-available h-available absolute left-[-0.39px] top-[-0.39px] opacity-40 object-cover object-center",src:`${(i=e(le))==null?void 0:i.serverBaseUrl}${((r=e(l))==null?void 0:r.backdrop)??((u=e(l))==null?void 0:u.cover)}`,alt:""},null,8,ge),t[5]||(t[5]=d("div",{class:"w-[150vw] h-[150vw] absolute left-[-30%] bottom-[-50%]",style:{background:`radial-gradient(
                    closest-side,
                    rgba(19, 19, 20, 0.1) 0%,
                    rgba(19, 19, 20, 1) 70.73974609375%
                  )`}},null,-1))])],4)),s(e(L),null,{default:c(()=>[s(e(C),{class:"ion-align-items-end"},{default:c(()=>[s(e(_),{size:"3"},{default:c(()=>{var p,n,b,f,v,w,k,T;return[d("div",Se,[s(j,{data:e(l),alt:(p=e(l))==null?void 0:p.name,class:"w-auto h-full aspect-square"},null,8,["data","alt"])]),(n=e(l))!=null&&n.name?(m(),x("div",Ce,[e(l).name.length>50?(m(),x("div",{key:0,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap",innerHTML:e(se)(((b=e(l))==null?void 0:b.name)??"Songs you like","text-xs line-clamp-1")},null,8,Ie)):(m(),x("p",$e,h((f=e(l))==null?void 0:f.name),1)),d("div",Te,[(v=e(l))!=null&&v.type?(m(),x("span",qe,[d("span",null,h((w=e(l))==null?void 0:w.type.replace(/s$/u,"").toTitleCase()),1)])):I("",!0),(k=e(l))!=null&&k.tracks?(m(),x("span",Fe,[t[6]||(t[6]=d("span",null,"â€¢",-1)),d("span",null,h((T=e(l))==null?void 0:T.tracks.length)+" "+h(a.$t("tracks")),1)])):I("",!0)]),d("div",ze,[s(B,{data:e(l)},null,8,["data"]),s(ke,{data:e(l),class:"w-12 h-12 ml-auto"},null,8,["data"])])])):I("",!0)]}),_:1}),s(e(_),{size:"6",ref_key:"scrollContainer",ref:G,onFocus:t[4]||(t[4]=p=>H(p)),tabindex:"0",class:"w-full h-available overflow-auto scroll-smooth"},{default:c(()=>[s(e(oe),{mode:"md",lines:"none"},{default:c(()=>{var p;return[(m(!0),x(ie,null,ne((p=e(l))==null?void 0:p.tracks,(n,b)=>(m(),z(e(re),{key:n.id,tabindex:"-1",mode:"md",class:"group/track focus-within:bg-white/4 rounded-md overflow-clip"},{default:c(()=>[s(e(L),null,{default:c(()=>[s(e(C),{"data-index":b,"data-id":n.id,tabindex:"-1",class:"items-center !rounded-md !overflow-clip"},{default:c(()=>[s(e(_),{size:"2",tabindex:"-1"},{default:c(()=>[d("div",{tabindex:"0","data-index":b,"data-id":n.id,class:"focusable flex justify-center w-full aspect-video focus:outline outline-focus outline-2 outline-offset-2 mr-2 overflow-clip",onFocus:t[0]||(t[0]=f=>U(f)),onClick:f=>O(n)},[s(j,{data:n,alt:n.name,class:"w-auto h-full aspect-square"},null,8,["data","alt"])],40,Pe)]),_:2},1024),s(e(_),{size:"8",tabindex:"-1",class:"my-auto mt-2"},{default:c(()=>[s(e(ce),{tabindex:"-1"},{default:c(()=>{var f,v,w;return[d("div",Le,[d("div",{class:ue(["flex items-center justify-center h-full aspect-square overflow-clip transition-width duration-200",{"w-0":((f=e(g))==null?void 0:f.id)!=n.id,"w-6 mr-1":((v=e(g))==null?void 0:v.id)==n.id}])},[s(de,{playing:e(fe)},null,8,["playing"])],2),s(pe,{playing:!!((w=e(g))!=null&&w.id),text:n.name,class:"!w-[calc(100%-30px)] text-auto-12 children:leading-none w-available overflow-clip"},null,8,["playing","text"])]),s(me,{data:n.artist_track,type:"artists",id:n.id,onKeydown:[t[1]||(t[1]=D(V(()=>{},["prevent"]),["up"])),t[2]||(t[2]=D(V(()=>{},["prevent"]),["down"]))],onKeyup:t[3]||(t[3]=k=>R(k)),suffix:"track"},null,8,["data","id"])]}),_:2},1024)]),_:2},1024),s(e(_),{size:"2",tabindex:"-1",class:"opacity-0 group-focus-within/track:opacity-100 -ml-2"},{default:c(()=>[s(e(C),{tabindex:"-1",class:"flex flex-nowrap"},{default:c(()=>[s(B,{data:n},null,8,["data"]),s(be,{label:"",tabindex:"1",onclick:()=>{},class:"!bg-transparent mr-2"},{default:c(()=>[s(ve,{icon:"menuDotsHorizontal",class:"text-white"})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1032,["data-index","data-id"])]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1},512)]),_:1})]),_:1})]}),_:1})]),_:1}))}}),Ee=ye(je,[["__scopeId","data-v-7477afc8"]]);export{Ee as default};
