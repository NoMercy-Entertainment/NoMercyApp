import{$ as O,C as u,Et as e,K as T,S as d,T as p,Y as a,_t as C,c as v,j as h,k as s,kt as B,lt as M,st as E,w as f,x}from"./i18n-DBb78QAI.js";import"./ionic-DNKsarlx.js";import"./vue-core-CD3ScEG4.js";import"./primevue-CDzFprnl.js";import{$i as R,At as q,Da as $,Ia as Q,Mt as c,Nt as L,Pt as V,Qi as Z,U as J,W as S,Z as r,b as n,bi as K,g as U,gt as z,ht as w,mt as W,tt as Y,ut as P,za as F}from"./index-Dbw70ZKS.js";import{o as m}from"./sidebar-CN41PbLz.js";import{t as A}from"./MusicButton-C9LuPY-w.js";import"./BannerButton-UElmt47M.js";import{t as G}from"./MediaLikeButton-DXh7wU4B.js";import{n as H,r as X,t as ee}from"./TrackLinks-C9aI-AJr.js";import{a as te,c as ae,i as re,n as se,o as ue,r as le,s as ie,t as oe}from"./EqButton-Dh1zCiHv.js";import{t as ne}from"./SliderBar-Br1Le_MO.js";import{t as ce}from"./Marquee-Byzdih_c.js";v();var de=h({__name:"VolumeButton",setup(y){function i(l){if(l?.stopPropagation(),!$.value.features?.nomercyConnect){S.toggleMute();return}L.value?.invoke("PlaybackCommand","mute",!P.value)}return(l,o)=>(a(),u(A,{onclick:i,label:"Mute","no-tooltip":""},{default:M(()=>[(e(V)?.muted_state===void 0?e(P):e(V).muted_state)?(a(),u(n,{key:0,class:"h-6 w-6",icon:"volumeMuted"})):e(c)===0?(a(),u(n,{key:1,class:"h-6 w-6",icon:"volumeZero"})):e(c)>30&&e(c)<=70?(a(),u(n,{key:2,class:"h-6 w-6",icon:"volumeTwo"})):e(c)>70?(a(),u(n,{key:3,class:"h-6 w-6",icon:"volumeThree"})):(a(),u(n,{key:4,class:"h-6 w-6",icon:"volumeOne"}))]),_:1}))}}),_e=de;v();var fe=h({__name:"VolumeSlider",setup(y){const i=C(0);E(F(i,50),o=>{Y(),L.value?.invoke("ChangeVolumeCommand",o)});function l(o){i.value=o,c.value=o,J.setVolume(i.value)}return(o,k)=>(a(),u(ne,{percentage:e(c),value:e(c),min:0,step:1,max:100,onInput:k[0]||(k[0]=b=>l(Number(b.target.value)))},null,8,["percentage","value"]))}}),me=fe;v();var pe=["data-size"],ve=["data-size"],he=h({__name:"VolumeContainer",setup(y){return(i,l)=>(a(),p("div",{class:"mr-2 flex w-32 min-w-28 items-center gap-2","data-size":e(w)},[s(_e),d("div",{class:"w-full h-full items-center flex full:mb-2 !mb-0","data-size":e(w)},[s(me)],8,ve)],8,pe))}}),ye=he;v();var ke=h({__name:"LyricsButton",setup(y){function i(l){l?.stopPropagation(),q()}return(l,o)=>(a(),u(A,{onclick:i,label:"Lyrics"},{default:M(()=>[e(W)?(a(),u(n,{key:0,class:"h-6 w-6 text-focus",icon:"lyrics"})):(a(),u(n,{key:1,class:"h-6 w-6",icon:"lyrics"}))]),_:1}))}}),ge=ke;v();var xe=["data-music","data-sidebar","inert"],we={key:0,class:"flex h-full w-full items-center gap-8 music-showing:transition-all music-showing:duration-75"},be={key:0,class:"mx-4 flex flex-col overflow-hidden gap-0.5 w-available hover-animate-pause"},Be=["data-size"],Ce={class:"flex justify-center"},Se={class:"flex flex-shrink-0 flex-grow-0 items-center justify-center gap-2"},Me=["data-size"],Ve=h({__name:"MusicPlayerDesktop",setup(y){const i=C(),l=C(!0),o=Q("nmplayer-music-supports-audio-context",!1),k=x(()=>m.value==="open"?100/4:m.value==="closed"?100/3.2:100/3),b=x(()=>100/3),D=x(()=>m.value==="open"?100/2.9:(m.value==="closed",100/3)),j=x(()=>`/music/album/${r.value?.album_track.at(0)?.id}`);function N(t){if(t)return JSON.stringify({id:t?.id,Artist:t?.Artist,host:t.host,track:`${t.libraryId}${t.folder}${t.filename}`,type:t?.type,favorite_track:t?.favorite_track,Album:t?.Album,playlists:t?.playlists})}async function I(){r.value&&await Z().post(`music/tracks/${r.value?.id}/playback`)}return T(()=>{R.value&&(S.on?.("song",t=>{t&&(l.value=!0,t&&K(`${t.name} - ${t.artist_track.at(0)?.name} - ${t.album_track.at(0)?.name}`),i.value=N(Object.keys(t).filter(_=>_!=="lyrics").reduce((_,g)=>(_[g]=t[g],_),{})))}),S.on?.("time",t=>{Math.floor(t.percentage)===50&&l.value&&(l.value=!1,$.value.features?.nomercyConnect||I())}))}),(t,_)=>{const g=O("RouterLink");return a(),p("div",{id:"fullPlayer","data-music":e(z),"data-sidebar":e(m),inert:e(z)==="hidden",class:"bg-surface-12/3 hidden h-0 music-showing:h-20 flex-shrink-0 flex-grow-0 flex-row items-center justify-start gap-12 self-stretch pr-6 sidebar-closed:ml-16 sidebar-open:ml-64 rounded-lg m-2 pl-4 mx-5 transition-all duration-200 sm:flex 2xl:sidebar-open:ml-[16.3rem]"},[e(r)?(a(),p("div",we,[d("div",{id:"left",style:B({width:`${k.value}%`}),class:"flex flex-grow items-center justify-start transition-width duration-200 gap-2 overflow-clip h-16","data-target":"track"},[s(g,{to:j.value},{default:M(()=>[e(r)?(a(),u(U,{key:0,data:e(r),size:100,"class-name":"w-14 h-14 max-h-14 !max-w-14 overflow-clip cursor-pointer"},null,8,["data"])):f("",!0)]),_:1},8,["to"]),e(r)?(a(),p("div",be,[s(ce,{text:e(r)?.name},null,8,["text"]),(a(),p("div",{key:e(r).id,"data-size":e(w),class:"inline-flex gap-1 overflow-hidden whitespace-nowrap text-xs w-available line-clamp-1 hover-animate-pause"},[e(r)?(a(),u(ee,{id:e(r).id,key:e(r).id,data:e(r).artist_track,suffix:"player",type:"artists"},null,8,["id","data"])):f("",!0)],8,Be))])):f("",!0),(a(),u(G,{key:e(r).id,data:e(r),class:"hidden sm:flex mr-1",color:"var(--color-theme-8)",type:"music"},null,8,["data"]))],4),d("div",{id:"center",style:B({width:`${b.value}%`}),class:"flex w-full flex-grow flex-col items-center justify-start transition-width duration-200"},[d("div",Ce,[d("div",Se,[s(le),s(ie),s(H,{class:"children:h-10 h-12 children:w-10 w-12 !bg-surface-12/4 hover:!bg-surface-12/6"}),s(ae),s(re)])]),s(ue)],4),d("div",{id:"right","data-size":e(w),style:B({width:`${D.value}%`}),class:"relative flex flex-grow items-center justify-end gap-2 transition-width duration-200"},[s(se),s(ge),s(te),e(o)?(a(),u(oe,{key:0})):f("",!0),s(X),s(ye)],12,Me)])):f("",!0)],8,xe)}}}),qe=Ve;export{qe as default};
