import{aG as G,bf as K,bG as O,K as f,L as C,cb as R,eJ as g,eK as v,aM as z,eL as J,az as Q,aN as W,j as L,o as u,a7 as j,x as H,aI as r,bS as D,c as E,h as U,a as p,C as N,aS as X,e8 as Y,F as Z,w as ee,bQ as te,bx as ae,eM as se}from"./index-DptfosSX.js";import{_ as oe,a as re,S as le,b as ne}from"./TrackRow.vue_vue_type_script_setup_true_lang-C-mx-x2h.js";import{_ as ie}from"./NotFound.vue_vue_type_script_setup_true_lang-RqKNlVIo.js";import"./BigPlayButton.vue_vue_type_script_setup_true_lang-DSHhx1BE.js";import"./ShareButton.vue_vue_type_script_setup_true_lang-CrxjqTNr.js";import"./FavoriteImage.vue_vue_type_script_setup_true_lang-DIqa5K0S.js";import"./TrackLinks.vue_vue_type_script_setup_true_lang-DozHX8BG.js";import"./BannerButton.vue_vue_type_script_setup_true_lang-Ckx0d7TH.js";const ce={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},de=["innerHTML"],fe={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-slate-dark-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},he=G({__name:"Mobile",setup(ue){const T=K(),{data:s,isError:P}=O({path:T.fullPath}),V=f(null),S=f(),c=f("");C(s,a=>{var t;R((a==null?void 0:a.name)??null),m((a==null?void 0:a.tracks)??[],v.value,g.value,c.value),z((t=a==null?void 0:a.color_palette)==null?void 0:t.cover)}),C(g,a=>{var t;m(((t=s.value)==null?void 0:t.tracks)??[],v.value,a,c.value)}),C(v,a=>{var t;m(((t=s.value)==null?void 0:t.tracks)??[],a,g.value,c.value)}),C(c,a=>{var t;m(((t=s.value)==null?void 0:t.tracks)??[],v.value,g.value,a)});const m=(a,t,n,e)=>{const o=J(a??[],t,n,se);e==""?S.value=o:S.value=(o==null?void 0:o.filter(i=>{var l,d,x,_,h,y;return((d=i.name)==null?void 0:d.toLowerCase().includes((l=e==null?void 0:e.toLowerCase)==null?void 0:l.call(e)))||((x=i.artist_track)==null?void 0:x.some(B=>{var w;return B.name.toLowerCase().includes((w=e==null?void 0:e.toLowerCase)==null?void 0:w.call(e))}))||((y=(_=i.album_track)==null?void 0:_[0])==null?void 0:y.name.toLowerCase().includes((h=e==null?void 0:e.toLowerCase)==null?void 0:h.call(e)))}))??[]};Q(()=>{var a,t,n,e,o;m(((a=s==null?void 0:s.value)==null?void 0:a.tracks)??[],v.value,g.value,c.value),(n=(t=s.value)==null?void 0:t.color_palette)!=null&&n.cover&&z((o=(e=s.value)==null?void 0:e.color_palette)==null?void 0:o.cover)}),W(()=>{var a,t,n,e,o;m(((a=s==null?void 0:s.value)==null?void 0:a.tracks)??[],v.value,g.value,c.value),(n=(t=s.value)==null?void 0:t.color_palette)!=null&&n.cover&&z((o=(e=s.value)==null?void 0:e.color_palette)==null?void 0:o.cover)});const q=()=>{window.history.back()},k=f(!1),A=f(!1),b=f(),F=f(),$=()=>{var o,i,l,d,x,_,h,y,B,w,M,I;const n=ae("capacitor")?88:64,e=(i=(o=b.value)==null?void 0:o.$el)==null?void 0:i.getBoundingClientRect().top;if(!e){requestAnimationFrame($);return}k.value=e<=170,A.value=e<=160,e==n?((d=(l=b.value)==null?void 0:l.$el)==null||d.classList.add("!bg-focus"),(h=(_=(x=b.value)==null?void 0:x.$el)==null?void 0:_.firstChild)==null||h.classList.add("!bg-slate-light-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")):((B=(y=b.value)==null?void 0:y.$el)==null||B.classList.remove("!bg-focus"),(I=(M=(w=b.value)==null?void 0:w.$el)==null?void 0:M.firstChild)==null||I.classList.remove("!bg-slate-light-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")),requestAnimationFrame($)};return C(F,()=>{requestAnimationFrame($)}),(a,t)=>(u(),L(r(te),null,{default:j(()=>[H(r(D),{ref_key:"container",ref:F,onIonScroll:$,scrollEvents:!0},{default:j(()=>{var n,e,o,i;return[r(P)&&!r(s)?(u(),L(ie,{key:0})):!r(T).params.id||r(T).params.id&&((n=r(s))==null?void 0:n.id)==r(T).params.id?(u(),E("div",{key:1,ref_key:"main",ref:V,class:"flex flex-col h-auto overflow-x-clip w-available sm:rounded-2xl -mt-safe-offset-12 bg-[rgb(var(--background-auto))]"},[H(oe,{data:r(s)},null,8,["data"]),p("div",ce,[t[2]||(t[2]=p("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom bg-focus"},null,-1)),p("div",{id:"navbar",class:N(["fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-slate-light-11 dark:bg-slate-dark-1 top-0 pt-safe-offset-4 transition-all duration-200",{"opacity-0 pointer-events-none":!k.value,"opacity-100 pointer-events-auto":k.value}])},[t[1]||(t[1]=p("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-all duration-200 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),p("button",{onClick:q,class:"z-30 flex h-10 w-11 items-center justify-center rounded-md"},[H(X,{icon:"arrowLeft"})]),p("div",{id:"navText",class:N(["pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-all duration-200 w-[70%] overflow-clip text-xl",{"opacity-0 pointer-events-none":!k.value,"opacity-100 pointer-events-auto":k.value}]),innerHTML:r(Y)(((e=r(s))==null?void 0:e.name)??"Songs you like","text-xs line-clamp-1")},null,10,de)],2),(u(),L(re,{key:(o=r(s))==null?void 0:o.id,data:r(s),filter:c.value,onFilterChange:t[0]||(t[0]=l=>c.value=l)},null,8,["data","filter"])),p("div",fe,[(u(),L(le,{ref_key:"sortHeader",ref:b,key:(i=r(s))==null?void 0:i.id})),(u(!0),E(Z,null,ee(S.value,(l,d)=>(u(),L(ne,{key:l.id+(l==null?void 0:l.favorite),data:l,displayList:S.value,index:d},null,8,["data","displayList","index"]))),128))])])],512)):U("",!0)]}),_:1},512)]),_:1}))}});export{he as default};
