import{aG as D,bc as K,e3 as j,az as N,c8 as q,a_ as P,aM as G,L as S,ax as O,aV as U,cg as A,K as g,d0 as H,j as u,o as l,a7 as T,x as V,aI as n,bP as J,a as b,c as d,bm as Q,C as h,ct as f,bf as $,h as y,F as x,w as z,e4 as W,bO as X}from"./index-CA89l6Id.js";import{_ as Y}from"./MediaCard.vue_vue_type_script_setup_true_lang-CSudVufb.js";import{_ as Z}from"./PersonCard.vue_vue_type_script_setup_true_lang-D8ZgvVHw.js";import{_ as ee,a as se}from"./EmptyCard.vue_vue_type_script_setup_true_lang-DC4tE7pW.js";import"./CardIndicator.vue_vue_type_script_setup_true_lang-BQdlJmJU.js";import"./NoResultImage.vue_vue_type_script_setup_true_lang-idXvcED1.js";const oe="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",ne="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",pe=D({__name:"Mobile",setup(te){var M;const p=K(),{data:t,fetchNextPage:k,hasNextPage:w,isError:le}=j({queryKey:["libraries",(M=p.params.id??p.name)==null?void 0:M.split("&").at(0)],limit:20,keepForever:!0});N(()=>{q(),P(null),G(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),S(t,s=>{s&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const F=O(()=>{var s,o,i,r,m,a;return U.value&&((i=(o=(s=t.value)==null?void 0:s.pages)==null?void 0:o[0])==null?void 0:i.data[0].media_type)!=="person"&&((a=(m=(r=t.value)==null?void 0:r.pages)==null?void 0:m[0])==null?void 0:a.data[0].media_type)!=="genres"});A(()=>{stop(),P(null)});const C=g(),E=g();N(()=>{var s,o;E.value=p.params.id??p.name,w.value&&(((o=(s=t==null?void 0:t.value)==null?void 0:s.pages)==null?void 0:o.length)??0)<50&&k(),document.addEventListener("scrollToDiv",i=>{var r;(r=C.value)==null||r.scrollTo({top:i.detail.top-100,behavior:"smooth"})})}),H(()=>{document.dispatchEvent(new Event("indexer"))}),S(t,s=>{var o;s&&w.value&&((o=s==null?void 0:s.pages)==null?void 0:o.length)<50&&k()});const L=g(),R=g(),v=(s,o)=>{L.value=o,R.value.show(s)};return(s,o)=>(l(),u(n(X),null,{default:T(()=>[V(n(J),{fullscreen:!0,class:"ion-padding",style:{"--padding-bottom":"0"}},{default:T(()=>{var i;return[o[0]||(o[0]=b("div",{class:"fixed top-0 pt-safe w-full bg-slate-light-1 dark:bg-slate-dark-3 z-1199"},null,-1)),b("div",{ref_key:"lib",ref:C,class:"pt-safe-offset-10 flex h-auto w-full pr-8 overflow-auto scroll-container"},[(l(),d("div",{class:h(["z-0 flex flex-col gap-4 rounded-3xl border-0 w-available scrollbar-none border-auto-3",{"pb-2":n(f)&&n($),"children:pb-4 sm:children:pb-3":!n(f)&&n($)}]),key:(i=n(Q).currentRoute.value.params)==null?void 0:i.id},[b("div",{class:h(`grid w-full gap-4 scroll-smooth music-showing:pb-0 pl-1 py-4 ${F.value?oe:ne}`)},[n(t)?(l(!0),d(x,{key:0},z(n(t).pages??[],(r,m)=>{var a,B,I;return l(),d(x,{key:m},[r.data.length>0?(l(!0),d(x,{key:0},z(r.data??[],(e,_)=>(l(),d(x,null,[(e==null?void 0:e.media_type)==="tv"||(e==null?void 0:e.media_type)=="movie"||(e==null?void 0:e.media_type)=="collection"||(e==null?void 0:e.media_type)=="specials"?(l(),u(Y,{key:e.id,data:e,onContextMenu:c=>v(c,e),index:_},null,8,["data","onContextMenu","index"])):(e==null?void 0:e.media_type)==="person"?(l(),u(Z,{key:e.id+"_person",data:e,onContextMenu:c=>v(c,e),index:_},null,8,["data","onContextMenu","index"])):(e==null?void 0:e.media_type)==="genres"?(l(),u(ee,{key:e.id+"_genres",data:e,onContextMenu:c=>v(c,e),index:_},null,8,["data","onContextMenu","index"])):y("",!0)],64))),256)):((I=(B=(a=n(t).pages)==null?void 0:a[0])==null?void 0:B.data)==null?void 0:I.length)==0?(l(),u(se,{key:1})):y("",!0)],64)}),128)):y("",!0)],2)],2)),V(W,{id:E.value,class:h(["w-8 !-mt-4 pt-4 pb-4 mb-0 fixed right-0 bg-slate-light-1 dark:bg-slate-dark-3",{"h-available":!n(f),"h-inherit top-24":n(f)}])},null,8,["id","class"])],512)]}),_:1})]),_:1}))}});export{pe as default};
//# sourceMappingURL=Mobile-DsEFtjnR.js.map
