import{$ as K,a9 as U,f as G,w as R,d as $,aN as J,c as q,o as f,p as i,z as s,a0 as t,av as O,h as b,G as Q,j as u,bf as z,bg as g,bh as v,b as S,x as h,aA as W,F as X,q as Y,ay as Z,aD as tt,v as et,J as F,N as j,as as at}from"./vue-ionic-CemLi1Vc.js";import{u as st}from"./useServerClient-DRToBXwu.js";import{_ as L}from"./CoverImage.vue_vue_type_script_setup_true_lang-uHPDtGeK.js";import{_ as ot}from"./OptimizedIcon.vue_vue_type_script_setup_true_lang-BYv8nv5_.js";import{j as P,b9 as V,c as lt,ah as it,h as k,x as nt,t as rt,ar as ct,z as ut}from"./index-B3QUMSKn.js";import{_ as dt}from"./BigPlayButton.vue_vue_type_script_setup_true_lang-_6GGkceO.js";import{_ as ft}from"./MusicButton.vue_vue_type_script_setup_true_lang-BteJ4GOD.js";import{_ as pt}from"./TrackLinks.vue_vue_type_script_setup_true_lang-BvbLCA30.js";import{E as mt}from"./EqSpinner-Cbfef0Zn.js";import{M as B}from"./MediaLikeButton-C_DvAj3L.js";import{_ as bt}from"./Marquee.vue_vue_type_script_setup_true_lang-D2o9odE4.js";import{_ as _t}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-Dgtccx1h.js";import"./icons-BW5E66pf.js";import"./rxjs-BCp2L9Rn.js";import"./media-C2AqgyMX.js";import"./api-BBofn2cc.js";import"./swiper-D00Cnjmx.js";import"./useInfiniteServerClient-u0SoTP_O.js";import"./AppLogoSquare-0rsvao2E.js";import"./music-player-Ck3tZcPH.js";import"./primevue-BPlwQLS6.js";import"./PlayerIcon.vue_vue_type_script_setup_true_lang-CJ_07wpr.js";const xt={class:"w-available h-available absolute left-[202px] top-0 overflow-hidden bg-focus"},wt=["src"],vt={class:"flex justify-center w-available aspect-square my-8 ml-8 mr-16"},yt={key:0,class:"relative mb-8 flex w-full flex-1 flex-shrink-0 flex-col items-start justify-start gap-4 flex-grow-1 text-left"},ht=["innerHTML"],kt={key:1,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap"},gt={class:"flex items-center h-8 gap-2 self-stretch w-full text-xs font-medium text-left"},St={key:0,class:"flex gap-2"},Ct={key:1,class:"flex gap-2"},It={class:"flex gap-2 items-center justify-between w-full"},Tt=["data-index","data-id","onClick"],$t={class:"flex w-available overflow-clip items-end"},qt=K({__name:"Tv",setup(zt){const C=U(),{data:o}=st({path:C.fullPath,keepForever:!0});G(()=>{var a,e,n,l;(e=(a=o.value)==null?void 0:a.color_palette)!=null&&e.cover&&P((l=(n=o.value)==null?void 0:n.color_palette)==null?void 0:l.cover),setTimeout(()=>{const c=document.querySelector(".focusable");c&&c.focus()},100)}),R(o,a=>{var e,n;(e=a==null?void 0:a.color_palette)!=null&&e.cover&&P((n=a==null?void 0:a.color_palette)==null?void 0:n.cover),setTimeout(()=>{const l=document.querySelector(".focusable");l&&l.focus()},100)});const I=$(),M=$();J(()=>{setTimeout(()=>{const a=document.querySelector(".focusable");a&&a.focus()},100)});function A(a){var c;const e=a.target,n=((c=I.value)==null?void 0:c.getAttribute("data-index"))??0,l=e.querySelector(`[data-index="${n}"] .focusable`);l&&l.focus()}function D(a){var c;const e=a.target;I.value=e,e&&e.scrollIntoView({behavior:"smooth",block:"center"});const n=(c=e.closest("[data-id]"))==null?void 0:c.getAttribute("data-id"),l=e.querySelector(`[data-index="${n}"] .focusable`);l&&l.focus()}function N(a){var n,l;const e=a.target;if(a.key==="ArrowUp"){const d=((n=e.closest("ion-item"))==null?void 0:n.previousSibling).querySelector(".focusable");d&&(d.focus(),d.scrollIntoView({behavior:"smooth",block:"center"}))}else if(a.key==="ArrowDown"){const d=((l=e.closest("ion-item"))==null?void 0:l.nextSibling).querySelector(".focusable");d&&(d.focus(),d.scrollIntoView({behavior:"smooth",block:"center"}))}}function E(){ut(C.fullPath)}function H(a){var e;k.value||E(),rt.playTrack(a,((e=o.value)==null?void 0:e.tracks)??[]),ct()}return(a,e)=>(f(),q(t(at),null,{default:i(()=>[s(t(O),{fullscreen:!0},{default:i(()=>{var n,l,c,d;return[(f(),b("div",{key:(n=t(o))==null?void 0:n.id,class:"w-full h-full absolute left-0 top-0 bg-[#131314] pointer-events-none -z-10",style:Q(t(V)?`--color-focus: ${t(V)}`:"")},[u("div",xt,[u("img",{class:"w-available h-available absolute left-[-0.39px] top-[-0.39px] opacity-40 object-cover object-center",src:`${(l=t(lt))==null?void 0:l.serverBaseUrl}${((c=t(o))==null?void 0:c.backdrop)??((d=t(o))==null?void 0:d.cover)}`,alt:""},null,8,wt),e[5]||(e[5]=u("div",{class:"w-[150vw] h-[150vw] absolute left-[-30%] bottom-[-50%]",style:{background:`radial-gradient(
                closest-side,
                rgba(19, 19, 20, 0.1) 0%,
                rgba(19, 19, 20, 1) 70.73974609375%
              )`}},null,-1))])],4)),s(t(z),null,{default:i(()=>[s(t(g),{class:"ion-align-items-end"},{default:i(()=>[s(t(v),{size:"3"},{default:i(()=>{var m,r,_,p,x,w,y,T;return[u("div",vt,[s(L,{data:t(o),alt:(m=t(o))==null?void 0:m.name,class:"w-auto h-full aspect-square"},null,8,["data","alt"])]),(r=t(o))!=null&&r.name?(f(),b("div",yt,[t(o).name.length>50?(f(),b("div",{key:0,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap",innerHTML:t(it)(((_=t(o))==null?void 0:_.name)??"Songs you like","text-xs line-clamp-1")},null,8,ht)):(f(),b("p",kt,h((p=t(o))==null?void 0:p.name),1)),u("div",gt,[(x=t(o))!=null&&x.type?(f(),b("span",St,[u("span",null,h((w=t(o))==null?void 0:w.type.replace(/s$/u,"").toTitleCase()),1)])):S("",!0),(y=t(o))!=null&&y.tracks?(f(),b("span",Ct,[e[6]||(e[6]=u("span",null,"â€¢",-1)),u("span",null,h((T=t(o))==null?void 0:T.tracks.length)+" "+h(a.$t("tracks")),1)])):S("",!0)]),u("div",It,[s(B,{data:t(o)},null,8,["data"]),s(dt,{data:t(o),class:"w-12 h-12 ml-auto"},null,8,["data"])])])):S("",!0)]}),_:1}),s(t(v),{ref_key:"scrollContainer",ref:M,size:"6",tabindex:"0",class:"w-full h-available overflow-auto scroll-smooth",onFocus:e[4]||(e[4]=m=>A(m))},{default:i(()=>[s(t(W),{mode:"md",lines:"none"},{default:i(()=>{var m;return[(f(!0),b(X,null,Y((m=t(o))==null?void 0:m.tracks,(r,_)=>(f(),q(t(Z),{key:r.id,tabindex:"-1",mode:"md",class:"group/track focus-within:bg-white/4 rounded-md overflow-clip"},{default:i(()=>[s(t(z),null,{default:i(()=>[s(t(g),{"data-index":_,"data-id":r.id,tabindex:"-1",class:"items-center !rounded-md !overflow-clip"},{default:i(()=>[s(t(v),{size:"2",tabindex:"-1"},{default:i(()=>[u("button",{tabindex:"0","data-index":_,"data-id":r.id,class:"focusable flex justify-center w-full aspect-video focus:outline outline-focus outline-2 outline-offset-2 mr-2 overflow-clip",onFocus:e[0]||(e[0]=p=>D(p)),onClick:p=>H(r)},[s(L,{data:r,alt:r.name,class:"w-auto h-full aspect-square"},null,8,["data","alt"])],40,Tt)]),_:2},1024),s(t(v),{size:"8",tabindex:"-1",class:"my-auto mt-2"},{default:i(()=>[s(t(tt),{tabindex:"-1"},{default:i(()=>{var p,x,w;return[u("div",$t,[u("div",{class:et(["flex items-center justify-center h-full aspect-square overflow-clip transition-width duration-200",{"w-0":((p=t(k))==null?void 0:p.id)!==r.id,"w-6 mr-1":((x=t(k))==null?void 0:x.id)===r.id}])},[s(mt,{playing:t(nt)},null,8,["playing"])],2),s(bt,{playing:!!((w=t(k))!=null&&w.id),text:r.name,class:"!w-[calc(100%-30px)] text-auto-12 children:leading-none w-available overflow-clip"},null,8,["playing","text"])]),s(pt,{id:r.id,data:r.artist_track,type:"artists",suffix:"track",onKeydown:[e[1]||(e[1]=F(j(()=>{},["prevent"]),["up"])),e[2]||(e[2]=F(j(()=>{},["prevent"]),["down"]))],onKeyup:e[3]||(e[3]=y=>N(y))},null,8,["id","data"])]}),_:2},1024)]),_:2},1024),s(t(v),{size:"2",tabindex:"-1",class:"opacity-0 group-focus-within/track:opacity-100 -ml-2"},{default:i(()=>[s(t(g),{tabindex:"-1",class:"flex flex-nowrap"},{default:i(()=>[s(B,{data:r},null,8,["data"]),s(ft,{label:"",tabindex:"0",onclick:()=>{},class:"!bg-transparent mr-2"},{default:i(()=>[s(ot,{icon:"menuDotsHorizontal",class:"text-white"})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1032,["data-index","data-id"])]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1},512)]),_:1})]),_:1})]}),_:1})]),_:1}))}}),te=_t(qt,[["__scopeId","data-v-b04b2633"]]);export{te as default};
