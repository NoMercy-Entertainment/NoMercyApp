import{d as a,B as f,ap as g,w as v,aR as R}from"./vue-ionic-D4s4ExYp.js";import{b5 as b,c as S,q as V}from"./index-D29s6-I8.js";import{b8 as $}from"./vendor-Dgtccx1h.js";const c=a(!1),p=a("video"),t=a(""),h=a([]),_=f(()=>h.value),j=g(t,700);v(j,e=>{var u,m;if(e===""){h.value=[];return}c.value=!0;const s=`${(u=S.value)==null?void 0:u.serverBaseUrl}/api/v1/music/search?query=${e}`;fetch(s,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(m=V.value)==null?void 0:m.accessToken}`}}).then(i=>i.json()).then(i=>{h.value=i.data,c.value=!1})});const o=a(""),n=a(!1),r=a([]),q=f(()=>r.value),y=g(o,700),l=a(1);v(y,e=>{if(e===""){r.value=[];return}n.value=!1,c.value=!0,l.value=1;const s=`https://api.themoviedb.org/3/search/multi?api_key=${b}&language=${$.language}&query=${e}&page=${l.value}&include_adult=false`;fetch(s).then(u=>u.json()).then(u=>{r.value=u.results,n.value=u.total_pages>1,c.value=!1})});function T(){l.value+=1;const e=`https://api.themoviedb.org/3/search/multi?api_key=${b}&language=${$.language}&query=${y.value}&page=${l.value}&include_adult=false`;fetch(e).then(s=>s.json()).then(s=>{r.value=[...r.value,...s.results],s.results.length===0?n.value=!1:n.value=s.total_pages>l.value})}const k=a(null);R(k,([{isIntersecting:e}],s)=>{e&&T()});const x=a(),d=a("");f(()=>p.value==="video"?q.value:_.value);v(p,e=>{e==="video"?(t.value="",o.value=d.value):(o.value="",t.value=d.value)});v(d,e=>{p.value==="video"?(o.value=e,t.value=""):(o.value="",t.value=e)});export{_ as a,p as b,x as c,d,T as f,n as h,t as m,c as s,q as v};
