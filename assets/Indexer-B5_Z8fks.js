import{C as T,Et as q,G as z,J as i,K as I,S as _,T as u,Tt as r,X as j,c as w,ct as P,g as h,gt as k,j as Z,kt as y,x as E}from"./i18n-Cs-AFcrY.js";import{I as $,P as B,j as N}from"./vue-core-CKeWI2Kt.js";import{$r as U,Ui as b,k as n,v as D}from"./index-yTLdIHun.js";import{n as G,t as g}from"./scrollHandlers-BPR07BAE.js";w();var f=k(!1);const ee=E(()=>f.value);function M(s){f.value=s}var Q=k([]);const V=E(()=>{const s=new Set;return Q.value?.forEach(o=>{const l=o.props?.data?.title||o.props?.data?.name||o.props?.name||"";if(l){const c=l.charAt(0).toUpperCase();/[A-Z0-9]/.test(c)?s.add(c):s.add("#")}}),s});var m=f;w();B();var F={class:"flex-shrink-0 flex-grow-0 text-center text-xs sm:text-base font-semibold leading-none"},H=["data-indexer","onClick"],J={class:"flex-shrink-0 flex-grow-0 text-center text-xs sm:text-base font-semibold leading-none"},K=Z({__name:"Indexer",setup(s){const o=["Libraries","Library","Collections","Albums","Artists","Music Genres"],l=[new RegExp("music/albums"),new RegExp("music/artists"),new RegExp("libraries/[a-zA-Z0-9]+/letter/[a-zA-Z0-9_]"),new RegExp("music/genres/letter/[a-zA-Z0-9_]")];function c(e){return o.some(a=>e.startsWith(a))}function d(e){return l.some(a=>e.match(a))}const L=$();function p(){setTimeout(()=>{document.querySelector("[indexer]")?.querySelectorAll("[data-indexer]").forEach(e=>{const a=e.dataset.indexer??"";let t;a==="#"?t=document.querySelector?.("[data-scroll]"):t=document.querySelector?.(`[data-scroll='scroll_${a}']`);const v=!!t,R=d(n.currentRoute.value.path),A=V.value.has(a);v||R||A?e.classList.remove("opacity-20","!cursor-not-allowed"):e.classList.add("opacity-20","!cursor-not-allowed")})},500)}function S(e){G(e),document.dispatchEvent(new CustomEvent("scrollToLetter",{detail:{letter:e}}))}function C(){document.querySelector("[indexer]")?.querySelectorAll("[data-indexer]").forEach(e=>{e.classList.add("opacity-20","!cursor-not-allowed")})}function x(e){M(c(e)),p()}return n.afterEach(e=>{setTimeout(()=>{x(e.name??e.path)},150)}),n.beforeEach(()=>{d(n.currentRoute.value.path)||C()}),z(()=>{setTimeout(()=>{x(n.currentRoute.value.name??n.currentRoute.value.path)},150),document.addEventListener("indexer",p),document.addEventListener("keydown",g)}),I(()=>{document.removeEventListener("indexer",p),document.removeEventListener("keydown",g)}),(e,a)=>(i(),u("div",{class:q([{"w-8 opacity-100":r(m),"w-0 opacity-0 translate-x-4 pointer-events-none!":!r(m),"sm:ml-2":!r(b)&&r(m),"bottom-0":r(b)},"z-0 h-available sm:h-available flex flex-col items-center justify-between self-stretch overflow-clip transition-[width,opacity,transform] duration-200 sm:-translate-x-3 pt-2 text-surface-12"]),indexer:""},[(i(!0),u(h,null,j(r(U)("#","Z"),t=>(i(),u(h,{key:t},[d(r(L).path)?(i(),T(r(N),{key:0,"data-indexer":t,to:`${t.replace("#","_")}`,class:"pointer-events-auto relative flex p-1 size-6 sm:size-6 aspect-square rounded-lg overflow-clip cursor-pointer flex-col items-center justify-center hover:bg-surface-5",tabindex:"-1"},{default:P(()=>[_("p",F,y(t),1)]),_:2},1032,["data-indexer","to"])):(i(),u("button",{key:1,"data-indexer":t,class:"pointer-events-auto relative flex p-1 size-6 sm:size-6 aspect-square rounded-lg overflow-clip cursor-pointer flex-col items-center justify-center hover:bg-surface-5/11",tabindex:"-1",onClick:v=>S(t)},[_("p",J,y(t),1)],8,H))],64))),128))],2))}}),te=D(K,[["__scopeId","data-v-b5007d15"]]);export{m as n,te as t};
