import{I as T,Z as V,E as y,b1 as D,aa as b,a7 as F,w as k,C as z,a0 as K,bM as L,l as d,ci as j,d as n,o,s as m,j as q,K as t,bu as U,a4 as C,c as l,n as w,a2 as g,a3 as f,a as Z,F as c,h as E,b as M,bh as A}from"./index-C1DjUpiP.js";import{u as G}from"./useInfiniteServerClient-ARVV4sGq.js";import{_ as H}from"./NMCard.vue_vue_type_script_setup_true_lang-DyiXnuGJ.js";import{_ as J}from"./PersonCard.vue_vue_type_script_setup_true_lang-B0Q0l6rz.js";import{_ as O,a as Q}from"./EmptyCard.vue_vue_type_script_setup_true_lang-DQaLubiK.js";import{_ as W}from"./ScrollContainer.vue_vue_type_script_setup_true_lang-PwHXwbTN.js";import{_ as X}from"./NotFound.vue_vue_type_script_setup_true_lang-DuXeR_wh.js";import"./useBaseQuery-juBGMRNQ.js";import"./useQueryClient-OkkyraFc.js";import"./contextMenuItems-BjWjf7WP.js";import"./musicPlaylists-DPgttUCi.js";import"./TMDBImage.vue_vue_type_script_setup_true_lang-BnMxpgRt.js";import"./AppLogoSquare-DBIPgV3M.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./CardIndicator.vue_vue_type_script_setup_true_lang-Cq-Klt6y.js";import"./index-BZgGgbsZ.js";import"./OptimizedIcon.vue_vue_type_script_setup_true_lang-D4l8g0_V.js";import"./NoResultImage.vue_vue_type_script_setup_true_lang-uabLHaIR.js";const Y="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",ee="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",ye=T({__name:"Desktop",setup(te){const i=V(),{data:r,fetchNextPage:_,hasNextPage:v,isError:$}=G({queryKey:["libraries",i?.params.id??i.name],limit:20,keepForever:!0});y(()=>{D(),b(null),F(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),k(r,a=>{a&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const B=z(()=>{const a=r.value?.pages?.[0]?.data?.[0];return a&&K.value&&a.media_type!=="person"&&a.media_type!=="genres"});L(()=>{stop(),b(null)});const I=d(),N=d();y(()=>{N.value=i.params.id??i.name,v.value&&(r?.value?.pages?.length??0)<50&&_(),document.addEventListener("scrollToDiv",a=>{I.value?.scrollTo({top:a.detail.top-100,behavior:"smooth"})})}),j(()=>{document.dispatchEvent(new Event("indexer"))}),k(r,a=>{a&&v.value&&a?.pages?.length<50&&_()});const P=d(),R=d();function u(a,x){P.value=x,R.value.show(a)}return(a,x)=>(o(),n(t(A),null,{default:m(()=>[q(t(U),{fullscreen:!0},{default:m(()=>[t($)&&!t(r)?.pages?(o(),n(X,{key:0})):(o(),n(W,{key:1,id:t(C).currentRoute.value.fullPath,"auto-hide":!0,static:!0},{default:m(()=>[(o(),l("div",{ref:"containerRef",key:t(C).currentRoute.value.params?.id,class:w(["z-0 flex flex-col gap-4 rounded-3xl border-0 p-4 w-available scrollbar-none border-auto-3 transform-gpu will-change-auto",{"pb-24":t(g)&&!t(f),"pb-40":t(g)&&t(f),"children:pb-4 sm:children:pb-3":!t(g)&&t(f)}])},[Z("div",{class:w(`grid w-full gap-4 scroll-smooth music-showing:pb-0 whitespace-pre ${B.value?Y:ee}`)},[(o(!0),l(c,null,E(t(r)?.pages??[],(h,S)=>(o(),l(c,{key:S},[h.data.length>0?(o(!0),l(c,{key:0},E(h.data??[],(e,p)=>(o(),l(c,null,[e?.media_type==="tv"||e?.media_type==="movie"||e?.media_type==="collection"||e?.media_type==="specials"?(o(),n(H,{key:e.id,data:e,index:p,onContextMenu:s=>u(s,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="person"?(o(),n(J,{key:`${e.id}_person`,data:e,index:p,onContextMenu:s=>u(s,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="genres"?(o(),n(O,{key:`${e.id}_genres`,data:e,index:p,onContextMenu:s=>u(s,e)},null,8,["data","index","onContextMenu"])):M("",!0)],64))),256)):t(r)?.pages?.[0]?.data?.length===0?(o(),n(Q,{key:1})):M("",!0)],64))),128))],2)],2))]),_:1},8,["id"]))]),_:1})]),_:1}))}});export{ye as default};
