import"./useInfiniteServerClient-DWIAv0eb.js";import{a as T,i as I,n as N,r as V,t as $}from"./TrackRow-B-HU4mSg.js";import{$l as p,Bl as D,Cl as y,Dl as k,Gr as F,Hl as s,Js as P,Ki as j,Kr as K,Sl as M,Wl as O,Xr as Y,Yi as q,ba as h,bc as A,bl as v,ec as G,gu as J,hl as U,hu as e,it as x,kl as W,ll as X,ni as u,qr as g,su as C,ti as d,tu as b,vu as z,xl as c,yc as Q,yl as Z,zl as R}from"./index-CjyZVKul.js";import"./DropdownMenu-BZnzMy70.js";import"./dist-DawBEq9R.js";import{t as ee}from"./useServerClient-_fzjGFz8.js";import{t as te}from"./ScrollContainer-Bx-VABEy.js";import"./MusicButton-BuJNwvCe.js";import"./BannerButton-D8f61kAt.js";import"./MediaLikeButton-B_RgcaKD.js";import"./Marquee-S6x0XVmQ.js";import"./BigPlayButton-BozDOcsa.js";import"./EqSpinner-C6nqJZbb.js";import{t as ae}from"./NotFound-sDjf24hl.js";import"./ShareButton-CUjS81Av.js";X();Q();var le={key:0,ref:"main",class:"flex flex-col w-available h-available sm:rounded-2xl"},re={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},se=W({__name:"Desktop",setup(oe){const f=A(),{data:t,isError:L}=ee({path:f.fullPath}),o=C([]),i=C(""),w=Z(()=>T({count:o.value?.length??0,getScrollElement:()=>F.value??null,estimateSize:()=>64,overscan:10}));p(t,a=>{a&&(j(a?.name??null),n(a?.tracks??[],u.value,d.value,i.value),g(a?.color_palette?.cover))}),p(d,a=>{n(t.value?.tracks??[],u.value,a,i.value)}),p(u,a=>{n(t.value?.tracks??[],a,d.value,i.value)}),p(i,a=>{n(t.value?.tracks??[],u.value,d.value,a)});function n(a,r,l,m){const S=q(a??[],r,l,Y);m===""?o.value=S:o.value=S?.filter(_=>_.name?.toLowerCase().includes(m?.toLowerCase?.())||_.artist_track?.some(H=>H.name.toLowerCase().includes(m?.toLowerCase?.()))||_.album_track?.[0]?.name.toLowerCase().includes(m?.toLowerCase?.()))??[]}R(()=>{t?.value?.tracks&&n(t?.value?.tracks??[],u.value,d.value,i.value),t.value?.color_palette?.cover&&g(t.value?.color_palette?.cover)}),D(()=>{document.getElementById("navbar")&&(document.getElementById("navbar").style.display="flex"),g(null),K(null)});const B=C();function E(){const r=B.value?.$el,l=r?.firstChild;!r||!l||(Math.ceil(r.getBoundingClientRect()?.top??500)<=67?(l.style.background="var(--color-theme-8)",r.style.color="white"):(l.style.background="",r.style.color=""))}return(a,r)=>(s(),c(e(G),null,{default:b(()=>[k(e(P),{fullscreen:!0,class:"flex"},{default:b(()=>[e(L)&&!e(t)?(s(),c(ae,{key:0})):(s(),c(te,{key:1,"auto-hide":!0,static:!0,onScroll:E},{default:b(()=>[!e(f).params.id||e(f).params.id&&e(t)?.id===e(f).params.id?(s(),y("div",le,[k(V,{data:e(t)},null,8,["data"]),v("div",re,[r[1]||(r[1]=v("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),(s(),c(I,{key:e(t)?.id,data:e(t),filter:i.value,onFilterChange:r[0]||(r[0]=l=>i.value=l)},null,8,["data","filter"])),v("div",{class:J([{"pb-24":e(h)&&!e(x),"pb-40":e(h)&&e(x),"pb-4 sm:pb-4":!e(h)&&e(x)},"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-3 flex-grow-1 gap-0.5 sm:p-4"])},[(s(),c(N,{key:e(t)?.id,ref_key:"sortHeader",ref:B})),v("div",{style:z({height:`${w.value.value.getTotalSize()}px`,width:"100%",position:"relative"})},[(s(!0),y(U,null,O(w.value.value.getVirtualItems(),l=>(s(),y("div",{key:o.value[l.index]?.id+o.value[l.index]?.favorite,style:z({position:"absolute",top:0,left:0,width:"100%",height:`${l.size}px`,transform:`translateY(${l.start}px)`})},[k($,{data:o.value[l.index],"display-list":o.value,index:l.index},null,8,["data","display-list","index"])],4))),128))],4)],2)])],512)):M("",!0)]),_:1}))]),_:1})]),_:1}))}}),Ce=se;export{Ce as default};
