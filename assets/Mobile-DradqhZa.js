import{C as x,Ct as t,Et as H,J as O,K as f,S as i,T as z,_t as Y,c as q,g as G,it as _,j as J,k as h,mt as m,ot as W,w as K,wt as I,x as n}from"./i18n-Rm1NkeNf.js";import{ya as U}from"./ionic-vX7GXDhi.js";import{C as X,R as D,U as Q,W as Z,_ as ee}from"./vue-core-D-3YrIBp.js";import"./primevue-DkuV93HA.js";import"./query-BPfDyGC_.js";import{t as te}from"./esm-CJ_npMp9.js";import{Rr as ae,Vn as R,Wn as re,Xn as g,Yn as b,b as se,hi as oe,k as le}from"./index-CqFEqgEJ.js";import"./DropdownMenu-_T84SW44.js";import"./useInfiniteServerClient-BxfXw7oy.js";import{t as ie}from"./useServerClient-FaU9Jlhr.js";import"./MusicButton-ZcDOxiPS.js";import"./BannerButton-BuHNSZDg.js";import"./MediaLikeButton-g5WdM4AR.js";import{t as ne}from"./Marquee-BXQW499G.js";import"./TrackLinks-5xU2IwR3.js";import"./BigPlayButton-Cs24oWR5.js";import"./EqSpinner-CtsnOoF0.js";import{t as ue}from"./NotFound-mukvUEEf.js";import"./ShareButton-_VkSOhEu.js";import{i as ce,n as de,r as fe,t as pe}from"./TrackRow-C5eFxn6M.js";q();Q();var me={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},ve={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},he=J({__name:"Mobile",setup(ye){const s=Z(),k=n(()=>s.path.startsWith("/music/album")),w=n(()=>s.path.startsWith("/music/artist")),C=n(()=>s.path.startsWith("/music/playlists")),S=n(()=>s.path.startsWith("/music/tracks")),T=n(()=>s.path.startsWith("/music/genres")),V=n(()=>k.value?"album":w.value?"artist":C.value?"playlist":S.value?"favorite":T.value?"genre":"unknown"),P=n(()=>String(s.params.id??"")),{data:a,isError:M}=ie({path:s.fullPath}),$=m(null),u=Y([]),p=m("");_(a,e=>{e&&(oe(e?.name??null),y(e?.tracks??[],g.value,b.value,p.value),R(e?.color_palette?.cover))},{immediate:!0}),_(b,e=>{y(a.value?.tracks??[],g.value,e,p.value)}),_(g,e=>{y(a.value?.tracks??[],e,b.value,p.value)}),_(p,e=>{y(a.value?.tracks??[],g.value,b.value,e)});function y(e,l,r,o){const c=ae(e??[],l,r,re);o===""?u.value=c:u.value=c?.filter(d=>d.name?.toLowerCase().includes(o?.toLowerCase?.())||d.artist_track?.some(A=>A.name.toLowerCase().includes(o?.toLowerCase?.()))||d.album_track?.[0]?.name.toLowerCase().includes(o?.toLowerCase?.()))??[]}D(()=>{a.value?.color_palette?.cover&&R(a.value?.color_palette?.cover)});function j(){le.back()}const v=m(!1),F=m(!1),L=m(),B=m(),E=te(n(()=>{const e=B.value?.$el??null;return{count:u.value?.length??0,getScrollElement:()=>e,estimateSize:()=>56,overscan:10,initialRect:{width:0,height:800}}}));function N(){const r=U("capacitor")?88:64,o=L.value?.$el,c=o?.firstChild;if(!o||!c)return;const d=o.getBoundingClientRect().top;v.value=d<=170,F.value=d<=160,d<=r?document.documentElement.classList.contains("scheme-dark")?c.style.background="hsl(from var(--color-theme-8) h s 23%)":(c.style.background="var(--color-theme-8)",o.style.color="white"):(c.style.background="",o.style.color="")}return(e,l)=>(f(),x(t(X),null,{default:W(()=>[h(t(ee),{ref_key:"container",ref:B,"scroll-events":!0,onIonScroll:N},{default:W(()=>[t(M)&&!t(a)?(f(),x(ue,{key:0})):!t(s).params.id||t(s).params.id&&t(a)?.id===t(s).params.id?(f(),z("div",{key:1,ref_key:"main",ref:$,class:"flex flex-col h-auto overflow-x-clip w-available sm:rounded-2xl -mt-6 text-surface-12"},[h(fe,{data:t(a)},null,8,["data"]),i("div",me,[l[2]||(l[2]=i("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),i("div",{id:"navbar",class:I([{"opacity-0 pointer-events-none":!v.value,"opacity-100 pointer-events-auto":v.value},"fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-surface-11 dark:bg-surface-1 top-0 pt-4 transition-all duration-200"])},[l[1]||(l[1]=i("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-all duration-200 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),i("button",{class:"z-30 flex h-10 w-11 items-center justify-center rounded-md",onClick:j},[h(se,{icon:"arrowLeft"})]),i("div",{id:"navText",class:I([{"opacity-0 pointer-events-none":!v.value,"opacity-100 pointer-events-auto":v.value},"pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-all duration-200 w-[70%] overflow-clip text-xl"])},[h(ne,{text:t(a)?.name},null,8,["text"])],2)],2),(f(),x(ce,{key:t(a)?.id,data:t(a),filter:p.value,onFilterChange:l[0]||(l[0]=r=>p.value=r)},null,8,["data","filter"])),i("div",ve,[(f(),x(de,{key:t(a)?.id,ref_key:"sortHeader",ref:L,"is-album-route":k.value,"is-artist-route":w.value,"is-playlists-route":C.value,"is-favorites-route":S.value,"is-genres-route":T.value},null,8,["is-album-route","is-artist-route","is-playlists-route","is-favorites-route","is-genres-route"])),i("div",{style:H({height:`${t(E).getTotalSize()}px`,width:"100%",position:"relative"})},[(f(!0),z(G,null,O(t(E).getVirtualItems(),r=>(f(),z("div",{key:u.value[r.index]?.id+u.value[r.index]?.favorite,style:H({position:"absolute",top:0,left:0,width:"100%",height:`${r.size}px`,transform:`translateY(${r.start}px)`})},[h(pe,{data:u.value[r.index],"display-list":u.value,index:r.index,"is-album-route":k.value,"is-artist-route":w.value,"is-playlists-route":C.value,"is-favorites-route":S.value,"is-genres-route":T.value,"route-type":V.value,"route-param-id":P.value},null,8,["data","display-list","index","is-album-route","is-artist-route","is-playlists-route","is-favorites-route","is-genres-route","route-type","route-param-id"])],4))),128))],4)])])],512)):K("",!0)]),_:1},512)]),_:1}))}}),$e=he;export{$e as default};
