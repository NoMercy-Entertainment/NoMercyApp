import{i as f,n as k,r as C,t as K}from"./routerHelper-Dv3PHaxJ.js";import{As as b,Cs as w,Gs as E,Ls as N,No as x,Po as I,Rs as S,Us as V,Zs as B,ac as m,dc as D,gc as l,i as O,jc as o,nc as v,qa as P,rc as R,sc as j,xo as F,zs as _}from"./index-DUsTkghB.js";w();x();var H={key:0,class:"grid w-available h-available place-items-center"},U=E({__name:"NMComponent",props:{path:{type:String,required:!1,default:void 0},options:{type:Object,required:!1,default:()=>({keepForever:!0,queryKey:f()})}},setup(y){const s=y,i=s.options.queryKey??f(),g=K({queryKey:i,path:s.path}),{data:t,isLoading:h}=C({queryKey:i,path:s.path}),{data:q,mutate:c}=k({queryKey:i,homeData:t}),n=P(),u=I();function d(){if(!t.value||!n.value)return;const e=t.value.filter(a=>a?.update?.when==="pageLoad")??[];c(e)}function L(){if(!t.value||!n.value)return;const e=t.value.filter(a=>a?.update?.when==="online")??[];c(e)}function p(e){if(!t.value||!n.value)return;const a=t.value.filter(r=>r?.id===e.detail.id)??[];c(a)}return v(()=>{document.addEventListener("mutateId",p),!(!t.value||u.name!=="Home"&&u.name!=="Libraries"&&u.name!=="Music Start")&&n.value&&d()}),R(()=>{document.removeEventListener("mutateId",p)}),l(n,e=>{e&&L()}),l(t,e=>{e&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),v(()=>{l(u,(e,a)=>{console.log("onIonViewWillEnter triggered",e.name),!(!t.value||e.name!==O.currentRoute.value.name||e.name!=="Home"&&e.name!=="Libraries"&&e.name!=="Music Start")&&n.value&&d()})}),(e,a)=>o(h)?(m(),_("div",H,[V(o(F),{class:"ion-padding",name:"crescent"})])):o(g)?S("",!0):(m(!0),_(b,{key:1},j(o(q)??o(t)??[],(r,M)=>(m(),N(D(r?.component),B({key:r.id,index:M},{ref_for:!0},r.props),null,16,["index"]))),128))}}),G=U;export{G as t};
