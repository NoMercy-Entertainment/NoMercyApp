import{Ct as q,K as z,S as A,T as k,U as N,W as V,Y as O,_t as U,c as Y,j,mt as D,w as K,wt as P}from"./i18n-Rm1NkeNf.js";import{pt as W,v as G,zn as J}from"./index-Dfm86O85.js";Y();var Q=["data-music"],X=j({__name:"ScrollContainer",props:{autoHide:{type:Boolean,default:!1},className:{type:String,required:!1,default:""},static:{type:Boolean,default:!0},frame:{type:Boolean,default:!1}},emits:["scroll"],setup(d){const m=d,E=U();function R(e){const t=e;E.value=t??void 0,m.static&&(J.value=t??void 0)}const i=D(),s=D();let l=null,o=null,a=null,c=null,v=!1,n=null;const f={containerH:0,scrollH:0,barH:0};function p(){const e=s.value;!n||!e||(f.containerH=n.clientHeight,f.scrollH=n.scrollHeight,f.barH=e.clientHeight)}function _(){const e=s.value;e&&(e.style.opacity="1")}function y(){if(v)return;const e=s.value;e&&(e.style.opacity="0")}function C(){o!==null&&clearTimeout(o),o=window.setTimeout(y,1200)}function h(){const e=i.value;if(!n||!e)return;const{containerH:t,scrollH:r,barH:u}=f;if(r<=t){y();return}const H=n.scrollTop,S=Math.ceil(t/r*t),M=u-S,T=r-t,$=T>0?H/T:0;e.style.height=`${S}px`,e.style.translate=`0 ${$*M}px`,_(),C()}function F(){l===null&&(l=requestAnimationFrame(()=>{l=null,h()}))}function L(){v=!0,_()}function w(){v=!1,C()}function x(e){e.preventDefault(),document.addEventListener("mousemove",g),document.addEventListener("mouseup",b)}function b(){document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",b)}function g(e){e.preventDefault();const t=i.value,r=s.value;if(!t||!r||!n)return;const u=r.getBoundingClientRect(),H=Math.min(Math.max(0,e.clientY-u.top),u.height)-t.clientHeight/2;n.scrollTop=(n.scrollHeight-n.clientHeight)*(H/(u.height-t.clientHeight))}function I(){B();const e=E.value,t=i.value;!e||!t||(n=e,e.scrollTop=0,p(),requestAnimationFrame(()=>{p(),h()}),a=new ResizeObserver(()=>{p(),h()}),a.observe(e),e.firstElementChild&&a.observe(e.firstElementChild),c=F,e.addEventListener("scroll",c,{passive:!0}),e.addEventListener("pointerenter",L),e.addEventListener("pointerleave",w),t.addEventListener("mousedown",x))}function B(){l!==null&&(cancelAnimationFrame(l),l=null),o!==null&&(clearTimeout(o),o=null),a&&(a.disconnect(),a=null),n&&(c&&n.removeEventListener("scroll",c),n.removeEventListener("pointerenter",L),n.removeEventListener("pointerleave",w)),n=null,c=null;const e=i.value;e&&e.removeEventListener("mousedown",x),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",b)}return N(()=>{m.static||I()}),V(()=>{m.static||B()}),(e,t)=>(z(),k("div",{ref:R,class:P([{"group/scrollContainer":!d.frame,"group/scrollContainer-frame":d.frame},"flex flex-1 h-available z-0 isolate overflow-auto will-change-scroll w-full flex-col scrollbar-none scroll-container text-surface-12"]),"data-music":q(W),tabindex:"1",onScroll:t[0]||(t[0]=r=>e.$emit("scroll",r))},[O(e.$slots,"default",{},void 0,!0),d.static?K("",!0):(z(),k("div",{key:0,ref_key:"refBar",ref:s,class:"group/bar absolute top-0 mr-1 z-10 h-available right-0 bottom-0 hidden rounded-full border-r-2 border-l-4 border-transparent w-3.5 hover:bg-surface-12/6 sm:flex scale-[100%_96%] transition-opacity duration-200","data-scrollbar":"",style:{opacity:"0"}},[A("span",{ref_key:"refHandle",ref:i,class:"scrollbar-handle absolute top-0 z-10 h-available right-0 bottom-0 hidden rounded-full border-r-2 border-l-4 border-transparent w-2.5 bg-surface-12/11 sm:flex scale-y-[105%]","data-scrollbar":"",draggable:"true"},null,512)],512))],42,Q))}}),te=G(X,[["__scopeId","data-v-2aff99d9"]]);export{te as t};
