{"version":3,"file":"Desktop-p47qdQX9.js","sources":["../../src/views/Setup/ServerOffline/Desktop.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport {onMounted, watch} from \"vue\";\nimport {IonPage, IonContent} from '@ionic/vue';\n\nimport type {LibrariesResponse} from \"@/types/api/base/library\";\n\nimport router from '@/router';\nimport useServerClient from \"@/lib/clients/useServerClient\";\nimport {setLibraries} from \"@/store/Libraries\";\n\nimport ExploreContainer from '@/components/ExploreContainer.vue';\nimport type {Playlist} from \"@/types/api/music/playlists\";\nimport {setMusicPlaylists} from \"@/store/musicPlaylists\";\nimport type {LogoResponse} from \"@/types/server\";\n\nconst {data: libraries, refetch} = useServerClient<LibrariesResponse[]>({\n  path: '/libraries',\n  refetchInterval: 10000,\n  queryKey: ['libraries'],\n});\n\nconst {data: playlists, refetch: refetchPlaylists} = useServerClient<Playlist[]>({\n  enabled: !!libraries.value,\n  path: '/music/playlists',\n  queryKey: ['playlists'],\n});\n\nconst { refetch: refetchScreensaver } = useServerClient<LogoResponse[]>({\n  enabled: !!libraries.value,\n  path: '/screensaver',\n});\n\nwatch(libraries, (value) => {\n  if (!value) return;\n  refetchPlaylists();\n  refetchScreensaver();\n\n  setLibraries(value);\n\n  if (value.length > 0) {\n    router.push({name: 'Home'});\n  }\n});\n\nwatch(playlists, (value) => {\n  if (!value) return;\n  setMusicPlaylists(value);\n});\n\nonMounted(() => {\n  if (!libraries.value) return;\n  if (libraries.value.length > 0) {\n    router.push({name: 'Home'});\n  }\n});\n\n</script>\n\n<template>\n  <ion-page>\n    <ion-content :fullscreen=\"true\">\n      <ExploreContainer name=\"Server offline\" />\n    </ion-content>\n  </ion-page>\n</template>\n"],"names":["libraries","refetch","useServerClient","playlists","refetchPlaylists","refetchScreensaver","watch","value","setLibraries","router","setMusicPlaylists","onMounted"],"mappings":"0LAeA,KAAM,CAAC,KAAMA,EAAW,QAAAC,CAAA,EAAWC,EAAqC,CACtE,KAAM,aACN,gBAAiB,IACjB,SAAU,CAAC,WAAW,CAAA,CACvB,EAEK,CAAC,KAAMC,EAAW,QAASC,CAAA,EAAoBF,EAA4B,CAC/E,QAAS,CAAC,CAACF,EAAU,MACrB,KAAM,mBACN,SAAU,CAAC,WAAW,CAAA,CACvB,EAEK,CAAE,QAASK,CAAmB,EAAIH,EAAgC,CACtE,QAAS,CAAC,CAACF,EAAU,MACrB,KAAM,cAAA,CACP,EAEK,OAAAM,EAAAN,EAAYO,GAAU,CACrBA,IACYH,EAAA,EACEC,EAAA,EAEnBG,EAAaD,CAAK,EAEdA,EAAM,OAAS,GACjBE,EAAO,KAAK,CAAC,KAAM,MAAA,CAAO,EAC5B,CACD,EAEKH,EAAAH,EAAYI,GAAU,CACrBA,GACLG,EAAkBH,CAAK,CAAA,CACxB,EAEDI,EAAU,IAAM,CACTX,EAAU,OACXA,EAAU,MAAM,OAAS,GAC3BS,EAAO,KAAK,CAAC,KAAM,MAAA,CAAO,CAC5B,CACD"}