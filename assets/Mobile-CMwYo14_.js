import{C as P,Ft as _,Gt as w,Ln as s,Rn as C,Rt as c,Tt as h,cn as m,i as I,kn as M,mt as l,qt as S,u as N,w as T,xn as d,yn as x,zt as v}from"./index-CJ3av9Nr.js";import"./dist-D2KbJ9bQ.js";import{t as B}from"./esm-BuMAAPtG.js";import"./esm-CHsjyJtd.js";import"./dist-C-vUBecy.js";import"./focus-visible-DPfccteu.js";import"./index5-DoEihQ4z.js";import"./client-wU_plCmB.js";import"./ionic-global-Dr2Ll5pB.js";import"./hardware-back-button-CHEiPn5H.js";import"./index3-DyhEBoCL.js";import"./helpers-WTIhTost.js";import"./index6-3cPFhgM2.js";import"./index8-_cfIjXvh.js";import"./keyboard-D6ipGNt8.js";import"./index2-DvhiMdzo.js";import"./ios.transition-CXaFvcuP.js";import"./keyboard2-D5yf7Lat.js";import"./md.transition-DZtzVTV5.js";import"./dir-DrmvtQ_Q.js";import"./ui-BSE92Oro.js";import"./client-CPKuC57Q.js";import{t as D}from"./currentServer-DQ7i6d_b.js";import"./config-BZ-AEJ_J.js";import"./core-xCqnf7Bb.js";import"./esm-DLDUH9kj.js";import{p as f}from"./global-Cds4NWlw.js";import"./esm-DcigU03k.js";import"./bundle-mjs-BeXi21kK.js";import{s as t}from"./user-Creb9Pvq.js";import"./serverClient-Jb_BGG0d.js";import{t as a}from"./router-c8xd29EB.js";import"./utils-Cpofav5o.js";import"./useBaseQuery-D_SazeaR.js";import"./useInfiniteServerClient-D_hphnUM.js";import{l as y}from"./SocketClient-KaSDTymP.js";import"./useQueryClient-C-VM74mz.js";import"./useQuery-CR36PjxI.js";import"./apiClient-2-R0Hhnf.js";import"./notifications-BNlqfMjP.js";import{c as U,i as V,l as A,r as L,y as z}from"./utils-DY83qGh1.js";import"./deviceInfo-CVfVbLsA.js";import"./auth-BpTUxzzw.js";import{s as p}from"./imageModal-CUXQ59UW.js";import{t as R}from"./useServerClient-DftYwK_V.js";import{a as F,i as j,n as q,o as E,r as G}from"./VideoPlayer-DD_X4Fia.js";import"./buttons-BrAf7pXX.js";import{t as O}from"./videoNoMercyConnectPlugin-BMNK07dQ.js";h();var H=S({__name:"Mobile",setup(J){const{data:n}=R({enabled:!t.value.features?.nomercyConnect}),e=M();function u(o){const i={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:o?.filter(r=>!!r.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:t.value?.accessToken||localStorage.getItem("access_token")||"",basePath:D.value?.serverBaseUrl,imageBasePath:"https://app.nomercy.tv/tmdb-images",forceTvMode:(l("android")||l("ios"))&&!l("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||l("capacitor"),renderAhead:100,disableAutoPlayback:t.value.features?.nomercyConnect};if(e.value=G("player1").setup(i),e.value?.once("back",()=>{history.state.back?a.back():a.replace("/")}),t.value.features?.nomercyConnect){const r=new O;e.value?.registerPlugin("videoNoMercyConnect",r),e.value?.usePlugin("videoNoMercyConnect")}const g=new j;e.value?.registerPlugin("desktopUI",g),e.value?.usePlugin("desktopUI");const b=new F;if(e.value?.registerPlugin("autoSkip",b),e.value?.usePlugin("autoSkip"),!t.value.features?.nomercyConnect){const r=new E;e.value?.registerPlugin("sync",r),e.value?.usePlugin("sync")}const k=new q;e.value?.registerPlugin("octopus",k),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?a.back():a.replace("/")}),e.value?.on("dispose",async()=>{await A(),await L(),history.state.back?a.back():await a.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{p(!0)}),e.value?.on("pause",()=>{p(!1)}),e.value?.on("ready",async()=>{await U(),await z(),await V(),y.stop()}),e.value?.on("item",()=>{e.value?.play()}),B.addListener("backButton",()=>{e.value?.emit("back-button-hyjack"),e.value?.dispose()})}return x(n,o=>{o?.length&&u(o)}),P(()=>{y.stop(),t.value.features?.nomercyConnect?u():n.value?.length&&u(n.value)}),T(()=>{e.value?.dispose(),p(!1)}),(o,i)=>(m(),v(s(N),null,{default:d(()=>[w(s(I),{fullscreen:!0},{default:d(()=>[(m(),v(_,{to:"body"},[c("div",{class:C([{"mb-28":s(f),"mb-0":!s(f)},"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"])},[...i[0]||(i[0]=[c("div",{id:"player1",class:"group nomercyplayer"},null,-1)])],2)]))]),_:1})]),_:1}))}}),qe=H;export{qe as default};
