import{$ as E,j as z,h as d,o as n,b as p,c as w,i as r,v as x,F as b,p as B,H as P,T as R,y as j,w as T,d as D,f as H,aM as M,l as K,a0 as A,au as O,ar as W}from"./vue-ionic-BZKAFNsD.js";import{u as G}from"./useServerClient-BzSQq2KN.js";import{u as J}from"./useInfiniteServerClient-I3-aay_P.js";import{_ as Q}from"./ContentRating.vue_vue_type_script_setup_true_lang-Dgh3ufaf.js";import{_ as X}from"./TMDBImage.vue_vue_type_script_setup_true_lang-C5BhHIo6.js";import"./vendor-B4CMB5r9.js";import"./icons-BW5E66pf.js";import"./rxjs-BCp2L9Rn.js";import"./media-C2AqgyMX.js";import"./api-BBofn2cc.js";import"./swiper-D00Cnjmx.js";import"./index-75Fk9VeO.js";import"./music-player-4pEGVRj1.js";import"./AppLogoSquare-_rwNdwCY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={key:0,"data-row":"",class:"grid grid-rows-[auto_1fr] grid-cols-7 relative justify-start flex-1 w-full gap-3 mb-2"},Z={class:"row-start-1 col-span-7 pointer-events-none font-semibold font-3xl"},ee=["src"],L=E({__name:"TvCarousel2",props:{data:{type:Array,required:!0},title:{type:String,required:!0},handleFocus:{type:Function,required:!0},handleDown:{type:Function,required:!0},handleUp:{type:Function,required:!0},suffix:{type:String,required:!1,default:""}},setup(a){return(h,i)=>{var f;const y=z("RouterLink");return n(),d(b,null,[a.data.length?(n(),d("div",Y,[r("h3",Z,x(a.title),1),(n(!0),d(b,null,B(a.data.slice(0,7),(l,v)=>(n(),w(y,{key:l.id,to:`${l.link}${a.suffix}`,"data-card":l.id,"data-index":v,class:"row-start-2 w-full h-auto rounded-xl bg-cover aspect-poster focus:scale-105 focus:outline outline-[2.2px] outline-white transition-transform duration-200 scroll-mb-20 scroll-mt-12 snap-center snap-mandatory",style:P(`background-image: url('https://app.nomercy.tv/tmdb-images${l.poster}?width=300&type=avif&aspect_ratio=null')`),onFocus:c=>a.handleFocus(c,l),onKeydown:i[0]||(i[0]=c=>a.handleDown(c)),onKeyup:i[1]||(i[1]=c=>a.handleUp(c))},null,8,["to","data-card","data-index","style","onFocus"]))),128))])):p("",!0),(n(),w(R,{to:".image-preload-container"},[(n(!0),d(b,null,B((f=a.data)==null?void 0:f.slice(0,7),l=>(n(),d("img",{key:l.id,src:`https://app.nomercy.tv/tmdb-images${l.backdrop}?width=2160&type=avif&aspect_ratio=null`,width:"0",height:"0",loading:"eager",alt:"",class:"absolute"},null,8,ee))),128))]))],64)}}}),te={class:"w-available h-available absolute left-[250px] top-0 overflow-hidden bg-black"},ae={class:"flex flex-col justify-start items-start w-[484px] relative left-[58px] top-20 gap-7"},le={class:"flex flex-col justify-start items-start self-stretch relative gap-5"},se={class:"flex flex-col justify-start items-start w-full relative gap-0"},ne={class:"flex items-center h-8 gap-2 self-stretch w-full opacity-60 text-xs font-medium text-left text-[#c4c7c5]"},oe={key:1,class:"flex gap-2"},re={key:2,class:"flex gap-2"},ie={class:"self-stretch w-full text-xl text-left mt-2"},ue={class:"line-clamp-4 text-sm -mt-4"},ce=E({__name:"TvHeader",props:{selected:{type:Object,required:!1}},setup(a){return(h,i)=>{var y,f,l,v,c,k,$,g,S,q,e,t;return n(),d("div",{key:(y=a.selected)==null?void 0:y.id,class:"w-full h-full absolute left-0 top-0 bg-[#131314]"},[r("div",te,[j(X,{class:"w-available h-available absolute left-[-0.39px] top-[-0.39px] object-cover",path:(f=a.selected)==null?void 0:f.backdrop,size:1080,alt:(l=a.selected)==null?void 0:l.title},null,8,["path","alt"]),i[0]||(i[0]=r("div",{class:"w-available h-available absolute left-[-0.39px] top-[-0.39px]"},null,-1)),i[1]||(i[1]=r("div",{class:"w-[150vw] h-[150vw] absolute left-[-30%] bottom-[-50%]",style:{background:`radial-gradient(
            closest-side,
            rgba(19, 19, 20, 0.1) 0%,
            rgba(19, 19, 20, 1) 70.73974609375%
          )`}},null,-1))]),r("div",ae,[r("div",le,[r("div",se,[r("div",ne,[(v=a.selected)!=null&&v.content_ratings?(n(),w(Q,{key:0,size:4,ratings:(c=a.selected)==null?void 0:c.content_ratings},null,8,["ratings"])):p("",!0),(k=a.selected)!=null&&k.year?(n(),d("span",oe,[i[2]||(i[2]=r("span",null,"•",-1)),r("span",null,x(($=a.selected)==null?void 0:$.year),1)])):p("",!0),((g=a.selected)==null?void 0:g.have_items)??!1?(n(),d("span",re,[i[3]||(i[3]=r("span",null,"•",-1)),r("span",null,x((S=a.selected)==null?void 0:S.have_items)+" "+x((q=a.selected)!=null&&q.have_items?h.$t("Episodes"):""),1)])):p("",!0)]),r("p",ie,x((e=a.selected)==null?void 0:e.title),1)]),r("div",ue,x((t=a.selected)==null?void 0:t.overview),1)])])])}}}),de={class:"w-screen h-screen relative overflow-hidden bg-[#131314]"},De=E({__name:"Tv",setup(a){const{data:h,fetchNextPage:i,hasNextPage:y}=J({path:"/",queryKey:["home"]});T(h,()=>{y&&i()});const{data:f}=G({path:"userdata/continue",queryKey:["continue"],refetchInterval:1e3*60*5}),l=D();T(f,e=>{var t;e&&(l.value=(t=e==null?void 0:e.filter(s=>s.id))==null?void 0:t.at(0))}),H(()=>{var e,t;l.value=(t=(e=f.value)==null?void 0:e.filter(s=>s.id))==null?void 0:t.at(0)}),M(()=>{var e,t;l.value=(t=(e=f.value)==null?void 0:e.filter(s=>s.id))==null?void 0:t.at(0),setTimeout(()=>{var u;const s=document.querySelector(`[data-card="${(u=l.value)==null?void 0:u.id}"]`);s&&s.focus()},100)}),T(l,e=>{setTimeout(()=>{const t=document.querySelector(`[data-card="${e==null?void 0:e.id}"]`);t&&t.focus()},100)});const v=D(),c=D(!1),k=D(),$=D();function g(e,t){var u;const s=e.target;if((s==null?void 0:s.nodeName)==="DIV"){(u=$.value??s.querySelector("a"))==null||u.focus();return}t&&(l.value=t,$.value=s)}function S(e){var U,V;if(c.value){e.preventDefault();return}clearTimeout(k.value),c.value=!0;const t=e.target,s=t.getAttribute("data-index"),u=t.closest("[data-row]"),o=u==null?void 0:u.previousElementSibling,F=o==null?void 0:o.querySelector(`a[data-index="${s}"]`),m=u==null?void 0:u.nextElementSibling,C=m==null?void 0:m.querySelector(`a[data-index="${s}"]`),I=t.previousElementSibling,N=t.nextElementSibling;if(F&&e.key==="ArrowUp")e.preventDefault(),F.focus();else if(C&&e.key==="ArrowDown")e.preventDefault(),C.focus();else if(I&&e.key==="ArrowLeft")e.preventDefault(),I.focus();else if(N&&e.key==="ArrowRight")e.preventDefault(),N.focus();else if(o&&e.key==="ArrowUp"){const _=(U=Array.from(o==null?void 0:o.querySelectorAll("a")))==null?void 0:U.at(-1);_&&_.focus()}else if(m&&e.key==="ArrowDown"){const _=(V=Array.from(m==null?void 0:m.querySelectorAll("a")))==null?void 0:V.at(-1);_&&_.focus()}}function q(e){k.value=setTimeout(()=>{c.value=!1},150)}return(e,t)=>(n(),w(A(W),null,{default:K(()=>[j(A(O),{fullscreen:!0},{default:K(()=>{var s,u;return[r("div",de,[l.value?(n(),w(ce,{key:0,selected:l.value},null,8,["selected"])):p("",!0),r("div",{ref_key:"scrollContainer",ref:v,tabindex:"0",class:"flex flex-col justify-start items-start w-available -mx-3 px-3 absolute left-14 right-14 top-[264px] h-available overflow-auto scroll-smooth gap-4 flex-1 pb-16",onFocus:t[0]||(t[0]=o=>g(o))},[j(L,{title:"Continue watching",data:((s=A(f))==null?void 0:s.filter(o=>!!o.id))??[],"handle-focus":g,"handle-down":S,"handle-up":q},null,8,["data"]),(u=A(h))!=null&&u.pages?(n(!0),d(b,{key:0},B(A(h).pages,(o,F)=>(n(),d(b,{key:F},[o?(n(!0),d(b,{key:0},B((o==null?void 0:o.data)??[],(m,C)=>(n(),w(L,{key:C,title:m.title,data:m.items,"handle-focus":g,"handle-down":S,"handle-up":q,suffix:"/watch"},null,8,["title","data"]))),128)):p("",!0)],64))),128)):p("",!0)],544)])]}),_:1})]),_:1}))}});export{De as default};
