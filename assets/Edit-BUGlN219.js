import{$ as F,aZ as J,k as B,c as S,o as U,p as s,j as l,x as c,z as a,A as g,a9 as W,d,a6 as X,f as Y,w as j,b as ee,a0 as i}from"./vue-ionic-D4s4ExYp.js";import{u as oe}from"./useServerClient-B1iLPo0s.js";import{_ as te}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-Nn4dwAdV.js";import{u as le,g as b}from"./primevue-C7GgiIOs.js";import{a as L,bg as z,c as V}from"./index-D29s6-I8.js";import{_ as ae}from"./Modal.vue_vue_type_script_setup_true_lang-FfW6BNHE.js";import{_ as C}from"./Button.vue_vue_type_script_setup_true_lang-CzLYMh2i.js";import"./vendor-Dgtccx1h.js";import"./icons-BW5E66pf.js";import"./rxjs-BCp2L9Rn.js";import"./media-C2AqgyMX.js";import"./api-BBofn2cc.js";import"./swiper-D00Cnjmx.js";import"./useInfiniteServerClient-B4MMmB_5.js";import"./useMounted-DYwXa4R_.js";import"./FloatingBackButton.vue_vue_type_script_setup_true_lang-ds0OrJIA.js";import"./OptimizedIcon.vue_vue_type_script_setup_true_lang-BMWMPBMW.js";import"./ScrollContainer.vue_vue_type_script_setup_true_lang-B9z-yNTL.js";import"./RipperOverlay.vue_vue_type_script_setup_true_lang-CXq-Wp6k.js";import"./ripperSocket-wzC5X917.js";import"./music-player-BiOHSPVn.js";import"./Shadow-CECthDCI.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const se={class:"my-6 text-sm text-auto-10"},re=F({__name:"DeleteSpecialModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},name:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},setup(u){const n=u,p=J(),h=le();function k(){L().delete(`dashboard/specials/${n.id}`).then(({data:t})=>{h.add({severity:t.status==="ok"?"success":"error",summary:z(t.status==="ok"?"Success":"Error"),detail:z(t.message,...t.args??[]),life:5e3}),p.invalidateQueries({queryKey:["dashboard","specials"]}),!n.noRedirect&&window.history.back()}),n.close()}return(t,x)=>{const w=B("Button");return U(),S(ae,{close:u.close,open:u.open,"max-width":"max-w-xl",params:{special:n.name},title:"Delete special {{special}}"},{actions:s(()=>[a(w,{id:"yes",onclick:k,"end-icon":"trash",color:"red",type:"button"},{default:s(()=>[g(c(t.$t("Delete")),1)]),_:1}),a(w,{id:"no",onclick:u.close,type:"button",color:"auto-alpha",variant:"text"},{default:s(()=>[g(c(t.$t("Cancel")),1)]),_:1},8,["onclick"])]),default:s(()=>[l("div",se,c(t.$t("Are you sure you want to delete this special?")),1)]),_:1},8,["close","open","params"])}}}),ie={class:"flex flex-col gap-5 col-span-5 col-start-1 2xl:col-start-1"},ne={class:"flex flex-col gap-2"},de={class:"flex flex-col gap-2"},ce={class:"flex gap-4 w-full"},ue={class:"flex flex-col gap-4 w-full"},pe={class:"flex flex-col gap-2"},me={class:"flex flex-col gap-4 w-full"},fe={class:"flex flex-col gap-2"},ve={class:"flex flex-col gap-4 col-span-2 row-start-1 col-start-1 2xl:col-start-6"},ge={class:"flex flex-col gap-5"},xe={class:"flex flex-col gap-2"},Qe=F({__name:"Edit",setup(u){var q,D,I,N,R;const n=W(),{data:p,error:h,refetch:k}=oe({path:"dashboard/specials",queryKey:["dashboard","specials"]}),t=d();X(()=>{k()}),Y(()=>{p.value&&(t.value=p.value.find(e=>e.id===n.params.id))}),j(p,e=>{e&&(t.value=e.find(o=>o.id===n.params.id))});const x=d(!1);function w(){x.value=!0}function P(){x.value=!1}function Z(){window.history.back()}const y=d(((q=t.value)==null?void 0:q.title)||""),_=d(((D=t.value)==null?void 0:D.overview)||""),m=d(((I=t.value)==null?void 0:I.backdrop)||""),f=d(((N=t.value)==null?void 0:N.poster)||""),v=d(((R=t.value)==null?void 0:R.logo)||"");j(t,e=>{e&&(y.value=e==null?void 0:e.title,_.value=e==null?void 0:e.overview,m.value=e==null?void 0:e.backdrop,f.value=e==null?void 0:e.poster,v.value=e==null?void 0:e.logo)});function G(){var e;L().patch(`/dashboard/specials/${(e=t.value)==null?void 0:e.id}`,{title:y.value,overview:_.value,backdrop:m.value,poster:f.value,logo:v.value}).then(({data:o})=>{console.log(o)})}return(e,o)=>{var T;const H=B("Textarea"),$=B("Image");return U(),S(te,{"grid-style":1,error:i(h),title:"Special: {{title}}",params:{title:(T=t.value)==null?void 0:T.title}},{cta:s(()=>o[5]||(o[5]=[])),actions:s(()=>[a(C,{id:"remove",type:"button",variant:"text","start-icon":"folderRemove",class:"children:text-gray-400 children:transition-colors children:duration-100 children:hover:text-red-dark-8",color:"auto-alpha",onClick:w},{default:s(()=>[g(c(e.$t("Remove")),1)]),_:1}),a(C,{id:"cancel",type:"button",variant:"text",color:"white",onClick:Z},{default:s(()=>[g(c(e.$t("Cancel")),1)]),_:1}),a(C,{id:"save",type:"button",class:"ml-auto",color:"theme",onClick:G},{default:s(()=>[g(c(e.$t("Save")),1)]),_:1})]),default:s(()=>{var M,A,E,K,O,Q;return[l("div",ie,[l("div",ne,[o[6]||(o[6]=l("label",{for:"name"},"Name",-1)),a(i(b),{id:"name",modelValue:y.value,"onUpdate:modelValue":o[0]||(o[0]=r=>y.value=r),variant:"filled",class:"w-full"},null,8,["modelValue"])]),l("div",de,[o[7]||(o[7]=l("label",{for:"overview"},"Overview",-1)),a(H,{id:"overview",modelValue:_.value,"onUpdate:modelValue":o[1]||(o[1]=r=>_.value=r),variant:"filled",rows:8,class:"w-full"},null,8,["modelValue"])]),l("div",ce,[l("div",ue,[l("div",pe,[o[8]||(o[8]=l("label",{for:"backdrop"},"Backdrop",-1)),a(i(b),{id:"backdrop",modelValue:m.value,"onUpdate:modelValue":o[2]||(o[2]=r=>m.value=r),variant:"filled",class:"w-full"},null,8,["modelValue"])]),a($,{src:`${(M=i(V))==null?void 0:M.serverBaseUrl}/images/original${m.value}`,alt:"Image",width:"100%",class:"mx-2",preview:""},null,8,["src"])]),l("div",me,[l("div",fe,[o[9]||(o[9]=l("label",{for:"logo"},"Logo",-1)),a(i(b),{id:"logo",modelValue:v.value,"onUpdate:modelValue":o[3]||(o[3]=r=>v.value=r),variant:"filled",class:"w-full"},null,8,["modelValue"])]),a($,{src:`${(A=i(V))==null?void 0:A.serverBaseUrl}/images/original${v.value}`,alt:"Image",width:"100%",class:"mx-2",preview:""},null,8,["src"])])])]),l("div",ve,[l("div",ge,[l("div",xe,[o[10]||(o[10]=l("label",{for:"poster"},"Poster",-1)),a(i(b),{id:"poster",modelValue:f.value,"onUpdate:modelValue":o[4]||(o[4]=r=>f.value=r),variant:"filled",class:"w-full"},null,8,["modelValue"])]),a($,{src:`${(E=i(V))==null?void 0:E.serverBaseUrl}/images/original${f.value}`,alt:"Image",width:"100%",class:"mx-2",preview:""},null,8,["src"])])]),(K=t.value)!=null&&K.id?(U(),S(re,{key:0,id:(O=t.value)==null?void 0:O.id,name:(Q=t.value)==null?void 0:Q.title,close:P,open:x.value},null,8,["id","name","open"])):ee("",!0)]}),_:1},8,["error","params"])}}});export{Qe as default};
