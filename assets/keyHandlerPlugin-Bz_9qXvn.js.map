{"version":3,"file":"keyHandlerPlugin-Bz_9qXvn.js","sources":["../../node_modules/@nomercy-entertainment/nomercy-video-player/src/plugins/keyHandlerPlugin.ts"],"sourcesContent":["import Plugin from '../plugin';\nimport { NMPlayer } from '../types';\n\nexport interface KeyHandlerPluginArgs {\n}\n\nexport class KeyHandlerPlugin extends Plugin {\n\tplayer: NMPlayer<KeyHandlerPluginArgs> = <NMPlayer<KeyHandlerPluginArgs>>{};\n\tprivate boundKeyHandler: (event: KeyboardEvent) => void = () => { };\n\n\tinitialize(player: NMPlayer<KeyHandlerPluginArgs>) {\n\t\tthis.player = player;\n\t\tthis.boundKeyHandler = this.keyHandler.bind(this)\n\t}\n\n\tuse() {\n\t\tif (this.player.options.disableControls) return;\n\t\tdocument.addEventListener('keyup', this.boundKeyHandler, false);\n\t}\n\n\tdispose() {\n\t\tdocument.removeEventListener('keyup', this.boundKeyHandler);\n\t}\n\n\t/**\n\t * Handles keyboard events and executes the corresponding function based on the key binding.\n\t * @param {KeyboardEvent} event - The keyboard event to handle.\n\t */\n\tkeyHandler(event: KeyboardEvent) {\n\t\tif (document.activeElement?.nodeName == 'INPUT') return;\n\n\t\tconst keys = this.keyBindings();\n\t\tlet keyTimeout = false;\n\n\t\tif (this.player.getVideoElement().getBoundingClientRect().width == 0) return;\n\n\t\tif (!keyTimeout && this.player) {\n\t\t\tkeyTimeout = true;\n\n\t\t\tif (keys.some(k => k.key === event.key && k.control === event.ctrlKey)) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tkeys.find(k => k.key === event.key && k.control === event.ctrlKey)?.function();\n\t\t\t} else {\n\t\t\t\t// alert(event.key);\n\t\t\t}\n\t\t}\n\t\tsetTimeout(() => {\n\t\t\tkeyTimeout = false;\n\t\t}, 300);\n\t}\n\n\tkeyBindings() {\n\t\treturn [\n\t\t\t{\n\t\t\t\tname: 'Play',\n\t\t\t\tkey: 'MediaPlay',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => !this.player.options.disableMediaControls && this.player.play(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Pause',\n\t\t\t\tkey: 'MediaPause',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => !this.player.options.disableMediaControls && this.player.pause(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Toggle playback',\n\t\t\t\tkey: ' ',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => this.player.togglePlayback(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Toggle playback',\n\t\t\t\tkey: 'MediaPlayPause',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => !this.player.options.disableMediaControls && this.player.togglePlayback(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Stop',\n\t\t\t\tkey: 'MediaStop',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => !this.player.options.disableMediaControls && this.player.stop(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Rewind',\n\t\t\t\tkey: 'ArrowLeft',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => !this.player.isTv() && this.player.rewindVideo(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Rewind',\n\t\t\t\tkey: 'MediaRewind',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => !this.player.options.disableMediaControls && this.player.rewindVideo(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Fast forward',\n\t\t\t\tkey: 'ArrowRight',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => !this.player.isTv() && this.player.forwardVideo(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Fast forward',\n\t\t\t\tkey: 'MediaFastForward',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => !this.player.options.disableMediaControls && this.player.forwardVideo(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Previous item',\n\t\t\t\tkey: 'MediaTrackPrevious',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => !this.player.options.disableMediaControls && this.player.previous(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Previous item',\n\t\t\t\tkey: 'p',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => this.player.previous(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Next item',\n\t\t\t\tkey: 'MediaTrackNext',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => !this.player.options.disableMediaControls && this.player.next(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Next item',\n\t\t\t\tkey: 'n',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => this.player.next(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Cycle subtitle tracks',\n\t\t\t\tkey: 'Subtitle',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => this.player.cycleSubtitles(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Cycle subtitle tracks',\n\t\t\t\tkey: '5',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => this.player.cycleSubtitles(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Cycle subtitle tracks',\n\t\t\t\tkey: 'v',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => this.player.cycleSubtitles(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Cycle audio tracks',\n\t\t\t\tkey: 'Audio',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => this.player.cycleAudioTracks(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Cycle audio tracks',\n\t\t\t\tkey: '2',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => this.player.cycleAudioTracks(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Cycle audio',\n\t\t\t\tkey: 'b',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => this.player.cycleAudioTracks(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Forward 30 seconds',\n\t\t\t\tkey: 'ColorF0Red',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => this.player.forwardVideo(30),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Forward 60 seconds',\n\t\t\t\tkey: 'ColorF1Green',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => this.player.forwardVideo(60),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Forward 90 seconds',\n\t\t\t\tkey: 'ColorF2Yellow',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => this.player.forwardVideo(90),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Forward 120 seconds',\n\t\t\t\tkey: 'ColorF3Blue',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => this.player.forwardVideo(120),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Forward 30 seconds',\n\t\t\t\tkey: '3',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => this.player.forwardVideo(30),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Forward 60 seconds',\n\t\t\t\tkey: '6',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => this.player.forwardVideo(60),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Forward 90 seconds',\n\t\t\t\tkey: '9',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => this.player.forwardVideo(90),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Forward 120 seconds',\n\t\t\t\tkey: '1',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => this.player.forwardVideo(120),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Fullscreen',\n\t\t\t\tkey: 'f',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => this.player.toggleFullscreen(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Volume up',\n\t\t\t\tkey: 'ArrowUp',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => !this.player.isTv() && !this.player.isMobile() && this.player.volumeUp(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Volume down',\n\t\t\t\tkey: 'ArrowDown',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => !this.player.isTv() && !this.player.isMobile() && this.player.volumeDown(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Mute',\n\t\t\t\tkey: 'm',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => this.player.toggleMute(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Cycle aspect ratio',\n\t\t\t\tkey: 'BrowserFavorites',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => this.player.cycleAspectRatio(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Cycle aspect ratio',\n\t\t\t\tkey: 'a',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => this.player.cycleAspectRatio(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Show info',\n\t\t\t\tkey: 'Info',\n\t\t\t\tcontrol: false,\n\t\t\t\tfunction: () => {\n\t\t\t\t\t// player.showInfo();\n\t\t\t\t},\n\t\t\t},\n\t\t].map((control, i) => ({\n\t\t\t...control,\n\t\t\tid: i,\n\t\t}));\n\t}\n}\n\nexport default KeyHandlerPlugin;"],"names":["KeyHandlerPlugin","Plugin","player","event","_a","keys","keyTimeout","k","_b","control","i"],"mappings":"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","x_google_ignoreList":[0]}