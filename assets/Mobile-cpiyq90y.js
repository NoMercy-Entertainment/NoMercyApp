import{C as g,Dt as k,Et as r,K as y,S as n,U as _,Y as P,_t as w,c as h,j as S,st as C,y as M}from"./i18n-DBb78QAI.js";import{qi as l}from"./ionic-DNKsarlx.js";import"./vue-core-CD3ScEG4.js";import"./query-Dwz_k4KB.js";import{$i as B,$t as I,Da as U,Jt as T,W as c,Wt as D,en as x,k as a,qi as p,qt as q,s as o,un as A}from"./index-Dbw70ZKS.js";import"./useInfiniteServerClient-BG6feyia.js";import{t as j}from"./useServerClient-CIpZVCqE.js";import{a as z,i as L,n as N,o as W,r as $}from"./VideoPlayer-jqKtTwgt.js";import"./buttons-DCxuLQcY.js";h();var E=S({__name:"Mobile",setup(F){const{data:i}=j({}),e=w();function u(s){const t={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:s?.filter(b=>!!b.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:U.value?.accessToken||localStorage.getItem("access_token")||"",basePath:B.value?.serverBaseUrl,imageBasePath:"https://app.nomercy.tv/tmdb-images",forceTvMode:(l("android")||l("ios"))&&!l("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||l("capacitor"),renderAhead:100};e.value=$("player1").setup(t),e.value?.once("back",()=>{history.state.back?a.back():a.replace("/")});const d=new L;e.value?.registerPlugin("desktopUI",d),e.value?.usePlugin("desktopUI");const v=new z;e.value?.registerPlugin("autoSkip",v),e.value?.usePlugin("autoSkip");const m=new W;e.value?.registerPlugin("sync",m),e.value?.usePlugin("sync");const f=new N;e.value?.registerPlugin("octopus",f),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?a.back():a.replace("/")}),e.value?.on("dispose",async()=>{await x(),await q(),history.state.back?a.back():await a.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{o(!0)}),e.value?.on("pause",()=>{o(!1)}),e.value?.on("ready",async()=>{await I(),await A(),await T(),c.stop()}),e.value?.on("item",()=>{e.value?.play()}),D.addListener("backButton",()=>{e.value?.emit("back-button-hyjack"),e.value?.dispose()})}return C(i,s=>{s?.length&&u(s)}),y(()=>{c.stop(),u(i.value)}),_(()=>{e.value?.dispose(),o(!1)}),(s,t)=>(P(),g(M,{to:"body"},[n("div",{class:k([{"mb-28":r(p),"mb-0":!r(p)},"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"])},[...t[0]||(t[0]=[n("div",{id:"player1",class:"group nomercyplayer"},null,-1)])],2)]))}}),X=E;export{X as default};
