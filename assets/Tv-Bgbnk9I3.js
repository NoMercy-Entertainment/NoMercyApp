import"./useBaseQuery-CIy8gIv_.js";import"./useInfiniteServerClient-DEiOq0jq.js";import"./useQueryClient-CyA4NbEt.js";import"./useQuery-Cz5qIqAL.js";import{As as M,Cs as j,Do as $,Fc as p,Gs as V,H as A,Is as r,Ls as x,Mc as D,No as H,Os as y,Pc as N,Po as U,Rs as v,St as E,Us as l,X as m,_o as _,ac as n,ao as K,cr as k,do as R,gc as G,gt as O,io as d,jc as e,ki as X,ks as h,lo as J,nc as Q,nr as g,oo as I,po as W,sc as Y,ti as Z,uo as ee,ut as te,vc as i,wc as C,zs as c}from"./index-Dmf9ueR9.js";import"./basecomponent-BVgAzj1u.js";import"./classnames-D1foEy1e.js";import"./button-BMd-EqWQ.js";import"./baseicon-CI0uvNfg.js";import{t as ae}from"./_plugin-vue_export-helper-CEc1WwrB.js";import"./AppLogoSquare-D2wtZ-nJ.js";import{t as le}from"./MoooomIcon-ChUMO6UV.js";import"./dist-DLnM1qUV.js";import{t as oe}from"./useServerClient-4yIsKhZm.js";import{t as S}from"./CoverImage-Cnkw0kB6.js";import{t as se}from"./MusicButton-D2OgD4Al.js";import"./BannerButton-BQ_wbCl-.js";import{t as T}from"./MediaLikeButton-BcNeL_XV.js";import"./PlayerIcon-DWPRSHIH.js";import{t as ie}from"./TrackLinks-DX_cWP-Q.js";import{t as re}from"./Marquee-CkY7HPhe.js";import{t as ne}from"./EqSpinner-DSS1NVvH.js";import{t as ue}from"./BigPlayButton-Ds1xaJ5x.js";j();H();var ce={class:"w-available h-available absolute left-[202px] top-0 overflow-hidden bg-focus"},de=["src"],fe={class:"flex justify-center w-available aspect-square my-8 ml-8 mr-16"},pe={key:0,class:"relative mb-8 flex w-full flex-1 flex-shrink-0 flex-col items-start justify-start gap-4 flex-grow-1 text-left"},me=["innerHTML"],ve={key:1,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap"},_e={class:"flex items-center h-8 gap-2 self-stretch w-full text-xs font-medium text-left"},be={key:0,class:"flex gap-2"},we={key:1,class:"flex gap-2"},xe={class:"flex gap-2 items-center justify-between w-full"},ye=["data-id","data-index","onClick"],ke={class:"flex w-available overflow-clip items-end"},he=V({__name:"Tv",setup(ge){const b=U(),{data:o}=oe({path:b.fullPath,keepForever:!0});Q(()=>{o.value?.color_palette?.cover&&k(o.value?.color_palette?.cover),setTimeout(()=>{const s=document.querySelector(".focusable");s&&s.focus()},100)}),G(o,s=>{s?.color_palette?.cover&&k(s?.color_palette?.cover),setTimeout(()=>{const t=document.querySelector(".focusable");t&&t.focus()},100)});const w=C(),q=C();$(()=>{setTimeout(()=>{const s=document.querySelector(".focusable");s&&s.focus()},100)});function F(s){const t=s.target,a=w.value?.getAttribute("data-index")??0,u=t.querySelector(`[data-index="${a}"] .focusable`);u&&u.focus()}function L(s){const t=s.target;w.value=t,t&&t.scrollIntoView({behavior:"smooth",block:"center"});const a=t.closest("[data-id]")?.getAttribute("data-id"),u=t.querySelector(`[data-index="${a}"] .focusable`);u&&u.focus()}function P(s){const t=s.target;if(s.key==="ArrowUp"){const a=(t.closest("ion-item")?.previousSibling).querySelector(".focusable");a&&(a.focus(),a.scrollIntoView({behavior:"smooth",block:"center"}))}else if(s.key==="ArrowDown"){const a=(t.closest("ion-item")?.nextSibling).querySelector(".focusable");a&&(a.focus(),a.scrollIntoView({behavior:"smooth",block:"center"}))}}function z(){E(b.fullPath)}function B(s){m.value||z(),A.playTrack(s,o.value?.tracks??[]),O()}return(s,t)=>(n(),x(e(W),null,{default:i(()=>[l(e(K),{fullscreen:!0},{default:i(()=>[(n(),c("div",{key:e(o)?.id,style:N(e(g)?`--color-theme-8: ${e(g)}`:""),class:"w-full h-full absolute left-0 top-0 bg-[#131314] pointer-events-none -z-10"},[r("div",ce,[r("img",{src:`${e(X)?.serverBaseUrl}${e(o)?.backdrop??e(o)?.cover}`,alt:"",class:"w-available h-available absolute left-[-0.39px] top-[-0.39px] opacity-40 object-cover object-center"},null,8,de),t[5]||(t[5]=r("div",{class:"w-[150vw] h-[150vw] absolute left-[-30%] bottom-[-50%]",style:{background:`radial-gradient(
                closest-side,
                rgba(19, 19, 20, 0.1) 0%,
                rgba(19, 19, 20, 1) 70.73974609375%
              )`}},null,-1))])],4)),l(e(I),null,{default:i(()=>[l(e(_),{class:"ion-align-items-end"},{default:i(()=>[l(e(d),{size:"3"},{default:i(()=>[r("div",fe,[l(S,{alt:e(o)?.name,data:e(o),class:"w-auto h-full aspect-square"},null,8,["alt","data"])]),e(o)?.name?(n(),c("div",pe,[e(o).name.length>50?(n(),c("div",{key:0,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap",innerHTML:e(Z)(e(o)?.name??"Songs you like","text-xs line-clamp-1")},null,8,me)):(n(),c("p",ve,p(e(o)?.name),1)),r("div",_e,[e(o)?.type?(n(),c("span",be,[r("span",null,p(e(o)?.type.replace(/s$/u,"").toTitleCase()),1)])):v("",!0),e(o)?.tracks?(n(),c("span",we,[t[6]||(t[6]=r("span",null,"â€¢",-1)),r("span",null,p(e(o)?.tracks.length)+" "+p(s.$t("tracks")),1)])):v("",!0)]),r("div",xe,[l(T,{data:e(o)},null,8,["data"]),l(ue,{data:e(o),class:"w-12 h-12 ml-auto"},null,8,["data"])])])):v("",!0)]),_:1}),l(e(d),{ref_key:"scrollContainer",ref:q,class:"w-full h-available overflow-auto scroll-smooth",size:"6",tabindex:"0",onFocus:t[4]||(t[4]=a=>F(a))},{default:i(()=>[l(e(R),{lines:"none",mode:"md"},{default:i(()=>[(n(!0),c(M,null,Y(e(o)?.tracks,(a,u)=>(n(),x(e(J),{key:a.id,class:"group/track focus-within:bg-white/4 rounded-md overflow-clip",mode:"md",tabindex:"-1"},{default:i(()=>[l(e(I),null,{default:i(()=>[l(e(_),{"data-id":a.id,"data-index":u,class:"items-center !rounded-md !overflow-clip",tabindex:"-1"},{default:i(()=>[l(e(d),{size:"2",tabindex:"-1"},{default:i(()=>[r("button",{"data-id":a.id,"data-index":u,class:"focusable flex justify-center w-full aspect-video focus:outline outline-focus outline-2 outline-offset-2 mr-2 overflow-clip",tabindex:"0",onClick:f=>B(a),onFocus:t[0]||(t[0]=f=>L(f))},[l(S,{alt:a.name,data:a,class:"w-auto h-full aspect-square"},null,8,["alt","data"])],40,ye)]),_:2},1024),l(e(d),{class:"my-auto mt-2",size:"8",tabindex:"-1"},{default:i(()=>[l(e(ee),{tabindex:"-1"},{default:i(()=>[r("div",ke,[r("div",{class:D([{"w-0":e(m)?.id!==a.id,"w-6 mr-1":e(m)?.id===a.id},"flex items-center justify-center h-full aspect-square overflow-clip transition-width duration-200"])},[l(ne,{playing:e(te)},null,8,["playing"])],2),l(re,{playing:!!e(m)?.id,text:a.name,class:"!w-[calc(100%-30px)] children:leading-none w-available overflow-clip"},null,8,["playing","text"])]),l(ie,{id:a.id,data:a.artist_track,suffix:"track",type:"artists",onKeyup:t[1]||(t[1]=f=>P(f)),onKeydown:[t[2]||(t[2]=y(h(()=>{},["prevent"]),["up"])),t[3]||(t[3]=y(h(()=>{},["prevent"]),["down"]))]},null,8,["id","data"])]),_:2},1024)]),_:2},1024),l(e(d),{class:"opacity-0 group-focus-within/track:opacity-100 -ml-2",size:"2",tabindex:"-1"},{default:i(()=>[l(e(_),{class:"flex flex-nowrap",tabindex:"-1"},{default:i(()=>[l(T,{data:a},null,8,["data"]),l(se,{onclick:()=>{},class:"!bg-transparent mr-2",label:"",tabindex:"0"},{default:i(()=>[l(le,{class:"text-white",icon:"menuDotsHorizontal"})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1032,["data-id","data-index"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}))}}),Oe=ae(he,[["__scopeId","data-v-06b5abf2"]]);export{Oe as default};
