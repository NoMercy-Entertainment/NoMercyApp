import"./useBaseQuery-DhMTNjjH.js";import"./useInfiniteServerClient-BOGzXRLT.js";import"./useQueryClient-BDTWlHnP.js";import"./useQuery-UqFzG2sc.js";import{Ba as b,Ea as h,Er as w,Ha as I,Hs as S,Io as l,U as r,Va as T,Ws as i,Yo as C,cs as c,ec as B,fa as H,gs as U,i as t,ii as p,is as V,js as v,ms as x,on as D,pi as N,sc as d,ss as f,va as A,vn as E}from"./index-zK1-WOQT.js";import{s as n}from"./imageModal-CsFJnOhE.js";import{t as j}from"./useServerClient-BWjN3Na1.js";import{a as L,n as M,o as z,r as F,s as R}from"./VideoPlayer-CyXJOi7Z.js";import"./buttons-DRw175vE.js";import{t as W}from"./keyHandlerPlugin-BezXiLV9.js";C();b();var Y=U({__name:"Tv",setup(q){const{data:o}=j({}),e=B();function u(a){const s={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:a?.filter(k=>!!k.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:p.value?.accessToken||localStorage.getItem("access_token")||"",basePath:w.value?.serverBaseUrl,forceTvMode:(l("android")||l("ios"))&&!l("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||l("capacitor"),renderAhead:10};e.value?.dispose(),e.value=F("player1").setup(s);const g=new L;e.value?.registerPlugin("tvUI",g),e.value?.usePlugin("tvUI");const m=new z;e.value?.registerPlugin("autoSkip",m),e.value?.usePlugin("autoSkip");const y=new W;e.value?.registerPlugin("keyHandler",y),e.value?.usePlugin("keyHandler");const P=new R;e.value?.registerPlugin("sync",P),e.value?.usePlugin("sync");const _=new M;e.value?.registerPlugin("octopus",_),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?t.back():t.replace("/")}),e.value?.on("dispose",()=>{N(),E(),history.state.back?t.back():t.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{n(!0)}),e.value?.on("pause",()=>{n(!1)}),e.value?.on("ready",()=>{D(),r.stop()}),e.value?.on("item",()=>{e.value?.play()}),H.addListener("backButton",()=>{e.value?.emit("back-button"),e.value?.emit("back-button-hyjack")})}return S(o,a=>{a?.length&&u(a)}),T(()=>{r.stop(),p.value.features?.nomercyConnect?u():o.value?.length&&u(o.value)}),I(()=>{e.value?.dispose(),n(!1)}),(a,s)=>(v(),c(d(h),null,{default:i(()=>[x(d(A),{fullscreen:!0},{default:i(()=>[(v(),c(V,{to:"body"},[s[0]||(s[0]=f("div",{class:"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"},[f("div",{id:"player1",class:"group nomercyplayer"})],-1))]))]),_:1})]),_:1}))}}),se=Y;export{se as default};
