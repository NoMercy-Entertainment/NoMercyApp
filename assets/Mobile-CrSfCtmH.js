import{C as u,Et as f,G as w,J as r,K as I,S as g,T as s,Tt as o,X as M,c as z,g as n,gt as c,j as R,k as V,ot as E,w as v,x as F}from"./i18n-Cs-AFcrY.js";import"./ionic-XwZpO7IE.js";import{I as G,P as K}from"./vue-core-CKeWI2Kt.js";import"./query-28IwY2wK.js";import{Hn as B,Un as L,Wi as _,X as x,_i as U,k as X,sa as j}from"./index-BnnbGJJT.js";import"./scrollHandlers-DuLxGBId.js";import{t as q}from"./Indexer-BhkC0qoW.js";import{n as D}from"./useInfiniteServerClient-BaqYBifM.js";import"./CardIndicator-CwMvCI85.js";import{t as H}from"./NMCard-B1Nfhj4O.js";import{t as J}from"./PersonCard-DQfYUvVY.js";import{n as W,t as A}from"./EmptyCard-Bb9p6-oT.js";z();K();var O="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",Q="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",Y=R({__name:"Mobile",setup(Z){const i=G(),{data:l,fetchNextPage:y,hasNextPage:b,isError:$}=D({queryKey:["libraries",(i.params.id??i.name)?.split("&").at(0)],limit:20,keepForever:!0});w(()=>{U(),B(null),L(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),E(l,t=>{t&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const N=F(()=>{const t=l.value?.pages?.[0]?.data?.[0];return t&&j.value&&t.media_type!=="person"&&t.media_type!=="genres"});I(()=>{stop(),B(null)});const h=c(),k=c();w(()=>{k.value=i.params.id??i.name,b.value&&(l?.value?.pages?.length??0)<50&&y(),document.addEventListener("scrollToDiv",t=>{h.value?.scrollTo({top:t.detail.top-100,behavior:"smooth"})})}),E(l,t=>{t&&b.value&&t?.pages?.length<50&&y()});const T=c(),S=c();function p(t,d){T.value=d,S.value.show(t)}return(t,d)=>(r(),s(n,null,[d[0]||(d[0]=g("div",{class:"fixed top-0 pt-safe w-full bg-surface-1 z-1199"},null,-1)),g("div",{ref_key:"lib",ref:h,class:"pt-safe-offset-9 flex h-auto w-full pr-8 overflow-auto scroll-container"},[(r(),s("div",{key:o(X).currentRoute.value.params?.id,class:f([{"pb-2":o(_)&&o(x)},"z-0 flex flex-col gap-4 rounded-3xl border-0 w-available scrollbar-none border-surface-3"])},[g("div",{class:f(`grid w-full gap-4 scroll-smooth music-showing:pb-0 pl-1 py-4 ${N.value?O:Q}`)},[o(l)?(r(!0),s(n,{key:0},M(o(l).pages??[],(C,P)=>(r(),s(n,{key:P},[C.data.length>0?(r(!0),s(n,{key:0},M(C.data??[],(e,m)=>(r(),s(n,null,[e?.media_type==="tv"||e?.media_type==="movie"||e?.media_type==="collection"||e?.media_type==="specials"?(r(),u(H,{key:e.id,data:e,index:m,onContextMenu:a=>p(a,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="person"?(r(),u(J,{key:`${e.id}_person`,data:e,index:m,onContextMenu:a=>p(a,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="genres"?(r(),u(W,{key:`${e.id}_genres`,data:e,index:m,onContextMenu:a=>p(a,e)},null,8,["data","index","onContextMenu"])):v("",!0)],64))),256)):o(l).pages?.[0]?.data?.length===0?(r(),u(A,{key:1})):v("",!0)],64))),128)):v("",!0)],2)],2)),V(q,{id:k.value,class:f([{"h-available":!o(_),"h-inherit top-24":o(_),"-mt-4 pt-4 pb-4 mb-0":!o(x),"-mt-4 pt-4 pb-4 mb-14":o(x)},"w-8 fixed right-0 bg-surface-1 transition-all duration-200"])},null,8,["id","class"])],512)],64))}}),pe=Y;export{pe as default};
