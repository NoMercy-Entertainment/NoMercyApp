import{C as z,Et as B,G as N,J as d,Ot as H,S as i,T as L,Tt as a,X as $,c as A,g as O,gt as p,j as G,k as v,ot as x,w as X,x as l,yt as Y}from"./i18n-Cs-AFcrY.js";import"./ionic-XwZpO7IE.js";import{I as q,P as J}from"./vue-core-CKeWI2Kt.js";import"./primevue-DNc5dNs0.js";import"./query-28IwY2wK.js";import{t as D}from"./esm-C_OAQAej.js";import{Rr as K,Vn as M,Wn as Q,Xn as y,Yn as h,b as U,hi as Z,k as ee}from"./index-CT-PfpgH.js";import"./useInfiniteServerClient-D3HjtXv7.js";import{t as te}from"./useServerClient-DRT7nEWO.js";import"./DropdownMenu-C6wMRH6K.js";import"./MusicButton-BX0eGfN0.js";import"./BannerButton-rZMdFuW3.js";import"./MediaLikeButton-Bw_CyVO5.js";import{t as ae}from"./Marquee-BeDgXeo3.js";import"./TrackLinks-DuicQNLM.js";import"./BigPlayButton-DaMsKGW9.js";import"./EqSpinner-DOaO8am-.js";import{t as se}from"./NotFound-BNnDSe4M.js";import"./ShareButton-B8Dw3Mmy.js";import{i as re,n as oe,r as ie,t as le}from"./TrackRow-DUwf4La1.js";A();J();var ue={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},ne={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},de=G({__name:"Mobile",setup(pe){const s=q(),_=l(()=>s.path.startsWith("/music/album")),g=l(()=>s.path.startsWith("/music/artist")),b=l(()=>s.path.startsWith("/music/playlists")),k=l(()=>s.path.startsWith("/music/tracks")),w=l(()=>s.path.startsWith("/music/genres")),V=l(()=>_.value?"album":g.value?"artist":b.value?"playlist":k.value?"favorite":w.value?"genre":"unknown"),W=l(()=>String(s.params.id??"")),{data:t,isError:P}=te({path:s.fullPath}),R=p(null),u=Y([]),n=p("");x(t,e=>{e&&(Z(e?.name??null),f(e?.tracks??[],y.value,h.value,n.value),M(e?.color_palette?.cover))},{immediate:!0}),x(h,e=>{f(t.value?.tracks??[],y.value,e,n.value)}),x(y,e=>{f(t.value?.tracks??[],e,h.value,n.value)}),x(n,e=>{f(t.value?.tracks??[],y.value,h.value,e)});function f(e,o,r,m){const T=K(e??[],o,r,Q);m===""?u.value=T:u.value=T?.filter(C=>C.name?.toLowerCase().includes(m?.toLowerCase?.())||C.artist_track?.some(I=>I.name.toLowerCase().includes(m?.toLowerCase?.()))||C.album_track?.[0]?.name.toLowerCase().includes(m?.toLowerCase?.()))??[]}N(()=>{t.value?.color_palette?.cover&&M(t.value?.color_palette?.cover)});function j(){ee.back()}const c=p(!1);p(!1);const E=p(),F=p(),S=D(l(()=>{const e=F.value?.$el??null;return{count:u.value?.length??0,getScrollElement:()=>e,estimateSize:()=>56,overscan:10,initialRect:{width:0,height:800}}}));return(e,o)=>a(P)&&!a(t)?(d(),z(se,{key:0})):!a(s).params.id||a(s).params.id&&a(t)?.id===a(s).params.id?(d(),L("div",{key:1,ref_key:"main",ref:R,class:"flex flex-col h-auto overflow-x-clip w-available sm:rounded-2xl -mt-6 text-surface-12"},[v(ie,{data:a(t)},null,8,["data"]),i("div",ue,[o[2]||(o[2]=i("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),i("div",{id:"navbar",class:B([{"opacity-0 pointer-events-none":!c.value,"opacity-100 pointer-events-auto":c.value},"fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-surface-11 dark:bg-surface-1 top-0 pt-4 transition-all duration-200"])},[o[1]||(o[1]=i("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-all duration-200 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),i("button",{class:"z-30 flex h-10 w-11 items-center justify-center rounded-md",onClick:j},[v(U,{icon:"arrowLeft"})]),i("div",{id:"navText",class:B([{"opacity-0 pointer-events-none":!c.value,"opacity-100 pointer-events-auto":c.value},"pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-all duration-200 w-[70%] overflow-clip text-xl"])},[v(ae,{text:a(t)?.name},null,8,["text"])],2)],2),(d(),z(re,{key:a(t)?.id,data:a(t),filter:n.value,onFilterChange:o[0]||(o[0]=r=>n.value=r)},null,8,["data","filter"])),i("div",ne,[(d(),z(oe,{key:a(t)?.id,ref_key:"sortHeader",ref:E,"is-album-route":_.value,"is-artist-route":g.value,"is-playlists-route":b.value,"is-favorites-route":k.value,"is-genres-route":w.value},null,8,["is-album-route","is-artist-route","is-playlists-route","is-favorites-route","is-genres-route"])),i("div",{style:H({height:`${a(S).getTotalSize()}px`,width:"100%",position:"relative"})},[(d(!0),L(O,null,$(a(S).getVirtualItems(),r=>(d(),L("div",{key:u.value[r.index]?.id+u.value[r.index]?.favorite,style:H({position:"absolute",top:0,left:0,width:"100%",height:`${r.size}px`,transform:`translateY(${r.start}px)`})},[v(le,{data:u.value[r.index],"display-list":u.value,index:r.index,"is-album-route":_.value,"is-artist-route":g.value,"is-playlists-route":b.value,"is-favorites-route":k.value,"is-genres-route":w.value,"route-type":V.value,"route-param-id":W.value},null,8,["data","display-list","index","is-album-route","is-artist-route","is-playlists-route","is-favorites-route","is-genres-route","route-type","route-param-id"])],4))),128))],4)])])],512)):X("",!0)}}),Ve=de;export{Ve as default};
