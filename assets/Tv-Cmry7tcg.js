import"./useBaseQuery-B_fAfs2I.js";import"./useInfiniteServerClient-Dr8AXyPd.js";import"./useQueryClient-m5mob28N.js";import"./useQuery-D6baOLAd.js";import{$a as _,Cs as b,Do as h,Gs as w,Is as n,Ls as i,Ns as C,Oo as I,U as S,Us as T,ac as c,ao as B,fs as t,gc as U,hr as x,i as l,jc as p,ki as D,po as N,rr as V,sa as v,vc as d,wc as H}from"./index-BwXdGvbc.js";import{s as r}from"./imageModal-BZMO9f_G.js";import{t as A}from"./useServerClient-BtQVoagd.js";import{a as L,n as j,o as M,r as $,s as z}from"./VideoPlayer-C3IGNqWE.js";import"./buttons-Dz19tni1.js";import{t as E}from"./keyHandlerPlugin-CbQtCw1Z.js";b();var F=w({__name:"Tv",setup(G){const{data:o}=A({}),e=H();function u(a){const s={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!1,playlist:a?.filter(k=>!!k.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:v.value?.accessToken||localStorage.getItem("access_token")||"",basePath:D.value?.serverBaseUrl?.replace(/\/$/,""),imageBasePath:"https://app.nomercy.tv/tmdb-images",forceTvMode:(t("android")||t("ios"))&&!t("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||t("capacitor"),renderAhead:10};e.value=$("player1").setup(s);const f=new L;e.value?.registerPlugin("tvUI",f),e.value?.usePlugin("tvUI");const g=new M;e.value?.registerPlugin("autoSkip",g),e.value?.usePlugin("autoSkip");const m=new E;e.value?.registerPlugin("keyHandler",m),e.value?.usePlugin("keyHandler");const y=new z;e.value?.registerPlugin("sync",y),e.value?.usePlugin("sync");const P=new j;e.value?.registerPlugin("octopus",P),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?l.back():l.replace("/")}),e.value?.on("dispose",()=>{history.state.back?l.back():l.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{r(!0)}),e.value?.on("pause",()=>{r(!1)}),_.addListener("backButton",()=>{e.value?.emit("back-button"),e.value?.emit("back-button-hyjack")})}return U(o,a=>{a?.length&&u(a)}),h(()=>{V(),S.stop(),v.value.features?.nomercyConnect?u():o.value?.length&&u(o.value)}),I(()=>{x(),e.value?.dispose(),r(!1)}),(a,s)=>(c(),i(p(N),null,{default:d(()=>[T(p(B),{fullscreen:!0},{default:d(()=>[(c(),i(C,{to:"body"},[s[0]||(s[0]=n("div",{class:"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"},[n("div",{id:"player1",class:"group nomercyplayer"})],-1))]))]),_:1})]),_:1}))}}),ee=F;export{ee as default};
