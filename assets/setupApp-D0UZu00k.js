const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/versionCheck-CsCUPOor.js","assets/index-C2s_qrrf.js","assets/i18n-fABvX7Av.js","assets/rolldown-runtime-C0YIJfRR.js","assets/esm-D1nPlPuN.js","assets/dist-CJipjyJM.js","assets/vue-core-CySh1wU7.js","assets/ionic-DIYphHxf.js","assets/vue-core-ClHTSD12.css","assets/signalr-CquQMbEc.js","assets/utils-DjWdsOnP.js","assets/primevue-C3smGU9Q.js","assets/query-BsKzQ1i8.js","assets/index-DynqTmIs.css","assets/pwa-CEi5uPC0.js","assets/updateState-C6ml8Pdq.js","assets/serviceWorkerUpdates-CpEA7yY1.js"])))=>i.map(i=>d[i]);
import{Ct as ee,Dt as te,Et as I,J as O,K as g,O as ae,T as k,U as re,V as ne,Y as oe,bt as se,c as F,g as P,it as y,j as ie,mt as x,o as C,s as N,t as le,z as ue}from"./i18n-fABvX7Av.js";import{ya as L}from"./ionic-DIYphHxf.js";import{B as ce,F as de}from"./vue-core-CySh1wU7.js";import{a as me,c as ve,d as fe,f as pe,i as we,l as ye,m as he,n as ge,o as ke,p as _e,r as Se,s as xe,u as Ce,v as Be,x as be}from"./primevue-C3smGU9Q.js";import"./dist-CJipjyJM.js";import{o as Te}from"./query-BsKzQ1i8.js";import{t as U}from"./esm-D1nPlPuN.js";import{Gi as Y,Zi as G,c as Q,d as K,i as j,k as b,la as Ae,m as T,p as Ee,qi as Ve,wa as Me,x as Re,y as $e}from"./index-C2s_qrrf.js";import"./scrollHandlers-BGkFq1lp.js";import{t as q}from"./konami-DNmKW1gZ.js";F();function De(e,t){let n;return(...s)=>{n!==void 0&&clearTimeout(n),n=setTimeout(()=>e(...s),t)}}function We({columns:e,columnWidth:t,emit:n,gap:s,items:i,maxColumns:m,minColumns:f,nextTick:l,onBeforeUnmount:A,onMounted:B,rtl:c,scrollContainer:d,ssrColumns:p,vue:J,wall:_,watch:E}){function V(a,r,o,v){const h=M(o);return v+r+h<=a?V(a,r,o+1,v+r+h):o}function M(a){const r=Array.isArray(t.value)?t.value:[t.value];return r[a%r.length]}function Z(){const a=X(H(V(_.value.getBoundingClientRect().width,s.value,0,-s.value)));return a>0?a:1}function H(a){const r=m?.value;return r&&a>r?r:a}function X(a){const r=f?.value;return r&&a<r?r:a}if(p.value>0){const a=z(p.value);i.value.forEach((r,o)=>a[o%p.value].push(o)),e.value=a}let R=0;async function $(a,r){if(a>=i.value.length||(await l(),R!==r))return;const o=[..._.value.children];c.value&&o.reverse();const v=o.reduce((h,W)=>W.getBoundingClientRect().height<h.getBoundingClientRect().height?W:h);e.value[+v.dataset.index].push(a),await $(a+1,r)}async function S(a=!1){const r=Z();if(e.value.length===r&&!a){n(J===2?"redraw-skip":"redrawSkip");return}e.value=z(r);const o=d?.value,v=o?o.scrollTop:window.scrollY;await $(0,++R),o?o.scrollBy({top:v-o.scrollTop}):window.scrollTo({top:v}),n("redraw")}const D=typeof ResizeObserver>"u"?void 0:new ResizeObserver(De(()=>S()));return B(()=>{S(),D?.observe(_.value)}),A(()=>D?.unobserve(_.value)),E([i,c],()=>S(!0)),E([t,s,f,m],()=>S()),{getColumnWidthTarget:M}}function z(e){return Array.from({length:e}).map(()=>[])}var Ie=["data-index"],Oe=ie({__name:"masonry-wall",props:{columnWidth:{default:400},items:{},gap:{default:0},rtl:{type:Boolean,default:!1},ssrColumns:{default:0},scrollContainer:{default:null},minColumns:{default:1},maxColumns:{},keyMapper:{}},emits:["redraw","redrawSkip"],setup(e,{emit:t}){const n=e,s=t,i=x([]),m=x(),{getColumnWidthTarget:f}=We({columns:i,emit:s,nextTick:ue,onBeforeUnmount:ne,onMounted:re,vue:3,wall:m,watch:y,...se(n)});return(l,A)=>(g(),k("div",{ref_key:"wall",ref:m,class:"masonry-wall",style:I({display:"flex",gap:`${l.gap}px`})},[(g(!0),k(P,null,O(i.value,(B,c)=>(g(),k("div",{key:c,class:"masonry-column","data-index":c,style:I({display:"flex","flex-basis":`${ee(f)(c)}px`,"flex-direction":"column","flex-grow":1,gap:`${l.gap}px`,height:["-webkit-max-content","-moz-max-content","max-content"],"min-width":0})},[(g(!0),k(P,null,O(B,(d,p)=>(g(),k("div",{key:l.keyMapper?.(l.items[d],c,p,d)??d,class:"masonry-item"},[oe(l.$slots,"default",{item:l.items[d],column:c,columnCount:i.value.length,row:p,index:d},()=>[ae(te(l.items[d]),1)])]))),128))],12,Ie))),128))],4))}}),Pe=(()=>{const e=Oe;return e.install=t=>{t.component("MasonryWall",e)},e})();F();N();var{idle:Le,reset:Ue}=Me((G.value??0)*60*1e3,{events:["mousemove","mousedown","keydown","touchstart","wheel"]}),w=x(-1),u=x(null);y(Ve,async(e,t)=>{!e||e.id===t?.id||await Y.invalidateQueries({queryKey:["setup","screensaver"]})});setInterval(()=>{u.value&&(j.value||T.value&&(w.value=w.value+1>=u.value?.length?0:w.value+1))},45*1e3);y([w,T],()=>{setTimeout(()=>{u.value&&(j.value||Ee.value||!T.value||Q(u.value[w.value%u.value.length]))},150)});y(G,()=>{Ue()});y(u,()=>{w.value=0});y([Le,u],async([e])=>{if(e&&u.value&&u.value.length>0){if(K(!0),document.querySelector("#imageModal")?.showModal(),L("capacitor"))try{const{StatusBar:t}=await C(async()=>{const{StatusBar:n}=await import("@capacitor/status-bar");return{StatusBar:n}},[]);await t.setOverlaysWebView({overlay:!0})}catch(t){console.error("Failed to set StatusBar overlay:",t)}}else if(K(!1),Q(void 0),document.querySelector("#imageModal")?.close(),L("capacitor"))try{const{StatusBar:t}=await C(async()=>{const{StatusBar:n}=await import("@capacitor/status-bar");return{StatusBar:n}},[]);await t.setOverlaysWebView({overlay:!1})}catch(t){console.error("Failed to reset StatusBar overlay:",t)}});var Ke={install:(e,t)=>{if(t===void 0||typeof t.onKonamiCodeEntered!="function"){console.warn("Konami-Code Plugin installed but no method 'onKonamiCodeEntered' in options parameter detected.");return}const n=["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","b","a"];let s=0;function i(){s=0}function m(f){f.key===n[s++]?s===n.length&&(t.onKonamiCodeEntered(),i()):i()}document.addEventListener("keydown",m)}};N();async function He(e){queueMicrotask(async()=>{try{const{startVersionChecks:t}=await C(async()=>{const{startVersionChecks:n}=await import("./versionCheck-CsCUPOor.js");return{startVersionChecks:n}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]));t()}catch(t){console.warn("Version check setup failed:",t)}if("serviceWorker"in navigator)try{await navigator.serviceWorker.ready;const{setupServiceWorkerUpdates:t}=await C(async()=>{const{setupServiceWorkerUpdates:n}=await import("./serviceWorkerUpdates-CpEA7yY1.js");return{setupServiceWorkerUpdates:n}},__vite__mapDeps([16,1,2,3,4,5,6,7,8,9,10,11,12,13,14]));t()}catch(t){console.warn("Service worker setup failed:",t)}}),e.use(b),e.use(de),e.use(le,{i18next:Ae,rerenderOn:["languageChanged","loaded"]}),e.use(Te,{enableDevtoolsV6Plugin:!0,queryClient:Y}),e.use(pe,{theme:{preset:ge},ripple:!0,inputVariant:"outlined",inputStyle:"outlined",options:{prefix:"p",darkModeSelector:".scheme-dark",cssLayer:{name:"primevue",order:"tailwind-base, primevue, tailwind-utilities"}}}),e.use(Ke,{onKonamiCodeEntered:()=>{q.value=!q.value}}),e.use(Pe),e.component("Modal",Re),e.component("Button",$e),e.component("Card",_e),e.component("Dialog",Be),e.component("InputNumber",ye),e.component("InputText",he),e.component("MultiSelect",xe),e.component("ScrollPanel",ke),e.component("Select",Ce),e.component("Toast",we),e.component("Textarea",me),e.directive("ripple",be),e.directive("tooltip",ve),e.use(fe),e.use(Se),b.isReady().then(()=>{e.mount("#app")}),ce(9999,()=>{document.dispatchEvent(new Event("backbutton"))}),await U.addListener("backButton",async t=>{document.querySelector("video")||(console.log("Back button pressed",t),t.canGoBack?b.back():await U.exitApp())})}export{He as setupApp};
