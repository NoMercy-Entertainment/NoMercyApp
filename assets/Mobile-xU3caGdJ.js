import{C as x,Dt as B,Et as o,K as A,S as l,T as E,Y as p,Z as I,_t as v,bt as Y,c as K,g as O,j as q,k as y,kt as H,lt as D,st as _,x as i}from"./i18n-DXLa9EKW.js";import{Ni as G}from"./ionic-B9XaRwPa.js";import{x as U,y as Z}from"./vue-core-DBpBuPMK.js";import"./primevue-wrrgrfJj.js";import"./query-DJ5OsBey.js";import{t as J}from"./esm-Be6cX1mx.js";import{Kn as M,Ur as Q,Wn as X,Yn as ee,b as te,bi as ae,er as g,k as re,tr as b}from"./index-CLM6Y7vI.js";import"./useInfiniteServerClient-DbihGahL.js";import{t as se}from"./useServerClient-QYfn39K-.js";import"./DropdownMenu-YODpUXFi.js";import{t as oe}from"./ScrollContainer-aZQSs5X2.js";import"./MusicButton-E8_BNXYz.js";import"./BannerButton-BP0Yr5ty.js";import"./MediaLikeButton-CTr1VNS5.js";import{t as le}from"./Marquee-DSaBHCwo.js";import"./TrackLinks-BklweyNF.js";import"./BigPlayButton-78PG57Ny.js";import"./EqSpinner-BfqOSWo-.js";import{t as ie}from"./NotFound-BTw0r7lj.js";import"./ShareButton-fPfMKtEf.js";import{i as ne,n as ue,r as ce,t as de}from"./TrackRow-9Ck_qxs-.js";K();Z();var fe={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},pe={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},me=q({__name:"Mobile",setup(ve){const n=U(),k=i(()=>n.path.startsWith("/music/album")),w=i(()=>n.path.startsWith("/music/artist")),C=i(()=>n.path.startsWith("/music/playlists")),S=i(()=>n.path.startsWith("/music/tracks")),T=i(()=>n.path.startsWith("/music/genres")),W=i(()=>k.value?"album":w.value?"artist":C.value?"playlist":S.value?"favorite":T.value?"genre":"unknown"),P=i(()=>String(n.params.id??"")),{data:t,isError:R}=se({path:n.fullPath}),j=v(null),u=Y([]),f=v("");_(t,e=>{e&&(ae(e?.name??null),h(e?.tracks??[],b.value,g.value,f.value),M(e?.color_palette?.cover))},{immediate:!0}),_(g,e=>{h(t.value?.tracks??[],b.value,e,f.value)}),_(b,e=>{h(t.value?.tracks??[],e,g.value,f.value)}),_(f,e=>{h(t.value?.tracks??[],b.value,g.value,e)});function h(e,s,a,r){const c=Q(e??[],s,a,ee);r===""?u.value=c:u.value=c?.filter(d=>d.name?.toLowerCase().includes(r?.toLowerCase?.())||d.artist_track?.some($=>$.name.toLowerCase().includes(r?.toLowerCase?.()))||d.album_track?.[0]?.name.toLowerCase().includes(r?.toLowerCase?.()))??[]}A(()=>{t.value?.color_palette?.cover&&M(t.value?.color_palette?.cover)});function F(){re.back()}const m=v(!1),N=v(!1),z=v(),L=J(i(()=>({count:u.value?.length??0,getScrollElement:()=>X.value??null,estimateSize:()=>56,overscan:10,initialRect:{width:0,height:800}})));function V(){const a=G("capacitor")?88:64,r=z.value?.$el,c=r?.firstChild;if(!r||!c)return;const d=r.getBoundingClientRect().top;m.value=d<=170,N.value=d<=160,d<=a?document.documentElement.classList.contains("scheme-dark")?c.style.background="hsl(from var(--color-theme-8) h s 23%)":(c.style.background="var(--color-theme-8)",r.style.color="white"):(c.style.background="",r.style.color="")}return(e,s)=>o(R)&&!o(t)?(p(),x(ie,{key:0})):(p(),x(oe,{key:1,"auto-hide":!0,static:!0,onScroll:V},{default:D(()=>[l("div",{ref_key:"main",ref:j,class:"flex flex-col h-auto overflow-x-clip w-available sm:rounded-2xl -mt-6 text-surface-12"},[y(ce,{data:o(t)},null,8,["data"]),l("div",fe,[s[2]||(s[2]=l("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),l("div",{id:"navbar",class:B([{"opacity-0 pointer-events-none":!m.value,"opacity-100 pointer-events-auto":m.value},"fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-surface-11 dark:bg-surface-1 top-0 pt-4 transition-all duration-200"])},[s[1]||(s[1]=l("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-all duration-200 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),l("button",{class:"z-30 flex h-10 w-11 items-center justify-center rounded-md",onClick:F},[y(te,{icon:"arrowLeft"})]),l("div",{id:"navText",class:B([{"opacity-0 pointer-events-none":!m.value,"opacity-100 pointer-events-auto":m.value},"pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-all duration-200 w-[70%] overflow-clip text-xl"])},[y(le,{text:o(t)?.name},null,8,["text"])],2)],2),(p(),x(ne,{key:o(t)?.id,data:o(t),filter:f.value,onFilterChange:s[0]||(s[0]=a=>f.value=a)},null,8,["data","filter"])),l("div",pe,[(p(),x(ue,{key:o(t)?.id,ref_key:"sortHeader",ref:z,"is-album-route":k.value,"is-artist-route":w.value,"is-favorites-route":S.value,"is-genres-route":T.value,"is-playlists-route":C.value},null,8,["is-album-route","is-artist-route","is-favorites-route","is-genres-route","is-playlists-route"])),l("div",{style:H({height:`${o(L).getTotalSize()}px`,width:"100%",position:"relative"})},[(p(!0),E(O,null,I(o(L).getVirtualItems(),a=>(p(),E("div",{key:u.value[a.index]?.id+u.value[a.index]?.favorite,style:H({position:"absolute",top:0,left:0,width:"100%",height:`${a.size}px`,transform:`translateY(${a.start}px)`})},[y(de,{data:u.value[a.index],"display-list":u.value,index:a.index,"is-album-route":k.value,"is-artist-route":w.value,"is-favorites-route":S.value,"is-genres-route":T.value,"is-playlists-route":C.value,"route-param-id":P.value,"route-type":W.value},null,8,["data","display-list","index","is-album-route","is-artist-route","is-favorites-route","is-genres-route","is-playlists-route","route-param-id","route-type"])],4))),128))],4)])])],512)]),_:1}))}}),Fe=me;export{Fe as default};
