import"./useBaseQuery-B_FYPFZb.js";import"./useInfiniteServerClient-CWcViavg.js";import"./useQueryClient-DgPzfFPv.js";import"./useQuery-Pvalhcdd.js";import{As as r,Ba as b,Fo as l,Jo as h,Ta as w,Tr as T,U as i,Us as c,Va as S,Vs as C,Ys as I,_a as B,_n as U,an as V,da as x,fi as A,hs as D,i as t,nc as p,os as v,ps as H,ri as d,rs as N,ss as f,za as z}from"./index-vyVLvOi8.js";import{s as n}from"./imageModal-D03y4Dpf.js";import{t as F}from"./useServerClient-43vBeAdz.js";import{a as L,n as M,o as j,r as E,s as J}from"./VideoPlayer-BUVst9L5.js";import"./buttons-CaJv4k3N.js";import{t as R}from"./keyHandlerPlugin-W7L2EOo0.js";h();z();var Y=D({__name:"Tv",setup(q){const{data:o}=F({}),e=I();function u(a){const s={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:a?.filter(k=>!!k.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:d.value?.accessToken||localStorage.getItem("access_token")||"",basePath:T.value?.serverBaseUrl,forceTvMode:(l("android")||l("ios"))&&!l("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||l("capacitor"),renderAhead:10};e.value?.dispose(),e.value=E("player1").setup(s);const g=new L;e.value?.registerPlugin("tvUI",g),e.value?.usePlugin("tvUI");const m=new j;e.value?.registerPlugin("autoSkip",m),e.value?.usePlugin("autoSkip");const y=new R;e.value?.registerPlugin("keyHandler",y),e.value?.usePlugin("keyHandler");const _=new J;e.value?.registerPlugin("sync",_),e.value?.usePlugin("sync");const P=new M;e.value?.registerPlugin("octopus",P),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?t.back():t.replace("/")}),e.value?.on("dispose",()=>{A(),U(),history.state.back?t.back():t.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{n(!0)}),e.value?.on("pause",()=>{n(!1)}),e.value?.on("ready",()=>{V(),i.stop()}),e.value?.on("item",()=>{e.value?.play()}),x.addListener("backButton",()=>{e.value?.emit("back-button"),e.value?.emit("back-button-hyjack")})}return C(o,a=>{a?.length&&u(a)}),b(()=>{i.stop(),d.value.features?.nomercyConnect?u():o.value?.length&&u(o.value)}),S(()=>{e.value?.dispose(),n(!1)}),(a,s)=>(r(),f(p(w),null,{default:c(()=>[H(p(B),{fullscreen:!0},{default:c(()=>[(r(),f(N,{to:"body"},[s[0]||(s[0]=v("div",{class:"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"},[v("div",{id:"player1",class:"group nomercyplayer"})],-1))]))]),_:1})]),_:1}))}}),se=Y;export{se as default};
