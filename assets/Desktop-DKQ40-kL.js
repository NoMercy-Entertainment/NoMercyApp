import{aw as w,o as l,e as u,a7 as t,a as _,aG as I,c as $,t as c,bt as R,b1 as k,I as C,aB as o,q as S,v as s,a6 as m,z as x,u as q,F as L,bE as N,bF as z,bv as v,bg as F}from"./index-ORB3lPw8.js";import{_ as V}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-VweTMLJn.js";import{_ as j}from"./DashboardCard.vue_vue_type_script_setup_true_lang-DzmH5VgS.js";import"./FloatingBackButton.vue_vue_type_script_setup_true_lang-Di8YQGsO.js";import"./Button.vue_vue_type_script_setup_true_lang-9iO3s-8S.js";const D={class:"relative flex aspect-video flex-shrink-0 flex-grow-0 flex-col items-center justify-center self-stretch overflow-clip rounded-lg bg-theme-11 dark:bg-theme-8 text-slate-light-12/80 dark:text-slate-dark-12/80"},E={key:1,class:"text-xl font-bold"},K=w({__name:"LibraryCard",props:{data:{type:Object,required:!0}},setup(e){return(y,i)=>{var n,a,d;return l(),u(j,{route:`/dashboard/libraries/${e.data.id}`,line1:e.data.title,line2:e.data.folder_library&&((n=e.data.folder_library)==null?void 0:n.length)!=1?`${(a=e.data.folder_library)==null?void 0:a.length} folders`:`${(d=e.data.folder_library)==null?void 0:d.length}  folder`},{image:t(()=>[_("div",D,[i[0]||(i[0]=_("div",{class:"backdropCard-overlay"},null,-1)),e.data.image?(l(),u(I,{key:0,path:e.data.image,class:"z-0"},null,8,["path"])):(l(),$("span",E,c(e.data.title),1))])]),_:1},8,["route","line1","line2"])}}}),P=w({__name:"Desktop",setup(e){var g;const{data:y,error:i}=R({path:"dashboard/libraries",queryKey:["dashboard","libraries",(g=k.value)==null?void 0:g.serverBaseUrl]}),n=()=>{v().post("dashboard/libraries").then(({data:r})=>{var b;F.invalidateQueries({queryKey:["dashboard","libraries",(b=k.value)==null?void 0:b.serverBaseUrl]})})},a=C(!1),d=()=>{a.value=!0,v().post("dashboard/libraries/refresh").then(({data:r})=>{a.value=!1}).catch(()=>{a.value=!1})},f=C(!1),B=()=>{f.value=!0,v().post("dashboard/libraries/rescan").then(({data:r})=>{f.value=!1}).catch(()=>{f.value=!1})};return(r,b)=>{const h=S("Button");return l(),u(o(z),null,{default:t(()=>[s(o(N),{fullscreen:!0},{default:t(()=>[s(V,{error:o(i),gridStyle:1,title:"Libraries",description:"Manage your media libraries and their content here."},{cta:t(()=>[s(h,{id:"newLibrary",color:"theme",startIcon:"folderAdd",onClick:n},{default:t(()=>[m(c(r.$t("New library")),1)]),_:1})]),actions:t(()=>[s(h,{type:"button",id:"refresh",variant:"text",startIcon:"folderSwap",disabled:a.value,class:x(a.value?"first:children:animate-spin cursor-not-allowed":""),onClick:d},{default:t(()=>[m(c(r.$t("Refresh all libraries")),1)]),_:1},8,["disabled","class"]),s(h,{type:"button",id:"rescan",variant:"text",startIcon:"folderSwap",disabled:a.value,class:x(a.value?"first:children:animate-spin cursor-not-allowed":""),onClick:B},{default:t(()=>[m(c(r.$t("Rescan all libraries")),1)]),_:1},8,["disabled","class"])]),default:t(()=>[(l(!0),$(L,null,q(o(y)??[],p=>(l(),u(K,{key:p.id,data:p},null,8,["data"]))),128))]),_:1},8,["error"])]),_:1})]),_:1})}}});export{P as default};
//# sourceMappingURL=Desktop-DKQ40-kL.js.map
