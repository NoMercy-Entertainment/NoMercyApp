import{B as P,D as _,Ht as w,In as C,Qn as h,Qt as I,Rn as c,Tn as m,V as M,Wn as S,Zn as s,cn as B,jt as l,nn as d,tn as v,un as N,x as T}from"./index-04Sh3wNb.js";import"./dist-CVoPesok.js";import{t as x}from"./esm-BuFVrMo0.js";import"./esm-9iWgK55i.js";import"./esm-cDzTb79E.js";import"./esm-BfF1RlcU.js";import"./dist-B3n7-doU.js";import"./focus-visible-CHAJCf_J.js";import"./index5-B30D6T27.js";import"./client-rtF7IPPI.js";import"./ionic-global--aoJHCDL.js";import"./hardware-back-button-h528z6zo.js";import"./index3-CSo3jo06.js";import"./helpers-CXS86XKs.js";import"./index6-CZ6rqL_0.js";import"./index8-BpkFXja0.js";import"./keyboard-cU79cwdW.js";import"./index2-op38TIl9.js";import"./ios.transition-C8T7q-Bo.js";import"./keyboard2-DETZ41vp.js";import"./md.transition-BqH5iNQr.js";import"./dir-BUtgAzbR.js";import"./ui-BT6EUdI0.js";import"./client-DMa-uSBE.js";import{t as D}from"./currentServer-B7-kbkE-.js";import"./config-BOA2pGQM.js";import"./esm-CcKFjObu.js";import{p as f}from"./global-gyhCjh_P.js";import"./esm-BuRgllmc.js";import{c as t}from"./user-C1ciKa7-.js";import"./serverClient-FHPKIHPu.js";import{t as a}from"./router-C_xBvmya.js";import"./utils-D5DD-7jP.js";import"./useBaseQuery-CNJp2kAB.js";import"./useInfiniteServerClient-By5CuBlL.js";import{l as y}from"./SocketClient-DPmgFkP-.js";import"./useQueryClient-s6ZLwuD6.js";import"./useQuery-C7DDAmeN.js";import"./apiClient-Cw7f36ko.js";import"./notifications-Bi_dU6lP.js";import{c as V,i as U,l as A,r as L,y as j}from"./utils-CdenF_Jv.js";import"./bundle-mjs-Xm_uQvzT.js";import"./deviceInfo-Bcw3-ht5.js";import"./helpers-fSCF1qXj.js";import"./auth-DfyD43WY.js";import{s as p}from"./imageModal-B_AIV_up.js";import{t as z}from"./useServerClient-CroZbKWw.js";import{a as Q,i as R,n as E,o as F,r as H}from"./VideoPlayer-CsmL19GD.js";import"./buttons-AECXFI2V.js";import{t as O}from"./videoNoMercyConnectPlugin-CO-bHnZm.js";w();var W=N({__name:"Mobile",setup(Z){const{data:n}=z({enabled:!t.value.features?.nomercyConnect}),e=S();function u(o){const i={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:o?.filter(r=>!!r.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:t.value?.accessToken||localStorage.getItem("access_token")||"",basePath:D.value?.serverBaseUrl,imageBasePath:"https://app.nomercy.tv/tmdb-images",forceTvMode:(l("android")||l("ios"))&&!l("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||l("capacitor"),renderAhead:100,disableAutoPlayback:t.value.features?.nomercyConnect};if(e.value=H("player1").setup(i),e.value?.once("back",()=>{history.state.back?a.back():a.replace("/")}),t.value.features?.nomercyConnect){const r=new O;e.value?.registerPlugin("videoNoMercyConnect",r),e.value?.usePlugin("videoNoMercyConnect")}const g=new R;e.value?.registerPlugin("desktopUI",g),e.value?.usePlugin("desktopUI");const b=new Q;if(e.value?.registerPlugin("autoSkip",b),e.value?.usePlugin("autoSkip"),!t.value.features?.nomercyConnect){const r=new F;e.value?.registerPlugin("sync",r),e.value?.usePlugin("sync")}const k=new E;e.value?.registerPlugin("octopus",k),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?a.back():a.replace("/")}),e.value?.on("dispose",async()=>{await A(),await L(),history.state.back?a.back():await a.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{p(!0)}),e.value?.on("pause",()=>{p(!1)}),e.value?.on("ready",async()=>{await V(),await j(),await U(),y.stop()}),e.value?.on("item",()=>{e.value?.play()}),x.addListener("backButton",()=>{e.value?.emit("back-button-hyjack"),e.value?.dispose()})}return C(n,o=>{o?.length&&u(o)}),P(()=>{y.stop(),t.value.features?.nomercyConnect?u():n.value?.length&&u(n.value)}),M(()=>{e.value?.dispose(),p(!1)}),(o,i)=>(m(),d(s(_),null,{default:c(()=>[B(s(T),{fullscreen:!0},{default:c(()=>[(m(),d(I,{to:"body"},[v("div",{class:h([{"mb-28":s(f),"mb-0":!s(f)},"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"])},[...i[0]||(i[0]=[v("div",{id:"player1",class:"group nomercyplayer"},null,-1)])],2)]))]),_:1})]),_:1}))}}),He=W;export{He as default};
