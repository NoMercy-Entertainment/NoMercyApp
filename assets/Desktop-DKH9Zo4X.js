import{aG as X,bD as Y,K as l,L as t,az as Z,ax as ee,bB as re,v as se,j as oe,o as V,a7 as v,x as u,aI as i,bP as ae,c as y,h as S,a,ba as R,t as T,aR as le,bE as te,a6 as ne,bO as ue,bI as ie,bF as de}from"./index-DbxIITaY.js";import{_ as _e}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-By9USuDv.js";import{a as me}from"./index-f9a7WiGz.js";import{s as q}from"./index-B4dCugG7.js";import"./FloatingBackButton.vue_vue_type_script_setup_true_lang-Dp6rriM-.js";import"./Button.vue_vue_type_script_setup_true_lang-BbTZel8q.js";const ve={key:0,class:"col-span-2 col-start-1 2xl:col-start-1"},pe={class:"flex flex-col gap-2"},fe={class:"flex flex-col gap-2"},we={class:"flex flex-col gap-2"},ce={key:1,class:"col-span-2 col-start-1 2xl:col-start-3"},ge={class:"flex flex-col gap-2"},ke={class:"flex flex-col gap-2"},be={class:"flex flex-col gap-2"},xe={key:2,class:"col-span-2 col-start-1 2xl:col-start-5"},Ve={class:"flex flex-col gap-2"},qe={class:"flex gap-4"},Be=["aria-label","href"],Ne=X({__name:"Desktop",setup(ye){var G,$,N,O,h,P,D,E,Q,j;const{data:s,refetch:L,error:M}=Y({path:"/dashboard/configuration"}),p=l(!1),n=l(s.value??{}),d=(e,r)=>{if(s.value){if(ie(s.value[e])==r){delete n.value[e],n.value={...n.value};return}n.value={...n.value,[e]:r??void 0}}};t(s,e=>{e&&(n.value={},f.value=e==null?void 0:e.server_name,w.value=e==null?void 0:e.external_server_port,c.value=e==null?void 0:e.internal_server_port,g.value=e==null?void 0:e.queue_workers,C.value=e==null?void 0:e.cron_workers,U.value=e==null?void 0:e.data_workers,I.value=e==null?void 0:e.request_workers,b.value=e==null?void 0:e.encoder_workers,k.value=e==null?void 0:e.image_workers,_.value=e==null?void 0:e.swagger,p.value=!0)}),Z(()=>{var e,r,B,m,x,o,z,A,F,K;s.value&&(n.value={},f.value=(e=s.value)==null?void 0:e.server_name,w.value=(r=s.value)==null?void 0:r.external_server_port,c.value=(B=s.value)==null?void 0:B.internal_server_port,g.value=(m=s.value)==null?void 0:m.queue_workers,C.value=(x=s.value)==null?void 0:x.cron_workers,U.value=(o=s.value)==null?void 0:o.data_workers,I.value=(z=s.value)==null?void 0:z.request_workers,b.value=(A=s.value)==null?void 0:A.encoder_workers,k.value=(F=s.value)==null?void 0:F.image_workers,_.value=(K=s.value)==null?void 0:K.swagger,p.value=!0)});const f=l(((G=s.value)==null?void 0:G.server_name)??"");t(f,e=>{d("server_name",e)});const w=l((($=s.value)==null?void 0:$.external_server_port)??0);t(w,e=>{d("external_server_port",e)});const c=l(((N=s.value)==null?void 0:N.internal_server_port)??0);t(c,e=>{d("internal_server_port",e)});const g=l(((O=s.value)==null?void 0:O.queue_workers)??0);t(g,e=>{d("queue_workers",e)});const C=l(((h=s.value)==null?void 0:h.cron_workers)??0);t(C,e=>{d("cron_workers",e)});const U=l(((P=s.value)==null?void 0:P.data_workers)??0);t(U,e=>{d("data_workers",e)});const I=l(((D=s.value)==null?void 0:D.request_workers)??0);t(I,e=>{d("request_workers",e)});const k=l(((E=s.value)==null?void 0:E.image_workers)??0);t(k,e=>{d("image_workers",e)});const b=l(((Q=s.value)==null?void 0:Q.encoder_workers)??0);t(b,e=>{d("encoder_workers",e)});const _=l(((j=s.value)==null?void 0:j.swagger)??!1);t(_,e=>{d("swagger",e)});const H=ee(()=>Object.keys(n.value).length>0);t(n,e=>{console.log(e)});const J=re(),W=()=>{console.raw(n.value),de().patch("/dashboard/configuration",n.value).then(()=>{L(),J.invalidateQueries({queryKey:["serverInfo"]})})};return(e,r)=>{const B=se("Button");return V(),oe(i(ue),null,{default:v(()=>[u(i(ae),{fullscreen:!0},{default:v(()=>[u(_e,{error:i(M),gridStyle:2,title:"General",description:""},{cta:v(()=>r[8]||(r[8]=[])),actions:v(()=>[u(B,{type:"submit",id:"save",disabled:!H.value,color:"theme",class:"ml-auto",form:"myForm",onClick:r[7]||(r[7]=m=>W())},{default:v(()=>[ne(T(e.$t("Save")),1)]),_:1},8,["disabled"])]),default:v(()=>{var m,x;return[p.value?(V(),y("div",ve,[a("div",pe,[r[9]||(r[9]=a("label",{for:"server_name"},"Server name",-1)),u(i(me),{id:"server_name",modelValue:f.value,"onUpdate:modelValue":r[0]||(r[0]=o=>f.value=o),class:"mb-4"},null,8,["modelValue"])]),a("div",fe,[r[10]||(r[10]=a("label",{for:"internal_server_port"},"Secure internal port",-1)),u(i(q),{id:"internal_server_port",modelValue:c.value,"onUpdate:modelValue":r[1]||(r[1]=o=>c.value=o),class:"mb-4",useGrouping:!1,showButtons:"",min:2e3},null,8,["modelValue"])]),a("div",we,[r[11]||(r[11]=a("label",{for:"external_server_port"},"Secure external port",-1)),u(i(q),{id:"external_server_port",modelValue:w.value,"onUpdate:modelValue":r[2]||(r[2]=o=>w.value=o),class:"mb-4",useGrouping:!1,showButtons:"",min:2e3},null,8,["modelValue"])])])):S("",!0),p.value?(V(),y("div",ce,[a("div",ge,[r[12]||(r[12]=a("label",{for:"encoder_workers"},"Encoder workers",-1)),u(i(q),{id:"encoder_workers",modelValue:b.value,"onUpdate:modelValue":r[3]||(r[3]=o=>b.value=o),class:"mb-4",useGrouping:!1,showButtons:"",min:0},null,8,["modelValue"])]),a("div",ke,[r[13]||(r[13]=a("label",{for:"image_workers"},"Image workers",-1)),u(i(q),{id:"image_workers",modelValue:k.value,"onUpdate:modelValue":r[4]||(r[4]=o=>k.value=o),class:"mb-4",useGrouping:!1,showButtons:"",min:0},null,8,["modelValue"])]),a("div",be,[r[14]||(r[14]=a("label",{for:"queue_workers"},"Queue workers",-1)),u(i(q),{id:"queue_workers",modelValue:g.value,"onUpdate:modelValue":r[5]||(r[5]=o=>g.value=o),class:"mb-4",useGrouping:!1,showButtons:"",min:0},null,8,["modelValue"])])])):S("",!0),p.value?(V(),y("div",xe,[a("div",Ve,[a("span",qe,[r[15]||(r[15]=a("label",{for:"swagger"},"Open API / Swagger Ui",-1)),_.value&&((m=i(R))!=null&&m.serverBaseUrl)?(V(),y("a",{key:0,target:"_blank","aria-label":e.$t("Open API / Swagger Ui in a new tab"),href:(x=i(R))==null?void 0:x.serverBaseUrl,class:"flex gap-1 items-center underline underline-offset-4 h-4 text-sm"},[a("span",null,T(e.$t("Open")),1),u(le,{icon:"shareSquare",className:"size-4",color:"theme"})],8,Be)):S("",!0)]),u(te,{"model-value":_.value,"onUpdate:modelValue":r[6]||(r[6]=o=>_.value=o)},null,8,["model-value"])])])):S("",!0)]}),_:1},8,["error"])]),_:1})]),_:1})}}});export{Ne as default};
//# sourceMappingURL=Desktop-DKH9Zo4X.js.map
