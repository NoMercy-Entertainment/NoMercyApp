import{C as g,Ct as t,Et as W,J as O,K as f,S as n,T as z,U,_t as Y,c as q,g as G,it as k,j as J,k as _,mt as m,ot as I,w as K,wt as V,x as u}from"./i18n-Rm1NkeNf.js";import{ya as X}from"./ionic-vX7GXDhi.js";import{C as D,R as Q,U as Z,W as ee,_ as te}from"./vue-core-ChFWZS_w.js";import"./primevue-DkuV93HA.js";import"./query-BPfDyGC_.js";import{t as ae}from"./esm-CJ_npMp9.js";import{Rr as re,Vn as L,Wn as se,Xn as h,Yn as y,b as oe,hi as le,k as ie}from"./index-Dfm86O85.js";import"./DropdownMenu-BH2A7eLV.js";import"./useInfiniteServerClient-BKxCqg1l.js";import{t as ne}from"./useServerClient-Br1zrBCB.js";import"./MusicButton-DOwQUOio.js";import"./BannerButton-X7AerRvE.js";import"./MediaLikeButton-BKgIwHg8.js";import{t as ue}from"./Marquee-BQKlPReF.js";import"./TrackLinks-lEc-P7do.js";import"./BigPlayButton-BbCgqdPA.js";import"./EqSpinner-Bh8rWJeI.js";import{t as ce}from"./NotFound-C74lJWpj.js";import"./ShareButton--7q1hvh0.js";import{i as de,n as pe,r as fe,t as ve}from"./TrackRow-BUcpJGrk.js";q();Z();var me={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},he={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},ye=J({__name:"Mobile",setup(xe){const s=ee(),b=u(()=>s.path.startsWith("/music/album")),w=u(()=>s.path.startsWith("/music/artist")),C=u(()=>s.path.startsWith("/music/playlists")),S=u(()=>s.path.startsWith("/music/tracks")),T=u(()=>s.path.startsWith("/music/genres")),M=u(()=>b.value?"album":w.value?"artist":C.value?"playlist":S.value?"favorite":T.value?"genre":"unknown"),P=u(()=>String(s.params.id??"")),{data:e,isError:R}=ne({path:s.fullPath}),$=m(null),c=Y([]),i=m("");k(e,a=>{le(a?.name??null),v(a?.tracks??[],h.value,y.value,i.value),L(a?.color_palette?.cover)}),k(y,a=>{v(e.value?.tracks??[],h.value,a,i.value)}),k(h,a=>{v(e.value?.tracks??[],a,y.value,i.value)}),k(i,a=>{v(e.value?.tracks??[],h.value,y.value,a)});function v(a,l,r,o){const d=re(a??[],l,r,se);o===""?c.value=d:c.value=d?.filter(p=>p.name?.toLowerCase().includes(o?.toLowerCase?.())||p.artist_track?.some(A=>A.name.toLowerCase().includes(o?.toLowerCase?.()))||p.album_track?.[0]?.name.toLowerCase().includes(o?.toLowerCase?.()))??[]}U(()=>{v(e?.value?.tracks??[],h.value,y.value,i.value),e.value?.color_palette?.cover&&L(e.value?.color_palette?.cover)}),Q(()=>{v(e?.value?.tracks??[],h.value,y.value,i.value),e.value?.color_palette?.cover&&L(e.value?.color_palette?.cover)});function j(){ie.back()}const x=m(!1),F=m(!1),B=m(),E=m(),H=ae(u(()=>({count:c.value?.length??0,getScrollElement:()=>E.value?.$el??null,estimateSize:()=>56,overscan:10})));function N(){const r=X("capacitor")?88:64,o=B.value?.$el,d=o?.firstChild;if(!o||!d)return;const p=o.getBoundingClientRect().top;x.value=p<=170,F.value=p<=160,p<=r?document.documentElement.classList.contains("scheme-dark")?d.style.background="hsl(from var(--color-theme-8) h s 23%)":(d.style.background="var(--color-theme-8)",o.style.color="white"):(d.style.background="",o.style.color="")}return(a,l)=>(f(),g(t(D),null,{default:I(()=>[_(t(te),{ref_key:"container",ref:E,"scroll-events":!0,onIonScroll:N},{default:I(()=>[t(R)&&!t(e)?(f(),g(ce,{key:0})):!t(s).params.id||t(s).params.id&&t(e)?.id===t(s).params.id?(f(),z("div",{key:1,ref_key:"main",ref:$,class:"flex flex-col h-auto overflow-x-clip w-available sm:rounded-2xl -mt-6 text-surface-12"},[_(fe,{data:t(e)},null,8,["data"]),n("div",me,[l[2]||(l[2]=n("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),n("div",{id:"navbar",class:V([{"opacity-0 pointer-events-none":!x.value,"opacity-100 pointer-events-auto":x.value},"fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-surface-11 dark:bg-surface-1 top-0 pt-4 transition-all duration-200"])},[l[1]||(l[1]=n("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-all duration-200 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),n("button",{class:"z-30 flex h-10 w-11 items-center justify-center rounded-md",onClick:j},[_(oe,{icon:"arrowLeft"})]),n("div",{id:"navText",class:V([{"opacity-0 pointer-events-none":!x.value,"opacity-100 pointer-events-auto":x.value},"pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-all duration-200 w-[70%] overflow-clip text-xl"])},[_(ue,{text:t(e)?.name},null,8,["text"])],2)],2),(f(),g(de,{key:t(e)?.id,data:t(e),filter:i.value,onFilterChange:l[0]||(l[0]=r=>i.value=r)},null,8,["data","filter"])),n("div",he,[(f(),g(pe,{key:t(e)?.id,ref_key:"sortHeader",ref:B,"is-album-route":b.value,"is-artist-route":w.value,"is-playlists-route":C.value,"is-favorites-route":S.value,"is-genres-route":T.value},null,8,["is-album-route","is-artist-route","is-playlists-route","is-favorites-route","is-genres-route"])),n("div",{style:W({height:`${t(H).getTotalSize()}px`,width:"100%",position:"relative"})},[(f(!0),z(G,null,O(t(H).getVirtualItems(),r=>(f(),z("div",{key:c.value[r.index]?.id+c.value[r.index]?.favorite,style:W({position:"absolute",top:0,left:0,width:"100%",height:`${r.size}px`,transform:`translateY(${r.start}px)`})},[_(ve,{data:c.value[r.index],"display-list":c.value,index:r.index,"is-album-route":b.value,"is-artist-route":w.value,"is-playlists-route":C.value,"is-favorites-route":S.value,"is-genres-route":T.value,"route-type":M.value,"route-param-id":P.value},null,8,["data","display-list","index","is-album-route","is-artist-route","is-playlists-route","is-favorites-route","is-genres-route","route-type","route-param-id"])],4))),128))],4)])])],512)):K("",!0)]),_:1},512)]),_:1}))}}),je=ye;export{je as default};
