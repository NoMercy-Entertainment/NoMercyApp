import{C as z,Dt as B,Et as a,K as R,S as i,T as L,Y as d,Z as $,_t as p,bt as A,c as Y,g as K,j as O,k as v,kt as H,st as x,w as q,x as l}from"./i18n-DBb78QAI.js";import"./ionic-DNKsarlx.js";import{I as D,P as G}from"./vue-core-CD3ScEG4.js";import"./primevue-CDzFprnl.js";import"./query-Dwz_k4KB.js";import{t as U}from"./esm-BRj3B_Z9.js";import{Kn as M,Ur as Z,Yn as J,b as Q,bi as X,er as y,k as ee,tr as h}from"./index-Dbw70ZKS.js";import"./useInfiniteServerClient-BG6feyia.js";import{t as te}from"./useServerClient-CIpZVCqE.js";import"./DropdownMenu-C9pZeVha.js";import"./MusicButton-C9LuPY-w.js";import"./BannerButton-UElmt47M.js";import"./MediaLikeButton-DXh7wU4B.js";import{t as ae}from"./Marquee-Byzdih_c.js";import"./TrackLinks-DgZCZc31.js";import"./BigPlayButton-D77lo1NX.js";import"./EqSpinner-DwscwGf1.js";import{t as re}from"./NotFound-ChmUPC8r.js";import"./ShareButton-DWJxb6mN.js";import{i as se,n as oe,r as ie,t as le}from"./TrackRow-DTMQeRnu.js";Y();G();var ue={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},ne={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},de=O({__name:"Mobile",setup(pe){const r=D(),_=l(()=>r.path.startsWith("/music/album")),b=l(()=>r.path.startsWith("/music/artist")),g=l(()=>r.path.startsWith("/music/playlists")),k=l(()=>r.path.startsWith("/music/tracks")),w=l(()=>r.path.startsWith("/music/genres")),P=l(()=>_.value?"album":b.value?"artist":g.value?"playlist":k.value?"favorite":w.value?"genre":"unknown"),V=l(()=>String(r.params.id??"")),{data:t,isError:W}=te({path:r.fullPath}),j=p(null),u=A([]),n=p("");x(t,e=>{e&&(X(e?.name??null),f(e?.tracks??[],h.value,y.value,n.value),M(e?.color_palette?.cover))},{immediate:!0}),x(y,e=>{f(t.value?.tracks??[],h.value,e,n.value)}),x(h,e=>{f(t.value?.tracks??[],e,y.value,n.value)}),x(n,e=>{f(t.value?.tracks??[],h.value,y.value,e)});function f(e,o,s,m){const T=Z(e??[],o,s,J);m===""?u.value=T:u.value=T?.filter(C=>C.name?.toLowerCase().includes(m?.toLowerCase?.())||C.artist_track?.some(N=>N.name.toLowerCase().includes(m?.toLowerCase?.()))||C.album_track?.[0]?.name.toLowerCase().includes(m?.toLowerCase?.()))??[]}R(()=>{t.value?.color_palette?.cover&&M(t.value?.color_palette?.cover)});function E(){ee.back()}const c=p(!1);p(!1);const F=p(),I=p(),S=U(l(()=>{const e=I.value?.$el??null;return{count:u.value?.length??0,getScrollElement:()=>e,estimateSize:()=>56,overscan:10,initialRect:{width:0,height:800}}}));return(e,o)=>a(W)&&!a(t)?(d(),z(re,{key:0})):!a(r).params.id||a(r).params.id&&a(t)?.id===a(r).params.id?(d(),L("div",{key:1,ref_key:"main",ref:j,class:"flex flex-col h-auto overflow-x-clip w-available sm:rounded-2xl -mt-6 text-surface-12"},[v(ie,{data:a(t)},null,8,["data"]),i("div",ue,[o[2]||(o[2]=i("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),i("div",{id:"navbar",class:B([{"opacity-0 pointer-events-none":!c.value,"opacity-100 pointer-events-auto":c.value},"fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-surface-11 dark:bg-surface-1 top-0 pt-4 transition-all duration-200"])},[o[1]||(o[1]=i("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-all duration-200 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),i("button",{class:"z-30 flex h-10 w-11 items-center justify-center rounded-md",onClick:E},[v(Q,{icon:"arrowLeft"})]),i("div",{id:"navText",class:B([{"opacity-0 pointer-events-none":!c.value,"opacity-100 pointer-events-auto":c.value},"pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-all duration-200 w-[70%] overflow-clip text-xl"])},[v(ae,{text:a(t)?.name},null,8,["text"])],2)],2),(d(),z(se,{key:a(t)?.id,data:a(t),filter:n.value,onFilterChange:o[0]||(o[0]=s=>n.value=s)},null,8,["data","filter"])),i("div",ne,[(d(),z(oe,{key:a(t)?.id,ref_key:"sortHeader",ref:F,"is-album-route":_.value,"is-artist-route":b.value,"is-playlists-route":g.value,"is-favorites-route":k.value,"is-genres-route":w.value},null,8,["is-album-route","is-artist-route","is-playlists-route","is-favorites-route","is-genres-route"])),i("div",{style:H({height:`${a(S).getTotalSize()}px`,width:"100%",position:"relative"})},[(d(!0),L(K,null,$(a(S).getVirtualItems(),s=>(d(),L("div",{key:u.value[s.index]?.id+u.value[s.index]?.favorite,style:H({position:"absolute",top:0,left:0,width:"100%",height:`${s.size}px`,transform:`translateY(${s.start}px)`})},[v(le,{data:u.value[s.index],"display-list":u.value,index:s.index,"is-album-route":_.value,"is-artist-route":b.value,"is-playlists-route":g.value,"is-favorites-route":k.value,"is-genres-route":w.value,"route-type":P.value,"route-param-id":V.value},null,8,["data","display-list","index","is-album-route","is-artist-route","is-playlists-route","is-favorites-route","is-genres-route","route-type","route-param-id"])],4))),128))],4)])])],512)):q("",!0)}}),Pe=de;export{Pe as default};
