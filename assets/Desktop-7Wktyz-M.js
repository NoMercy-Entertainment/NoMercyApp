import{aG as K,br as q,e9 as G,az as $,ck as H,aY as B,aV as U,L as I,ax as Y,b3 as Z,cr as A,K as g,d7 as J,j as d,o as n,a7 as v,x as O,aI as s,b$ as Q,bS as W,bh as N,c as p,C as S,bi as h,bj as b,a as X,F as _,w as P,h as R,bZ as ee}from"./index-BRRsWqGl.js";import{_ as ae}from"./MediaCard.vue_vue_type_script_setup_true_lang-C4DDNcUd.js";import{_ as se}from"./PersonCard.vue_vue_type_script_setup_true_lang-ChXExhbv.js";import{_ as ne,a as oe}from"./EmptyCard.vue_vue_type_script_setup_true_lang-yKAZXM48.js";import{_ as re}from"./NotFound.vue_vue_type_script_setup_true_lang-B0QM8bDA.js";import"./CardIndicator.vue_vue_type_script_setup_true_lang-8uQ_wYXN.js";import"./NoResultImage.vue_vue_type_script_setup_true_lang-Bni3Wpr1.js";const te="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",le="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",xe=K({__name:"Desktop",setup(de){const c=q(),{data:r,fetchNextPage:m,hasNextPage:y,isError:T}=G({queryKey:["libraries",(c==null?void 0:c.params.id)??c.name],limit:20,keepForever:!0});$(()=>{H(),B(null),U(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),I(r,a=>{a&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const V=Y(()=>{var o,l,t,u;const a=(u=(t=(l=(o=r.value)==null?void 0:o.pages)==null?void 0:l[0])==null?void 0:t.data)==null?void 0:u[0];return a&&Z.value&&a.media_type!=="person"&&a.media_type!=="genres"});A(()=>{stop(),B(null)});const z=g(),D=g();$(()=>{var a,o;D.value=c.params.id??c.name,y.value&&(((o=(a=r==null?void 0:r.value)==null?void 0:a.pages)==null?void 0:o.length)??0)<50&&m(),document.addEventListener("scrollToDiv",l=>{var t;(t=z.value)==null||t.scrollTo({top:l.detail.top-100,behavior:"smooth"})})}),J(()=>{document.dispatchEvent(new Event("indexer"))}),I(r,a=>{var o;a&&y.value&&((o=a==null?void 0:a.pages)==null?void 0:o.length)<50&&m()});const F=g(),L=g(),f=(a,o)=>{F.value=o,L.value.show(a)};return(a,o)=>(n(),d(s(ee),null,{default:v(()=>[O(s(Q),{fullscreen:!0},{default:v(()=>{var l;return[s(T)&&!((l=s(r))!=null&&l.pages)?(n(),d(re,{key:0})):(n(),d(W,{key:1,autoHide:!0,static:!0,id:s(N).currentRoute.value.fullPath},{default:v(()=>{var t,u;return[(n(),p("div",{ref:"containerRef",class:S(["z-0 flex flex-col gap-4 rounded-3xl border-0 p-4 w-available scrollbar-none border-auto-3 transform-gpu will-change-auto",{"pb-24":s(h)&&!s(b),"pb-40":s(h)&&s(b),"children:pb-4 sm:children:pb-3":!s(h)&&s(b)}]),key:(t=s(N).currentRoute.value.params)==null?void 0:t.id},[X("div",{class:S(`grid w-full gap-4 scroll-smooth music-showing:pb-0 whitespace-pre ${V.value?te:le}`)},[(n(!0),p(_,null,P(((u=s(r))==null?void 0:u.pages)??[],(k,j)=>{var C,w,E,M;return n(),p(_,{key:j},[k.data.length>0?(n(!0),p(_,{key:0},P(k.data??[],(e,x)=>(n(),p(_,null,[(e==null?void 0:e.media_type)==="tv"||(e==null?void 0:e.media_type)=="movie"||(e==null?void 0:e.media_type)=="collection"||(e==null?void 0:e.media_type)=="specials"?(n(),d(ae,{key:e.id,data:e,onContextMenu:i=>f(i,e),index:x},null,8,["data","onContextMenu","index"])):(e==null?void 0:e.media_type)==="person"?(n(),d(se,{key:e.id+"_person",data:e,onContextMenu:i=>f(i,e),index:x},null,8,["data","onContextMenu","index"])):(e==null?void 0:e.media_type)==="genres"?(n(),d(ne,{key:e.id+"_genres",data:e,onContextMenu:i=>f(i,e),index:x},null,8,["data","onContextMenu","index"])):R("",!0)],64))),256)):((M=(E=(w=(C=s(r))==null?void 0:C.pages)==null?void 0:w[0])==null?void 0:E.data)==null?void 0:M.length)==0?(n(),d(oe,{key:1})):R("",!0)],64)}),128))],2)],2))]}),_:1},8,["id"]))]}),_:1})]),_:1}))}});export{xe as default};
