import{Ht as h,Wn as n,en as p}from"./index-04Sh3wNb.js";import{y as l}from"./client-DMa-uSBE.js";import{t as b,u as i}from"./currentServer-B7-kbkE-.js";import{a as _}from"./user-C1ciKa7-.js";import{t as s}from"./serverClient-FHPKIHPu.js";import{l as c,t as r,u as d}from"./router-C_xBvmya.js";import{t as v}from"./musicPlaylists-CCn4HshY.js";h();var y=(a,e)=>s().get(a);function g(a,e){return s().put(a,{data:e})}function C(a,e){return s().post(a,{data:e})}function x(a,e){return s().delete(a,{data:e})}function R(a,e){return s().patch(a,{data:e})}function $(a){return a.map(e=>{let t;return e.method==="GET"?t=y:e.method==="PUT"?t=g:e.method==="POST"?t=C:e.method==="PATCH"?t=R:e.method==="DELETE"?t=x:t=e.command,{label:e.label,icon:e.icon,confirm:e.confirm,args:e.args,command:()=>t(e.args?.url,T.value).then(()=>{e.args?.replaceKey&&document.dispatchEvent(new CustomEvent("mutateId",{detail:{id:e.args?.replaceKey}}))})}})}const U=n({});var f=n();const H=p(()=>f.value);function K(a){f.value=a}var k=n(null);const T=p(()=>k.value);function N(a){k.value=a}const M=n([]),q=n(),o=n();function B(a,e){o.value=e;const t=[],m={label:l("Add to playlist"),icon:"mooooom-add",items:[{label:l("New Playlist"),icon:"mooooom-add",command:()=>{alert(o.value?.id)}}]};v.value.length===0&&m.items.push({label:l("No playlist available"),icon:"mooooom-pause"});for(const u of v.value)m.items.push({label:u.name,icon:"mooooom-disk",command:()=>{alert(o.value?.id)}});t.push(m),t.push({label:l("Save to your liked songs"),icon:"mooooom-heart",command:()=>{alert(o.value?.id)}},{label:l("Add to queue"),icon:"mooooom-playlist1Add",command:()=>{alert(o.value?.id)}},{separator:!0}),!c.value&&o.value?.album_track&&o.value?.album_track?.length<2?t.push({label:l("Go to album"),icon:"mooooom-disk",command:()=>{o.value?.album_track?.[0]?.link&&r.push(o.value?.album_track?.[0]?.link)}}):!c.value&&o.value?.album_track&&o.value?.album_track?.length>1&&t.push({label:l("Go to album"),icon:"mooooom-disk",items:o.value?.album_track?.map(u=>({label:u.name,icon:"mooooom-disk",command:()=>r.push(u.link)}))}),!d.value&&o.value?.artist_track&&o.value?.artist_track?.length<2?t.push({label:l("Go to artist"),icon:"mooooom-user",command:()=>{o.value?.artist_track?.[0]?.link&&r.push(o.value?.artist_track?.[0]?.link)}}):!d.value&&o.value?.artist_track&&o.value?.artist_track?.length>1&&t.push({label:l("Go to artist"),icon:"mooooom-user",items:o.value?.artist_track?.map(u=>({label:u.name,icon:"mooooom-user",command:()=>r.push(u.link)}))}),t.push({separator:!0},{label:l("Share"),icon:"mooooom-shareSquare",items:[{label:l("Copy page link"),icon:"mooooom-fileCopy",command:()=>i(window.location.href)},{label:l("Copy track link"),icon:"mooooom-fileCopy",command:()=>o.value?i(`${b.value?.serverBaseUrl}/${o.value?.folder_id}${o.value?.folder}${o.value?.filename}?token=${_.value}`):{}}]}),M.value=t,q.value.show(a)}export{B as a,M as c,$ as i,U as n,K as o,H as r,N as s,q as t};
