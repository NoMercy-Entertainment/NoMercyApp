import{aG as L,c as k,o as s,a as i,j as h,h as m,x as p,aS as z,aT as fe,aI as t,eD as xe,de as be,a7 as _,C as S,by as C,F as he,bf as d,b7 as pe,K as P,L as B,az as ke,v as ge,bd as M,e7 as se,t as T,eE as ie,a6 as ye,cd as we,eF as ve,ez as D,eG as j,eA as A,eH as E,eC as ne,eI as Se,eJ as N,b6 as $e,bb as Te,ax as le,bh as H,bi as Ce,be as oe,dd as re,av as _e,bj as Ee,eK as de,w as je,aK as Ae,aQ as ce,bk as Re,bl as ze,bm as Le}from"./index-BoaRCEqN.js";import{_ as ue}from"./BigPlayButton.vue_vue_type_script_setup_true_lang-C9S43ROE.js";import{_ as qe}from"./FavoriteImage.vue_vue_type_script_setup_true_lang-Kn7Xggn1.js";import{_ as me}from"./TrackLinks.vue_vue_type_script_setup_true_lang-Scf-HrgE.js";import{_ as Ne}from"./BannerButton.vue_vue_type_script_setup_true_lang-ZSBD9yK0.js";const He={class:"flex sm:gap-4 items-center py-4 px-4 sm:px-8 w-full pl-3 pr-4 sm:pr-16 h-20 z-40","data-index":"1"},Pe={class:"relative hidden h-fit cursor-pointer items-center justify-center text-auto-12/11 focus-within:text-auto sm:flex mr-auto"},Be=["value"],De={class:"absolute top-2 right-2 bottom-2 flex items-center justify-center"},gt=L({__name:"ControlHeader",props:{data:{type:Object,required:!1},filter:{type:String,required:!0}},emits:["filter-change"],setup(e){const f=e,g=()=>{var o;d.setQueue(((o=f.data)==null?void 0:o.tracks)??[])};return(o,r)=>{var c,$;return s(),k(he,null,[r[1]||(r[1]=i("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom bg-focus"},null,-1)),i("div",He,[(c=e.data)!=null&&c.tracks?(s(),h(ue,{key:0,data:e.data,class:"hidden sm:flex"},null,8,["data"])):m("",!0),i("div",Pe,[i("input",{id:"search",value:e.filter,class:"bg-transparent border-auto-12/5 border-2 rounded-md focus-visible:!border-auto-12/9 focus-visible:text-current placeholder-current p-2",placeholder:"Filter…",type:"text",onInput:r[0]||(r[0]=a=>{var n;return o.$emit("filter-change",(n=a.target)==null?void 0:n.value)}),name:"search"},null,40,Be),i("div",De,[p(z,{icon:"searchMagnifyingGlass",class:"!w-7"})])]),p(fe,{data:e.data,color:"var(--color-focus)",class:"sm:ml-auto",className:"!w-8 !h-8"},null,8,["data"]),t(xe)?(s(),h(be,{key:1,id:"add",onclick:g,class:"mr-8",label:"add"},{default:_(()=>[p(z,{icon:"add",class:"!w-7"})]),_:1})):m("",!0)]),i("div",{class:S(["sm:hidden sticky left-full -mt-16 z-1199 flex justify-center items-center gap-2 mr-4 h-auto",{"top-safe-offset-11":!t(C)("capacitor"),"top-safe-offset-3":t(C)("capacitor")}]),style:{"box-shadow":"0 1px 2px 0 rgba(16,24,40,0.05)"}},[($=e.data)!=null&&$.tracks?(s(),h(ue,{key:0,data:e.data},null,8,["data"])):m("",!0)],2)],64)}}}),Me={key:0,class:"relative my-4 flex w-full flex-1 flex-shrink-0 flex-col items-start justify-start gap-4 flex-grow-1 sm:hidden"},Ge=["innerHTML"],Ie={class:"relative hidden flex-1 flex-shrink-0 flex-col items-start justify-start gap-1 flex-grow-1 sm:flex"},Oe={class:"text-left font-semibold uppercase text-white"},Fe=["innerHTML"],Ve={class:"relative flex items-center justify-start gap-2"},Ke={key:0,class:"flex items-center gap-4 text-sm font-medium"},Ue={key:0,class:"relative aspect-square h-12 w-12 overflow-clip rounded-full min-w-12"},Qe={key:1,class:"text-left text-sm font-medium text-white"},We={class:"text-left text-sm font-medium text-white"},Je={key:2,class:"text-left text-sm font-medium text-white"},Xe={class:"text-left text-sm font-medium text-white"},yt=L({__name:"ArtistHeader",props:{data:{type:Object,required:!1}},setup(e){const f=e,{t:g}=pe(),o=P(""),r=P(),c=P(),$=a=>{var n;if(a)return we(g,((n=a==null?void 0:a.tracks)==null?void 0:n.map(u=>ve(u.duration)).reduce((u,l)=>u+l,0))??0)};return B(f,a=>{a&&(o.value=$(a.data))}),ke(()=>{o.value=$(f.data)}),B(r,a=>{if(!a)return;const n=a.getContext("2d",{willReadFrequently:!0,desynchronized:!0}),u=()=>{var y,w,v,b;const l=(w=(y=d._audioElement1)==null?void 0:y.motion)==null?void 0:w.canvas;l&&c.value&&(d._audioElement1.isPlaying()?((v=d._audioElement1)==null||v.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(c.value).backgroundColor]}),d._audioElement1.motion.gradient="theme",a.width=l.width,a.height=l.height,n.clearRect(0,0,a.width,a.height),n.drawImage(l,0,0,a.width,a.height)):d._audioElement2.isPlaying()&&((b=d._audioElement2)==null||b.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(c.value).backgroundColor]}),d._audioElement2.motion.gradient="theme",a.width=l.width,a.height=l.height,n.clearRect(0,0,a.width,a.height),n.drawImage(l,0,0,a.width,a.height))),requestAnimationFrame(u)};u()}),B(c,a=>{var n,u,l,y;!a||!((n=d._audioElement1)!=null&&n.motion)||!((u=d._audioElement2)!=null&&u.motion)||((l=d._audioElement1)==null||l.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(a).backgroundColor]}),d._audioElement1.motion.gradient="theme",(y=d._audioElement2)==null||y.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(a).backgroundColor]}),d._audioElement2.motion.gradient="theme")}),(a,n)=>{var l,y,w,v,b,x,q,G,I,O,F,V,K,U,Q,W,J,X,Y,Z;const u=ge("RouterLink");return s(),k("div",{id:"artist-header",class:S(["relative z-0 flex flex-col items-end justify-start text-white sm:flex-row sm:gap-9 sm:pt-12 sm:pb-8 sm:px-8",{"pt-safe-offset-12 px-8 gap-4":t(C)("capacitor"),"pt-24 px-6 gap-2 sm:gap-12":!t(C)("capacitor")}])},[i("div",{ref_key:"audioColor",ref:c,id:"audio-color",class:"absolute top-0 left-0 h-full w-full overflow-clip bg-focus"},null,512),n[0]||(n[0]=i("div",{class:"absolute top-0 left-0 h-full w-full overflow-clip bg-black/50"},null,-1)),i("div",{class:S(["frosting relative mx-auto flex aspect-square w-80 max-w-[90%] flex-col items-center justify-center overflow-clip rounded-xl bg-gradient-to-br min-w-64 bg-theme-7 from-theme-5 via-theme-7 to-theme-11 shadow",{"-mt-4":t(C)("capacitor"),"":!t(C)("capacitor")}])},[(l=e.data)!=null&&l.cover?(s(),h(M,{key:0,id:"image",data:e.data,size:250,className:"aspect-square rounded-xl w-full",loading:"eager"},null,8,["data"])):(y=e.data)!=null&&y.id?(s(),h(qe,{key:1,id:e.data.id,type:e.data.type,class:"aspect-square rounded-xl w-full"},null,8,["id","type"])):m("",!0)],2),(w=e.data)!=null&&w.name?(s(),k("div",Me,[i("div",{class:"w-full text-2xl font-semibold whitespace-pre-line",innerHTML:t(se)(((v=e.data)==null?void 0:v.name)??"Songs you like","text-sm line-clamp-1")},null,8,Ge)])):m("",!0),i("div",Ie,[i("p",Oe,T((x=(b=e.data)==null?void 0:b.type)==null?void 0:x.replace(/s$/u,"")),1),i("div",{class:"w-full text-5xl font-semibold line-clamp-2 leading-[130%] whitespace-pre",innerHTML:t(se)(((q=e.data)==null?void 0:q.name)??"Songs you like","text-2xl line-clamp-1")},null,8,Fe),i("div",Ve,[t(ie)?(s(),k("div",Ke,[((I=(G=e.data)==null?void 0:G.artists)==null?void 0:I.length)==1&&((F=(O=e.data)==null?void 0:O.artists)!=null&&F[0].cover)?(s(),k("div",Ue,[p(M,{id:"image",data:(K=(V=e.data)==null?void 0:V.artists)==null?void 0:K[0],size:250,className:"h-full w-full",loading:"eager"},null,8,["data"])])):m("",!0),p(u,{to:((Q=(U=e.data)==null?void 0:U.artists)==null?void 0:Q[0].link)??"#",class:"text-sm empty:hidden"},{default:_(()=>{var ee,te,ae;return[ye(T(((ae=(te=(ee=e.data)==null?void 0:ee.artists)==null?void 0:te[0])==null?void 0:ae.name)??"Various artists"),1)]}),_:1},8,["to"])])):m("",!0),(W=e.data)!=null&&W.tracks&&t(ie)?(s(),k("p",Qe,"•")):m("",!0),i("p",We,T((X=(J=e.data)==null?void 0:J.tracks)==null?void 0:X.length)+" "+T(((Z=(Y=e.data)==null?void 0:Y.tracks)==null?void 0:Z.length)==1?t(g)("song"):t(g)("songs")),1),o.value?(s(),k("p",Je,"•")):m("",!0),i("p",Xe,T(o.value),1)])])],2)}}}),Ye=["onclick"],Ze={class:""},R=L({__name:"SortButton",props:{name:{type:String,required:!0},sortingType:{type:String,required:!0},iconSpacer:{type:String,default:""}},setup(e){const{t:f}=pe(),g=r=>{console.log("handleSortChange",r),A.value==r?ne(D.value==j.asc?j.desc:j.asc):ne(j.asc),Se(r)},o=r=>{var $,a,n,u,l,y,w,v;const c=r.target;if(r.key=="ArrowUp"){const b=(a=($=c.parentElement)==null?void 0:$.parentElement)==null?void 0:a.previousElementSibling;b&&b.nodeName=="BUTTON"||b.nodeName=="A"?b.focus():(n=document.querySelector("#playList"))==null||n.focus()}else r.key=="ArrowDown"?(y=(l=(u=c.parentElement)==null?void 0:u.parentElement)==null?void 0:l.nextElementSibling)==null||y.focus():r.key=="ArrowLeft"?(w=c.previousElementSibling)==null||w.focus():r.key=="ArrowRight"&&((v=c.nextElementSibling)==null||v.focus())};return(r,c)=>(s(),k("button",{"no-ring":"",class:"relative cursor-pointer items-center focus-visible:underline focus-visible:underline-offset-2",onclick:()=>g(e.sortingType),onkeyup:o},[i("span",Ze,T(t(f)(e.name)),1),t(D)==t(j).asc&&t(A)==e.sortingType&&t(A)!=t(E).index?(s(),h(z,{key:0,icon:"chevronUp",class:S(`w-6 h-6 ${e.iconSpacer}`)},null,8,["class"])):t(D)==t(j).desc&&t(A)==e.sortingType&&t(A)!=t(E).index?(s(),h(z,{key:1,icon:"chevronDown",class:S(`w-6 h-6 ${e.iconSpacer}`)},null,8,["class"])):m("",!0)],8,Ye))}}),et=L({__name:"SortHeader",setup(e){return(f,g)=>(s(),k("div",{id:"sortHeaderElement",class:S(["sticky -mx-4 px-4 z-30 mt-4 block h-10 content-center items-center justify-start self-stretch bg-transparent text-sm font-medium transition-all duration-200 w-available group/track sm:w-available sm:-top-px",{"top-safe-offset-10":t(C)("capacitor"),"top-safe-offset-16":!t(C)("capacitor")}])},[g[0]||(g[0]=i("span",{id:"sorterChild",class:"absolute inset-0 h-10 sm:rounded-t-2xl overflow-clip w-full transition-all duration-200"},null,-1)),i("span",{class:S([{"album-grid":t(N),"artist-grid":!t(N)},"grid justify-start items-center self-stretch pr-3 sm:px-3 rounded-lg sm:hover:bg-slate-lightA-6 dark:hover:bg-slate-darkA-6 text-auto-12 group/track text-sm font-medium py-2 z-0 group/track gap-2"])},[p(R,{id:"sortIndex","aria-label":f.$t("Sort by index"),sortingType:t(E).index,class:"!flex justify-center",iconSpacer:"absolute left-6",name:"#"},null,8,["aria-label","sortingType"]),p(R,{"aria-label":f.$t("Sort by name"),sortingType:t(E).name,class:"flex sm:flex",iconSpacer:"w-6 h-6",name:"Title"},null,8,["aria-label","sortingType"]),p(R,{"aria-label":f.$t("Sort by album"),sortingType:t(E).album,class:S(["!hidden sm:!flex",{"opacity-0":!t(N),"opacity-100":t(N)}]),iconSpacer:"w-6 h-6",name:"Album"},null,8,["aria-label","sortingType","class"]),p(R,{name:"Release date","aria-label":f.$t("Sort by date"),sortingType:t(E).date,class:"!hidden sm:!flex",iconSpacer:"w-6 h-6"},null,8,["aria-label","sortingType"]),p(R,{"aria-label":f.$t("Sort by duration"),sortingType:t(E).duration,class:"!hidden sm:!flex gap-2 flex-row-reverse pr-[4.5rem]",iconSpacer:"w-6 h-6",name:"Duration"},null,8,["aria-label","sortingType"])],2)],2))}}),xt=$e(et,[["__scopeId","data-v-7c19c894"]]),tt=["data-track-id"],at={class:"flex justify-center text-center"},st={key:0,class:"group-focus-visible/track:sm:hidden group-hover/track:sm:hidden"},it={class:"flex h-12 items-center gap-2 overflow-hidden w-available sm:gap-4"},nt={class:"flex h-full flex-col justify-evenly overflow-clip w-inherit"},lt={class:"flex h-6 flex-nowrap overflow-clip text-left line-clamp-1 w-inherit tracking-wide leading-6 px-2 py-1 -ml-2"},ot=["data-size"],rt={class:"flex whitespace-nowrap"},dt={class:"hidden sm:flex invisible max-h-12 md:visible"},ct={class:"hidden sm:flex mr-4 monospace sm:mr-0"},bt=L({__name:"TrackRow",props:{data:{type:Object,required:!0},index:{type:Number,required:!0},displayList:{type:Array,required:!0}},setup(e){const f=e,g=Te(),o=le(()=>g.path.startsWith("/music/album")),r=le(()=>g.path.startsWith("/music/artist")),c=()=>{Le(g.fullPath)},$=()=>{d.setQueue([]),d.setBackLog([]),d.playTrack(f.data,f.displayList),H.value||c()};return(a,n)=>{var l,y,w,v,b;const u=ge("RouterLink");return s(),k("button",{"data-track-id":(l=e.data)==null?void 0:l.id,onclick:$,onContextmenu:n[1]||(n[1]=x=>t(ze)(x,e.data)),class:S(["grid justify-start children:pointer-events-none items-center self-stretch text-auto-12 pr-3 sm:px-3 rounded-lg sm:hover:bg-slate-lightA-6 dark:sm:hover:bg-slate-darkA-6 group/track text-sm font-medium py-2 z-10",{"album-grid":o.value,"artist-grid":!o.value}]),"data-target":"track",tabindex:"0"},[i("span",at,[((y=t(H))==null?void 0:y.id)!=e.data.id?(s(),k("span",st,T(e.index+1),1)):m("",!0),((w=t(H))==null?void 0:w.id)==e.data.id?(s(),h(Ce,{key:1,color:"rgb(var(--color-focus))",playing:t(oe),class:"hidden group-focus-visible/track:sm:!hidden group-hover/track:sm:!hidden"},null,8,["playing"])):m("",!0),((v=t(H))==null?void 0:v.id)==e.data.id&&t(oe)?(s(),h(re,{key:2,icon:"nmPause",class:"hidden h-6 w-6 group-focus-visible/track:sm:block group-hover/track:sm:block"})):(s(),h(re,{key:3,icon:"nmPlay",class:"hidden h-6 w-6 group-focus-visible/track:sm:block group-hover/track:sm:block"}))]),i("span",it,[o.value?(s(),h(M,{key:0,data:e.data,size:100,style:_e({display:o.value?"none":""}),className:"relative hidden h-12 w-12 overflow-hidden min-w-[3rem] sm:block",loading:"eager"},null,8,["data","style"])):m("",!0),i("span",nt,[i("span",lt,T(e.data.name),1),i("span",{"data-size":t(Ee),class:"inline-flex h-6 w-available gap-1 overflow-hidden whitespace-nowrap text-slate-light-3 dark:slate-dark-3 line-clamp-1 text-2xs hover:animate-pause leading-6"},[p(de,null,{default:_(()=>[e.data&&!r.value?(s(),h(me,{key:0,id:e.data.id,data:e.data.artist_track,onclick:x=>x.stopPropagation(),"data-target":"artist",type:"artists"},null,8,["id","data","onclick"])):m("",!0),e.data&&!o.value?(s(),h(me,{key:1,id:e.data.id,data:e.data.album_track,onclick:x=>x.stopPropagation(),"data-target":"album",type:"albums"},null,8,["id","data","onclick"])):m("",!0)]),_:1})],8,ot)])]),(s(!0),k(he,null,je(e.data.album_track,x=>(s(),k("span",{key:x.id,class:S(["hidden items-center overflow-clip pr-2 line-clamp-2 h-inherit w-inherit sm:flex",{"opacity-0":!o.value,"opacity-100":o.value}]),onClick:n[0]||(n[0]=q=>q.stopPropagation())},[p(u,{to:x==null?void 0:x.link,tabindex:"0","data-target":"album",class:"flex items-center gap-1 whitespace-nowrap font-semibold line-clamp-1 hover:underline focus:underline dark:font-medium pointer-events-auto","no-ring":""},{default:_(()=>[i("span",rt,[p(de,{text:x.name},null,8,["text"])])]),_:2},1032,["to"])],2))),128)),i("span",dt,T(new Date((b=e.data)==null?void 0:b.date).toLocaleDateString(t(Ae).language??"en-US",{year:"numeric",month:"short",day:"2-digit"})),1),i("span",{class:S(["flex items-center justify-end gap-2 text-end",{"mr-6":!t(ce)}])},[(s(),h(fe,{key:e.data.id,data:e.data,color:"var(--color-focus)"},null,8,["data"])),i("span",ct,T(e.data.duration),1),t(ce)?(s(),h(Re,{key:0,direction:"down"},{button:_(()=>[p(Ne,{class:"",title:""},{default:_(()=>[p(z,{className:"relative h-5 w-5",icon:"menuDotsVertical"})]),_:1})]),default:_(()=>[n[2]||(n[2]=ye(" Hellooo "))]),_:1})):m("",!0)],2)],42,tt)}}});export{xt as S,yt as _,gt as a,bt as b};
//# sourceMappingURL=TrackRow.vue_vue_type_script_setup_true_lang-DRoFtw6h.js.map
