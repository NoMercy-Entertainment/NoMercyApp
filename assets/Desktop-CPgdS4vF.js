import{n as T}from"./useInfiniteServerClient-ChzPawtk.js";import{$l as y,Bl as V,Cl as n,Dl as $,Hl as r,Js as z,Ki as F,Kr as k,R as C,Sl as b,Wl as w,ba as g,bc as K,bl as q,ds as L,ec as G,gu as E,hl as u,hu as t,it as m,kl as H,ll as J,pc as U,qr as W,su as i,tu as _,xl as o,yc as j,yl as A,zl as M}from"./index-Rmty3EhQ.js";import"./dist-DQBaa2g2.js";import{t as O}from"./ScrollContainer-D9yWZpjD.js";import"./CardIndicator-H_92BWk5.js";import{t as Q}from"./NMCard-C3vBy__L.js";import{t as X}from"./NotFound-Cx1Abtai.js";import{t as Y}from"./PersonCard-Dto-VYYP.js";import{n as Z,t as ee}from"./EmptyCard-BHXkAgZ-.js";J();j();var te="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",ae="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",re=H({__name:"Desktop",setup(le){const d=K(),{data:l,fetchNextPage:f,hasNextPage:v,isError:B}=T({queryKey:["libraries",d?.params.id??d.name],limit:20,keepForever:!0});M(()=>{F(),k(null),W(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),y(l,a=>{a&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const N=A(()=>{const a=l.value?.pages?.[0]?.data?.[0];return a&&L.value&&a.media_type!=="person"&&a.media_type!=="genres"});V(()=>{stop(),k(null)});const S=i(),D=i();M(()=>{D.value=d.params.id??d.name,v.value&&(l?.value?.pages?.length??0)<10&&f(),document.addEventListener("scrollToDiv",a=>{S.value?.scrollTo({top:a.detail.top-100,behavior:"smooth"})})}),U(()=>{document.dispatchEvent(new Event("indexer"))}),y(l,a=>{a&&v.value&&a?.pages?.length<10&&f()});const P=i(),I=i();function c(a,x){P.value=x,I.value.show(a)}return(a,x)=>(r(),o(t(G),null,{default:_(()=>[$(t(z),{fullscreen:!0},{default:_(()=>[t(B)&&!t(l)?.pages?(r(),o(X,{key:0})):(r(),o(O,{key:1,id:t(C).currentRoute.value.fullPath,"auto-hide":!0,static:!0},{default:_(()=>[(r(),n("div",{key:t(C).currentRoute.value.params?.id,class:E([{"pb-24":t(g)&&!t(m),"pb-40":t(g)&&t(m),"children:pb-4 sm:children:pb-3":!t(g)&&t(m)},"z-0 flex flex-col gap-4 rounded-3xl border-0 p-4 w-available scrollbar-none border-surface-3 transform-gpu will-change-auto"])},[q("div",{class:E(`grid w-full gap-4 scroll-smooth music-showing:pb-0 whitespace-pre ${N.value?te:ae}`)},[(r(!0),n(u,null,w(t(l)?.pages??[],(h,R)=>(r(),n(u,{key:R},[h.data.length>0?(r(!0),n(u,{key:0},w(h.data??[],(e,p)=>(r(),n(u,null,[e?.media_type==="tv"||e?.media_type==="movie"||e?.media_type==="collection"||e?.media_type==="specials"?(r(),o(Q,{key:e.id,data:e,index:p,onContextMenu:s=>c(s,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="person"?(r(),o(Y,{key:`${e.id}_person`,data:e,index:p,onContextMenu:s=>c(s,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="genres"?(r(),o(Z,{key:`${e.id}_genres`,data:e,index:p,onContextMenu:s=>c(s,e)},null,8,["data","index","onContextMenu"])):b("",!0)],64))),256)):t(l)?.pages?.[0]?.data?.length===0?(r(),o(ee,{key:1})):b("",!0)],64))),128))],2)],2))]),_:1},8,["id"]))]),_:1})]),_:1}))}}),me=re;export{me as default};
