var B=Object.defineProperty;var M=(c,u,i)=>u in c?B(c,u,{enumerable:!0,configurable:!0,writable:!0,value:i}):c[u]=i;var d=(c,u,i)=>(M(c,typeof u!="symbol"?u+"":u,i),i);import{B as S,h as T,u as k,c as L,l as $,a as P}from"./subtitles-octopus-BNudlRXw.js";class F extends S{constructor(){super(...arguments);d(this,"topBar",{});d(this,"bottomRow",{});d(this,"frame",{});d(this,"center",{});d(this,"isMouseDown",!1);d(this,"pipEnabled",!1);d(this,"lockActive",!1);d(this,"bottomBar",{});d(this,"topRow",{});d(this,"tooltip",{});d(this,"episodeTip",{});d(this,"scrollContainerStyles",["scroll-container","flex","flex-col","gap-1","language-scroll-container","overflow-x-hidden","overflow-y-auto","p-2","transition-all","duration-300","w-available","scroll-p-4","scroll-snap-align-center","scroll-smooth","scroll-p-4"]);d(this,"subMenuContentStyles",["sub-menu-content","flex","flex-col","gap-1","max-h-available","w-available","overflow-auto","min-w-52"])}use(){this.topBar=this.createTopBar(this.overlay),this.createBackButton(this.topBar),this.createCloseButton(this.topBar),this.createDivider(this.topBar),this.createTvCurrentItem(this.topBar),this.player.options.disableTouchControls||(this.center=this.createCenter(this.overlay)),this.bottomBar=this.createBottomBar(this.overlay),this.bottomBar.onmouseleave=i=>{var s;const e=(s=this.player.getVideoElement())==null?void 0:s.getBoundingClientRect();!e||i.x>e.left&&i.x<e.right&&i.y>e.top&&i.y<e.bottom||this.player.emit("hide-tooltip")},this.topRow=this.createTopRow(this.bottomBar),this.player.addClasses(this.topRow,["mt-4"]),this.bottomRow=this.createBottomRow(this.bottomBar),this.createProgressBar(this.topRow),this.createPlaybackButton(this.bottomRow,!0),this.createPreviousButton(this.bottomRow,!0),this.player.options.seekButtons&&(this.createSeekBackButton(this.bottomRow,!0),this.createSeekForwardButton(this.bottomRow,!0)),this.createChapterBackButton(this.bottomRow,!0),this.createChapterForwardButton(this.bottomRow,!0),this.createNextButton(this.bottomRow,!0),this.createVolumeButton(this.bottomRow,!0),this.createTime(this.bottomRow,"current",["ml-2"]),this.createDivider(this.bottomRow),this.createTime(this.bottomRow,"remaining",["mr-2"]),this.createTheaterButton(this.bottomRow,!0),this.createPIPButton(this.bottomRow,!0),this.createPlaylistsButton(this.bottomRow,!0),this.createSpeedButton(this.bottomRow,!0),this.createCaptionsButton(this.bottomRow,!0),this.createAudioButton(this.bottomRow,!0),this.createQualityButton(this.bottomRow,!0),this.createSettingsButton(this.bottomRow,!0),this.createFullscreenButton(this.bottomRow,!0),this.frame=this.createMenuFrame(this.bottomRow),this.createMainMenu(this.frame),this.createToolTip(this.overlay),this.episodeTip=this.createEpisodeTip(this.overlay),this.modifySpinner(this.overlay),this.eventHandlers()}dispose(){var i;this.topBar.remove(),this.bottomBar.remove(),this.bottomRow.remove(),this.frame.remove(),(i=this.center)==null||i.remove(),this.tooltip.remove(),this.episodeTip.remove(),this.loader.remove()}createTopRow(i){return this.player.createElement("div","top-row").addClasses(["top-row","flex","gap-1","h-2","items-center","pl-2","pr-2","relative","w-available"]).appendTo(i)}createBottomRow(i){return this.player.createElement("div","bottom-row").addClasses(["bottom-row","flex","h-10","lg:mb-2","p-1","lg:px-4","items-center","relative","w-available"]).appendTo(i)}eventHandlers(){this.player.on("controls",i=>{var e,s;this.player.getElement()&&(i?(e=this.player.getElement())==null||e.setAttribute("active","true"):(s=this.player.getElement())==null||s.setAttribute("active","false"))}),this.player.on("chapters",()=>{this.createChapterMarkers()}),this.player.on("back-button",()=>{switch(this.currentMenu){case"episode":case"language":case"quality":this.player.emit("showPauseScreen");break;case"seek":case"pause":this.seekContainer.style.transform="",this.player.play().then();break}}),window.addEventListener("resize",()=>{this.sizeMenuFrame()})}createCenter(i){const e=this.player.createElement("div","center").addClasses(["center","absolute","grid","grid-cols-3","grid-rows-6","h-full","w-full","z-0","transition-all","duration-300","bg-transparent","group-[&.nomercyplayer.buffering]:bg-gradient-circle-c","group-[&.nomercyplayer.error]:bg-gradient-circle-c","group-[&.nomercyplayer.paused]:bg-gradient-circle-c","from-black/50","from-15%","via-60%","via-black/30","to-100%","to-black/0"]).appendTo(i);return this.createSpinnerContainer(e),this.player.isMobile()?(this.createTouchSeekBack(e,{x:{start:1,end:1},y:{start:2,end:6}}),this.createTouchPlayback(e,{x:{start:2,end:2},y:{start:3,end:5}}),this.createTouchSeekForward(e,{x:{start:3,end:3},y:{start:2,end:6}}),this.createTouchVolUp(e,{x:{start:2,end:2},y:{start:1,end:3}}),this.createTouchVolDown(e,{x:{start:2,end:2},y:{start:5,end:7}})):(this.createTouchSeekBack(e,{x:{start:1,end:2},y:{start:2,end:6}}),this.createTouchPlayback(e,{x:{start:2,end:3},y:{start:2,end:6}}),this.createTouchSeekForward(e,{x:{start:3,end:4},y:{start:2,end:6}})),e}createTouchSeekBack(i,e){const s=this.createTouchBox(i,"touchSeekBack",e);return["click"].forEach(t=>{s.addEventListener(t,this.doubleTap(()=>{this.player.rewindVideo()}))}),this.createSeekRipple(s,"left"),s}doubleTap(i,e){const s=this.player.options.doubleClickDelay??500;let t=0,a,l;return function(o,n){const p=new Date().getTime(),h=p-t;h>0&&h<s?(o.preventDefault(),i(o),clearTimeout(l)):(a=setTimeout(()=>{clearTimeout(a)},s),l=setTimeout(()=>{e==null||e(n)},s)),t=p}}createTouchSeekForward(i,e){const s=this.createTouchBox(i,"touchSeekForward",e);return["mouseup","touchend"].forEach(t=>{s.addEventListener(t,this.doubleTap(()=>{this.player.forwardVideo()}))}),this.createSeekRipple(s,"right"),s}createTouchPlayback(i,e,s=!1){const t=this.createTouchBox(i,"touchPlayback",e);this.player.addClasses(t,["touch-playback","flex","-ml-2","items-center","justify-center"]),["click"].forEach(l=>{t.addEventListener(l,this.doubleTap(()=>this.player.getFullscreen(),()=>{(this.controlsVisible||!this.player.options.disableTouchControls)&&this.player.togglePlayback()}))});const a=this.createSVGElement(t,"bigPlay",this.buttons.bigPlay,!1,s);return this.player.addClasses(a,["touch-playback-button","pointer-events-none","fill-white"]),this.player.on("ready",()=>{a.style.display="flex"}),this.player.on("pause",()=>{a.style.display="flex"}),this.player.on("play",()=>{a.style.display="none"}),this.player.on("time",()=>{a.style.display="none"}),this.player.on("firstFrame",()=>{a.style.display="none"}),t}createTouchVolUp(i,e){if(!this.player.isMobile())return;const s=this.createTouchBox(i,"touchVolUp",e);return["click"].forEach(t=>{s.addEventListener(t,this.doubleTap(()=>{this.player.volumeUp()}))}),s}createTouchVolDown(i,e){if(!this.player.isMobile())return;const s=this.createTouchBox(i,"touchVolDown",e);return["click"].forEach(t=>{s.addEventListener(t,this.doubleTap(()=>{this.player.volumeDown()}))}),s}createTouchBox(i,e,s){const t=this.player.createElement("div",`touch-box-${e}`).addClasses([`touch-box-${e}`,"z-40"]).appendTo(i);return t.style.gridColumnStart=s.x.start.toString(),t.style.gridColumnEnd=s.x.end.toString(),t.style.gridRowStart=s.y.start.toString(),t.style.gridRowEnd=s.y.end.toString(),i.appendChild(t),t}createSpeedButton(i,e=!1){if(this.player.isMobile())return;const s=this.createUiButton(i,"speed");return this.player.hasSpeeds()?s.style.display="flex":s.style.display="none",this.createSVGElement(s,"speed",this.buttons.speed,!1,e),s.addEventListener("click",t=>{t.stopPropagation(),this.player.emit("hide-tooltip"),this.speedMenuOpen?(this.player.emit("show-menu",!1),this.menuFrame.close()):(this.player.emit("show-speed-menu",!0),this.menuFrame.showModal())}),this.player.on("pip-internal",t=>{t?s.style.display="none":this.player.hasSpeeds()&&(s.style.display="flex")}),i.appendChild(s),s}createPIPButton(i,e=!1){var t;if(this.player.isMobile()||!this.player.hasPipEventHandler)return;const s=this.createUiButton(i,"pip");return this.player.hasPIP()?s.style.display="flex":s.style.display="none",s.ariaLabel=(t=this.buttons.pipEnter)==null?void 0:t.title,this.createSVGElement(s,"pip-enter",this.buttons.pipEnter,!1,e),this.createSVGElement(s,"pip-exit",this.buttons.pipExit,!0,e),document.addEventListener("visibilitychange",()=>{this.pipEnabled&&(document.hidden?document.pictureInPictureEnabled&&this.player.getVideoElement().requestPictureInPicture().then():document.pictureInPictureElement&&document.exitPictureInPicture().then())}),s.addEventListener("click",a=>{var l,r;a.stopPropagation(),this.player.emit("hide-tooltip"),this.player.emit("controls",!1),this.pipEnabled?(this.pipEnabled=!1,s.querySelector(".pip-exit-icon").style.display="none",s.querySelector(".pip-enter-icon").style.display="flex",s.ariaLabel=(l=this.buttons.pipEnter)==null?void 0:l.title,this.player.emit("pip-internal",!1),this.player.emit("pip",!1)):(this.pipEnabled=!0,s.querySelector(".pip-enter-icon").style.display="none",s.querySelector(".pip-exit-icon").style.display="flex",s.ariaLabel=(r=this.buttons.pipExit)==null?void 0:r.title,this.player.emit("pip-internal",!0),this.player.emit("pip",!0),this.player.emit("show-menu",!1))}),this.player.on("fullscreen",()=>{this.player.getFullscreen()?s.style.display="none":s.style.display="flex"}),i.appendChild(s),s}createMenuFrame(i){this.menuFrame=this.player.createElement("dialog","menu-frame-dialog").addClasses(["group-[&.nomercyplayer:has(.open)]:backdrop:bg-black/60","group-[&.nomercyplayer:has(.open)]:backdrop:pointer-events-none"]).appendTo(i),this.menuFrame.setAttribute("popover","manual"),this.menuFrame.setAttribute("role","modal");const e=this.player.createElement("div","menu-wrapper").addClasses(["menu-wrapper","text-white"]).appendTo(this.menuFrame),s=this.player.createElement("div","menu-frame").addClasses(["menu-frame","absolute","flex-col","h-available","hidden","inset-4","justify-self-end","max-h-[calc(100%-2rem)]","max-w-[min(70rem,calc(100%-2rem))]","overflow-clip","rounded-lg","w-fit","z-50"]).appendTo(e);this.sizeMenuFrame();const t=this.player.createElement("div","menu-content").addClasses(["menu-content","flex","flex-row","h-available","justify-end","mt-auto","overflow-clip","w-full"]).appendTo(s);return this.player.on("resize",()=>{this.sizeMenuFrame()}),this.player.on("fullscreen",()=>{this.sizeMenuFrame()}),this.player.on("show-menu",a=>{this.menuOpen=a,this.lockActive=a,a?(this.sizeMenuFrame(),s.style.display="flex",s.classList.add("open"),this.menuFrame.showModal()):(s.style.display="none",s.classList.remove("open"),this.menuFrame.close()),t.classList.add("translate-x-0"),t.classList.remove("sub-menu-open"),setTimeout(()=>{Array.from(this.mainMenu.children).find(l=>l.style.display!="none"&&l.id!="menu-header").focus()},200),this.player.emit("show-language-menu",!1),this.player.emit("show-subtitles-menu",!1),this.player.emit("show-quality-menu",!1),this.player.emit("show-speed-menu",!1),this.player.emit("show-playlist-menu",!1)}),this.player.on("show-main-menu",a=>{this.mainMenuOpen=a,this.lockActive=a,a&&(s.classList.add("open"),this.player.emit("show-language-menu",!1),this.player.emit("show-subtitles-menu",!1),this.player.emit("show-quality-menu",!1),this.player.emit("show-speed-menu",!1),this.player.emit("show-playlist-menu",!1),t.classList.add("translate-x-0"),t.classList.remove("sub-menu-open"),s.style.display="flex",setTimeout(()=>{Array.from(this.mainMenu.children).find(l=>l.style.display!="none"&&l.id!="menu-header").focus()},200))}),this.player.on("show-language-menu",a=>{this.languageMenuOpen=a,this.lockActive=a,a&&(s.classList.add("open"),this.player.emit("show-main-menu",!1),this.player.emit("show-subtitles-menu",!1),this.player.emit("show-quality-menu",!1),this.player.emit("show-speed-menu",!1),this.player.emit("show-playlist-menu",!1),t.classList.remove("translate-x-0"),t.classList.add("sub-menu-open"),s.style.display="flex")}),this.player.on("show-subtitles-menu",a=>{this.subtitlesMenuOpen=a,this.lockActive=a,a&&(s.classList.add("open"),this.player.emit("show-main-menu",!1),this.player.emit("show-language-menu",!1),this.player.emit("show-quality-menu",!1),this.player.emit("show-speed-menu",!1),this.player.emit("show-playlist-menu",!1),t.classList.remove("translate-x-0"),t.classList.add("sub-menu-open"),s.style.display="flex")}),this.player.on("show-quality-menu",a=>{this.qualityMenuOpen=a,this.lockActive=a,a&&(s.classList.add("open"),this.player.emit("show-main-menu",!1),this.player.emit("show-language-menu",!1),this.player.emit("show-subtitles-menu",!1),this.player.emit("show-speed-menu",!1),this.player.emit("show-playlist-menu",!1),t.classList.remove("translate-x-0"),t.classList.add("sub-menu-open"),s.style.display="flex")}),this.player.on("show-speed-menu",a=>{this.speedMenuOpen=a,this.lockActive=a,a&&(s.classList.add("open"),this.player.emit("show-main-menu",!1),this.player.emit("show-language-menu",!1),this.player.emit("show-subtitles-menu",!1),this.player.emit("show-quality-menu",!1),this.player.emit("show-playlist-menu",!1),t.classList.remove("translate-x-0"),t.classList.add("sub-menu-open"),s.style.display="flex")}),this.player.on("show-playlist-menu",a=>{this.playlistMenuOpen=a,this.lockActive=a,a?(s.classList.add("open"),this.player.emit("show-main-menu",!1),this.player.emit("show-language-menu",!1),this.player.emit("show-subtitles-menu",!1),this.player.emit("show-quality-menu",!1),this.player.emit("show-speed-menu",!1),t.classList.remove("translate-x-0"),t.classList.add("sub-menu-open"),s.style.display="flex"):s.style.width=""}),this.player.on("controls",a=>{this.lockActive=a,a||(this.player.emit("show-menu",!1),this.player.emit("show-main-menu",!1),this.player.emit("show-language-menu",!1),this.player.emit("show-subtitles-menu",!1),this.player.emit("show-quality-menu",!1),this.player.emit("show-speed-menu",!1),this.player.emit("show-playlist-menu",!1))}),t}sizeMenuFrame(){var r,o;const i=(o=(r=this.player)==null?void 0:r.getElement())==null?void 0:o.getBoundingClientRect();if(!i)return;const{width:e,height:s,top:t,bottom:a,left:l}=i;this.menuFrame.firstChild.style.width=`${e}px`,this.menuFrame.firstChild.style.height=`${s}px`,this.menuFrame.firstChild.style.top=`${t}px`,this.menuFrame.firstChild.style.bottom=`${a}px`,this.menuFrame.firstChild.style.left=`${l}px`,this.menuFrame.firstChild.style.padding="2rem",this.menuFrame.firstChild.style.position="fixed"}createMainMenu(i){return this.mainMenu=this.player.createElement("div","main-menu").addClasses(["main-menu","bg-neutral-900/95","flex","flex-col","gap-1","group-[&.nomercyplayer:has(.sub-menu-open)]:!hidden","h-auto","max-h-full","min-w-64","mt-auto","overflow-clip","p-2","pt-0","rounded-lg","pointer-events-auto"]).appendTo(i),this.mainMenu.style.transform="translateX(0)",this.createMainMenuHeader(this.mainMenu).classList.add("!min-h-[2rem]","-mr-1"),this.player.addClasses(this.mainMenu,["main-menu","bg-neutral-900/95","flex","flex-col","gap-1","group-[&.nomercyplayer:has(.sub-menu-open)]:!hidden","h-auto","max-h-full","min-w-64","mt-auto","overflow-clip","p-2","pt-0","rounded-lg"]),this.player.on("translationsLoaded",()=>{this.createMenuButton(this.mainMenu,"language"),this.createMenuButton(this.mainMenu,"subtitles"),this.createMenuButton(this.mainMenu,"quality"),this.createMenuButton(this.mainMenu,"speed"),this.createMenuButton(this.mainMenu,"playlist")}),this.createSubMenu(i),this.mainMenu}createSubMenu(i){const e=this.player.createElement("div","sub-menu").addClasses(["sub-menu","bg-neutral-900/95","flex-col","gap-1","group-[&.nomercyplayer:has(.sub-menu-open)]:flex","h-auto","hidden","max-h-full","min-w-64","mt-auto","overflow-clip","rounded-lg","pointer-events-auto","w-full"]).appendTo(i);return e.style.transform="translateX(0)",this.createLanguageMenu(e),this.createSubtitleMenu(e),this.createQualityMenu(e),this.createSpeedMenu(e),this.player.options.playlist?this.createEpisodeMenu(e):this.player.once("playlist",()=>{this.createEpisodeMenu(e)}),e}createMainMenuHeader(i,e=!1){const s=this.player.createElement("div","menu-header").addClasses(["menu-header","flex","h-9","items-center","min-h-[2.5rem]","py-2","text-white","w-available"]).addClasses(["border-b","border-gray-300/20","!p-0"]).appendTo(i),t=this.createUiButton(s,"close");return this.createSVGElement(t,"menu",this.buttons.close,e),this.player.addClasses(t,["ml-auto","w-8"]),t.classList.remove("w-5"),t.addEventListener("click",a=>{a.stopPropagation(),this.player.emit("show-menu",!1),this.lockActive=!1,this.player.emit("controls",!1),this.menuFrame.close()}),s}createMenuHeader(i,e,s=!1){const t=this.player.createElement("div","menu-header").addClasses(["menu-header","flex","h-9","items-center","min-h-[2.5rem]","py-2","text-white","w-available"]).addClasses(["border-b","border-gray-300/20"]).appendTo(i);if(e!=="Episodes"){const l=this.createUiButton(t,"back");this.createSVGElement(l,"menu",this.buttons.chevronL,s),this.player.addClasses(l,["w-8"]),l.classList.remove("w-5"),l.addEventListener("click",r=>{r.stopPropagation(),this.player.emit("show-main-menu",!0),this.player.emit("show-language-menu",!1),this.player.emit("show-subtitles-menu",!1),this.player.emit("show-quality-menu",!1),this.player.emit("show-speed-menu",!1),this.player.emit("show-playlist-menu",!1)})}const a=this.player.createElement("span","menu-button-text").addClasses(this.menuButtonTextStyles).appendTo(t);if(a.innerText=this.player.localize(e).toTitleCase(),e!=="Seasons"){const l=this.createUiButton(t,"close");this.createSVGElement(l,"menu",this.buttons.close,s),this.player.addClasses(l,["ml-auto","w-8"]),l.classList.remove("w-5"),l.addEventListener("click",r=>{r.stopPropagation(),this.player.emit("show-menu",!1),this.lockActive=!1,this.player.emit("controls",!1),this.menuFrame.close()})}return t}createMenuButton(i,e,s=!1){const t=this.player.createElement("button",`menu-button-${e}`).addClasses(this.languageMenuStyles).appendTo(i);e!=="speed"?t.style.display="none":this.player.hasSpeeds()?t.style.display="flex":t.style.display="none",this.createSVGElement(t,"menu",this.buttons[e],s);const a=this.player.createElement("span",`menu-button-${e}`).addClasses(this.menuButtonTextStyles).appendTo(t);a.innerText=this.player.localize(e.toTitleCase());const l=this.createSVGElement(t,"menu",this.buttons.chevronR,!1,s);this.player.addClasses(l,["ml-auto"]),t.addEventListener("click",r=>{r.stopPropagation(),this.player.emit(`show-${e}-menu`,!0)}),e==="language"?(this.player.on("item",()=>{t.style.display="none"}),this.player.hasAudioTracks()&&(t.style.display="flex"),this.player.on("audioTracks",r=>{r.length>1?t.style.display="flex":t.style.display="none"})):e==="subtitles"?(this.player.on("item",()=>{t.style.display="none"}),this.player.hasCaptions()&&(t.style.display="flex"),this.player.on("captionsList",r=>{r.length>1?t.style.display="flex":t.style.display="none"})):e==="quality"?(this.player.on("item",()=>{t.style.display="none"}),this.player.hasQualities()&&(t.style.display="flex"),this.player.on("levels",r=>{r.length>1?t.style.display="flex":t.style.display="none"})):e==="playlist"&&(this.player.options.playlist&&(t.style.display="flex"),this.player.on("playlist",r=>{r.length>1?t.style.display="flex":t.style.display="none"}))}createLanguageMenu(i){const e=this.player.createElement("div","language-menu").addClasses(this.subMenuContentStyles).appendTo(i);this.createMenuHeader(e,"Language");const s=this.player.createElement("div","language-scroll-container").addClasses(this.scrollContainerStyles).appendTo(e);return s.style.transform="translateX(0)",this.player.on("item",()=>{s.innerHTML=""}),this.player.hasAudioTracks()&&Object.values(this.player.getAudioTracks()).forEach(t=>{this.createLanguageMenuButton(s,{language:t.language,label:t.label,type:"audio",id:t.id,buttonType:"audio"})}),this.player.on("audioTracks",t=>{s.innerHTML="",Object.values(t).forEach(a=>{this.createLanguageMenuButton(s,{language:a.language,label:a.label,type:"audio",id:a.id,buttonType:"audio"})})}),this.player.on("show-language-menu",t=>{t?(e.style.display="flex",setTimeout(()=>{s.firstChild.focus()},200)):e.style.display="none"}),e}createSubtitleMenu(i){const e=this.player.createElement("div","subtitle-menu").addClasses(this.subMenuContentStyles).appendTo(i);this.createMenuHeader(e,"subtitles");const s=this.player.createElement("div","subtitle-scroll-container").addClasses(this.scrollContainerStyles).appendTo(e);return s.style.transform="translateX(0)",this.player.on("item",()=>{s.innerHTML=""}),this.player.hasCaptions()&&Object.values(this.player.getCaptionsList()).forEach(t=>{this.createLanguageMenuButton(s,{language:t.language,label:t.label,type:t.type,id:t.id,buttonType:"subtitle"})}),this.player.on("captionsList",t=>{s.innerHTML="",Object.values(t).forEach(a=>{this.createLanguageMenuButton(s,{language:a.language,label:a.label,type:a.type,id:a.id,buttonType:"subtitle"})})}),this.player.on("show-subtitles-menu",t=>{t?(e.style.display="flex",setTimeout(()=>{s.firstChild.focus()},200)):e.style.display="none"}),e}createSpeedMenu(i,e=!1){const s=this.player.createElement("div","speed-menu").addClasses(this.subMenuContentStyles).appendTo(i);this.createMenuHeader(s,"speed");const t=this.player.createElement("div","speed-scroll-container").addClasses(this.scrollContainerStyles).appendTo(s);t.style.transform="translateX(0)";for(const a of this.player.getSpeeds()??[]){const l=this.player.createElement("button",`speed-button-${a}`).addClasses(this.languageMenuStyles).appendTo(t),r=this.player.createElement("span",`menu-button-text-${a}`).appendTo(l),o=this.player.createElement("span",`menu-button-text-${a}`).addClasses(this.menuButtonTextStyles).appendTo(r);o.innerText=a==1?this.player.localize("Normal"):a.toString();const n=this.createSVGElement(l,"menu",this.buttons.checkmark,!1,e);this.player.addClasses(n,["ml-auto","hidden"]),this.player.on("speed",p=>{p===a?n.classList.remove("hidden"):n.classList.add("hidden")}),l.addEventListener("click",()=>{this.player.emit("show-menu",!1),this.player.setSpeed(a)})}return this.player.on("show-speed-menu",a=>{a?(s.style.display="flex",setTimeout(()=>{t.firstChild.focus()},200)):s.style.display="none"}),s}createQualityMenu(i){const e=this.player.createElement("div","quality-menu").addClasses(this.subMenuContentStyles).appendTo(i);this.createMenuHeader(e,"quality");const s=this.player.createElement("div","quality-scroll-container").addClasses(this.scrollContainerStyles).appendTo(e);return s.style.transform="translateX(0)",this.player.on("item",()=>{s.innerHTML=""}),this.player.hasQualities()&&Object.values(this.player.getQualityLevels()).forEach(t=>{this.createQualityMenuButton(s,{id:t.id,width:t.width??0,height:t.height??0,label:t.label,bitrate:t.bitrate??0})}),this.player.on("levels",t=>{s.innerHTML="",Object.values(t).forEach(a=>{this.createQualityMenuButton(s,{id:a.id,width:a.width??0,height:a.height??0,label:a.label,bitrate:a.bitrate??0})})}),this.player.on("show-quality-menu",t=>{t?(e.style.display="flex",setTimeout(()=>{s.firstChild.focus()},200)):e.style.display="none"}),e}createQualityMenuButton(i,e,s=!1){var r;const t=this.player.createElement("button",`quality-button-${e.height}-${e.bitrate}`).addClasses(this.languageMenuStyles).appendTo(i),a=this.player.createElement("span","menu-button-text").addClasses(this.menuButtonTextStyles).appendTo(t);a.innerText=`${this.player.localize((r=e.label)==null?void 0:r.replace("segment-metadata","Off"))}`;const l=this.createSVGElement(t,"checkmark",this.buttons.checkmark,!1,s);return this.player.addClasses(l,["ml-auto"]),e.id>0&&l.classList.add("hidden"),this.player.on("levelsChanging",o=>{o.id==e.id?l.classList.remove("hidden"):l.classList.add("hidden")}),t.addEventListener("click",o=>{o.stopPropagation(),this.player.setCurrentQuality(e.id),this.player.emit("show-menu",!1)}),t}createSeekRipple(i,e){const s=this.player.createElement("div","seek-ripple").addClasses(["seek-ripple",e]).appendTo(i),t=this.player.createElement("div","seek-ripple-arrow").addClasses(["seek-ripple-arrow"]).appendTo(s),a=this.player.createElement("p","seek-ripple-text").addClasses(["seek-ripple-text"]).appendTo(s);return e=="left"?(s.style.borderRadius="0 50% 50% 0",s.style.left="0px",t.innerHTML=`
				<div class="arrow arrow2 arrow-left"></div>
				<div class="arrow arrow1 arrow-left"></div>
				<div class="arrow arrow3 arrow-left"></div>
			`,this.player.on("rewind",l=>{a.innerText=`${Math.abs(l)} ${this.player.localize("seconds")}`,s.style.display="flex"}),this.player.on("remove-rewind",()=>{s.style.display="none"})):e=="right"&&(s.style.borderRadius="50% 0 0 50%",s.style.right="0px",t.innerHTML=`
				<div class="arrow arrow3 arrow-right"></div>
				<div class="arrow arrow1 arrow-right"></div>
				<div class="arrow arrow2 arrow-right"></div>
			`,this.player.on("forward",l=>{a.innerText=`${Math.abs(l)} ${this.player.localize("seconds")}`,s.style.display="flex"}),this.player.on("remove-forward",()=>{s.style.display="none"})),s}createProgressBar(i){var o;this.sliderBar=this.player.createElement("div","slider-bar").addClasses(["slider-bar","bg-white/20","flex","group/slider","h-2","mx-4","pointer-events-auto","relative","rounded-full","w-available"]).appendTo(i);const e=this.player.createElement("div","slider-buffer").addClasses(["slider-buffer","absolute","bg-white/20","flex","h-full","overflow-clip","overflow-hidden","pointer-events-none","rounded-full","z-0"]).appendTo(this.sliderBar),s=this.player.createElement("div","slider-hover").addClasses(["slider-hover","absolute","bg-white/30","flex","h-full","opacity-1","overflow-clip","overflow-hidden","pointer-events-none","rounded-full","z-0"]).appendTo(this.sliderBar),t=this.player.createElement("div","slider-progress").addClasses(["slider-progress","absolute","bg-white","flex","h-full","overflow-clip","overflow-hidden","pointer-events-none","rounded-full","z-10"]).appendTo(this.sliderBar);this.chapterBar=this.player.createElement("div","chapter-progress").addClasses(["chapter-bar","bg-transparent","flex","h-2","overflow-clip","relative","rounded-full","w-available"]).appendTo(this.sliderBar);const a=document.createElement("div");this.player.addClasses(a,["slider-nipple","!-translate-x-1/2","!-translate-y-1/4","absolute","bg-white","group-hover/slider:flex","h-4","hidden","left-0","rounded-full","top-0","w-4","z-20"]),a.id="slider-nipple",this.player.options.nipple!=!1&&this.sliderBar.append(a);const l=this.player.createElement("div","slider-pop").addClasses(["slider-pop","-translate-x-1/2","absolute","bg-neutral-900/95","bottom-4","flex","flex-col","font-semibold","gap-1","hover:scale-110","overflow-clip","pb-1","pointer-events-none","rounded-md","text-center","z-20"]).appendTo(this.sliderBar);l.style.setProperty("--visibility","0"),l.style.opacity="var(--visibility)",this.sliderPopImage=this.player.createElement("div","slider-pop-image").addClasses(["slider-pop-image"]).appendTo(l);const r=this.player.createElement("div","slider-text").addClasses(["slider-pop-text","font-mono"]).appendTo(l);return this.chapterText=this.player.createElement("div","chapter-text").addClasses(["chapter-text"]).appendTo(l),this.player.options.chapters&&!this.player.isTv()&&((o=this.player.getChapters())==null?void 0:o.length)>0&&(this.sliderBar.style.background=""),["mousedown","touchstart"].forEach(n=>{this.sliderBar.addEventListener(n,()=>{this.isMouseDown||(this.isMouseDown=!0,this.isScrubbing=!0)},{passive:!0})}),this.bottomBar.addEventListener("click",n=>{if(this.player.emit("hide-tooltip"),!this.isMouseDown)return;this.isMouseDown=!1,this.isScrubbing=!1,l.style.setProperty("--visibility","0");const p=this.getScrubTime(n);a.style.left=`${p.scrubTime}%`,this.player.seek(p.scrubTimePlayer)},{passive:!0}),["mousemove","touchmove"].forEach(n=>{this.sliderBar.addEventListener(n,p=>{var m;const h=this.getScrubTime(p);this.getSliderPopImage(h),r.innerText=T(h.scrubTimePlayer);const f=this.getSliderPopOffsetX(l,h);l.style.left=`${f}%`,(!this.player.options.chapters||((m=this.player.getChapters())==null?void 0:m.length)==0)&&(s.style.width=`${h.scrubTime}%`),this.isMouseDown&&(this.chapterText.innerText=this.getChapterText(h.scrubTimePlayer)??"",a.style.left=`${h.scrubTime}%`,this.previewTime.length>0&&l.style.setProperty("--visibility","1"))},{passive:!0})}),this.sliderBar.addEventListener("mouseover",n=>{const p=this.getScrubTime(n);if(this.getSliderPopImage(p),r.innerText=T(p.scrubTimePlayer),this.chapterText.innerText=this.getChapterText(p.scrubTimePlayer)??"",this.previewTime.length>0){l.style.setProperty("--visibility","1");const h=this.getSliderPopOffsetX(l,p);l.style.left=`${h}%`}},{passive:!0}),this.player.on("active",n=>{n||l.style.setProperty("--visibility","0")}),this.sliderBar.addEventListener("mouseleave",()=>{l.style.setProperty("--visibility","0"),s.style.width="0"},{passive:!0}),this.player.on("seeked",()=>{l.style.setProperty("--visibility","0")}),this.player.on("item",()=>{this.sliderBar.classList.add("bg-white/20"),this.previewTime=[],this.chapters=[],e.style.width="0",t.style.width="0",this.fetchPreviewTime()}),this.player.on("chapters",()=>{var n;((n=this.player.getChapters())==null?void 0:n.length)>0&&!this.player.isTv()?this.sliderBar.classList.remove("bg-white/20"):this.sliderBar.classList.add("bg-white/20")}),this.player.on("time",n=>{var p;((p=this.player.getChapters())==null?void 0:p.length)==0&&(t.style.width=`${n.percentage}%`),this.isScrubbing||(a.style.left=`${n.percentage}%`)}),this.player.on("controls",n=>{n||(l.style.setProperty("--visibility","0"),this.menuFrame.close())}),this.player.on("pip-internal",n=>{n?this.sliderBar.style.display="none":this.sliderBar.style.display="flex"}),this.sliderBar}getChapterText(i){var s,t,a,l;if(this.player.getChapters().length==0)return null;const e=(s=this.player.getChapters())==null?void 0:s.findIndex(r=>r.startTime>i);return((t=this.player.getChapters()[e-1])==null?void 0:t.title)??((l=this.player.getChapters()[((a=this.player.getChapters())==null?void 0:a.length)-1])==null?void 0:l.title)??null}createChapterMarker(i){const e=this.player.createElement("div",`chapter-marker-${i.id.replace(/\s/gu,"-")}`).addClasses(["chapter-marker","[&:last-child(2):.5px]","absolute","h-available","last:translate-x-[1.5px]","min-w-[2px]","overflow-hidden","rounded-sm"]).appendTo(this.chapterBar);e.style.left=`${i.left}%`,e.style.width=`calc(${i.width}% - 2px)`,this.player.createElement("div",`chapter-marker-bg-${i.id.replace(/\s/gu,"-")}`).addClasses(["chapter-marker-bg","absolute","bg-white/20","h-available","left-0","rounded-sm","w-available","z-0"]).appendTo(e);const s=this.player.createElement("div",`chapter-marker-hover-${i.id.replace(/\s/gu,"-")}`).addClasses(["chapter-marker-hover","absolute","bg-gray-200","h-available","left-0","origin-left","rounded-sm","scale-x-0","w-available","z-10"]).appendTo(e),t=this.player.createElement("div",`chapter-marker-progress-${i.id.replace(/\s/gu,"-")}`).addClasses(["chapter-marker-progress","absolute","bg-white","h-available","left-0","origin-left","rounded-sm","scale-x-0","w-available","z-20"]).appendTo(e),a=i.left,l=i.left+i.width;return this.player.on("time",r=>{r.percentage<a?t.style.transform="scaleX(0)":r.percentage>l?t.style.transform="scaleX(1)":t.style.transform=`scaleX(${(r.percentage-a)/(l-a)})`}),["mousemove","touchmove"].forEach(r=>{this.chapterBar.addEventListener(r,o=>{const{scrubTime:n}=this.getScrubTime(o);n<a?s.style.transform="scaleX(0)":n>l?s.style.transform="scaleX(1)":s.style.transform=`scaleX(${(n-a)/(l-a)})`})}),this.chapterBar.addEventListener("mouseleave",()=>{s.style.transform="scaleX(0)"}),e}createChapterMarkers(){var i;this.player.isTv()||(this.chapterBar.style.background="",this.player.on("item",()=>{this.chapterBar.style.background=""}),this.chapterBar.querySelectorAll(".chapter-marker").forEach(e=>{this.chapterBar.classList.add("bg-white/20"),e.remove()}),(i=this.player.getChapters())==null||i.forEach(e=>{this.createChapterMarker(e)}))}getSliderPopOffsetX(i,e){const s=this.sliderBar.getBoundingClientRect(),a=i.getBoundingClientRect().width*.5/s.width*100;let l=e.scrubTime;return l<=a&&(l=a),l>=100-a&&(l=100-a),l}createEpisodeMenu(i){if(!this.player.getVideoElement())return;const e=this.player.createElement("div","playlist-menu").addClasses([...this.subMenuContentStyles,"!flex-row","!gap-0"]).appendTo(i);e.style.minHeight=`${parseInt(getComputedStyle(this.player.getVideoElement()).height.split("px")[0],10)*.8}px`,this.player.on("resize",()=>{e.style.minHeight=`${parseInt(getComputedStyle(this.player.getVideoElement()).height.split("px")[0],10)*.8}px`});const s=this.player.createElement("div","sub-menu-content").addClasses([...this.subMenuContentStyles,"!w-1/3","border-r-2","border-gray-500/20"]).appendTo(e);this.createMenuHeader(s,"Seasons");const t=this.player.createElement("div","playlist-scroll-container").addClasses(this.scrollContainerStyles).appendTo(s);t.style.transform="translateX(0)",t.innerHTML="";for(const[,r]of k(this.player.getPlaylist(),"season").entries()??[])this.createSeasonMenuButton(t,r);const a=this.player.createElement("div","episode-menu").addClasses([...this.subMenuContentStyles,"!w-[63rem]"]).appendTo(e);this.createMainMenuHeader(a);const l=this.player.createElement("div","playlist-scroll-container").addClasses(this.scrollContainerStyles).appendTo(a);l.innerHTML="",l.tabIndex=1,l.addEventListener("focus",()=>{var r;(r=l.firstChild)==null||r.focus()});for(const[r,o]of this.player.getPlaylist().entries()??[])this.createEpisodeMenuButton(l,o,r);return this.player.on("show-playlist-menu",r=>{r?(e.style.display="flex",setTimeout(()=>{l.firstChild.focus()},200)):e.style.display="none"}),e}createSeasonMenuButton(i,e,s=!1){if(!(e!=null&&e.season))return;const t=this.player.createElement("button",`season-${e.id}`).addClasses(this.languageMenuStyles).appendTo(i),a=this.player.createElement("span",`season-${e.id}-span`).addClasses(this.menuButtonTextStyles).appendTo(t);a.innerText=e!=null&&e.seasonName?e==null?void 0:e.seasonName:e!=null&&e.season?this.player.localize("Season")+` ${e==null?void 0:e.season}`:"";const l=this.createSVGElement(t,"menu",this.buttons.chevronR,!1,s);return this.player.addClasses(l,["ml-auto"]),t.addEventListener("click",()=>{this.player.emit("switch-season",e==null?void 0:e.season)}),t.addEventListener("focus",()=>{setTimeout(()=>{this.scrollCenter(t,i,{duration:100,margin:1})},50)}),t}createEpisodeMenuButton(i,e,s){var b,g,v,w;const t=this.player.createElement("button",`playlist-${e.id}`).addClasses(["playlist-menu-button","duration-300","flex","focus-visible:outline-2","focus-visible:outline-white","gap-2","hover:bg-neutral-600/20","outline","outline-1","outline-solid","outline-transparent","p-2","relative","rounded-lg","snap-center","text-white","transition-all","w-available"]).appendTo(i);((b=this.player.playlistItem())==null?void 0:b.season)!==1&&(t.style.display="none");const a=this.player.createElement("div",`playlist-${e.id}-left`).addClasses(["episode-menu-button-left","h-available","overflow-clip","pointer-events-none","relative","rounded-md","self-center","w-[30%]"]).appendTo(t);this.player.createElement("div",`episode-${e.id}-shadow`).addClasses(["episode-menu-button-shadow","!h-available","absolute","bg-[linear-gradient(0deg,rgba(0,0,0,0.87)_0%,rgba(0,0,0,0.7)_25%,rgba(0,0,0,0)_50%,rgba(0,0,0,0)_100%)]","bottom-0","left-0","shadow-[inset_0px_1px_0px_rgba(255,255,255,0.24),inset_0px_-1px_0px_rgba(0,0,0,0.24),inset_0px_-2px_0px_rgba(0,0,0,0.24)]","w-available"]).appendTo(a);const l=this.player.createElement("img",`episode-${e.id}-image`).addClasses(["episode-menu-button-image","aspect-video","h-auto","object-cover","w-available"]).appendTo(a);l.setAttribute("loading","lazy"),l.src=e.image&&e.image!=""?`${this.imageBaseUrl.includes("https")?"":this.imageBaseUrl}${e.image}`:"";const r=this.player.createElement("div",`episode-${e.id}-progress-container`).addClasses(["episode-menu-progress-container","absolute","bottom-0","flex","flex-col","px-3","w-available"]).appendTo(a),o=this.player.createElement("div",`episode-${e.id}-progress-box`).addClasses(["episode-menu-progress-box","flex","h-available","justify-between","mb-1","px-1","sm:mx-2"]).appendTo(r),n=this.player.createElement("div",`episode-${e.id}-progress-item`).addClasses(["progress-item-text","text-[0.7rem]"]).appendTo(o);e.episode&&(n.innerText=`${this.player.localize("E")}${e.episode}`);const p=this.player.createElement("div",`episode-${e.id}-progress-duration`).addClasses(["progress-duration","text-[0.7rem]"]).appendTo(o);p.innerText=((g=e.duration)==null?void 0:g.replace(/^00:/u,""))??"";const h=this.player.createElement("div",`episode-${e.id}-slider-container`).addClasses(["slider-container","bg-gray-500/80","h-1","hidden","mb-2","mx-1","overflow-clip","rounded-md","sm:mx-2"]).appendTo(r),f=this.player.createElement("div",`episode-${e.id}-progress-bar`).addClasses(["progress-bar","bg-white"]).appendTo(h);(v=e.progress)!=null&&v.time&&(f.style.width=`${e.progress.time/L(e.duration)*100}%`,h.style.display="flex");const m=this.player.createElement("div",`episode-${e.id}-right-side`).addClasses(["playlist-card-right","flex","flex-col","gap-1","pointer-events-none","text-left","w-3/4"]).appendTo(t),E=this.player.createElement("span",`episode-${e.id}-title`).addClasses(["playlist-menu-button-title","font-bold","line-clamp-2","text-white"]).appendTo(m);e.episode&&(E.innerText=$((w=e.title)==null?void 0:w.replace(e.show??"","").replace("%S",this.player.localize("S")).replace("%E",this.player.localize("E"))));const C=this.player.createElement("span",`episode-${e.id}-overview`).addClasses(["playlist-menu-button-overview","leading-[1rem]","line-clamp-4","overflow-hidden","text-[0.7rem]","text-white"]).appendTo(m);return C.innerText=P(e.description,600),this.player.on("item",y=>{y.season==e.season?t.style.display="flex":t.style.display="none",this.player.playlistItem().season==e.season&&this.player.playlistItem().episode==e.episode?t.style.background="rgba(255,255,255,.1)":t.style.background=""}),this.player.on("switch-season",y=>{y==e.season?t.style.display="flex":t.style.display="none"}),this.player.on("time",y=>{var x;((x=this.player.playlistItem())==null?void 0:x.id)==e.id&&(f.style.width=`${y.percentage}%`,y.percentage>0&&(h.style.display="flex"))}),e.episode&&e.show&&(n.innerText=e.season==null?`${e.episode}`:`${this.player.localize("S")}${e.season}: ${this.player.localize("E")}${e.episode}`),t.addEventListener("click",()=>{this.player.emit("show-menu",!1),e.episode&&e.season?this.setEpisode(e.season,e.episode):this.player.playlistItem(s),this.player.emit("playlist-menu-button-clicked",e)}),t.addEventListener("focus",()=>{setTimeout(()=>{this.scrollCenter(t,i,{duration:100,margin:1})},50)}),t}createToolTip(i){return this.tooltip=this.player.createElement("div","tooltip").addClasses(["tooltip","absolute","bg-neutral-900/95","bottom-0","font-medium","hidden","left-0","pointer-events-none","px-3","py-2","rounded-lg","text-white","text-xs","z-50"]).appendTo(i),this.tooltip.style.transform="translateX(10px)",this.tooltip.innerText="Play (space)",this.player.on("show-tooltip",e=>{this.tooltip.innerText=e.text,this.tooltip.style.display="block",this.tooltip.style.transform=`translate(calc(${e.x} - 50%), calc(${e.y} - 100%))`,e.currentTime=="top"?(this.tooltip.classList.add("top-0"),this.tooltip.classList.remove("bottom-0")):(this.tooltip.classList.remove("top-0"),this.tooltip.classList.add("bottom-0"))}),this.player.on("hide-tooltip",()=>{this.tooltip.style.display="none"}),this.tooltip}createEpisodeTip(i){const e=this.player.createElement("div","episode-tip").addClasses(["episode-tip","!w-96","-bottom-10","absolute","bg-neutral-900/95","font-medium","gap-2","h-24","hidden","left-0","px-2","py-2","rounded-lg","text-white","text-xs","z-50"]).appendTo(i),s=this.player.createElement("div","next-tip-left").addClasses(["next-tip-left","overflow-clip","relative","rounded-sm","self-center","w-[40%]"]).appendTo(e),t=this.player.createElement("img","next-tip-image").addClasses(["playlist-card-image","aspect-video","h-auto","object-cover","rounded-md","w-available"]).appendTo(s);t.setAttribute("loading","eager");const a=this.player.createElement("div","next-tip-right-side").addClasses(["next-tip-right","flex","flex-col","gap-1","text-left","w-[60%]"]).appendTo(e),l=this.player.createElement("span","next-tip-header").addClasses(["next-tip-header","font-bold"]).appendTo(a),r=this.player.createElement("span","next-tip-title").addClasses(["next-tip-header","font-bold","font-sm","line-clamp-3"]).appendTo(a);return this.player.on("show-episode-tip",o=>{this.getTipData({direction:o.direction,header:l,title:r,image:t}),e.style.display="flex",e.style.transform=`translate(${o.x}, calc(${o.y} - 50%))`}),this.player.on("hide-episode-tip",()=>{e.style.display="none"}),e}getTipDataIndex(i){let e;return i=="previous"?e=this.player.playlistItem().episode??-2:e=this.player.getPlaylistIndex()+1,this.player.getPlaylist().at(e)}getTipData({direction:i,header:e,title:s,image:t}){var l;const a=this.getTipDataIndex(i);a&&(t.src=a.image&&a.image!=""?`${this.imageBaseUrl}${a.image}`:"",e.innerText=`${this.player.localize(`${i.toTitleCase()} Episode`)} ${this.getButtonKeyCode(i)}`,s.innerText=(l=a.title)==null?void 0:l.replace(a.show??"","").replace("%S",this.player.localize("S")).replace("%E",this.player.localize("E")),this.player.once("item",()=>{this.getTipData({direction:i,header:e,title:s,image:t})}))}createButton(i,e,s="after",t,a,l){const r=document.querySelector(`${i}`);if(!r)throw new Error("Element not found");const o=this.createUiButton(r,e.replace(/\s/gu,"_"));return o.ariaLabel=e,s==="before"?r==null||r.before(o):r==null||r.after(o),this.createSVGElement(o,`${e.replace(/\s/gu,"_")}-enabled`,t,!0,!1),this.createSVGElement(o,e.replace(/\s/gu,"_"),t,!1),o.addEventListener("click",n=>{n.stopPropagation(),a==null||a(),this.player.emit("hide-tooltip")}),o.addEventListener("contextmenu",n=>{n.stopPropagation(),l==null||l(),this.player.emit("hide-tooltip")}),o}}export{F as D};
//# sourceMappingURL=desktopUIPlugin-DfE244YR.js.map
