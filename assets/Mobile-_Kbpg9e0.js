import{An as P,Bn as _,C as w,Ft as C,Gt as h,Rt as c,Sn as m,Tt as I,bn as M,cn as d,i as S,mt as i,qt as B,u as N,w as T,zn as l,zt as v}from"./index-CymNhKD_.js";import"./dist-BzCNKCKQ.js";import{t as x}from"./esm-ACLeELb5.js";import"./esm-D_D4nCnV.js";import"./dist-DXrN7I-1.js";import"./client-B3lu4kSB.js";import"./ionic-global-CJHxMOPd.js";import"./hardware-back-button-D60wdz2_.js";import"./index3-D8TaXO-z.js";import"./index8-DyEBw6N5.js";import"./keyboard-CzXNBarC.js";import"./index2-YLkJp4Cu.js";import"./ios.transition-De37_SF6.js";import"./keyboard2-F9Kv6wST.js";import"./md.transition-DlofogM3.js";import"./ui-CVk4xI0v.js";import"./client-CxRn8_4O.js";import{t as A}from"./currentServer-DzE7mepP.js";import"./config-BZ-AEJ_J.js";import"./esm-B369UUD9.js";import{p as f}from"./global-lh4aio7e.js";import"./esm-L6OojSyq.js";import"./bundle-mjs-CKr78mlm.js";import{s as a}from"./user-DlzWNC9W.js";import"./serverClient-BuGPA0-U.js";import{t}from"./router-Ch9jBD0u.js";import"./utils-DO5s4OOL.js";import"./useInfiniteServerClient-vxekqC7x.js";import{l as y}from"./SocketClient-DIjrmZvk.js";import"./apiClient-DbAYXZY3.js";import"./notifications-C159qvRm.js";import{c as D,i as U,l as V,r as z,y as L}from"./utils-D5LXfnop.js";import"./deviceInfo-AeSN8xPw.js";import"./auth-Csw53SQZ.js";import{s as p}from"./imageModal-C3rRGq_g.js";import{t as F}from"./useServerClient-BC86_TUk.js";import{a as R,i as j,n as q,o as E,r as G}from"./VideoPlayer-BDxfeVnA.js";import"./buttons-BrAf7pXX.js";import{t as O}from"./videoNoMercyConnectPlugin-D4pGMDRC.js";I();var H=B({__name:"Mobile",setup(J){const{data:n}=F({enabled:!a.value.features?.nomercyConnect}),e=P();function u(o){const s={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:o?.filter(r=>!!r.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:a.value?.accessToken||localStorage.getItem("access_token")||"",basePath:A.value?.serverBaseUrl,imageBasePath:"https://app.nomercy.tv/tmdb-images",forceTvMode:(i("android")||i("ios"))&&!i("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||i("capacitor"),renderAhead:100,disableAutoPlayback:a.value.features?.nomercyConnect};if(e.value=G("player1").setup(s),e.value?.once("back",()=>{history.state.back?t.back():t.replace("/")}),a.value.features?.nomercyConnect){const r=new O;e.value?.registerPlugin("videoNoMercyConnect",r),e.value?.usePlugin("videoNoMercyConnect")}const g=new j;e.value?.registerPlugin("desktopUI",g),e.value?.usePlugin("desktopUI");const b=new R;if(e.value?.registerPlugin("autoSkip",b),e.value?.usePlugin("autoSkip"),!a.value.features?.nomercyConnect){const r=new E;e.value?.registerPlugin("sync",r),e.value?.usePlugin("sync")}const k=new q;e.value?.registerPlugin("octopus",k),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?t.back():t.replace("/")}),e.value?.on("dispose",async()=>{await V(),await z(),history.state.back?t.back():await t.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{p(!0)}),e.value?.on("pause",()=>{p(!1)}),e.value?.on("ready",async()=>{await D(),await L(),await U(),y.stop()}),e.value?.on("item",()=>{e.value?.play()}),x.addListener("backButton",()=>{e.value?.emit("back-button-hyjack"),e.value?.dispose()})}return M(n,o=>{o?.length&&u(o)}),w(()=>{y.stop(),a.value.features?.nomercyConnect?u():n.value?.length&&u(n.value)}),T(()=>{e.value?.dispose(),p(!1)}),(o,s)=>(d(),v(l(N),null,{default:m(()=>[h(l(S),{fullscreen:!0},{default:m(()=>[(d(),v(C,{to:"body"},[c("div",{class:_([{"mb-28":l(f),"mb-0":!l(f)},"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"])},[...s[0]||(s[0]=[c("div",{id:"player1",class:"group nomercyplayer"},null,-1)])],2)]))]),_:1})]),_:1}))}}),Ae=H;export{Ae as default};
