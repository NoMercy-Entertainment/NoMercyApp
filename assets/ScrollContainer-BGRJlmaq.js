import{Et as q,G as A,J as z,K as N,S as V,T as k,Tt as O,Z as j,c as G,gt as D,j as J,w as K,yt as P}from"./i18n-Cs-AFcrY.js";import{pt as U,v as Y,zn as Z}from"./index-BDNnOf7v.js";G();var Q=["data-music"],W=J({__name:"ScrollContainer",props:{autoHide:{type:Boolean,default:!1},className:{type:String,required:!1,default:""},static:{type:Boolean,default:!0},frame:{type:Boolean,default:!1}},emits:["scroll"],setup(d){const m=d,H=P();function R(e){const t=e;H.value=t??void 0,m.static&&(Z.value=t??void 0)}const i=D(),s=D();let o=null,l=null,a=null,u=null,v=!1,n=null;const f={containerH:0,scrollH:0,barH:0};function p(){const e=s.value;!n||!e||(f.containerH=n.clientHeight,f.scrollH=n.scrollHeight,f.barH=e.clientHeight)}function y(){const e=s.value;e&&(e.style.opacity="1")}function _(){if(v)return;const e=s.value;e&&(e.style.opacity="0")}function C(){l!==null&&clearTimeout(l),l=window.setTimeout(_,1200)}function h(){const e=i.value;if(!n||!e)return;const{containerH:t,scrollH:r,barH:c}=f;if(r<=t){_();return}const E=n.scrollTop,T=Math.ceil(t/r*t),M=c-T,S=r-t,$=S>0?E/S:0;e.style.height=`${T}px`,e.style.translate=`0 ${$*M}px`,y(),C()}function F(){o===null&&(o=requestAnimationFrame(()=>{o=null,h()}))}function L(){v=!0,y()}function w(){v=!1,C()}function x(e){e.preventDefault(),document.addEventListener("mousemove",g),document.addEventListener("mouseup",b)}function b(){document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",b)}function g(e){e.preventDefault();const t=i.value,r=s.value;if(!t||!r||!n)return;const c=r.getBoundingClientRect(),E=Math.min(Math.max(0,e.clientY-c.top),c.height)-t.clientHeight/2;n.scrollTop=(n.scrollHeight-n.clientHeight)*(E/(c.height-t.clientHeight))}function I(){B();const e=H.value,t=i.value;!e||!t||(n=e,e.scrollTop=0,p(),requestAnimationFrame(()=>{p(),h()}),a=new ResizeObserver(()=>{p(),h()}),a.observe(e),e.firstElementChild&&a.observe(e.firstElementChild),u=F,e.addEventListener("scroll",u,{passive:!0}),e.addEventListener("pointerenter",L),e.addEventListener("pointerleave",w),t.addEventListener("mousedown",x))}function B(){o!==null&&(cancelAnimationFrame(o),o=null),l!==null&&(clearTimeout(l),l=null),a&&(a.disconnect(),a=null),n&&(u&&n.removeEventListener("scroll",u),n.removeEventListener("pointerenter",L),n.removeEventListener("pointerleave",w)),n=null,u=null;const e=i.value;e&&e.removeEventListener("mousedown",x),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",b)}return A(()=>{m.static||I()}),N(()=>{m.static||B()}),(e,t)=>(z(),k("div",{ref:R,class:q([{"group/scrollContainer":!d.frame,"group/scrollContainer-frame":d.frame},"flex flex-1 h-available z-0 isolate overflow-auto will-change-scroll w-full flex-col scrollbar-none scroll-container text-surface-12"]),"data-music":O(U),tabindex:"1",onScroll:t[0]||(t[0]=r=>e.$emit("scroll",r))},[j(e.$slots,"default",{},void 0,!0),d.static?K("",!0):(z(),k("div",{key:0,ref_key:"refBar",ref:s,class:"group/bar absolute top-2 mr-1 z-10 right-0 bottom-6 hidden rounded-full border-r-2 border-l-4 border-transparent w-3.5 hover:bg-surface-12/6 sm:flex transition-opacity duration-200","data-scrollbar":"",style:{opacity:"0"}},[V("span",{ref_key:"refHandle",ref:i,class:"scrollbar-handle absolute top-0 z-10 h-available right-0 bottom-0 hidden rounded-full border-r-2 border-l-4 border-transparent w-2.5 bg-surface-12/11 sm:flex","data-scrollbar":"",draggable:"true"},null,512)],512))],42,Q))}}),te=Y(W,[["__scopeId","data-v-4717d3b8"]]);export{te as t};
