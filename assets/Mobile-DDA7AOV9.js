import{C as P,Ft as _,Gt as w,Ln as s,Rn as C,Rt as c,Tt as h,cn as m,i as I,kn as M,mt as l,qt as S,u as N,w as T,xn as d,yn as x,zt as v}from"./index-BvWvvCYJ.js";import"./dist-BihaqBnv.js";import{t as B}from"./esm-DfDPtva3.js";import"./esm-BqAMc7kU.js";import"./dist-V4VIRk0I.js";import"./focus-visible-BIx781Si.js";import"./index5-BzLuPScY.js";import"./client-CpuErVxZ.js";import"./ionic-global-CJmx_-hb.js";import"./hardware-back-button-B_o37u13.js";import"./index3-G0l1u6i6.js";import"./helpers-DowMkPjD.js";import"./index6-izL1HMLp.js";import"./index8-C7t1VdhY.js";import"./keyboard-DgjSUzE9.js";import"./index2-DPECLsCu.js";import"./ios.transition-DhveEC6M.js";import"./keyboard2-B9XnMMBK.js";import"./md.transition-BBFMewM_.js";import"./dir-t1mBJu83.js";import"./ui-Dy-CmVFO.js";import"./client-Cg1KDvig.js";import{t as D}from"./currentServer-WcAeFY_n.js";import"./config-BZ-AEJ_J.js";import"./core-B2UrLovc.js";import"./esm-BmSfvbpt.js";import{p as f}from"./global-BWQ-eDb8.js";import"./esm-B0CTWw_3.js";import"./bundle-mjs-D4lrAgGd.js";import{s as t}from"./user-UVXKBmDM.js";import"./serverClient-BAqmq0Lj.js";import{t as a}from"./router-B1ISlAzM.js";import"./utils-CG-VUeeR.js";import"./useBaseQuery-CObiDOM4.js";import"./useInfiniteServerClient-C-13EaEr.js";import{l as y}from"./SocketClient-C4CiAzV3.js";import"./useQueryClient-Do_6BzeG.js";import"./useQuery-DwL9nltn.js";import"./apiClient--wowvE-1.js";import"./notifications-BlOU5FHA.js";import{c as U,i as V,l as A,r as L,y as z}from"./utils-TI96o6zm.js";import"./deviceInfo-a8a7PneO.js";import"./auth-MTzvpPik.js";import{s as p}from"./imageModal-CaU6FSL3.js";import{t as R}from"./useServerClient-DLV471Yh.js";import{a as F,i as j,n as q,o as E,r as G}from"./VideoPlayer-Cvk_XBH8.js";import"./buttons-BrAf7pXX.js";import{t as O}from"./videoNoMercyConnectPlugin-Bgj1vbQh.js";h();var H=S({__name:"Mobile",setup(J){const{data:n}=R({enabled:!t.value.features?.nomercyConnect}),e=M();function u(o){const i={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:o?.filter(r=>!!r.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:t.value?.accessToken||localStorage.getItem("access_token")||"",basePath:D.value?.serverBaseUrl,imageBasePath:"https://app.nomercy.tv/tmdb-images",forceTvMode:(l("android")||l("ios"))&&!l("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||l("capacitor"),renderAhead:100,disableAutoPlayback:t.value.features?.nomercyConnect};if(e.value=G("player1").setup(i),e.value?.once("back",()=>{history.state.back?a.back():a.replace("/")}),t.value.features?.nomercyConnect){const r=new O;e.value?.registerPlugin("videoNoMercyConnect",r),e.value?.usePlugin("videoNoMercyConnect")}const g=new j;e.value?.registerPlugin("desktopUI",g),e.value?.usePlugin("desktopUI");const b=new F;if(e.value?.registerPlugin("autoSkip",b),e.value?.usePlugin("autoSkip"),!t.value.features?.nomercyConnect){const r=new E;e.value?.registerPlugin("sync",r),e.value?.usePlugin("sync")}const k=new q;e.value?.registerPlugin("octopus",k),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?a.back():a.replace("/")}),e.value?.on("dispose",async()=>{await A(),await L(),history.state.back?a.back():await a.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{p(!0)}),e.value?.on("pause",()=>{p(!1)}),e.value?.on("ready",async()=>{await U(),await z(),await V(),y.stop()}),e.value?.on("item",()=>{e.value?.play()}),B.addListener("backButton",()=>{e.value?.emit("back-button-hyjack"),e.value?.dispose()})}return x(n,o=>{o?.length&&u(o)}),P(()=>{y.stop(),t.value.features?.nomercyConnect?u():n.value?.length&&u(n.value)}),T(()=>{e.value?.dispose(),p(!1)}),(o,i)=>(m(),v(s(N),null,{default:d(()=>[w(s(I),{fullscreen:!0},{default:d(()=>[(m(),v(_,{to:"body"},[c("div",{class:C([{"mb-28":s(f),"mb-0":!s(f)},"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"])},[...i[0]||(i[0]=[c("div",{id:"player1",class:"group nomercyplayer"},null,-1)])],2)]))]),_:1})]),_:1}))}}),qe=H;export{qe as default};
