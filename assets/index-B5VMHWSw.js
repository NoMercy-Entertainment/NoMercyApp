import{au as commonjsGlobal,av as getDefaultExportFromCjs,k as reactive}from"./index-H-vD2rqS.js";var keycloak={exports:{}},sha256={exports:{}};/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */var hasRequiredSha256;function requireSha256(){return hasRequiredSha256||(hasRequiredSha256=1,(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(t){return typeof t=="object"&&t.buffer&&t.buffer.constructor===ArrayBuffer});var createOutputMethod=function(t,a){return function(p){return new Sha256(a,!0).update(p)[t]()}},createMethod=function(t){var a=createOutputMethod("hex",t);NODE_JS&&(a=nodeWrap(a,t)),a.create=function(){return new Sha256(t)},a.update=function(h){return a.create().update(h)};for(var p=0;p<OUTPUT_TYPES.length;++p){var n=OUTPUT_TYPES[p];a[n]=createOutputMethod(n,t)}return a},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(t){if(typeof t=="string")return crypto.createHash(algorithm).update(t,"utf8").digest("hex");if(t==null)throw new Error(ERROR);return t.constructor===ArrayBuffer&&(t=new Uint8Array(t)),Array.isArray(t)||ArrayBuffer.isView(t)||t.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(t)).digest("hex"):method(t)};return nodeMethod},createHmacOutputMethod=function(t,a){return function(p,n){return new HmacSha256(p,a,!0).update(n)[t]()}},createHmacMethod=function(t){var a=createHmacOutputMethod("hex",t);a.create=function(h){return new HmacSha256(h,t)},a.update=function(h,c){return a.create(h).update(c)};for(var p=0;p<OUTPUT_TYPES.length;++p){var n=OUTPUT_TYPES[p];a[n]=createHmacOutputMethod(n,t)}return a};function Sha256(t,a){a?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}Sha256.prototype.update=function(t){if(!this.finalized){var a,p=typeof t;if(p!=="string"){if(p==="object"){if(t===null)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(t)))throw new Error(ERROR)}else throw new Error(ERROR);a=!0}for(var n,h=0,c,b=t.length,f=this.blocks;h<b;){if(this.hashed&&(this.hashed=!1,f[0]=this.block,f[16]=f[1]=f[2]=f[3]=f[4]=f[5]=f[6]=f[7]=f[8]=f[9]=f[10]=f[11]=f[12]=f[13]=f[14]=f[15]=0),a)for(c=this.start;h<b&&c<64;++h)f[c>>2]|=t[h]<<SHIFT[c++&3];else for(c=this.start;h<b&&c<64;++h)n=t.charCodeAt(h),n<128?f[c>>2]|=n<<SHIFT[c++&3]:n<2048?(f[c>>2]|=(192|n>>6)<<SHIFT[c++&3],f[c>>2]|=(128|n&63)<<SHIFT[c++&3]):n<55296||n>=57344?(f[c>>2]|=(224|n>>12)<<SHIFT[c++&3],f[c>>2]|=(128|n>>6&63)<<SHIFT[c++&3],f[c>>2]|=(128|n&63)<<SHIFT[c++&3]):(n=65536+((n&1023)<<10|t.charCodeAt(++h)&1023),f[c>>2]|=(240|n>>18)<<SHIFT[c++&3],f[c>>2]|=(128|n>>12&63)<<SHIFT[c++&3],f[c>>2]|=(128|n>>6&63)<<SHIFT[c++&3],f[c>>2]|=(128|n&63)<<SHIFT[c++&3]);this.lastByteIndex=c,this.bytes+=c-this.start,c>=64?(this.block=f[16],this.start=c-64,this.hash(),this.hashed=!0):this.start=c}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,a=this.lastByteIndex;t[16]=this.block,t[a>>2]|=EXTRA[a&3],this.block=t[16],a>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var t=this.h0,a=this.h1,p=this.h2,n=this.h3,h=this.h4,c=this.h5,b=this.h6,f=this.h7,e=this.blocks,w,U,H,y,v,S,A,E,C,F,T;for(w=16;w<64;++w)v=e[w-15],U=(v>>>7|v<<25)^(v>>>18|v<<14)^v>>>3,v=e[w-2],H=(v>>>17|v<<15)^(v>>>19|v<<13)^v>>>10,e[w]=e[w-16]+U+e[w-7]+H<<0;for(T=a&p,w=0;w<64;w+=4)this.first?(this.is224?(E=300032,v=e[0]-1413257819,f=v-150054599<<0,n=v+24177077<<0):(E=704751109,v=e[0]-210244248,f=v-1521486534<<0,n=v+143694565<<0),this.first=!1):(U=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),H=(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7),E=t&a,y=E^t&p^T,A=h&c^~h&b,v=f+H+A+K[w]+e[w],S=U+y,f=n+v<<0,n=v+S<<0),U=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),H=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7),C=n&t,y=C^n&a^E,A=f&h^~f&c,v=b+H+A+K[w+1]+e[w+1],S=U+y,b=p+v<<0,p=v+S<<0,U=(p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10),H=(b>>>6|b<<26)^(b>>>11|b<<21)^(b>>>25|b<<7),F=p&n,y=F^p&t^C,A=b&f^~b&h,v=c+H+A+K[w+2]+e[w+2],S=U+y,c=a+v<<0,a=v+S<<0,U=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10),H=(c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7),T=a&p,y=T^a&n^F,A=c&b^~c&f,v=h+H+A+K[w+3]+e[w+3],S=U+y,h=t+v<<0,t=v+S<<0;this.h0=this.h0+t<<0,this.h1=this.h1+a<<0,this.h2=this.h2+p<<0,this.h3=this.h3+n<<0,this.h4=this.h4+h<<0,this.h5=this.h5+c<<0,this.h6=this.h6+b<<0,this.h7=this.h7+f<<0},Sha256.prototype.hex=function(){this.finalize();var t=this.h0,a=this.h1,p=this.h2,n=this.h3,h=this.h4,c=this.h5,b=this.h6,f=this.h7,e=HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15]+HEX_CHARS[p>>28&15]+HEX_CHARS[p>>24&15]+HEX_CHARS[p>>20&15]+HEX_CHARS[p>>16&15]+HEX_CHARS[p>>12&15]+HEX_CHARS[p>>8&15]+HEX_CHARS[p>>4&15]+HEX_CHARS[p&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[n&15]+HEX_CHARS[h>>28&15]+HEX_CHARS[h>>24&15]+HEX_CHARS[h>>20&15]+HEX_CHARS[h>>16&15]+HEX_CHARS[h>>12&15]+HEX_CHARS[h>>8&15]+HEX_CHARS[h>>4&15]+HEX_CHARS[h&15]+HEX_CHARS[c>>28&15]+HEX_CHARS[c>>24&15]+HEX_CHARS[c>>20&15]+HEX_CHARS[c>>16&15]+HEX_CHARS[c>>12&15]+HEX_CHARS[c>>8&15]+HEX_CHARS[c>>4&15]+HEX_CHARS[c&15]+HEX_CHARS[b>>28&15]+HEX_CHARS[b>>24&15]+HEX_CHARS[b>>20&15]+HEX_CHARS[b>>16&15]+HEX_CHARS[b>>12&15]+HEX_CHARS[b>>8&15]+HEX_CHARS[b>>4&15]+HEX_CHARS[b&15];return this.is224||(e+=HEX_CHARS[f>>28&15]+HEX_CHARS[f>>24&15]+HEX_CHARS[f>>20&15]+HEX_CHARS[f>>16&15]+HEX_CHARS[f>>12&15]+HEX_CHARS[f>>8&15]+HEX_CHARS[f>>4&15]+HEX_CHARS[f&15]),e},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var t=this.h0,a=this.h1,p=this.h2,n=this.h3,h=this.h4,c=this.h5,b=this.h6,f=this.h7,e=[t>>24&255,t>>16&255,t>>8&255,t&255,a>>24&255,a>>16&255,a>>8&255,a&255,p>>24&255,p>>16&255,p>>8&255,p&255,n>>24&255,n>>16&255,n>>8&255,n&255,h>>24&255,h>>16&255,h>>8&255,h&255,c>>24&255,c>>16&255,c>>8&255,c&255,b>>24&255,b>>16&255,b>>8&255,b&255];return this.is224||e.push(f>>24&255,f>>16&255,f>>8&255,f&255),e},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),a=new DataView(t);return a.setUint32(0,this.h0),a.setUint32(4,this.h1),a.setUint32(8,this.h2),a.setUint32(12,this.h3),a.setUint32(16,this.h4),a.setUint32(20,this.h5),a.setUint32(24,this.h6),this.is224||a.setUint32(28,this.h7),t};function HmacSha256(t,a,p){var n,h=typeof t;if(h==="string"){var c=[],b=t.length,f=0,e;for(n=0;n<b;++n)e=t.charCodeAt(n),e<128?c[f++]=e:e<2048?(c[f++]=192|e>>6,c[f++]=128|e&63):e<55296||e>=57344?(c[f++]=224|e>>12,c[f++]=128|e>>6&63,c[f++]=128|e&63):(e=65536+((e&1023)<<10|t.charCodeAt(++n)&1023),c[f++]=240|e>>18,c[f++]=128|e>>12&63,c[f++]=128|e>>6&63,c[f++]=128|e&63);t=c}else if(h==="object"){if(t===null)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(t)))throw new Error(ERROR)}else throw new Error(ERROR);t.length>64&&(t=new Sha256(a,!0).update(t).array());var w=[],U=[];for(n=0;n<64;++n){var H=t[n]||0;w[n]=92^H,U[n]=54^H}Sha256.call(this,a,p),this.update(U),this.oKeyPad=w,this.inner=!0,this.sharedMemory=p}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var t=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(t),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224)})()})(sha256)),sha256.exports}var base64Js={},hasRequiredBase64Js;function requireBase64Js(){if(hasRequiredBase64Js)return base64Js;hasRequiredBase64Js=1,base64Js.byteLength=f,base64Js.toByteArray=w,base64Js.fromByteArray=y;for(var t=[],a=[],p=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,c=n.length;h<c;++h)t[h]=n[h],a[n.charCodeAt(h)]=h;a[45]=62,a[95]=63;function b(v){var S=v.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var A=v.indexOf("=");A===-1&&(A=S);var E=A===S?0:4-A%4;return[A,E]}function f(v){var S=b(v),A=S[0],E=S[1];return(A+E)*3/4-E}function e(v,S,A){return(S+A)*3/4-A}function w(v){for(var S,A=b(v),E=A[0],C=A[1],F=new p(e(v,E,C)),T=0,M=C>0?E-4:E,I=0;I<M;I+=4)S=a[v.charCodeAt(I)]<<18|a[v.charCodeAt(I+1)]<<12|a[v.charCodeAt(I+2)]<<6|a[v.charCodeAt(I+3)],F[T++]=S>>16&255,F[T++]=S>>8&255,F[T++]=S&255;return C===2&&(S=a[v.charCodeAt(I)]<<2|a[v.charCodeAt(I+1)]>>4,F[T++]=S&255),C===1&&(S=a[v.charCodeAt(I)]<<10|a[v.charCodeAt(I+1)]<<4|a[v.charCodeAt(I+2)]>>2,F[T++]=S>>8&255,F[T++]=S&255),F}function U(v){return t[v>>18&63]+t[v>>12&63]+t[v>>6&63]+t[v&63]}function H(v,S,A){for(var E,C=[],F=S;F<A;F+=3)E=(v[F]<<16&16711680)+(v[F+1]<<8&65280)+(v[F+2]&255),C.push(U(E));return C.join("")}function y(v){for(var S,A=v.length,E=A%3,C=[],F=16383,T=0,M=A-E;T<M;T+=F)C.push(H(v,T,T+F>M?M:T+F));return E===1?(S=v[A-1],C.push(t[S>>2]+t[S<<4&63]+"==")):E===2&&(S=(v[A-2]<<8)+v[A-1],C.push(t[S>>10]+t[S>>4&63]+t[S<<2&63]+"=")),C.join("")}return base64Js}var hasRequiredKeycloak;function requireKeycloak(){return hasRequiredKeycloak||(hasRequiredKeycloak=1,(function(t,a){(function(p,n){t.exports=n(requireSha256(),requireBase64Js())})(window,function(p,n){if(typeof Promise>"u")throw Error("Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.");var h=!1;function c(){h||(h=!0,console.warn("[KEYCLOAK] Usage of legacy style promise methods such as `.error()` and `.success()` has been deprecated and support will be removed in future versions. Use standard style promise methods such as `.then() and `.catch()` instead."))}function b(f){if(!(this instanceof b))return new b(f);for(var e=this,w,U=[],H,y={enable:!0,callbackList:[],interval:5},v=document.getElementsByTagName("script"),S=0;S<v.length;S++)(v[S].src.indexOf("keycloak.js")!==-1||v[S].src.indexOf("keycloak.min.js")!==-1)&&v[S].src.indexOf("version=")!==-1&&(e.iframeVersion=v[S].src.substring(v[S].src.indexOf("version=")+8).split("&")[0]);var A=!0,E=ee(console.info),C=ee(console.warn);e.init=function(r){e.authenticated=!1,H=ae();var o=["default","cordova","cordova-native","capacitor","capacitor-native"];if(r&&o.indexOf(r.adapter)>-1?w=q(r.adapter):r&&typeof r.adapter=="object"?w=r.adapter:window.Cordova||window.cordova?w=q("cordova"):window.Capacitor||window.capacitor?w=q("capacitor-native"):w=q(),r){if(typeof r.useNonce<"u"&&(A=r.useNonce),typeof r.checkLoginIframe<"u"&&(y.enable=r.checkLoginIframe),r.checkLoginIframeInterval&&(y.interval=r.checkLoginIframeInterval),r.onLoad==="login-required"&&(e.loginRequired=!0),r.responseMode)if(r.responseMode==="query"||r.responseMode==="fragment")e.responseMode=r.responseMode;else throw"Invalid value for responseMode";if(r.flow){switch(r.flow){case"standard":e.responseType="code";break;case"implicit":e.responseType="id_token token";break;case"hybrid":e.responseType="code id_token token";break;default:throw"Invalid value for flow"}e.flow=r.flow}if(r.timeSkew!=null&&(e.timeSkew=r.timeSkew),r.redirectUri&&(e.redirectUri=r.redirectUri),r.silentCheckSsoRedirectUri&&(e.silentCheckSsoRedirectUri=r.silentCheckSsoRedirectUri),typeof r.silentCheckSsoFallback=="boolean"?e.silentCheckSsoFallback=r.silentCheckSsoFallback:e.silentCheckSsoFallback=!0,r.pkceMethod){if(r.pkceMethod!=="S256")throw"Invalid value for pkceMethod";e.pkceMethod=r.pkceMethod}typeof r.enableLogging=="boolean"?e.enableLogging=r.enableLogging:e.enableLogging=!1,typeof r.scope=="string"&&(e.scope=r.scope)}e.responseMode||(e.responseMode="fragment"),e.responseType||(e.responseType="code",e.flow="standard");var l=_(),d=_();d.promise.then(function(){e.onReady&&e.onReady(e.authenticated),l.setSuccess(e.authenticated)}).catch(function(k){l.setError(k)});var u=te();function x(){var k=function(R){R||(g.prompt="none"),e.login(g).then(function(){d.setSuccess()}).catch(function(){d.setError()})},m=function(){var R=document.createElement("iframe"),N=e.createLoginUrl({prompt:"none",redirectUri:e.silentCheckSsoRedirectUri});R.setAttribute("src",N),R.setAttribute("title","keycloak-silent-check-sso"),R.style.display="none",document.body.appendChild(R);var B=function(L){if(!(L.origin!==window.location.origin||R.contentWindow!==L.source)){var j=O(L.data);P(j,d),document.body.removeChild(R),window.removeEventListener("message",B)}};window.addEventListener("message",B)},g={};switch(r.onLoad){case"check-sso":y.enable?V().then(function(){D().then(function(R){R?d.setSuccess():e.silentCheckSsoRedirectUri?m():k(!1)}).catch(function(){d.setError()})}):e.silentCheckSsoRedirectUri?m():k(!1);break;case"login-required":k(!0);break;default:throw"Invalid value for onLoad"}}function s(){var k=O(window.location.href);if(k&&window.history.replaceState(window.history.state,null,k.newUrl),k&&k.valid)return V().then(function(){P(k,d)}).catch(function(m){d.setError()});r?r.token&&r.refreshToken?(J(r.token,r.refreshToken,r.idToken),y.enable?V().then(function(){D().then(function(m){m?(e.onAuthSuccess&&e.onAuthSuccess(),d.setSuccess(),z()):d.setSuccess()}).catch(function(){d.setError()})}):e.updateToken(-1).then(function(){e.onAuthSuccess&&e.onAuthSuccess(),d.setSuccess()}).catch(function(){e.onAuthError&&e.onAuthError(),r.onLoad?x():d.setError()})):r.onLoad?x():d.setSuccess():d.setSuccess()}function i(){var k=_(),m=function(){(document.readyState==="interactive"||document.readyState==="complete")&&(document.removeEventListener("readystatechange",m),k.setSuccess())};return document.addEventListener("readystatechange",m),m(),k.promise}return u.then(function(){i().then(ne).then(s).catch(function(){l.setError()})}),u.catch(function(){l.setError()}),l.promise},e.login=function(r){return w.login(r)};function F(r){var o=null,l=window.crypto||window.msCrypto;if(l&&l.getRandomValues&&window.Uint8Array)return o=new Uint8Array(r),l.getRandomValues(o),o;o=new Array(r);for(var d=0;d<o.length;d++)o[d]=Math.floor(256*Math.random());return o}function T(r){return M(r,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")}function M(r,o){for(var l=F(r),d=new Array(r),u=0;u<r;u++)d[u]=o.charCodeAt(l[u]%o.length);return String.fromCharCode.apply(null,d)}function I(r,o){switch(r){case"S256":var l=new Uint8Array(p.arrayBuffer(o)),d=n.fromByteArray(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");return d;default:throw"Invalid value for pkceMethod"}}e.createLoginUrl=function(r){var o=Q(),l=Q(),d=w.redirectUri(r),u={state:o,nonce:l,redirectUri:encodeURIComponent(d)};r&&r.prompt&&(u.prompt=r.prompt);var x;r&&r.action=="register"?x=e.endpoints.register():x=e.endpoints.authorize();var s=r&&r.scope||e.scope;s?s.indexOf("openid")===-1&&(s="openid "+s):s="openid";var i=x+"?client_id="+encodeURIComponent(e.clientId)+"&redirect_uri="+encodeURIComponent(d)+"&state="+encodeURIComponent(o)+"&response_mode="+encodeURIComponent(e.responseMode)+"&response_type="+encodeURIComponent(e.responseType)+"&scope="+encodeURIComponent(s);if(A&&(i=i+"&nonce="+encodeURIComponent(l)),r&&r.prompt&&(i+="&prompt="+encodeURIComponent(r.prompt)),r&&r.maxAge&&(i+="&max_age="+encodeURIComponent(r.maxAge)),r&&r.loginHint&&(i+="&login_hint="+encodeURIComponent(r.loginHint)),r&&r.idpHint&&(i+="&kc_idp_hint="+encodeURIComponent(r.idpHint)),r&&r.action&&r.action!="register"&&(i+="&kc_action="+encodeURIComponent(r.action)),r&&r.locale&&(i+="&ui_locales="+encodeURIComponent(r.locale)),e.pkceMethod){var k=T(96);u.pkceCodeVerifier=k;var m=I(e.pkceMethod,k);i+="&code_challenge="+m,i+="&code_challenge_method="+e.pkceMethod}return H.add(u),i},e.logout=function(r){return w.logout(r)},e.createLogoutUrl=function(r){var o=e.endpoints.logout()+"?redirect_uri="+encodeURIComponent(w.redirectUri(r,!1));return o},e.register=function(r){return w.register(r)},e.createRegisterUrl=function(r){return r||(r={}),r.action="register",e.createLoginUrl(r)},e.createAccountUrl=function(r){var o=X(),l=void 0;return typeof o<"u"&&(l=o+"/account?referrer="+encodeURIComponent(e.clientId)+"&referrer_uri="+encodeURIComponent(w.redirectUri(r))),l},e.accountManagement=function(){return w.accountManagement()},e.hasRealmRole=function(r){var o=e.realmAccess;return!!o&&o.roles.indexOf(r)>=0},e.hasResourceRole=function(r,o){if(!e.resourceAccess)return!1;var l=e.resourceAccess[o||e.clientId];return!!l&&l.roles.indexOf(r)>=0},e.loadUserProfile=function(){var r=X()+"/account",o=new XMLHttpRequest;o.open("GET",r,!0),o.setRequestHeader("Accept","application/json"),o.setRequestHeader("Authorization","bearer "+e.token);var l=_();return o.onreadystatechange=function(){o.readyState==4&&(o.status==200?(e.profile=JSON.parse(o.responseText),l.setSuccess(e.profile)):l.setError())},o.send(),l.promise},e.loadUserInfo=function(){var r=e.endpoints.userinfo(),o=new XMLHttpRequest;o.open("GET",r,!0),o.setRequestHeader("Accept","application/json"),o.setRequestHeader("Authorization","bearer "+e.token);var l=_();return o.onreadystatechange=function(){o.readyState==4&&(o.status==200?(e.userInfo=JSON.parse(o.responseText),l.setSuccess(e.userInfo)):l.setError())},o.send(),l.promise},e.isTokenExpired=function(r){if(!e.tokenParsed||!e.refreshToken&&e.flow!="implicit")throw"Not authenticated";if(e.timeSkew==null)return E("[KEYCLOAK] Unable to determine if token is expired as timeskew is not set"),!0;var o=e.tokenParsed.exp-Math.ceil(new Date().getTime()/1e3)+e.timeSkew;if(r){if(isNaN(r))throw"Invalid minValidity";o-=r}return o<0},e.updateToken=function(r){var o=_();if(!e.refreshToken)return o.setError(),o.promise;r=r||5;var l=function(){var u=!1;if(r==-1?(u=!0,E("[KEYCLOAK] Refreshing token: forced refresh")):(!e.tokenParsed||e.isTokenExpired(r))&&(u=!0,E("[KEYCLOAK] Refreshing token: token expired")),!u)o.setSuccess(!1);else{var x="grant_type=refresh_token&refresh_token="+e.refreshToken,s=e.endpoints.token();if(U.push(o),U.length==1){var i=new XMLHttpRequest;i.open("POST",s,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.withCredentials=!0,x+="&client_id="+encodeURIComponent(e.clientId);var k=new Date().getTime();i.onreadystatechange=function(){if(i.readyState==4)if(i.status==200){E("[KEYCLOAK] Token refreshed"),k=(k+new Date().getTime())/2;var m=JSON.parse(i.responseText);J(m.access_token,m.refresh_token,m.id_token,k),e.onAuthRefreshSuccess&&e.onAuthRefreshSuccess();for(var g=U.pop();g!=null;g=U.pop())g.setSuccess(!0)}else{C("[KEYCLOAK] Failed to refresh token"),i.status==400&&e.clearToken(),e.onAuthRefreshError&&e.onAuthRefreshError();for(var g=U.pop();g!=null;g=U.pop())g.setError(!0)}},i.send(x)}}};if(y.enable){var d=D();d.then(function(){l()}).catch(function(){o.setError()})}else l();return o.promise},e.clearToken=function(){e.token&&(J(null,null,null),e.onAuthLogout&&e.onAuthLogout(),e.loginRequired&&e.login())};function X(){if(typeof e.authServerUrl<"u")return e.authServerUrl.charAt(e.authServerUrl.length-1)=="/"?e.authServerUrl+"realms/"+encodeURIComponent(e.realm):e.authServerUrl+"/realms/"+encodeURIComponent(e.realm)}function re(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function P(r,o){var l=r.code,d=r.error,u=r.prompt,x=new Date().getTime();if(r.kc_action_status&&e.onActionUpdate&&e.onActionUpdate(r.kc_action_status),d){if(u!="none"){var s={error:d,error_description:r.error_description};e.onAuthError&&e.onAuthError(s),o&&o.setError(s)}else o&&o.setSuccess();return}else e.flow!="standard"&&(r.access_token||r.id_token)&&g(r.access_token,null,r.id_token,!0);if(e.flow!="implicit"&&l){var i="code="+l+"&grant_type=authorization_code",k=e.endpoints.token(),m=new XMLHttpRequest;m.open("POST",k,!0),m.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i+="&client_id="+encodeURIComponent(e.clientId),i+="&redirect_uri="+r.redirectUri,r.pkceCodeVerifier&&(i+="&code_verifier="+r.pkceCodeVerifier),m.withCredentials=!0,m.onreadystatechange=function(){if(m.readyState==4)if(m.status==200){var R=JSON.parse(m.responseText);g(R.access_token,R.refresh_token,R.id_token,e.flow==="standard"),z()}else e.onAuthError&&e.onAuthError(),o&&o.setError()},m.send(i)}function g(R,N,B,L){x=(x+new Date().getTime())/2,J(R,N,B,x),A&&(e.tokenParsed&&e.tokenParsed.nonce!=r.storedNonce||e.refreshTokenParsed&&e.refreshTokenParsed.nonce!=r.storedNonce||e.idTokenParsed&&e.idTokenParsed.nonce!=r.storedNonce)?(E("[KEYCLOAK] Invalid nonce, clearing token"),e.clearToken(),o&&o.setError()):L&&(e.onAuthSuccess&&e.onAuthSuccess(),o&&o.setSuccess())}}function te(r){var o=_(),l;f?typeof f=="string"&&(l=f):l="keycloak.json";function d(m){m?e.endpoints={authorize:function(){return m.authorization_endpoint},token:function(){return m.token_endpoint},logout:function(){if(!m.end_session_endpoint)throw"Not supported by the OIDC server";return m.end_session_endpoint},checkSessionIframe:function(){if(!m.check_session_iframe)throw"Not supported by the OIDC server";return m.check_session_iframe},register:function(){throw'Redirection to "Register user" page not supported in standard OIDC mode'},userinfo:function(){if(!m.userinfo_endpoint)throw"Not supported by the OIDC server";return m.userinfo_endpoint}}:e.endpoints={authorize:function(){return X()+"/protocol/openid-connect/auth"},token:function(){return X()+"/protocol/openid-connect/token"},logout:function(){return X()+"/protocol/openid-connect/logout"},checkSessionIframe:function(){var g=X()+"/protocol/openid-connect/login-status-iframe.html";return e.iframeVersion&&(g=g+"?version="+e.iframeVersion),g},thirdPartyCookiesIframe:function(){var g=X()+"/protocol/openid-connect/3p-cookies/step1.html";return e.iframeVersion&&(g=g+"?version="+e.iframeVersion),g},register:function(){return X()+"/protocol/openid-connect/registrations"},userinfo:function(){return X()+"/protocol/openid-connect/userinfo"}}}if(l){var u=new XMLHttpRequest;u.open("GET",l,!0),u.setRequestHeader("Accept","application/json"),u.onreadystatechange=function(){if(u.readyState==4)if(u.status==200||$(u)){var m=JSON.parse(u.responseText);e.authServerUrl=m["auth-server-url"],e.realm=m.realm,e.clientId=m.resource,d(null),o.setSuccess()}else o.setError()},u.send()}else{if(!f.clientId)throw"clientId missing";e.clientId=f.clientId;var x=f.oidcProvider;if(x)if(typeof x=="string"){var k;x.charAt(x.length-1)=="/"?k=x+".well-known/openid-configuration":k=x+"/.well-known/openid-configuration";var u=new XMLHttpRequest;u.open("GET",k,!0),u.setRequestHeader("Accept","application/json"),u.onreadystatechange=function(){if(u.readyState==4)if(u.status==200||$(u)){var g=JSON.parse(u.responseText);d(g),o.setSuccess()}else o.setError()},u.send()}else d(x),o.setSuccess();else{if(!f.url){for(var s=document.getElementsByTagName("script"),i=0;i<s.length;i++)if(s[i].src.match(/.*keycloak\.js/)){f.url=s[i].src.substr(0,s[i].src.indexOf("/js/keycloak.js"));break}}if(!f.realm)throw"realm missing";e.authServerUrl=f.url,e.realm=f.realm,d(null),o.setSuccess()}}return o.promise}function $(r){return r.status==0&&r.responseText&&r.responseURL.startsWith("file:")}function J(r,o,l,d){if(e.tokenTimeoutHandle&&(clearTimeout(e.tokenTimeoutHandle),e.tokenTimeoutHandle=null),o?(e.refreshToken=o,e.refreshTokenParsed=Y(o)):(delete e.refreshToken,delete e.refreshTokenParsed),l?(e.idToken=l,e.idTokenParsed=Y(l)):(delete e.idToken,delete e.idTokenParsed),r){if(e.token=r,e.tokenParsed=Y(r),e.sessionId=e.tokenParsed.session_state,e.authenticated=!0,e.subject=e.tokenParsed.sub,e.realmAccess=e.tokenParsed.realm_access,e.resourceAccess=e.tokenParsed.resource_access,d&&(e.timeSkew=Math.floor(d/1e3)-e.tokenParsed.iat),e.timeSkew!=null&&(E("[KEYCLOAK] Estimated time difference between browser and server is "+e.timeSkew+" seconds"),e.onTokenExpired)){var u=(e.tokenParsed.exp-new Date().getTime()/1e3+e.timeSkew)*1e3;E("[KEYCLOAK] Token expires in "+Math.round(u/1e3)+" s"),u<=0?e.onTokenExpired():e.tokenTimeoutHandle=setTimeout(e.onTokenExpired,u)}}else delete e.token,delete e.tokenParsed,delete e.subject,delete e.realmAccess,delete e.resourceAccess,e.authenticated=!1}function Y(r){switch(r=r.split(".")[1],r=r.replace(/-/g,"+"),r=r.replace(/_/g,"/"),r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw"Invalid token"}return r=decodeURIComponent(escape(atob(r))),r=JSON.parse(r),r}function Q(){var r="0123456789abcdef",o=M(36,r).split("");o[14]="4",o[19]=r.substr(o[19]&3|8,1),o[8]=o[13]=o[18]=o[23]="-";var l=o.join("");return l}function O(r){var o=oe(r);if(o){var l=H.get(o.state);return l&&(o.valid=!0,o.redirectUri=l.redirectUri,o.storedNonce=l.nonce,o.prompt=l.prompt,o.pkceCodeVerifier=l.pkceCodeVerifier),o}}function oe(r){var o;switch(e.flow){case"standard":o=["code","state","session_state","kc_action_status"];break;case"implicit":o=["access_token","token_type","id_token","state","session_state","expires_in","kc_action_status"];break;case"hybrid":o=["access_token","token_type","id_token","code","state","session_state","expires_in","kc_action_status"];break}o.push("error"),o.push("error_description"),o.push("error_uri");var l=r.indexOf("?"),d=r.indexOf("#"),u,x;if(e.responseMode==="query"&&l!==-1?(u=r.substring(0,l),x=Z(r.substring(l+1,d!==-1?d:r.length),o),x.paramsString!==""&&(u+="?"+x.paramsString),d!==-1&&(u+=r.substring(d))):e.responseMode==="fragment"&&d!==-1&&(u=r.substring(0,d),x=Z(r.substring(d+1),o),x.paramsString!==""&&(u+="#"+x.paramsString)),x&&x.oauthParams){if(e.flow==="standard"||e.flow==="hybrid"){if((x.oauthParams.code||x.oauthParams.error)&&x.oauthParams.state)return x.oauthParams.newUrl=u,x.oauthParams}else if(e.flow==="implicit"&&(x.oauthParams.access_token||x.oauthParams.error)&&x.oauthParams.state)return x.oauthParams.newUrl=u,x.oauthParams}}function Z(r,o){for(var l=r.split("&"),d={paramsString:"",oauthParams:{}},u=0;u<l.length;u++){var x=l[u].indexOf("="),s=l[u].slice(0,x);o.indexOf(s)!==-1?d.oauthParams[s]=l[u].slice(x+1):(d.paramsString!==""&&(d.paramsString+="&"),d.paramsString+=l[u])}return d}function _(){var r={setSuccess:function(o){r.resolve(o)},setError:function(o){r.reject(o)}};return r.promise=new Promise(function(o,l){r.resolve=o,r.reject=l}),r.promise.success=function(o){return c(),this.then(function(d){o(d)}),this},r.promise.error=function(o){return c(),this.catch(function(d){o(d)}),this},r}function V(){var r=_();if(!y.enable||y.iframe)return r.setSuccess(),r.promise;var o=document.createElement("iframe");y.iframe=o,o.onload=function(){var u=e.endpoints.authorize();u.charAt(0)==="/"?y.iframeOrigin=re():y.iframeOrigin=u.substring(0,u.indexOf("/",8)),r.setSuccess()};var l=e.endpoints.checkSessionIframe();o.setAttribute("src",l),o.setAttribute("title","keycloak-session-iframe"),o.style.display="none",document.body.appendChild(o);var d=function(u){if(!(u.origin!==y.iframeOrigin||y.iframe.contentWindow!==u.source)&&(u.data=="unchanged"||u.data=="changed"||u.data=="error")){u.data!="unchanged"&&e.clearToken();for(var x=y.callbackList.splice(0,y.callbackList.length),s=x.length-1;s>=0;--s){var i=x[s];u.data=="error"?i.setError():i.setSuccess(u.data=="unchanged")}}};return window.addEventListener("message",d,!1),r.promise}function z(){y.enable&&e.token&&setTimeout(function(){D().then(function(r){r&&z()})},y.interval*1e3)}function D(){var r=_();if(y.iframe&&y.iframeOrigin){var o=e.clientId+" "+(e.sessionId?e.sessionId:"");y.callbackList.push(r);var l=y.iframeOrigin;y.callbackList.length==1&&y.iframe.contentWindow.postMessage(o,l)}else r.setSuccess();return r.promise}function ne(){var r=_();if(y.enable||e.silentCheckSsoRedirectUri){var o=document.createElement("iframe");o.setAttribute("src",e.endpoints.thirdPartyCookiesIframe()),o.setAttribute("title","keycloak-3p-check-iframe"),o.style.display="none",document.body.appendChild(o);var l=function(d){o.contentWindow===d.source&&(d.data!=="supported"&&d.data!=="unsupported"||(d.data==="unsupported"&&(y.enable=!1,e.silentCheckSsoFallback&&(e.silentCheckSsoRedirectUri=!1),C("[KEYCLOAK] 3rd party cookies aren't supported by this browser. checkLoginIframe and silent check-sso are not available.")),document.body.removeChild(o),window.removeEventListener("message",l),r.setSuccess()))};window.addEventListener("message",l,!1)}else r.setSuccess();return r.promise}function q(r,o){if(!r||r=="default")return{login:function(s){return window.location.replace(e.createLoginUrl(s)),_().promise},logout:function(s){return window.location.replace(e.createLogoutUrl(s)),_().promise},register:function(s){return window.location.replace(e.createRegisterUrl(s)),_().promise},accountManagement:function(){var s=e.createAccountUrl();if(typeof s<"u")window.location.href=s;else throw"Not supported by the OIDC server";return _().promise},redirectUri:function(s,i){return s&&s.redirectUri?s.redirectUri:e.redirectUri?e.redirectUri:location.href}};if(r=="cordova"){y.enable=!1;var l=function(s,i,k){return window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(s,i,k):window.open(s,i,k)},d=function(s){return s&&s.cordovaOptions?Object.keys(s.cordovaOptions).reduce(function(i,k){return i[k]=s.cordovaOptions[k],i},{}):{}},u=function(s){return Object.keys(s).reduce(function(i,k){return i.push(k+"="+s[k]),i},[]).join(",")},x=function(s){var i=d(s);return i.location="no",s&&s.prompt=="none"&&(i.hidden="yes"),u(i)};return{login:function(s){var i=_(),k=x(s),m=e.createLoginUrl(s),g=l(m,"_blank",k),R=!1,N=!1,B=function(){N=!0,g.close()};return g.addEventListener("loadstart",function(L){if(L.url.indexOf("http://localhost")==0){var j=O(L.url);P(j,i),B(),R=!0}}),g.addEventListener("loaderror",function(L){if(!R)if(L.url.indexOf("http://localhost")==0){var j=O(L.url);P(j,i),B(),R=!0}else i.setError(),B()}),g.addEventListener("exit",function(L){N||i.setError({reason:"closed_by_user"})}),i.promise},logout:function(s){var i=_(),k=e.createLogoutUrl(s),m=l(k,"_blank","location=no,hidden=yes"),g;return m.addEventListener("loadstart",function(R){R.url.indexOf("http://localhost")==0&&m.close()}),m.addEventListener("loaderror",function(R){R.url.indexOf("http://localhost")==0||(g=!0),m.close()}),m.addEventListener("exit",function(R){g?i.setError():(e.clearToken(),i.setSuccess())}),i.promise},register:function(s){var i=_(),k=e.createRegisterUrl(),m=x(s),g=l(k,"_blank",m);return g.addEventListener("loadstart",function(R){if(R.url.indexOf("http://localhost")==0){g.close();var N=O(R.url);P(N,i)}}),i.promise},accountManagement:function(){var s=e.createAccountUrl();if(typeof s<"u"){var i=l(s,"_blank","location=no");i.addEventListener("loadstart",function(k){k.url.indexOf("http://localhost")==0&&i.close()})}else throw"Not supported by the OIDC server"},redirectUri:function(s){return"http://localhost"}}}if(r=="cordova-native")return y.enable=!1,{login:function(s){var i=_(),k=e.createLoginUrl(s);return universalLinks.subscribe("keycloak",function(m){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var g=O(m.url);P(g,i)}),window.cordova.plugins.browsertab.openUrl(k),i.promise},logout:function(s){var i=_(),k=e.createLogoutUrl(s);return universalLinks.subscribe("keycloak",function(m){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),e.clearToken(),i.setSuccess()}),window.cordova.plugins.browsertab.openUrl(k),i.promise},register:function(s){var i=_(),k=e.createRegisterUrl(s);return universalLinks.subscribe("keycloak",function(m){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var g=O(m.url);P(g,i)}),window.cordova.plugins.browsertab.openUrl(k),i.promise},accountManagement:function(){var s=e.createAccountUrl();if(typeof s<"u")window.cordova.plugins.browsertab.openUrl(s);else throw"Not supported by the OIDC server"},redirectUri:function(s){return s&&s.redirectUri?s.redirectUri:e.redirectUri?e.redirectUri:"http://localhost"}};if(r=="capacitor")return y.enable=!1,{login:function(s){var i=_(),k=e.createLoginUrl(s);return window.Capacitor.Plugins.App.addListener("appUrlOpen",m=>{window.cordova.plugins.browsertab.close();var g=O(m.url);P(g,i)}),window.cordova.plugins.browsertab.openUrl(k),i.promise},logout:function(s){var i=_(),k=e.createLogoutUrl(s);return window.Capacitor.Plugins.App.addListener("appUrlOpen",m=>{window.cordova.plugins.browsertab.close(),e.clearToken(),i.setSuccess()}),window.cordova.plugins.browsertab.openUrl(k),i.promise},register:function(s){var i=_(),k=e.createRegisterUrl(s);return window.Capacitor.Plugins.App.addListener("appUrlOpen",m=>{window.cordova.plugins.browsertab.close();var g=O(m.url);P(g,i)}),window.cordova.plugins.browsertab.openUrl(k),i.promise},accountManagement:function(){var s=e.createAccountUrl();if(typeof s<"u")window.cordova.plugins.browsertab.openUrl(s);else throw"Not supported by the OIDC server"},redirectUri:function(s){return s&&s.redirectUri?s.redirectUri:e.redirectUri?e.redirectUri:"http://localhost"}};if(r=="capacitor-native")return y.enable=!1,{login:function(s){var i=_(),k=e.createLoginUrl(s);const m=window.Capacitor.Plugins.App.addListener("appUrlOpen",g=>{var R=O(g.url);P(R,i),m.remove()});return window.open(k,"_system"),i.promise},logout:function(s){var i=_(),k=e.createLogoutUrl(s);const m=window.Capacitor.Plugins.App.addListener("appUrlOpen",g=>{e.clearToken(),i.setSuccess(),m.remove()});return window.open(k,"_system"),i.promise},register:function(s){var i=_(),k=e.createRegisterUrl(s);return window.Capacitor.Plugins.App.addListener("appUrlOpen",m=>{var g=O(m.url);P(g,i)}),window.open(k,"_system"),i.promise},accountManagement:function(){var s=e.createAccountUrl();if(typeof s<"u")window.open(s,"_system");else throw"Not supported by the OIDC server"},redirectUri:function(s){return s&&s.redirectUri?s.redirectUri:e.redirectUri?e.redirectUri:"http://localhost"}};throw"invalid adapter type: "+r}var W=function(){if(!(this instanceof W))return new W;localStorage.setItem("kc-test","test"),localStorage.removeItem("kc-test");var r=this;function o(){for(var l=new Date().getTime(),d=0;d<localStorage.length;d++){var u=localStorage.key(d);if(u&&u.indexOf("kc-callback-")==0){var x=localStorage.getItem(u);if(x)try{var s=JSON.parse(x).expires;(!s||s<l)&&localStorage.removeItem(u)}catch{localStorage.removeItem(u)}}}}r.get=function(l){if(l){var d="kc-callback-"+l,u=localStorage.getItem(d);return u&&(localStorage.removeItem(d),u=JSON.parse(u)),o(),u}},r.add=function(l){o();var d="kc-callback-"+l.state;l.expires=new Date().getTime()+3600*1e3,localStorage.setItem(d,JSON.stringify(l))}},G=function(){if(!(this instanceof G))return new G;var r=this;r.get=function(u){if(u){var x=l("kc-callback-"+u);if(d("kc-callback-"+u,"",o(-100)),x)return JSON.parse(x)}},r.add=function(u){d("kc-callback-"+u.state,JSON.stringify(u),o(60))},r.removeItem=function(u){d(u,"",o(-100))};var o=function(u){var x=new Date;return x.setTime(x.getTime()+u*60*1e3),x},l=function(u){for(var x=u+"=",s=document.cookie.split(";"),i=0;i<s.length;i++){for(var k=s[i];k.charAt(0)==" ";)k=k.substring(1);if(k.indexOf(x)==0)return k.substring(x.length,k.length)}return""},d=function(u,x,s){var i=u+"="+x+"; expires="+s.toUTCString()+"; ";document.cookie=i}};function ae(){try{return new W}catch{}return new G}function ee(r){return function(){e.enableLogging&&r.apply(console,Array.prototype.slice.call(arguments))}}}return b})})(keycloak)),keycloak.exports}var keycloakExports=requireKeycloak();const Keycloak=getDefaultExportFromCjs(keycloakExports);let installed=!1;const KeycloakSymbol=Symbol("keycloak"),index={async install(t,a={}){if(installed)return;installed=!0;const p={config:window.__BASEURL__?`${window.__BASEURL__}/config`:"/config",init:{onLoad:"login-required"}},n=Object.assign({},p,a);if(assertOptions(n).hasError)throw new Error(`Invalid options given: ${assertOptions(n).error}`);const h=await vue2AndVue3Reactive(t,defaultEmptyVueKeycloakInstance());getConfig(n.config).then(c=>{init(c,h,n)}).catch(c=>{console.log(c)})},KeycloakSymbol};function defaultEmptyVueKeycloakInstance(){return{ready:!1,authenticated:!1,userName:void 0,fullName:void 0,token:void 0,tokenParsed:void 0,logoutFn:void 0,loginFn:void 0,login:void 0,createLoginUrl:void 0,createLogoutUrl:void 0,createRegisterUrl:void 0,register:void 0,accountManagement:void 0,createAccountUrl:void 0,loadUserProfile:void 0,subject:void 0,idToken:void 0,idTokenParsed:void 0,realmAccess:void 0,resourceAccess:void 0,refreshToken:void 0,refreshTokenParsed:void 0,timeSkew:void 0,responseMode:void 0,responseType:void 0,hasRealmRole:void 0,hasResourceRole:void 0,keycloak:void 0}}function vue2AndVue3Reactive(t,a){return new Promise((p,n)=>{if(t.prototype)try{const h=t.observable(a);Object.defineProperty(t.prototype,"$keycloak",{get(){return h}}),p(h)}catch(h){n(h)}else{const h=reactive(a);t.config.globalProperties.$keycloak=h,t.provide(KeycloakSymbol,h),p(h)}})}function init(t,a,p){const n=Keycloak(t);n.onReady=function(c){h(c),a.ready=!0,typeof p.onReady=="function"&&p.onReady(n,a)},n.onAuthSuccess=function(){h(!0),a.ready=!0;const c=setInterval(()=>n.updateToken(60).catch(()=>{n.clearToken()}),1e4);a.logoutFn=()=>{clearInterval(c),n.logout(p.logout)}},n.onAuthRefreshSuccess=function(){h(!0),typeof p.onAuthRefreshSuccess=="function"&&p.onAuthRefreshSuccess(n)},n.onAuthRefreshError=function(){h(!1),typeof p.onAuthRefreshError=="function"&&p.onAuthRefreshError(n)},h(!1),p.init!==void 0&&n.init(p.init).then(c=>{h(c),typeof p.onInitSuccess=="function"&&p.onInitSuccess(c)}).catch(c=>{h(!1);const b=new Error("Failure during initialization of keycloak-js adapter");typeof p.onInitError=="function"?p.onInitError(b,c):console.error(b,c)});function h(c=!1){a.authenticated=c,a.loginFn=n.login,a.login=n.login,a.createLoginUrl=n.createLoginUrl,a.createLogoutUrl=n.createLogoutUrl,a.createRegisterUrl=n.createRegisterUrl,a.register=n.register,a.keycloak=n,c&&(a.accountManagement=n.accountManagement,a.createAccountUrl=n.createAccountUrl,a.hasRealmRole=n.hasRealmRole,a.hasResourceRole=n.hasResourceRole,a.loadUserProfile=n.loadUserProfile,a.token=n.token,a.subject=n.subject,a.idToken=n.idToken,a.idTokenParsed=n.idTokenParsed,a.realmAccess=n.realmAccess,a.resourceAccess=n.resourceAccess,a.refreshToken=n.refreshToken,a.refreshTokenParsed=n.refreshTokenParsed,a.timeSkew=n.timeSkew,a.responseMode=n.responseMode,a.responseType=n.responseType,a.tokenParsed=n.tokenParsed,a.userName=n.tokenParsed.preferred_username,a.fullName=n.tokenParsed.name)}}function assertOptions(t){const{config:a,init:p,onReady:n,onInitError:h,onAuthRefreshError:c}=t;return typeof a!="string"&&!_isObject(a)?{hasError:!0,error:`'config' option must be a string or an object. Found: '${a}'`}:!_isObject(p)||typeof p?.onLoad!="string"?{hasError:!0,error:`'init' option must be an object with an 'onLoad' property. Found: '${p}'`}:n&&typeof n!="function"?{hasError:!0,error:`'onReady' option must be a function. Found: '${n}'`}:h&&typeof h!="function"?{hasError:!0,error:`'onInitError' option must be a function. Found: '${h}'`}:c&&typeof c!="function"?{hasError:!0,error:`'onAuthRefreshError' option must be a function. Found: '${c}'`}:{hasError:!1,error:null}}function _isObject(t){return t!==null&&typeof t=="object"&&Object.prototype.toString.call(t)!=="[object Array]"}function getConfig(t){return _isObject(t)?Promise.resolve(t):new Promise((a,p)=>{const n=new XMLHttpRequest;n.open("GET",t),n.setRequestHeader("Accept","application/json"),n.onreadystatechange=()=>{n.readyState===4&&(n.status===200?a(JSON.parse(n.responseText)):p(new Error(n.statusText)))},n.send()})}export{index as default};
