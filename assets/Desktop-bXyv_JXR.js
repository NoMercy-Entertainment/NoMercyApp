import{I as E,$ as H,l as v,w as _,a9 as T,es as m,et as p,a8 as b,aa as V,ab as N,d as u,o as s,s as y,j as h,K as e,bu as j,c as L,b as z,a as g,n as F,a3 as w,a4 as x,F as P,h as O,bh as R,eu as W,ev as D,b1 as K}from"./index-BzddMR-Z.js";import{u as M}from"./useServerClient-Q1lUvFmE.js";import{_ as q,a as A,S as G,b as J}from"./TrackRow.vue_vue_type_script_setup_true_lang-DVUJaHPw.js";import{_ as Q}from"./ScrollContainer.vue_vue_type_script_setup_true_lang-Duu3RqA5.js";import{_ as U}from"./NotFound.vue_vue_type_script_setup_true_lang-CXbJL49_.js";import"./useQuery-Cjmb8-YN.js";import"./useBaseQuery-FjCDbk8j.js";import"./useQueryClient-CScaY66s.js";import"./useInfiniteServerClient-Bd554tV4.js";import"./BigPlayButton.vue_vue_type_script_setup_true_lang-WANJnkwF.js";import"./PlayerIcon.vue_vue_type_script_setup_true_lang-C-OFbMdG.js";import"./MusicButton.vue_vue_type_script_setup_true_lang-BpfBMlyH.js";import"./index-rsbz97XY.js";import"./index-C-xQS3yy.js";import"./index-1OIG4w3U.js";import"./index-CSvdKrK4.js";import"./index-ZhWAdK_X.js";import"./OptimizedIcon.vue_vue_type_script_setup_true_lang-BC8tj0dR.js";import"./MediaLikeButton-BTNuIp0V.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ShareButton.vue_vue_type_script_setup_true_lang-D1vhVKYe.js";import"./FavoriteImage.vue_vue_type_script_setup_true_lang-hE7BDP_T.js";import"./CoverImage.vue_vue_type_script_setup_true_lang-ClVPZH0h.js";import"./AppLogoSquare-BL4KctQO.js";import"./contextMenuItems-DRjMwVUE.js";import"./musicPlaylists-ByQrpfkX.js";import"./EqSpinner-DNjIkZBp.js";import"./TrackLinks.vue_vue_type_script_setup_true_lang-DUP5-EF6.js";import"./DropdownMenu.vue_vue_type_script_setup_true_lang-BJfgTEWG.js";import"./BannerButton.vue_vue_type_script_setup_true_lang-H1SCLlla.js";import"./Marquee.vue_vue_type_script_setup_true_lang-C1aVO7FF.js";const X={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},Ee=E({__name:"Desktop",setup(Y){const f=H(),{data:t,isError:$}=M({path:f.fullPath}),B=v(null),d=v(),r=v("");_(t,a=>{a&&(K(a?.name??null),c(a?.tracks??[],p.value,m.value,r.value),b(a?.color_palette?.cover))}),_(m,a=>{c(t.value?.tracks??[],p.value,a,r.value)}),_(p,a=>{c(t.value?.tracks??[],a,m.value,r.value)}),_(r,a=>{c(t.value?.tracks??[],p.value,m.value,a)});function c(a,i,l,n){const C=W(a??[],i,l,D);n===""?d.value=C:d.value=C?.filter(k=>k.name?.toLowerCase().includes(n?.toLowerCase?.())||k.artist_track?.some(I=>I.name.toLowerCase().includes(n?.toLowerCase?.()))||k.album_track?.[0]?.name.toLowerCase().includes(n?.toLowerCase?.()))??[]}T(()=>{t?.value?.tracks&&c(t?.value?.tracks??[],p.value,m.value,r.value),t.value?.color_palette?.cover&&b(t.value?.color_palette?.cover)}),V(()=>{document.getElementById("navbar")&&(document.getElementById("navbar").style.display="flex"),b(null),N(null)});const o=v();function S(){if(window.CSS.supports("container-type","scroll-state"))return;Math.ceil(o.value?.$el?.getBoundingClientRect()?.top??500)<=67?(o.value?.$el?.classList.add("!bg-focus"),o.value?.$el?.firstChild?.classList.add("!bg-black/50")):(o.value?.$el?.classList.remove("!bg-focus"),o.value?.$el?.firstChild?.classList.remove("!bg-black/50"))}return(a,i)=>(s(),u(e(R),null,{default:y(()=>[h(e(j),{fullscreen:!0,class:"flex"},{default:y(()=>[e($)&&!e(t)?(s(),u(U,{key:0})):(s(),u(Q,{key:1,"auto-hide":!0,static:!0,onScroll:S},{default:y(()=>[!e(f).params.id||e(f).params.id&&e(t)?.id===e(f).params.id?(s(),L("div",{key:0,ref_key:"main",ref:B,class:"flex flex-col overflow-x-clip w-available h-available sm:rounded-2xl"},[h(q,{data:e(t)},null,8,["data"]),g("div",X,[i[1]||(i[1]=g("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom bg-focus"},null,-1)),(s(),u(A,{key:e(t)?.id,data:e(t),filter:r.value,onFilterChange:i[0]||(i[0]=l=>r.value=l)},null,8,["data","filter"])),g("div",{class:F(["flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-slate-light-1 dark:bg-slate-dark-2 flex-grow-1 gap-0.5 sm:p-4",{"pb-24":e(w)&&!e(x),"pb-40":e(w)&&e(x),"pb-4 sm:pb-4":!e(w)&&e(x)}])},[(s(),u(G,{ref_key:"sortHeader",ref:o,key:e(t)?.id})),(s(!0),L(P,null,O(d.value,(l,n)=>(s(),u(J,{key:l.id+l?.favorite,data:l,"display-list":d.value,index:n},null,8,["data","display-list","index"]))),128))],2)])],512)):z("",!0)]),_:1}))]),_:1})]),_:1}))}});export{Ee as default};
