import{Q as d,u as v}from"./useBaseQuery-FjCDbk8j.js";import{c_ as g,c$ as y,d0 as m,$ as l,R as p,O as x}from"./index-BzddMR-Z.js";var b=class extends d{constructor(e,s){super(e,s)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:g()})}getOptimisticResult(e){return e.behavior=g(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,s){const{state:r}=e,t=super.createResult(e,s),{isFetching:a,isRefetching:u,isError:i,isRefetchError:n}=t,c=r.fetchMeta?.fetchMore?.direction,h=i&&c==="forward",o=a&&c==="forward",f=i&&c==="backward",P=a&&c==="backward";return{...t,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:m(s,r.data),hasPreviousPage:y(s,r.data),isFetchNextPageError:h,isFetchingNextPage:o,isFetchPreviousPageError:f,isFetchingPreviousPage:P,isRefetchError:n&&!h&&!f,isRefetching:u&&!o&&!P}}};function R(e,s){return v(b,e)}function q(e){if(e?.queryKey)return e?.queryKey;const s=l(),r=[];return(e?.path??s.path)?.split("/").slice(1).forEach(t=>{t.includes("?")?(r.push(t.split("?")[0]),r.push(t.split("?")[1].split("=")[1])):r.push(t)}),e?.queryKey??r}function w(e){const r=l();return R({...e,queryKey:e?.queryKey??(e?.path??r.fullPath).split("/").slice(1),enabled:!!p.value?.id&&e?.enabled,retry:0,staleTime:e?.keepForever?1/0:1e3*60*5,retryOnMount:!1,refetchOnMount:!0,refetchOnWindowFocus:!1,refetchOnReconnect:!0,initialPageParam:0,getNextPageParam:t=>t.has_more?t.next_page:void 0,getPreviousPageParam:t=>t.has_more?t.next_page-2:void 0,queryFn:({pageParam:t=0,signal:a})=>new Promise((u,i)=>x().get(e?.path??r.fullPath,{signal:a,params:{page:t,version:e?.version,take:e?.limit??3}}).then(n=>{u(n.data)}).catch(i))})}export{q,w as u};
