import"./useBaseQuery-DhMTNjjH.js";import"./useInfiniteServerClient-BOGzXRLT.js";import"./useQueryClient-BDTWlHnP.js";import"./useQuery-UqFzG2sc.js";import{Aa as b,Ba as E,Ca as A,Ea as H,Er as N,H as m,Hs as K,J,Ja as U,Js as Y,Ks as O,Mi as x,Mt as k,Ns as R,Os as X,Sa as G,St as h,Va as W,Ws as i,X as v,Xn as Q,Y as g,Yo as Z,Ys as _,_a as d,an as C,cs as I,dn as S,ec as T,es as q,gs as ee,ii as te,js as n,ls as w,ms as s,ns as ae,os as le,qa as se,sc as e,ss as r,ts as $,us as c,ut as oe,va as ie,wa as re,ya as P}from"./index-zK1-WOQT.js";import"./basecomponent-BCCSVKeT.js";import"./classnames-BTI3HSIl.js";import"./button-BFgBlxd4.js";import"./baseicon-BujroYwJ.js";import{t as ne}from"./_plugin-vue_export-helper-CksOYaUN.js";import"./AppLogoSquare-ClEEG0E7.js";import{t as ue}from"./OptimizedIcon-BHUzMN75.js";import"./dist-YiGZl1e5.js";import{t as ce}from"./useServerClient-BWjN3Na1.js";import{t as z}from"./CoverImage-TSBXufAd.js";import{t as de}from"./MusicButton-CWjcKUpW.js";import{t as B}from"./MediaLikeButton-BMj5yK2v.js";import"./PlayerIcon-BBwNC4v3.js";import{t as fe}from"./TrackLinks-LAb5sZud.js";import{t as pe}from"./Marquee-DiB7YgKA.js";import{t as me}from"./EqSpinner-DE6fOqoz.js";import{t as ve}from"./BigPlayButton-B2Vqc5h3.js";Z();se();E();var _e={class:"w-available h-available absolute left-[202px] top-0 overflow-hidden bg-focus"},be=["src"],we={class:"flex justify-center w-available aspect-square my-8 ml-8 mr-16"},ye={key:0,class:"relative mb-8 flex w-full flex-1 flex-shrink-0 flex-col items-start justify-start gap-4 flex-grow-1 text-left"},xe=["innerHTML"],ke={key:1,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap"},he={class:"flex items-center h-8 gap-2 self-stretch w-full text-xs font-medium text-left"},ge={key:0,class:"flex gap-2"},Ce={key:1,class:"flex gap-2"},Ie={class:"flex gap-2 items-center justify-between w-full"},Se=["data-id","data-index","onClick"],Te={class:"flex w-available overflow-clip items-end"},qe=ee({__name:"Tv",setup($e){const M=U(),{data:l}=ce({path:M.fullPath});X(()=>{l.value?.color_palette?.cover&&S(l.value?.color_palette?.cover),setTimeout(()=>{const o=document.querySelector(".focusable");o&&o.focus()},100)}),K(l,o=>{o?.color_palette?.cover&&S(o?.color_palette?.cover),setTimeout(()=>{const t=document.querySelector(".focusable");t&&t.focus()},100)});const y=T(),L=T();W(()=>{setTimeout(()=>{const o=document.querySelector(".focusable");o&&o.focus()},100)});function j(o){const t=o.target,a=y.value?.getAttribute("data-index")??0,u=t.querySelector(`[data-index="${a}"] .focusable`);u&&u.focus()}function F(o){const t=o.target;y.value=t,t&&t.scrollIntoView({behavior:"smooth",block:"center"});const a=t.closest("[data-id]")?.getAttribute("data-id"),u=t.querySelector(`[data-index="${a}"] .focusable`);u&&u.focus()}function V(o){const t=o.target;if(o.key==="ArrowUp"){const a=(t.closest("ion-item")?.previousSibling).querySelector(".focusable");a&&(a.focus(),a.scrollIntoView({behavior:"smooth",block:"center"}))}else if(o.key==="ArrowDown"){const a=(t.closest("ion-item")?.nextSibling).querySelector(".focusable");a&&(a.focus(),a.scrollIntoView({behavior:"smooth",block:"center"}))}}const f=le(()=>`${l.value?.type?.replace(/s$/u,"")}/${l.value?.id}`);function D(o){if(l.value?.tracks){if(!te.value.features?.nomercyConnect){if(g.value===f.value){m.togglePlayback();return}m.playTrack(o,l.value?.tracks),h(f.value);return}if(J.value||k.value?.invoke("ChangeDeviceCommand",x.value).then(()=>{console.log("Switched to device:",x.value)}).catch(t=>{console.error("Error switching device:",t)}),k.value?.invoke("StartPlaybackCommand",l.value?.type.replace(/s$/u,""),l.value?.id,v.value?.id??o?.id),g.value===f.value){m.togglePlayback();return}m.playTrack(o,l.value?.tracks),h(f.value)}}return(o,t)=>(n(),I(e(H),null,{default:i(()=>[s(e(ie),{fullscreen:!0},{default:i(()=>[(n(),c("div",{key:e(l)?.id,style:Y(e(C)?`--color-theme-8: ${e(C)}`:""),class:"w-full h-full absolute left-0 top-0 bg-[#131314] pointer-events-none -z-10"},[r("div",_e,[r("img",{src:`${e(N)?.serverBaseUrl}${e(l)?.backdrop??e(l)?.cover}`,alt:"",class:"w-available h-available absolute left-[-0.39px] top-[-0.39px] opacity-40 object-cover object-center"},null,8,be),t[5]||(t[5]=r("div",{class:"w-[150vw] h-[150vw] absolute left-[-30%] bottom-[-50%]",style:{background:`radial-gradient(
                closest-side,
                rgba(19, 19, 20, 0.1) 0%,
                rgba(19, 19, 20, 1) 70.73974609375%
              )`}},null,-1))])],4)),s(e(P),null,{default:i(()=>[s(e(b),{class:"ion-align-items-end"},{default:i(()=>[s(e(d),{size:"3"},{default:i(()=>[r("div",we,[s(z,{alt:e(l)?.name,data:e(l),class:"w-auto h-full aspect-square"},null,8,["alt","data"])]),e(l)?.name?(n(),c("div",ye,[e(l).name.length>50?(n(),c("div",{key:0,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap",innerHTML:e(Q)(e(l)?.name??"Songs you like","text-xs line-clamp-1")},null,8,xe)):(n(),c("p",ke,_(e(l)?.name),1)),r("div",he,[e(l)?.type?(n(),c("span",ge,[r("span",null,_(e(l)?.type.replace(/s$/u,"").toTitleCase()),1)])):w("",!0),e(l)?.tracks?(n(),c("span",Ce,[t[6]||(t[6]=r("span",null,"â€¢",-1)),r("span",null,_(e(l)?.tracks.length)+" "+_(o.$t("tracks")),1)])):w("",!0)]),r("div",Ie,[s(B,{data:e(l)},null,8,["data"]),s(ve,{data:e(l),class:"w-12 h-12 ml-auto"},null,8,["data"])])])):w("",!0)]),_:1}),s(e(d),{ref_key:"scrollContainer",ref:L,class:"w-full h-available overflow-auto scroll-smooth",size:"6",tabindex:"0",onFocus:t[4]||(t[4]=a=>j(a))},{default:i(()=>[s(e(re),{lines:"none",mode:"md"},{default:i(()=>[(n(!0),c(ae,null,R(e(l)?.tracks,(a,u)=>(n(),I(e(G),{key:a.id+a?.favorite,class:"group/track focus-within:bg-white/4 rounded-md overflow-clip",mode:"md",tabindex:"-1"},{default:i(()=>[s(e(P),null,{default:i(()=>[s(e(b),{"data-id":a.id,"data-index":u,class:"items-center !rounded-md !overflow-clip",tabindex:"-1"},{default:i(()=>[s(e(d),{size:"2",tabindex:"-1"},{default:i(()=>[r("button",{"data-id":a.id,"data-index":u,class:"focusable flex justify-center w-full aspect-video focus:outline outline-focus outline-2 outline-offset-2 mr-2 overflow-clip",tabindex:"0",onClick:p=>D(a),onFocus:t[0]||(t[0]=p=>F(p))},[s(z,{alt:a.name,data:a,class:"w-auto h-full aspect-square"},null,8,["alt","data"])],40,Se)]),_:2},1024),s(e(d),{class:"my-auto mt-2",size:"8",tabindex:"-1"},{default:i(()=>[s(e(A),{tabindex:"-1"},{default:i(()=>[r("div",Te,[r("div",{class:O([{"w-0":e(v)?.id!==a.id,"w-6 mr-1":e(v)?.id===a.id},"flex items-center justify-center h-full aspect-square overflow-clip transition-width duration-200"])},[s(me,{playing:e(oe)},null,8,["playing"])],2),s(pe,{playing:!!e(v)?.id,text:a.name,class:"!w-[calc(100%-30px)] children:leading-none w-available overflow-clip"},null,8,["playing","text"])]),s(fe,{id:a.id,data:a.artist_track,suffix:"track",type:"artists",onKeyup:t[1]||(t[1]=p=>V(p)),onKeydown:[t[2]||(t[2]=q($(()=>{},["prevent"]),["up"])),t[3]||(t[3]=q($(()=>{},["prevent"]),["down"]))]},null,8,["id","data"])]),_:2},1024)]),_:2},1024),s(e(d),{class:"opacity-0 group-focus-within/track:opacity-100 -ml-2",size:"2",tabindex:"-1"},{default:i(()=>[s(e(b),{class:"flex flex-nowrap",tabindex:"-1"},{default:i(()=>[s(B,{data:a},null,8,["data"]),s(de,{onclick:()=>{},class:"!bg-transparent mr-2",label:"",tabindex:"0"},{default:i(()=>[s(ue,{class:"text-white",icon:"menuDotsHorizontal"})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1032,["data-id","data-index"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}))}}),Qe=ne(qe,[["__scopeId","data-v-b212aa98"]]);export{Qe as default};
