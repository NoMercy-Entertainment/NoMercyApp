const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/versionCheck-Dzkf03sL.js","assets/index-CyPt8zMH.js","assets/i18n-Bgv5p1Yb.js","assets/rolldown-runtime-C0YIJfRR.js","assets/vue-core-Aw6Jkp0Q.js","assets/ionic-B1wlflFe.js","assets/vue-core-ClHTSD12.css","assets/signalr-BrWheOh-.js","assets/utils-D8i-hqKp.js","assets/primevue-CuC2W_MW.js","assets/query-xyWPY_A0.js","assets/index-DynqTmIs.css","assets/pwa-ClLXpcWV.js","assets/updateState-CMA_0NzW.js","assets/serviceWorkerUpdates-BWMgSv8z.js"])))=>i.map(i=>d[i]);
import{G as J,H as X,J as h,O as ee,Ot as W,St as te,T as k,Tt as ne,X as I,Z as re,c as z,g as O,gt as _,j as oe,kt as ae,o as L,ot as y,s as se,t as ie,z as le}from"./i18n-Bgv5p1Yb.js";import"./ionic-B1wlflFe.js";import{B as ue,F as ce}from"./vue-core-Aw6Jkp0Q.js";import{a as de,c as me,d as ve,f as fe,i as pe,l as we,m as ye,n as ge,o as he,p as ke,r as xe,s as Ce,u as _e,v as Se,x as Te}from"./primevue-CuC2W_MW.js";import{o as be}from"./query-xyWPY_A0.js";import{Gi as F,Oa as Be,Vt as P,Zi as G,c as N,d as U,i as Q,k as T,la as Ae,m as b,p as Me,qi as Ee,x as Ve,y as Re}from"./index-CyPt8zMH.js";import"./scrollHandlers-CxH54l9m.js";import{t as q}from"./konami-CJv1jTzQ.js";z();function $e(e,t){let o;return(...s)=>{o!==void 0&&clearTimeout(o),o=setTimeout(()=>e(...s),t)}}function De({columns:e,columnWidth:t,emit:o,gap:s,items:i,maxColumns:m,minColumns:f,nextTick:l,onBeforeUnmount:B,onMounted:S,rtl:c,scrollContainer:d,ssrColumns:p,vue:Y,wall:x,watch:A}){function M(n,r,a,v){const g=E(a);return v+r+g<=n?M(n,r,a+1,v+r+g):a}function E(n){const r=Array.isArray(t.value)?t.value:[t.value];return r[n%r.length]}function Z(){const n=H(j(M(x.value.getBoundingClientRect().width,s.value,0,-s.value)));return n>0?n:1}function j(n){const r=m?.value;return r&&n>r?r:n}function H(n){const r=f?.value;return r&&n<r?r:n}if(p.value>0){const n=K(p.value);i.value.forEach((r,a)=>n[a%p.value].push(a)),e.value=n}let V=0;async function R(n,r){if(n>=i.value.length||(await l(),V!==r))return;const a=[...x.value.children];c.value&&a.reverse();const v=a.reduce((g,D)=>D.getBoundingClientRect().height<g.getBoundingClientRect().height?D:g);e.value[+v.dataset.index].push(n),await R(n+1,r)}async function C(n=!1){const r=Z();if(e.value.length===r&&!n){o(Y===2?"redraw-skip":"redrawSkip");return}e.value=K(r);const a=d?.value,v=a?a.scrollTop:window.scrollY;await R(0,++V),a?a.scrollBy({top:v-a.scrollTop}):window.scrollTo({top:v}),o("redraw")}const $=typeof ResizeObserver>"u"?void 0:new ResizeObserver($e(()=>C()));return S(()=>{C(),$?.observe(x.value)}),B(()=>$?.unobserve(x.value)),A([i,c],()=>C(!0)),A([t,s,f,m],()=>C()),{getColumnWidthTarget:E}}function K(e){return Array.from({length:e}).map(()=>[])}var We=["data-index"],Ie=oe({__name:"masonry-wall",props:{columnWidth:{default:400},items:{},gap:{default:0},rtl:{type:Boolean,default:!1},ssrColumns:{default:0},scrollContainer:{default:null},minColumns:{default:1},maxColumns:{},keyMapper:{}},emits:["redraw","redrawSkip"],setup(e,{emit:t}){const o=e,s=t,i=_([]),m=_(),{getColumnWidthTarget:f}=De({columns:i,emit:s,nextTick:le,onBeforeUnmount:X,onMounted:J,vue:3,wall:m,watch:y,...te(o)});return(l,B)=>(h(),k("div",{ref_key:"wall",ref:m,class:"masonry-wall",style:W({display:"flex",gap:`${l.gap}px`})},[(h(!0),k(O,null,I(i.value,(S,c)=>(h(),k("div",{key:c,class:"masonry-column","data-index":c,style:W({display:"flex","flex-basis":`${ne(f)(c)}px`,"flex-direction":"column","flex-grow":1,gap:`${l.gap}px`,height:["-webkit-max-content","-moz-max-content","max-content"],"min-width":0})},[(h(!0),k(O,null,I(S,(d,p)=>(h(),k("div",{key:l.keyMapper?.(l.items[d],c,p,d)??d,class:"masonry-item"},[re(l.$slots,"default",{item:l.items[d],column:c,columnCount:i.value.length,row:p,index:d},()=>[ee(ae(l.items[d]),1)])]))),128))],12,We))),128))],4))}}),Oe=(()=>{const e=Ie;return e.install=t=>{t.component("MasonryWall",e)},e})();z();var{idle:Le,reset:Pe}=Be((G.value??0)*60*1e3,{events:["mousemove","mousedown","keydown","touchstart","wheel"]}),w=_(-1),u=_(null);y(Ee,async(e,t)=>{!e||e.id===t?.id||await F.invalidateQueries({queryKey:["setup","screensaver"]})});setInterval(()=>{u.value&&(Q.value||b.value&&(w.value=w.value+1>=u.value?.length?0:w.value+1))},45*1e3);y([w,b],()=>{setTimeout(()=>{u.value&&(Q.value||Me.value||!b.value||N(u.value[w.value%u.value.length]))},150)});y(G,()=>{Pe()});y(u,()=>{w.value=0});y([Le,u],async([e])=>{e&&u.value&&u.value.length>0?(U(!0),document.querySelector("#imageModal")?.showModal()):(U(!1),N(void 0),document.querySelector("#imageModal")?.close())});var Ue={install:(e,t)=>{if(t===void 0||typeof t.onKonamiCodeEntered!="function"){console.warn("Konami-Code Plugin installed but no method 'onKonamiCodeEntered' in options parameter detected.");return}const o=["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","b","a"];let s=0;function i(){s=0}function m(f){f.key===o[s++]?s===o.length&&(t.onKonamiCodeEntered(),i()):i()}document.addEventListener("keydown",m)}};se();async function Ze(e){queueMicrotask(async()=>{try{const{startVersionChecks:t}=await L(async()=>{const{startVersionChecks:o}=await import("./versionCheck-Dzkf03sL.js");return{startVersionChecks:o}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]));t()}catch(t){console.warn("Version check setup failed:",t)}if("serviceWorker"in navigator)try{await navigator.serviceWorker.ready;const{setupServiceWorkerUpdates:t}=await L(async()=>{const{setupServiceWorkerUpdates:o}=await import("./serviceWorkerUpdates-BWMgSv8z.js");return{setupServiceWorkerUpdates:o}},__vite__mapDeps([14,1,2,3,4,5,6,7,8,9,10,11,12]));t()}catch(t){console.warn("Service worker setup failed:",t)}}),e.use(T),e.use(ce),e.use(ie,{i18next:Ae,rerenderOn:["languageChanged","loaded"]}),e.use(be,{enableDevtoolsV6Plugin:!0,queryClient:F}),e.use(fe,{theme:{preset:ge},ripple:!0,inputVariant:"outlined",inputStyle:"outlined",options:{prefix:"p",darkModeSelector:".scheme-dark",cssLayer:{name:"primevue",order:"tailwind-base, primevue, tailwind-utilities"}}}),e.use(Ue,{onKonamiCodeEntered:()=>{q.value=!q.value}}),e.use(Oe),e.component("Modal",Ve),e.component("Button",Re),e.component("Card",ke),e.component("Dialog",Se),e.component("InputNumber",we),e.component("InputText",ye),e.component("MultiSelect",Ce),e.component("ScrollPanel",he),e.component("Select",_e),e.component("Toast",pe),e.component("Textarea",de),e.directive("ripple",Te),e.directive("tooltip",me),e.use(ve),e.use(xe),T.isReady().then(()=>{e.mount("#app")}),ue(9999,()=>{document.dispatchEvent(new Event("backbutton"))}),await P.addListener("backButton",async t=>{document.querySelector("video")||(console.log("Back button pressed",t),t.canGoBack?T.back():await P.exitApp())})}export{Ze as setupApp};
