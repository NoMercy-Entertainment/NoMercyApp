import{C as n,Et as O,J as s,Ot as V,S as t,T as v,Tt as a,X,c as g,ct as i,g as q,gt as u,j as b,k as e,kt as y,ot as z,w as h,x as E}from"./i18n-Cs-AFcrY.js";import{qi as H}from"./ionic-XwZpO7IE.js";import{m as J,y as Q}from"./vue-core-CKeWI2Kt.js";import"./primevue-DNc5dNs0.js";import"./query-28IwY2wK.js";import{Ei as S,In as W,J as A,St as Y,V as D,W as w,Y as r,_r as G,_t as K,b as f,ft as x,g as U,ja as Z,rt as M,v as ee,wt as F}from"./index-DrJzBuck.js";import{t as ae}from"./DropdownMenu-DFZPGwaP.js";import"./ScrollContainer-D37aBKVO.js";import{n as te,t as le}from"./LyricsOverlay-DQdPaGdJ.js";import{n as se,t as oe}from"./ChristmasSnow-HWCCgh7v.js";import{t as m}from"./MusicButton-CUCqEk03.js";import"./BannerButton-630QfOW3.js";import{t as re}from"./MediaLikeButton-DMwMvuf0.js";import{n as ie,r as ne,t as ue}from"./TrackLinks-0ZGYjoLS.js";import{a as ce,c as _e,i as de,n as fe,o as pe,r as ve,s as me,t as he}from"./EqButton-CuAhp8G2.js";import{n as xe,r as we}from"./swiper-DjMBAKTb.js";g();var ye=["data-size"],ge={key:0,class:"whitespace-pre text-center leading-none text-2xs"},be={key:1,class:"whitespace-pre-line text-pretty text-left leading-5 text-base"},ke={class:"flex flex-col gap-1 min-h-[85px]"},Pe=b({__name:"TopRow",setup(k){const l=E(()=>r.value?.album_track?.[0]?.name);return(c,_)=>(s(),v("div",{"data-size":a(x),class:"flex h-16 w-full items-center justify-between"},[e(m,{onclick:()=>a(w)(),class:"!min-w-12",label:"close"},{default:i(()=>[e(f,{class:"h-6 w-6",icon:"chevronDown"})]),_:1},8,["onclick"]),t("div",{class:O([{"mt-2":!a(H)("capacitor")},"relative flex flex-col gap-1"])},[l.value?(s(),v("span",ge,y(c.$t("Now playing")),1)):h("",!0),l.value?(s(),v("div",be,y(l.value),1)):h("",!0)],2),e(ae,{class:"!min-w-12 flex items-center justify-center",orientation:"vertical"},{button:i(()=>[e(f,{class:"h-6 w-6",icon:"menuDotsVertical"})]),default:i(()=>[t("div",ke,[e(m,{onclick:()=>a(w)(),label:"close"},{default:i(()=>[e(f,{class:"h-6 w-6",icon:"chevronDown"})]),_:1},8,["onclick"]),e(m,{onclick:()=>a(w)(),label:"close"},{default:i(()=>[e(f,{class:"h-6 w-6",icon:"chevronDown"})]),_:1},8,["onclick"]),e(m,{onclick:()=>a(w)(),label:"close"},{default:i(()=>[e(f,{class:"h-6 w-6",icon:"chevronDown"})]),_:1},8,["onclick"])])]),_:1})],8,ye))}}),ze=Pe;g();var Se={class:"flex w-full flex-col justify-end gap-8"},Te={class:"my-1 flex w-full items-center"},Be={class:"z-10 flex w-full flex-col gap-2 overflow-clip"},Ce={class:"w-full overflow-clip text-xl font-semibold line-clamp-1"},je={class:"overflow-hidden leading-none w-inherit line-clamp-1"},$e=["data-size"],De=b({__name:"TrackRow",setup(k){function l(){x.value===S.compact?F(S.full):F(S.compact)}return(c,_)=>(s(),v("div",Se,[t("div",Te,[t("div",Be,[t("h6",Ce,[t("span",je,y(a(r)?.name),1)]),t("div",{"data-size":a(x),class:"mb-1 inline-flex w-fit gap-1 overflow-hidden whitespace-nowrap text-xs line-clamp-1 hover:animate-pause"},[a(r)?(s(),n(ue,{key:0,id:a(r).id,data:a(r).artist_track,onclick:l,type:"artists"},null,8,["id","data"])):h("",!0)],8,$e)]),a(r)?(s(),n(re,{key:a(r)?.id+a(r)?.favorite,data:a(r),class:"flex",color:"var(--color-theme-8)"},null,8,["data"])):h("",!0)])]))}}),Me=De;g();var Fe=["data-size"],Oe=["data-size"],qe=b({__name:"ButtonContainer",setup(k){const l=Z("nmplayer-music-supports-audio-context",!1);return(c,_)=>(s(),v(q,null,[t("div",{"data-size":a(x),class:"flex w-full items-center justify-between px-6"},[e(ve),e(me),e(ie,{class:"!h-14 !w-14 !bg-focus/50 !rounded-full shadow-[0_1px_0_0_rgba(255,255,255,0.20)_inset,0_-1px_0_0_rgb(from_var(--color-slate-9)_r_g_b/60%)_inset,0_22px_30px_-4px_rgb(from_var(--color-slate-9)_r_g_b/70%)] dark:shadow-[0_1px_0_0_rgba(255,255,255,0.20)_inset,0_-1px_0_0_rgb(from_var(--color-slate-1)_r_g_b/30%)_inset,0_22px_30px_-4px_rgb(from_var(--color-slate-1)_r_g_b/70%)] hover:shadow-[0_1px_0_0_rgba(255,255,255,0.20)_inset,0_-1px_0_0_rgb(from_var(--color-slate-11)_r_g_b/60%)_inset,0_22px_30px_-4px_rgb(from_var(--color-slate-11)_r_g_b/70%)] dark:hover:shadow-[0_1px_0_0_rgba(255,255,255,0.20)_inset,0_-1px_0_0_rgb(from_var(--color-slate-1)_r_g_b/30%)_inset,0_22px_30px_-4px_rgb(from_var(--color-slate-1)_r_g_b/70%)] active:!shadow-none active:!dark:shadow-none"}),e(_e),e(de)],8,Fe),t("div",{"data-size":a(x),class:"mb-12 flex h-12 w-full justify-between px-6 gap-2 z-10"},[e(ne,{ref:"deviceOverlay",class:"!w-auto !justify-start"},null,512),e(fe,{class:"ml-auto"}),a(l)?(s(),n(he,{key:0})):h("",!0),e(ce,{ref:"queueOverlay"},null,512),e(se),e(te)],8,Oe)],64))}}),Ee=qe;g();var Ie={class:"relative z-0 flex h-screen min-h-screen flex-col items-center justify-between gap-2 w-inherit scrollbar-none text-surface-12 overflow-clip"},Re={class:"frosting w-available max-w-2xl h-auto aspect-square shadow mx-6 relative items-center flex"},Le={class:"frosting relative mx-3 mb-0 -mt-8 rounded-2xl pt-10 w-available bg-focus/60 shadow text-surface-12"},Ne={class:"absolute top-0 z-10 flex w-full items-center rounded-t-2xl pr-2 pl-4 font-semibold"},Ve=b({__name:"FullPlayer",setup(k){const l=u("small"),c=u(),_=u(),I=u(),P=u(0),T=u(),B=u("lazy"),C=u([r.value,...Object.values(K.value)]);z(l,()=>{setTimeout(()=>{l.value==="small"?document.querySelector("#MobilePlayer")?.scrollTo({top:window.innerHeight/2,behavior:"smooth"}):document.querySelector("#MobilePlayer")?.scrollTo({top:999990,behavior:"smooth"})},200)},{immediate:!0}),z(M,o=>{o&&(I.value=W.value,setTimeout(()=>{B.value="eager"},50))}),z(r,o=>{if(!o)return;const d=C.value.findIndex(p=>p.id===o.id);P.value=d,T.value?.$el?.swiper.slideTo(d)});const j=E(()=>G(r.value?.color_palette?.cover,20,160));function R(o){o.touches.diff!==0&&(o.touches.startX>o.touches.currentX&&o.touches.diff<-100?D.next():o.touches.startX<o.touches.currentX&&o.touches.diff>100&&D.previous())}function L(){_.value&&(l.value=l.value==="small"?"full":"small",l.value==="small"?(c.value?.$el?.scrollToTop(),setTimeout(()=>{_.value.style.height="25rem"},500)):(_.value.style.height=`${window.innerHeight*.915}px`,setTimeout(()=>{c.value.$el?.scrollToBottom()},0)))}async function N(){Y(!1)}return(o,d)=>(s(),n(a(Q),{id:"fullPlayer",key:"fullPlayer",breakpoints:[0,1],"initial-breakpoint":1,"is-open":a(M),onWillDismiss:N},{default:i(()=>[e(a(J),{ref_key:"content",ref:c,class:O({"is-open":l.value==="full"}),fullscreen:!0,style:V(j.value?`--color-theme-8: ${j.value};`:"")},{default:i(()=>[e(oe),t("div",Ie,[d[0]||(d[0]=t("div",{class:"pointer-events-none absolute inset-0 w-full transition-all duration-500",style:{background:"linear-gradient(to bottom, hsl(from var(--color-theme-8) h s 30%), hsl(from var(--color-theme-8) h s 5%))"}},null,-1)),e(ze,{class:"pt-safe px-6"}),(s(),n(a(xe),{key:a(A),ref_key:"swiper",ref:T,"initial-slide":P.value,loop:!0,"slides-per-view":1,class:"w-available swiper isolate z-0 mb-4",onTouchEnd:R},{default:i(()=>[(s(!0),v(q,null,X(C.value??[],(p,$)=>(s(),n(a(we),{key:p.id,"data-id":p.id,"data-index":$,class:"h-full"},{default:i(()=>[t("div",Re,[(s(),n(U,{key:p.id,data:p,loading:$===P.value?"eager":B.value,"class-name":"pointer-events-none relative aspect-square h-auto overflow-clip rounded-md w-inherit shadow"},null,8,["data","loading"]))])]),_:2},1032,["data-id","data-index"]))),128))]),_:1},8,["initial-slide"])),e(Me,{class:"px-6"}),e(pe,{class:"children:!mx-0 gap-4 px-6"}),e(Ee)]),t("div",Le,[t("div",Ne,[t("span",null,y(o.$t("Lyrics")),1),e(m,{onclick:L,class:"ml-auto",label:"expand"},{default:i(()=>[l.value==="full"?(s(),n(f,{key:0,class:"h-5 w-5",icon:"arrowExitFullscreen"})):(s(),n(f,{key:1,class:"h-5 w-5",icon:"arrowEnterFullscreen"}))]),_:1})]),d[1]||(d[1]=t("div",{class:"pointer-events-none absolute inset-0 flex items-center justify-center rounded-xl bg-black opacity-3"},null,-1)),t("div",{ref_key:"lyricsContainer",ref:_,class:"relative w-full mb-0 flex-col overflow-auto scroll-smooth rounded-b-2xl p-4 transition-transform duration-150 h-[25rem]"},[e(le,{class:"sm:hidden"})],512)])]),_:1},8,["class","style"])]),_:1},8,["is-open"]))}}),oa=ee(Ve,[["__scopeId","data-v-41e13d42"]]);export{oa as default};
