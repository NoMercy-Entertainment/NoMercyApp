{"version":3,"file":"Edit-Bn1R_u-0.js","sources":["../../src/components/FolderBrowser.vue","../../src/views/Dashboard/System/Libraries/components/NewFolderModal.vue","../../src/views/Dashboard/System/Libraries/components/DeleteLibraryModal.vue","../../src/views/Dashboard/System/Libraries/components/DeleteFolderModal.vue","../../src/views/Dashboard/System/Libraries/components/Folder.vue","../../src/components/Forms/Checkbox.vue","../../src/views/Dashboard/System/Libraries/components/FolderItem.vue","../../src/views/Dashboard/System/Libraries/components/AddContentModal.vue","../../src/views/Dashboard/System/Libraries/Edit.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { onMounted, PropType, ref, watch } from 'vue';\nimport { useTranslation } from 'i18next-vue';\n\nimport type { DirectoryTreeItem, DirectoryTreeResponse } from \"@/types/api/dashboard/server\";\n\nimport serverClient from '@/lib/clients/serverClient';\nimport ScrollContainer from \"@/Layout/Desktop/components/ScrollContainer.vue\";\nimport MoooomIcon from \"@/components/Images/icons/MoooomIcon.vue\";\n\nconst { t } = useTranslation();\n\nconst props = defineProps({\n  selected: {\n    type: String,\n    required: true,\n  },\n  setSelected: {\n    type: Function as PropType<(value: string) => void>,\n    required: true,\n  },\n});\n\nwatch(props, (value) => {\n  path.value = value.selected;\n});\n\nconst path = ref(props.selected ?? '/');\nconst lock = ref(false);\nconst directorySeparator = ref('/');\n\nwatch(path, (newValue) => {\n  props.setSelected(newValue);\n\n  lock.value = false;\n});\n\nconst showFolders = ref<DirectoryTreeItem[]>([]);\nconst loading = ref(false);\n\nconst getFolders = (folder: string) => {\n  serverClient()\n    .post<DirectoryTreeResponse>('/dashboard/server/directorytree', {\n      folder: folder,\n    })\n    .then(({ data }) => {\n      showFolders.value = data.data.filter(f => f.type == 'folder');\n      directorySeparator.value = data.data.at(0)?.full_path?.match(/[\\\\/]/gu)?.at(-1) ?? '/';\n    })\n    .then(() => loading.value = false);\n};\n\nwatch(path, (value) => {\n  if (!value) return;\n\n  getFolders(value ?? '');\n});\n\nconst handleGoUp = () => {\n  lock.value = true;\n  path.value = path.value.split(/[/\\\\]/gu).slice(0, -1).join(directorySeparator.value);\n\n  if (!path.value.match(/[/\\\\]/gu)?.length) {\n    path.value = '/';\n  }\n\n};\n\nconst handleClick = (folder: DirectoryTreeItem) => {\n  path.value = folder.full_path;\n};\n\nonMounted(() => {\n  getFolders(path.value ?? '');\n});\n\n</script>\n\n<template>\n  <div class=\"relative mt-1 w-full\">\n    <InputText id=\"folderName\" name=\"\" variant=\"filled\" class=\"w-full\" v-model=\"path\">\n    </InputText>\n  </div>\n  <div class=\"relative flex w-full flex-col overflow-clip h-[88%] even:text-lg\">\n    <div class=\"flex p-2 pt-4 border-b !bg-transparent text-sm select-none\">\n      <span class=\"\">\n        {{ t('Type') }}\n      </span>\n      <span class=\"mr-auto ml-4\">\n        {{ t('Name') }}\n      </span>\n    </div>\n    <div class=\"relative flex w-full flex-col h-[85%]\">\n      <ScrollContainer :static=\"false\" :autoHide=\"false\" className=\"ml-2\">\n        <div @click=\"handleGoUp\"\n          class=\"bg-auto-6/4 hover:bg-auto-200 border-t-0 border-b border-solid border-[rgba(34,34,34,0.9)] contain flex items-center text-current cursor-pointer overflow-hidden py-1 px-2 align-middle h-10 min-h-10 leading-6 select-none\"\n          :class=\"path == '/' ? 'opacity-50' : ''\">\n          <MoooomIcon icon=\"returnPackage\" class=\"mt-1 h-5 w-5\" />\n          <span class=\"mr-auto !ml-7\">...</span>\n        </div>\n        <div class=\"relative w-full h-auto\">\n          <div v-for=\"folder in showFolders\" :key=\"folder.full_path\" @click=\"() => handleClick(folder)\"\n            class=\"even:bg-auto-6/2 odd:bg-auto-100 hover:bg-auto-200 border-t-0 border-b border-solid border-[rgba(34,34,34,0.9)] contain flex items-center bg-transparent text-current cursor-pointer overflow-hidden py-1 px-2 align-middle h-10 leading-6\">\n            <MoooomIcon icon=\"folder\" class=\"h-5 w-5\" />\n            <span class=\"mr-auto !ml-7 text-sm select-none\">\n              {{ folder.path.replace(/[\\\\\\/]/u, '') }}\n            </span>\n          </div>\n        </div>\n      </ScrollContainer>\n    </div>\n  </div>\n</template>\n","<script lang=\"ts\" setup>\nimport { PropType } from 'vue';\nimport { useTranslation } from 'i18next-vue';\nimport { useRoute } from 'vue-router';\nimport { useQueryClient } from '@tanstack/vue-query';\n\nimport type { ServerLibrary } from '@/types/server';\n\nimport serverClient from '@/lib/clients/serverClient';\nimport FolderBrowser from '@/components/FolderBrowser.vue';\nimport Modal from '@/components/Modal.vue';\n\nconst props = defineProps({\n  open: {\n    type: Boolean,\n    required: true,\n  },\n  close: {\n    type: Function as PropType<() => any>,\n    required: true,\n  },\n  folder: {\n    type: String,\n    required: true,\n  },\n  setFolder: {\n    type: Function as PropType<(folder: string) => void>,\n    required: true,\n  },\n  library: {\n    type: Object as PropType<ServerLibrary>,\n    required: false,\n  },\n});\n\nconst route = useRoute();\nconst { t } = useTranslation();\nconst query = useQueryClient();\n\nconst handleCreateFolder = () => {\n  serverClient()\n    .post<{\n      message: string,\n      status: string,\n      args: string[];\n    }>(`dashboard/libraries/${route.params.id ?? props.library?.id}/folders`, {\n      path: props.folder,\n    })\n    .then(({ data }) => {\n      query.invalidateQueries({ queryKey: ['dashboard', 'libraries'] });\n\n      // showNotification({\n      // \ttitle: translate(data.message, ...data.args),\n      // \ttype: data.status == 'ok'\n      // \t\t? TYPE.SUCCESS\n      // \t\t: TYPE.ERROR,\n      // \tvisibleOnly: true,\n      // \tduration: 2000,\n      // });\n\n      props.setFolder('/');\n\n      props.close();\n    });\n};\n\n</script>\n<template>\n  <Modal :close=\"close\" :open=\"open\" maxWidth=\"max-w-5xl\" title=\"Add folder\">\n\n    <div class=\"mx-auto flex w-full flex-col h-[44vh]\">\n      <FolderBrowser :selected=\"folder\" :setSelected=\"setFolder\" />\n    </div>\n\n    <template v-slot:actions>\n      <Button id=\"yes\" :onClick=\"handleCreateFolder\" color=\"theme\" type=\"button\" variant=\"contained\">\n        {{ t('Add') }}\n      </button>\n      <Button id=\"no\" :onClick=\"close\" type=\"button\" color=\"text-auto-alpha-11\" variant=\"text\">\n        {{ t('Cancel') }}\n      </button>\n    </template>\n  </Modal>\n</template>\n","<script lang=\"ts\" setup>\nimport { PropType } from 'vue';\nimport { useTranslation } from 'i18next-vue';\nimport { useQueryClient } from '@tanstack/vue-query';\n\nimport serverClient from '@/lib/clients/serverClient';\n\nimport Modal from '@/components/Modal.vue';\nimport Button from '@/components/Button.vue';\n\nconst props = defineProps({\n\topen: {\n\t\ttype: Boolean,\n\t\trequired: true,\n\t},\n\tclose: {\n\t\ttype: Function as PropType<() => any>,\n\t\trequired: true,\n\t},\n\tid: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\tname: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\tnoRedirect: {\n\t\ttype: Boolean,\n\t\tdefault: false,\n\t},\n});\n\nconst { t } = useTranslation();\nconst query = useQueryClient();\n\nconst handleDelete = () => {\n\tserverClient()\n\t\t.delete(`dashboard/libraries/${props.id}`)\n\t\t.then(({ data }) => {\n\n\t\t\t// showNotification({\n\t\t\t// \ttitle: translate(data.message, ...data.args ?? []),\n\t\t\t// \ttype: data.status == 'ok'\n\t\t\t// \t\t? TYPE.SUCCESS\n\t\t\t// \t\t: TYPE.ERROR,\n\t\t\t// \tvisibleOnly: true,\n\t\t\t// \tduration: 2000,\n\t\t\t// });\n\t\t\tquery.invalidateQueries({ queryKey: ['dashboard', 'libraries'] });\n\n\t\t\tif (props.noRedirect) return;\n\t\t\twindow.history.back();\n\t\t});\n\n\tprops.close();\n};\n\n</script>\n<template>\n\t<Modal :close=\"close\" :open=\"open\" maxWidth=\"max-w-xl\" :params=\"{ library: props.name }\"\n\t\t:title=\"`Delete library {{library}}`\">\n\n\t\t<div class=\"my-6 text-sm text-auto-10\">\n\t\t\t{{ t('Are you sure you want to delete this library?') }}\n\t\t</div>\n\n\t\t<template v-slot:actions>\n\t\t\t<Button id=\"yes\" :onclick=\"handleDelete\" endIcon=\"trash\" color=\"red\" type=\"button\" variant=\"contained\">\n\t\t\t\t{{ t('Delete') }}\n\t\t\t</button>\n\t\t\t<Button id=\"no\" :onClick=\"close\" type=\"button\" color=\"text-auto-alpha-11\" variant=\"text\">\n\t\t\t\t{{ t('Cancel') }}\n\t\t\t</button>\n\t\t</template>\n\t</Modal>\n</template>\n","<script lang=\"ts\" setup>\nimport { PropType } from 'vue';\nimport { useTranslation } from 'i18next-vue';\nimport { useRoute } from 'vue-router';\nimport { useQueryClient } from '@tanstack/vue-query';\n\nimport serverClient from '@/lib/clients/serverClient';\n\nimport Modal from '@/components/Modal.vue';\n\nconst props = defineProps({\n  open: {\n    type: Boolean,\n    required: true,\n  },\n  close: {\n    type: Function as PropType<() => any>,\n    required: true,\n  },\n  id: {\n    type: String,\n    required: true,\n  },\n  name: {\n    type: String,\n    required: true,\n  },\n  noRedirect: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst { t } = useTranslation();\nconst query = useQueryClient();\nconst route = useRoute();\n\nconst handleDelete = () => {\n  serverClient()\n    .delete<{\n      message: string,\n      status: string,\n      args: string[];\n    }>(`dashboard/libraries/${route.params.id}/folders/${props.id}`)\n    .then(({ data }) => {\n      query.invalidateQueries({ queryKey: ['dashboard', 'libraries'] });\n\n      // showNotification({\n      //     title: translate(data.message, ...data.args),\n      //     type: data.status == 'ok'\n      //         ? TYPE.SUCCESS\n      //         : TYPE.ERROR,\n      //     visibleOnly: true,\n      //     duration: 2000,\n      // });\n    });\n\n  props.close();\n};\n\n</script>\n<template>\n  <Modal :close=\"close\" :open=\"open\" maxWidth=\"max-w-xl\" :params=\"{ folder: props.name }\"\n    :title=\"`Delete folder {{folder}}`\">\n\n    <div class=\"my-6 text-sm text-auto-10\">\n      {{ t('Are you sure you want to delete this folder?') }}\n    </div>\n\n    <template v-slot:actions>\n      <Button id=\"yes\" :onclick=\"handleDelete\" endIcon=\"trash\" color=\"red\" type=\"button\" variant=\"contained\">\n        {{ t('Delete') }}\n      </button>\n      <Button id=\"no\" :onClick=\"close\" type=\"button\" color=\"text-auto-alpha-11\" variant=\"text\">\n        {{ t('Cancel') }}\n      </button>\n    </template>\n  </Modal>\n</template>\n","<script setup lang='ts'>\nimport { computed, PropType, ref, toRaw, watch } from 'vue';\n\nimport type { EncoderProfile, FolderLibrary } from '@/types/api/base/library';\n\nimport useServerClient from \"@/lib/clients/useServerClient\";\n\nimport DeleteFolderModal from \"./DeleteFolderModal.vue\";\n\nconst props = defineProps({\n\thandleDeleteFolder: {\n\t\ttype: Function,\n\t\trequired: true,\n\t},\n\tfolder: {\n\t\ttype: Object as PropType<FolderLibrary>,\n\t\trequired: true,\n\t},\n\tsetEncoderQualities: {\n\t\ttype: Function as PropType<(FolderLibrary: FolderLibrary, profiles: EncoderProfile[]) => void>,\n\t\trequired: true,\n\t},\n\ttype: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n});\n\nconst { data: encoderProfiles } = useServerClient<EncoderProfile[]>({\n\tpath: 'dashboard/encoderProfiles',\n\tqueryKey: ['dashboard', 'encoderProfiles'],\n});\n\nconst availableQualities = computed(() => {\n\tswitch (props.type) {\n\t\tcase 'anime':\n\t\t\treturn encoderProfiles.value\n          ?.filter(encoderQualities => encoderQualities.container == 'm3u8')\n          .map(encoderQualities => toRaw(encoderQualities));\n\t\tcase 'movie':\n\t\t\treturn encoderProfiles.value\n          ?.filter(encoderQualities => encoderQualities.container == 'm3u8')\n          .map(encoderQualities => toRaw(encoderQualities));\n\t\tcase 'tv':\n\t\t\treturn encoderProfiles.value\n          ?.filter(encoderQualities => encoderQualities.container == 'm3u8')\n          .map(encoderQualities => toRaw(encoderQualities));\n\t\tcase 'music':\n\t\t\treturn encoderProfiles.value\n          ?.filter(encoderQualities => encoderQualities.container == 'mp3' || encoderQualities.container == 'flac')\n          .map(encoderQualities => toRaw(encoderQualities));\n\t\tdefault:\n\t\t\treturn [];\n\t}\n});\n\nconst encoderQualities = ref<EncoderProfile[]>(availableQualities.value?.filter((quality) => props.folder.folder.encoder_profiles?.some((profile) => profile.id === quality.id)) ?? []);\nwatch(availableQualities, (newVal) => {\n\tif (!newVal) return;\n\tencoderQualities.value = newVal.filter((quality) => props.folder.folder.encoder_profiles.some((profile) => profile.id === quality.id));\n});\n\nwatch(encoderQualities, (newVal) => {\n\tprops.setEncoderQualities(toRaw(props.folder), toRaw(newVal));\n});\n\nconst deleteConfirmOpen = ref(false);\nconst openDeleteConfirm = () => {\n\tdeleteConfirmOpen.value = true;\n};\nconst closeDeleteConfirm = () => {\n\tdeleteConfirmOpen.value = false;\n};\n\n</script>\n\n<template>\n\t<div\n\t\tclass='flex w-full flex-col items-center justify-between gap-2 rounded-md px-4 py-2 pr-2 odd:bg-auto-alpha-3 even:bg-auto-alpha-2 sm:flex-row'>\n\t\t<span class=\"mr-auto flex w-full flex-1 flex-grow\">\n\t\t\t{{ folder.folder.path }}\n\t\t</span>\n\n\t\t<div class=\"ml-auto flex w-full gap-2 sm:w-auto\">\n\t\t\t<MultiSelect id=\"encoderProfiles\" placeholder=\"Select encoder profiles\"\n\t\t\t\tclass=\"w-full min-w-[200px] sm:w-auto\" :options=\"availableQualities\" optionLabel=\"name\"\n\t\t\t\tv-model=\"encoderQualities\" />\n\n\t\t\t<Button type=\"button\" id=\"yes\" variant=\"text\"\n\t\t\t\tclass=\"children:text-gray-400 children:transition-colors children:duration-100 children:hover:text-red-dark-8\"\n\t\t\t\tcolor=\"red\" startIcon=\"folderRemove\" @click=\"openDeleteConfirm\">\n\t\t\t</Button>\n\n\t\t\t<DeleteFolderModal :id=\"folder.folder.id\" :name=\"folder.folder.path\" :close=\"closeDeleteConfirm\"\n\t\t\t\t:open=\"deleteConfirmOpen\" />\n\n\t\t</div>\n\t</div>\n\n</template>\n","<script setup lang=\"ts\">\n\nimport { computed, type PropType } from 'vue';\n\nconst props = defineProps({\n\tid: {\n\t\ttype: String,\n\t\trequired: false,\n\t},\n\tmodelValue: {\n\t\ttype: Boolean as PropType<false | null | true>,\n\t\trequired: false,\n\t\tdefault: null,\n\t},\n\tlabel: {\n    type: String,\n\t\trequired: false,\n\t},\n\twidth: {\n\t\ttype: String,\n\t\trequired: false,\n\t\tdefault: '18',\n\t},\n\theight: {\n\t\ttype: String,\n\t\trequired: false,\n\t\tdefault: '18',\n\t},\n\tcolor: {\n\t\ttype: String,\n\t\trequired: false,\n\t\tdefault: 'hsl(from rgb(var(--color-focus)) h s 20%)',\n\t},\n\tonclick: {\n\t\ttype: Function as PropType<() => void>,\n\t\trequired: false,\n\t}\n});\n\nconst emit = defineEmits(['update:modelValue']);\n\nconst cycle = () => {\n\tif (props.onclick) {\n\t\tprops.onclick?.();\n\t\treturn;\n\t}\n\tlet newValue;\n\tif (props.modelValue === null) {\n\t\tnewValue = true;\n\t} else if (props.modelValue === true) {\n\t\tnewValue = false;\n\t} else {\n\t\tnewValue = null;\n\t}\n\temit('update:modelValue', newValue);\n};\n\nconst handleClick = () => {\n\tif (props.onclick) {\n\t\tprops.onclick?.();\n\t\treturn;\n\t}\n\tlet newValue;\n\tif (props.modelValue === null || props.modelValue === false) {\n\t\tnewValue = true;\n\t} else if (props.modelValue === true) {\n\t\tnewValue = false;\n\t}\n\temit('update:modelValue', newValue);\n};\n\nconst defs = computed(() => {\n\treturn `\n      <defs>\n        <linearGradient id=\"paint0_linear_4922_9259\" x1=\"9\" y1=\"0\" x2=\"9\" y2=\"18\" gradientUnits=\"userSpaceOnUse\" >\n          <stop stop-color=\"white\" stop-opacity=\"0.4\" offset=\"0\"></stop>\n          <stop offset=\"1\" stop-color=\"white\" stop-opacity=\"0\"></stop>\n        </linearGradient>\n      </defs>\n\t`;\n});\n\nconst svgPaths = computed(() => {\n\tif (props.modelValue === null) {\n\t\treturn `\n      <rect x=\"0.25\" y=\"0.25\" width=\"17.5\" height=\"17.5\" rx=\"3.75\" fill=\"${props.color}\" fill-opacity=\"0.29\" ></rect>\n      <rect x=\"0.25\" y=\"0.25\" width=\"17.5\" height=\"17.5\" rx=\"3.75\" stroke=\"#6F52FF\" stroke-opacity=\"0.73\" stroke-width=\"0.5\" ></rect>\n      <rect x=\"0.25\" y=\"0.25\" width=\"17.5\" height=\"17.5\" rx=\"3.75\" stroke=\"url(#paint0_linear_4922_9259)\" stroke-width=\"0.5\" ></rect>\n      <path d=\"M4.91675 9H13.0834\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" ></path>\n      ${defs.value}\n    `;\n\t}\n\telse if (props.modelValue) {\n\t\treturn `\n      <rect x=\"0.5\" y=\"0.5\" width=\"17\" height=\"17\" rx=\"3.5\" fill=\"${props.color}\"></rect>\n      <rect x=\"0.5\" y=\"0.5\" width=\"17\" height=\"17\" rx=\"3.5\" stroke=\"#E2F0FD\" stroke-opacity=\"0.08\" ></rect>\n      <rect x=\"0.5\" y=\"0.5\" width=\"17\" height=\"17\" rx=\"3.5\" stroke=\"url(#paint0_linear_4922_9259)\" ></rect>\n      <path d=\"M13.6666 5.5L7.24992 11.9167L4.33325 9\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" ></path>\n      ${defs.value}\n    `;\n\t}\n\telse {\n\t\treturn `\n      <rect x=\"0.5\" y=\"0.5\" width=\"17\" height=\"17\" rx=\"3.5\" class=\"fill-auto-1\" fill-opacity=\"1\"/>\n      <rect x=\"0.5\" y=\"0.5\" width=\"17\" height=\"17\" rx=\"3.5\" fill=\"#DFEFFE\" fill-opacity=\"0.14\"/>\n      <rect x=\"0.5\" y=\"0.5\" width=\"17\" height=\"17\" rx=\"3.5\" stroke=\"#E5F2FE\" stroke-opacity=\"0.26\"/>\n      <rect x=\"0.5\" y=\"0.5\" width=\"17\" height=\"17\" rx=\"3.5\" stroke=\"url(#paint0_linear_4922_9259)\"/>\n      ${defs.value}\n    `;\n\t}\n});\n\n</script>\n\n<template>\n\t<div class=\"relative flex select-none items-center justify-start gap-2 self-stretch border border-transparent bg-transparent\"\n\t\t@click=\"handleClick\">\n\t\t<input :id=\"id\" type=\"checkbox\" class=\"hidden item-selector\" :checked=\"!!modelValue\" />\n\t\t<svg :id=\"id\" :width=\"width\" :height=\"height\" fill=\"none\" viewBox=\"0 0 18 18\" xmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclass=\"relative w-[18px] h-[18px]\" preserveAspectRatio=\"xMidYMid meet\">\n\t\t\t<g v-html=\"svgPaths\"></g>\n\t\t</svg>\n\t\t<div class=\"relative flex flex-grow items-center justify-center gap-2 px-2\" v-if=\"label\">\n\t\t\t<p class=\"w-full flex-grow text-sm font-medium\">\n\t\t\t\t{{ $t(label) }}\n\t\t\t</p>\n\t\t</div>\n\t\t<slot />\n\t</div>\n</template>\n","<script setup lang=\"ts\">\nimport { nextTick, PropType, ref, watch } from 'vue';\n\nimport type { Episode, FileItem } from '@/types/api/dashboard/newContent';\n\nimport { humanFileSize, pad } from '@/lib/stringArray';\nimport { tmdbImageBaseUrl } from '@/config/config';\n\nimport Checkbox from '@/components/Forms/Checkbox.vue';\nimport MoooomIcon from '@/components/Images/icons/MoooomIcon.vue';\n\nconst props = defineProps({\n  manage: {\n    type: Boolean,\n    required: false,\n  },\n  data: {\n    type: Object as PropType<FileItem>,\n    required: true,\n  },\n  pushFile: {\n    type: Function,\n    required: true,\n  },\n  popFile: {\n    type: Function,\n    required: true,\n  },\n  files: {\n    type: Array as PropType<{ id: number, path: string }[]>,\n    required: true,\n  },\n});\n\nconst checked = ref(false);\nconst block = ref(false);\n\nwatch(checked, (value) => {\n  if (block.value) return;\n  if (value) {\n    props.pushFile(props.data);\n  } else {\n    props.popFile(props.data);\n  }\n});\n\nwatch(props, (value) => {\n  block.value = true;\n  checked.value = value.files.some(file => file.id == props.data?.match?.id);\n  nextTick(() => {\n    block.value = false;\n  });\n});\n\n</script>\n\n<template>\n  <div class=\"flex items-center justify-start gap-4 self-stretch text-left\">\n    <div\n      class=\"flex flex-grow flex-col items-start justify-start gap-2 rounded-xl p-2 bg-slate-lightA-3 dark:bg-slate-darkA-3\">\n      <div class=\"relative flex items-start justify-start gap-2 self-stretch\">\n        <div class=\"relative aspect-video h-auto w-60 min-w-60 select-none overflow-clip\">\n          <Checkbox id=\"checked\" class=\"absolute top-2 left-2 z-10\" name=\"\" v-model:modelValue=\"checked\">\n\n          </Checkbox>\n          <img alt=\"\" v-if=\"!!(data.match as Episode)?.still && (data.match as Episode)?.still.startsWith('http')\" :src=\"(data.match as Episode)?.still\"\n            class=\"absolute inset-0 z-0 h-auto max-h-full w-full rounded-md object-scale-down p-0.5\" />\n          <img alt=\"\" v-else-if=\"!!(data.match as Episode)?.still\" :src=\"`${tmdbImageBaseUrl}/w500${(data.match as Episode)?.still}`\"\n            class=\"absolute inset-0 z-0 h-auto max-h-full w-full rounded-md object-scale-down p-0.5\" />\n        </div>\n        <div class=\"flex flex-grow flex-col items-start justify-start gap-1 tet-left\">\n          <span class=\"self-stretch text-base font-semibold line-clamp-1 monospace w-[697px]\">\n              {{ data?.parsed?.title }}\n              <template v-if=\"(data.match as Episode)?.episode_number\">\n                S{{ pad((data.match as Episode)?.season_number) }}E{{\n                  pad((data.match as Episode)?.episode_number)\n                }} - {{ data?.match?.title }}\n              </template>\n              <template v-else-if=\"data?.parsed?.year\">\n                ({{ data?.parsed?.year }})\n              </template>\n            </span>\n\n          <div v-if=\"data.path\"\n            class=\"relative flex items-center justify-start self-stretch gap-0.5 text-slate-light-11 dark:text-slate-dark-11\">\n            <MoooomIcon icon=\"folder\" className=\"w-3.5\" />\n            <p class=\"w-full flex-grow text-xs leading-none\">\n                {{ data.path }}\n            </p>\n          </div>\n          <div v-if=\"data?.match?.id\"\n            class=\"relative flex items-center justify-start self-stretch gap-0.5 text-slate-light-11 dark:text-slate-dark-11\">\n            <MoooomIcon icon=\"infoCircle\" className=\"w-3.5\" />\n            <p class=\"w-full flex-grow text-xs leading-none\">\n                {{ data?.match?.id }}\n            </p>\n          </div>\n          <div v-if=\"data.size\"\n            class=\"relative flex items-center justify-start self-stretch gap-0.5 text-slate-light-11 dark:text-slate-dark-11\">\n            <MoooomIcon icon=\"server\" className=\"w-3.5\" />\n            <p class=\"w-full flex-grow text-xs leading-none\">\n              {{ humanFileSize(data.size) }}\n            </p>\n          </div>\n          <div v-if=\"data.tracks\"\n               class=\"relative flex items-center justify-start self-stretch gap-0.5 text-slate-light-11 dark:text-slate-dark-11\">\n            <MoooomIcon icon=\"audioFile\" className=\"w-3.5\" />\n            <p class=\"w-full flex-grow text-xs leading-none\">\n              {{ data.tracks }}\n            </p>\n          </div>\n          <div v-if=\"data.streams.video?.length > 0\"\n               class=\"relative flex items-center justify-start self-stretch gap-0.5 text-slate-light-11 dark:text-slate-dark-11\">\n            <MoooomIcon icon=\"film\" className=\"w-3.5\" />\n            <p class=\"w-full flex-grow text-xs leading-none\">\n              <template v-for=\"(video, index) in data.streams.video\">\n                {{ video.width }}x{{ video.height }}{{ index < (data.streams.video.length - 1) ? ', ' : '' }}\n              </template>\n            </p>\n          </div>\n          <div v-if=\"data.streams.audio?.length > 0\"\n            class=\"relative flex items-center justify-start self-stretch gap-0.5 text-slate-light-11 dark:text-slate-dark-11\">\n            <MoooomIcon icon=\"audioFile\" className=\"w-3.5\" />\n            <p class=\"w-full flex-grow text-xs leading-none\">\n              <template v-for=\"(audio, index) in data.streams.audio\">\n                {{ audio.language }}{{ index < (data.streams.audio.length - 1) ? ', ' : '' }} </template>\n            </p>\n          </div>\n          <div v-if=\"data.streams.subtitle?.length > 0\"\n            class=\"relative flex items-center justify-start self-stretch gap-0.5 text-slate-light-11 dark:text-slate-dark-11\">\n            <MoooomIcon icon=\"chatBubble\" className=\"w-3.5\" />\n            <p class=\"w-full flex-grow text-xs leading-none\">\n              <template v-for=\"(subtitle, index) in data.streams.subtitle\">\n                {{ subtitle.language }}{{ index < (data.streams.subtitle.length - 1) ? ', ' : '' }} </template>\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n","<script setup lang=\"ts\">\nimport { computed, onMounted, PropType, ref, watch } from 'vue';\nimport { useTranslation } from 'i18next-vue';\nimport { useRoute } from 'vue-router';\n\nimport type { FileItem, FileList } from '@/types/api/dashboard/newContent';\nimport type { LibrariesResponse } from '@/types/api/base/library';\n\nimport serverClient from '@/lib/clients/serverClient';\nimport useServerClient from '@/lib/clients/useServerClient';\nimport { checkboxValue } from '@/lib/stringArray';\nimport { currentServer } from '@/store/currentServer';\n\nimport Button from '@/components/Button.vue';\nimport Modal from '@/components/Modal.vue';\nimport NoResultImage from '@/components/Images/NoResultImage.vue';\nimport FolderBrowser from '@/components/FolderBrowser.vue';\n\nimport FolderItem from './FolderItem.vue';\nimport ScrollContainer from '@/Layout/Desktop/components/ScrollContainer.vue';\nimport Checkbox from '@/components/Forms/Checkbox.vue';\n\ninterface DestinationFolder {\n  id: string;\n  name: string,\n}\n\nconst route = useRoute();\nconst { t } = useTranslation();\n\nconst props = defineProps({\n  closeAddContentModal: {\n    type: Function as PropType<(e: Event) => any>,\n    required: true,\n  },\n  addContentModalOpen: {\n    type: Boolean,\n    required: true,\n  },\n  librarySettings: {\n    type: Object as PropType<LibrariesResponse>,\n    required: true,\n  },\n});\n\nconst fileList = ref<FileItem[]>([]);\nconst files = ref<{ id: number; path: string }[]>([]);\n\nconst folder = ref('/');\nconst showModal = ref<boolean>(false);\n\nconst currentLibrary = ref<LibrariesResponse>();\nconst destinationFolder = ref<DestinationFolder>();\nconst loading = ref(false);\n\nconst { data: libraries } = useServerClient<LibrariesResponse[]>({\n  path: 'dashboard/libraries',\n  queryKey: ['dashboard', 'libraries', currentServer.value?.serverBaseUrl],\n});\n\nonMounted(() => {\n  if (!libraries.value) return;\n  currentLibrary.value = libraries.value?.find(l => l.id == route.params.id);\n  destinationFolder.value = {\n    id: currentLibrary.value?.folder_library?.at(-1)?.folder_id ?? '',\n    name: currentLibrary.value?.folder_library.at(-1)?.folder.path ?? '',\n  };\n});\n\nwatch(libraries, (value) => {\n  if (!value) return;\n  currentLibrary.value = value?.find(l => l.id == route.params.id);\n  destinationFolder.value = {\n    id: currentLibrary.value?.folder_library?.at(-1)?.folder_id ?? '',\n    name: currentLibrary.value?.folder_library.at(-1)?.folder.path ?? '',\n  };\n});\n\nconst pushFile = (file: FileItem) => {\n  if (files.value?.some(f => f.path === file.path && f.id === file.match?.id)) {\n    // files.value = files.value.filter(f => f.path !== file.file);\n  } else {\n    files.value = [...files.value, { id: file.match?.id ?? 0, path: file.path }];\n  }\n};\n\nconst popFile = (file: FileItem) => {\n  files.value = files.value.filter(f => f.path !== file.file && f.id !== file.match?.id);\n};\n\nconst getFileList = () => {\n  loading.value = true;\n  fileList.value = [];\n\n  serverClient()\n    .post<{ data: FileList }>('dashboard/server/filelist', {\n      folder: folder.value,\n      type: props.librarySettings.type,\n    })\n    .then(({ data }) => {\n      fileList.value = data.data?.files ?? [];\n      files.value = [];\n    })\n    .catch((response) => {\n      // enqueueSnackbar(`${t(response.data.error)}`, {\n      // \tvariant: 'error',\n      // \tautoHideDuration: 3000,\n      // });\n      files.value = [];\n    })\n    .finally(() => {\n      loading.value = false;\n    });\n\n  showModal.value = false;\n};\n\nconst submit = () => {\n  loading.value = true;\n  serverClient()\n    .post('dashboard/server/addfiles', {\n      files: files.value,\n      library_id: props.librarySettings?.id,\n      folder_id: destinationFolder.value?.id,\n    })\n    .then(() => {\n      // enqueueSnackbar(`${t('New content added')}`, {\n      // \tvariant: 'success',\n      // \tautoHideDuration: 3000,\n      // });\n      files.value = [];\n    })\n    .catch((response) => {\n      // enqueueSnackbar(`${t(response.data.error)}`, {\n      // \tvariant: 'error',\n      // \tautoHideDuration: 3000,\n      // });\n      files.value = [];\n    })\n    .finally(() => {\n      loading.value = false;\n    });\n};\n\nconst openModal = () => {\n  showModal.value = true;\n};\nconst closeModal = () => {\n  showModal.value = false;\n};\n\nconst setFolder = (value: string) => {\n  folder.value = value;\n};\n\nconst checkboxState = computed(() => {\n  return checkboxValue(files.value, fileList.value);\n});\n\nconst handleSelectAll = () => {\n  if (checkboxState.value) {\n    files.value = [];\n  } else {\n    files.value = fileList.value.map(f => ({ id: f.match?.id ?? 0, path: f.file }));\n  }\n};\n\nconst continueAvailable = computed(() => {\n  return files.value?.length == 0 || destinationFolder.value?.id == null;\n});\n\n</script>\n\n<template>\n  <Modal :close=\"closeAddContentModal\" :open=\"addContentModalOpen\" maxWidth=\"max-w-5xl\" title=\"Add new content\">\n\n    <div class=\"flex w-full flex-col overflow-clip h-[65vh]\">\n      <div class=\"mt-4 flex h-auto w-full flex-col items-start gap-4 sm:flex-row\">\n        <div class=\"flex w-full flex-auto sm:w-64 gap-2\">\n          <div class=\"flex flex-col gap-2 flex-1 \">\n            <label for=\"source_folder\">Source folder</label>\n            <InputText id='source_folder' class='w-full' variant=\"filled\" :onclick=\"openModal\" v-model=\"folder\">\n            </InputText>\n          </div>\n\n          <div class=\"flex flex-col gap-2 ml-4 w-1/3\">\n            <label for=\"destination_folder\">Destination folder</label>\n            <Select id=\"destination_folder\" placeholder=\"Select a destination folder\" vairant=\"filled\"\n              v-if=\"destinationFolder\" :options=\"(currentLibrary?.folder_library?.map((fl) => ({\n                id: fl.folder_id,\n                name: fl.folder.path,\n              })) as DestinationFolder[]) ?? []\" optionLabel=\"name\" v-model=\"destinationFolder\" />\n          </div>\n        </div>\n      </div>\n\n      <div class=\"mt-8 flex h-0 w-full flex-1 flex-col gap-2 overflow-clip\">\n        <div class=\"relative flex h-full w-full flex-col overflow-clip\">\n          <ScrollContainer :static=\"false\" :autoHide=\"false\" className=\"ml-2\">\n            <div class=\"flex flex-col gap-2 pb-2\" v-if=\"fileList.length > 0\">\n              <FolderItem v-for=\"file in fileList ?? []\" :key=\"file.file\" :data=\"file\" :files=\"files\"\n                :pushFile=\"pushFile\" :popFile=\"popFile\" />\n            </div>\n            <div v-else-if=\"!loading\" class=\"absolute inset-0 flex h-auto w-full items-center justify-center\">\n              <div class=\"flex flex-col items-center gap-2\">\n                <NoResultImage />\n                <span>\n                  {{ $t('No results') }}\n                </span>\n              </div>\n            </div>\n\n            <div v-if=\"loading\" class=\"absolute inset-0 flex h-full w-full items-center justify-center\">\n              <div class=\"text-center\">\n                <div role=\"status\">\n                  <svg aria-hidden=\"true\" class=\"inline h-10 w-10 animate-spin text-auto-11 fill-focus dark:text-auto-1\"\n                    viewBox=\"0 0 100 101\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path\n                      d=\"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z\"\n                      fill=\"currentColor\" />\n                    <path\n                      d=\"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z\"\n                      fill=\"currentFill\" />\n                  </svg>\n                  <span class=\"sr-only\">Loading...</span>\n                </div>\n              </div>\n            </div>\n          </ScrollContainer>\n        </div>\n      </div>\n    </div>\n\n    <template v-slot:actions>\n\n      <Button id=\"Add\" color=\"theme\" variant=\"default\" class=\"\" :onClick=\"submit\" :disabled=\"continueAvailable\">\n        {{ t('Add selection') }}\n      </Button>\n\n      <Checkbox id=\"checked\" class=\"mr-auto ml-4\" name=\"Select all\" :modelValue=\"checkboxState\"\n        @click=\"handleSelectAll\">\n        <span class=\"whitespace-pre-wrap text-sm font-semibold\">\n          {{ $t('Select all') }}\n        </span>\n      </Checkbox>\n\n    </template>\n\n    <Modal :open=\"showModal\" :close=\"closeModal\" maxWidth=\"max-w-5xl\" title=\"Add folder\">\n      <div class=\"mx-auto flex w-full flex-col h-[45vh]\">\n        <FolderBrowser :selected=\"folder\" :setSelected=\"setFolder\" />\n      </div>\n      <template v-slot:actions>\n        <Button type=\"button\" id=\"no\" variant=\"default\" color=\"theme\" :onClick=\"getFileList\">\n          {{ t('Select') }}\n        </button>\n      </template>\n    </Modal>\n  </Modal>\n</template>\n","<script setup lang=\"ts\">\nimport { onBeforeMount, onMounted, ref, toRaw, watch } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { useTranslation } from 'i18next-vue';\n\nimport { useQueryClient } from '@tanstack/vue-query';\n\nimport type { EncoderProfile, FolderLibrary, LibrariesResponse } from '@/types/api/base/library';\nimport type { Language } from '@/types/api/shared';\nimport type { Library, NameVal } from '@/types/api/dashboard/server';\n\nimport useServerClient from '@/lib/clients/useServerClient';\nimport serverClient from '@/lib/clients/serverClient';\nimport { currentServer } from '@/store/currentServer';\nimport { media_types } from '@/config/global';\n\nimport DashboardLayout from '@/Layout/Desktop/DashboardLayout.vue';\nimport LanguageSelect from '@/components/Forms/LanguageSelect.vue';\nimport NewFolderModal from './components/NewFolderModal.vue';\nimport DeleteLibraryModal from './components/DeleteLibraryModal.vue';\nimport Folder from './components/Folder.vue';\nimport AddContentModal from '@/views/Dashboard/System/Libraries/components/AddContentModal.vue';\nimport { IonContent, IonPage } from '@ionic/vue';\n\nconst route = useRoute();\nconst query = useQueryClient();\nconst { t } = useTranslation();\n\nconst { data: libraries, error, refetch } = useServerClient<LibrariesResponse[]>({\n  path: 'dashboard/libraries',\n  queryKey: ['dashboard', 'libraries', currentServer.value?.serverBaseUrl],\n});\n\nconst { data: languages } = useServerClient<Language[]>({\n  path: '/dashboard/configuration/languages',\n});\n\nconst settings = ref<LibrariesResponse>();\n\nonBeforeMount(() => {\n  refetch();\n});\n\nconst title = ref<Library['title']>('');\nconst media_type = ref<NameVal | undefined>();\nconst specialName = ref<Library['specialSeasonName']>('');\nconst subtitleLanguages = ref<Language[]>([]);\nconst autoRefreshInterval = ref<Library['autoRefreshInterval']>(0);\nconst image = ref<Library['image']>('');\nconst perfectSubtitleMatch = ref<Library['perfectSubtitleMatch']>(false);\nconst realtime = ref<Library['realtime']>(false);\nconst folders = ref<FolderLibrary[]>([]);\nconst folder = ref<string>('/');\n\nonMounted(() => {\n  if (!libraries.value) return;\n  settings.value = libraries.value.find(l => l.id == route.params.id)!;\n});\n\nwatch(libraries, (value) => {\n  if (!value) return;\n  settings.value = value.find(l => l.id == route.params.id)!;\n});\n\nwatch(libraries, (value) => {\n  if (!value) return;\n  subtitleLanguages.value = languages.value?.filter(l => settings.value?.subtitles?.includes(l.iso_639_1)) ?? [];\n});\n\nwatch(settings, (value) => {\n  if (!value) return;\n\n  title.value = value.title;\n  media_type.value = media_types.find(m => m.value == value.type);\n  specialName.value = value.specialSeasonName;\n  autoRefreshInterval.value = value.autoRefreshInterval ?? 0;\n  image.value = value.image ?? '';\n  perfectSubtitleMatch.value = value.perfectSubtitleMatch ?? false;\n  realtime.value = value.realtime ?? false;\n  folders.value = value.folder_library ?? [];\n});\n\nconst newModalOpen = ref(false);\nconst openNewFolderModal = () => {\n  newModalOpen.value = true;\n};\nconst closeNewModal = () => {\n  newModalOpen.value = false;\n};\n\nconst addModalOpen = ref(false);\nconst openAddContentModal = () => {\n  addModalOpen.value = true;\n};\nconst closeAddModal = () => {\n  addModalOpen.value = false;\n};\n\nconst setFolder = (value: string) => {\n  folder.value = value;\n};\n\nconst deleteConfirmOpen = ref(false);\nconst openDeleteConfirm = () => {\n  deleteConfirmOpen.value = true;\n};\nconst closeDeleteConfirm = () => {\n  deleteConfirmOpen.value = false;\n};\n\nconst loadingRefresh = ref(false);\nconst handleRefresh = () => {\n\n  loadingRefresh.value = true;\n\n  serverClient()\n    .post<{\n      message: string,\n      status: string,\n      args: string[];\n    }>(`dashboard/libraries/${route.params.id}/refresh`)\n    .then(({ data }) => {\n      console.log(data.status == 'ok');\n      loadingRefresh.value = false;\n      // showNotification({\n      //     title: translate(data.message, ...data.args),\n      //     type: data.status == 'ok'\n      //         ? TYPE.SUCCESS\n      //         : TYPE.ERROR,\n      //     visibleOnly: true,\n      //     duration: 2000,\n      // });\n    })\n    .catch(() => {\n      console.log('error');\n      loadingRefresh.value = false;\n      // showNotification({\n      //     title: translate('An error occurred while rescanning the library folders'),\n      //     type: TYPE.ERROR,\n      //     visibleOnly: true,\n      //     duration: 2000,\n      // });\n    });\n};\n\n\nconst loadingRescan = ref(false);\nconst handleRescan = () => {\n\n  loadingRescan.value = true;\n\n  serverClient()\n    .post<{\n      message: string,\n      status: string,\n      args: string[];\n    }>(`dashboard/libraries/${route.params.id}/rescan`)\n    .then(({ data }) => {\n      console.log(data.status == 'ok');\n      loadingRescan.value = false;\n      // showNotification({\n      //     title: translate(data.message, ...data.args),\n      //     type: data.status == 'ok'\n      //         ? TYPE.SUCCESS\n      //         : TYPE.ERROR,\n      //     visibleOnly: true,\n      //     duration: 2000,\n      // });\n    })\n    .catch(() => {\n      console.log('error');\n      loadingRescan.value = false;\n      // showNotification({\n      //     title: translate('An error occurred while rescanning the library folders'),\n      //     type: TYPE.ERROR,\n      //     visibleOnly: true,\n      //     duration: 2000,\n      // });\n    });\n};\n\nconst handleCancel = () => {\n  window.history.back();\n};\n\nconst handleSave = () => {\n  serverClient()\n    .patch<{\n      message: string,\n      status: string,\n      args: string[];\n    }>(`dashboard/libraries/${route.params.id}`, {\n      id: route.params.id,\n      title: title.value,\n      type: media_type.value?.value,\n      specialSeasonName: specialName.value,\n      subtitles: subtitleLanguages.value.map(l => l.iso_639_1),\n      autoRefreshInterval: autoRefreshInterval.value,\n      image: image.value,\n      perfectSubtitleMatch: perfectSubtitleMatch.value,\n      realtime: realtime.value,\n      folder_library: folders.value,\n    })\n    .then(({ data }) => {\n      query.invalidateQueries({ queryKey: ['dashboard', 'libraries'] });\n\n      // showNotification({\n      //     title: translate(data.message, ...data.args),\n      //     type: data.status == 'ok'\n      //         ? TYPE.SUCCESS\n      //         : TYPE.ERROR,\n      //     visibleOnly: true,\n      //     duration: 2000,\n      // });\n\n      handleCancel();\n    });\n};\n\nconst setEncoderQualities = (folder: FolderLibrary, profiles: EncoderProfile[]) => {\n  if (!settings.value) return;\n\n  settings.value = {\n    ...settings.value,\n    folder_library: toRaw(settings.value)?.folder_library.map((f) => {\n      if (f.folder_id == folder.folder_id) {\n        f.folder.encoder_profiles = profiles.map(p => toRaw(p));\n      }\n      return f;\n    }),\n  };\n};\n\nconst handleDeleteFolder = (folder: FolderLibrary) => {\n  if (!settings.value) return;\n\n  settings.value = {\n    ...settings.value,\n    folder_library: toRaw(settings.value)?.folder_library.filter(f => f.folder_id != folder.folder_id),\n  };\n};\n\n</script>\n\n<template>\n  <ion-page>\n    <ion-content :fullscreen=\"true\">\n      <DashboardLayout :error=\"error\" :title=\"`Library: {{title}}`\" :params=\"{ title: settings?.title }\" :back=\"true\"\n        v-model=\"addModalOpen\">\n        <template v-slot:cta>\n        </template>\n\n        <div class=\"flex w-full flex-col p-4 sm:w-full\">\n          <div class=\"flex w-full text-md\">\n            {{ t('Changes to metadata or artwork downloading settings will only apply to new content added to your newLibrary.') }}\n            <br>\n            {{ t('To apply the changes to existing titles, you\\'ll need to refresh their metadata manually.') }}\n          </div>\n          <div class=\"mt-4 flex w-full flex-col gap-8 pr-2 min-h-[50vh] sm:flex-row\">\n            <div class=\"flex w-full flex-col sm:w-1/3\">\n              <div class=\"mt-4 flex h-11 w-full\">\n                <h3 class=\"text-xl\">\n                  {{ t('Library settings') }}:\n                </h3>\n              </div>\n              <div class=\"flex flex-col gap-2\">\n\n                <div class=\"flex flex-col gap-2\">\n                  <label for=\"special_name\">Library name</label>\n                  <InputText type=\"text\" tabindex=\"-1\" id=\"special_name\" v-model=\"title\"\n                    @change=\"title = $event.target.value\" />\n                </div>\n\n                <div class=\"flex flex-col gap-2\">\n                  <label for=\"media_types\">Media Type</label>\n                  <Select id=\"media_types\" placeholder=\"Select a media type\" v-if=\"media_types\" optionLabel=\"title\"\n                    :options=\"media_types ?? []\" v-model=\"media_type\" />\n                </div>\n\n                <template v-if=\"media_type && !['music', 'image', 'audiobook'].includes(media_type.value)\">\n\n                  <div class=\"flex flex-col gap-2\">\n                    <label for=\"special_name\">Special season display name</label>\n                    <InputText tabindex=\"-1\" id=\"special_name\" v-model=\"specialName\"\n                      @change=\"specialName = $event.target.value\" />\n                  </div>\n\n                  <LanguageSelect v-if=\"languages\" id=\"subtitleLanguages\" name=\"Subtitle download languages\"\n                    class=\"mb-4\" multiple :items=\"languages\" v-model=\"subtitleLanguages\" :setSelected=\"(value: typeof subtitleLanguages) => {\n                      if (Array.isArray(value)) {\n                        subtitleLanguages = value;\n                        return;\n                      }\n                    }\" />\n                </template>\n              </div>\n            </div>\n            <div class=\"flex w-full flex-col sm:w-2/3\">\n              <div class=\"mt-4 flex h-16 w-full gap-2\">\n                <h3 class=\"text-xl\">\n                  {{ t('Folders') }}:\n                </h3>\n\n                <Button type=\"button\" id=\"yes\" variant=\"text\" color=\"white\" class=\"ml-auto\" startIcon=\"folderAdd\"\n                  :onClick=\"openNewFolderModal\">\n                  {{ t('Add new folder') }}\n                </Button>\n              </div>\n              <div class=\"flex w-full flex-col gap-1\">\n                <template v-if=\"settings?.folder_library\">\n                  <template v-for=\"folderLibrary in settings?.folder_library\" :key=\"folderLibrary.folder_id\">\n                    <Folder :folder=\"folderLibrary\" :type=\"settings.type\" :setEncoderQualities=\"setEncoderQualities\"\n                      :handleDeleteFolder=\"handleDeleteFolder\" />\n                  </template>\n                </template>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <template v-slot:actions>\n          <Button type=\"button\" id=\"refresh\" variant=\"text\" startIcon=\"folderSwap\" :disabled=\"loadingRefresh\"\n            color=\"auto\" :class=\"loadingRefresh ? 'first:children:animate-spin !cursor-not-allowed' : ''\"\n            @click=\"handleRefresh\">\n            {{ t('Refresh') }}\n          </button>\n          <Button type=\"button\" id=\"rescan\" variant=\"text\" startIcon=\"folderSwap\" :disabled=\"loadingRescan\" color=\"auto\"\n            :class=\"loadingRescan ? 'first:children:animate-spin !cursor-not-allowed' : ''\" @click=\"handleRescan\">\n            {{ t('Rescan') }}\n          </button>\n          <Button type=\"button\" id=\"remove\" variant=\"text\"\n            class=\"children:text-gray-400 children:transition-colors children:duration-100 children:hover:text-red-dark-8\"\n            startIcon=\"folderRemove\" color=\"red\" @click=\"openDeleteConfirm\">\n            {{ t('Remove') }}\n          </button>\n          <Button type=\"button\" id=\"add\" variant=\"text\" class=\"mr-auto\" color=\"auto\" startIcon=\"folderAdd\"\n            @click=\"openAddContentModal\">\n            {{ t('Add content') }}\n          </button>\n          <Button type=\"button\" id=\"cancel\" variant=\"text\" color=\"white\" @click=\"handleCancel\">\n            {{ t('Cancel') }}\n          </Button>\n          <Button type=\"button\" id=\"save\" variant=\"default\" color=\"theme\" @click=\"handleSave\">\n            {{ t('Save') }}\n          </button>\n        </template>\n\n        <NewFolderModal :close=\"closeNewModal\" :folder=\"folder\" :open=\"newModalOpen\" :setFolder=\"setFolder\" />\n\n        <DeleteLibraryModal v-if=\"settings?.id\" :id=\"settings?.id\" :name=\"settings?.title\" :close=\"closeDeleteConfirm\"\n          :open=\"deleteConfirmOpen\" />\n\n        <AddContentModal v-if=\"settings\" :closeAddContentModal=\"closeAddModal\" :addContentModalOpen=\"addModalOpen\"\n          :librarySettings=\"settings\" />\n      </DashboardLayout>\n    </ion-content>\n  </ion-page>\n</template>\n"],"names":["t","useTranslation","props","__props","watch","value","path","ref","lock","directorySeparator","newValue","showFolders","loading","getFolders","folder","serverClient","data","f","_c","_b","_a","handleGoUp","handleClick","onMounted","route","useRoute","query","useQueryClient","handleCreateFolder","handleDelete","encoderProfiles","useServerClient","availableQualities","computed","encoderQualities","toRaw","_d","quality","profile","newVal","deleteConfirmOpen","openDeleteConfirm","closeDeleteConfirm","emit","__emit","defs","svgPaths","checked","block","file","nextTick","fileList","files","showModal","currentLibrary","destinationFolder","libraries","currentServer","l","_f","_e","pushFile","popFile","getFileList","response","submit","openModal","closeModal","setFolder","checkboxState","checkboxValue","handleSelectAll","continueAvailable","error","refetch","languages","settings","onBeforeMount","title","media_type","specialName","subtitleLanguages","autoRefreshInterval","image","perfectSubtitleMatch","realtime","folders","media_types","m","newModalOpen","openNewFolderModal","closeNewModal","addModalOpen","openAddContentModal","closeAddModal","loadingRefresh","handleRefresh","loadingRescan","handleRescan","handleCancel","handleSave","setEncoderQualities","profiles","p","handleDeleteFolder"],"mappings":"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"}