import{Bn as te,Bt as d,Gt as m,I as D,Ln as t,Lt as x,M as I,Mt as Z,Rn as w,Rt as a,Tt as P,Vn as b,Vt as y,Wt as J,an as ae,cn as r,fn as X,kn as q,mt as C,qt as j,un as re,xn as S,yn as z,zt as o}from"./index-CJ3av9Nr.js";import{L as se,S as ie,V as le,l as N,m as T,n as ne,p as A,u as oe,x as de}from"./ui-BSE92Oro.js";import{g as B}from"./client-CPKuC57Q.js";import{D as $,E as R,o as V}from"./currentServer-DQ7i6d_b.js";import{f as W}from"./global-Cds4NWlw.js";import{s as ue}from"./user-Creb9Pvq.js";import{x as ce}from"./router-c8xd29EB.js";import{N as me,Z as fe,c as pe,g as H,k as F,l as h}from"./SocketClient-KaSDTymP.js";import{a as he}from"./contextMenuItems-Ci0VKSAK.js";import{t as ge}from"./_plugin-vue_export-helper-pDp7unP0.js";import{t as L}from"./MoooomIcon-C2SwTMe7.js";import{t as ve}from"./DropdownMenu-Dk9B9-Ms.js";import{n as ye}from"./dist-DpPFups2.js";import{t as M}from"./CoverImage-3Yd8OnC5.js";import{t as ke}from"./MusicButton-CsRZT_rH.js";import{t as xe}from"./BannerButton-ovjfP-l1.js";import{t as Y}from"./MediaLikeButton-DlxHvzv6.js";import{t as O}from"./PlayerIcon-fqXue5Ol.js";import{t as G}from"./Marquee-BRg3kZGQ.js";import{n as be,t as U}from"./BigPlayButton-DUjBHOtM.js";import{n as K,t as we}from"./EqSpinner-BVEJIgKv.js";import{t as Q}from"./ShareButton-CNes20wT.js";import{t as _e}from"./ClickUploadModal-DlOYtlN3.js";P();I();var Se={class:"flex sm:gap-4 items-center py-4 px-4 sm:px-8 w-full pl-3 pr-4 sm:pr-10 h-20 z-40","data-index":"1"},Ce={class:"relative hidden h-fit cursor-pointer items-center justify-center focus-within:text-surface sm:flex mr-auto"},$e=["value"],Re={class:"absolute top-2 right-2 bottom-2 flex items-center justify-center"},Te=j({__name:"ControlHeader",props:{data:{type:Object,required:!1},filter:{type:String,required:!0}},emits:["filter-change"],setup(e){const l=e,f=D();function s(){h.setQueue(l.data?.tracks??[])}const u=x(()=>({title:l.data?.name??"",url:`https://app.nomercy.tv${f.fullPath}`}));return(n,c)=>(r(),y(Z,null,[c[1]||(c[1]=a("div",{class:"pointer-events-none absolute z-0 h-96 w-full"},null,-1)),a("div",Se,[e.data?.tracks?(r(),o(U,{key:0,data:e.data,class:"hidden sm:flex"},null,8,["data"])):d("",!0),a("div",Ce,[a("input",{id:"search",value:e.filter,class:"bg-transparent border-surface-12/5 border-2 rounded-md focus-visible:!border-surface-12/9 focus-visible:text-current placeholder-current p-2",name:"search",placeholder:"Filter…",type:"text",onInput:c[0]||(c[0]=_=>n.$emit("filterChange",_.target?.value))},null,40,$e),a("div",Re,[m(L,{class:"!w-7",icon:"searchMagnifyingGlass"})])]),m(Q,{"share-data":u.value,class:"!p-0 hidden sm:flex sm:ml-auto"},null,8,["share-data"]),m(Y,{data:e.data,"class-name":"!w-8 !h-8",color:"var(--color-theme-8)"},null,8,["data"]),m(Q,{class:"!p-0 sm:hidden"}),t(ce)?(r(),o(ke,{key:1,id:"add",onclick:s,class:"",label:"Add"},{default:S(()=>[m(L,{class:"!w-7",icon:"add"})]),_:1})):d("",!0)]),a("div",{class:w([{"top-11":!t(C)("capacitor"),"top-10":t(C)("capacitor")},"sm:hidden sticky left-full -mt-16 z-1199 flex justify-center items-center gap-2 mr-4 h-auto"]),style:{"box-shadow":"0 1px 2px 0 rgba(16, 24, 40, 0.05)"}},[e.data?.tracks?(r(),o(U,{key:0,data:e.data},null,8,["data"])):d("",!0)],2)],64))}}),$t=Te;P();var Ee={key:0,class:"relative my-4 flex w-full flex-1 flex-shrink-0 flex-col items-start justify-start gap-4 flex-grow-1 sm:hidden"},Le=["innerHTML"],Pe={class:"relative hidden flex-1 flex-shrink-0 flex-col items-start justify-start gap-1 flex-grow-1 sm:flex"},je={class:"text-left font-semibold uppercase"},qe=["innerHTML"],ze={class:"relative flex items-center justify-start gap-2"},Ae={key:0,class:"flex items-center gap-4 text-sm font-medium"},Be={key:0,class:"relative aspect-square h-12 w-12 overflow-clip rounded-full min-w-12"},He={key:1,class:"text-left text-sm font-medium"},Me={class:"text-left text-sm font-medium"},De={key:2,class:"text-left text-sm font-medium"},Ie={class:"text-left text-sm font-medium"},Ne=j({__name:"ArtistHeader",props:{data:{type:Object,required:!1}},setup(e){const l=e,{t:f}=ye(),s=q(""),u=q(),n=q();function c(i){if(i)return de(f,i?.tracks?.map(g=>ie(g.duration)).reduce((g,v)=>g+v,0)??0)}z(l,i=>{i&&(s.value=c(i.data))}),ae(()=>{s.value=c(l.data)}),z(u,i=>{if(!i)return;const g=i.getContext("2d",{willReadFrequently:!0,desynchronized:!0}),v=()=>{const p=h._audioElement1?.motion?.canvas;p&&n.value&&(h._audioElement1.isPlaying()?(h._audioElement1?.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(n.value).backgroundColor]}),h._audioElement1.motion.gradient="theme",i.width=p.width,i.height=p.height,g.clearRect(0,0,i.width,i.height),g.drawImage(p,0,0,i.width,i.height)):h._audioElement2.isPlaying()&&(h._audioElement2?.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(n.value).backgroundColor]}),h._audioElement2.motion.gradient="theme",i.width=p.width,i.height=p.height,g.clearRect(0,0,i.width,i.height),g.drawImage(p,0,0,i.width,i.height))),requestAnimationFrame(v)};v()}),z(n,i=>{!i||!h._audioElement1?.motion||!h._audioElement2?.motion||(h._audioElement1?.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(i).backgroundColor]}),h._audioElement1.motion.gradient="theme",h._audioElement2?.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(i).backgroundColor]}),h._audioElement2.motion.gradient="theme")});const _=x(()=>le(se(ne.value),150));return(i,g)=>{const v=X("RouterLink");return r(),y("div",{id:"artist-header",class:w([{"pt-safe-offset-16 px-8 gap-4":t(C)("capacitor"),"pt-24 px-6 gap-2 sm:gap-12":!t(C)("capacitor"),"text-black/12":_.value,"text-white/12":!_.value},"relative z-0 flex flex-col items-end justify-start sm:flex-row sm:gap-9 sm:pt-8 sm:pb-8 sm:px-8"])},[a("div",{id:"audio-color",ref_key:"audioColor",ref:n,class:"absolute top-0 left-0 h-full w-full overflow-clip bg-focus",style:{background:"hsl(from var(--color-theme-8) h s 32%)"}},null,512),g[0]||(g[0]=a("div",{class:"absolute top-0 left-0 h-full w-full overflow-clip"},null,-1)),a("canvas",{id:"audio-visualizer",ref_key:"canvas",ref:u,class:"absolute top-0 left-96 my-12 ml-6 mr-6 mt-full h-available w-available overflow-clip pointer-events-none"},null,512),a("div",{class:w([{"-mt-4":t(C)("capacitor"),"":!t(C)("capacitor")},"frosting relative mx-auto group/cover flex aspect-square w-80 overflow-clip max-w-[90%] flex-col items-center justify-center rounded-xl bg-gradient-to-br min-w-64 bg-theme-6 from-theme-5 via-theme-6 to-theme-9 shadow"])},[e.data?(r(),o(_e,{key:0,data:e.data,url:`${e.data.link}/cover`},{default:S(({data:p,ref:k})=>[p?.cover?(r(),o(M,{key:0,id:"image",data:p,"img-ref":k,size:250,"class-name":"aspect-square rounded-xl w-full",loading:"eager"},null,8,["data","img-ref"])):p?.id?(r(),o(be,{key:1,id:p.id,type:p.type,class:"aspect-square rounded-xl w-full"},null,8,["id","type"])):d("",!0)]),_:1},8,["data","url"])):d("",!0)],2),e.data?.name?(r(),y("div",Ee,[a("div",{class:"w-full text-2xl font-semibold whitespace-pre-line",innerHTML:t(V)(e.data?.name??"Songs you like","text-sm line-clamp-1")},null,8,Le)])):d("",!0),a("div",Pe,[a("p",je,b(e.data?.type?.replace(/s$/u,"")),1),a("div",{class:"w-full text-5xl font-semibold line-clamp-2 leading-[130%] whitespace-pre",innerHTML:t(V)(e.data?.name??"Songs you like","text-2xl line-clamp-1")},null,8,qe),a("div",ze,[e.data?.artists?.length?(r(),y("div",Ae,[e.data?.artists?.[0].cover?(r(),y("div",Be,[m(M,{id:"image",data:e.data?.artists?.[0],size:250,"class-name":"h-full w-full",loading:"eager"},null,8,["data"])])):d("",!0),m(v,{to:e.data?.artists?.[0].link??"#",class:"text-sm empty:hidden"},{default:S(()=>[J(b(e.data?.artists?.[0]?.name??"Various artists"),1)]),_:1},8,["to"])])):d("",!0),e.data?.tracks&&e.data?.artists?.length?(r(),y("p",He," • ")):d("",!0),a("p",Me,b(e.data?.tracks?.length)+" "+b(e.data?.tracks?.length===1?t(f)("track"):t(f)("tracks")),1),(s.value?.length??0)>0?(r(),y("p",De," • ")):d("",!0),a("p",Ie,b(s.value),1)])])],2)}}}),Rt=Ne;P();var Ve=["onclick"],We={class:""},Fe=j({__name:"SortButton",props:{name:{type:String,required:!0},sortingType:{type:String,required:!0},iconSpacer:{type:String,default:""}},setup(e){function l(s){console.log("handleSortChange",s),T.value===s?N(A.value===R.asc?R.desc:R.asc):N(R.asc),oe(s)}function f(s){const u=s.target;if(s.key==="ArrowUp"){const n=u.parentElement?.parentElement?.previousElementSibling;n&&n.nodeName==="BUTTON"||n.nodeName==="A"?n.focus():document.querySelector("#playList")?.focus()}else s.key==="ArrowDown"?u.parentElement?.parentElement?.nextElementSibling?.focus():s.key==="ArrowLeft"?u.previousElementSibling?.focus():s.key==="ArrowRight"&&u.nextElementSibling?.focus()}return(s,u)=>(r(),y("button",{onclick:()=>l(e.sortingType),onkeyup:f,class:"relative cursor-pointer items-center focus-visible:underline focus-visible:underline-offset-2","no-ring":""},[a("span",We,b(s.$t(e.name)),1),t(A)===t(R).asc&&t(T)===e.sortingType&&t(T)!==t($).index?(r(),o(L,{key:0,class:w(`w-6 h-6 ${e.iconSpacer}`),icon:"chevronUp"},null,8,["class"])):t(A)===t(R).desc&&t(T)===e.sortingType&&t(T)!==t($).index?(r(),o(L,{key:1,class:w(`w-6 h-6 ${e.iconSpacer}`),icon:"chevronDown"},null,8,["class"])):d("",!0)],8,Ve))}}),E=Fe;P();I();var Oe=j({__name:"SortHeader",setup(e){const l=D(),f=x(()=>l.path.startsWith("/music/album")),s=x(()=>l.path.startsWith("/music/artist")),u=x(()=>l.path.startsWith("/music/playlists")),n=x(()=>l.path.startsWith("/music/tracks"));return(c,_)=>(r(),y("div",{id:"sortHeaderElement",class:w([{"top-safe-offset-[4rem]":t(C)("capacitor"),"top-safe-offset-16":!t(C)("capacitor")},"sticky -mx-4 px-4 z-30 mt-4 block h-10 content-center items-center justify-start self-stretch bg-transparent text-sm font-medium transition-all duration-200 w-available group/track sm:w-available sm:-top-px"])},[_[0]||(_[0]=a("span",{id:"sorterChild",class:"absolute inset-0 h-10 sm:rounded-t-2xl overflow-clip w-full transition-all duration-200"},null,-1)),a("span",{class:w([{"album-grid":f.value||u.value||n.value,"artist-grid":s.value},"grid justify-start items-center self-stretch pr-3 sm:px-3 rounded-lg group/track text-sm font-medium py-2 z-0 group/track"])},[m(E,{id:"sortIndex","aria-label":c.$t("Sort by index"),"sorting-type":t($).index,class:"!flex justify-center","icon-spacer":"absolute left-6",name:"#"},null,8,["aria-label","sorting-type"]),m(E,{"aria-label":c.$t("Sort by name"),"sorting-type":t($).name,class:"flex sm:flex","icon-spacer":"w-6 h-6",name:"Title"},null,8,["aria-label","sorting-type"]),m(E,{"aria-label":c.$t("Sort by album"),class:w([{"opacity-0":f.value},"!hidden sm:!flex"]),"sorting-type":t($).album,"icon-spacer":"w-6 h-6",name:"Album"},null,8,["aria-label","class","sorting-type"]),m(E,{"aria-label":c.$t("Sort by date"),"sorting-type":t($).date,class:"!hidden sm:!flex","icon-spacer":"w-6 h-6",name:"Release date"},null,8,["aria-label","sorting-type"]),m(E,{"aria-label":c.$t("Sort by duration"),"sorting-type":t($).duration,class:"!hidden sm:!flex gap-2 flex-row-reverse pr-[4.5rem]","icon-spacer":"w-6 h-6",name:"Duration"},null,8,["aria-label","sorting-type"])],2)],2))}}),Tt=ge(Oe,[["__scopeId","data-v-763a9f76"]]);P();I();var Ge=["data-track-id"],Ue={class:"flex justify-center text-center"},Ke={key:0,class:"group-focus-visible/track:sm:hidden group-hover/track:sm:hidden"},Qe={class:"flex h-12 items-center gap-2 overflow-hidden w-available sm:gap-4"},Ze={class:"flex h-full flex-col justify-evenly overflow-clip w-inherit"},Je={class:"flex h-6 flex-nowrap overflow-clip text-left line-clamp-1 w-inherit tracking-wide leading-6 px-2 py-1 -ml-2"},Xe=["data-size"],Ye={class:"flex whitespace-nowrap"},et={class:"hidden sm:flex invisible max-h-12 md:visible"},tt={class:"hidden sm:flex mr-4 monospace sm:mr-0"},at=j({__name:"TrackRow",props:{data:{type:Object,required:!0},index:{type:Number,required:!0},displayList:{type:Array,required:!0}},setup(e){const l=e,f=D(),s=x(()=>f.path.startsWith("/music/album")),u=x(()=>f.path.startsWith("/music/artist")),n=x(()=>f.path.startsWith("/music/playlists")),c=x(()=>f.path.startsWith("/music/tracks"));function _(){if(!ue.value.features?.nomercyConnect){pe.playTrack(l.data,l.displayList);return}fe.value?.invoke("StartPlaybackCommand",s.value?"album":"artist",s.value?l.data?.album_track.at(0)?.id:l.data?.artist_track.at(0)?.id,l.data.id)}const i=x(()=>!l.data?.date||!B?.language||B.language==="undefined"?null:new Date(l.data.date).toLocaleDateString(B?.language??"en-US",{year:"numeric",month:"long",day:"2-digit"}));return(g,v)=>{const p=X("RouterLink");return r(),y("button",{class:w([{"album-grid":s.value||n.value||c.value,"artist-grid":u.value},"grid justify-start children:pointer-events-none items-center self-stretch pr-3 sm:px-3 rounded-lg sm:hover:bg-surface-6/8 group/track text-sm font-medium py-2 z-10"]),"data-track-id":e.data?.id,onclick:_,"data-target":"track",tabindex:"0",onContextmenu:v[1]||(v[1]=k=>t(he)(k,g.$route,e.data))},[a("span",Ue,[t(H)?.id!==e.data.id?(r(),y("span",Ke,b(e.index+1),1)):d("",!0),t(H)?.id===e.data.id?(r(),o(we,{key:1,playing:t(F),class:"hidden group-focus-visible/track:sm:!hidden group-hover/track:sm:!hidden",color:"var(--color-theme-8)"},null,8,["playing"])):d("",!0),t(H)?.id===e.data.id&&t(F)?(r(),o(O,{key:2,class:"hidden h-6 w-6 group-focus-visible/track:sm:block group-hover/track:sm:block",icon:"nmPause"})):(r(),o(O,{key:3,class:"hidden h-6 w-6 group-focus-visible/track:sm:block group-hover/track:sm:block",icon:"nmPlay"}))]),a("span",Qe,[s.value?(r(),o(M,{key:0,data:e.data,size:100,style:te({display:s.value?"none":""}),"class-name":"relative hidden h-12 w-12 overflow-hidden min-w-[3rem] sm:block",loading:"eager"},null,8,["data","style"])):d("",!0),a("span",Ze,[a("span",Je,b(e.data.name),1),a("span",{"data-size":t(me),class:"inline-flex h-6 w-available gap-1 overflow-hidden whitespace-nowrap text-slate-3 dark:slate-dark-3 line-clamp-1 text-2xs hover:animate-pause leading-6"},[m(G,null,{default:S(()=>[e.data&&s.value||n.value||c.value?(r(),o(K,{key:0,id:e.data.id,data:e.data.artist_track,onclick:k=>k.stopPropagation(),"data-target":"artist",type:"artists"},null,8,["id","data","onclick"])):d("",!0),e.data&&u.value?(r(),o(K,{key:1,id:e.data.id,data:e.data.album_track,onclick:k=>k.stopPropagation(),"data-target":"album",type:"albums"},null,8,["id","data","onclick"])):d("",!0)]),_:1})],8,Xe)])]),(r(!0),y(Z,null,re(e.data.album_track,k=>(r(),o(G,{key:k.id,class:"!hidden sm:!flex"},{default:S(()=>[a("button",{class:w([{"opacity-0":s.value,"opacity-100":u.value},"items-center overflow-clip pr-2 line-clamp-2 h-inherit w-inherit flex"]),onClick:v[0]||(v[0]=ee=>ee.stopPropagation())},[m(p,{to:k?.link,class:"flex items-center gap-1 whitespace-nowrap font-semibold line-clamp-1 hover:underline focus:underline dark:font-medium pointer-events-auto","data-target":"album","no-ring":"",tabindex:"0"},{default:S(()=>[a("span",Ye,b(k.name),1)]),_:2},1032,["to"])],2)]),_:2},1024))),128)),a("span",et,b(i.value),1),a("span",{class:w([{"mr-16":!t(W)},"flex items-center justify-end gap-2 text-end"])},[(r(),o(Y,{key:e.data.id+e.data?.favorite,data:e.data,color:"var(--color-theme-8)","no-background":""},null,8,["data"])),a("span",tt,b(e.data.duration),1),t(W)?(r(),o(ve,{key:0,direction:"down"},{button:S(()=>[m(xe,{class:"",title:""},{default:S(()=>[m(L,{"class-name":"relative h-5 w-5",icon:"menuDotsVertical"})]),_:1})]),default:S(()=>[v[2]||(v[2]=J(" Hellooo ",-1))]),_:1})):d("",!0)],2)],42,Ge)}}}),Et=at;export{$t as i,Tt as n,Rt as r,Et as t};
