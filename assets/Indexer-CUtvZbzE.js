import{At as _,C as q,Dt as z,Et as r,K as I,S as h,T as u,Y as i,Z as T,_t as w,c as E,g as y,j as Z,lt as j,q as P,x as k}from"./i18n-DBb78QAI.js";import{I as B,P as $,j as D}from"./vue-core-C9HAaO_1.js";import{Ki as b,k as n,ni as N,v as K}from"./index-A9ZXfM_l.js";import{n as M,t as g}from"./scrollHandlers-lYZv2lPA.js";E();var f=w(!1);const ee=k(()=>f.value);function Q(s){f.value=s}var U=w([]);const V=k(()=>{const s=new Set;return U.value?.forEach(o=>{const l=o.props?.data?.title||o.props?.data?.name||o.props?.name||"";if(l){const c=l.charAt(0).toUpperCase();/[A-Z0-9]/.test(c)?s.add(c):s.add("#")}}),s});var m=f;E();$();var F={class:"flex-shrink-0 flex-grow-0 text-center text-xs sm:text-base font-semibold leading-none"},G=["data-indexer","onClick"],H={class:"flex-shrink-0 flex-grow-0 text-center text-xs sm:text-base font-semibold leading-none"},O=Z({__name:"Indexer",setup(s){const o=["Libraries","Library","Collections","Albums","Artists","Music Genres"],l=[new RegExp("music/albums"),new RegExp("music/artists"),new RegExp("libraries/[a-zA-Z0-9]+/letter/[a-zA-Z0-9_]"),new RegExp("music/genres/letter/[a-zA-Z0-9_]")];function c(e){return o.some(a=>e.startsWith(a))}function d(e){return l.some(a=>e.match(a))}const L=B();function p(){setTimeout(()=>{document.querySelector("[indexer]")?.querySelectorAll("[data-indexer]").forEach(e=>{const a=e.dataset.indexer??"";let t;a==="#"?t=document.querySelector?.("[data-scroll]"):t=document.querySelector?.(`[data-scroll='scroll_${a}']`);const v=!!t,C=d(n.currentRoute.value.path),R=V.value.has(a);v||C||R?e.classList.remove("opacity-20","!cursor-not-allowed"):e.classList.add("opacity-20","!cursor-not-allowed")})},500)}function S(e){M(e),document.dispatchEvent(new CustomEvent("scrollToLetter",{detail:{letter:e}}))}function A(){document.querySelector("[indexer]")?.querySelectorAll("[data-indexer]").forEach(e=>{e.classList.add("opacity-20","!cursor-not-allowed")})}function x(e){Q(c(e)),p()}return n.afterEach(e=>{setTimeout(()=>{x(e.name??e.path)},150)}),n.beforeEach(()=>{d(n.currentRoute.value.path)||A()}),I(()=>{setTimeout(()=>{x(n.currentRoute.value.name??n.currentRoute.value.path)},150),document.addEventListener("indexer",p),document.addEventListener("keydown",g)}),P(()=>{document.removeEventListener("indexer",p),document.removeEventListener("keydown",g)}),(e,a)=>(i(),u("div",{class:z([{"w-8 opacity-100":r(m),"w-0 opacity-0 translate-x-4 pointer-events-none!":!r(m),"sm:ml-2":!r(b)&&r(m),"bottom-0":r(b)},"z-0 h-available sm:h-available flex flex-col items-center justify-between self-stretch overflow-clip transition-[width,opacity,transform] duration-200 sm:-translate-x-3 pt-2 text-surface-12"]),indexer:""},[(i(!0),u(y,null,T(r(N)("#","Z"),t=>(i(),u(y,{key:t},[d(r(L).path)?(i(),q(r(D),{key:0,"data-indexer":t,to:`${t.replace("#","_")}`,class:"pointer-events-auto relative flex p-1 size-6 sm:size-6 aspect-square rounded-lg overflow-clip cursor-pointer flex-col items-center justify-center hover:bg-surface-5",tabindex:"-1"},{default:j(()=>[h("p",F,_(t),1)]),_:2},1032,["data-indexer","to"])):(i(),u("button",{key:1,"data-indexer":t,class:"pointer-events-auto relative flex p-1 size-6 sm:size-6 aspect-square rounded-lg overflow-clip cursor-pointer flex-col items-center justify-center hover:bg-surface-5/11",tabindex:"-1",onClick:v=>S(t)},[h("p",H,_(t),1)],8,G))],64))),128))],2))}}),te=K(O,[["__scopeId","data-v-b5007d15"]]);export{m as n,te as t};
