import{C as z,Et as B,G as R,J as d,Ot as H,S as i,T as L,Tt as a,X as $,c as A,g as G,gt as p,j as O,k as v,ot as x,w as X,x as l,yt as q}from"./i18n-Cs-AFcrY.js";import"./ionic-XwZpO7IE.js";import{I as J,P as Y}from"./vue-core-CKeWI2Kt.js";import"./primevue-DNc5dNs0.js";import"./query-28IwY2wK.js";import{t as Z}from"./esm-C_OAQAej.js";import{Gn as D,Hn as M,Xn as y,Zn as h,b as K,gi as Q,k as U,zr as ee}from"./index-C8qOb1zQ.js";import"./useInfiniteServerClient-BcqmW98U.js";import{t as te}from"./useServerClient-CUq_evu8.js";import"./DropdownMenu-BS0K9dUz.js";import"./MusicButton-CNVVyEJm.js";import"./BannerButton-9ywvIj7R.js";import"./MediaLikeButton-CswVyhBT.js";import{t as ae}from"./Marquee-CiFrMFaQ.js";import"./TrackLinks-DC3tXYCD.js";import"./BigPlayButton-XW5EPl7B.js";import"./EqSpinner-C4hVickH.js";import{t as se}from"./NotFound-bOH7HiJw.js";import"./ShareButton-BB2A5Fzm.js";import{i as re,n as oe,r as ie,t as le}from"./TrackRow-CehjahMA.js";A();Y();var ue={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},ne={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},de=O({__name:"Mobile",setup(pe){const s=J(),_=l(()=>s.path.startsWith("/music/album")),g=l(()=>s.path.startsWith("/music/artist")),b=l(()=>s.path.startsWith("/music/playlists")),k=l(()=>s.path.startsWith("/music/tracks")),w=l(()=>s.path.startsWith("/music/genres")),P=l(()=>_.value?"album":g.value?"artist":b.value?"playlist":k.value?"favorite":w.value?"genre":"unknown"),V=l(()=>String(s.params.id??"")),{data:t,isError:W}=te({path:s.fullPath}),j=p(null),u=q([]),n=p("");x(t,e=>{e&&(Q(e?.name??null),f(e?.tracks??[],h.value,y.value,n.value),M(e?.color_palette?.cover))},{immediate:!0}),x(y,e=>{f(t.value?.tracks??[],h.value,e,n.value)}),x(h,e=>{f(t.value?.tracks??[],e,y.value,n.value)}),x(n,e=>{f(t.value?.tracks??[],h.value,y.value,e)});function f(e,o,r,m){const T=ee(e??[],o,r,D);m===""?u.value=T:u.value=T?.filter(C=>C.name?.toLowerCase().includes(m?.toLowerCase?.())||C.artist_track?.some(N=>N.name.toLowerCase().includes(m?.toLowerCase?.()))||C.album_track?.[0]?.name.toLowerCase().includes(m?.toLowerCase?.()))??[]}R(()=>{t.value?.color_palette?.cover&&M(t.value?.color_palette?.cover)});function E(){U.back()}const c=p(!1);p(!1);const F=p(),I=p(),S=Z(l(()=>{const e=I.value?.$el??null;return{count:u.value?.length??0,getScrollElement:()=>e,estimateSize:()=>56,overscan:10,initialRect:{width:0,height:800}}}));return(e,o)=>a(W)&&!a(t)?(d(),z(se,{key:0})):!a(s).params.id||a(s).params.id&&a(t)?.id===a(s).params.id?(d(),L("div",{key:1,ref_key:"main",ref:j,class:"flex flex-col h-auto overflow-x-clip w-available sm:rounded-2xl -mt-6 text-surface-12"},[v(ie,{data:a(t)},null,8,["data"]),i("div",ue,[o[2]||(o[2]=i("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),i("div",{id:"navbar",class:B([{"opacity-0 pointer-events-none":!c.value,"opacity-100 pointer-events-auto":c.value},"fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-surface-11 dark:bg-surface-1 top-0 pt-4 transition-all duration-200"])},[o[1]||(o[1]=i("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-all duration-200 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),i("button",{class:"z-30 flex h-10 w-11 items-center justify-center rounded-md",onClick:E},[v(K,{icon:"arrowLeft"})]),i("div",{id:"navText",class:B([{"opacity-0 pointer-events-none":!c.value,"opacity-100 pointer-events-auto":c.value},"pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-all duration-200 w-[70%] overflow-clip text-xl"])},[v(ae,{text:a(t)?.name},null,8,["text"])],2)],2),(d(),z(re,{key:a(t)?.id,data:a(t),filter:n.value,onFilterChange:o[0]||(o[0]=r=>n.value=r)},null,8,["data","filter"])),i("div",ne,[(d(),z(oe,{key:a(t)?.id,ref_key:"sortHeader",ref:F,"is-album-route":_.value,"is-artist-route":g.value,"is-playlists-route":b.value,"is-favorites-route":k.value,"is-genres-route":w.value},null,8,["is-album-route","is-artist-route","is-playlists-route","is-favorites-route","is-genres-route"])),i("div",{style:H({height:`${a(S).getTotalSize()}px`,width:"100%",position:"relative"})},[(d(!0),L(G,null,$(a(S).getVirtualItems(),r=>(d(),L("div",{key:u.value[r.index]?.id+u.value[r.index]?.favorite,style:H({position:"absolute",top:0,left:0,width:"100%",height:`${r.size}px`,transform:`translateY(${r.start}px)`})},[v(le,{data:u.value[r.index],"display-list":u.value,index:r.index,"is-album-route":_.value,"is-artist-route":g.value,"is-playlists-route":b.value,"is-favorites-route":k.value,"is-genres-route":w.value,"route-type":P.value,"route-param-id":V.value},null,8,["data","display-list","index","is-album-route","is-artist-route","is-playlists-route","is-favorites-route","is-genres-route","route-type","route-param-id"])],4))),128))],4)])])],512)):X("",!0)}}),Pe=de;export{Pe as default};
