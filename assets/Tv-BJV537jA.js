import{aw as V,o as r,e as F,a7 as B,a as l,aB as $,b1 as z,t as _,cO as W,h as b,I as h,az as U,c as x,F as L,u as K,au as X,q as Y,v as Q,c3 as Z,a6 as ee,bd as H,cP as te,cQ as se,cR as ae,J as re,cS as oe,c9 as le,aC as O,bF as ne,bG as ce,c7 as ie}from"./index-ByXhQ52S.js";const ue=["src"],de={class:"flex flex-col justify-end items-start self-stretch flex-grow-0 flex-shrink-0 h-[95px] relative overflow-hidden px-1.5 pt-10 pb-1.5",style:{background:"linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,0.24) 25.86%, rgba(0,0,0,0.9) 77.75%)"}},fe={class:"self-stretch flex-grow-0 flex-shrink-0 w-full text-3xs font-bold text-left text-slate-light-11 dark:text-slate-dark-11"},ve={class:"self-stretch flex-grow-0 flex-shrink-0 w-full text-[8px] text-left text-[#eff7ff]/[0.62]"},xe=V({__name:"TvCard",props:{item:{type:Object,required:!0},index:{type:Number,required:!0},scrollToCenter:{type:Function,required:!0}},setup(e){return(u,g)=>e.item.props.data?(r(),F($(W),{key:0,to:e.item.props.data.link.includes("watch")?e.item.props.data.link:`${e.item.props.data.link}/watch`,"data-card":e.item.props.data,index:e.index,onFocus:e.scrollToCenter,class:"flex flex-col justify-end relative items-center flex-grow-0 flex-shrink-0 w-full h-auto aspect-poster overflow-hidden rounded bg-cover bg-no-repeat bg-center focus-visible:ring-2 focus-visible:ring-white snap-center pointer-events-auto mr-3 last:mr-0"},{default:B(()=>{var n;return[l("img",{src:`${(n=$(z))==null?void 0:n.serverBaseUrl}/images/original${e.item.props.data.poster}?width=300`,alt:"",loading:"lazy",class:"w-full h-auto aspect-poster object-cover object-center absolute inset-0"},null,8,ue),l("div",de,[l("p",fe,_(e.item.props.data.title),1),l("p",ve,_(e.item.props.data.year),1)])]}),_:1},8,["to","data-card","index","onFocus"])):b("",!0)}}),me={key:0,class:"flex flex-col gap-1 w-full"},pe={key:0,class:"text-lg font-bold text-auto-12 text-slate-light-1 ml-2"},he=["data-carousel"],be=V({__name:"TvCarousel",props:{carousel:{type:Object,required:!0},scrollToCenter:{type:Function,required:!0},scrollIndex:{type:Number,required:!0},setScrollIndex:{type:Function,required:!0},cardsPerScroll:{type:Number,required:!0},unlockKeys:{type:Function,required:!0},index:{type:Number,required:!0},setHasMoreCardsToRight:{type:Function,required:!0}},setup(e){const u=e,g=h(),n=()=>{var v,f,k,m,w;const c=Array.from(((v=g.value)==null?void 0:v.querySelectorAll("a"))??[]),d=c.filter(y=>y.isVisible()),i=d.at(u.scrollIndex);i?i==null||i.focus():d.length>0?(f=d.at(-1))==null||f.focus():(k=c.at(u.scrollIndex))!=null&&k.href?((m=c.at(u.scrollIndex))==null||m.focus(),u.setHasMoreCardsToRight(!0)):((w=c.at(-1))==null||w.focus(),u.setHasMoreCardsToRight(!0))},T=()=>{setTimeout(()=>{u.unlockKeys()},200)},C=h(!1);return U(()=>{setTimeout(()=>{C.value=!0},50*u.index)}),(c,d)=>{var i;return C.value?(r(),x("div",me,[e.carousel.props.title??e.carousel.title?(r(),x("h3",pe,_(e.carousel.props.title??e.carousel.title),1)):b("",!0),l("div",{tabindex:"1",ref_key:"carouselDiv",ref:g,class:"flex flex-nowrap w-full p-1 snap-x snap-mandatory overflow-x-auto pointer-events-none scroll-mr-20","data-carousel":e.carousel.props.title??e.carousel.title,onFocus:n},[(r(!0),x(L,null,K(((i=e.carousel.props)==null?void 0:i.items)??[],(v,f)=>(r(),F(xe,{key:v,tabindex:"0",item:v,index:f,onFocus:d[0]||(d[0]=k=>T()),scrollToCenter:e.scrollToCenter,style:X(`flex-basis: calc(100% / ${e.cardsPerScroll} - 0.70rem)`)},null,8,["item","index","scrollToCenter","style"]))),128))],40,he)])):b("",!0)}}}),ge={key:0,class:"w-full h-full absolute right-0 top-0 overflow-hidden bg-black"},ye=["src"],ke={class:"flex flex-col justify-start items-start absolute left-8 gap-5 bottom-4"},we={class:"flex flex-col justify-start items-start flex-grow-0 flex-shrink-0 relative gap-1"},Te={key:0,class:"flex items-center gap-2 text-xs font-medium text-left text-slate-dark-11"},Ce={class:"text-3xs"},$e={class:"text-2xl text-left text-slate-dark-12 line-clamp-1 w-4/5"},_e={class:"line-clamp-5 text-xs w-3/6"},qe={class:"flex justify-center items-center flex-grow-0 flex-shrink-0 relative"},Ie=V({__name:"TvHomeCard",props:{carousel:{type:Object,required:!0},items:{type:Array,required:!0}},setup(e){return(u,g)=>{var T,C,c,d,i,v,f,k,m,w,y,M,R,j,q,I,N;const n=Y("RouterLink");return r(),x(L,null,[(C=(T=e.carousel)==null?void 0:T.props)!=null&&C.data?(r(),x("div",ge,[l("img",{src:`${(c=$(z))==null?void 0:c.serverBaseUrl}/images/original${(v=(i=(d=e.carousel)==null?void 0:d.props)==null?void 0:i.data)==null?void 0:v.backdrop}`,alt:"",class:"w-available h-auto absolute inset-0 left-40 object-scale-down"},null,8,ye),g[0]||(g[0]=l("div",{class:"absolute bottom-0 w-full h-[200%]",style:{"flex-shrink":"0",background:"radial-gradient(87.82% 267.96% at 92.04% -27%, rgba(19, 19, 20, 0.10) 34%, #131314 70.74%)"}},null,-1))])):b("",!0),l("div",ke,[l("div",we,[(f=e.carousel.props.data)!=null&&f.content_ratings?(r(),x("div",Te,[Q(Z,{ratings:(k=e.carousel.props.data)==null?void 0:k.content_ratings},null,8,["ratings"]),l("span",Ce,"( "+_((m=e.carousel.props.data)==null?void 0:m.year)+" )",1)])):b("",!0),l("p",$e,_((y=(w=e.carousel.props)==null?void 0:w.data)==null?void 0:y.title),1),l("p",_e,_((R=(M=e.carousel.props)==null?void 0:M.data)==null?void 0:R.overview),1)]),l("div",qe,[(q=(j=e.carousel.props)==null?void 0:j.data)!=null&&q.link?(r(),F(n,{key:0,to:(N=(I=e.carousel.props)==null?void 0:I.data)==null?void 0:N.link,id:"watch_now",ref:"play",tabindex:"0",class:"text-black flex-grow-0 flex-shrink-0 px-4 py-2 rounded-3xl bg-slate-light-4 focus-visible:ring-[3px] ring-inset focus-visible:ring-focus"},{default:B(()=>[ee(_(u.$t("Watch Now")),1)]),_:1},8,["to"])):b("",!0)])])],64)}}}),Se={key:0,class:"flex flex-col gap-8 pt-24 pb-4",id:"container"},Fe=V({__name:"Tv",setup(e){const u=H.currentRoute.value.name,g=te(),{data:n}=se({path:"/libraries/tv",queryKey:["libraries","tv"]}),{data:T,mutate:C}=ae({homeData:n,queryKey:["libraries","tv"]});H.beforeEach(async t=>{var s,o;if(!n.value||t.name!==u)return;const a=((o=(s=n.value)==null?void 0:s.filter)==null?void 0:o.call(s,p=>{var S;return((S=p==null?void 0:p.update)==null?void 0:S.when)=="pageLoad"}))??[];C(a)}),re(n,t=>{t&&v("#watch_now")});const c=h(),d=h(),i=h(7),v=t=>{var s,o,p;const a=document.querySelector(t);a&&(a.focus(),(o=(s=f.value)==null?void 0:s.$el)==null||o.scrollToTop(0),(p=c.value)==null||p.classList.remove("opacity-[0.001]"),I())},f=h(),k=()=>{var t,a,s,o,p,S,D;(a=(t=f.value)==null?void 0:t.$el)==null||a.scrollToBottom(0),(o=(s=f.value)==null?void 0:s.$el)==null||o.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),(p=c.value)==null||p.classList.add("opacity-[0.001]"),(D=(S=d.value)==null?void 0:S.querySelector("[data-card]"))==null||D.focus()};oe(()=>{setTimeout(()=>{var t;(t=c.value)==null||t.focus()},1e3)});const m=h(0),w=t=>{m.value=t},y=h(!1),M=t=>{y.value=t},R=t=>{var a;(a=document.activeElement)==null||a.scrollIntoView({behavior:"smooth",block:"center",inline:m.value==2||y.value?"center":void 0}),setTimeout(()=>{var A,E;const s=((E=(A=t.target)==null?void 0:A.getAttribute("index"))==null?void 0:E.toInt())??0,o=t.target.closest("[data-carousel]");o.dataset.focussedIndex=s.toString();const D=o.querySelectorAllArray("a").filter(J=>J.isVisible()).indexOf(t.target);m.value!==D&&(y.value=!0),w(D),s>o.childNodes.length-i.value&&(y.value=!1)},400)},j=h(),q=h(!1),I=()=>{clearTimeout(j.value),q.value=!1},N=t=>{if(t.target.dataset.card){if(q.value)t.preventDefault();else{q.value=!0;return}j.value=setTimeout(()=>{I()},200)}};U(()=>{document.addEventListener("keydown",N)}),le(()=>{document.removeEventListener("keydown",N)});const G=O(()=>{var t;return((t=T.value??n.value)==null?void 0:t.filter(a=>a.component=="NMHomeCard"))??[]}),P=O(()=>{var t;return((t=T.value??n.value)==null?void 0:t.filter(a=>a.component=="NMCarousel"))??[]});return(t,a)=>(r(),F($(ce),null,{default:B(()=>[Q($(ne),{fullscreen:!0,ref_key:"content",ref:f},{default:B(()=>[$(g)?b("",!0):(r(),x("div",Se,[l("div",{tabindex:"0",ref_key:"top",ref:c,onFocus:a[0]||(a[0]=s=>v("#watch_now")),class:"flex items-center mx-12 w-available min-h-[60vh] relative overflow-hidden rounded-2xl border-2 border-slate-light-9 transition-opacity duration-300"},[(r(!0),x(L,null,K(G.value,s=>(r(),F(Ie,{key:s.props.title,carousel:s,items:s.props.items},null,8,["carousel","items"]))),128))],544),P.value.length>0?(r(),x("div",{key:0,tabindex:"0",ref_key:"bottom",ref:d,onFocus:k,class:"mx-11 flex flex-col justify-start items-start w-available gap-5 h-[calc(100vh-5rem)] overflow-auto"},[$(g)?b("",!0):(r(!0),x(L,{key:0},K(P.value,(s,o)=>(r(),x(L,{key:s.props.title},[s.props.items.length>0?(r(),F(be,{key:0,carousel:s,index:o,scrollToCenter:R,scrollIndex:m.value,setScrollIndex:w,cardsPerScroll:i.value,unlockKeys:I,setHasMoreCardsToRight:M},null,8,["carousel","index","scrollIndex","cardsPerScroll"])):b("",!0)],64))),128))],544)):b("",!0)]))]),_:1},512)]),_:1}))}}),Ne=ie(Fe,[["__scopeId","data-v-5edcff0a"]]);export{Ne as default};
//# sourceMappingURL=Tv-BJV537jA.js.map
