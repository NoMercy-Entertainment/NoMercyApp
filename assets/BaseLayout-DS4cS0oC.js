import{Y as $,j as K,c,o as s,t as d,l as p,y as t,i as a,v as C,b as g,Z as e,aG as X,h as L,az as ee,w as Q,H as D,d as w,f as te,aC as ae,an as oe,ao as le,_ as se}from"./vue-ionic-Cv2or74p.js";import{aI as ne,o as l,w as M,ag as re,T as ie,U as ce,V as ue,u as de,x,a5 as fe,a7 as k,q as S,c as me,aJ as u,ab as q,p as pe,a8 as T,aK as ve}from"./index-B8ua9eYC.js";import{_ as he,a as _e,b as ye,c as be,d as we,f as ke,e as ge,g as xe}from"./ShuffleButton.vue_vue_type_script_setup_true_lang-DLU7l8Bx.js";import{A as $e}from"./AppLogoSquare-DwFk-Amv.js";import{_ as Pe}from"./NoMercyAvatar.vue_vue_type_script_setup_true_lang-i3T4PwO7.js";import{_ as G}from"./CoverImage.vue_vue_type_script_setup_true_lang-B_dgwylo.js";import{_ as Se}from"./Marquee.vue_vue_type_script_setup_true_lang-C84SZhW3.js";import{E as qe}from"./EqSpinner-9noyKjt9.js";import{_ as z}from"./OptimizedIcon.vue_vue_type_script_setup_true_lang-Bi-0Ik3i.js";import{_ as ze}from"./PlayerIcon.vue_vue_type_script_setup_true_lang-DTv9DYkH.js";import{_ as Le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as Me}from"./TrackLinks.vue_vue_type_script_setup_true_lang-D5QfT9Uz.js";import{_ as Te}from"./LyricsButton.vue_vue_type_script_setup_true_lang-D3b9VbZf.js";import{M as Be}from"./MediaLikeButton-Plm_9l_U.js";import{_ as U}from"./MusicButton.vue_vue_type_script_setup_true_lang-C78blkBU.js";import"./vendor-F08gofix.js";import"./icons-BW5E66pf.js";import"./rxjs-BCp2L9Rn.js";import"./media-C2AqgyMX.js";import"./api-BBofn2cc.js";import"./swiper-DhG1br88.js";import"./music-player-Dgg5bFLw.js";import"./primevue-JgeSHwCi.js";import"./imageModal-D23ADPBU.js";import"./TMDBImage.vue_vue_type_script_setup_true_lang-RgQiqBdm.js";import"./contextMenuItems-xz5PER82.js";import"./musicPlaylists-C8dhy1GW.js";import"./SliderBar.vue_vue_type_script_setup_true_lang-DvP4DqGF.js";const De={class:"flex-grow-0 flex-shrink-0 text-xs text-left leading-none text-white mt-0.5"},B=$({__name:"NavBarButton",props:{icon:{type:String,required:!0},href:{type:String,required:!1,default:"/"},name:{type:String,required:!1,default:""},active:{type:Boolean,required:!1,default:!1}},setup(n){return(v,o)=>{const r=K("RouterLink");return s(),c(r,{to:n.href,tabindex:"1",class:d(["flex justify-center items-center relative first:children:mt-0.5 gap-2 pl-2 pr-3 h-8 rounded-3xl focus:outline-none focus-visible:outline-2 focus-visible:outline-focus focus-visible:outline",{"bg-focus/80":n.active,"bg-white/10":!n.active}])},{default:p(()=>[t(z,{icon:n.icon,className:"size-5 relative"},null,8,["icon"]),a("p",De,C(v.$t(n.name)),1)]),_:1},8,["to","class"])}}}),Ce={class:"flex justify-between items-center w-full relative px-14 h-14"},je={class:"relative w-10 h-10 aspect-square rounded-full overflow-clip"},Ne={class:"flex items-center justify-center w-auto h-full aspect-square absolute top-0 left-0"},Ee={class:"w-[calc(100%-30px)] flex flex-col justify-center items-start gap-1.5 mr-2 overflow-clip py-0.5 border-[4px] border-l-0 rounded-r-full border-slate-dark-6"},Fe={class:"pl-2 text-3xs text-white line-clamp-1 leading-none"},Ie={class:"flex justify-start items-start flex-grow-0 flex-shrink-0 gap-3"},Re=$({__name:"NavBar",setup(n){return(v,o)=>{const r=K("RouterLink");return e(ne)?(s(),c(e(X),{key:0,mode:"md",class:"pt-safe transition-all duration-200 !h-[104px]"},{default:p(()=>[t(e(ee),{mode:"md"},{default:p(()=>{var f,m;return[a("div",Ce,[e(l)?(s(),L("button",{key:0,onClick:o[0]||(o[0]=P=>e(re)()),class:"flex w-60 -ml-1.5 -mr-48 h-10 my-auto bg-slate-dark-6 pr-2 rounded-full overflow-clip focus:outline-none focus-visible:outline-2 focus-visible:outline-focus focus-visible:outline"},[a("div",je,[t(G,{data:e(l),alt:e(l).name,class:d(["w-auto h-full aspect-square absolute top-0 left-0 brightness-50",{"":e(M)}])},null,8,["data","alt","class"]),a("div",Ne,[e(M)?(s(),c(qe,{key:0,playing:e(M)},null,8,["playing"])):(s(),c(ze,{key:1,icon:"nmPause",class:"w-5 h-5 text-white"}))])]),a("div",Ee,[t(Se,{text:e(l).name,class:"px-2 children:pr-4 text-2xs leading-none !flex-grow-0"},null,8,["text"]),a("span",Fe,C((m=(f=e(l).artist_track)==null?void 0:f.at(0))==null?void 0:m.name),1)])])):(s(),c($e,{key:1,class:"w-10 h-10"})),a("div",Ie,[t(B,{icon:"home1",href:"/home",name:"Home",active:e(ie)},null,8,["active"]),t(B,{icon:"folder",href:"/libraries",name:"Libraries",active:e(ce)},null,8,["active"]),t(B,{icon:"noteSixteenth",href:"/music/start",name:"Music",active:e(ue)},null,8,["active"])]),t(r,{to:"/setup/select-servers",class:"relative flex flex-col rounded-full bg-black size-10 my-1"},{default:p(()=>[t(Pe,{user:e(de),size:40,class:"absolute focus-visible:ring-2 ring-inset focus-visible:ring-white"},null,8,["user"]),o[1]||(o[1]=a("span",{class:"absolute rounded-full border-white bg-green-600 size-[25%] bottom-[5%] end-[5%] border-[0.125rem] dark:border-stone-900"},null,-1))]),_:1})])]}),_:1})]),_:1})):g("",!0)}}}),Ve=Le(Re,[["__scopeId","data-v-0a578600"]]),Ae={key:0,class:"relative flex w-full items-center justify-between"},He={class:"flex gap-4"},Oe=["data-size"],Ue={class:"flex gap-4"},Ke=$({__name:"ButtonContainer",props:{color:{type:String,required:!0},toggleDarkMode:{type:Function,required:!0},isDarkMode:{type:Boolean,required:!0}},setup(n){Q(x,()=>{x.value===k.full&&setTimeout(()=>{const o=document.querySelector("#FullTvPlayer #playback-button");o&&o.focus()},100)});const v=o=>{o==null||o.preventDefault(),o==null||o.stopPropagation(),fe()};return(o,r)=>e(l)?(s(),L("div",Ae,[a("div",He,[t(Be,{data:e(l),color:n.color,className:"children:h-7 h-10 children:w-7 w-10"},null,8,["data","color"])]),a("div",{class:"fixed left-1/2 mx-auto flex w-fit -translate-x-1/2 items-center justify-center gap-4 rounded-xl bg-black/20 text-white px-4 py-3","data-size":e(x)},[t(he,{class:"h-10 w-10"}),t(_e,{class:"h-10 w-10"}),t(ye,{class:d(["h-12 w-12 !rounded-full",n.color=="white"?"children:fill-auto-300 children:w-9 children:h-9 active:ring-2 ring-offset-4 focus:outline active:outline outline-4 outline-auto-300 text-black !rounded-full":"text-black"]),id:"playback-button",style:D(`background-color: ${n.color};`)},null,8,["class","style"]),t(be,{class:"h-10 w-10"}),t(we,{class:"h-10 w-10"})],8,Oe),a("div",Ue,[t(Te,{class:"h-11 w-11 children:w-7 children:h-7 children:!fill-white"}),t(U,{label:"Queue",onclick:v,class:"h-11 w-11 children:w-7 children:h-7 children:!fill-white"},{default:p(()=>[t(z,{icon:"currentPlaylist",class:"h-11 w-11"})]),_:1}),t(U,{label:"Dark mode",onclick:n.toggleDarkMode,class:"h-11 w-11 children:w-7 children:h-7 children:!fill-white"},{default:p(()=>[n.isDarkMode?(s(),c(z,{key:0,icon:"moon",class:"h-11 w-11"})):(s(),c(z,{key:1,icon:"sun",class:"h-11 w-11"}))]),_:1},8,["onclick"])])])):g("",!0)}}),Qe=["src"],Ge={class:"container flex w-full h-full inset-0 col-span-1 row-span-1 p-12 pb-0"},Je=["data-show-lyrics"],Ye={"data-show-lyrics":!0,class:"w-full px-0 py-16 tv:py-20 h-full overflow-hidden transition-all"},Ze={class:"z-0 flex h-full w-full flex-col overflow-y-auto overflow-x-hidden scroll-smooth scrollbar-none font-bbc duration-200"},We={class:"relative whitespace-pre-wrap font-bold h-available"},Xe=["data-size"],et={class:"pointer-events-none relative flex flex-col gap-1 font-bold"},tt=$({__name:"FullTvPlayer",props:{data:{type:Object,required:!1}},setup(n){const v=()=>{x.value===k.compact?T(k.full):T(k.compact)};Q(ve,()=>{setTimeout(()=>{var i;(i=document.querySelector("#lyricsContainer"))==null||i.scrollTo({top:140,behavior:"smooth"})},500)});const o=w(),r=w(),f=w(),m=w(),P=w(!0),j=()=>{!f.value||!r.value||!m.value||!q.value||(r.value.classList.add("delay-300"),setTimeout(()=>{r.value&&(r.value.style.translate="0 0",P.value=!0)},50),m.value.style.setProperty("--backdrop-opacity","0.6"),f.value.style.translate="0 0")},J=()=>{!r.value||!m.value||!f.value||(r.value.classList.remove("delay-300"),setTimeout(()=>{r.value&&(r.value.style.translate="0 110%",P.value=!1)},50),m.value.style.setProperty("--backdrop-opacity","0.4"),f.value.style.translate=u.value?"0 0":"0 115%")},h=()=>{clearTimeout(o.value),j(),o.value=setTimeout(()=>{S.isPlaying&&J()},1e4)},N=()=>{x.value===k.full?T(k.compact):window.history.back()};te(()=>{h(),document.addEventListener("keydown",h),document.addEventListener("mousemove",h),document.addEventListener("backbutton",N),S.on("pause",()=>{j()}),S.on("play",()=>{h()}),S.on("song",()=>{h()})}),ae(()=>{document.removeEventListener("keydown",h),document.removeEventListener("mousemove",h),document.removeEventListener("backbutton",N)});const y=w(!1),Y=i=>{i==null||i.stopPropagation(),y.value=!y.value},Z=i=>{if(i.key==="ArrowUp"&&i.preventDefault(),i.key==="ArrowDown"){i.preventDefault();const _=document.querySelector("#FullTvPlayer #playback-button");_&&_.focus()}},W=i=>{if(i.propertyName==="translate"&&P.value){const _=document.querySelector("#FullTvPlayer #playback-button");_==null||_.focus();const b=document.querySelector("#FullTvPlayer #audio-visualizer");b==null||b.scrollIntoView({block:"center",inline:"center"})}};return(i,_)=>{var b,E,F,I,R,V,A,H,O;return s(),L("div",{id:"FullTvPlayer",style:D(`--color-focus: ${e(pe)(((E=(b=e(l))==null?void 0:b.color_palette)==null?void 0:E.backdrop)??((I=(F=e(l))==null?void 0:F.color_palette)==null?void 0:I.cover),20,160)}`),class:d(["absolute top-0 grid grid-cols-1 transform-gpu grid-rows-1 left-0 h-screen w-screen overflow-hidden transition-transform will-change-transform duration-500 z-[1299] bg-slate-dark-1",{"translate-y-0 duration-500":e(q),"translate-y-full":!e(q)}]),onClick:v},[(R=e(l))!=null&&R.backdrop?(s(),L("img",{key:0,src:`${(V=e(me))==null?void 0:V.serverBaseUrl}${(A=e(l))==null?void 0:A.backdrop}`,alt:"",class:d(["transform-gpu pointer-events-none inset-0 h-screen w-screen transition-opacity col-span-1 row-span-1",{"opacity-0":y.value,"opacity-100":!y.value}])},null,10,Qe)):g("",!0),a("div",{id:"audio-color",ref_key:"backdrop",ref:m,class:d(["absolute transform-gpu col-span-1 row-span-1 inset-0 w-full h-screen pointer-events-none bg-[var(--background)] opacity-[var(--backdrop-opacity)] transition-colors duration-1000",{"!opacity-70":e(u)}]),style:D(`
                --backdrop-opacity: 0.6;
                --select-background: rgb(var(--color-focus));
                --select-background2: black;
                --background: ${y.value?"var(--select-background2)":"var(--select-background)"};
            `)},null,6),a("div",Ge,[a("div",{"data-show-lyrics":e(u),class:"flex-col absolute inset-0 w-screen flex transition-all duration-200 delay:500 h-available overflow-clip pointer-events-none z-0"},[a("div",Ye,[a("div",Ze,[a("div",We,[(s(),c(ke,{key:(H=e(l))==null?void 0:H.id}))])])])],8,Je),a("div",{id:"item",ref_key:"item",ref:f,class:d(["absolute flex items-end gap-4 z-10 transform-gpu transition-all duration-500",{"top-11":e(u),"top-[calc(100%-18rem)] delay-300":!e(u)}])},[a("div",{"data-size":e(x),class:d(["",{"w-14":e(u),"w-28 delay-300":!e(u)}])},[t(G,{data:e(l),size:320,className:"pointer-events-none relative aspect-square h-auto rounded-md w-inherit"},null,8,["data"])],10,Xe),a("div",et,[a("span",{class:d(["",{"text-xl":e(u),"text-3xl delay-300":!e(u)}])},C((O=e(l))==null?void 0:O.name),3),e(l)?(s(),c(Me,{key:0,id:e(l).id,data:e(l).artist_track,tabindex:"-1",noLink:"",class:d([{"children:children:children:text-md":e(u),"children:children:children:text-lg children:children:children:delay-500":!e(u),"children:children:children:!no-underline":!0},"children:children:children:font-bold"]),type:"artists"},null,8,["id","data","class"])):g("",!0)])],2),a("div",{id:"controls",ref_key:"controls",ref:r,ontransitionend:W,class:"absolute bottom-0 left-0 flex flex-col w-available h-40 items-center px-16 pt-4 mt-4 gap-4 delay-300 transform-gpu transition-all duration-500"},[e(q)?(s(),c(ge,{key:0,class:"children:!mx-0 gap-4 children:!pointer-events-none !pointer-events-none",color:"white",onKeyDown:Z,variant:"stacked"})):g("",!0),t(Ke,{color:"white",data:e(l),toggleDarkMode:Y,isDarkMode:y.value},null,8,["data","isDarkMode"])],512)])],6)}}}),Mt=$({__name:"BaseLayout",setup(n){return(v,o)=>(s(),c(e(oe),{id:"main-content",mode:"md"},{default:p(()=>[t(e(le),{mode:"md"},{default:p(()=>[t(Ve),t(e(se),{animated:"false",class:"pointer-events-none children:pointer-events-auto"})]),_:1}),t(xe),e(l)?(s(),c(tt,{key:0})):g("",!0)]),_:1}))}});export{Mt as default};
