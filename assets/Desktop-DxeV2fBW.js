import{I as E,Z as H,l as v,w as _,a8 as T,es as m,et as p,a7 as b,a9 as V,aa as N,d as u,o as s,s as y,j as h,K as e,bu as j,c as L,b as z,a as g,n as F,a2 as w,a3 as x,F as P,h as O,bh as R,eu as W,ev as D,b1 as K}from"./index-C1DjUpiP.js";import{u as M}from"./useServerClient-BNYfM5AW.js";import{_ as Z,a as q,S as A,b as G}from"./TrackRow.vue_vue_type_script_setup_true_lang-COZ2MbZV.js";import{_ as J}from"./ScrollContainer.vue_vue_type_script_setup_true_lang-PwHXwbTN.js";import{_ as Q}from"./NotFound.vue_vue_type_script_setup_true_lang-DuXeR_wh.js";import"./useQuery-8YWJGe_9.js";import"./useBaseQuery-juBGMRNQ.js";import"./useQueryClient-OkkyraFc.js";import"./useInfiniteServerClient-ARVV4sGq.js";import"./BigPlayButton.vue_vue_type_script_setup_true_lang-Cd--g6SW.js";import"./PlayerIcon.vue_vue_type_script_setup_true_lang-Bs90e-24.js";import"./MusicButton.vue_vue_type_script_setup_true_lang-X1eBpCOY.js";import"./index-BZgGgbsZ.js";import"./index-BoXe2avd.js";import"./index-BqsC4e3Z.js";import"./index-kAUf1tII.js";import"./index-ZhWAdK_X.js";import"./OptimizedIcon.vue_vue_type_script_setup_true_lang-D4l8g0_V.js";import"./MediaLikeButton-C4LvEZhA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ShareButton.vue_vue_type_script_setup_true_lang-FY5fvgSx.js";import"./FavoriteImage.vue_vue_type_script_setup_true_lang-BUaqAHeE.js";import"./CoverImage.vue_vue_type_script_setup_true_lang-nw-ptjc7.js";import"./AppLogoSquare-DBIPgV3M.js";import"./contextMenuItems-BjWjf7WP.js";import"./musicPlaylists-DPgttUCi.js";import"./EqSpinner-BbIVusd0.js";import"./TrackLinks.vue_vue_type_script_setup_true_lang-DrIciJy4.js";import"./DropdownMenu.vue_vue_type_script_setup_true_lang-BFgnaa-p.js";import"./BannerButton.vue_vue_type_script_setup_true_lang-De6ww0Wv.js";import"./Marquee.vue_vue_type_script_setup_true_lang-DM9H6LSz.js";const U={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},Ee=E({__name:"Desktop",setup(X){const f=H(),{data:t,isError:B}=M({path:f.fullPath}),$=v(null),d=v(),r=v("");_(t,a=>{a&&(K(a?.name??null),c(a?.tracks??[],p.value,m.value,r.value),b(a?.color_palette?.cover))}),_(m,a=>{c(t.value?.tracks??[],p.value,a,r.value)}),_(p,a=>{c(t.value?.tracks??[],a,m.value,r.value)}),_(r,a=>{c(t.value?.tracks??[],p.value,m.value,a)});function c(a,i,l,n){const C=W(a??[],i,l,D);n===""?d.value=C:d.value=C?.filter(k=>k.name?.toLowerCase().includes(n?.toLowerCase?.())||k.artist_track?.some(I=>I.name.toLowerCase().includes(n?.toLowerCase?.()))||k.album_track?.[0]?.name.toLowerCase().includes(n?.toLowerCase?.()))??[]}T(()=>{t?.value?.tracks&&c(t?.value?.tracks??[],p.value,m.value,r.value),t.value?.color_palette?.cover&&b(t.value?.color_palette?.cover)}),V(()=>{document.getElementById("navbar")&&(document.getElementById("navbar").style.display="flex"),b(null),N(null)});const o=v();function S(){if(window.CSS.supports("container-type","scroll-state"))return;Math.ceil(o.value?.$el?.getBoundingClientRect()?.top??500)<=67?(o.value?.$el?.classList.add("!bg-focus"),o.value?.$el?.firstChild?.classList.add("!bg-black/50")):(o.value?.$el?.classList.remove("!bg-focus"),o.value?.$el?.firstChild?.classList.remove("!bg-black/50"))}return(a,i)=>(s(),u(e(R),null,{default:y(()=>[h(e(j),{fullscreen:!0,class:"flex"},{default:y(()=>[e(B)&&!e(t)?(s(),u(Q,{key:0})):(s(),u(J,{key:1,"auto-hide":!0,static:!0,onScroll:S},{default:y(()=>[!e(f).params.id||e(f).params.id&&e(t)?.id===e(f).params.id?(s(),L("div",{key:0,ref_key:"main",ref:$,class:"flex flex-col overflow-x-clip w-available h-available sm:rounded-2xl"},[h(Z,{data:e(t)},null,8,["data"]),g("div",U,[i[1]||(i[1]=g("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom bg-focus"},null,-1)),(s(),u(q,{key:e(t)?.id,data:e(t),filter:r.value,onFilterChange:i[0]||(i[0]=l=>r.value=l)},null,8,["data","filter"])),g("div",{class:F(["flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-slate-light-1 dark:bg-slate-dark-2 flex-grow-1 gap-0.5 sm:p-4",{"pb-24":e(w)&&!e(x),"pb-40":e(w)&&e(x),"pb-4 sm:pb-4":!e(w)&&e(x)}])},[(s(),u(A,{ref_key:"sortHeader",ref:o,key:e(t)?.id})),(s(!0),L(P,null,O(d.value,(l,n)=>(s(),u(G,{key:l.id+l?.favorite,data:l,"display-list":d.value,index:n},null,8,["data","display-list","index"]))),128))],2)])],512)):z("",!0)]),_:1}))]),_:1})]),_:1}))}});export{Ee as default};
