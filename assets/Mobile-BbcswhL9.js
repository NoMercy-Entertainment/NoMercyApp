import"./useBaseQuery-B_fAfs2I.js";import"./useInfiniteServerClient-Dr8AXyPd.js";import"./useQueryClient-m5mob28N.js";import"./useQuery-D6baOLAd.js";import{$a as P,Cs as _,Do as w,Gs as C,Is as p,Ls as d,Mc as h,Na as v,Ns as I,Oo as M,U as f,Us as S,_a as N,ac as m,ao as U,ca as B,da as D,fa as T,fs as n,gc as x,i as a,jc as i,ki as V,la as A,po as L,sa as s,vc as g,wc as j}from"./index-BwXdGvbc.js";import{s as c}from"./imageModal-BZMO9f_G.js";import{t as z}from"./useServerClient-BtQVoagd.js";import{i as O,n as E,o as F,r as G,s as R}from"./VideoPlayer-C3IGNqWE.js";import"./buttons-Dz19tni1.js";import{t as $}from"./videoNoMercyConnectPlugin-tuuofrJW.js";_();var q=C({__name:"Mobile",setup(H){const{data:u}=z({enabled:!s.value.features?.nomercyConnect}),e=j();function r(t){const l={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:t?.filter(o=>!!o.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:s.value?.accessToken||localStorage.getItem("access_token")||"",basePath:V.value?.serverBaseUrl,imageBasePath:"https://app.nomercy.tv/tmdb-images",forceTvMode:(n("android")||n("ios"))&&!n("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||n("capacitor"),renderAhead:100,disableAutoPlayback:s.value.features?.nomercyConnect};if(e.value=G("player1").setup(l),e.value?.once("back",()=>{history.state.back?a.back():a.replace("/")}),s.value.features?.nomercyConnect){const o=new $;e.value?.registerPlugin("videoNoMercyConnect",o),e.value?.usePlugin("videoNoMercyConnect")}const y=new O;e.value?.registerPlugin("desktopUI",y),e.value?.usePlugin("desktopUI");const b=new F;if(e.value?.registerPlugin("autoSkip",b),e.value?.usePlugin("autoSkip"),!s.value.features?.nomercyConnect){const o=new R;e.value?.registerPlugin("sync",o),e.value?.usePlugin("sync")}const k=new E;e.value?.registerPlugin("octopus",k),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?a.back():a.replace("/")}),e.value?.on("dispose",async()=>{await T(),await B(),history.state.back?a.back():await a.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{c(!0)}),e.value?.on("pause",()=>{c(!1)}),e.value?.on("ready",async()=>{await D(),await N(),await A(),f.stop()}),e.value?.on("item",()=>{e.value?.play()}),P.addListener("backButton",()=>{e.value?.emit("back-button-hyjack"),e.value?.dispose()})}return x(u,t=>{t?.length&&r(t)}),w(()=>{f.stop(),s.value.features?.nomercyConnect?r():u.value?.length&&r(u.value)}),M(()=>{e.value?.dispose(),c(!1)}),(t,l)=>(m(),d(i(L),null,{default:g(()=>[S(i(U),{fullscreen:!0},{default:g(()=>[(m(),d(I,{to:"body"},[p("div",{class:h([{"mb-28":i(v),"mb-0":!i(v)},"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"])},[...l[0]||(l[0]=[p("div",{id:"player1",class:"group nomercyplayer"},null,-1)])],2)]))]),_:1})]),_:1}))}}),te=q;export{te as default};
