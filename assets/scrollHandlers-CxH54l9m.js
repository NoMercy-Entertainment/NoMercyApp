import{Qr as u}from"./index-CyPt8zMH.js";var d=class{player;isMouseDown=!1;isScrubbing=!1;valuePercentage=0;dragPercentage=0;sliderBar={};sliderValue={};sliderNipple={};sliderHover={};targetElement;callbackFn;getSizeFn;constructor(e,t,i,s){this.player=t,this.targetElement=e,this.callbackFn=i,this.getSizeFn=s,this.targetElement&&(this.sliderBar=this.targetElement.querySelector(".slider-bar"),this.sliderValue=this.targetElement.querySelector(".slider-value"),this.sliderNipple=this.targetElement.querySelector(".slider-nipple"),this.sliderHover=this.targetElement.querySelector(".slider-hover"),!(!this.sliderBar||!this.sliderValue||!this.sliderNipple||!this.sliderHover)&&this.init())}getScrubTime(e,t){const i=t.getBoundingClientRect();let s=(("clientX"in e?e.clientX:void 0)??("touches"in e?e.touches?.[0]?.clientX:void 0)??("changedTouches"in e?e.changedTouches?.[0]?.clientX:void 0)??0)-i.left;s<=0&&(s=0),s>=i.width&&(s=i.width);let r=100;return this.getSizeFn&&typeof this.player[this.getSizeFn]=="function"&&(r=this.player[this.getSizeFn]()),{scrubValue:s/t.offsetWidth*100,scrubValuePlayer:s/t.offsetWidth*r}}handleMouseDown(){this.isMouseDown=!0}handleMouseUp(e){this.isMouseDown=!1,this.isScrubbing=!1,this.sliderNipple.style.removeProperty("--force-left"),this.sliderValue.style.removeProperty("--force-width");const t=this.getScrubTime(e,this.sliderBar);typeof this.player[this.callbackFn]=="function"&&this.player[this.callbackFn](t.scrubValuePlayer)}handleMouseMove(e){const t=this.getScrubTime(e,this.sliderBar);this.isMouseDown&&(this.sliderNipple.style.setProperty("--force-left",`${t.scrubValue}%`),this.sliderValue.style.setProperty("--force-width",`${t.scrubValue}%`),this.valuePercentage=t.scrubValue,typeof this.player[this.callbackFn]=="function"&&!this.getSizeFn&&this.player[this.callbackFn](t.scrubValue)),this.dragPercentage=Math.round(t.scrubValue),this.sliderHover.style.width=`${t.scrubValue}%`}handleMouseEnter(){this.sliderNipple.style.display="flex"}handleMouseLeave(){this.isScrubbing=!1,this.isMouseDown=!1,this.sliderNipple.style.removeProperty("--force-left"),this.sliderValue.style.removeProperty("--force-width"),this.sliderNipple.style.display="",this.sliderHover.style.width="0"}handleTouchStart(){this.isMouseDown=!0,this.sliderNipple.style.display="flex"}handleTouchMove(e){if(this.isMouseDown){this.isScrubbing=!0;const t=this.getScrubTime(e,this.sliderBar);this.sliderNipple.style.setProperty("--force-left",`${t.scrubValue}%`),this.sliderValue.style.setProperty("--force-width",`${t.scrubValue}%`),typeof this.player[this.callbackFn]=="function"&&this.player[this.callbackFn](t.scrubValuePlayer)}}handleTouchEnd(e){this.isMouseDown=!1,this.isScrubbing=!1,this.sliderNipple.style.display="",this.sliderNipple.style.removeProperty("--force-left"),this.sliderValue.style.removeProperty("--force-width");const t=this.getScrubTime(e,this.sliderBar);typeof this.player[this.callbackFn]=="function"&&this.player[this.callbackFn](t.scrubValuePlayer)}init(){this.sliderBar.addEventListener("mousedown",this.handleMouseDown.bind(this)),this.sliderBar.addEventListener("mouseup",this.handleMouseUp.bind(this)),this.sliderBar.addEventListener("mousemove",this.handleMouseMove.bind(this)),this.sliderBar.addEventListener("mouseenter",this.handleMouseEnter.bind(this)),this.sliderBar.addEventListener("mouseleave",this.handleMouseLeave.bind(this)),this.sliderBar.addEventListener("touchstart",this.handleTouchStart.bind(this)),this.sliderBar.addEventListener("touchmove",this.handleTouchMove.bind(this)),this.sliderBar.addEventListener("touchend",this.handleTouchEnd.bind(this))}};HTMLElement.prototype.sliderBar=function(e,t,i){return!(this instanceof HTMLElement)||this.dataset.type!=="slider-bar"?null:new d(this,e,t,i)};HTMLElement.prototype.scrollHorizontalIntoView=function(e){if(!(this instanceof HTMLElement))return;const t=this.getBoundingClientRect(),i=e??this.parentElement;if(!i)return;const s=t.left-i.getBoundingClientRect().left;i.scrollTo({left:s,behavior:"smooth"})};HTMLElement.prototype.scrollVerticalIntoView=function(e){if(!(this instanceof HTMLElement))return;const t=this.getBoundingClientRect(),i=e??this.parentElement;if(!i)return;const s=t.top-i.getBoundingClientRect().top;i.scrollTo({top:s,behavior:"smooth"})};HTMLElement.prototype.animateVerticalIntoView=function(e=null,t=420){if(!(this instanceof HTMLElement))return;const i=this.getBoundingClientRect();if(e||(e=this.parentElement),!e)return;const s=i.top-e.getBoundingClientRect().top-e.getBoundingClientRect().height/2,r=performance.now(),c=e.scrollTop;function n(h){if(!e)return;const o=h-r;let l=Math.min(o/t,1);l=p(l),e.scrollTo(0,c+s*l),o<t&&requestAnimationFrame(n)}requestAnimationFrame(n)};HTMLElement.prototype.isVisible=function(e){if(!this)return!1;const t=this.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(e?.offsetHeight||document.documentElement.clientHeight)&&t.right<=(e?.offsetWidth||document.documentElement.clientWidth)};Document.prototype.querySelectorAllArray=function(e){return Array.from(this.querySelectorAll(e))};Element.prototype.querySelectorAllArray=function(e){return Array.from(this.querySelectorAll(e))};HTMLElement.prototype.querySelectorAllArray=function(e){return Array.from(this.querySelectorAll(e))};function p(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1}var a;function f(e){clearTimeout(a);let t=null;e==="#"?t=document.querySelector("ion-tabs ion-router-outlet div.ion-page:not(.ion-page-hidden) [data-scroll]"):t=document.querySelector(`ion-tabs ion-router-outlet div.ion-page:not(.ion-page-hidden) [data-scroll='scroll_${e}']`),document.dispatchEvent(new CustomEvent("scrollToDiv",{detail:{top:t?.offsetTop}}));let i=document.querySelector(".ion-page:not(.ion-page-hidden) main .group\\/scrollContainer");i||(i=document.querySelector(".ion-page:not(.ion-page-hidden) ion-content .scroll-container")),t&&i&&(i.scrollTo({top:t.offsetTop-120,behavior:"smooth"}),a=setTimeout(()=>{t?.classList.add("flashing"),setTimeout(()=>{t?.classList.remove("flashing")},3e3)},700))}function m(e){if(e.key&&u("#","Z").includes(e.key.toUpperCase())){const t=e.key?.toUpperCase();f(t),document.dispatchEvent(new CustomEvent("scrollToLetter",{detail:{letter:t}}))}}export{f as n,m as t};
