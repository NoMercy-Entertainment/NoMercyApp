import{Bt as q,Gt as g,I,Ln as r,M as A,Mt as R,Rn as T,Rt as s,T as V,Tt as $,Vt as L,an as N,cn as n,i as P,kn as p,mt as j,qt as E,u as O,un as G,xn as S,yn as _,zt as x}from"./index-BvWvvCYJ.js";import"./dist-BihaqBnv.js";import"./esm-DfDPtva3.js";import"./esm-BqAMc7kU.js";import"./dist-V4VIRk0I.js";import"./focus-visible-BIx781Si.js";import"./index5-BzLuPScY.js";import"./client-CpuErVxZ.js";import"./ionic-global-CJmx_-hb.js";import"./hardware-back-button-B_o37u13.js";import"./index3-G0l1u6i6.js";import"./helpers-DowMkPjD.js";import"./index6-izL1HMLp.js";import"./index8-C7t1VdhY.js";import"./keyboard-DgjSUzE9.js";import"./index2-DPECLsCu.js";import"./ios.transition-DhveEC6M.js";import"./keyboard2-B9XnMMBK.js";import"./md.transition-BBFMewM_.js";import"./dir-t1mBJu83.js";import"./basecomponent-CLBkg3Xa.js";import"./classnames-C7QsyfAI.js";import"./button-BUY3bwi9.js";import"./baseicon-DozKd0E1.js";import"./times-DrBq9qa0.js";import{l as W,m as c,o as y,p as d}from"./ui-Dy-CmVFO.js";import"./client-Cg1KDvig.js";import{v as D,x as J}from"./currentServer-WcAeFY_n.js";import"./config-BZ-AEJ_J.js";import"./core-B2UrLovc.js";import"./esm-BmSfvbpt.js";import"./global-BWQ-eDb8.js";import"./esm-B0CTWw_3.js";import"./bundle-mjs-D4lrAgGd.js";import"./user-UVXKBmDM.js";import"./serverClient-BAqmq0Lj.js";import{t as K}from"./router-B1ISlAzM.js";import"./utils-CG-VUeeR.js";import"./useBaseQuery-CObiDOM4.js";import"./useInfiniteServerClient-C-13EaEr.js";import"./SocketClient-C4CiAzV3.js";import"./useQueryClient-Do_6BzeG.js";import"./useQuery-DwL9nltn.js";import"./apiClient--wowvE-1.js";import"./notifications-BlOU5FHA.js";import"./utils-TI96o6zm.js";import"./deviceInfo-a8a7PneO.js";import"./auth-MTzvpPik.js";import"./musicPlaylists-DBeSgbAD.js";import"./esm-C__ta2Q1.js";import"./contextMenuItems-Dm_tonIs.js";import"./_plugin-vue_export-helper-pDp7unP0.js";import"./AppLogoSquare-DrkhevvD.js";import{t as Q}from"./MoooomIcon-BaTKWN1R.js";import"./DropdownMenu-uuiJrLjr.js";import"./dist-BA3H0wD6.js";import"./fileupload-BB9Gc9-2.js";import{t as U}from"./useServerClient-DLV471Yh.js";import"./Button-4dOHt061.js";import"./CoverImage-Dcotlph_.js";import"./MusicButton-WvYGsZnu.js";import"./BannerButton-DrF0SOAC.js";import"./MediaLikeButton-LpjfSxPp.js";import"./PlayerIcon-DHzEBluf.js";import{t as X}from"./Marquee-JsocpyZ2.js";import"./Modal-DkbMeIf6.js";import"./BigPlayButton-Da9n5hsl.js";import"./EqSpinner-CMcZqmXk.js";import{t as Y}from"./NotFound-C7A9PjW_.js";import"./ShareButton-DbHT1Br7.js";import"./ClickUploadModal-BcwFWNXG.js";import{i as Z,n as tt,r as et,t as rt}from"./TrackRow-D06M41ic.js";$();A();var ot={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},at={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},lt=E({__name:"Mobile",setup(it){const k=I(),{data:t,isError:B}=U({path:k.fullPath}),z=p(null),b=p(),i=p("");_(t,e=>{D(e?.name??null),u(e?.tracks??[],c.value,d.value,i.value),y(e?.color_palette?.cover)}),_(d,e=>{u(t.value?.tracks??[],c.value,e,i.value)}),_(c,e=>{u(t.value?.tracks??[],e,d.value,i.value)}),_(i,e=>{u(t.value?.tracks??[],c.value,d.value,e)});function u(e,a,l,o){const C=J(e??[],a,l,W);o===""?b.value=C:b.value=C?.filter(w=>w.name?.toLowerCase().includes(o?.toLowerCase?.())||w.artist_track?.some(F=>F.name.toLowerCase().includes(o?.toLowerCase?.()))||w.album_track?.[0]?.name.toLowerCase().includes(o?.toLowerCase?.()))??[]}N(()=>{u(t?.value?.tracks??[],c.value,d.value,i.value),t.value?.color_palette?.cover&&y(t.value?.color_palette?.cover)}),V(()=>{u(t?.value?.tracks??[],c.value,d.value,i.value),t.value?.color_palette?.cover&&y(t.value?.color_palette?.cover)});function H(){K.back()}const f=p(!1),M=p(!1),m=p(),h=p();function v(){const l=j("capacitor")?88:64,o=m.value?.$el?.getBoundingClientRect().top;if(!o){requestAnimationFrame(v);return}if(f.value=o<=170,M.value=o<=160,window.CSS.supports("container-type","scroll-state")){requestAnimationFrame(v);return}o===l?(m.value?.$el?.classList.add("!bg-focus"),m.value?.$el?.firstChild?.classList.add("!bg-surface-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")):(m.value?.$el?.classList.remove("!bg-focus"),m.value?.$el?.firstChild?.classList.remove("!bg-surface-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")),requestAnimationFrame(v)}return _(h,()=>{requestAnimationFrame(v)}),(e,a)=>(n(),x(r(O),null,{default:S(()=>[g(r(P),{ref_key:"container",ref:h,"scroll-events":!0,onIonScroll:v},{default:S(()=>[r(B)&&!r(t)?(n(),x(Y,{key:0})):!r(k).params.id||r(k).params.id&&r(t)?.id===r(k).params.id?(n(),L("div",{key:1,ref_key:"main",ref:z,class:"flex flex-col h-auto overflow-x-clip w-available sm:rounded-2xl -mt-6 text-surface-12"},[g(et,{data:r(t)},null,8,["data"]),s("div",ot,[a[2]||(a[2]=s("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),s("div",{id:"navbar",class:T([{"opacity-0 pointer-events-none":!f.value,"opacity-100 pointer-events-auto":f.value},"fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-surface-11 dark:bg-surface-1 top-0 pt-4 transition-all duration-200"])},[a[1]||(a[1]=s("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-all duration-200 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),s("button",{class:"z-30 flex h-10 w-11 items-center justify-center rounded-md",onClick:H},[g(Q,{icon:"arrowLeft"})]),s("div",{id:"navText",class:T([{"opacity-0 pointer-events-none":!f.value,"opacity-100 pointer-events-auto":f.value},"pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-all duration-200 w-[70%] overflow-clip text-xl"])},[g(X,{text:r(t)?.name},null,8,["text"])],2)],2),(n(),x(Z,{key:r(t)?.id,data:r(t),filter:i.value,onFilterChange:a[0]||(a[0]=l=>i.value=l)},null,8,["data","filter"])),s("div",at,[(n(),x(tt,{key:r(t)?.id,ref_key:"sortHeader",ref:m})),(n(!0),L(R,null,G(b.value,(l,o)=>(n(),x(rt,{key:l.id+l?.favorite,data:l,"display-list":b.value,index:o},null,8,["data","display-list","index"]))),128))])])],512)):q("",!0)]),_:1},512)]),_:1}))}}),Te=lt;export{Te as default};
