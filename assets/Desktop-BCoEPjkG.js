import{I as F,Y as P,l as B,w as $,a6 as O,eq as x,er as C,a5 as v,a7 as R,a8 as W,d as f,o as n,s as S,j as T,K as a,bu as q,c as V,b as D,a as I,n as K,a0 as E,a1 as H,F as M,h as Y,bh as A,es as G,et as J,b1 as Q}from"./index-DkQngsHe.js";import{u as U}from"./useServerClient-CmW8VHrx.js";import{_ as X,a as Z,S as tt,b as et}from"./TrackRow.vue_vue_type_script_setup_true_lang-D1vrghqf.js";import{_ as st}from"./ScrollContainer.vue_vue_type_script_setup_true_lang-BJWiF2I-.js";import{_ as rt}from"./NotFound.vue_vue_type_script_setup_true_lang-D7Xgb4hO.js";import"./useQuery-jTNaBwZN.js";import"./useBaseQuery-BnGe7Aaf.js";import"./useQueryClient-Cy1MABnp.js";import"./useInfiniteServerClient-BHsBwDbE.js";import"./BigPlayButton.vue_vue_type_script_setup_true_lang-BhUmknNF.js";import"./PlayerIcon.vue_vue_type_script_setup_true_lang-BYcO35Xt.js";import"./MusicButton.vue_vue_type_script_setup_true_lang-BSFDDcuJ.js";import"./index-Czi9s18M.js";import"./index-MemSO8RC.js";import"./index-Be1fzYNM.js";import"./index-CE67H0ZO.js";import"./index-DHTGByx4.js";import"./OptimizedIcon.vue_vue_type_script_setup_true_lang-BBYVQkaB.js";import"./MediaLikeButton-qW9HjHDP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ShareButton.vue_vue_type_script_setup_true_lang-CswGJJ8e.js";import"./FavoriteImage.vue_vue_type_script_setup_true_lang--vOIkmJ_.js";import"./CoverImage.vue_vue_type_script_setup_true_lang-Duqr3qgR.js";import"./AppLogoSquare-BLQmk_bo.js";import"./contextMenuItems-C4wnSRb1.js";import"./musicPlaylists-DnxyARx3.js";import"./EqSpinner-DGlgJ3zO.js";import"./TrackLinks.vue_vue_type_script_setup_true_lang-BMoXOEK9.js";import"./DropdownMenu.vue_vue_type_script_setup_true_lang-CbVkv6zR.js";import"./BannerButton.vue_vue_type_script_setup_true_lang-DBTfQ9IU.js";import"./Marquee.vue_vue_type_script_setup_true_lang-0jCkqxoC.js";const at={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},Ft=F({__name:"Desktop",setup(ot){const h=P(),{data:r,isError:N}=U({path:h.fullPath}),j=B(null),w=B(),c=B("");$(r,s=>{var e;s&&(Q((s==null?void 0:s.name)??null),d((s==null?void 0:s.tracks)??[],C.value,x.value,c.value),v((e=s==null?void 0:s.color_palette)==null?void 0:e.cover))}),$(x,s=>{var e;d(((e=r.value)==null?void 0:e.tracks)??[],C.value,s,c.value)}),$(C,s=>{var e;d(((e=r.value)==null?void 0:e.tracks)??[],s,x.value,c.value)}),$(c,s=>{var e;d(((e=r.value)==null?void 0:e.tracks)??[],C.value,x.value,s)});function d(s,e,i,t){const l=G(s??[],e,i,J);t===""?w.value=l:w.value=(l==null?void 0:l.filter(o=>{var m,u,_,k,b,y;return((u=o.name)==null?void 0:u.toLowerCase().includes((m=t==null?void 0:t.toLowerCase)==null?void 0:m.call(t)))||((_=o.artist_track)==null?void 0:_.some(L=>{var g;return L.name.toLowerCase().includes((g=t==null?void 0:t.toLowerCase)==null?void 0:g.call(t))}))||((y=(k=o.album_track)==null?void 0:k[0])==null?void 0:y.name.toLowerCase().includes((b=t==null?void 0:t.toLowerCase)==null?void 0:b.call(t)))}))??[]}O(()=>{var s,e,i,t,l,o;(s=r==null?void 0:r.value)!=null&&s.tracks&&d(((e=r==null?void 0:r.value)==null?void 0:e.tracks)??[],C.value,x.value,c.value),(t=(i=r.value)==null?void 0:i.color_palette)!=null&&t.cover&&v((o=(l=r.value)==null?void 0:l.color_palette)==null?void 0:o.cover)}),R(()=>{document.getElementById("navbar")&&(document.getElementById("navbar").style.display="flex"),v(null),W(null)});const p=B();function z(){var e,i,t,l,o,m,u,_,k,b,y,L,g;if(window.CSS.supports("container-type","scroll-state"))return;Math.ceil(((t=(i=(e=p.value)==null?void 0:e.$el)==null?void 0:i.getBoundingClientRect())==null?void 0:t.top)??500)<=67?((o=(l=p.value)==null?void 0:l.$el)==null||o.classList.add("!bg-focus"),(_=(u=(m=p.value)==null?void 0:m.$el)==null?void 0:u.firstChild)==null||_.classList.add("!bg-black/50")):((b=(k=p.value)==null?void 0:k.$el)==null||b.classList.remove("!bg-focus"),(g=(L=(y=p.value)==null?void 0:y.$el)==null?void 0:L.firstChild)==null||g.classList.remove("!bg-black/50"))}return(s,e)=>(n(),f(a(A),null,{default:S(()=>[T(a(q),{fullscreen:!0,class:"flex"},{default:S(()=>[a(N)&&!a(r)?(n(),f(rt,{key:0})):(n(),f(st,{key:1,"auto-hide":!0,static:!0,onScroll:z},{default:S(()=>{var i,t,l;return[!a(h).params.id||a(h).params.id&&((i=a(r))==null?void 0:i.id)===a(h).params.id?(n(),V("div",{key:0,ref_key:"main",ref:j,class:"flex flex-col overflow-x-clip w-available h-available sm:rounded-2xl"},[T(X,{data:a(r)},null,8,["data"]),I("div",at,[e[1]||(e[1]=I("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom bg-focus"},null,-1)),(n(),f(Z,{key:(t=a(r))==null?void 0:t.id,data:a(r),filter:c.value,onFilterChange:e[0]||(e[0]=o=>c.value=o)},null,8,["data","filter"])),I("div",{class:K(["flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-slate-light-1 dark:bg-slate-dark-2 flex-grow-1 gap-0.5 sm:p-4",{"pb-24":a(E)&&!a(H),"pb-40":a(E)&&a(H),"pb-4 sm:pb-4":!a(E)&&a(H)}])},[(n(),f(tt,{ref_key:"sortHeader",ref:p,key:(l=a(r))==null?void 0:l.id})),(n(!0),V(M,null,Y(w.value,(o,m)=>(n(),f(et,{key:o.id+(o==null?void 0:o.favorite),data:o,"display-list":w.value,index:m},null,8,["data","display-list","index"]))),128))],2)])],512)):D("",!0)]}),_:1}))]),_:1})]),_:1}))}});export{Ft as default};
