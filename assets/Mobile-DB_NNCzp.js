import{C as g,Dt as k,Et as r,K as y,S as n,U as _,Y as P,_t as w,c as h,j as S,st as C,y as M}from"./i18n-DBb78QAI.js";import{qi as l}from"./ionic-DNKsarlx.js";import"./vue-core-C9HAaO_1.js";import"./query-Dwz_k4KB.js";import{$t as U,Ea as B,Ki as c,Kt as I,Qi as T,Qt as x,Ut as D,W as p,k as a,ln as A,qt as K,s as o}from"./index-A9ZXfM_l.js";import"./useInfiniteServerClient-CfrVy_UX.js";import{t as j}from"./useServerClient-D7utCp4C.js";import{a as q,i as z,n as E,o as L,r as N}from"./VideoPlayer-DtMMTca2.js";import"./buttons-DCxuLQcY.js";h();var Q=S({__name:"Mobile",setup(F){const{data:i}=j({}),e=w();function u(t){const s={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:t?.filter(b=>!!b.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:B.value?.accessToken||localStorage.getItem("access_token")||"",basePath:T.value?.serverBaseUrl,imageBasePath:"https://app.nomercy.tv/tmdb-images",forceTvMode:(l("android")||l("ios"))&&!l("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||l("capacitor"),renderAhead:100};e.value=N("player1").setup(s),e.value?.once("back",()=>{history.state.back?a.back():a.replace("/")});const d=new z;e.value?.registerPlugin("desktopUI",d),e.value?.usePlugin("desktopUI");const v=new q;e.value?.registerPlugin("autoSkip",v),e.value?.usePlugin("autoSkip");const m=new L;e.value?.registerPlugin("sync",m),e.value?.usePlugin("sync");const f=new E;e.value?.registerPlugin("octopus",f),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?a.back():a.replace("/")}),e.value?.on("dispose",async()=>{await U(),await I(),history.state.back?a.back():await a.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{o(!0)}),e.value?.on("pause",()=>{o(!1)}),e.value?.on("ready",async()=>{await x(),await A(),await K(),p.stop()}),e.value?.on("item",()=>{e.value?.play()}),D.addListener("backButton",()=>{e.value?.emit("back-button-hyjack"),e.value?.dispose()})}return C(i,t=>{t?.length&&u(t)}),y(()=>{p.stop(),u(i.value)}),_(()=>{e.value?.dispose(),o(!1)}),(t,s)=>(P(),g(M,{to:"body"},[n("div",{class:k([{"mb-28":r(c),"mb-0":!r(c)},"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"])},[...s[0]||(s[0]=[n("div",{id:"player1",class:"group nomercyplayer"},null,-1)])],2)]))}}),X=Q;export{X as default};
