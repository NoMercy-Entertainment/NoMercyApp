import{I as ae,du as me,f as y,d as X,o as v,s,a as n,t as b,j as a,q as g,O as ve,dv as ee,$ as fe,l as d,w as L,E as G,c as V,b as H,K as le,F as J,h as W}from"./index-H-vD2rqS.js";import{u as oe}from"./useServerClient-DCS4BGnu.js";import{u as be}from"./useQueryClient-B5STIjF7.js";import{_ as _e}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-DuAJYD1Y.js";import"./useQuery-C5_JtCKV.js";import"./useBaseQuery-x8hgGQVw.js";import"./useInfiniteServerClient-B-2LPPx2.js";import"./useMounted-Dveo4ZJ5.js";import"./HubConnection-CMQnVIkW.js";import"./FloatingBackButton.vue_vue_type_script_setup_true_lang-Dccf_qNw.js";import"./OptimizedIcon.vue_vue_type_script_setup_true_lang-CX14zQZK.js";import"./Button.vue_vue_type_script_setup_true_lang-Cx9uFmF_.js";import"./ScrollContainer.vue_vue_type_script_setup_true_lang-OA0oELVZ.js";import"./RipperOverlay.vue_vue_type_script_setup_true_lang-BgPrKIqK.js";import"./ripperSocket-VzNd0LM5.js";const Ve={class:"my-6 text-sm text-auto-10"},ye=ae({__name:"DeleteEncoderProfileModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},name:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},setup(C){const w=C,k=be(),q=me();function h(){ve().delete(`dashboard/encoderprofiles/${w.id}`).then(({data:t})=>{q.add({severity:t.status==="ok"?"success":"error",summary:ee(t.status==="ok"?"Success":"Error"),detail:ee(t.message,...t.args??[]),life:5e3}),k.invalidateQueries({queryKey:["dashboard","encoderProfiles"]}),!w.noRedirect&&window.history.back()}),w.close()}return(t,N)=>{const A=y("Button"),R=y("Modal");return v(),X(R,{close:C.close,open:C.open,"max-width":"max-w-xl",params:{profile:w.name},title:"Delete encoder profile {{profile}}"},{actions:s(()=>[a(A,{id:"yes",onclick:h,"end-icon":"trash",color:"red",type:"button",variant:"contained"},{default:s(()=>[g(b(t.$t("Delete")),1)]),_:1}),a(A,{id:"no",onclick:C.close,type:"button",color:"auto-alpha",variant:"text"},{default:s(()=>[g(b(t.$t("Cancel")),1)]),_:1},8,["onclick"])]),default:s(()=>[n("div",Ve,b(t.$t("Are you sure you want to delete this encoder profile?")),1)]),_:1},8,["close","open","params"])}}}),ge={class:"block whitespace-nowrap text-sm font-medium"},we={key:0,class:"grid w-full grid-cols-12 gap-4"},he={key:1,class:"flex w-full flex-col"},Pe={class:"flex w-full justify-between"},$e={class:"block whitespace-nowrap text-sm font-medium"},Ce={class:"grid h-auto w-full grid-cols-8 flex-wrap gap-2"},ke=["for"],Ue=["for"],Se=["for"],Le=["for"],Ne=["for"],Ae=["for"],Be=["for"],qe=["for"],Re=["for"],De={class:"flex w-full justify-between"},Fe={class:"mt-2 block whitespace-nowrap text-sm font-medium"},Me={class:"grid h-auto w-full grid-cols-8 flex-wrap gap-2"},Te=["for"],Ee=["for"],Ie={class:"flex w-full justify-between"},je={class:"mt-2 block whitespace-nowrap text-sm font-medium"},Ke={class:"grid h-auto w-full grid-cols-8 flex-wrap gap-2"},Oe=["for"],sl=ae({__name:"Edit",setup(C){const w=fe(),{data:k,error:q}=oe({path:"dashboard/encoderProfiles",queryKey:["dashboard","encoderProfiles"]}),{data:h}=oe({path:"dashboard/encoderProfiles/containers",queryKey:["dashboard","videoContainers"]}),t=d();L(k,o=>{o&&(t.value=o.find(e=>e.id===w.params.id))}),G(()=>{k.value&&(t.value=k.value.find(o=>o.id===w.params.id))});const N=d(!1),A=()=>{N.value=!0},R=()=>{N.value=!1},te=()=>{window.history.back()},se=()=>{},U=d([{label:"audio",value:"audio"},{label:"video",value:"video"},{label:"image",value:"image"}]),D=d(t.value?.name),S=d(U.value?.find(o=>o.value===t.value?.type)),p=d(h.value?.find(o=>o.type===t.value?.type)),m=d([]),F=d([]),M=d([]),T=d([]),ne=d([]),E=d([]),I=d([]),B=d([]),j=d([]),K=d([]),O=d([]),P=d([]),Q=d([]),$=d([]),z=d([]),ue=()=>{m.value.push({})},ie=()=>{P.value.push({})},de=()=>{$.value.push({})},re=o=>{m.value.splice(o,1)},ce=o=>{P.value.splice(o,1)},pe=o=>{$.value.splice(o,1)};G(()=>{S.value=U.value.find(o=>o.value===t.value?.type),p.value=h.value?.find(o=>o.type===t.value?.type)}),L(t,o=>{o&&(D.value=o.name)}),L(h,o=>{o&&(p.value=o.find(e=>e.value===t.value.container))});const Y=o=>{o&&(console.raw("container",o,U.value),S.value=U.value.find(e=>e.value===o.type),m.value=t.value.videoProfiles?.map(e=>o.available_video_codecs.find(u=>u.value===e.codec))??[],P.value=t.value.audioProfiles?.map(e=>o.available_audio_codecs.find(u=>u.value===e.codec))??[],$.value=t.value.subtitleProfiles?.map(e=>o.available_subtitle_codecs.find(u=>u.value===e.codec))??[],F.value=t.value.videoProfiles?.map(e=>o.available_resolutions.find(u=>u.width===e.width))??[],M.value=t.value.videoProfiles.map(e=>m.value.find(u=>u.value===e.codec)?.color_spaces.find(u=>u.value===e.colorSpace)),E.value=t.value.videoProfiles.map(e=>m.value.find(u=>u.value===e.codec)?.tunes.find(u=>u.value===e.tune)),I.value=t.value.videoProfiles.map(e=>m.value.find(u=>u.value===e.codec)?.profiles.find(u=>u.value===e.profile)),B.value=t.value.videoProfiles.map(e=>m.value.find(u=>u.value===e.codec)?.presets.find(u=>u.value===e.preset)),console.log("presets",B.value),z.value=P.value.map(e=>e?.available_languages??[]),Q.value=$.value.map(e=>e?.available_languages??[]),T.value=t.value.videoProfiles?.map(e=>e.crf)??[],O.value=t.value.videoProfiles?.map(e=>e.bitrate)??[],j.value=t.value.videoProfiles?.map(e=>e.playlistName)??[],K.value=t.value.videoProfiles?.map(e=>e.segmentName)??[],ne.value=t.value.videoProfiles?.map(e=>e.width)??[])};return L(p,Y),G(()=>{Y(p.value),p.value=h.value?.find(o=>o.value===t.value.container)}),L(m,o=>{o&&console.log("videoCodecs",o)}),(o,e)=>{const u=y("InputText"),r=y("FloatLabel"),f=y("Select"),_=y("Button"),Z=y("InputNumber"),x=y("MultiSelect");return v(),X(_e,{gridStyle:4,error:le(q),title:"Encoder profile: {{name}}",params:{name:t.value?.name}},{cta:s(()=>[...e[3]||(e[3]=[])]),actions:s(()=>[a(_,{type:"button",id:"remove",variant:"text",class:"children:text-gray-400 children:transition-colors children:duration-100 children:hover:text-red-dark-8",color:"auto-alpha",startIcon:"folderRemove",onClick:A},{default:s(()=>[g(b(o.$t("Remove")),1)]),_:1}),a(_,{type:"button",id:"cancel",variant:"text",color:"white",onClick:te},{default:s(()=>[g(b(o.$t("Cancel")),1)]),_:1}),a(_,{type:"submit",id:"save",color:"theme",class:"ml-auto",form:"myForm",onClick:se},{default:s(()=>[g(b(o.$t("Save")),1)]),_:1})]),default:s(()=>[n("span",ge,b(o.$t("Profiles settings")),1),t.value?(v(),V("div",we,[a(r,{variant:"on",class:"col-span-3"},{default:s(()=>[a(u,{modelValue:D.value,"onUpdate:modelValue":e[0]||(e[0]=c=>D.value=c),id:"name",name:"Name",class:"w-full"},null,8,["modelValue"]),e[4]||(e[4]=n("label",{for:"name"},"Name",-1))]),_:1}),a(r,{variant:"on",class:"col-span-2"},{default:s(()=>[a(f,{modelValue:S.value,"onUpdate:modelValue":e[1]||(e[1]=c=>S.value=c),id:"type",class:"w-full",options:U.value,optionLabel:"label"},null,8,["modelValue","options"]),e[5]||(e[5]=n("label",{for:"type"},"Media type",-1))]),_:1}),a(r,{variant:"on",class:"col-span-2"},{default:s(()=>[a(f,{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=c=>p.value=c),id:"container",class:"w-full",options:le(h)?.filter(c=>c.type===S.value?.value)??[],optionLabel:"label"},null,8,["modelValue","options"]),e[6]||(e[6]=n("label",{for:"container"},"Container",-1))]),_:1})])):H("",!0),t.value?(v(),V("div",he,[n("div",Pe,[n("span",$e,b(o.$t("Video Profiles")),1),a(_,{type:"button",onClick:ue,id:"addVideoProfile"},{default:s(()=>[...e[7]||(e[7]=[g("Add Video Profile",-1)])]),_:1})]),(v(!0),V(J,null,W(m.value,(c,l)=>(v(),V("div",{key:l,class:"m-2 mt-2 ml-0 flex w-full rounded-md border-white/5 p-4 border-1 odd:bg-auto-1/5 even:bg-auto-2/2"},[n("div",Ce,[a(r,{variant:"on",class:"col-span-2"},{default:s(()=>[a(f,{id:`videoProfiles_${l}`,label:"Codec",class:"col-span-2",modelValue:m.value[l],"onUpdate:modelValue":i=>m.value[l]=i,optionLabel:"label",options:p.value?.available_video_codecs??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),n("label",{for:`videoProfiles_${l}`},"Codec",8,ke)]),_:2},1024),a(r,{variant:"on",class:"col-span-2"},{default:s(()=>[a(f,{id:`resolutions_${l}`,label:"Resolution",class:"col-span-2",modelValue:F.value[l],"onUpdate:modelValue":i=>F.value[l]=i,optionLabel:"name",options:p.value?.available_resolutions??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),n("label",{for:`resolutions_${l}`},"Resolution",8,Ue)]),_:2},1024),a(r,{variant:"on",class:"col-span-2"},{default:s(()=>[a(f,{id:`colorSpaces_${l}`,class:"col-span-2",modelValue:M.value[l],"onUpdate:modelValue":i=>M.value[l]=i,optionLabel:"label",options:c?.color_spaces??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),n("label",{for:`colorSpaces_${l}`},"Colorspace",8,Se)]),_:2},1024),a(r,{variant:"on",class:"col-span-2"},{default:s(()=>[a(f,{id:`profiles_${l}`,l:"",class:"col-span-2",modelValue:I.value[l],"onUpdate:modelValue":i=>I.value[l]=i,optionLabel:"label",options:c?.profiles??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),n("label",{for:`profiles_${l}`},"Profile",8,Le)]),_:2},1024),a(r,{variant:"on",class:"col-span-2"},{default:s(()=>[a(f,{id:`presets_${l}`,l:"",class:"col-span-2",modelValue:B.value[l],"onUpdate:modelValue":i=>B.value[l]=i,optionLabel:"label",options:c?.presets??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),n("label",{for:`presets_${l}`},"Preset",8,Ne)]),_:2},1024),a(r,{variant:"on",class:"col-span-2"},{default:s(()=>[a(f,{id:`tunes_${l}`,class:"col-span-2",modelValue:E.value[l],"onUpdate:modelValue":i=>E.value[l]=i,optionLabel:"label",options:c?.tunes??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),e[8]||(e[8]=n("label",{for:"`tunes_${index}`"},"Tune",-1))]),_:2},1024),a(r,{variant:"on",class:"col-span-2"},{default:s(()=>[a(Z,{id:`crfs_${l}`,type:"number",min:0,max:51,class:"w-full",modelValue:T.value[l],"onUpdate:modelValue":i=>T.value[l]=i},null,8,["id","modelValue","onUpdate:modelValue"]),n("label",{for:`crfs_${l}`},"CRF",8,Ae)]),_:2},1024),a(r,{variant:"on",class:"col-span-2"},{default:s(()=>[a(Z,{id:`bitrates_${l}`,type:"number",min:0,max:1e6,class:"w-full",modelValue:O.value[l],"onUpdate:modelValue":i=>O.value[l]=i},null,8,["id","modelValue","onUpdate:modelValue"]),n("label",{for:`bitrates_${l}`},"Bitrate",8,Be)]),_:2},1024),a(r,{variant:"on",class:"col-span-4"},{default:s(()=>[a(u,{id:`segmentNames_${l}`,class:"w-full",modelValue:K.value[l],"onUpdate:modelValue":i=>K.value[l]=i},null,8,["id","modelValue","onUpdate:modelValue"]),n("label",{for:`segmentNames_${l}`},"Segment name",8,qe)]),_:2},1024),a(r,{variant:"on",class:"col-span-4"},{default:s(()=>[a(u,{id:`playlistNames_${l}`,class:"w-full",modelValue:j.value[l],"onUpdate:modelValue":i=>j.value[l]=i},null,8,["id","modelValue","onUpdate:modelValue"]),n("label",{for:`playlistNames_${l}`},"Playlist name",8,Re)]),_:2},1024)]),a(_,{type:"button",onClick:()=>re(l),id:"addVideoProfile",class:"col-span-2",variant:"text","end-icon":"trash"},null,8,["onClick"])]))),128)),n("div",De,[n("span",Fe,b(o.$t("Audio Profiles")),1),a(_,{type:"button",onClick:ie,id:"addAudioProfile"},{default:s(()=>[...e[9]||(e[9]=[g("Add Audio Profile",-1)])]),_:1})]),(v(!0),V(J,null,W(P.value,(c,l)=>(v(),V("div",{key:l,class:"m-2 mt-2 ml-0 flex w-full rounded-md border-white/5 p-4 border-1 odd:bg-auto-1/5 even:bg-auto-2/2"},[n("div",Me,[a(r,{variant:"on",class:"col-span-2"},{default:s(()=>[a(f,{id:`audioCodecs_${l}`,class:"col-span-2",optionLabel:"label",modelValue:P.value[l],"onUpdate:modelValue":i=>P.value[l]=i,options:p.value?.available_audio_codecs??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),n("label",{for:`audioCodecs_${l}`},"Codec",8,Te)]),_:2},1024),a(r,{variant:"on",class:"col-span-2"},{default:s(()=>[a(x,{id:`allowedAudioLanguages_${l}`,class:"col-span-2",optionLabel:"label",modelValue:Q.value[l],"onUpdate:modelValue":i=>Q.value[l]=i,options:c?.available_languages??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),n("label",{for:`allowedAudioLanguages_${l}`},"Allowed languages",8,Ee)]),_:2},1024)]),a(_,{type:"button",onClick:()=>ce(l),id:"addVideoProfile",class:"col-span-2",variant:"text","end-icon":"trash"},null,8,["onClick"])]))),128)),n("div",Ie,[n("span",je,b(o.$t("Subtitle Profiles")),1),a(_,{type:"button",onClick:de,id:"addSubtitleProfile"},{default:s(()=>[...e[10]||(e[10]=[g("Add Subtitle Profile",-1)])]),_:1})]),(v(!0),V(J,null,W($.value,(c,l)=>(v(),V("div",{key:l,class:"m-2 mt-2 ml-0 flex w-full rounded-md border-white/5 p-4 border-1 odd:bg-auto-1/5 even:bg-auto-2/2"},[n("div",Ke,[a(r,{variant:"on",class:"col-span-2"},{default:s(()=>[a(f,{modelValue:$.value[l],"onUpdate:modelValue":i=>$.value[l]=i,id:"subtitleProfiles",optionLabel:"label",class:"col-span-2",options:p.value?.available_subtitle_codecs??[]},null,8,["modelValue","onUpdate:modelValue","options"]),e[11]||(e[11]=n("label",{for:"subtitleProfiles"},"Codec",-1))]),_:2},1024),a(r,{variant:"on",class:"col-span-2"},{default:s(()=>[a(x,{modelValue:z.value[l],"onUpdate:modelValue":i=>z.value[l]=i,id:`allowedSubtitleLanguages_${l}`,class:"col-span-2",optionLabel:"label",options:c?.available_languages??[],multiple:""},null,8,["modelValue","onUpdate:modelValue","id","options"]),n("label",{for:`allowedSubtitleLanguages_${l}`},"Allowed languages",8,Oe)]),_:2},1024)]),a(_,{type:"button",onClick:()=>pe(l),id:"addVideoProfile",class:"col-span-2",variant:"text","end-icon":"trash"},null,8,["onClick"])]))),128))])):H("",!0),t.value?.id?(v(),X(ye,{key:2,id:t.value?.id??"",name:t.value?.name??"",close:R,open:N.value},null,8,["id","name","open"])):H("",!0)]),_:1},8,["error","params"])}}});export{sl as default};
