import{C as o,Et as p,G as Z,J as s,O as Q,Ot as W,Q as K,S as a,T as c,Tt as t,X as Y,c as P,ct as h,g as X,gt as E,j as T,k as d,kt as m,n as ee,ot as z,w as n,x as B}from"./i18n-Cs-AFcrY.js";import{qi as k}from"./ionic-XwZpO7IE.js";import{I as te,P as ae}from"./vue-core-CKeWI2Kt.js";import{Ai as b,Cr as le,H as I,Kn as M,Pn as se,Qn as S,Rn as re,U as x,Ui as D,X as $,Zn as q,b as A,fa as H,g as L,jt as ie,ki as R,lt as G,nr as ne,pt as oe,qn as de,ri as N,tr as ue,v as ce,w as me,wa as fe,xt as ve,yr as pe}from"./index-BnnbGJJT.js";import{t as ge}from"./DropdownMenu-DGdHKLP4.js";import{t as ye}from"./MusicButton-v8SrJ9sU.js";import{t as he}from"./BannerButton-C04tAEET.js";import{t as J}from"./MediaLikeButton-BQrqSND8.js";import{t as O}from"./PlayerIcon-DB4EgWwO.js";import{t as _}from"./Marquee-DvLhCcT0.js";import{t as ke}from"./FavoriteImage-CLYx9sSD.js";import{t as F}from"./TrackLinks-VbZtnAiK.js";import{t as U}from"./BigPlayButton-c0h-7iRR.js";import{t as xe}from"./EqSpinner-D10KcGGk.js";import{t as V}from"./ShareButton-CFJoKBDH.js";P();ae();var be={class:"flex sm:gap-4 items-center py-4 px-4 sm:px-8 w-full pl-3 pr-4 sm:pr-10 h-20 z-40","data-index":"1"},we={class:"relative hidden h-fit cursor-pointer items-center justify-center focus-within:text-surface sm:flex mr-auto"},Re=["value"],Se={class:"absolute top-2 right-2 bottom-2 flex items-center justify-center"},Ce=T({__name:"ControlHeader",props:{data:{type:Object,required:!1},filter:{type:String,required:!0}},emits:["filterChange"],setup(e){const l=e,f=te();function i(){x.setQueue(l.data?.tracks??[])}const v=B(()=>({title:l.data?.name??"",url:`https://app.nomercy.tv${f.fullPath}`}));return(g,u)=>(s(),c(X,null,[u[1]||(u[1]=a("div",{class:"pointer-events-none absolute z-0 h-96 w-full"},null,-1)),a("div",be,[e.data?.tracks?(s(),o(U,{key:0,data:e.data,class:"hidden sm:flex"},null,8,["data"])):n("",!0),a("div",we,[a("input",{id:"search",value:e.filter,class:"bg-transparent border-surface-12/5 border-2 rounded-md focus-visible:!border-surface-12/9 focus-visible:text-white placeholder-current p-2",name:"search",placeholder:"Filter…",type:"text",onInput:u[0]||(u[0]=w=>g.$emit("filterChange",w.target?.value))},null,40,Re),a("div",Se,[d(A,{class:"!w-7",icon:"searchMagnifyingGlass"})])]),d(V,{"share-data":v.value,class:"!p-0 hidden sm:flex sm:ml-auto"},null,8,["share-data"]),d(J,{data:e.data,"class-name":"!w-8 !h-8",color:"var(--color-theme-8)"},null,8,["data"]),d(V,{class:"!p-0 sm:hidden"}),t(se)?(s(),o(ye,{key:1,id:"add",onclick:i,class:"",label:"Add"},{default:h(()=>[d(A,{class:"!w-7",icon:"add"})]),_:1})):n("",!0)]),a("div",{class:p([{"top-11":!t(k)("capacitor"),"top-10":t(k)("capacitor")},"sm:hidden sticky left-full -mt-16 z-1199 flex justify-center items-center gap-2 mr-4 h-auto"]),style:{"box-shadow":"0 1px 2px 0 rgba(16, 24, 40, 0.05)"}},[e.data?.tracks?(s(),o(U,{key:0,data:e.data},null,8,["data"])):n("",!0)],2)],64))}}),ht=Ce;P();var Ae={key:2,class:"absolute grid inset-0 bg-black/40 w-full items-center justify-center flex-col opacity-0 group-hover/cover:opacity-100 transition-all duration-100"},Pe={class:"p-4 font-semibold text-theme-8 text-lg"},Te={key:0,class:"relative my-4 flex w-full flex-1 flex-shrink-0 flex-col items-start justify-start gap-4 flex-grow-1 sm:hidden"},$e=["innerHTML"],Be={class:"relative hidden flex-1 flex-shrink-0 flex-col items-start justify-start gap-1 flex-grow-1 sm:flex cursor-pointer"},je={class:"text-left font-semibold uppercase"},Ee=["innerHTML"],qe={class:"relative flex items-center justify-start gap-2 text-sm"},He={class:"relative flex items-center justify-start gap-2"},Le={key:0,class:"flex items-center gap-4 text-sm font-medium"},ze={key:0,class:"relative aspect-square h-12 w-12 overflow-clip rounded-full min-w-12"},Ie={key:1,class:"text-left text-sm font-medium"},Me={class:"text-left text-sm font-medium"},De={key:2,class:"text-left text-sm font-medium"},Ge={class:"text-left text-sm font-medium"},Ne=T({__name:"ArtistHeader",props:{data:{type:Object,required:!1}},setup(e){const l=e,{t:f}=ee(),i=E("");E();const v=E();function g(r){if(r)return ue(f,r?.tracks?.map(y=>ne(y.duration)).reduce((y,j)=>y+j,0)??0)}z(()=>l.data,r=>{r&&(i.value=g(r))}),Z(()=>{i.value=g(l.data)}),z(v,r=>{!r||!x._audioElement1?.motion||!x._audioElement2?.motion||(x._audioElement1?.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(r).backgroundColor]}),x._audioElement1.motion.gradient="theme",x._audioElement2?.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(r).backgroundColor]}),x._audioElement2.motion.gradient="theme")});const u=B(()=>le(pe(re.value),150));function w(){const r=new CustomEvent("showModal",{detail:{modalName:"createPlaylist",modalTitle:"Edit {{name}}",modalTitleArgs:{name:l.data?.name},modalProps:l.data}});document.dispatchEvent(r)}return(r,y)=>{const j=K("RouterLink");return s(),c("div",{id:"artist-header",class:p([{"pt-safe-offset-16 px-8 gap-4":t(k)("capacitor"),"pt-24 px-6 gap-2 sm:gap-12":!t(k)("capacitor"),"text-black/12":u.value,"text-white/12":!u.value},"relative z-0 flex flex-col items-end justify-start sm:flex-row sm:gap-9 sm:pt-8 sm:pb-8 sm:px-8"])},[a("div",{id:"audio-color",ref_key:"audioColor",ref:v,class:"absolute top-0 left-0 h-full w-full overflow-clip bg-focus",style:{background:"hsl(from var(--color-theme-8) h s 32%)"}},null,512),y[0]||(y[0]=a("div",{class:"absolute top-0 left-0 h-full w-full overflow-clip"},null,-1)),a("div",{class:p([{"-mt-4":t(k)("capacitor"),"":!t(k)("capacitor")},"frosting relative mx-auto group/cover flex aspect-square w-80 overflow-clip max-w-[90%] flex-col items-center justify-center rounded-xl bg-gradient-to-br min-w-64 bg-theme-6 from-theme-5 via-theme-6 to-theme-9 shadow cursor-pointer"]),onClick:w},[e.data?.cover?(s(),o(L,{key:0,id:"image",data:e.data,size:250,"class-name":"aspect-square rounded-xl w-full",loading:"eager"},null,8,["data"])):e.data?.id?(s(),o(ke,{key:1,id:e.data.id,type:e.data.type,class:"aspect-square rounded-xl w-full"},null,8,["id","type"])):n("",!0),e.data?.type!=="track"?(s(),c("div",Ae,[a("span",Pe,m(r.$t("Change cover")),1)])):n("",!0)],2),e.data?.name?(s(),c("div",Te,[a("div",{class:"w-full text-2xl font-semibold whitespace-pre-line",innerHTML:t(N)(e.data?.name??"Songs you like","text-sm line-clamp-1")},null,8,$e)])):n("",!0),a("div",Be,[a("p",je,m(e.data?.type?.replace(/s$/u,"")),1),a("div",{class:"w-full text-5xl font-semibold line-clamp-2 leading-[130%] whitespace-pre",onClick:w,innerHTML:t(N)(e.data?.name??"Songs you like","text-2xl line-clamp-1")},null,8,Ee),a("div",qe,m(e.data?.description),1),a("div",He,[e.data?.artists?.length?(s(),c("div",Le,[e.data?.artists?.[0].cover?(s(),c("div",ze,[d(L,{id:"image",data:e.data?.artists?.[0],size:250,"class-name":"h-full w-full",loading:"eager"},null,8,["data"])])):n("",!0),d(j,{to:e.data?.artists?.[0].link??"#",class:"text-sm empty:hidden"},{default:h(()=>[Q(m(e.data?.artists?.[0]?.name??"Various artists"),1)]),_:1},8,["to"])])):n("",!0),e.data?.tracks&&e.data?.artists?.length?(s(),c("p",Ie," • ")):n("",!0),a("p",Me,m(e.data?.tracks?.length)+" "+m(e.data?.tracks?.length===1?t(f)("track"):t(f)("tracks")),1),(i.value?.length??0)>0&&e.data?.tracks?.length?(s(),c("p",De," • ")):n("",!0),a("p",Ge,m(i.value),1)])])],2)}}}),kt=Ne;P();var Oe=["onclick"],_e={class:""},Fe=T({__name:"SortButton",props:{name:{type:String,required:!0},sortingType:{type:String,required:!0},iconSpacer:{type:String,default:""}},setup(e){function l(i){console.log("handleSortChange",i),S.value===i?M(q.value===R.asc?R.desc:R.asc):M(R.asc),de(i)}function f(i){const v=i.target;if(i.key==="ArrowUp"){const g=v.parentElement?.parentElement?.previousElementSibling;g&&g.nodeName==="BUTTON"||g.nodeName==="A"?g.focus():document.querySelector("#playList")?.focus()}else i.key==="ArrowDown"?v.parentElement?.parentElement?.nextElementSibling?.focus():i.key==="ArrowLeft"?v.previousElementSibling?.focus():i.key==="ArrowRight"&&v.nextElementSibling?.focus()}return(i,v)=>(s(),c("button",{onclick:()=>l(e.sortingType),onkeyup:f,class:"relative cursor-pointer items-center focus-visible:underline focus-visible:underline-offset-2","no-ring":""},[a("span",_e,m(i.$t(e.name)),1),t(q)===t(R).asc&&t(S)===e.sortingType&&t(S)!==t(b).index?(s(),o(A,{key:0,class:p(`w-6 h-6 ${e.iconSpacer}`),icon:"chevronUp"},null,8,["class"])):t(q)===t(R).desc&&t(S)===e.sortingType&&t(S)!==t(b).index?(s(),o(A,{key:1,class:p(`w-6 h-6 ${e.iconSpacer}`),icon:"chevronDown"},null,8,["class"])):n("",!0)],8,Oe))}}),C=Fe;P();var Ue=T({__name:"SortHeader",props:{isAlbumRoute:{type:Boolean,default:!1},isArtistRoute:{type:Boolean,default:!1},isPlaylistsRoute:{type:Boolean,default:!1},isFavoritesRoute:{type:Boolean,default:!1},isGenresRoute:{type:Boolean,default:!1}},setup(e){return(l,f)=>(s(),c("div",{id:"sortHeaderElement",class:p([{"top-safe-offset-[4rem]":t(k)("capacitor"),"top-safe-offset-16":!t(k)("capacitor")},"sticky -mx-4 px-4 z-30 mt-4 block h-10 content-center items-center justify-start self-stretch bg-transparent text-sm font-medium transition-all duration-200 w-available group/track sm:w-available sm:-top-px"])},[f[0]||(f[0]=a("span",{id:"sorterChild",class:"absolute inset-0 h-10 sm:rounded-t-2xl overflow-clip w-full transition-all duration-200"},null,-1)),a("span",{class:p([{"album-grid":e.isAlbumRoute||e.isPlaylistsRoute||e.isFavoritesRoute||e.isGenresRoute,"artist-grid":e.isArtistRoute},"grid justify-start items-center self-stretch pr-3 sm:px-3 rounded-lg group/track text-sm font-medium py-2 z-0 group/track"])},[d(C,{id:"sortIndex","aria-label":l.$t("Sort by index"),"sorting-type":t(b).index,class:"!flex justify-center","icon-spacer":"absolute left-6",name:"#"},null,8,["aria-label","sorting-type"]),d(C,{"aria-label":l.$t("Sort by name"),"sorting-type":t(b).name,class:"flex sm:flex","icon-spacer":"w-6 h-6",name:"Title"},null,8,["aria-label","sorting-type"]),d(C,{"aria-label":l.$t("Sort by album"),class:p([{"opacity-0":e.isAlbumRoute},"!hidden sm:!flex"]),"sorting-type":t(b).album,"icon-spacer":"w-6 h-6",name:"Album"},null,8,["aria-label","class","sorting-type"]),d(C,{"aria-label":l.$t("Sort by date"),"sorting-type":t(b).date,class:"!hidden sm:!flex","icon-spacer":"w-6 h-6",name:"Release date"},null,8,["aria-label","sorting-type"]),d(C,{"aria-label":l.$t("Sort by duration"),"sorting-type":t(b).duration,class:"!hidden sm:!flex gap-2 flex-row-reverse pr-[4.5rem]","icon-spacer":"w-6 h-6",name:"Duration"},null,8,["aria-label","sorting-type"])],2)],2))}}),xt=ce(Ue,[["__scopeId","data-v-61902170"]]);P();var Ve=["data-track-id"],Qe={class:"flex justify-center text-center"},Ke={key:0,class:"group-focus-visible/track:sm:hidden group-hover/track:sm:hidden"},Xe={class:"flex h-12 items-center gap-2 overflow-hidden w-available sm:gap-4"},Je={class:"flex h-full flex-col justify-evenly overflow-clip w-inherit"},Ze={class:"flex h-6 flex-nowrap overflow-clip text-left line-clamp-1 w-inherit tracking-wide leading-6 px-2 py-1 -ml-2"},We=["data-size"],Ye={class:"flex whitespace-nowrap"},et={class:"hidden sm:flex invisible max-h-12 md:visible"},tt={class:"hidden sm:flex mr-4 monospace sm:mr-0"},at=T({__name:"TrackRow",props:{data:{type:Object,required:!0},index:{type:Number,required:!0},displayList:{type:Array,required:!0},isAlbumRoute:{type:Boolean,default:!1},isArtistRoute:{type:Boolean,default:!1},isPlaylistsRoute:{type:Boolean,default:!1},isFavoritesRoute:{type:Boolean,default:!1},isGenresRoute:{type:Boolean,default:!1},routeType:{type:String,default:"unknown"},routeParamId:{type:String,default:""}},setup(e){const l=e,f=B(()=>l.isAlbumRoute?l.data?.album_track.at(0)?.id:l.isArtistRoute?l.data?.artist_track.at(0)?.id:l.routeParamId||"unknown");function i(){if(!fe.value.features?.nomercyConnect){if($.value?.id===l.data.id){I.togglePlayback();return}I.playTrack(l.data,l.displayList),ve(`/music/${l.routeType}/${l.routeParamId}`);return}ie.value?.invoke("StartPlaybackCommand",l.routeType,f.value,l.data.id)}const v=B(()=>!l.data?.date||!H?.language||H.language==="undefined"?null:new Date(l.data.date).toLocaleDateString(H?.language??"en-US",{year:"numeric",month:"long",day:"2-digit"}));return(g,u)=>{const w=K("RouterLink");return s(),c("button",{class:p([{"album-grid":e.isAlbumRoute||e.isPlaylistsRoute||e.isFavoritesRoute||e.isGenresRoute,"artist-grid":e.isArtistRoute},"grid justify-start w-full children:pointer-events-none items-center self-stretch pr-3 sm:px-3 rounded-lg sm:hover:bg-surface-6/8 group/track text-sm font-medium py-2 z-10"]),"data-track-id":e.data?.id,onclick:i,"data-target":"track",tabindex:"0",onContextmenu:u[1]||(u[1]=r=>t(me)(r,{isAlbumRoute:e.isAlbumRoute,isArtistRoute:e.isArtistRoute,isPlaylistsRoute:e.isPlaylistsRoute,routeParamId:e.routeParamId},e.data))},[a("span",Qe,[t($)?.id!==e.data.id?(s(),c("span",Ke,m(e.index+1),1)):n("",!0),t($)?.id===e.data.id?(s(),o(xe,{key:1,playing:t(G),class:"hidden group-focus-visible/track:sm:!hidden group-hover/track:sm:!hidden",color:"var(--color-theme-8)"},null,8,["playing"])):n("",!0),t($)?.id===e.data.id&&t(G)?(s(),o(O,{key:2,class:"hidden h-6 w-6 group-focus-visible/track:sm:block group-hover/track:sm:block",icon:"nmPause"})):(s(),o(O,{key:3,class:"hidden h-6 w-6 group-focus-visible/track:sm:block group-hover/track:sm:block",icon:"nmPlay"}))]),a("span",Xe,[e.isAlbumRoute?(s(),o(L,{key:0,data:e.data,size:100,style:W({display:e.isAlbumRoute?"none":""}),"class-name":"relative hidden h-12 w-12 overflow-hidden min-w-[3rem] sm:block",loading:"eager"},null,8,["data","style"])):n("",!0),a("span",Je,[a("span",Ze,m(e.data.name),1),a("span",{"data-size":t(oe),class:"inline-flex h-6 w-available gap-1 overflow-hidden whitespace-nowrap text-slate-3 dark:slate-dark-3 line-clamp-1 text-2xs hover:animate-pause leading-6"},[d(_,null,{default:h(()=>[e.data&&e.isAlbumRoute||e.isPlaylistsRoute||e.isFavoritesRoute||e.isGenresRoute?(s(),o(F,{key:0,id:e.data.id,data:e.data.artist_track,onclick:r=>r.stopPropagation(),"data-target":"artist",type:"artists"},null,8,["id","data","onclick"])):n("",!0),e.data&&e.isArtistRoute?(s(),o(F,{key:1,id:e.data.id,data:e.data.album_track,onclick:r=>r.stopPropagation(),"data-target":"album",type:"albums"},null,8,["id","data","onclick"])):n("",!0)]),_:1})],8,We)])]),(s(!0),c(X,null,Y(e.data.album_track,r=>(s(),o(_,{key:r.id,class:"!hidden sm:!flex"},{default:h(()=>[a("button",{class:p([{"opacity-0":e.isAlbumRoute,"opacity-100":e.isArtistRoute},"items-center overflow-clip pr-2 line-clamp-2 h-inherit w-inherit flex"]),onClick:u[0]||(u[0]=y=>y.stopPropagation())},[d(w,{to:r?.link,class:"flex items-center gap-1 whitespace-nowrap font-semibold line-clamp-1 hover:underline focus:underline dark:font-medium pointer-events-auto","data-target":"album","no-ring":"",tabindex:"0"},{default:h(()=>[a("span",Ye,m(r.name),1)]),_:2},1032,["to"])],2)]),_:2},1024))),128)),a("span",et,m(v.value),1),a("span",{class:p([{"mr-16":!t(D)},"flex items-center justify-end gap-2 text-end"])},[(s(),o(J,{key:e.data.id+e.data?.favorite,data:e.data,color:"var(--color-theme-8)","no-background":""},null,8,["data"])),a("span",tt,m(e.data.duration),1),t(D)?(s(),o(ge,{key:0,direction:"down"},{button:h(()=>[d(he,{class:"",title:""},{default:h(()=>[d(A,{"class-name":"relative h-5 w-5",icon:"menuDotsVertical"})]),_:1})]),default:h(()=>[u[2]||(u[2]=Q(" Hellooo ",-1))]),_:1})):n("",!0)],2)],42,Ve)}}}),bt=at;export{ht as i,xt as n,kt as r,bt as t};
