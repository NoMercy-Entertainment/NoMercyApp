import{I as k,l as o,w as c,E as C,f as F,c as d,o as u,a as l,j as n,t as p,s as S,n as V,F as _,h as B,O as N}from"./index-4xkagrUD.js";import{_ as $}from"./ScrollContainer.vue_vue_type_script_setup_true_lang-QF_JR66q.js";import{_ as g}from"./OptimizedIcon.vue_vue_type_script_setup_true_lang-BEbBJsKC.js";const I={class:"relative mt-1 w-full"},T={class:"relative flex w-full flex-col overflow-clip h-[88%] even:text-lg"},j={class:"flex p-2 pt-4 border-b !bg-transparent text-sm select-none"},q={class:""},E={class:"mr-auto ml-4"},U={class:"relative flex w-full flex-col h-inherit"},z={class:"relative w-full h-auto"},D=["onClick"],G={class:"mr-auto !ml-7 text-sm select-none"},P=k({__name:"FolderBrowser",props:{selected:{type:String,required:!0},setSelected:{type:Function,required:!0}},setup(b){const r=b,t=o(r.selected??"/"),f=o(!1),m=o("/");c(r,e=>{t.value=e.selected}),c(t,e=>{r.setSelected(e),f.value=!1});const h=o([]),x=o(!1);function v(e){N().post("/dashboard/server/directorytree",{folder:e}).then(({data:a})=>{h.value=a.data.filter(i=>i.type==="folder"),m.value=a.data.at(0)?.full_path?.match(/[\\/]/gu)?.at(-1)??"/"}).then(()=>x.value=!1)}c(t,e=>{e&&v(e??"")});function w(){f.value=!0,t.value=t.value.split(/[/\\]/gu).slice(0,-1).join(m.value),t.value.match(/[/\\]/gu)?.length||(t.value="/")}function y(e){t.value=e.full_path}return C(()=>{v(t.value??"")}),(e,a)=>{const i=F("InputText");return u(),d(_,null,[l("div",I,[n(i,{id:"folderName",modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=s=>t.value=s),name:"","no-ring":"",class:"w-full"},null,8,["modelValue"])]),l("div",T,[l("div",j,[l("span",q,p(e.$t("Type")),1),l("span",E,p(e.$t("Name")),1)]),l("div",U,[n($,{static:!1,"auto-hide":!1,"class-name":"ml-2"},{default:S(()=>[l("div",{class:V(["bg-auto-6/4 hover:bg-auto-200 border-t-0 border-b border-solid border-[rgba(34,34,34,0.9)] contain flex items-center text-current cursor-pointer overflow-hidden py-1 px-2 align-middle h-10 min-h-10 leading-6 select-none",t.value==="/"?"opacity-50":""]),onClick:w},[n(g,{icon:"returnPackage",class:"mt-1 h-5 w-5"}),a[1]||(a[1]=l("span",{class:"mr-auto !ml-7"},"...",-1))],2),l("div",z,[(u(!0),d(_,null,B(h.value,s=>(u(),d("div",{key:s.full_path,class:"even:bg-auto-6/2 odd:bg-auto-100 hover:bg-auto-200 border-t-0 border-b border-solid border-[rgba(34,34,34,0.9)] contain flex items-center bg-transparent text-current cursor-pointer overflow-hidden py-1 px-2 align-middle h-10 leading-6",onClick:()=>y(s)},[n(g,{icon:"folder",class:"h-5 w-5"}),l("span",G,p(s.path.replace(/[\\\/]/u,"")),1)],8,D))),128))])]),_:1})])])],64)}}});export{P as _};
