import{$ as ce,aZ as we,k as w,c as oe,o as V,p as d,j as i,x as y,z as a,A as h,a9 as he,d as c,w as F,f as x,h as g,b as ee,a0 as de,F as le,q as ae}from"./vue-ionic-D4s4ExYp.js";import{u as ie}from"./useServerClient-B1iLPo0s.js";import{u as Pe}from"./primevue-C7GgiIOs.js";import{a as $e,bg as re}from"./index-D29s6-I8.js";import{_ as Ce}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-Nn4dwAdV.js";import"./vendor-Dgtccx1h.js";import"./icons-BW5E66pf.js";import"./rxjs-BCp2L9Rn.js";import"./media-C2AqgyMX.js";import"./api-BBofn2cc.js";import"./swiper-D00Cnjmx.js";import"./useInfiniteServerClient-B4MMmB_5.js";import"./music-player-BiOHSPVn.js";import"./useMounted-DYwXa4R_.js";import"./FloatingBackButton.vue_vue_type_script_setup_true_lang-ds0OrJIA.js";import"./OptimizedIcon.vue_vue_type_script_setup_true_lang-BMWMPBMW.js";import"./Button.vue_vue_type_script_setup_true_lang-CzLYMh2i.js";import"./ScrollContainer.vue_vue_type_script_setup_true_lang-B9z-yNTL.js";import"./RipperOverlay.vue_vue_type_script_setup_true_lang-CXq-Wp6k.js";import"./ripperSocket-wzC5X917.js";const ke={class:"my-6 text-sm text-auto-10"},Ue=ce({__name:"DeleteEncoderProfileModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},name:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},setup(S){const P=S,L=we(),I=Pe();function $(){$e().delete(`dashboard/encoderprofiles/${P.id}`).then(({data:n})=>{I.add({severity:n.status==="ok"?"success":"error",summary:re(n.status==="ok"?"Success":"Error"),detail:re(n.message,...n.args??[]),life:5e3}),L.invalidateQueries({queryKey:["dashboard","encoderProfiles"]}),!P.noRedirect&&window.history.back()}),P.close()}return(n,M)=>{const T=w("Button"),j=w("Modal");return V(),oe(j,{close:S.close,open:S.open,"max-width":"max-w-xl",params:{profile:P.name},title:"Delete encoder profile {{profile}}"},{actions:d(()=>[a(T,{id:"yes",onclick:$,"end-icon":"trash",color:"red",type:"button",variant:"contained"},{default:d(()=>[h(y(n.$t("Delete")),1)]),_:1}),a(T,{id:"no",onclick:S.close,type:"button",color:"auto-alpha",variant:"text"},{default:d(()=>[h(y(n.$t("Cancel")),1)]),_:1},8,["onclick"])]),default:d(()=>[i("div",ke,y(n.$t("Are you sure you want to delete this encoder profile?")),1)]),_:1},8,["close","open","params"])}}}),Se={class:"block whitespace-nowrap text-sm font-medium"},Le={key:0,class:"grid w-full grid-cols-12 gap-4"},Ne={key:1,class:"flex w-full flex-col"},Ae={class:"flex w-full justify-between"},Be={class:"block whitespace-nowrap text-sm font-medium"},qe={class:"grid h-auto w-full grid-cols-8 flex-wrap gap-2"},Re=["for"],De=["for"],Fe=["for"],Me=["for"],Te=["for"],Ee=["for"],Ie=["for"],je=["for"],Ke=["for"],Qe={class:"flex w-full justify-between"},ze={class:"mt-2 block whitespace-nowrap text-sm font-medium"},Oe={class:"grid h-auto w-full grid-cols-8 flex-wrap gap-2"},Ze=["for"],Ge=["for"],He={class:"flex w-full justify-between"},Je={class:"mt-2 block whitespace-nowrap text-sm font-medium"},We={class:"grid h-auto w-full grid-cols-8 flex-wrap gap-2"},Xe=["for"],Vl=ce({__name:"Edit",setup(S){var se,ne,ue;const P=he(),{data:L,error:I}=ie({path:"dashboard/encoderProfiles",queryKey:["dashboard","encoderProfiles"]}),{data:$}=ie({path:"dashboard/encoderProfiles/containers",queryKey:["dashboard","videoContainers"]}),n=c();F(L,l=>{l&&(n.value=l.find(o=>o.id===P.params.id))}),x(()=>{L.value&&(n.value=L.value.find(l=>l.id===P.params.id))});const M=c(!1),T=()=>{M.value=!0},j=()=>{M.value=!1},pe=()=>{window.history.back()},me=()=>{},N=c([{label:"audio",value:"audio"},{label:"video",value:"video"},{label:"image",value:"image"}]),K=c((se=n.value)==null?void 0:se.name),A=c((ne=N.value)==null?void 0:ne.find(l=>{var o;return l.value===((o=n.value)==null?void 0:o.type)})),b=c((ue=$.value)==null?void 0:ue.find(l=>{var o;return l.type===((o=n.value)==null?void 0:o.type)})),_=c([]),Q=c([]),z=c([]),O=c([]),ve=c([]),Z=c([]),G=c([]),E=c([]),H=c([]),J=c([]),W=c([]),C=c([]),X=c([]),k=c([]),Y=c([]),fe=()=>{_.value.push({})},be=()=>{C.value.push({})},_e=()=>{k.value.push({})},Ve=l=>{_.value.splice(l,1)},ye=l=>{C.value.splice(l,1)},ge=l=>{k.value.splice(l,1)};x(()=>{var l;A.value=N.value.find(o=>{var v;return o.value===((v=n.value)==null?void 0:v.type)}),b.value=(l=$.value)==null?void 0:l.find(o=>{var v;return o.type===((v=n.value)==null?void 0:v.type)})}),F(n,l=>{l&&(K.value=l.name)}),F($,l=>{l&&(b.value=l.find(o=>o.value===n.value.container))});const te=l=>{var o,v,p,m,f,B,q,R,D;l&&(console.raw("container",l,N.value),A.value=N.value.find(s=>s.value===l.type),_.value=((o=n.value.videoProfiles)==null?void 0:o.map(s=>l.available_video_codecs.find(r=>r.value===s.codec)))??[],C.value=((v=n.value.audioProfiles)==null?void 0:v.map(s=>l.available_audio_codecs.find(r=>r.value===s.codec)))??[],k.value=((p=n.value.subtitleProfiles)==null?void 0:p.map(s=>l.available_subtitle_codecs.find(r=>r.value===s.codec)))??[],Q.value=((m=n.value.videoProfiles)==null?void 0:m.map(s=>l.available_resolutions.find(r=>r.width===s.width)))??[],z.value=n.value.videoProfiles.map(s=>{var r;return(r=_.value.find(t=>t.value===s.codec))==null?void 0:r.color_spaces.find(t=>t.value===s.colorSpace)}),Z.value=n.value.videoProfiles.map(s=>{var r;return(r=_.value.find(t=>t.value===s.codec))==null?void 0:r.tunes.find(t=>t.value===s.tune)}),G.value=n.value.videoProfiles.map(s=>{var r;return(r=_.value.find(t=>t.value===s.codec))==null?void 0:r.profiles.find(t=>t.value===s.profile)}),E.value=n.value.videoProfiles.map(s=>{var r;return(r=_.value.find(t=>t.value===s.codec))==null?void 0:r.presets.find(t=>t.value===s.preset)}),console.log("presets",E.value),Y.value=C.value.map(s=>(s==null?void 0:s.available_languages)??[]),X.value=k.value.map(s=>(s==null?void 0:s.available_languages)??[]),O.value=((f=n.value.videoProfiles)==null?void 0:f.map(s=>s.crf))??[],W.value=((B=n.value.videoProfiles)==null?void 0:B.map(s=>s.bitrate))??[],H.value=((q=n.value.videoProfiles)==null?void 0:q.map(s=>s.playlistName))??[],J.value=((R=n.value.videoProfiles)==null?void 0:R.map(s=>s.segmentName))??[],ve.value=((D=n.value.videoProfiles)==null?void 0:D.map(s=>s.width))??[])};return F(b,te),x(()=>{var l;te(b.value),b.value=(l=$.value)==null?void 0:l.find(o=>o.value===n.value.container)}),F(_,l=>{l&&console.log("videoCodecs",l)}),(l,o)=>{var R;const v=w("InputText"),p=w("FloatLabel"),m=w("Select"),f=w("Button"),B=w("InputNumber"),q=w("MultiSelect");return V(),oe(Ce,{gridStyle:4,error:de(I),title:"Encoder profile: {{name}}",params:{name:(R=n.value)==null?void 0:R.name}},{cta:d(()=>o[3]||(o[3]=[])),actions:d(()=>[a(f,{type:"button",id:"remove",variant:"text",class:"children:text-gray-400 children:transition-colors children:duration-100 children:hover:text-red-dark-8",color:"auto-alpha",startIcon:"folderRemove",onClick:T},{default:d(()=>[h(y(l.$t("Remove")),1)]),_:1}),a(f,{type:"button",id:"cancel",variant:"text",color:"white",onClick:pe},{default:d(()=>[h(y(l.$t("Cancel")),1)]),_:1}),a(f,{type:"submit",id:"save",color:"theme",class:"ml-auto",form:"myForm",onClick:me},{default:d(()=>[h(y(l.$t("Save")),1)]),_:1})]),default:d(()=>{var D,s,r;return[i("span",Se,y(l.$t("Profiles settings")),1),n.value?(V(),g("div",Le,[a(p,{variant:"on",class:"col-span-3"},{default:d(()=>[a(v,{modelValue:K.value,"onUpdate:modelValue":o[0]||(o[0]=t=>K.value=t),id:"name",name:"Name",class:"w-full"},null,8,["modelValue"]),o[4]||(o[4]=i("label",{for:"name"},"Name",-1))]),_:1}),a(p,{variant:"on",class:"col-span-2"},{default:d(()=>[a(m,{modelValue:A.value,"onUpdate:modelValue":o[1]||(o[1]=t=>A.value=t),id:"type",class:"w-full",options:N.value,optionLabel:"label"},null,8,["modelValue","options"]),o[5]||(o[5]=i("label",{for:"type"},"Media type",-1))]),_:1}),a(p,{variant:"on",class:"col-span-2"},{default:d(()=>{var t;return[a(m,{modelValue:b.value,"onUpdate:modelValue":o[2]||(o[2]=e=>b.value=e),id:"container",class:"w-full",options:((t=de($))==null?void 0:t.filter(e=>{var u;return e.type===((u=A.value)==null?void 0:u.value)}))??[],optionLabel:"label"},null,8,["modelValue","options"]),o[6]||(o[6]=i("label",{for:"container"},"Container",-1))]}),_:1})])):ee("",!0),n.value?(V(),g("div",Ne,[i("div",Ae,[i("span",Be,y(l.$t("Video Profiles")),1),a(f,{type:"button",onClick:fe,id:"addVideoProfile"},{default:d(()=>o[7]||(o[7]=[h("Add Video Profile")])),_:1})]),(V(!0),g(le,null,ae(_.value,(t,e)=>(V(),g("div",{key:e,class:"m-2 mt-2 ml-0 flex w-full rounded-md border-white/5 p-4 border-1 odd:bg-auto-1/5 even:bg-auto-2/2"},[i("div",qe,[a(p,{variant:"on",class:"col-span-2"},{default:d(()=>{var u;return[a(m,{id:`videoProfiles_${e}`,label:"Codec",class:"col-span-2",modelValue:_.value[e],"onUpdate:modelValue":U=>_.value[e]=U,optionLabel:"label",options:((u=b.value)==null?void 0:u.available_video_codecs)??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),i("label",{for:`videoProfiles_${e}`},"Codec",8,Re)]}),_:2},1024),a(p,{variant:"on",class:"col-span-2"},{default:d(()=>{var u;return[a(m,{id:`resolutions_${e}`,label:"Resolution",class:"col-span-2",modelValue:Q.value[e],"onUpdate:modelValue":U=>Q.value[e]=U,optionLabel:"name",options:((u=b.value)==null?void 0:u.available_resolutions)??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),i("label",{for:`resolutions_${e}`},"Resolution",8,De)]}),_:2},1024),a(p,{variant:"on",class:"col-span-2"},{default:d(()=>[a(m,{id:`colorSpaces_${e}`,class:"col-span-2",modelValue:z.value[e],"onUpdate:modelValue":u=>z.value[e]=u,optionLabel:"label",options:(t==null?void 0:t.color_spaces)??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),i("label",{for:`colorSpaces_${e}`},"Colorspace",8,Fe)]),_:2},1024),a(p,{variant:"on",class:"col-span-2"},{default:d(()=>[a(m,{id:`profiles_${e}`,l:"",class:"col-span-2",modelValue:G.value[e],"onUpdate:modelValue":u=>G.value[e]=u,optionLabel:"label",options:(t==null?void 0:t.profiles)??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),i("label",{for:`profiles_${e}`},"Profile",8,Me)]),_:2},1024),a(p,{variant:"on",class:"col-span-2"},{default:d(()=>[a(m,{id:`presets_${e}`,l:"",class:"col-span-2",modelValue:E.value[e],"onUpdate:modelValue":u=>E.value[e]=u,optionLabel:"label",options:(t==null?void 0:t.presets)??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),i("label",{for:`presets_${e}`},"Preset",8,Te)]),_:2},1024),a(p,{variant:"on",class:"col-span-2"},{default:d(()=>[a(m,{id:`tunes_${e}`,class:"col-span-2",modelValue:Z.value[e],"onUpdate:modelValue":u=>Z.value[e]=u,optionLabel:"label",options:(t==null?void 0:t.tunes)??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),o[8]||(o[8]=i("label",{for:"`tunes_${index}`"},"Tune",-1))]),_:2},1024),a(p,{variant:"on",class:"col-span-2"},{default:d(()=>[a(B,{id:`crfs_${e}`,type:"number",min:0,max:51,class:"w-full",modelValue:O.value[e],"onUpdate:modelValue":u=>O.value[e]=u},null,8,["id","modelValue","onUpdate:modelValue"]),i("label",{for:`crfs_${e}`},"CRF",8,Ee)]),_:2},1024),a(p,{variant:"on",class:"col-span-2"},{default:d(()=>[a(B,{id:`bitrates_${e}`,type:"number",min:0,max:1e6,class:"w-full",modelValue:W.value[e],"onUpdate:modelValue":u=>W.value[e]=u},null,8,["id","modelValue","onUpdate:modelValue"]),i("label",{for:`bitrates_${e}`},"Bitrate",8,Ie)]),_:2},1024),a(p,{variant:"on",class:"col-span-4"},{default:d(()=>[a(v,{id:`segmentNames_${e}`,class:"w-full",modelValue:J.value[e],"onUpdate:modelValue":u=>J.value[e]=u},null,8,["id","modelValue","onUpdate:modelValue"]),i("label",{for:`segmentNames_${e}`},"Segment name",8,je)]),_:2},1024),a(p,{variant:"on",class:"col-span-4"},{default:d(()=>[a(v,{id:`playlistNames_${e}`,class:"w-full",modelValue:H.value[e],"onUpdate:modelValue":u=>H.value[e]=u},null,8,["id","modelValue","onUpdate:modelValue"]),i("label",{for:`playlistNames_${e}`},"Playlist name",8,Ke)]),_:2},1024)]),a(f,{type:"button",onClick:()=>Ve(e),id:"addVideoProfile",class:"col-span-2",variant:"text","end-icon":"trash"},null,8,["onClick"])]))),128)),i("div",Qe,[i("span",ze,y(l.$t("Audio Profiles")),1),a(f,{type:"button",onClick:be,id:"addAudioProfile"},{default:d(()=>o[9]||(o[9]=[h("Add Audio Profile")])),_:1})]),(V(!0),g(le,null,ae(C.value,(t,e)=>(V(),g("div",{key:e,class:"m-2 mt-2 ml-0 flex w-full rounded-md border-white/5 p-4 border-1 odd:bg-auto-1/5 even:bg-auto-2/2"},[i("div",Oe,[a(p,{variant:"on",class:"col-span-2"},{default:d(()=>{var u;return[a(m,{id:`audioCodecs_${e}`,class:"col-span-2",optionLabel:"label",modelValue:C.value[e],"onUpdate:modelValue":U=>C.value[e]=U,options:((u=b.value)==null?void 0:u.available_audio_codecs)??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),i("label",{for:`audioCodecs_${e}`},"Codec",8,Ze)]}),_:2},1024),a(p,{variant:"on",class:"col-span-2"},{default:d(()=>[a(q,{id:`allowedAudioLanguages_${e}`,class:"col-span-2",optionLabel:"label",modelValue:X.value[e],"onUpdate:modelValue":u=>X.value[e]=u,options:(t==null?void 0:t.available_languages)??[]},null,8,["id","modelValue","onUpdate:modelValue","options"]),i("label",{for:`allowedAudioLanguages_${e}`},"Allowed languages",8,Ge)]),_:2},1024)]),a(f,{type:"button",onClick:()=>ye(e),id:"addVideoProfile",class:"col-span-2",variant:"text","end-icon":"trash"},null,8,["onClick"])]))),128)),i("div",He,[i("span",Je,y(l.$t("Subtitle Profiles")),1),a(f,{type:"button",onClick:_e,id:"addSubtitleProfile"},{default:d(()=>o[10]||(o[10]=[h("Add Subtitle Profile")])),_:1})]),(V(!0),g(le,null,ae(k.value,(t,e)=>(V(),g("div",{key:e,class:"m-2 mt-2 ml-0 flex w-full rounded-md border-white/5 p-4 border-1 odd:bg-auto-1/5 even:bg-auto-2/2"},[i("div",We,[a(p,{variant:"on",class:"col-span-2"},{default:d(()=>{var u;return[a(m,{modelValue:k.value[e],"onUpdate:modelValue":U=>k.value[e]=U,id:"subtitleProfiles",optionLabel:"label",class:"col-span-2",options:((u=b.value)==null?void 0:u.available_subtitle_codecs)??[]},null,8,["modelValue","onUpdate:modelValue","options"]),o[11]||(o[11]=i("label",{for:"subtitleProfiles"},"Codec",-1))]}),_:2},1024),a(p,{variant:"on",class:"col-span-2"},{default:d(()=>[a(q,{modelValue:Y.value[e],"onUpdate:modelValue":u=>Y.value[e]=u,id:`allowedSubtitleLanguages_${e}`,class:"col-span-2",optionLabel:"label",options:(t==null?void 0:t.available_languages)??[],multiple:""},null,8,["modelValue","onUpdate:modelValue","id","options"]),i("label",{for:`allowedSubtitleLanguages_${e}`},"Allowed languages",8,Xe)]),_:2},1024)]),a(f,{type:"button",onClick:()=>ge(e),id:"addVideoProfile",class:"col-span-2",variant:"text","end-icon":"trash"},null,8,["onClick"])]))),128))])):ee("",!0),(D=n.value)!=null&&D.id?(V(),oe(Ue,{key:2,id:((s=n.value)==null?void 0:s.id)??"",name:((r=n.value)==null?void 0:r.name)??"",close:j,open:M.value},null,8,["id","name","open"])):ee("",!0)]}),_:1},8,["error","params"])}}});export{Vl as default};
