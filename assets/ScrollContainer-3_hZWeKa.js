import{Cn as L,Ht as S,On as z,Qn as u,Qt as M,Sn as T,Tn as m,Wn as v,Zn as p,er as $,in as y,nn as F,tn as b,un as N}from"./index-04Sh3wNb.js";import{i as c}from"./ui-BT6EUdI0.js";import{t as _}from"./router-C_xBvmya.js";import{P as H}from"./SocketClient-DPmgFkP-.js";S();var q=["data-music"],A=N({__name:"ScrollContainer",props:{autoHide:{type:Boolean,default:!1},className:{type:String,required:!1,default:""},static:{type:Boolean,default:!0},frame:{type:Boolean,default:!1}},emits:["scroll"],setup(o){const l=v(),s=v(),a=v(!1);function h(){const t=l.value,r=s.value,e=c.value;if(!t||!e||!r)return;e.scrollTop=0;const n=()=>{if(!e)return;const i=Math.ceil(e.clientHeight/e.scrollHeight*e.clientHeight);t.style.height=`${i}px`;const k=e.scrollTop/e.scrollHeight;t.style.top=`${k*100}%`,e.firstElementChild?.scrollHeight>i||e.scrollHeight>i?a.value=!0:a.value=!1,requestAnimationFrame(n)};requestAnimationFrame(n),t.addEventListener("mousedown",g)}function d(){document.removeEventListener("mouseup",d),document.removeEventListener("mousemove",f)}function g(t){t.preventDefault(),document.addEventListener("mouseup",d),document.addEventListener("mousemove",f)}function C(t,r,e){return Math.min(Math.max(t,r),e)}function f(t){t.preventDefault();const r=l.value,e=s.value,n=c.value;if(!r||!n||!e||t.target?.dataset?.scrollbar)return;const i=C(0,t.clientY-e.getBoundingClientRect().top,e.clientHeight)-r.clientHeight/2;n.scrollTop=(n.scrollHeight-n.clientHeight)*(i/(e.clientHeight-r.clientHeight))}function E(){const t=l.value,r=s.value,e=c.value;!t||!e||!r||(t.removeEventListener("mousedown",g),document.removeEventListener("mouseup",d),document.removeEventListener("mousemove",f))}T(()=>{h()}),L(()=>{E()}),_.afterEach(h);function w(){a.value=!0}function x(){a.value=!1}function B(){}return(t,r)=>(m(),y("div",{ref_key:"scrollContainerElement",ref:c,class:u([{"group/scrollContainer":!o.frame,"group/scrollContainer-frame":o.frame},"flex flex-1 h-available music-showing:h-[calc(100vh-11rem)] z-0 isolate overflow-auto will-change-scroll w-full flex-col scrollbar-none scroll-container text-surface-12"]),"data-music":p(H),tabindex:"1",onFocus:B,onMouseleave:x,onMousemove:w,onScroll:r[0]||(r[0]=e=>t.$emit("scroll",e))},[z(t.$slots,"default"),o.static?(m(),F(M,{key:0,to:"body"},[b("div",{ref_key:"refBar",ref:s,class:u([{"opacity-100":a.value,"opacity-0 pointer-events-none":!a.value,"top-16 bottom-6 mr-1":o.static,"top-0 bottom-0 mr-1":!o.static,"bottom-20":p(H)==="showing",className:o.className},"right-0 mt-2 mb-2 hidden rounded-full border-r-2 border-l-4 border-transparent w-3.5 group-active/scrollContainer-frame:bg-surface-12/6 hover:bg-surface-12/6 sm:flex"]),style:$(`position: ${o.static?"fixed":"absolute"}`),"data-scrollbar":""},[b("span",{ref_key:"refHandle",ref:l,class:u([{"opacity-0 group-hover/scrollContainer-frame:opacity-100":o.autoHide&&!a.value,"!transition-none":!a.value},"absolute top-0 z-10 h-available right-0 bottom-0 hidden rounded-full border-r-2 border-l-4 border-transparent w-2.5 bg-surface-12/11 sm:flex scale-y-[105%]"]),"data-scrollbar":"",draggable:"true"},null,2)],6)])):(m(),y("div",{key:1,ref_key:"refBar",ref:s,class:u([{"opacity-100":a.value,"opacity-0 pointer-events-none":!a.value},"group/bar absolute top-0 mr-1 z-10 h-available right-0 bottom-0 hidden rounded-full border-r-2 border-l-4 border-transparent w-3.5 group-active/scrollContainer-frame:bg-surface-12/6 hover:bg-surface-12/6 sm:flex scale-[100%_96%]"]),"data-scrollbar":""},[b("span",{ref_key:"refHandle",ref:l,class:u([{"opacity-0 group-hover/scrollContainer:opacity-100 group-active/scrollContainer:bg-surface-2/9":!o.static&&o.autoHide,"!transition-none":!a.value},"absolute top-0 z-10 h-available right-0 bottom-0 hidden rounded-full border-r-2 border-l-4 border-transparent w-2.5 bg-surface-12/11 sm:flex scale-y-[105%]"]),"data-scrollbar":"",draggable:"true"},null,2)],2))],42,q))}}),P=A;export{P as t};
