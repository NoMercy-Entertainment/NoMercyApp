import{aw as q,I as n,az as L,cx as S,cy as U,cz as I,bz as H,cl as T,cA as P,bn as z,c9 as A,o as D,c as F,a as d,aB as $,cB as N}from"./index-B3YEJJIP.js";import{n as K}from"./subtitles-octopus-4U8EdB-7.js";import{D as R}from"./desktopUIPlugin--YcpixJ5.js";import{K as V}from"./keyHandlerPlugin-_0sLJyVV.js";const j=["data-music","data-sidebar"],O=q({__name:"Trailer",props:{videos:{type:Array,required:!0},toggle:{type:Function,required:!0},open:{type:Boolean,required:!0},title:{type:String,required:!0},index:{type:Number,required:!0},incrementTrailerIndex:{type:Function,required:!0}},setup(i){const e=i,B=n(),o=n(),a=n();return L(()=>{var u,c,p,v,g,m,f,b,y,x,k,w,h;if(o.value=S.value,U(),I(!0),!((u=e.videos[e.index])!=null&&u.src))return;const l={muted:!1,controls:!1,autoPlay:!0,chapters:!1,preload:"auto",playlist:[{id:e.videos[e.index].src,image:`https://trailer.nomercy.tv/${e.videos[e.index].src}/${e.videos[e.index].src}.jpg`,file:`https://trailer.nomercy.tv/${e.videos[e.index].src}/${e.videos[e.index].src}.webm`,title:`${e.videos[e.index].name.toLocaleLowerCase().includes(e.title.toLocaleLowerCase())?"":`${e.title} - `}${e.videos[e.index].name}`.toTitleCase(),duration:"",description:"",tracks:[{label:"full",file:`https://trailer.nomercy.tv/${e.videos[e.index].src}/${e.videos[e.index].src}.en.vtt`,language:"eng",kind:"subtitles"}]}],playbackRates:[]};a.value=K("trailer").setup(l),(c=a.value)==null||c.once("back",()=>{e.toggle()});const t=new R;(p=a.value)==null||p.registerPlugin("desktopUI",t),(v=a.value)==null||v.usePlugin("desktopUI");const s=new V;(g=a.value)==null||g.registerPlugin("keyHandler",s),(m=a.value)==null||m.usePlugin("keyHandler"),window.trailer=H(a.value),(f=a.value)==null||f.once("ready",()=>{var r;T.value&&((r=a.value)==null||r.enterFullscreen())}),(b=a.value)==null||b.on("ended",()=>{P(o.value),e.toggle()}),(y=a.value)==null||y.on("remove",()=>{e.toggle(),e.incrementTrailerIndex()}),(x=a.value)==null||x.on("error",()=>{e.toggle()}),(k=a.value)==null||k.on("close",()=>{e.toggle()}),(w=a.value)==null||w.on("captionsChanged",r=>{r.track==-1?localStorage.setItem("trailerSubtitles","off"):localStorage.setItem("trailerSubtitles",r.track)}),(h=a.value)==null||h.on("play",()=>{var r,C;localStorage.getItem("trailerSubtitles")=="off"?(r=a.value)==null||r.setCurrentCaption(-1):(C=a.value)==null||C.setCurrentCaption(parseInt(localStorage.getItem("trailerSubtitles")??"-1",10))}),z.addListener("backButton",e.toggle)}),A(()=>{var l;if(P(o.value),I(!1),a.value)try{(l=a.value)==null||l.dispose()}catch{}}),(l,t)=>(D(),F("div",{onClick:t[1]||(t[1]=(...s)=>i.toggle&&i.toggle(...s)),class:"fixed h-full w-full overflow-hidden rounded-lg bg-black/50"},[d("div",{"data-music":$(N),"data-sidebar":$(S),class:"absolute w-screen h-available sm:w-auto sm:overflow-hidden sm:inset-1/2 sm:aspect-video sm:-translate-y-[50%] sidebar-closed:sm:h-[93%] sidebar-closed:px-4 sidebar-closed:py-2 sidebar-closed:xl:px-[1.8rem] sidebar-closed:xl:py-4 sm:-translate-x-[50%] sidebar-open:h-5/6 sidebar-open:px-10 sidebar-open:py-6 sidebar-open:xl:px-[2.8rem] sidebar-open:xl:py-6"},[d("div",{ref_key:"trailerContainer",ref:B,onClick:t[0]||(t[0]=s=>s.stopPropagation()),class:"relative rounded-2xl flex overflow-clip children:overflow-clip w-full h-full children:!w-full children:!h-auto children:!aspect-video"},t[2]||(t[2]=[d("div",{id:"trailer",class:"group nomercyplayer"},null,-1)]),512)],8,j)]))}});export{O as _};
//# sourceMappingURL=Trailer.vue_vue_type_script_setup_true_lang-tD-TI7fr.js.map
