import"./useBaseQuery-DhMTNjjH.js";import{n as z}from"./useInfiniteServerClient-BOGzXRLT.js";import"./useQueryClient-BDTWlHnP.js";import{Ba as L,Ea as R,Gi as u,Hs as w,Ja as q,Ks as v,Lr as D,Ns as E,Os as M,Va as F,Ws as B,X as c,Yo as G,cs as l,dn as K,ec as p,gs as j,i as H,js as r,ks as J,ls as _,ms as N,ns as m,os as O,qa as U,sc as t,sr as W,ss as x,un as I,us as n,va as X}from"./index-zK1-WOQT.js";import"./musicPlaylists-C_vb7EZC.js";import"./contextMenuItems-DhNO6yQR.js";import"./scrollHandlers-DtOHJ6jb.js";import{t as Y}from"./Indexer-DDL8DNqG.js";import"./_plugin-vue_export-helper-CksOYaUN.js";import"./AppLogoSquare-ClEEG0E7.js";import"./OptimizedIcon-BHUzMN75.js";import"./TMDBImage-BTvZBjXB.js";import"./dist-YiGZl1e5.js";import"./CardIndicator-VBpmWWeN.js";import{t as A}from"./NMCard-DTkjfCg8.js";import{t as Q}from"./PersonCard-C_E_weSu.js";import{n as Z,t as $}from"./EmptyCard-DR5VwfRw.js";import"./NoResultImage-CmE2qAus.js";G();U();L();var ee="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",te="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",se=j({__name:"Mobile",setup(re){const i=q(),{data:o,fetchNextPage:b,hasNextPage:y,isError:oe}=z({queryKey:["libraries",(i.params.id??i.name)?.split("&").at(0)],limit:20,keepForever:!0});M(()=>{W(),I(null),K(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),w(o,s=>{s&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const P=O(()=>{const s=o.value?.pages?.[0]?.data?.[0];return s&&D.value&&s.media_type!=="person"&&s.media_type!=="genres"});J(()=>{stop(),I(null)});const h=p(),k=p();M(()=>{k.value=i.params.id??i.name,y.value&&(o?.value?.pages?.length??0)<50&&b(),document.addEventListener("scrollToDiv",s=>{h.value?.scrollTo({top:s.detail.top-100,behavior:"smooth"})})}),F(()=>{document.dispatchEvent(new Event("indexer"))}),w(o,s=>{s&&y.value&&s?.pages?.length<50&&b()});const S=p(),T=p();function f(s,d){S.value=d,T.value.show(s)}return(s,d)=>(r(),l(t(R),null,{default:B(()=>[N(t(X),{fullscreen:!0,class:"ion-padding",style:{"--padding-bottom":"0"}},{default:B(()=>[d[0]||(d[0]=x("div",{class:"fixed top-0 pt-safe w-full bg-surface-1 z-1199"},null,-1)),x("div",{ref_key:"lib",ref:h,class:"pt-safe-offset-9 flex h-auto w-full pr-8 overflow-auto scroll-container"},[(r(),n("div",{key:t(H).currentRoute.value.params?.id,class:v([{"pb-2":t(u)&&t(c),"children:pb-4 sm:children:pb-3":!t(u)&&t(c)},"z-0 flex flex-col gap-4 rounded-3xl border-0 w-available scrollbar-none border-surface-3"])},[x("div",{class:v(`grid w-full gap-4 scroll-smooth music-showing:pb-0 pl-1 py-4 ${P.value?ee:te}`)},[t(o)?(r(!0),n(m,{key:0},E(t(o).pages??[],(C,V)=>(r(),n(m,{key:V},[C.data.length>0?(r(!0),n(m,{key:0},E(C.data??[],(e,g)=>(r(),n(m,null,[e?.media_type==="tv"||e?.media_type==="movie"||e?.media_type==="collection"||e?.media_type==="specials"?(r(),l(A,{key:e.id,data:e,index:g,onContextMenu:a=>f(a,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="person"?(r(),l(Q,{key:`${e.id}_person`,data:e,index:g,onContextMenu:a=>f(a,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="genres"?(r(),l(Z,{key:`${e.id}_genres`,data:e,index:g,onContextMenu:a=>f(a,e)},null,8,["data","index","onContextMenu"])):_("",!0)],64))),256)):t(o).pages?.[0]?.data?.length===0?(r(),l($,{key:1})):_("",!0)],64))),128)):_("",!0)],2)],2)),N(Y,{id:k.value,class:v([{"h-available":!t(u),"h-inherit top-24":t(u),"-mt-4 pt-4 pb-4 mb-0":!t(c),"-mt-4 pt-4 pb-4 mb-14":t(c)},"w-8 fixed right-0 bg-surface-1 transition-all duration-200"])},null,8,["id","class"])],512)]),_:1})]),_:1}))}}),Ce=se;export{Ce as default};
