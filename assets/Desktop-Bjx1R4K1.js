import{aw as P,b3 as j,bt as D,I as $,J as B,aE as O,eu as x,ev as w,aD as E,aF as R,e as m,a7 as I,aB as r,ew as W,bZ as J,ex as M,o as n,v as T,bw as Z,c as V,a as v,z as q,ck as F,b6 as H,F as A,u as G,h as K,bE as Q,bF as U}from"./index-BBWqrHPV.js";import{_ as X,a as Y,b as ee,c as se}from"./TrackRow.vue_vue_type_script_setup_true_lang-CRSp4Ldu.js";import{_ as te}from"./NotFound.vue_vue_type_script_setup_true_lang-Dy7Ira3s.js";import"./BigPlayButton.vue_vue_type_script_setup_true_lang-CZapCokZ.js";import"./FavoriteImage.vue_vue_type_script_setup_true_lang-D3-F8x4s.js";import"./BannerButton.vue_vue_type_script_setup_true_lang-BnNe7hNU.js";const ae={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},de=P({__name:"Desktop",setup(re){const C=j(),{data:a,isError:z}=D({path:C.fullPath,keepForever:!0}),N=$(null),h=$(),c=$("");B(a,e=>{var t,l;e&&(J((e==null?void 0:e.name)??null),p((e==null?void 0:e.tracks)??[],w.value,x.value,c.value),(t=e==null?void 0:e.color_palette)!=null&&t.cover&&E((l=e==null?void 0:e.color_palette)==null?void 0:l.cover))}),B(x,e=>{var t;p(((t=a.value)==null?void 0:t.tracks)??[],w.value,e,c.value)}),B(w,e=>{var t;p(((t=a.value)==null?void 0:t.tracks)??[],e,x.value,c.value)}),B(c,e=>{var t;p(((t=a.value)==null?void 0:t.tracks)??[],w.value,x.value,e)});const p=(e,t,l,s)=>{const i=W(e??[],t,l,M);s==""?h.value=i:h.value=(i==null?void 0:i.filter(o=>{var f,u,_,b,k,y;return((u=o.name)==null?void 0:u.toLowerCase().includes((f=s==null?void 0:s.toLowerCase)==null?void 0:f.call(s)))||((_=o.artist_track)==null?void 0:_.some(L=>{var g;return L.name.toLowerCase().includes((g=s==null?void 0:s.toLowerCase)==null?void 0:g.call(s))}))||((y=(b=o.album_track)==null?void 0:b[0])==null?void 0:y.name.toLowerCase().includes((k=s==null?void 0:s.toLowerCase)==null?void 0:k.call(s)))}))??[]};O(()=>{var e,t,l,s,i,o;(e=a==null?void 0:a.value)!=null&&e.tracks&&p(((t=a==null?void 0:a.value)==null?void 0:t.tracks)??[],w.value,x.value,c.value),(s=(l=a.value)==null?void 0:l.color_palette)!=null&&s.cover&&E((o=(i=a.value)==null?void 0:i.color_palette)==null?void 0:o.cover)}),R(()=>{document.getElementById("navbar")&&(document.getElementById("navbar").style.display="flex"),E(null)});const d=$(),S=()=>{var t,l,s,i,o,f,u,_,b,k,y,L,g;Math.ceil(((s=(l=(t=d.value)==null?void 0:t.$el)==null?void 0:l.getBoundingClientRect())==null?void 0:s.top)??500)<=67?((o=(i=d.value)==null?void 0:i.$el)==null||o.classList.add("!bg-focus"),(_=(u=(f=d.value)==null?void 0:f.$el)==null?void 0:u.firstChild)==null||_.classList.add("!bg-black/50")):((k=(b=d.value)==null?void 0:b.$el)==null||k.classList.remove("!bg-focus"),(g=(L=(y=d.value)==null?void 0:y.$el)==null?void 0:L.firstChild)==null||g.classList.remove("!bg-black/50"))};return(e,t)=>(n(),m(r(U),null,{default:I(()=>[T(r(Q),{fullscreen:!0,class:"flex"},{default:I(()=>[r(z)?(n(),m(te,{key:0})):(n(),m(Z,{key:1,autoHide:!0,static:!0,onScroll:S},{default:I(()=>{var l,s,i;return[!r(C).params.id||r(C).params.id&&((l=r(a))==null?void 0:l.id)==r(C).params.id?(n(),V("div",{key:0,ref_key:"main",ref:N,class:"flex flex-col overflow-x-clip w-available h-available sm:rounded-2xl"},[T(X,{data:r(a)},null,8,["data"]),v("div",ae,[t[1]||(t[1]=v("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom bg-focus"},null,-1)),(n(),m(Y,{key:(s=r(a))==null?void 0:s.id,data:r(a),filter:c.value,onFilterChange:t[0]||(t[0]=o=>c.value=o)},null,8,["data","filter"])),v("div",{class:q(["flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-slate-light-1 dark:bg-slate-dark-2 flex-grow-1 gap-0.5 sm:p-4",{"pb-24":r(F)&&!r(H),"pb-40":r(F)&&r(H),"pb-4 sm:pb-4":!r(F)&&r(H)}])},[(n(),m(ee,{ref_key:"sortHeader",ref:d,key:(i=r(a))==null?void 0:i.id})),(n(!0),V(A,null,G(h.value,(o,f)=>(n(),m(se,{key:o.id,data:o,displayList:h.value,index:f},null,8,["data","displayList","index"]))),128))],2)])],512)):K("",!0)]}),_:1}))]),_:1})]),_:1}))}});export{de as default};
//# sourceMappingURL=Desktop-Bjx1R4K1.js.map
