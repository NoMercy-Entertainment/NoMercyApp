import{I as g,f as T,d as c,o as r,n as A,K as u,a2 as I,s as d,j as v,a as _,t as z,l as y,a7 as D,c as b,b as O,A as V,ad as F,w as G,e2 as K,E as H,dK as U,h as B,F as R,cH as o,bw as w}from"./index-DhiqRu-L.js";import{_ as X}from"./OptimizedIcon.vue_vue_type_script_setup_true_lang-E2HG-OUh.js";import{S as M}from"./swiper-vue-Bh0_GjP7.js";import{a as S,h as q,b as f,f as E,n as s,j as m,t as $,k as N,l as J}from"./imageModal-C778ZgPQ.js";import{C as P}from"./Carousel-CgJi8ilQ.js";import{_ as Q}from"./TMDBImage.vue_vue_type_script_setup_true_lang-Ch2_RmsF.js";import{_ as W}from"./PersonCard.vue_vue_type_script_setup_true_lang-BdmbPRkT.js";const Y={class:"relative flex flex-shrink-0 flex-grow-0 items-center justify-start gap-2 px-1"},Z={class:"flex-shrink-0 flex-grow-0 text-center text-sm font-medium"},pe=g({__name:"GenrePill",props:{genre:{type:Object,required:!0}},setup(t){return(a,n)=>{const l=T("RouterLink");return r(),c(l,{to:`/genre/${t.genre?.id}`,class:A(["relative flex flex-shrink-0 flex-grow-0 items-center justify-start rounded-2xl px-2 py-0.5 hover:!grayscale-0 text-slate-lightA-12 dark:text-slate-darkA-12",u(I)(t.genre?.name).iconBg])},{default:d(()=>[v(X,{"class-name":"relative w-5 flex-shrink-0 flex-grow-0",icon:u(I)(t.genre?.name).icon},null,8,["icon"]),_("div",Y,[_("p",Z,z(t.genre?.name),1)])]),_:1},8,["to","class"])}}}),ee=["onfocus"],te=g({__name:"ImageCard",props:{data:{type:Object,required:!0},aspect:{type:String,required:!1,default:"poster"},setData:{type:Function,required:!0},limitCardCountBy:{type:Number,required:!1}},setup(t){const n=y(D(t.data?.color_palette?.image)?.replace("rgb(","").replace(")","").replace(/,/gu," ")??"var(--color-primary)");return(l,p)=>t.data?(r(),b("button",{key:0,onfocus:u(F),style:V(`--color-focus: ${n.value};`),"data-card":"true",class:"frosting border-0 border-[rgb(var(--color-focus))] flex flex-col h-auto items-center focus-shift focus-outline transition-all duration-200 relative !rounded-lg select-none shadow-[0px_0px_0_1px_rgb(var(--color-focus,var(--color-theme-6))/70%)] w-full z-0 bg-auto-1/8",onClick:p[0]||(p[0]=x=>t.setData(t.data))},[_("span",{class:A(["relative h-auto w-full cursor-pointer overflow-clip rounded-lg",t.aspect==="poster"?" aspect-poster":"aspect-backdrop"])},[v(Q,{"class-name":"inset-0 h-full w-full overflow-clip rounded-lg",class:"!relative",aspect:t.aspect,path:t.data?.src,type:"image",title:t.data?.name,"color-palette":t.data?.color_palette?.image,size:t.aspect==="poster"?162:660},null,8,["aspect","path","title","color-palette","size"])],2)],12,ee)):O("",!0)}}),fe=g({__name:"ImageCarousel",props:{data:{type:Array,required:!0},title:{type:String,required:!0},type:{type:String,required:!1,default:"poster"}},setup(t){const a=t,n=y(!1),l=y();function p(e){f({...e,color_palette:o(e.color_palette)?o(e.color_palette):{image:o(w.value)},aspectRatio:a.type==="poster"?"2/3":"16/9"}),m({type:a.type,index:a.data.indexOf(e)}),J(a.type),E(!0)}function x(){const e=a.data[s.value-1];e&&(m({index:s.value-1,type:$.value.type}),f({...e,color_palette:e.color_palette?o(e.color_palette):{image:o(w.value)},aspectRatio:a.type==="poster"?"2/3":"16/9"}),N(s.value-1))}function h(){const e=a.data[s.value+1];e&&(m({index:s.value+1,type:$.value.type}),f({...e,color_palette:e.color_palette?o(e.color_palette):{image:o(w.value)},aspectRatio:a.type==="poster"?"2/3":"16/9"}),N(s.value+1))}const k=y();function j(){clearInterval(k.value),k.value=setInterval(()=>{a.data[s.value+1]||m({index:0,type:a.type}),h()},15*1e3)}function i(){clearInterval(k.value)}G(S,e=>{e||i()}),K(window,"keyup",e=>{document.activeElement.nodeName!=="TEXTAREA"&&document.activeElement.nodeName!=="INPUT"&&(e.key==="Enter"&&S.value||q.value===a.type&&(e.key==="ArrowLeft"&&(i(),x()),e.key==="ArrowRight"&&(i(),h()),e.key===" "&&(n.value?i():j()),(e.key==="Escape"||e.key==="Backspace")&&(f(null),E(!1),i())))}),H(()=>{l.value=U({el:document.querySelector("#imageModal"),onStart:()=>void 0,onMove:e=>L(e),onEnd:()=>void 0,gestureName:"swipe"})});function L({velocityX:e}){q.value===a.type&&(e>0?x():h())}function ae(){}function re(){}return(e,le)=>(r(),c(P,{title:`${t.title}s`,type:t.type,"disable-auto-aspect":t.type==="poster"},{default:d(()=>[(r(!0),b(R,null,B(t.data,C=>(r(),c(u(M),{key:C.id,class:"flex"},{default:d(()=>[v(te,{data:C,aspect:t.type,"set-data":p},null,8,["data","aspect"])]),_:2},1024))),128))]),_:1},8,["title","type","disable-auto-aspect"]))}}),me=g({__name:"PersonCarousel",props:{data:{type:Array,required:!0},title:{type:String,required:!0},limitCardCountBy:{type:Number,required:!1}},setup(t){return(a,n)=>(r(),c(P,{title:t.title,"limit-card-count-by":t.limitCardCountBy,type:"poster","disable-auto-aspect":!0},{default:d(()=>[(r(!0),b(R,null,B(t.data,l=>(r(),c(u(M),{key:l.id,class:"flex sm:p-1 pl-0"},{default:d(()=>[v(W,{data:l,class:""},null,8,["data"])]),_:2},1024))),128))]),_:1},8,["title","limit-card-count-by"]))}});export{me as _,fe as a,pe as b};
