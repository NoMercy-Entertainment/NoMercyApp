const __vite__fileDeps=["assets/web-CC6zUkaI.js","assets/index-1WLsC2v6.js","assets/index-BsxCsYkp.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{bp as y,bq as O,I as d,b3 as R,az as b,c8 as q,dB as $,bd as B,aw as A,q as L,o as w,c as _,a as o,aB as a,t as P,v as c,aM as m,e as U,a7 as f,bE as V,bF as G}from"./index-1WLsC2v6.js";import{_ as H}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-g3My6HM7.js";import"./FloatingBackButton.vue_vue_type_script_setup_true_lang-BZWYt5_d.js";import"./Button.vue_vue_type_script_setup_true_lang-CqZlgRDM.js";const N=y("Chromecast",{web:()=>O(()=>import("./web-CC6zUkaI.js"),__vite__mapDeps([0,1,2])).then(s=>new s.ChromecastWeb)});function J(){var h,k;const s=d((h=window.cast)==null?void 0:h.framework.CastContext.getInstance()),i=d(null),n=d(),l=d(),r=d(!1),u=d(!1);R(),b(()=>{s.value&&(s.value.setOptions({receiverApplicationId:"925B4C3C",autoJoinPolicy:window.chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED}),console.raw("useChromecast",s.value),s.value.addEventListener(window.cast.framework.CastContextEventType.CONNECTED,function(e){console.log("CastContext: CastState connected",e)}),s.value.addEventListener(window.cast.framework.CastContextEventType.DISCONNECTED,function(e){console.log("CastContext: CastState disconnected",e)}),s.value.addEventListener(window.cast.framework.CastContextEventType.CAST_STATE_CHANGED,function(e){console.log(`CastContext: CastState changed: ${e.castState}`)}),s.value.addEventListener(window.cast.framework.CastContextEventType.SESSION_STATE_CHANGED,function(e){switch(console.log(`CastContext: SessionState changed: ${e.sessionState}`,e),e.sessionState){case window.cast.framework.SessionState.SESSION_STARTED:case window.cast.framework.SessionState.SESSION_RESUMED:s.value=window.cast.framework.CastContext.getInstance(),n.value=e.session,u.value=e.sessionState===window.cast.framework.SessionState.SESSION_RESUMED,r.value=!!e.session,i.value=e.session.getCastDevice(),l.value=e.session.getMediaSession();break;case window.cast.framework.SessionState.SESSION_ENDED:s.value=window.cast.framework.CastContext.getInstance(),n.value=null,u.value=!1,r.value=!1,i.value=null,l.value=null;break}}))});const g=()=>{console.raw("startCasting",s.value),n.value=null,window.chrome.cast.requestSession(v,C)},t=()=>{console.raw("stopCasting",s.value),window.cast.framework.CastContext.getInstance().endCurrentSession(!0),n.value=null};q(()=>{});function v(e){n.value=e,console.log("onRequestSessionSuccess",e),u.value=!0,r.value=!0,i.value=e==null?void 0:e.receiver,p("7Xdu1sAAAAASUVORK5CYII","video")}function C(e){console.error(e)}function S(e){console.log("onMediaDiscovered",e),l.value=e}function T(e){console.error("onMediaError",e)}function p(e,x){var D;console.log("sendMedia",e,x);const I=new window.chrome.cast.media.MediaInfo(e,x);I.customData=E;const M=new window.chrome.cast.media.LoadRequest(I);(D=n.value)==null||D.loadMedia(M,S,T)}const E={refreshToken:((k=$.value)==null?void 0:k.refreshToken)??localStorage.getItem("refresh_token"),redirectUrl:B.resolve({name:"Watch",params:{id:60808,type:"tv"}}).path};return{isCasting:r,isConnected:u,currentDevice:i,config:E,startCasting:g,stopCasting:t,sendMedia:p}}const K={class:"flex flex-col gap-4"},W={key:0},X={key:1},Y={class:"flex gap-4"},z=["disabled"],F=["disabled"],j={class:"flex gap-4"},Q=["onclick"],Z=["onclick"],ee=A({__name:"Chromecast",setup(s){const{currentDevice:i,isCasting:n,config:l,startCasting:r,stopCasting:u}=J();return b(()=>{console.log("mounted",l)}),(g,t)=>{var C;const v=L("google-cast-launcher");return w(),_("div",null,[t[6]||(t[6]=o("h1",null,"Chromecast Demo",-1)),o("div",K,[a(i)?(w(),_("div",X,[o("h2",null,"Connected to: "+P((C=a(i))==null?void 0:C.friendlyName),1)])):(w(),_("div",W,t[2]||(t[2]=[o("h2",null,"No device connected",-1)]))),o("div",Y,[c(v),o("button",{class:"flex gap-2 items-center",onClick:t[0]||(t[0]=S=>a(r)()),disabled:a(n)},[c(m,{icon:"chromecast",className:"m-2 h-6 w-auto"}),t[3]||(t[3]=o("span",null,"Start Casting",-1))],8,z),o("button",{class:"flex gap-2 items-center",onClick:t[1]||(t[1]=S=>a(u)()),disabled:!a(n)},[c(m,{icon:"stop",className:"m-2 h-6 w-auto"}),t[4]||(t[4]=o("span",null,"Stop Casting",-1))],8,F)]),o("div",j,[o("button",{class:"flex gap-2 items-center",onclick:()=>a(N).requestSession()},[c(m,{icon:"chromecast",className:"m-2 h-6 w-auto"}),t[5]||(t[5]=o("span",null,"Start Casting",-1))],8,Q),o("button",{class:"flex gap-2 items-center",onclick:()=>a(N).loadMedia({contentId:"7Xdu1sAAAAASUVORK5CYII",type:"video",customData:a(l)})},[c(m,{icon:"play",className:"m-2 h-6 w-auto"})],8,Z)])])])}}}),te={class:"grid place-content-center w-available h-available"},ie=A({__name:"Desktop",setup(s){return(i,n)=>(w(),U(a(G),null,{default:f(()=>[c(a(V),{fullscreen:!0},{default:f(()=>[c(H,{title:"Notifications",gridStyle:2},{cta:f(()=>n[0]||(n[0]=[])),default:f(()=>[o("div",te,[c(ee)])]),_:1})]),_:1})]),_:1}))}});export{ie as default};
//# sourceMappingURL=Desktop-_iss2sss.js.map
