import"./useBaseQuery-DhMTNjjH.js";import"./useInfiniteServerClient-BOGzXRLT.js";import"./useQueryClient-BDTWlHnP.js";import"./useQuery-UqFzG2sc.js";import{Ba as P,Ea as _,Er as C,Gi as p,Ha as h,Hs as w,Io as n,Ks as I,U as d,Va as M,Ws as v,Yo as S,ci as N,cs as f,ec as B,fa as T,fi as U,gs as V,i as a,ii as s,is as x,js as m,ms as D,pi as A,sc as i,si as E,ss as g,va as L}from"./index-zK1-WOQT.js";import{s as c}from"./imageModal-CsFJnOhE.js";import{t as j}from"./useServerClient-BWjN3Na1.js";import{i as z,n as H,o as F,r as G,s as K}from"./VideoPlayer-CyXJOi7Z.js";import"./buttons-DRw175vE.js";import{t as R}from"./videoNoMercyConnectPlugin-BmqFBfLP.js";S();P();var W=V({__name:"Mobile",setup(Y){const{data:u}=j({enabled:!s.value.features?.nomercyConnect}),e=B();function r(o){const t={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:o?.filter(l=>!!l.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:s.value?.accessToken||localStorage.getItem("access_token")||"",basePath:C.value?.serverBaseUrl,forceTvMode:(n("android")||n("ios"))&&!n("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||n("capacitor"),renderAhead:100,disableAutoPlayback:s.value.features?.nomercyConnect};if(e.value?.dispose(),e.value=G("player1").setup(t),e.value?.once("back",()=>{history.state.back?a.back():a.replace("/")}),s.value.features?.nomercyConnect){const l=new R;e.value?.registerPlugin("videoNoMercyConnect",l),e.value?.usePlugin("videoNoMercyConnect")}const y=new z;e.value?.registerPlugin("desktopUI",y),e.value?.usePlugin("desktopUI");const b=new F;if(e.value?.registerPlugin("autoSkip",b),e.value?.usePlugin("autoSkip"),!s.value.features?.nomercyConnect){const l=new K;e.value?.registerPlugin("sync",l),e.value?.usePlugin("sync")}const k=new H;e.value?.registerPlugin("octopus",k),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?a.back():a.replace("/")}),e.value?.on("dispose",()=>{A(),E(),history.state.back?a.back():a.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{c(!0)}),e.value?.on("pause",()=>{c(!1)}),e.value?.on("ready",()=>{U(),N(),d.stop()}),e.value?.on("item",()=>{e.value?.play()}),T.addListener("backButton",()=>{e.value?.emit("back-button-hyjack"),e.value?.dispose()})}return w(u,o=>{o?.length&&r(o)}),M(()=>{d.stop(),s.value.features?.nomercyConnect?r():u.value?.length&&r(u.value)}),h(()=>{e.value?.dispose(),c(!1)}),(o,t)=>(m(),f(i(_),null,{default:v(()=>[D(i(L),{fullscreen:!0},{default:v(()=>[(m(),f(x,{to:"body"},[g("div",{class:I([{"mb-28":i(p),"mb-0":!i(p)},"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"])},[...t[0]||(t[0]=[g("div",{id:"player1",class:"group nomercyplayer"},null,-1)])],2)]))]),_:1})]),_:1}))}}),oe=W;export{oe as default};
