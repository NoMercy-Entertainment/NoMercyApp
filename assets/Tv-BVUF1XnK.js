import{I as q,E as I,a8 as _,w as k,c as u,o as r,a as o,K as c,R as $,b as p,bm as L,t as y,A as E,cT as j,f as V,d as g,F as h,h as S,c6 as K,l as v,ci as R,s as U,j as H,bu as z,bh as P}from"./index-H-vD2rqS.js";import{u as O}from"./useServerClient-DCS4BGnu.js";import"./useQuery-C5_JtCKV.js";import"./useBaseQuery-x8hgGQVw.js";import"./useQueryClient-B5STIjF7.js";import"./useInfiniteServerClient-B-2LPPx2.js";const G={class:"w-available h-available absolute left-[202px] top-0 overflow-hidden bg-focus"},J=["src"],Q={class:"flex flex-col justify-start items-start w-[484px] relative left-[58px] top-20 gap-7"},W={class:"flex flex-col justify-start items-start self-stretch relative gap-5"},X={class:"flex flex-col justify-start items-start w-full relative gap-0 mt-8"},Y=["innerHTML"],Z={class:"flex items-center h-8 gap-2 self-stretch w-full opacity-60 text-xs font-medium text-left text-[#c4c7c5]"},ee={key:0,class:"flex gap-2"},te={key:1,class:"flex gap-2"},se={class:"line-clamp-4 text-sm -mt-4"},le=q({__name:"MusicHeader",props:{selected:{type:Object,required:!1}},setup(s){const d=s;return I(()=>{_(d.selected?.color_palette?.cover)}),k(d,a=>{_(a.selected?.color_palette?.cover)}),(a,i)=>(r(),u("div",{key:s.selected?.id,class:"w-full h-full absolute left-0 top-0 bg-[#131314]",style:E(c(j)?`--color-focus: ${c(j)}`:"")},[o("div",G,[o("img",{class:"w-available h-available absolute left-[-0.39px] top-[-0.39px] opacity-40 object-cover object-center",src:`${c($)?.serverBaseUrl}${s.selected?.cover}`,alt:""},null,8,J),i[0]||(i[0]=o("div",{class:"w-available h-available absolute left-[-0.39px] top-[-0.39px]"},null,-1)),i[1]||(i[1]=o("div",{class:"w-[150vw] h-[150vw] absolute left-[-30%] bottom-[-50%]",style:{background:`radial-gradient(
            closest-side,
            rgba(19, 19, 20, 0.1) 0%,
            rgba(19, 19, 20, 1) 70.73974609375%
          )`}},null,-1))]),o("div",Q,[o("div",W,[o("div",X,[s.selected?.name?(r(),u("p",{key:0,class:"self-stretch flex-grow-0 flex-shrink-0 w-full text-3xl font-bold text-left z-10",innerHTML:c(L)(s.selected?.name??" ","text-lg line-clamp-2")},null,8,Y)):p("",!0),o("div",Z,[s.selected?.type?(r(),u("span",ee,[o("span",null,y(s.selected?.type.replace(/s$/u,"").toTitleCase()),1)])):p("",!0),s.selected?.tracks?(r(),u("span",te,[i[2]||(i[2]=o("span",null,"â€¢",-1)),o("span",null,y(s.selected?.tracks)+" "+y(a.$t("tracks")),1)])):p("",!0)])]),o("div",se,y(s.selected?.description),1)])])],4))}}),ae={key:0,"data-row":"",class:"grid grid-rows-[auto_1fr] grid-cols-7 relative justify-start flex-1 w-full gap-3 mb-2 mt-4"},oe={class:"row-start-1 col-span-7 pointer-events-none font-semibold font-3xl"},re=["src"],ne=q({__name:"TvCarousel2",props:{data:{type:Array,required:!0},title:{type:String,required:!0},handleFocus:{type:Function,required:!0},handleDown:{type:Function,required:!0},handleUp:{type:Function,required:!0},suffix:{type:String,required:!1,default:""}},setup(s){return(d,a)=>{const i=V("RouterLink");return r(),u(h,null,[s.data.length?(r(),u("div",ae,[o("h3",oe,y(s.title),1),(r(!0),u(h,null,S(s.data?.slice(0,7),(n,x)=>(r(),g(i,{key:n.id,to:`${n.props?.data.link}${s.suffix}`,"data-card":n.props?.data.id,"data-index":x,class:"row-start-2 w-full h-auto rounded-xl bg-cover aspect-square focus:scale-105 focus:outline outline-[2.2px] outline-white transition-transform duration-200 scroll-mb-20 scroll-mt-8 snap-top snap-mandatory",style:E(`background-image: url('${c($)?.serverBaseUrl}${n.props.data.cover}')`),onFocus:f=>s.handleFocus(f,n.props.data),onKeydown:a[0]||(a[0]=f=>s.handleDown(f)),onKeyup:a[1]||(a[1]=f=>s.handleUp(f))},null,8,["to","data-card","data-index","style","onFocus"]))),128))])):p("",!0),(r(),g(K,{to:".image-preload-container"},[(r(!0),u(h,null,S(s.data?.slice(0,7),n=>(r(),u("img",{key:n.id,src:`${c($)?.serverBaseUrl}${n.props.data.cover}`,width:"0",height:"0",loading:"eager",alt:"",class:"absolute"},null,8,re))),128))]))],64)}}}),ie={class:"w-screen h-screen relative overflow-hidden bg-[#131314]"},ve=q({__name:"Tv",setup(s){const{data:d}=O({queryKey:["music","home"]}),a=v(),i=v(),n=v(!1),x=v(),f=v();k(d,e=>{if(!e)return;const t=e.filter(l=>l.component==="NMCarousel");t&&(a.value=t.find(l=>l.props.items.length>0)?.props?.items?.[0]?.props?.data)}),R(()=>{const e=d.value?.filter(t=>t.component==="NMCarousel");e&&(a.value=e.find(t=>t.props.items.length>0)?.props?.items?.[0]?.props?.data,setTimeout(()=>{const t=document.querySelector(`[data-card="${a.value?.id}"]`);t&&t.focus()},100))}),k(a,e=>{setTimeout(()=>{const t=document.querySelector(`[data-card="${e?.id}"]`);t&&t.focus()},100)});function C(e,t){const l=e.target;if(l?.nodeName==="DIV"){(f.value??l.querySelector("a"))?.focus();return}t&&(a.value=t,f.value=l)}function M(e){if(n.value){e.preventDefault();return}clearTimeout(x.value),n.value=!0;const t=e.target,l=t.getAttribute("data-index"),A=t.closest("[data-row]"),w=A?.previousElementSibling,B=w?.querySelector(`a[data-index="${l}"]`),b=A?.nextElementSibling,D=b?.querySelector(`a[data-index="${l}"]`),F=t.previousElementSibling,T=t.nextElementSibling;if(B&&e.key==="ArrowUp")e.preventDefault(),B.focus();else if(D&&e.key==="ArrowDown")e.preventDefault(),D.focus();else if(F&&e.key==="ArrowLeft")e.preventDefault(),F.focus();else if(T&&e.key==="ArrowRight")e.preventDefault(),T.focus();else if(w&&e.key==="ArrowUp"){const m=Array.from(w?.querySelectorAll("a"))?.at(-1);m&&m.focus()}else if(b&&e.key==="ArrowDown"){const m=Array.from(b?.querySelectorAll("a"))?.at(-1);m&&m.focus()}}function N(){x.value=setTimeout(()=>{n.value=!1},150)}return(e,t)=>(r(),g(c(P),null,{default:U(()=>[H(c(z),{fullscreen:!0},{default:U(()=>[o("div",ie,[a.value?(r(),g(le,{key:0,selected:a.value},null,8,["selected"])):p("",!0),o("div",{ref_key:"scrollContainer",ref:i,tabindex:"0",class:"flex flex-col justify-start items-start w-available -mx-3 px-3 absolute left-14 right-14 top-[320px] h-available overflow-auto scroll-smooth gap-4 flex-1 pb-8",onFocus:t[0]||(t[0]=l=>C(l))},[c(d)?(r(!0),u(h,{key:0},S(c(d)?.filter?.(l=>l.component==="NMCarousel")??[],l=>(r(),g(ne,{key:l.id,title:l.props.title,data:l.props.items??[],"handle-focus":C,"handle-down":M,"handle-up":N},null,8,["title","data"]))),128)):p("",!0)],544)])]),_:1})]),_:1}))}});export{ve as default};
