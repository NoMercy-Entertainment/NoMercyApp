import{C as g,Ct as a,Et as I,J as q,K as v,S as n,T as z,U as J,c as O,g as U,it as k,j as G,k as _,mt as f,ot as W,w as K,wt as M,x as u}from"./i18n-fABvX7Av.js";import{ya as Y}from"./ionic-DIYphHxf.js";import{C as D,R as Q,U as X,W as Z,_ as ee}from"./vue-core-hXf_Oh5G.js";import"./primevue-C3smGU9Q.js";import"./dist-CJipjyJM.js";import"./query-BsKzQ1i8.js";import"./esm-D1nPlPuN.js";import{t as te}from"./esm-Dqy1ik-w.js";import{Hn as ae,Jn as h,b as re,gi as se,k as oe,qn as y,zn as L,zr as le}from"./index-BLaXrj-1.js";import"./DropdownMenu-CWQSLCgS.js";import"./useInfiniteServerClient--tepFmQf.js";import{t as ie}from"./useServerClient-CAFkyL_G.js";import"./MusicButton-D3h3Wo3R.js";import"./BannerButton-BQ15F6wN.js";import"./MediaLikeButton-BhRoGlJr.js";import{t as ne}from"./Marquee-bwaY14kp.js";import"./TrackLinks-DD6qXC0x.js";import"./BigPlayButton-C3VHd7UJ.js";import"./EqSpinner-LfivdokY.js";import{t as ue}from"./NotFound-C7SEODoa.js";import"./ShareButton-BiiHtkl_.js";import{i as ce,n as de,r as pe,t as ve}from"./TrackRow-sgYsKDug.js";O();X();var fe={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},me={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},he=G({__name:"Mobile",setup(ye){const s=Z(),b=u(()=>s.path.startsWith("/music/album")),w=u(()=>s.path.startsWith("/music/artist")),C=u(()=>s.path.startsWith("/music/playlists")),S=u(()=>s.path.startsWith("/music/tracks")),T=u(()=>s.path.startsWith("/music/genres")),P=u(()=>b.value?"album":w.value?"artist":C.value?"playlist":S.value?"favorite":T.value?"genre":"unknown"),V=u(()=>String(s.params.id??"")),{data:e,isError:$}=ie({path:s.fullPath}),j=f(null),c=f([]),i=f("");k(e,t=>{se(t?.name??null),m(t?.tracks??[],h.value,y.value,i.value),L(t?.color_palette?.cover)}),k(y,t=>{m(e.value?.tracks??[],h.value,t,i.value)}),k(h,t=>{m(e.value?.tracks??[],t,y.value,i.value)}),k(i,t=>{m(e.value?.tracks??[],h.value,y.value,t)});function m(t,l,r,o){const d=le(t??[],l,r,ae);o===""?c.value=d:c.value=d?.filter(p=>p.name?.toLowerCase().includes(o?.toLowerCase?.())||p.artist_track?.some(A=>A.name.toLowerCase().includes(o?.toLowerCase?.()))||p.album_track?.[0]?.name.toLowerCase().includes(o?.toLowerCase?.()))??[]}J(()=>{m(e?.value?.tracks??[],h.value,y.value,i.value),e.value?.color_palette?.cover&&L(e.value?.color_palette?.cover)}),Q(()=>{m(e?.value?.tracks??[],h.value,y.value,i.value),e.value?.color_palette?.cover&&L(e.value?.color_palette?.cover)});function F(){oe.back()}const x=f(!1),N=f(!1),B=f(),H=f(),E=u(()=>te({count:c.value?.length??0,getScrollElement:()=>H.value?.$el??null,estimateSize:()=>56,overscan:10}));function R(){const r=Y("capacitor")?88:64,o=B.value?.$el,d=o?.firstChild;if(!o||!d)return;const p=o.getBoundingClientRect().top;x.value=p<=170,N.value=p<=160,p<=r?document.documentElement.classList.contains("scheme-dark")?d.style.background="hsl(from var(--color-theme-8) h s 23%)":(d.style.background="var(--color-theme-8)",o.style.color="white"):(d.style.background="",o.style.color="")}return(t,l)=>(v(),g(a(D),null,{default:W(()=>[_(a(ee),{ref_key:"container",ref:H,"scroll-events":!0,onIonScroll:R},{default:W(()=>[a($)&&!a(e)?(v(),g(ue,{key:0})):!a(s).params.id||a(s).params.id&&a(e)?.id===a(s).params.id?(v(),z("div",{key:1,ref_key:"main",ref:j,class:"flex flex-col h-auto overflow-x-clip w-available sm:rounded-2xl -mt-6 text-surface-12"},[_(pe,{data:a(e)},null,8,["data"]),n("div",fe,[l[2]||(l[2]=n("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),n("div",{id:"navbar",class:M([{"opacity-0 pointer-events-none":!x.value,"opacity-100 pointer-events-auto":x.value},"fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-surface-11 dark:bg-surface-1 top-0 pt-4 transition-all duration-200"])},[l[1]||(l[1]=n("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-all duration-200 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),n("button",{class:"z-30 flex h-10 w-11 items-center justify-center rounded-md",onClick:F},[_(re,{icon:"arrowLeft"})]),n("div",{id:"navText",class:M([{"opacity-0 pointer-events-none":!x.value,"opacity-100 pointer-events-auto":x.value},"pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-all duration-200 w-[70%] overflow-clip text-xl"])},[_(ne,{text:a(e)?.name},null,8,["text"])],2)],2),(v(),g(ce,{key:a(e)?.id,data:a(e),filter:i.value,onFilterChange:l[0]||(l[0]=r=>i.value=r)},null,8,["data","filter"])),n("div",me,[(v(),g(de,{key:a(e)?.id,ref_key:"sortHeader",ref:B,"is-album-route":b.value,"is-artist-route":w.value,"is-playlists-route":C.value,"is-favorites-route":S.value,"is-genres-route":T.value},null,8,["is-album-route","is-artist-route","is-playlists-route","is-favorites-route","is-genres-route"])),n("div",{style:I({height:`${E.value.value.getTotalSize()}px`,width:"100%",position:"relative"})},[(v(!0),z(U,null,q(E.value.value.getVirtualItems(),r=>(v(),z("div",{key:c.value[r.index]?.id+c.value[r.index]?.favorite,style:I({position:"absolute",top:0,left:0,width:"100%",height:`${r.size}px`,transform:`translateY(${r.start}px)`})},[_(ve,{data:c.value[r.index],"display-list":c.value,index:r.index,"is-album-route":b.value,"is-artist-route":w.value,"is-playlists-route":C.value,"is-favorites-route":S.value,"is-genres-route":T.value,"route-type":P.value,"route-param-id":V.value},null,8,["data","display-list","index","is-album-route","is-artist-route","is-playlists-route","is-favorites-route","is-genres-route","route-type","route-param-id"])],4))),128))],4)])])],512)):K("",!0)]),_:1},512)]),_:1}))}}),Ne=he;export{Ne as default};
