import{C as s,Et as v,G as x,J as a,K as R,S as F,T as l,Tt as r,X as y,c as I,ct as V,g as i,gt as u,j as $,ot as h,w as k,x as z}from"./i18n-Cs-AFcrY.js";import"./ionic-XwZpO7IE.js";import{I as G,P as K}from"./vue-core-CKeWI2Kt.js";import"./query-28IwY2wK.js";import{Hn as L,Ui as C,Vn as b,Y as w,gi as U,k as E,oa as j}from"./index-C8qOb1zQ.js";import{n as q}from"./useInfiniteServerClient-BcqmW98U.js";import{t as H}from"./ScrollContainer-CB6t7sqE.js";import"./CardIndicator-MhlYWOBI.js";import{t as J}from"./NMCard-YnuIG4Hc.js";import{t as X}from"./NotFound-bOH7HiJw.js";import{t as Y}from"./PersonCard-j2dIVnz0.js";import{n as A,t as O}from"./EmptyCard-dNnKxjRZ.js";I();K();var Q="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",W="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",Z=$({__name:"Desktop",setup(ee){const d=G(),{data:o,fetchNextPage:m,hasNextPage:g,isError:M}=q({queryKey:["libraries",d?.params.id??d.name],limit:20,keepForever:!0});x(()=>{U(),b(null),L(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),h(o,t=>{t&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const B=z(()=>{const t=o.value?.pages?.[0]?.data?.[0];return t&&j.value&&t.media_type!=="person"&&t.media_type!=="genres"});R(()=>{stop(),b(null)});const N=u(),S=u();x(()=>{S.value=d.params.id??d.name,g.value&&(o?.value?.pages?.length??0)<10&&m(),document.addEventListener("scrollToDiv",t=>{N.value?.scrollTo({top:t.detail.top-100,behavior:"smooth"})})}),h(o,t=>{t&&g.value&&t?.pages?.length<10&&m()});const T=u(),P=u();function c(t,_){T.value=_,P.value.show(t)}return(t,_)=>r(M)&&!r(o)?.pages?(a(),s(X,{key:0})):(a(),s(H,{key:1,id:r(E).currentRoute.value.fullPath,"auto-hide":!0,static:!0},{default:V(()=>[(a(),l("div",{key:r(E).currentRoute.value.params?.id,class:v([{"pb-24":r(C)&&!r(w),"pb-40":r(C)&&r(w)},"z-0 flex flex-col gap-4 rounded-3xl border-0 p-4 w-available scrollbar-none border-surface-3 transform-gpu will-change-auto"])},[F("div",{class:v(`grid w-full gap-4 scroll-smooth music-showing:pb-0 whitespace-pre ${B.value?Q:W}`)},[(a(!0),l(i,null,y(r(o)?.pages??[],(f,D)=>(a(),l(i,{key:D},[f.data.length>0?(a(!0),l(i,{key:0},y(f.data??[],(e,p)=>(a(),l(i,null,[e?.media_type==="tv"||e?.media_type==="movie"||e?.media_type==="collection"||e?.media_type==="specials"?(a(),s(J,{key:e.id,data:e,index:p,onContextMenu:n=>c(n,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="person"?(a(),s(Y,{key:`${e.id}_person`,data:e,index:p,onContextMenu:n=>c(n,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="genres"?(a(),s(A,{key:`${e.id}_genres`,data:e,index:p,onContextMenu:n=>c(n,e)},null,8,["data","index","onContextMenu"])):k("",!0)],64))),256)):r(o)?.pages?.[0]?.data?.length===0?(a(),s(O,{key:1})):k("",!0)],64))),128))],2)],2))]),_:1},8,["id"]))}}),me=Z;export{me as default};
