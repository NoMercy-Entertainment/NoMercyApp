import{Gn as W}from"./index-CymNhKD_.js";var q,z,A,C,j,Q=W(()=>{q=class{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(t){var e;return new z(this,this.newID(),t.name,(e=t.priority)!==null&&e!==void 0?e:0,!!t.disableScroll)}createBlocker(t={}){return new A(this,this.newID(),t.disable,!!t.disableScroll)}start(t,e,s){return this.canStart(t)?(this.requestedStart.set(e,s),!0):(this.requestedStart.delete(e),!1)}capture(t,e,s){if(!this.start(t,e,s))return!1;const n=this.requestedStart;let a=-1e4;if(n.forEach(i=>{a=Math.max(a,i)}),a===s){this.capturedId=e,n.clear();const i=new CustomEvent("ionGestureCaptured",{detail:{gestureName:t}});return document.dispatchEvent(i),!0}return n.delete(e),!1}release(t){this.requestedStart.delete(t),this.capturedId===t&&(this.capturedId=void 0)}disableGesture(t,e){let s=this.disabledGestures.get(t);s===void 0&&(s=new Set,this.disabledGestures.set(t,s)),s.add(e)}enableGesture(t,e){const s=this.disabledGestures.get(t);s!==void 0&&s.delete(e)}disableScroll(t){this.disabledScroll.add(t),this.disabledScroll.size===1&&document.body.classList.add(C)}enableScroll(t){this.disabledScroll.delete(t),this.disabledScroll.size===0&&document.body.classList.remove(C)}canStart(t){return!(this.capturedId!==void 0||this.isDisabled(t))}isCaptured(){return this.capturedId!==void 0}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(t){const e=this.disabledGestures.get(t);return!!(e&&e.size>0)}newID(){return this.gestureId++,this.gestureId}},z=class{constructor(t,e,s,n,a){this.id=e,this.name=s,this.disableScroll=a,this.priority=n*1e6+e,this.ctrl=t}canStart(){return this.ctrl?this.ctrl.canStart(this.name):!1}start(){return this.ctrl?this.ctrl.start(this.name,this.id,this.priority):!1}capture(){if(!this.ctrl)return!1;const t=this.ctrl.capture(this.name,this.id,this.priority);return t&&this.disableScroll&&this.ctrl.disableScroll(this.id),t}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}},A=class{constructor(t,e,s,n){this.id=e,this.disable=s,this.disableScroll=n,this.ctrl=t}block(){if(this.ctrl){if(this.disable)for(const t of this.disable)this.ctrl.disableGesture(t,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const t of this.disable)this.ctrl.enableGesture(t,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}},C="backdrop-no-scroll",j=new q}),p,R,E,k,B,P,F,U,T,I,L,N=W(()=>{Q(),p=(t,e,s,n)=>{const a=R(t)?{capture:!!n.capture,passive:!!n.passive}:!!n.capture;let i,l;return t.__zone_symbol__addEventListener?(i="__zone_symbol__addEventListener",l="__zone_symbol__removeEventListener"):(i="addEventListener",l="removeEventListener"),t[i](e,s,a),()=>{t[l](e,s,a)}},R=t=>{if(E===void 0)try{const e=Object.defineProperty({},"passive",{get:()=>{E=!0}});t.addEventListener("optsTest",()=>{},e)}catch{E=!1}return!!E},k=2e3,B=(t,e,s,n,a)=>{let i,l,o,h,d,c,b,m=0;const y=f=>{m=Date.now()+k,e(f)&&(!l&&s&&(l=p(t,"touchmove",s,a)),o||(o=p(f.target,"touchend",r,a)),h||(h=p(f.target,"touchcancel",r,a)))},X=f=>{m>Date.now()||e(f)&&(!c&&s&&(c=p(P(t),"mousemove",s,a)),b||(b=p(P(t),"mouseup",v,a)))},r=f=>{S(),n&&n(f)},v=f=>{Y(),n&&n(f)},S=()=>{l&&l(),o&&o(),h&&h(),l=o=h=void 0},Y=()=>{c&&c(),b&&b(),c=b=void 0},_=()=>{S(),Y()},g=(f=!0)=>{f?(i||(i=p(t,"touchstart",y,a)),d||(d=p(t,"mousedown",X,a))):(i&&i(),d&&d(),i=d=void 0,_())};return{enable:g,stop:_,destroy:()=>{g(!1),n=s=e=void 0}}},P=t=>t instanceof Document?t:t.ownerDocument,F=(t,e,s)=>{const n=s*(Math.PI/180),a=t==="x",i=Math.cos(n),l=e*e;let o=0,h=0,d=!1,c=0;return{start(b,m){o=b,h=m,c=0,d=!0},detect(b,m){if(!d)return!1;const y=b-o,X=m-h,r=y*y+X*X;if(r<l)return!1;const v=(a?y:X)/Math.sqrt(r);return v>i?c=1:v<-i?c=-1:c=0,d=!1,!0},isGesture(){return c!==0},getDirection(){return c}}},U=t=>{let e=!1,s=!1,n=!0,a=!1;const i=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},t),l=i.canStart,o=i.onWillStart,h=i.onStart,d=i.onEnd,c=i.notCaptured,b=i.onMove,m=i.threshold,y=i.passive,X=i.blurOnStart,r={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},v=F(i.direction,i.threshold,i.maxAngle),S=j.createGesture({name:t.gestureName,priority:t.gesturePriority,disableScroll:t.disableScroll}),Y=u=>{const M=L(u);return s||!n||(I(u,r),r.startX=r.currentX,r.startY=r.currentY,r.startTime=r.currentTime=M,r.velocityX=r.velocityY=r.deltaX=r.deltaY=0,r.event=u,l&&l(r)===!1)||(S.release(),!S.start())?!1:(s=!0,m===0?G():(v.start(r.startX,r.startY),!0))},_=u=>{if(e){!a&&n&&(a=!0,T(r,u),requestAnimationFrame(g));return}T(r,u),v.detect(r.currentX,r.currentY)&&(!v.isGesture()||!G())&&H()},g=()=>{e&&(a=!1,b&&b(r))},G=()=>S.capture()?(e=!0,n=!1,r.startX=r.currentX,r.startY=r.currentY,r.startTime=r.currentTime,o?o(r).then(O):O(),!0):!1,f=()=>{if(typeof document<"u"){const u=document.activeElement;u?.blur&&u.blur()}},O=()=>{X&&f(),h&&h(r),n=!0},D=()=>{e=!1,s=!1,a=!1,n=!0,S.release()},x=u=>{const M=e,K=n;if(D(),!!K){if(T(r,u),M){d&&d(r);return}c&&c(r)}},w=B(i.el,Y,_,x,{capture:!1,passive:y}),H=()=>{D(),w.stop(),c&&c(r)};return{enable(u=!0){u||(e&&x(void 0),D()),w.enable(u)},destroy(){S.destroy(),w.destroy()}}},T=(t,e)=>{if(!e)return;const s=t.currentX,n=t.currentY,a=t.currentTime;I(e,t);const i=t.currentX,l=t.currentY,o=(t.currentTime=L(e))-a;if(o>0&&o<100){const h=(i-s)/o,d=(l-n)/o;t.velocityX=h*.7+t.velocityX*.3,t.velocityY=d*.7+t.velocityY*.3}t.deltaX=i-t.startX,t.deltaY=l-t.startY,t.event=e},I=(t,e)=>{let s=0,n=0;if(t){const a=t.changedTouches;if(a&&a.length>0){const i=a[0];s=i.clientX,n=i.clientY}else t.pageX!==void 0&&(s=t.pageX,n=t.pageY)}e.currentX=s,e.currentY=n},L=t=>t.timeStamp||Date.now()});export{Q as a,j as i,N as n,C as r,U as t};
