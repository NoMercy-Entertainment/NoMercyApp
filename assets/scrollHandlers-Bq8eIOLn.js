import{cm as u}from"./index-BlsCkKvU.js";class d{player;isMouseDown=!1;isScrubbing=!1;valuePercentage=0;dragPercentage=0;sliderBar={};sliderValue={};sliderNipple={};sliderHover={};targetElement;callbackFn;getSizeFn;constructor(t,i,s,o){this.player=i,this.targetElement=t,this.callbackFn=s,this.getSizeFn=o,this.targetElement&&(this.sliderBar=this.targetElement.querySelector(".slider-bar"),this.sliderValue=this.targetElement.querySelector(".slider-value"),this.sliderNipple=this.targetElement.querySelector(".slider-nipple"),this.sliderHover=this.targetElement.querySelector(".slider-hover"),!(!this.sliderBar||!this.sliderValue||!this.sliderNipple||!this.sliderHover)&&this.init())}getScrubTime(t,i){const s=i.getBoundingClientRect();let r=(t.clientX??t.touches?.[0]?.clientX??t.changedTouches?.[0]?.clientX??0)-s.left;r<=0&&(r=0),r>=s.width&&(r=s.width);let l=100;return this.getSizeFn&&typeof this.player[this.getSizeFn]=="function"&&(l=this.player[this.getSizeFn]()),{scrubValue:r/i.offsetWidth*100,scrubValuePlayer:r/i.offsetWidth*l}}handleMouseDown(){this.isMouseDown=!0}handleMouseUp(t){this.isMouseDown=!1,this.isScrubbing=!1,this.sliderNipple.style.removeProperty("--force-left"),this.sliderValue.style.removeProperty("--force-width");const i=this.getScrubTime(t,this.sliderBar);typeof this.player[this.callbackFn]=="function"&&this.player[this.callbackFn](i.scrubValuePlayer)}handleMouseMove(t){const i=this.getScrubTime(t,this.sliderBar);this.isMouseDown&&(this.sliderNipple.style.setProperty("--force-left",`${i.scrubValue}%`),this.sliderValue.style.setProperty("--force-width",`${i.scrubValue}%`),this.valuePercentage=i.scrubValue,typeof this.player[this.callbackFn]=="function"&&!this.getSizeFn&&this.player[this.callbackFn](i.scrubValue)),this.dragPercentage=Math.round(i.scrubValue),this.sliderHover.style.width=`${i.scrubValue}%`}handleMouseEnter(){this.sliderNipple.style.display="flex"}handleMouseLeave(){this.isScrubbing=!1,this.isMouseDown=!1,this.sliderNipple.style.removeProperty("--force-left"),this.sliderValue.style.removeProperty("--force-width"),this.sliderNipple.style.display="",this.sliderHover.style.width="0"}handleTouchStart(){this.isMouseDown=!0,this.sliderNipple.style.display="flex"}handleTouchMove(t){if(this.isMouseDown){this.isScrubbing=!0;const i=this.getScrubTime(t,this.sliderBar);this.sliderNipple.style.setProperty("--force-left",`${i.scrubValue}%`),this.sliderValue.style.setProperty("--force-width",`${i.scrubValue}%`),typeof this.player[this.callbackFn]=="function"&&this.player[this.callbackFn](i.scrubValuePlayer)}}handleTouchEnd(t){this.isMouseDown=!1,this.isScrubbing=!1,this.sliderNipple.style.display="",this.sliderNipple.style.removeProperty("--force-left"),this.sliderValue.style.removeProperty("--force-width");const i=this.getScrubTime(t,this.sliderBar);typeof this.player[this.callbackFn]=="function"&&this.player[this.callbackFn](i.scrubValuePlayer)}init(){this.sliderBar.addEventListener("mousedown",this.handleMouseDown.bind(this)),this.sliderBar.addEventListener("mouseup",this.handleMouseUp.bind(this)),this.sliderBar.addEventListener("mousemove",this.handleMouseMove.bind(this)),this.sliderBar.addEventListener("mouseenter",this.handleMouseEnter.bind(this)),this.sliderBar.addEventListener("mouseleave",this.handleMouseLeave.bind(this)),this.sliderBar.addEventListener("touchstart",this.handleTouchStart.bind(this)),this.sliderBar.addEventListener("touchmove",this.handleTouchMove.bind(this)),this.sliderBar.addEventListener("touchend",this.handleTouchEnd.bind(this))}}HTMLElement.prototype.sliderBar=function(e,t,i){return!(this instanceof HTMLElement)||this.dataset.type!=="slider-bar"?null:new d(this,e,t,i)};HTMLElement.prototype.scrollHorizontalIntoView=function(e){if(!(this instanceof HTMLElement))return;const t=this.getBoundingClientRect(),i=e??this.parentElement;if(!i)return;const s=t.left-i.getBoundingClientRect().left;i.scrollTo({left:s,behavior:"smooth"})};HTMLElement.prototype.scrollVerticalIntoView=function(e){if(!(this instanceof HTMLElement))return;const t=this.getBoundingClientRect(),i=e??this.parentElement;if(!i)return;const s=t.top-i.getBoundingClientRect().top;i.scrollTo({top:s,behavior:"smooth"})};HTMLElement.prototype.animateVerticalIntoView=function(e=null,t=420){if(!(this instanceof HTMLElement))return;const i=this.getBoundingClientRect();if(e||(e=this.parentElement),!e)return;const s=i.top-e.getBoundingClientRect().top-e.getBoundingClientRect().height/2,o=performance.now(),r=e.scrollTop;function l(h){if(!e)return;const a=h-o;let n=Math.min(a/t,1);n=f(n),e.scrollTo(0,r+s*n),a<t&&requestAnimationFrame(l)}requestAnimationFrame(l)};HTMLElement.prototype.isVisible=function(e){if(!this)return!1;const t=this.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(e?.offsetHeight||document.documentElement.clientHeight)&&t.right<=(e?.offsetWidth||document.documentElement.clientWidth)};Document.prototype.querySelectorAllArray=function(e){return Array.from(this.querySelectorAll(e))};Element.prototype.querySelectorAllArray=function(e){return Array.from(this.querySelectorAll(e))};HTMLElement.prototype.querySelectorAllArray=function(e){return Array.from(this.querySelectorAll(e))};function f(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1}let c;function p(e){clearTimeout(c);let t=null;e==="#"?t=document.querySelector("ion-tabs ion-router-outlet div.ion-page:not(.ion-page-hidden) [data-scroll]"):t=document.querySelector(`ion-tabs ion-router-outlet div.ion-page:not(.ion-page-hidden) [data-scroll='scroll_${e}']`),document.dispatchEvent(new CustomEvent("scrollToDiv",{detail:{top:t?.offsetTop}}));let i=document.querySelector(".ion-page:not(.ion-page-hidden) main .group\\/scrollContainer");i||(i=document.querySelector(".ion-page:not(.ion-page-hidden) ion-content .scroll-container")),t&&i&&(i.scrollTo({top:t.offsetTop-120,behavior:"smooth"}),c=setTimeout(()=>{t?.classList.add("flashing"),setTimeout(()=>{t?.classList.remove("flashing")},3e3)},700))}function m(e){e.key&&u("#","Z").some(t=>t===e.key.toUpperCase())&&p(e.key?.toUpperCase())}export{m as k,p as s};
