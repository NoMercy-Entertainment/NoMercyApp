import{aG as K,bb as j,e4 as q,az as B,c9 as G,aP as $,aM as O,L as I,ax as Q,aW as U,ch as W,K as g,d1 as A,j as d,o as n,a7 as h,x as J,aI as s,bQ as X,bH as Y,bn as N,c as p,C as P,cu as v,bh as m,a as Z,F as _,w as R,h as S,bO as ee}from"./index-CRPEwL84.js";import{_ as ae}from"./MediaCard.vue_vue_type_script_setup_true_lang-C-FB5k25.js";import{_ as se}from"./PersonCard.vue_vue_type_script_setup_true_lang-BpqBf7iF.js";import{_ as ne,a as oe}from"./EmptyCard.vue_vue_type_script_setup_true_lang-DVpyvEuO.js";import{_ as re}from"./NotFound.vue_vue_type_script_setup_true_lang-49foX44s.js";import"./CardIndicator.vue_vue_type_script_setup_true_lang-ChQ7J2vp.js";import"./NoResultImage.vue_vue_type_script_setup_true_lang-cOee-5lt.js";const te="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",le="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",xe=K({__name:"Desktop",setup(de){const c=j(),{data:r,fetchNextPage:y,hasNextPage:b,isError:T}=q({queryKey:["libraries",(c==null?void 0:c.params.id)??c.name],limit:20,keepForever:!0});B(()=>{G(),$(null),O(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),I(r,a=>{a&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const V=Q(()=>{var o,l,t,u;const a=(u=(t=(l=(o=r.value)==null?void 0:o.pages)==null?void 0:l[0])==null?void 0:t.data)==null?void 0:u[0];return a&&U.value&&a.media_type!=="person"&&a.media_type!=="genres"});W(()=>{stop(),$(null)});const z=g(),D=g();B(()=>{var a,o;D.value=c.params.id??c.name,b.value&&(((o=(a=r==null?void 0:r.value)==null?void 0:a.pages)==null?void 0:o.length)??0)<50&&y(),document.addEventListener("scrollToDiv",l=>{var t;(t=z.value)==null||t.scrollTo({top:l.detail.top-100,behavior:"smooth"})})}),A(()=>{document.dispatchEvent(new Event("indexer"))}),I(r,a=>{var o;a&&b.value&&((o=a==null?void 0:a.pages)==null?void 0:o.length)<50&&y()});const F=g(),L=g(),f=(a,o)=>{F.value=o,L.value.show(a)};return(a,o)=>(n(),d(s(ee),null,{default:h(()=>[J(s(X),{fullscreen:!0},{default:h(()=>{var l;return[s(T)&&!((l=s(r))!=null&&l.pages)?(n(),d(re,{key:0})):(n(),d(Y,{key:1,autoHide:!0,static:!0,id:s(N).currentRoute.value.fullPath},{default:h(()=>{var t,u;return[(n(),p("div",{ref:"containerRef",class:P(["z-0 flex flex-col gap-4 rounded-3xl border-0 p-4 w-available scrollbar-none border-auto-3 transform-gpu will-change-auto",{"pb-24":s(v)&&!s(m),"pb-40":s(v)&&s(m),"children:pb-4 sm:children:pb-3":!s(v)&&s(m)}]),key:(t=s(N).currentRoute.value.params)==null?void 0:t.id},[Z("div",{class:P(`grid w-full gap-4 scroll-smooth music-showing:pb-0 whitespace-pre ${V.value?te:le}`)},[(n(!0),p(_,null,R(((u=s(r))==null?void 0:u.pages)??[],(k,H)=>{var C,w,E,M;return n(),p(_,{key:H},[k.data.length>0?(n(!0),p(_,{key:0},R(k.data??[],(e,x)=>(n(),p(_,null,[(e==null?void 0:e.media_type)==="tv"||(e==null?void 0:e.media_type)=="movie"||(e==null?void 0:e.media_type)=="collection"||(e==null?void 0:e.media_type)=="specials"?(n(),d(ae,{key:e.id,data:e,onContextMenu:i=>f(i,e),index:x},null,8,["data","onContextMenu","index"])):(e==null?void 0:e.media_type)==="person"?(n(),d(se,{key:e.id+"_person",data:e,onContextMenu:i=>f(i,e),index:x},null,8,["data","onContextMenu","index"])):(e==null?void 0:e.media_type)==="genres"?(n(),d(ne,{key:e.id+"_genres",data:e,onContextMenu:i=>f(i,e),index:x},null,8,["data","onContextMenu","index"])):S("",!0)],64))),256)):((M=(E=(w=(C=s(r))==null?void 0:C.pages)==null?void 0:w[0])==null?void 0:E.data)==null?void 0:M.length)==0?(n(),d(oe,{key:1})):S("",!0)],64)}),128))],2)],2))]}),_:1},8,["id"]))]}),_:1})]),_:1}))}});export{xe as default};
