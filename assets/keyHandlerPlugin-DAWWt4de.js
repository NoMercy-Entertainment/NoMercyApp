import{c as a}from"./VideoPlayer-DDVKLtPO.js";var s=class extends a{player={};boundKeyHandler=()=>{};initialize(e){this.player=e,this.boundKeyHandler=this.keyHandler.bind(this)}use(){this.player.options.disableControls||document.addEventListener("keyup",this.boundKeyHandler,!1)}dispose(){document.removeEventListener("keyup",this.boundKeyHandler)}keyHandler(e){if(document.activeElement?.nodeName=="INPUT")return;const n=this.keyBindings();let o=!1;this.player.getVideoElement().getBoundingClientRect().width!=0&&(!o&&this.player&&(o=!0,n.some(t=>t.key===e.key&&t.control===e.ctrlKey)&&(e.preventDefault(),n.find(t=>t.key===e.key&&t.control===e.ctrlKey)?.function())),setTimeout(()=>{o=!1},300))}hasNoMercyConnect(){return this.player.plugins.has("videoNoMercyConnect")}getNoMercyConnectSocket(){return this.hasNoMercyConnect()?this.player.plugins.get("videoNoMercyConnect")?.socket:null}sendNoMercyConnectCommand(e,n){if(this.hasNoMercyConnect())try{const o=this.getNoMercyConnectSocket();o?o.invoke("PlaybackCommand",e,n!==null?n:null):console.error("No NoMercyConnect socket available")}catch(o){console.error("Error invoking PlaybackCommand:",o)}else console.warn("No NoMercyConnect plugin available")}handleForward(){this.hasNoMercyConnect()?this.sendNoMercyConnectCommand("forward"):this.player.forwardVideo()}handleBackward(){this.hasNoMercyConnect()?this.sendNoMercyConnectCommand("backward"):this.player.rewindVideo()}handlePlayback(){this.hasNoMercyConnect()?this.sendNoMercyConnectCommand(this.player.isPlaying?"pause":"play"):this.player.togglePlayback()}handlePrevious(){this.hasNoMercyConnect()?this.sendNoMercyConnectCommand("previous"):this.player.previous()}handleNext(){this.hasNoMercyConnect()?this.sendNoMercyConnectCommand("next"):this.player.next()}handleCycleCaption(){this.hasNoMercyConnect()?this.sendNoMercyConnectCommand("cycleCaption"):this.player.cycleSubtitles()}handleCycleAudio(){this.hasNoMercyConnect()?this.sendNoMercyConnectCommand("cycleAudio"):this.player.cycleAudioTracks()}keyBindings(){return[{name:"Play",key:"MediaPlay",control:!1,function:()=>{this.player.options.disableMediaControls||(this.hasNoMercyConnect()?this.sendNoMercyConnectCommand("play"):this.player.play().then())}},{name:"Pause",key:"MediaPause",control:!1,function:()=>{this.player.options.disableMediaControls||(this.hasNoMercyConnect()?this.sendNoMercyConnectCommand("pause"):this.player.pause())}},{name:"Toggle playback",key:" ",control:!1,function:()=>{this.handlePlayback()}},{name:"Toggle playback",key:"MediaPlayPause",control:!1,function:()=>{this.player.options.disableMediaControls||this.handlePlayback()}},{name:"Stop",key:"MediaStop",control:!1,function:()=>{this.player.options.disableMediaControls||(this.hasNoMercyConnect()?this.sendNoMercyConnectCommand("stop"):this.player.stop())}},{name:"Rewind",key:"ArrowLeft",control:!1,function:()=>!this.player.isTv()&&this.handleBackward()},{name:"Rewind",key:"MediaRewind",control:!1,function:()=>{!this.player.isTv()&&this.player.options.disableMediaControls||this.handleBackward()}},{name:"Fast forward",key:"ArrowRight",control:!1,function:()=>!this.player.isTv()&&this.handleForward()},{name:"Fast forward",key:"MediaFastForward",control:!1,function:()=>{this.player.options.disableMediaControls||this.handleForward()}},{name:"Previous item",key:"MediaTrackPrevious",control:!1,function:()=>{this.player.options.disableMediaControls||this.handlePrevious()}},{name:"Previous item",key:"p",control:!1,function:()=>this.handlePrevious()},{name:"Next item",key:"MediaTrackNext",control:!1,function:()=>{this.player.options.disableMediaControls||this.handleNext()}},{name:"Next item",key:"n",control:!1,function:()=>this.handleNext()},{name:"Cycle subtitle tracks",key:"Subtitle",control:!1,function:()=>this.handleCycleCaption()},{name:"Cycle subtitle tracks",key:"5",control:!1,function:()=>this.handleCycleCaption()},{name:"Cycle subtitle tracks",key:"v",control:!1,function:()=>this.handleCycleCaption()},{name:"Cycle audio tracks",key:"Audio",control:!1,function:()=>this.handleCycleAudio()},{name:"Cycle audio tracks",key:"2",control:!1,function:()=>this.handleCycleAudio()},{name:"Cycle audio",key:"b",control:!1,function:()=>this.handleCycleAudio()},{name:"Forward 30 seconds",key:"ColorF0Red",control:!1,function:()=>{this.hasNoMercyConnect()?this.sendNoMercyConnectCommand("forward",30):this.player.forwardVideo(30)}},{name:"Forward 60 seconds",key:"ColorF1Green",control:!1,function:()=>{this.hasNoMercyConnect()?this.sendNoMercyConnectCommand("forward",60):this.player.forwardVideo(60)}},{name:"Forward 90 seconds",key:"ColorF2Yellow",control:!1,function:()=>{this.hasNoMercyConnect()?this.sendNoMercyConnectCommand("forward",90):this.player.forwardVideo(90)}},{name:"Forward 120 seconds",key:"ColorF3Blue",control:!1,function:()=>{this.hasNoMercyConnect()?this.sendNoMercyConnectCommand("forward",120):this.player.forwardVideo(120)}},{name:"Forward 30 seconds",key:"3",control:!1,function:()=>{this.hasNoMercyConnect()?this.sendNoMercyConnectCommand("forward",30):this.player.forwardVideo(30)}},{name:"Forward 60 seconds",key:"6",control:!1,function:()=>{this.hasNoMercyConnect()?this.sendNoMercyConnectCommand("forward",60):this.player.forwardVideo(60)}},{name:"Forward 90 seconds",key:"9",control:!1,function:()=>{this.hasNoMercyConnect()?this.sendNoMercyConnectCommand("forward",90):this.player.forwardVideo(90)}},{name:"Forward 120 seconds",key:"1",control:!1,function:()=>{this.hasNoMercyConnect()?this.sendNoMercyConnectCommand("forward",120):this.player.forwardVideo(120)}},{name:"Fullscreen",key:"f",control:!1,function:()=>{this.player.toggleFullscreen()}},{name:"Volume up",key:"ArrowUp",control:!1,function:()=>{!this.player.isTv()&&!this.player.isMobile()&&this.player.volumeUp()}},{name:"Volume down",key:"ArrowDown",control:!1,function:()=>{!this.player.isTv()&&!this.player.isMobile()&&this.player.volumeDown()}},{name:"Mute",key:"m",control:!1,function:()=>{this.player.toggleMute()}},{name:"Cycle aspect ratio",key:"BrowserFavorites",control:!1,function:()=>{this.player.cycleAspectRatio()}},{name:"Cycle aspect ratio",key:"a",control:!1,function:()=>{this.player.cycleAspectRatio()}},{name:"Show info",key:"Info",control:!1,function:()=>{}}].map((e,n)=>({...e,id:n}))}},r=s;export{r as t};
