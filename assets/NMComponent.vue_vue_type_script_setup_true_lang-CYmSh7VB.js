import{$ as b,W as k,a9 as w,f as K,aH as M,w as m,aa as E,h as f,b as I,a0 as s,o as l,z as S,aX as x,q as C,c as B,t as D,m as F,F as H}from"./vue-ionic-DRNtAYzz.js";import{q as v,g as N,a as O,b as V}from"./routerHelper-9lLhJ0IV.js";const P={key:0,class:"grid w-available h-available place-items-center"},j=b({__name:"NMComponent",props:{path:{type:String,required:!1,default:void 0},options:{type:Object,required:!1,default:()=>({keepForever:!0,queryKey:v()})}},setup(y){const r=y,i=r.options.queryKey??v(),g=N({queryKey:i,path:r.path}),{data:a,isLoading:h}=O({queryKey:i,path:r.path}),{data:q,mutate:c}=V({queryKey:i,homeData:a}),o=k(),u=w();function d(){if(!a.value||!o.value)return;const t=a.value.filter(n=>{var e;return((e=n==null?void 0:n.update)==null?void 0:e.when)==="pageLoad"})??[];c(t)}function _(){if(!a.value||!o.value)return;const t=a.value.filter(n=>{var e;return((e=n==null?void 0:n.update)==null?void 0:e.when)==="online"})??[];c(t)}function p(t){if(!a.value||!o.value)return;const n=a.value.filter(e=>(e==null?void 0:e.id)===t.detail.id)??[];c(n)}return K(()=>{document.addEventListener("mutateId",p),!(!a.value||u.name!=="Home"&&u.name!=="Libraries"&&u.name!=="Music Start")&&o.value&&d()}),M(()=>{document.removeEventListener("mutateId",p)}),m(o,t=>{t&&_()}),m(a,t=>{t&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),E(()=>{!a.value||u.name!=="Home"&&u.name!=="Libraries"&&u.name!=="Music Start"||o.value&&d()}),(t,n)=>s(h)?(l(),f("div",P,[S(s(x),{name:"crescent",class:"ion-padding"})])):!s(g)||!s(o)?(l(!0),f(H,{key:1},C(s(q)??s(a)??[],(e,L)=>(l(),B(D(e==null?void 0:e.component),F({key:e.id,index:L,ref_for:!0},e.props),null,16,["index"]))),128)):I("",!0)}});export{j as _};
