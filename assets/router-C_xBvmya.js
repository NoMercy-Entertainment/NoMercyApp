const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BaseLayout-BUuxdAVf.js","assets/_plugin-vue_export-helper-B_iOTHZb.js","assets/index-04Sh3wNb.js","assets/index-B6ihSDsN.css","assets/utils-CdenF_Jv.js","assets/esm-cDzTb79E.js","assets/dist-CVoPesok.js","assets/bundle-mjs-Xm_uQvzT.js","assets/ui-BT6EUdI0.js","assets/esm-BuRgllmc.js","assets/esm-9iWgK55i.js","assets/esm-BfF1RlcU.js","assets/client-DMa-uSBE.js","assets/user-C1ciKa7-.js","assets/global-gyhCjh_P.js","assets/esm-CcKFjObu.js","assets/currentServer-B7-kbkE-.js","assets/config-BOA2pGQM.js","assets/SocketClient-DPmgFkP-.js","assets/index2-op38TIl9.js","assets/helpers-CXS86XKs.js","assets/index5-B30D6T27.js","assets/index6-CZ6rqL_0.js","assets/ionic-global--aoJHCDL.js","assets/client-rtF7IPPI.js","assets/keyboard-cU79cwdW.js","assets/dir-BUtgAzbR.js","assets/focus-visible-CHAJCf_J.js","assets/index3-CSo3jo06.js","assets/hardware-back-button-h528z6zo.js","assets/index8-BpkFXja0.js","assets/ios.transition-C8T7q-Bo.js","assets/keyboard2-DETZ41vp.js","assets/md.transition-BqH5iNQr.js","assets/utils-D5DD-7jP.js","assets/deviceInfo-Bcw3-ht5.js","assets/esm-BuFVrMo0.js","assets/ChristmasSnow-BvWel7VW.js","assets/render-jaZ14Rbq.js","assets/basecomponent-Dw-Pzf3B.js","assets/button-Bwdcz6Ds.js","assets/classnames-DtEYS8u9.js","assets/baseicon-pCfUe6Zj.js","assets/portal-pBInmK3o.js","assets/useQueryClient-s6ZLwuD6.js","assets/md5-DV93ZS5Z.js","assets/dist-iWIfSzlj.js","assets/MoooomIcon-DNWQYuYD.js","assets/PlayerIcon-DPtv61Du.js","assets/ScrollContainer-3_hZWeKa.js","assets/TMDBImage-Dcp6aBnk.js","assets/AppLogoSquare-DJq6h5gt.js","assets/AppLogoSquare-tviIpcab.css","assets/MusicButton-OKP8kSIv.js","assets/SliderBar-BwAAoT_w.js","assets/serverClient-FHPKIHPu.js","assets/contextMenuItems-kfaglZX4.js","assets/musicPlaylists-CCn4HshY.js","assets/imageModal-B_AIV_up.js","assets/dist-B3n7-doU.js","assets/Toggle-DSbq3Ccp.js","assets/baseeditableholder-CPfgMqWC.js","assets/swiper-vue-Dzagr7Ak.js","assets/DropdownMenu-DlwBmVb0.js","assets/BannerButton-BVJ9NTRE.js","assets/MediaLikeButton-Cg9WrOdx.js","assets/MediaLikeButton-DgtJX4Bs.css","assets/CoverImage-_aGqf_Rg.js","assets/helpers-fSCF1qXj.js","assets/auth-DfyD43WY.js","assets/apiClient-Cw7f36ko.js","assets/notifications-Bi_dU6lP.js","assets/BaseLayout-0kuq_a9g.css","assets/BaseLayout-Bnq1yVbx.js","assets/HubConnection-BtQMN1V5.js","assets/konami-D5WpKJLa.js","assets/times-BvY9yfvH.js","assets/useInfiniteServerClient-By5CuBlL.js","assets/useBaseQuery-CNJp2kAB.js","assets/useMutationState-gvf_f5mV.js","assets/useQuery-C7DDAmeN.js","assets/RipperOverlay-BWEr7uxe.js","assets/Button-BOqv4y1r.js","assets/useMounted-CBZpV1fi.js","assets/ripperSocket-C9kIp3Ty.js","assets/Indexer-Cosg43p-.js","assets/scrollHandlers-Q4mAayRR.js","assets/Indexer-BajI4Owj.css","assets/AppLogo-DjURElg_.js","assets/AppLogo-BxAvpjKC.css","assets/KeepCounting-YCks9kYD.js","assets/Marquee-B69hKqb8.js","assets/useServerClient-CroZbKWw.js","assets/search-Bi1A2x3Y.js","assets/sidebar-0eIlG_n7.js","assets/BaseLayout-C8Dvn23K.css","assets/Collection-Dro0vCFB.js","assets/AuthView-D19EUP_W.js","assets/Logout-DAbthQgD.js","assets/ExploreContainer-C1tN4Vz5.js","assets/ExploreContainer-BZmj7tlQ.css","assets/Home-BC8HaDKj.js","assets/Info-mAvW0cHA.js","assets/Libraries-DvvmGf7U.js","assets/Library-BjlpR12N.js","assets/PaginatedLibrary-ly-zg-IC.js","assets/Person-Jx88XlYy.js","assets/Search-Bhqr-oGw.js","assets/Watch-DOBUPdvB.js","assets/Artist-Bricpyck.js","assets/Cards-B1g2AvQp.js","assets/List-BhVdLAsE.js","assets/Start-D0c8qk5e.js","assets/Logs-UsjTLHRH.js","assets/Plugins-BX9wteIg.js","assets/Schedule-DoO1NaxV.js","assets/Metadata-C7QlHfQs.js","assets/Ripper-DfOsNK0M.js","assets/Specials-DPKEiLqz.js","assets/Activity-BN8wjQXL.js","assets/Devices-BHzBN-J5.js","assets/Dlna-rZQScqfO.js","assets/EncoderProfiles-B58QoEpH.js","assets/General-DpGdzbK6.js","assets/Libraries-YsuQETdB.js","assets/Notifications-DLiBFM1l.js","assets/System-gYPNeBSh.js","assets/Users-CZDYk_qj.js","assets/Controls-CKMa-hEF.js","assets/Display-CIBB03MC.js","assets/Profile-BhtmzGr6.js","assets/Subtitles-BOUKqBFt.js","assets/Cast-KzA2oHxB.js","assets/Download-CJeJR08r.js","assets/SelectServers-h-b5E9cZ.js","assets/NoServers-BJp3fXnK.js","assets/ServerOffline-DqelCSYG.js","assets/PostInstall-CrD2gRHb.js","assets/NotFound-CdaMZz3c.js","assets/Edit-B9gsg5w1.js","assets/Select-BLlxAKlI.js","assets/use-text-value-COXJi4Sa.js","assets/DashboardLayout-CXf1x5EO.js","assets/FloatingBackButton-D3UgtlFi.js","assets/Modal-B2WRzJvm.js","assets/Modal-VkhBf0wd.css","assets/useApiClient-CCMNDw1L.js","assets/Edit-hdW8Hjvo.js","assets/FolderBrowser-D4gd39Zo.js","assets/LanguageSelect-BaXxaE3H.js","assets/NoResultImage-DlrmSoaZ.js","assets/Edit-S8VbocT0.js","assets/inputtext-FoiCFKHp.js","assets/Show-CvuYKMIB.js","assets/card-D438fss_.js","assets/ActivityCard-DDchTKUS.js","assets/Edit-CzUfO3FU.js"])))=>i.map(i=>d[i]);
import{Bt as s,Ht as I,In as re,J as ke,Vt as Oe,Wn as S,Y as Ve,Z as ce,en as A,jt as F,q as Be,qn as Ce,u as De}from"./index-04Sh3wNb.js";import{n as ee}from"./dist-B3n7-doU.js";import{f as He}from"./ui-BT6EUdI0.js";import{n as te,t as T}from"./currentServer-B7-kbkE-.js";import{f as Ae}from"./global-gyhCjh_P.js";import{c as P,n as ae}from"./user-C1ciKa7-.js";import{t as N}from"./serverClient-FHPKIHPu.js";import{$ as ue,a as le,l as x,t as j,tt as pe}from"./SocketClient-DPmgFkP-.js";import{t as oe}from"./apiClient-Cw7f36ko.js";import{a as Me}from"./notifications-Bi_dU6lP.js";import{r as Ue}from"./auth-DfyD43WY.js";Ve();I();var xe=()=>{const e=[],a={},t=i=>{switch(i.routerAction){case"pop":v(i);break;default:f(i);break}i.routerDirection==="root"&&(E(),f(i))},o=i=>{const c=e.findIndex(u=>u.id===i.id);c>-1&&e.splice(c,1,i);const r=a[i.tab||""];if(r){const u=r.findIndex(h=>h.id===i.id);u>-1?r.splice(u,1,i):r.push(i)}else i.tab&&(a[i.tab]=[i])},v=i=>{const c=d(i.tab);let r;if(c){for(r=c[c.length-1];r&&r.id!==i.id;)c.pop(),r=c[c.length-1];c.pop(),c.push(i)}for(r=e[e.length-1];r&&r.id!==i.id;)e.pop(),r=e[e.length-1];e.pop(),e.push(i)},f=i=>{const c=d(i.tab);c&&(c[c.length-1]&&c[c.length-1].id===i.id&&c.pop(),c.push(i)),e.push(i)},E=i=>{if(i){const{position:c,tab:r}=i,u=e.findIndex(_=>_.position===c);if(u===-1)return;e.splice(u);const h=_=>{const R=a[_].findIndex(n=>n.position===c);R!==-1&&a[_].splice(R)},L=a[r];if(r&&L)h(r);else for(const _ in a)h(_)}else{for(const c in a)a[c]=[];e.length=0}},d=i=>{let c;return i&&(c=a[i],c||(c=a[i]=[])),c},O=()=>e.length,V=(i,c)=>{const r=c-i;return e[r]||w()},w=()=>e[e.length-1];return{current:V,size:O,last:w,add:t,canGoBack:(i=1,c,r)=>r-i>=c,update:o,getFirstRouteInfoForTab:i=>{const c=d(i);if(c)return c[0]},getCurrentRouteInfoForTab:i=>{const c=d(i);if(c)return c[c.length-1]},findLastLocation:(i,c=-1)=>{const r=d(i.tab);if(r){if(c<-1)return r[r.length-1+c];for(let u=r.length-2;u>=0;u--){const h=r[u];if(h&&h.pathname===i.pushedByRoute)return h}}for(let u=e.length-2;u>=0;u--){const h=e[u];if(h&&h.pathname===i.pushedByRoute)return e[u+1+c]}},clearHistory:E}},de={main:0},Te=(e="main")=>{var a;const t=((a=de[e])!==null&&a!==void 0?a:0)+1;return de[e]=t,t.toString()},qe=(e,a)=>{let t={direction:void 0,action:void 0,delta:void 0};a.afterEach((n,m,l)=>{if(l)return;const{direction:g,action:D,delta:p}=t;f=e.history.state.position;const M=e.history.state.replaced?"replace":void 0;G(n,D||M,g,p),t={direction:void 0,action:void 0,delta:void 0}});const o=xe();let v=e.history.state.position,f=e.history.state.position,E,d;const O=[];typeof document<"u"&&document.addEventListener("ionBackButton",n=>{n.detail.register(0,m=>{e.history.go(-1),m()})}),e.history.listen((n,m,l)=>{t={delta:l.delta,action:l.type==="pop"&&l.delta>=1?"push":l.type,direction:l.direction===""?"forward":l.direction}});const V=(n,m)=>{const l=o.current(v,f);if(l&&l.pushedByRoute){const g=o.findLastLocation(l);g?(d=Object.assign(Object.assign({},g),{routerAction:"pop",routerDirection:"back",routerAnimation:m||l.routerAnimation}),l.lastPathname===l.pushedByRoute||g.pathname===l.pushedByRoute&&!l.tab&&!g.tab?a.back():a.go(g.position-l.position)):w(n,"pop","back",m)}else w(n,"pop","back",m)},w=(n,m,l,g,D)=>{h(m,l,g,D),m==="push"?a.push(n):a.replace(n)},G=(n,m,l,g)=>{let D;if(d)if(d.routerAction==="replace")D=o.current(v,f);else if(d.routerAction==="pop")D=o.current(v,f+1),m==="replace"&&o.clearHistory();else{const p=d.routerDirection==="root"?f:f-1;D=o.current(v,p)}else D=E;if(D||(D={pathname:"",search:""}),D.pathname+D.search!==n.fullPath){if(!d){if(m==="replace")d={routerAction:"replace",routerDirection:"none"};else if(m==="pop"){const U=o.current(v,f-g);if(U&&U.pushedByRoute){const b=o.findLastLocation(U,g);d=Object.assign(Object.assign({},b),{routerAction:"pop",routerDirection:"back"})}else d={routerAction:"pop",routerDirection:"none"}}d||(d={routerAction:"push",routerDirection:l||"forward"})}let p;if(d?.id)p=Object.assign(Object.assign({},d),{lastPathname:D.pathname});else{const U=d.routerAction==="push"&&d.routerDirection==="forward";if(p=Object.assign(Object.assign({id:Te("routeInfo")},d),{lastPathname:D.pathname,pathname:n.path,search:n.fullPath&&n.fullPath.split("?")[1]||"",params:n.params&&n.params,prevRouteLastPathname:D.lastPathname}),U)p.pushedByRoute=D.pathname!==""?D.pathname:void 0;else if(p.routerAction==="pop"){const b=o.findLastLocation(p);p.pushedByRoute=b?.pushedByRoute}else if(p.routerAction==="push"&&p.tab!==D.tab){const b=o.getCurrentRouteInfoForTab(p.tab);p.pushedByRoute=b?.pushedByRoute}else if(p.routerAction==="replace"){const b=o.current(v,f),J=b?.pushedByRoute,we=J!==void 0&&J!==p.pathname?J:p.pushedByRoute;p.lastPathname=b?.pathname||p.lastPathname,p.pushedByRoute=we,p.routerDirection=b?.routerDirection||p.routerDirection,p.routerAnimation=b?.routerAnimation||p.routerAnimation,p.prevRouteLastPathname=b?.lastPathname}}p.position=f,p.delta=g;const M=o.size(),se=f-v;M>se||M===se&&M>0&&m==="replace"?(p.routerAction==="push"||p.routerAction==="replace")&&g===void 0&&(o.clearHistory(p),o.add(p)):o.add(p),o.size()===1&&(v=p.position),E=p}d=void 0,O.forEach(p=>p(E))},Q=()=>E,$=(n=1)=>o.canGoBack(n,v,f),K=n=>{const{routerAnimation:m,routerDirection:l,routerLink:g}=n;h("push",l,m),a.push(g)},i=n=>{const m=o.getFirstRouteInfoForTab(n);m&&a.go(m.position-f)},c=(n,m)=>{if(!m)return;const l=o.getCurrentRouteInfoForTab(n),[g]=m.split("?");l?(d=Object.assign(Object.assign({},d),{routerAction:"push",routerDirection:"none",tab:n}),l.pathname===g?a.push({path:l.pathname,query:ce(l.search)}):a.push({path:g,query:ce(l.search)})):w(g,"push","none",void 0,n)},r=n=>{const m=Object.assign({},o.current(v,f));m.tab!==n&&(m.tab=n,o.update(m));const l=o.findLastLocation(m);m.pushedByRoute!==m.lastPathname&&l?.tab!==n&&(m.pushedByRoute=void 0,o.update(m))},u=n=>{O.push(n)},h=(n="push",m="forward",l,g)=>{d={routerAction:n,routerDirection:m,routerAnimation:l,tab:g}};return{handleNavigate:w,getLeavingRouteInfo:()=>o.current(v,f),handleNavigateBack:V,handleSetCurrentTab:r,getCurrentRouteInfo:Q,canGoBack:$,navigate:K,resetTab:i,changeTab:c,registerHistoryChangeListener:u,goBack:n=>{h("pop","back",n),a.back()},goForward:n=>{h("push","forward",n),a.forward()}}},We=e=>{const a={},t=()=>Object.keys(a).length,o=r=>{delete a[r]},v=r=>a[r],f=(r,u)=>{r.ionPageElement=u,r.ionRoute=!0,r.matchedRoute.instances={default:r.vueComponentRef.value}},E=(r,u)=>w(r.pathname,u,!1),d=(r,u,h=!0)=>w(r.lastPathname,u,h),O=(r,u)=>w(r,u,!1),V=(r,u)=>u.find(h=>{if(h.pathname===r)return h}),w=(r,u,h=!1)=>{const L=_=>{if(h&&!_.ionRoute||r==="")return!1;const R=e.resolve(r).matched.find(n=>n===_.matchedRoute);if(R)return R.path.includes(":")&&r!==_.pathname?!1:_};if(u){const _=a[u];if(!_)return;const R=e?_.find(L):V(r,_);if(R)return R}else for(const _ in a){const R=a[_],n=V(r,R);if(n)return n}};return{unmountLeavingViews:(r,u,h=1)=>{const L=a[r];if(!L)return;const _=L.findIndex(R=>R===u);for(let R=_+1;R<_-h;R++){const n=L[R];n.mount=!1,n.ionPageElement=void 0,n.ionRoute=!1,n.matchedRoute.instances={}}},mountIntermediaryViews:(r,u,h=1)=>{const L=a[r];if(!L)return;const _=L.findIndex(R=>R===u);for(let R=_+1;R<_+h;R++)L[R].mount=!0},clear:o,findViewItemByRouteInfo:E,findLeavingViewItemByRouteInfo:d,findViewItemByPathname:O,createViewItem:(r,u,h,L,_)=>({id:Te("viewItem"),pathname:L.pathname,outletId:r,matchedRoute:h,ionPageElement:_,vueComponent:u,vueComponentRef:Ce(),ionRoute:!1,mount:!1,exact:L.pathname===h.path,params:L.params,vueComponentData:{}}),getChildrenToRender:r=>a[r]?a[r].filter(u=>u.mount):[],add:r=>{const{outletId:u}=r;a[u]?a[u].push(r):a[u]=[r]},remove:(r,u)=>{if(!u)throw Error("outletId required");const h=a[u];h&&(a[u]=h.filter(L=>L.id!==r.id))},registerIonPage:f,getViewStack:v,size:t}},je=e=>{const a=Object.assign({},e);delete a.tabsPrefix;const t=Be(a),o=qe(e,t),v=We(t),f=t.install.bind(t);t.install=d=>{d.provide("navManager",o),d.provide("viewStacks",v),f(d)};const E=t.isReady.bind(t);return t.isReady=()=>E(),t},me=e=>ke(e);I();var ne=S([]);function Fe(e){ne.value=e}function va(){ne.value=[]}var ie=ne;Oe();var Ne=s(()=>import("./BaseLayout-BUuxdAVf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72])),ze=s(()=>import("./BaseLayout-Bnq1yVbx.js"),__vite__mapDeps([73,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,74,75,76,60,61,77,78,79,80,63,81,82,83,84,85,86,87,64,65,66,88,89,90,91,67,68,69,70,92,71,93,94,95])),he=()=>s(()=>import("./Collection-Dro0vCFB.js"),__vite__mapDeps([96,2,3,6,15,14])),Ge=()=>s(()=>import("./AuthView-D19EUP_W.js"),__vite__mapDeps([97,2,3,6,15,14])),Qe=()=>s(()=>import("./Logout-DAbthQgD.js"),__vite__mapDeps([98,1,2,3,36,6,9,12,13,99,100,17,68,69,70])),$e=()=>s(()=>import("./Home-BC8HaDKj.js"),__vite__mapDeps([101,2,3,6,15,14])),ve=()=>s(()=>import("./Info-mAvW0cHA.js"),__vite__mapDeps([102,2,3,6,15,14])),Ke=()=>s(()=>import("./Libraries-DvvmGf7U.js"),__vite__mapDeps([103,2,3,6,15,14])),B=()=>s(()=>import("./Library-BjlpR12N.js"),__vite__mapDeps([104,2,3,6,15,14])),Je=()=>s(()=>import("./PaginatedLibrary-ly-zg-IC.js"),__vite__mapDeps([105,2,3,6,15,14])),Ye=()=>s(()=>import("./Person-Jx88XlYy.js"),__vite__mapDeps([106,2,3,6,15,14])),Ze=()=>s(()=>import("./Search-Bhqr-oGw.js"),__vite__mapDeps([107,2,3,6,15,14])),Xe=()=>s(()=>import("./Watch-DOBUPdvB.js"),__vite__mapDeps([108,2,3,6,15,14])),et=()=>s(()=>import("./Artist-Bricpyck.js"),__vite__mapDeps([109,2,3,6,15,14])),q=()=>s(()=>import("./Cards-B1g2AvQp.js"),__vite__mapDeps([110,2,3,6,15,14])),Y=()=>s(()=>import("./List-BhVdLAsE.js"),__vite__mapDeps([111,2,3,6,15,14])),tt=()=>s(()=>import("./Start-D0c8qk5e.js"),__vite__mapDeps([112,2,3,6,15,14])),at=()=>s(()=>import("./Logs-UsjTLHRH.js"),__vite__mapDeps([113,2,3,6,15,14])),fe=()=>s(()=>import("./Plugins-BX9wteIg.js"),__vite__mapDeps([114,2,3,6,15,14])),_e=()=>s(()=>import("./Schedule-DoO1NaxV.js"),__vite__mapDeps([115,2,3,6,15,14])),rt=()=>s(()=>import("./Metadata-C7QlHfQs.js"),__vite__mapDeps([116,2,3,6,15,14])),ot=()=>s(()=>import("./Ripper-DfOsNK0M.js"),__vite__mapDeps([117,2,3,6,15,14])),nt=()=>s(()=>import("./Specials-DPKEiLqz.js"),__vite__mapDeps([118,2,3,6,15,14])),it=()=>s(()=>import("./Activity-BN8wjQXL.js"),__vite__mapDeps([119,2,3,6,15,14])),st=()=>s(()=>import("./Devices-BHzBN-J5.js"),__vite__mapDeps([120,2,3,6,15,14])),ct=()=>s(()=>import("./Dlna-rZQScqfO.js"),__vite__mapDeps([121,2,3,6,15,14]));function ut(){return s(()=>import("./EncoderProfiles-B58QoEpH.js"),__vite__mapDeps([122,2,3,6,15,14]))}var lt=()=>s(()=>import("./General-DpGdzbK6.js"),__vite__mapDeps([123,2,3,6,15,14])),pt=()=>s(()=>import("./Libraries-YsuQETdB.js"),__vite__mapDeps([124,2,3,6,15,14]));function be(){return s(()=>import("./Notifications-DLiBFM1l.js"),__vite__mapDeps([125,2,3,6,15,14]))}var dt=()=>s(()=>import("./System-gYPNeBSh.js"),__vite__mapDeps([126,2,3,6,15,14])),mt=()=>s(()=>import("./Users-CZDYk_qj.js"),__vite__mapDeps([127,2,3,6,15,14])),ht=()=>s(()=>import("./Controls-CKMa-hEF.js"),__vite__mapDeps([128,2,3,6,15,14])),vt=()=>s(()=>import("./Display-CIBB03MC.js"),__vite__mapDeps([129,2,3,6,15,14])),ft=()=>s(()=>import("./Profile-BhtmzGr6.js"),__vite__mapDeps([130,2,3,6,15,14])),_t=()=>s(()=>import("./Subtitles-BOUKqBFt.js"),__vite__mapDeps([131,2,3,6,15,14])),bt=()=>s(()=>import("./Cast-KzA2oHxB.js"),__vite__mapDeps([132,2,3,6,15,14])),Rt=()=>s(()=>import("./Download-CJeJR08r.js"),__vite__mapDeps([133,2,3,6,15,14])),yt=()=>s(()=>import("./SelectServers-h-b5E9cZ.js"),__vite__mapDeps([134,2,3,6,15,14])),gt=()=>s(()=>import("./NoServers-BJp3fXnK.js"),__vite__mapDeps([135,2,3,6,15,14])),Pt=()=>s(()=>import("./ServerOffline-DqelCSYG.js"),__vite__mapDeps([136,2,3,6,15,14])),Et=()=>s(()=>import("./PostInstall-CrD2gRHb.js"),__vite__mapDeps([137,2,3,6,15,14])),Lt=()=>s(()=>import("./NotFound-CdaMZz3c.js"),__vite__mapDeps([138,2,3,6,15,14]));function C(){return Ae.value?Ne:ze}const Dt=[{path:"/",redirect:"/home"},{path:"/",component:C,children:[{path:"",redirect:"/home"},{path:"home",name:"Home",component:$e},{path:"search",name:"Search",component:Ze,props:{type:"all"}},{path:"libraries",name:"Libraries",component:Ke,beforeEnter:(e,a,t)=>{const o=ie.value.at(0);o&&!Ae.value?t({path:o.link}):t()}},{path:"libraries/:id/letter/:letter",name:"Library paginated",strict:!0,component:B},{path:"libraries/:id",name:"Library",strict:!0,component:B},{path:"specials",name:"Specials",component:B},{path:"specials/:id",name:"Special",component:he},{path:"genre",name:"Genres",component:B},{path:"genre/:id",name:"Genre",component:B},{path:"collection",name:"Collections",component:B},{path:"collection/:id",name:"Collection",component:he},{path:"person",name:"People",component:Je},{path:"person/:id",name:"Person",component:Ye},{path:"movie/:id",name:"Movie",component:ve},{path:"tv/:id",name:"TV Show",component:ve},{path:":type/:id/watch",name:"Watch",component:Xe}]},{path:"/music",component:C,children:[{path:"music",redirect:"/music/start"},{path:"start",name:"Music Start",component:tt},{path:"artists",redirect:"/music/artists/_"},{path:"artists/:letter",name:"Artists",component:q,props:{type:"artists"}},{path:"artist/:id",name:"Artist",component:et},{path:"albums",redirect:"/music/albums/_"},{path:"albums/:letter",name:"Albums",component:q,props:{type:"albums"}},{path:"album/:id",name:"Album",component:Y},{path:"genres",name:"Music Genres",component:q,props:{type:"genres"}},{path:"genres/:id",name:"Music Genre",component:q},{path:"playlists",name:"Music Playlists",component:q,props:{type:"playlists"}},{path:"playlists/:id",name:"Music Playlist",component:Y,props:{type:"playlists"}},{path:"tracks",name:"Tracks",component:Y,props:{type:"tracks"}}]},{path:"/dashboard",component:C,children:[{path:"dashboard",name:"System",redirect:"/dashboard/system"},{path:"system",name:"System",component:dt},{path:"general",name:"General",component:lt},{path:"users",name:"Users",component:mt},{path:"users/:id",name:"Edit user",component:()=>s(()=>import("./Edit-B9gsg5w1.js"),__vite__mapDeps([139,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,140,141,38,47,59,74,39,60,41,61,77,78,44,55,80,46,142,81,82,83,84,49,143,92,144,145,68,69,70,146,71]))},{path:"libraries",name:"Dashboard Libraries",component:pt},{path:"libraries/:id",name:"Dashboard Library",component:()=>s(()=>import("./Edit-hdW8Hjvo.js"),__vite__mapDeps([147,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,59,74,77,78,44,55,80,47,142,81,82,83,84,49,143,92,148,149,150,144,145,68,69,70,71]))},{path:"specials",name:"Dashboard Specials",component:nt},{path:"specials/:id",name:"Dashboard Special",component:()=>s(()=>import("./Edit-S8VbocT0.js"),__vite__mapDeps([151,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,59,74,39,152,41,61,77,78,44,55,80,47,142,81,82,83,84,49,143,92,144,145,68,69,70,71]))},{path:"devices",name:"Devices",component:st},{path:"devices/:id",name:"Device",component:()=>s(()=>import("./Show-CvuYKMIB.js"),__vite__mapDeps([153,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,59,74,39,154,77,78,44,55,80,47,142,81,82,83,84,49,143,92,68,69,70,71,155]))},{path:"ripper",name:"Ripper",component:ot},{path:"encoderprofiles",name:"Encoder Profiles",component:ut},{path:"encoderprofiles/:id",name:"Encoder Profile",component:()=>s(()=>import("./Edit-CzUfO3FU.js"),__vite__mapDeps([156,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,59,74,77,78,44,55,80,47,142,81,82,83,84,49,143,92,68,69,70,71]))},{path:"notifications",name:"Notifications",component:be},{path:"notifications/:id",name:"Notification",component:be},{path:"metadata",name:"Metadata",component:rt},{path:"activity",name:"Activity",component:it},{path:"dlna",name:"DLNA",component:ct},{path:"logs",name:"Logs",component:at},{path:"plugins",name:"Plugins",component:fe},{path:"plugins/:id",name:"Plugin",component:fe},{path:"schedule",name:"Scheduled Tasks",component:_e},{path:"schedule/:id",name:"Scheduled Task",component:_e}]},{path:"/preferences",component:C,children:[{path:"display",name:"Display",component:vt},{path:"profile",name:"Profile",component:ft},{path:"controls",name:"Controls",component:ht},{path:"subtitles",name:"Subtitles",component:_t}]},{path:"/dev",component:C,children:[{path:"cast",name:"Cast",component:bt},{path:"download",name:"Download",component:Rt}]},{path:"/setup",component:C,children:[{path:"setup",redirect:"setup/select-servers"},{path:"select-servers",name:"Select Server",component:yt},{path:"no-servers",name:"No Servers",component:gt},{path:"server-offline",name:"Server offline",component:Pt},{path:"post-install",name:"Post Install",component:Et}]},{path:"/auth",name:"Auth",component:Ge,meta:{public:!0,bypassSetup:!0}},{path:"/logout",name:"Logout",component:Qe,meta:{public:!0,bypassSetup:!0}},{path:"/:catchAll(.*)*",component:Lt,props:{message:"Page not found",status:404}}];var At=["code","state","session_state"];function Tt(e){return e.beforeEach((a,t,o)=>{if(!F("capacitor")){console.log(a.path);const v={...a.query};let f=!1;At.forEach(E=>{v[E]&&(delete v[E],f=!0)});for(const E in v)v[E]?.includes("?")&&(v[E]=v[E].split("?").at(0));f&&e.replace({query:v}).then()}o()})}var It=Tt,St={Home:["/libraries","/music"],Libraries:[]},Ie=new Map;function wt(e){const a=Ie.get(e);return!(a&&Date.now()-a<3e4)}function kt(e){Ie.set(e,Date.now())}async function Ot(e){if(!T.value?.serverApiUrl||!wt(e))return;const a=e.split("/").filter(Boolean);if(!pe.getQueryData(a)){kt(e);try{await pe.prefetchQuery({queryKey:a,queryFn:async()=>{const t=await N().get(e);return t.data?.data??t.data},staleTime:1e3*60*5})}catch{}}}function Vt(e){const a=e.name,t=St[a];!t||t.length===0||requestIdleCallback(()=>{t.forEach(o=>{Ot(o)})})}function Bt(e){return e.afterEach(a=>{a.name&&(document.title=a.name),F("capacitor")||setTimeout(()=>{document.querySelector(".ion-page .ion-page-invisible")?.classList.remove("ion-page-invisible")},500),Vt(a)})}var Ct=Bt;I();const Se=De("redirectUrl","/home"),fa=A(()=>y.currentRoute.value.path==="/search"),_a=A(()=>y.currentRoute.value.path==="/music/search"),ba=A(()=>y.currentRoute.value.path==="/home"||y.currentRoute.value.path==="/"),Ht=A(()=>y.currentRoute.value.path.startsWith("/music")),Ra=A(()=>y.currentRoute.value.path.startsWith("/libraries")||y.currentRoute.value.path.startsWith("/library")),ya=A(()=>y.currentRoute.value.path.startsWith("/dashboard")),ga=A(()=>y.currentRoute.value.path.startsWith("/preferences")),Pa=A(()=>ie.value?.some?.(e=>e.type==="music")),Ea=A(()=>y.currentRoute.value.path.startsWith("/music/album")),La=A(()=>y.currentRoute.value.path.startsWith("/music/artist")),Da=A(()=>y.currentRoute.value.path.startsWith("/music/playlist")),Aa=A(()=>y.currentRoute.value.path.startsWith("/music/song")),Ta=A(()=>y.currentRoute.value.path.startsWith("/music/queue")),Ia=A(()=>y.currentRoute.value.path.startsWith("/music/artist/")||y.currentRoute.value.path.startsWith("/music/album/")),Sa=A(()=>Ht.value?"/search?from=music":"/search");I();const Re=S(!1),ye=S(!1),ge=S(!1),k=S([]);function Mt(e){k.value=e.map(a=>({...a,serverApiUrl:a.serverApiUrl.replace(/\/$/,""),serverBaseUrl:a.serverBaseUrl.replace(/\/$/,"")}))}var wa=k;I();var Z=S(!1);function Ut(){return new Promise((e,a)=>{if(Z.value){e();return}if(ie.value.length>0||ge.value){e();return}if(!T.value){e();return}N(5).get("libraries").then(({data:t})=>{Fe(t.data),He.value=!0,ge.value=!0,e(),Z.value=!0,y.replace(Se.value).then()}).catch(async()=>{Z.value=!0,await y.replace({name:"Server offline"}).then(()=>e()),e()})})}var xt=Ut;I();var H=S([]),qt=A(()=>H.value);function Wt(e){H.value=e}function ka(e){const a=H.value.indexOf(e);a!==-1&&(H.value=H.value.toSpliced(a,1)),oe().delete(`/messages/${e.id}`).catch(console.error)}function Oa(){H.value.forEach(e=>e.read=!0),oe().patch("/messages",{read:!0}).catch(console.error)}var Va=qt;I();var Pe=S(!1);function jt(){return new Promise((e,a)=>{if(Pe.value)return e();oe().get("/app_config").then(async({data:t})=>(t?.data||a("No data returned from API"),Mt(t.data.servers),Wt(t.data.messages??[]),Me(t.data.notifications??[]),ae({...P.value,locale:t.data.locale,name:t.data.name,avatarUrl:t.data.avatarUrl,features:t.data.features,moderator:!!t.data.moderator}),Pe.value=!0,k.value.length===0?await y.replace({name:"No Servers"}).then(()=>e()):k.value.length===1?te(k.value[0]):k.value.length>1&&localStorage.getItem("currentServer")?te(k.value.find(o=>o.id===localStorage.getItem("currentServer"))):k.value.length>1&&await y.replace({name:"Select Server"}),e())).catch(t=>{a(t)})})}var Ft=jt;I();function Nt(){return x.accessToken?Promise.resolve():new Promise(e=>{re(T,t=>{t&&(x.setBaseUrl(t.serverBaseUrl),x.setAccessToken(P.value.accessToken))}),x.setBaseUrl(T.value?.serverBaseUrl),x.setAccessToken(P.value.accessToken);const a=De("nmplayer-music-supports-audio-context",!1);a.value=!1,e()})}var zt=Nt;I();var Ee=S(!1);function Gt(){return new Promise(async(e,a)=>{if(Ee.value)return e();if(Ee.value=!0,!T.value||!P.value)return P.value.features??={},P.value.features.nomercyConnect=!1,e();let t=new j(T.value.serverBaseUrl,P.value.accessToken,"videoHub");return await t.setup(),le(t),setTimeout(()=>{re(T,async o=>{!o||!P.value||!t||(t.connection?.stop(),await t.dispose(),t=new j(o.serverBaseUrl,P.value.accessToken,"videoHub"),await t.setup(),le(t))})},5e3),e()})}var Qt=Gt;I();var Le=S(!1);function $t(){return new Promise(async(e,a)=>{if(Le.value)return e();if(Le.value=!0,!T.value||!P.value||!P.value.features?.nomercyConnect)return P.value.features??={},P.value.features.nomercyConnect=!1,e();let t=new j(T.value.serverBaseUrl,P.value.accessToken,"musicHub");return await t.setup(),ue(t),setTimeout(()=>{re(T,async o=>{console.log("Current server changed, reinitializing music socket",o),!(!o||!P.value||!t)&&(t.connection?.stop(),await t.dispose(),t=new j(o.serverBaseUrl,P.value.accessToken,"musicHub"),await t.setup(),ue(t))})},5e3),e()})}var Kt=$t;I();var X=S(!1);function Jt(){return new Promise((e,a)=>{if(X.value){e();return}if(!T.value){e();return}N(5).get("permissions").then(({data:t})=>{te({...T.value,is_owner:t.owner,is_manager:t.manager}),X.value=!0,e()}).catch(async()=>{X.value=!0,await y.replace({name:"Server offline"}).then(()=>e()),e()})})}var Yt=Jt;I();var W=S(!1);function Zt(){return new Promise((e,a)=>{if(W.value){e();return}if(ye.value){e();return}if(!T.value){e();return}N(5).get("dashboard/server/info").then(({data:t})=>{if(Re.value=t.data?.setup_complete??!1,ye.value=!0,!t.data?.setup_complete){console.log("Server setup not complete, redirecting to post-installation page"),Se.value="/setup/post-install",y.replace({name:"Post Install"}).then(()=>e()),W.value=!0;return}W.value=!0,e()}).catch(async t=>{Re.value=!0,W.value=!0,await y.replace({name:"Server offline"}).then(()=>a(t)),a(t)})})}var Xt=Zt;function ea(){return new Promise((e,a)=>{if(P.value?.id){e();return}try{const{isAuthenticated:t}=ee();if(t.value){const{keycloak:o,roles:v,token:f}=ee();return ae({...P.value,accessToken:f.value}),o.value?.idTokenParsed&&ae({...P.value,id:o.value?.idTokenParsed.sub,name:o.value?.idTokenParsed.display_name??o.value?.idTokenParsed?.name,email:o.value?.idTokenParsed?.email,moderator:v.value.includes("nova")}),e()}else Ue().then(()=>{t.value=!0,e()})}catch{a(new Error("Not authenticated"))}})}var ta={sequential:[ea,Ft],parallel:[Yt,Xt,xt],deferred:[zt,Qt,Kt]},aa=ta;async function ra(e,a){if(Array.isArray(e)){for(const t of e)await t().catch(o=>{throw new Error(o)});a?.();return}if(e.sequential)for(const t of e.sequential)await t().catch(o=>{throw new Error(o)});e.parallel&&await Promise.all(e.parallel.map(t=>t().catch(o=>{throw new Error(o)}))),a?.(),e.deferred&&queueMicrotask(()=>{Promise.all(e.deferred.map(t=>t().catch(console.error)))})}var z=je({history:(F("capacitor"),me("/")),routes:Dt});z.beforeResolve(async(e,a,t)=>{if(F("capacitor")&&e.name!=="Auth"&&!P.value.accessToken){const{isAuthenticated:o}=ee();if(!o.value)return t({name:"Auth"})}if(e.name==="Auth")return t();await ra(aa,t).catch(()=>t({name:"Server offline"}))});It(z);Ct(z);var y=z;export{Sa as C,Fe as E,Se as S,va as T,ga as _,ge as a,Aa as b,Pa as c,ya as d,ba as f,Da as g,_a as h,ka as i,Ea as l,Ht as m,Oa as n,wa as o,Ra as p,Va as r,Mt as s,y as t,La as u,Ta as v,ie as w,Ia as x,fa as y};
