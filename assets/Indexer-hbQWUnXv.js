import{Bl as q,Cl as c,D as I,Hl as i,Ni as T,R as s,Wl as B,ba as h,bc as Z,bl as _,gu as N,hl as b,hu as r,kl as P,ll as k,su as E,tu as $,vc as j,xl as D,ya as g,yc as M,yl as L,yu as y,zl as H}from"./index-DhiB0zJh.js";import{n as Q,t as w}from"./scrollHandlers-2YIKDoj3.js";k();var m=E(!1);const Y=L(()=>m.value);function U(n){m.value=n}var V=E([]);const W=L(()=>{const n=new Set;return V.value?.forEach(o=>{const l=o.props?.data?.title||o.props?.data?.name||o.props?.name||"";if(l){const u=l.charAt(0).toUpperCase();/[A-Z0-9]/.test(u)?n.add(u):n.add("#")}}),n});var v=m;k();M();var F={class:"flex-shrink-0 flex-grow-0 text-center text-xs sm:text-base font-semibold leading-none"},G=["data-indexer","onClick"],O={class:"flex-shrink-0 flex-grow-0 text-center text-xs sm:text-base font-semibold leading-none"},J=P({__name:"Indexer",setup(n){const o=["Libraries","Library","Collections","Albums","Artists","Music Genres"],l=[new RegExp("music/albums"),new RegExp("music/artists"),new RegExp("libraries/[a-zA-Z0-9]+/letter/[a-zA-Z0-9_]"),new RegExp("music/genres/letter/[a-zA-Z0-9_]")];function u(e){return o.some(a=>e.startsWith(a))}function d(e){return l.some(a=>e.match(a))}const R=Z();function p(){setTimeout(()=>{document.querySelector(g.value?"ion-tabs ion-router-outlet  div.ion-page:not(.ion-page-hidden) [indexer]":"[indexer]")?.querySelectorAll("[data-indexer]").forEach(e=>{const a=e.dataset.indexer??"";let t;a==="#"?t=document.querySelector?.("ion-tabs ion-router-outlet div.ion-page:not(.ion-page-hidden) [data-scroll]"):t=document.querySelector?.(`ion-tabs ion-router-outlet div.ion-page:not(.ion-page-hidden) [data-scroll='scroll_${a}']`);const f=!!t,z=d(s.currentRoute.value.path),A=W.value.has(a);f||z||A?e.classList.remove("opacity-20","!cursor-not-allowed"):e.classList.add("opacity-20","!cursor-not-allowed")})},500)}function S(e){Q(e),document.dispatchEvent(new CustomEvent("scrollToLetter",{detail:{letter:e}}))}function C(){document.querySelector(g.value?"ion-tabs ion-router-outlet  div.ion-page:not(.ion-page-hidden) [indexer]":"[indexer]")?.querySelectorAll("[data-indexer]").forEach(e=>{e.classList.add("opacity-20","!cursor-not-allowed")})}function x(e){U(u(e)),p()}return s.afterEach(e=>{setTimeout(()=>{x(e.name??e.path)},150)}),s.beforeEach(()=>{d(s.currentRoute.value.path)||C()}),H(()=>{setTimeout(()=>{x(s.currentRoute.value.name??s.currentRoute.value.path)},150),document.addEventListener("indexer",p),document.addEventListener("keydown",w)}),q(()=>{document.removeEventListener("indexer",p),document.removeEventListener("keydown",w)}),(e,a)=>(i(),c("div",{class:N([{"w-8":r(v),"w-0":!r(v),"sm:ml-2":!r(h)&&r(v),"bottom-0":r(h)},"pointer-events-none z-0 h-available sm:h-available flex flex-col items-center justify-between self-stretch overflow-clip transition-width duration-200 sm:-translate-x-3 pt-2 text-surface-12"]),indexer:""},[(i(!0),c(b,null,B(r(T)("#","Z"),t=>(i(),c(b,{key:t},[d(r(R).path)?(i(),D(r(j),{key:0,"data-indexer":t,to:`${t.replace("#","_")}`,class:"pointer-events-auto relative flex p-1.5 size-6 sm:size-8 aspect-square rounded-lg overflow-clip cursor-pointer flex-col items-center justify-center hover:bg-surface-5",tabindex:"-1"},{default:$(()=>[_("p",F,y(t),1)]),_:2},1032,["data-indexer","to"])):(i(),c("button",{key:1,"data-indexer":t,class:"pointer-events-auto relative flex p-1.5 size-6 sm:size-8 aspect-square rounded-lg overflow-clip cursor-pointer flex-col items-center justify-center hover:bg-surface-5/11",tabindex:"-1",onClick:f=>S(t)},[_("p",O,y(t),1)],8,G))],64))),128))],2))}}),ee=I(J,[["__scopeId","data-v-6851127f"]]);export{v as n,ee as t};
