import{aw as U,c8 as q,dT as G,az as z,b_ as J,aT as I,aD as K,J as R,aC as O,c9 as j,I as v,e as u,a7 as S,aB as o,aO as A,o as t,v as $,a as _,c as d,z as b,F as m,u as F,h,cl as g,b6 as P,bd as H,dU as Q,bF as W,bG as X}from"./index-ByXhQ52S.js";import{_ as Y}from"./MediaCard.vue_vue_type_script_setup_true_lang-DsZ3Rkca.js";import{_ as Z}from"./PersonCard.vue_vue_type_script_setup_true_lang-CgZbRZXY.js";import{_ as ee,a as se}from"./EmptyCard.vue_vue_type_script_setup_true_lang-CiGs35mS.js";import"./CardIndicator.vue_vue_type_script_setup_true_lang-Fq8Aqn6t.js";import"./NoResultImage.vue_vue_type_script_setup_true_lang-BukWoCRI.js";const le="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",oe="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",pe=U({__name:"Mobile",setup(re){var E,M,B;const y=q(),{data:r,fetchNextPage:k,hasNextPage:C,isError:te}=G({queryKey:["libraries",(B=((M=(E=y.currentRoute)==null?void 0:E.value)==null?void 0:M.params.id)??y.currentRoute.value.name)==null?void 0:B.split("&").at(0)],limit:20,keepForever:!0});z(()=>{J(),I(null),K(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),R(r,s=>{s&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const V=O(()=>{var s,l,i,n,p,a;return A.value&&((i=(l=(s=r.value)==null?void 0:s.pages)==null?void 0:l[0])==null?void 0:i.data[0].media_type)!=="person"&&((a=(p=(n=r.value)==null?void 0:n.pages)==null?void 0:p[0])==null?void 0:a.data[0].media_type)!=="genres"});j(()=>{stop(),I(null)});const w=v();z(()=>{var s,l;C.value&&(((l=(s=r==null?void 0:r.value)==null?void 0:s.pages)==null?void 0:l.length)??0)<50&&k(),document.addEventListener("scrollToDiv",i=>{var n;(n=w.value)==null||n.scrollTo({top:i.detail.top-100,behavior:"smooth"})})}),R(r,s=>{var l;s&&C.value&&((l=s==null?void 0:s.pages)==null?void 0:l.length)<50&&k()});const D=v(),L=v(),f=(s,l)=>{D.value=l,L.value.show(s)};return(s,l)=>(t(),u(o(X),null,{default:S(()=>[$(o(W),{fullscreen:!0,class:"ion-padding"},{default:S(()=>{var i;return[l[0]||(l[0]=_("div",{class:"fixed top-0 pt-safe w-full bg-slate-light-1 dark:bg-slate-dark-3 z-1199"},null,-1)),_("div",{ref_key:"lib",ref:w,class:"pt-safe-offset-10 flex h-auto w-full pr-8 overflow-auto py-0 scroll-container"},[(t(),d("div",{class:b(["z-0 flex flex-col gap-4 rounded-3xl border-0 w-available scrollbar-none border-auto-3 pt-2",{"pb-2":o(g)&&o(P),"children:pb-4 sm:children:pb-3":!o(g)&&o(P)}]),key:(i=o(H).currentRoute.value.params)==null?void 0:i.id},[_("div",{class:b(`grid w-full gap-4 scroll-smooth music-showing:pb-0 pl-1 ${V.value?le:oe}`)},[o(r)?(t(!0),d(m,{key:0},F(o(r).pages??[],(n,p)=>{var a,T,N;return t(),d(m,{key:p},[n.data.length>0?(t(!0),d(m,{key:0},F(n.data??[],(e,x)=>(t(),d(m,null,[(e==null?void 0:e.media_type)==="tv"||(e==null?void 0:e.media_type)=="movie"||(e==null?void 0:e.media_type)=="collection"||(e==null?void 0:e.media_type)=="specials"?(t(),u(Y,{key:e.id,data:e,onContextMenu:c=>f(c,e),index:x},null,8,["data","onContextMenu","index"])):(e==null?void 0:e.media_type)==="person"?(t(),u(Z,{key:e.id+"_person",data:e,onContextMenu:c=>f(c,e),index:x},null,8,["data","onContextMenu","index"])):(e==null?void 0:e.media_type)==="genres"?(t(),u(ee,{key:e.id+"_genres",data:e,onContextMenu:c=>f(c,e),index:x},null,8,["data","onContextMenu","index"])):h("",!0)],64))),256)):((N=(T=(a=o(r).pages)==null?void 0:a[0])==null?void 0:T.data)==null?void 0:N.length)==0?(t(),u(se,{key:1})):h("",!0)],64)}),128)):h("",!0)],2)],2)),$(Q,{class:b(["w-8 !-mt-4 pt-4 pb-4 mb-0 fixed right-0 bg-slate-light-1 dark:bg-slate-dark-3",{"h-available":!o(g),"h-inherit top-24":o(g)}])},null,8,["class"])],512)]}),_:1})]),_:1}))}});export{pe as default};
//# sourceMappingURL=Mobile-D45Ztj5b.js.map
