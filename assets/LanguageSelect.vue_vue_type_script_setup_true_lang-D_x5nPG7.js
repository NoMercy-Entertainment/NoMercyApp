import{I as L,l as x,w,E as S,dH as p,c as o,o as l,j as d,s as m,a as r,K as v,n as i,q as j,t as c,d as k,T as A,F as B,h as E,b as F}from"./index-H-vD2rqS.js";import{_ as V}from"./OptimizedIcon.vue_vue_type_script_setup_true_lang-CX14zQZK.js";import{E as N,j as T,A as _,I,F as U}from"./listbox-MfsbttSw.js";const z={class:"relative w-full"},D={key:0,class:"flex items-center self-center"},H=["src","onerror","alt"],K={class:"ml-3 block truncate text-left"},M={key:1,class:"flex items-center self-center"},O={key:0,class:"ml-3 block truncate text-left"},G={key:1,class:"ml-3 block truncate text-left"},J={class:"ml-2 flex items-center self-center"},P=["src","onerror","alt"],X=L({__name:"LanguageSelect",props:{modelValue:{required:!0},name:{type:String,required:!0},id:{type:String,required:!0},multiple:{type:Boolean,required:!1,default:!1},variant:{type:String,required:!1,default:"normal"},languages:{type:Array,required:!1}},emits:["update:modelValue"],setup(e,{emit:q}){const f=e,$=q,n=x(f.modelValue),b=x(""),h=x([]),u=x(f.languages??[]);return w(f,t=>{t.languages&&(u.value=t.languages)}),w(n,t=>{t&&$("update:modelValue",t)}),w(u,t=>{t&&(f.multiple?h.value=t:h.value=b.value===""?t.filter(s=>p.includes(s.iso_639_1))??[]:t.filter(s=>p.includes(s.iso_639_1))?.filter(s=>s.english_name.toLowerCase().includes(b.value.toLowerCase()))??[])}),S(()=>{u.value&&(f.multiple?h.value=u.value:h.value=b.value===""?u.value.filter(t=>p.includes(t.iso_639_1))??[]:u.value.filter(t=>p.includes(t.iso_639_1))?.filter(t=>t.english_name.toLowerCase().includes(b.value.toLowerCase()))??[])}),(t,s)=>(l(),o("div",z,[d(v(I),{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=a=>n.value=a),as:"div",multiple:e.multiple,onChange:s[1]||(s[1]=a=>t.$emit("update:modelValue",a.target?.value))},{default:m(()=>[d(v(N),{class:i(["block select-none space-nowrap empty:hidden",{"mb-1 text-sm font-medium":e.variant==="normal","mb-0.5 text-sm font-medium":e.variant==="dense","mb-px text-xs font-thin":e.variant==="tight"}])},{default:m(()=>[j(c(t.$t(e.name)),1)]),_:1},8,["class"]),r("div",{class:i(["relative",{"h-10 min-h-10 mt-2":e.variant==="normal","h-8 min-h-8 mt-1":e.variant==="dense","h-7 min-h-7 mt-0":e.variant==="tight"}])},[d(v(T),{class:i(["relative flex items-center w-full cursor-default rounded-md shadow-sm sm:text-sm data-[headlessui-state='disabled']:grayscale *:data-[headlessui-state='disabled']:hidden",{"!bg-auto-1 ring-[1.5px] ring-inset ring-auto-3 focus:outline-none focus:ring-2 focus:ring-focus data-[headlessui-state='open']:ring-2 data-[headlessui-state='open']:ring-focus":e.variant==="normal"||e.variant==="dense","h-10 min-h-10 pl-3":e.variant==="normal","h-8 min-h-8 pl-2":e.variant==="dense","h-5 min-h-5 pl-0":e.variant==="tight"}])},{default:m(()=>[Array.isArray(n.value)?(l(),o("span",M,[n.value?.length>4?(l(),o("span",O,c(n.value?.length)+" "+c(t.$t("selected")),1)):(l(),o("span",G,c(n.value.map(a=>a?.name!==""&&a?.name!==null?a?.name:a?.english_name)?.join(", ")),1))])):(l(),o("span",D,[r("img",{src:`https://pub-a68768bb5b1045f296df9ea56bd53a7f.r2.dev/flags/${n.value?.iso_639_1?.toUpperCase()}.svg`,onerror:a=>{a.target.onerror=null,a.target.src="https://pub-a68768bb5b1045f296df9ea56bd53a7f.r2.dev/flags/xxx.svg"},alt:`${n.value?.name!==""&&n.value?.name!==null?n.value?.name:n.value?.english_name} flag`,class:"h-auto w-6 rounded-sm border border-auto-50 group-hover:border-theme-600"},null,8,H),r("span",K,c(n.value?.name!==""&&n.value?.name!==null?n.value?.name:n.value?.english_name),1)])),r("span",{class:i(["absolute inset-y-0 right-0 flex h-auto items-center rounded-r-md min-h-auto focus-visible:outline-transparent",{"h-10 min-h-10 px-3":e.variant==="normal","h-8 min-h-8 px-2":e.variant==="dense",hidden:e.variant==="tight"}])},[e.multiple?(l(),k(V,{key:0,icon:"arrowSelect","class-name":"w-5 ui-open:rotate-180 transition-transform duration-200"})):(l(),k(V,{key:1,icon:"chevronDown","class-name":"w-5 ui-open:rotate-180 transition-transform duration-200"}))],2)]),_:1},8,["class"]),d(A,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:m(()=>[d(v(_),{class:i(["absolute z-10 h-auto max-h-56 min-w-fit overflow-auto rounded-md text-base shadow-lg ring-1 ring-black ring-opacity-5 min-h-auto w-available bg-auto-1 focus:outline-none sm:text-sm",{"py-2 px-3":e.variant==="normal","py-1 px-2":e.variant==="dense","py-0.5 px-1.5":e.variant==="tight"}])},{default:m(()=>[(l(!0),o(B,null,E(h.value,a=>(l(),k(v(U),{key:a.iso_639_1,as:"template",value:a},{default:m(({active:g,selected:y})=>[r("li",{class:i(["relative flex w-full min-w-fit cursor-default select-none items-center rounded-sm",{"!bg-focus text-auto-12 ":g,"text-contrast":!g,"h-8 min-h-8":e.variant==="normal","h-6 min-h-6":e.variant==="dense"}])},[r("div",J,[r("img",{src:`https://pub-a68768bb5b1045f296df9ea56bd53a7f.r2.dev/flags/${a?.iso_639_1?.toUpperCase()}.svg`,onerror:C=>{C.target.onerror=null,C.target.src="https://pub-a68768bb5b1045f296df9ea56bd53a7f.r2.dev/flags/xxx.svg"},alt:`${a.name!==""&&a.name!==null?a.name:a.english_name} flag`,class:"h-auto w-6 rounded-sm border border-auto-1 group-hover:border-theme-600"},null,8,P),r("span",{class:i(["mx-3 block truncate text-left",{"font-semibold":y,"font-normal":!y}])},c(a.name!==""&&a.name!==null?a.name:a.english_name),3)]),y?(l(),o("span",{key:0,class:i(["absolute right-0 flex items-center justify-center pr-4 data-[headlessui-state='disabled']:hidden",{"text-auto-50":g,"text-focus":!g}])},[d(V,{icon:"check",class:"h-5 w-5","aria-hidden":"true"})],2)):F("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1},8,["class"])]),_:1})],2)]),_:1},8,["modelValue","multiple"])]))}});export{X as _};
