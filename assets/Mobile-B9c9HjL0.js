import{aw as Z,c7 as q,bt as A,I as p,J as B,az as D,aE as z,aF as G,eu as y,ev as w,e as $,a7 as V,aB as l,ew as K,bZ as Q,ex as U,o as m,v as S,c as j,a as f,z as N,aM as X,c0 as Y,F as ee,u as te,h as ae,bE as se,bF as oe}from"./index-16sqk8Bx.js";import{_ as re,a as le,b as ne,c as ie}from"./TrackRow.vue_vue_type_script_setup_true_lang-Bo7fQJ5V.js";import"./BigPlayButton.vue_vue_type_script_setup_true_lang-FruaeDxS.js";import"./FavoriteImage.vue_vue_type_script_setup_true_lang-CSTAo-IV.js";import"./BannerButton.vue_vue_type_script_setup_true_lang-DfBgVC_D.js";const ce={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},de=["innerHTML"],ue={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-slate-dark-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},ke=Z({__name:"Mobile",setup(fe){const C=q(),{data:s}=A({path:C.currentRoute.value.fullPath,keepForever:!0}),P=p(null),L=p(),c=p("");B(s,t=>{var e;Q((t==null?void 0:t.name)??null),g((t==null?void 0:t.tracks)??[],w.value,y.value,c.value),z((e=t==null?void 0:t.color_palette)==null?void 0:e.cover)}),B(y,t=>{var e;g(((e=s.value)==null?void 0:e.tracks)??[],w.value,t,c.value)}),B(w,t=>{var e;g(((e=s.value)==null?void 0:e.tracks)??[],t,y.value,c.value)}),B(c,t=>{var e;g(((e=s.value)==null?void 0:e.tracks)??[],w.value,y.value,t)});const g=(t,e,r,a)=>{const o=K(t??[],e,r,U);a==""?L.value=o:L.value=(o==null?void 0:o.filter(i=>{var n,u,v,k,x,_;return((u=i.name)==null?void 0:u.toLowerCase().includes((n=a==null?void 0:a.toLowerCase)==null?void 0:n.call(a)))||((v=i.artist_track)==null?void 0:v.some(T=>{var h;return T.name.toLowerCase().includes((h=a==null?void 0:a.toLowerCase)==null?void 0:h.call(a))}))||((_=(k=i.album_track)==null?void 0:k[0])==null?void 0:_.name.toLowerCase().includes((x=a==null?void 0:a.toLowerCase)==null?void 0:x.call(a)))}))??[]};D(()=>{var t,e,r,a;(e=(t=s.value)==null?void 0:t.color_palette)!=null&&e.cover&&z((a=(r=s.value)==null?void 0:r.color_palette)==null?void 0:a.cover)}),G(()=>{var t,e,r,a,o;g(((t=s==null?void 0:s.value)==null?void 0:t.tracks)??[],w.value,y.value,c.value),(r=(e=s.value)==null?void 0:e.color_palette)!=null&&r.cover&&z((o=(a=s.value)==null?void 0:a.color_palette)==null?void 0:o.cover)});const O=()=>{window.history.back()},b=p(!1),J=p(!1),d=p(),W=t=>{var o,i,n,u,v,k,x,_,T,h,H,R,F,E,I,M;console.log((i=(o=d.value)==null?void 0:o.$el)==null?void 0:i.getBoundingClientRect().top);const e=290,r=310,a=88;b.value=((n=t.detail)==null?void 0:n.scrollTop)>=e,J.value=((u=t.detail)==null?void 0:u.scrollTop)>=r,((k=(v=d.value)==null?void 0:v.$el)==null?void 0:k.getBoundingClientRect().top)==a?((_=(x=d.value)==null?void 0:x.$el)==null||_.classList.add("!bg-focus"),(H=(h=(T=d.value)==null?void 0:T.$el)==null?void 0:h.firstChild)==null||H.classList.add("!bg-slate-light-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")):((F=(R=d.value)==null?void 0:R.$el)==null||F.classList.remove("!bg-focus"),(M=(I=(E=d.value)==null?void 0:E.$el)==null?void 0:I.firstChild)==null||M.classList.remove("!bg-slate-light-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]"))};return(t,e)=>(m(),$(l(oe),null,{default:V(()=>[S(l(se),{fullscreen:!0,onIonScroll:W,scrollEvents:!0},{default:V(()=>{var r,a,o,i;return[!l(C).currentRoute.value.params.id||l(C).currentRoute.value.params.id&&((r=l(s))==null?void 0:r.id)==l(C).currentRoute.value.params.id?(m(),j("div",{key:0,ref_key:"main",ref:P,class:"flex flex-col overflow-x-clip w-available h-min sm:rounded-2xl -mt-safe-offset-12 bg-[rgb(var(--background-auto))]"},[S(re,{data:l(s)},null,8,["data"]),f("div",ce,[e[2]||(e[2]=f("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom bg-focus"},null,-1)),f("div",{id:"navbar",class:N(["fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-slate-light-11 dark:bg-slate-dark-1 top-0 pt-safe-offset-4 transition-opacity duration-300",{"opacity-0 pointer-events-none":!b.value,"opacity-100 pointer-events-auto":b.value}])},[e[1]||(e[1]=f("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-transform duration-300 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),f("button",{onClick:O,class:"z-30 flex h-10 w-12 items-center justify-center rounded-md"},[S(X,{icon:"arrowLeft"})]),f("div",{id:"navText",class:N(["pointer-events-none whitespace-pre text-left relative z-20 h-auto line-clamp-2 w-full self-center text-xl font-bold leading-none transition-opacity duration-300",{"opacity-0 pointer-events-none":!b.value,"opacity-100 pointer-events-auto":b.value}]),innerHTML:l(Y)(((a=l(s))==null?void 0:a.name)??"Songs you like","text-sm line-clamp-2")},null,10,de)],2),(m(),$(le,{key:(o=l(s))==null?void 0:o.id,data:l(s),filter:c.value,onFilterChange:e[0]||(e[0]=n=>c.value=n)},null,8,["data","filter"])),f("div",ue,[(m(),$(ne,{ref_key:"sortHeader",ref:d,key:(i=l(s))==null?void 0:i.id})),(m(!0),j(ee,null,te(L.value,(n,u)=>(m(),$(ie,{key:n.id,data:n,displayList:L.value,index:u},null,8,["data","displayList","index"]))),128))])])],512)):ae("",!0)]}),_:1})]),_:1}))}});export{ke as default};
//# sourceMappingURL=Mobile-B9c9HjL0.js.map
