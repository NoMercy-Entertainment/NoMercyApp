import{C as r,Ct as l,K as c,S as p,c as P,it as w,j as h,k as C,mt as I,ot as d,wt as S,y as M}from"./i18n-Rm1NkeNf.js";import{ya as o}from"./ionic-vX7GXDhi.js";import{C as x,I as B,L as T,_ as V}from"./vue-core-D-3YrIBp.js";import"./query-BPfDyGC_.js";import{Gt as D,H as v,Vi as f,Vt as U,Wt as L,Xt as A,Yt as N,k as a,on as j,qi as z,s as n,xa as m}from"./index-DvNhFfKH.js";import"./useInfiniteServerClient-CoZZwjD7.js";import{t as q}from"./useServerClient-BIuEWXCM.js";import{a as E,i as F,n as G,o as H,r as K}from"./VideoPlayer-DwsCXkvm.js";import"./buttons-ByaiV_9J.js";P();var O=h({__name:"Mobile",setup(R){const{data:i}=q({}),e=I();function u(t){const s={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:t?.filter(_=>!!_.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:m.value?.accessToken||localStorage.getItem("access_token")||"",basePath:z.value?.serverBaseUrl,imageBasePath:"https://app.nomercy.tv/tmdb-images",forceTvMode:(o("android")||o("ios"))&&!o("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||o("capacitor"),renderAhead:100};e.value=K("player1").setup(s),e.value?.once("back",()=>{history.state.back?a.back():a.replace("/")});const g=new F;e.value?.registerPlugin("desktopUI",g),e.value?.usePlugin("desktopUI");const b=new E;e.value?.registerPlugin("autoSkip",b),e.value?.usePlugin("autoSkip");const k=new H;e.value?.registerPlugin("sync",k),e.value?.usePlugin("sync");const y=new G;e.value?.registerPlugin("octopus",y),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?a.back():a.replace("/")}),e.value?.on("dispose",async()=>{await A(),await L(),history.state.back?a.back():await a.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{n(!0)}),e.value?.on("pause",()=>{n(!1)}),e.value?.on("ready",async()=>{await N(),await j(),await D(),v.stop()}),e.value?.on("item",()=>{e.value?.play()}),U.addListener("backButton",()=>{e.value?.emit("back-button-hyjack"),e.value?.dispose()})}return w(i,t=>{t?.length&&u(t)}),B(()=>{v.stop(),m.value.features?.nomercyConnect?u():i.value?.length&&u(i.value)}),T(()=>{e.value?.dispose(),n(!1)}),(t,s)=>(c(),r(l(x),null,{default:d(()=>[C(l(V),{fullscreen:!0},{default:d(()=>[(c(),r(M,{to:"body"},[p("div",{class:S([{"mb-28":l(f),"mb-0":!l(f)},"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"])},[...s[0]||(s[0]=[p("div",{id:"player1",class:"group nomercyplayer"},null,-1)])],2)]))]),_:1})]),_:1}))}}),te=O;export{te as default};
