import"./useBaseQuery-BGNOp5L6.js";import"./useInfiniteServerClient-DvipvFFa.js";import{t as ve}from"./useQueryClient-CXD3QvLL.js";import"./useQuery-sL3c7cVg.js";import{Ac as Pt,Ba as hr,Bn as pr,Di as J,Fc as k,Fs as p,Hs as T,Is as L,Ja as Gt,Ls as ze,Mc as Kt,Mo as mr,No as vr,Oc as Te,Pc as Bt,Ps as Se,Qs as gr,Ra as yr,Rs as j,Ss as H,Vs as V,Ws as U,Xa as br,Xs as Qt,Ya as _r,Zi as wr,ac as D,bc as xr,bo as Er,cc as Sr,fo as Dr,gc as ne,hc as Ot,i as qt,io as Tr,jc as Ge,ks as Ne,lc as Ke,mi as S,mr as kr,nc as Cr,r as De,sc as st,vc as $,wc as q,yi as Or}from"./index-DEPYcIyG.js";import{t as Ir}from"./_plugin-vue_export-helper-Qq1ciMp2.js";import{t as pe}from"./MoooomIcon-C-3Vu02k.js";import{n as Nr}from"./dist-DiGcYG4a.js";import{t as $r}from"./AppLogo-BeXv7AVd.js";import{t as It}from"./useServerClient-C1o4B353.js";import"./ScrollContainer-15hWCYKr.js";import{t as Ee}from"./Button-CqdmA87R.js";import{t as pt}from"./Modal-Bqj6Qld1.js";import{t as Ar}from"./FolderBrowser-DOsKqEEj.js";H();var Fr={class:"-mt-12 px-4"},Mr={class:"text-xl font-bold"},Pr={"aria-hidden":"true",class:"mt-4"},Br={class:"overflow-hidden rounded-full bg-surface-11"},qr=U({__name:"Stepper",props:{steps:{type:Array,required:!0},currentStep:{type:String,required:!0}},setup(r){const e=r,n=Se(()=>e.steps?e.steps?.indexOf(e.currentStep):0),t=Se(()=>e.steps?(n.value+1)/e.steps.length*100:0);return(o,a)=>(D(),j("div",Fr,[p("h4",Mr,k(o.$t(r.currentStep)),1),p("div",Pr,[p("div",Br,[p("div",{style:Bt(`width: ${t.value}%`),class:"h-1 rounded-full bg-focus transition-all duration-300"},null,4)]),p("div",{style:Bt(`grid-template-columns: repeat(${r.steps.length}, minmax(0, 1fr))`),class:"mt-6 hidden text-sm font-medium text-surface-12/12 sm:grid"},[(D(!0),j(Ne,null,st(r.steps,i=>(D(),j("div",{key:i,class:"text-center font-semibold"},k(o.$t(i)),1))),128))],4)])]))}}),Lr=qr;H();var jr={class:"mx-auto grid h-available place-content-center px-4 sm:px-6 lg:px-8 text-surface-12"},Rr={class:"mx-auto w-screen max-w-6xl"},Yr={class:"flex h-full w-full flex-col gap-4 overflow-hidden p-8 pb-0 min-h-[80vh] max-h-[80vh] h-available"},Xr={class:"mx-auto h-44 w-auto p-2"},Vr={class:"overflow-hidden p-4 h-available"},Hr={class:"mt-auto flex h-16 w-full justify-end gap-4 rounded-b-lg p-4"},Wr=U({__name:"Frame",props:{steps:{type:Array,required:!0},nextButtonLocked:{type:Boolean,default:!1},currentStep:{type:String,required:!0},setCurrentStep:{type:Function,required:!0},finish:{type:Function,required:!0}},setup(r){const e=r,n=Se(()=>e.steps.findIndex(i=>i===e.currentStep)===0),t=Se(()=>e.steps.findIndex(i=>i===e.currentStep)===e.steps.length-1);function o(){e.steps.findIndex(i=>i===e.currentStep)<e.steps.length-1&&e.setCurrentStep(e.steps[e.steps.findIndex(i=>i===e.currentStep)+1])}function a(){e.steps.findIndex(i=>i===e.currentStep)>0&&e.setCurrentStep(e.steps[e.steps.findIndex(i=>i===e.currentStep)-1])}return(i,s)=>(D(),j("div",jr,[p("div",Rr,[p("div",{class:Kt(["animate-loading","w-full h-full gap-2.5 flex flex-col ml-auto overflow-hidden rounded-xl bg-surface-1 dark:bg-surface-2 bg-cover border-2 border-transparent text-start transition-all duration-300"]),style:{"--bg-color":"linear-gradient(rgb(var(--surface-2)), rgb(var(--surface-2)))","--border-color":`linear-gradient(var(--angle, 45deg),
						rgb(var(--color-theme-8) / 0.7) 0%,
						rgb(var(--color-theme-8) / 0.3) 33.33%,
						rgb(var(--color-theme-8) / 0.14) 66.67%,
						rgb(var(--color-theme-8) / 0.1) 100%
					)`}},[p("div",Yr,[p("div",Xr,[T($r,{class:"pb-8"})]),T(Lr,{"current-step":r.currentStep,steps:r.steps},null,8,["current-step","steps"]),p("div",Vr,[Sr(i.$slots,"default")])]),p("div",Hr,[n.value?ze("",!0):(D(),L(Ee,{key:0,id:"yes",class:"ml-auto !w-28",color:"contrast",type:"button",variant:"text",onClick:a},{default:$(()=>[V(k(i.$t("Back")),1)]),_:1})),t.value?(D(),L(Ee,{key:1,id:"cancel",disabled:r.nextButtonLocked,class:"!w-28",color:"theme",type:"button",variant:"default",onClick:r.finish},{default:$(()=>[V(k(i.$t("Finish")),1)]),_:1},8,["disabled","onClick"])):(D(),L(Ee,{key:2,id:"save",disabled:r.nextButtonLocked,class:"!w-28",color:"theme",type:"button",variant:"default",onClick:o},{default:$(()=>[V(k(i.$t("Next")),1)]),_:1},8,["disabled"]))])])])]))}}),zr=Wr;/**!
* Sortable 1.15.6
* @author	RubaXa   <trash@rubaxa.org>
* @author	owenm    <owen23355@gmail.com>
* @license MIT
*/function Lt(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function ae(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Lt(Object(n),!0).forEach(function(t){Gr(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function nt(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?nt=function(e){return typeof e}:nt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(r)}function Gr(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function se(){return se=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r},se.apply(this,arguments)}function Kr(r,e){if(r==null)return{};var n={},t=Object.keys(r),o,a;for(a=0;a<t.length;a++)o=t[a],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}function Qr(r,e){if(r==null)return{};var n=Kr(r,e),t,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(o=0;o<a.length;o++)t=a[o],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}var Ur="1.15.6";function le(r){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(r)}var ue=le(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Qe=le(/Edge/i),jt=le(/firefox/i),Ye=le(/safari/i)&&!le(/chrome/i)&&!le(/android/i),Nt=le(/iP(ad|od|hone)/i),Ut=le(/chrome/i)&&le(/android/i),Zt={capture:!1,passive:!1};function x(r,e,n){r.addEventListener(e,n,!ue&&Zt)}function w(r,e,n){r.removeEventListener(e,n,!ue&&Zt)}function ut(r,e){if(e){if(e[0]===">"&&(e=e.substring(1)),r)try{if(r.matches)return r.matches(e);if(r.msMatchesSelector)return r.msMatchesSelector(e);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(e)}catch{return!1}return!1}}function Jt(r){return r.host&&r!==document&&r.host.nodeType?r.host:r.parentNode}function te(r,e,n,t){if(r){n=n||document;do{if(e!=null&&(e[0]===">"?r.parentNode===n&&ut(r,e):ut(r,e))||t&&r===n)return r;if(r===n)break}while(r=Jt(r))}return null}var Rt=/\s+/g;function K(r,e,n){r&&e&&(r.classList?r.classList[n?"add":"remove"](e):r.className=((" "+r.className+" ").replace(Rt," ").replace(" "+e+" "," ")+(n?" "+e:"")).replace(Rt," "))}function g(r,e,n){var t=r&&r.style;if(t){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(r,""):r.currentStyle&&(n=r.currentStyle),e===void 0?n:n[e];!(e in t)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),t[e]=n+(typeof n=="string"?"":"px")}}function $e(r,e){var n="";if(typeof r=="string")n=r;else do{var t=g(r,"transform");t&&t!=="none"&&(n=t+" "+n)}while(!e&&(r=r.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function er(r,e,n){if(r){var t=r.getElementsByTagName(e),o=0,a=t.length;if(n)for(;o<a;o++)n(t[o],o);return t}return[]}function oe(){var r=document.scrollingElement;return r||document.documentElement}function F(r,e,n,t,o){if(!(!r.getBoundingClientRect&&r!==window)){var a,i,s,l,u,c,f;if(r!==window&&r.parentNode&&r!==oe()?(a=r.getBoundingClientRect(),i=a.top,s=a.left,l=a.bottom,u=a.right,c=a.height,f=a.width):(i=0,s=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(e||n)&&r!==window&&(o=o||r.parentNode,!ue))do if(o&&o.getBoundingClientRect&&(g(o,"transform")!=="none"||n&&g(o,"position")!=="static")){var _=o.getBoundingClientRect();i-=_.top+parseInt(g(o,"border-top-width")),s-=_.left+parseInt(g(o,"border-left-width")),l=i+a.height,u=s+a.width;break}while(o=o.parentNode);if(t&&r!==window){var h=$e(o||r),v=h&&h.a,m=h&&h.d;h&&(i/=m,s/=v,f/=v,c/=m,l=i+c,u=s+f)}return{top:i,left:s,bottom:l,right:u,width:f,height:c}}}function Yt(r,e,n){for(var t=me(r,!0),o=F(r)[e];t;){var a=F(t)[n],i=void 0;if(n==="top"||n==="left"?i=o>=a:i=o<=a,!i)return t;if(t===oe())break;t=me(t,!1)}return!1}function Ae(r,e,n,t){for(var o=0,a=0,i=r.children;a<i.length;){if(i[a].style.display!=="none"&&i[a]!==y.ghost&&(t||i[a]!==y.dragged)&&te(i[a],n.draggable,r,!1)){if(o===e)return i[a];o++}a++}return null}function $t(r,e){for(var n=r.lastElementChild;n&&(n===y.ghost||g(n,"display")==="none"||e&&!ut(n,e));)n=n.previousElementSibling;return n||null}function Z(r,e){var n=0;if(!r||!r.parentNode)return-1;for(;r=r.previousElementSibling;)r.nodeName.toUpperCase()!=="TEMPLATE"&&r!==y.clone&&(!e||ut(r,e))&&n++;return n}function Xt(r){var e=0,n=0,t=oe();if(r)do{var o=$e(r),a=o.a,i=o.d;e+=r.scrollLeft*a,n+=r.scrollTop*i}while(r!==t&&(r=r.parentNode));return[e,n]}function Zr(r,e){for(var n in r)if(r.hasOwnProperty(n)){for(var t in e)if(e.hasOwnProperty(t)&&e[t]===r[n][t])return Number(n)}return-1}function me(r,e){if(!r||!r.getBoundingClientRect)return oe();var n=r,t=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=g(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return oe();if(t||e)return n;t=!0}}while(n=n.parentNode);return oe()}function Jr(r,e){if(r&&e)for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r}function vt(r,e){return Math.round(r.top)===Math.round(e.top)&&Math.round(r.left)===Math.round(e.left)&&Math.round(r.height)===Math.round(e.height)&&Math.round(r.width)===Math.round(e.width)}var Xe;function tr(r,e){return function(){if(!Xe){var n=arguments,t=this;n.length===1?r.call(t,n[0]):r.apply(t,n),Xe=setTimeout(function(){Xe=void 0},e)}}}function en(){clearTimeout(Xe),Xe=void 0}function rr(r,e,n){r.scrollLeft+=e,r.scrollTop+=n}function nr(r){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(r).cloneNode(!0):n?n(r).clone(!0)[0]:r.cloneNode(!0)}function or(r,e,n){var t={};return Array.from(r.children).forEach(function(o){var a,i,s,l;if(!(!te(o,e.draggable,r,!1)||o.animated||o===n)){var u=F(o);t.left=Math.min((a=t.left)!==null&&a!==void 0?a:1/0,u.left),t.top=Math.min((i=t.top)!==null&&i!==void 0?i:1/0,u.top),t.right=Math.max((s=t.right)!==null&&s!==void 0?s:-1/0,u.right),t.bottom=Math.max((l=t.bottom)!==null&&l!==void 0?l:-1/0,u.bottom)}}),t.width=t.right-t.left,t.height=t.bottom-t.top,t.x=t.left,t.y=t.top,t}var X="Sortable"+new Date().getTime();function tn(){var r=[],e;return{captureAnimationState:function(){r=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(t){if(!(g(t,"display")==="none"||t===y.ghost)){r.push({target:t,rect:F(t)});var o=ae({},r[r.length-1].rect);if(t.thisAnimationDuration){var a=$e(t,!0);a&&(o.top-=a.f,o.left-=a.e)}t.fromRect=o}})},addAnimationState:function(t){r.push(t)},removeAnimationState:function(t){r.splice(Zr(r,{target:t}),1)},animateAll:function(t){var o=this;if(!this.options.animation){clearTimeout(e),typeof t=="function"&&t();return}var a=!1,i=0;r.forEach(function(s){var l=0,u=s.target,c=u.fromRect,f=F(u),_=u.prevFromRect,h=u.prevToRect,v=s.rect,m=$e(u,!0);m&&(f.top-=m.f,f.left-=m.e),u.toRect=f,u.thisAnimationDuration&&vt(_,f)&&!vt(c,f)&&(v.top-f.top)/(v.left-f.left)===(c.top-f.top)/(c.left-f.left)&&(l=nn(v,_,h,o.options)),vt(f,c)||(u.prevFromRect=c,u.prevToRect=f,l||(l=o.options.animation),o.animate(u,v,f,l)),l&&(a=!0,i=Math.max(i,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(e),a?e=setTimeout(function(){typeof t=="function"&&t()},i):typeof t=="function"&&t(),r=[]},animate:function(t,o,a,i){if(i){g(t,"transition",""),g(t,"transform","");var s=$e(this.el),l=s&&s.a,u=s&&s.d,c=(o.left-a.left)/(l||1),f=(o.top-a.top)/(u||1);t.animatingX=!!c,t.animatingY=!!f,g(t,"transform","translate3d("+c+"px,"+f+"px,0)"),this.forRepaintDummy=rn(t),g(t,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),g(t,"transform","translate3d(0,0,0)"),typeof t.animated=="number"&&clearTimeout(t.animated),t.animated=setTimeout(function(){g(t,"transition",""),g(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},i)}}}}function rn(r){return r.offsetWidth}function nn(r,e,n,t){return Math.sqrt(Math.pow(e.top-r.top,2)+Math.pow(e.left-r.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*t.animation}var ke=[],gt={initializeByDefault:!0},Ue={mount:function(e){for(var n in gt)gt.hasOwnProperty(n)&&!(n in e)&&(e[n]=gt[n]);ke.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),ke.push(e)},pluginEvent:function(e,n,t){var o=this;this.eventCanceled=!1,t.cancel=function(){o.eventCanceled=!0};var a=e+"Global";ke.forEach(function(i){n[i.pluginName]&&(n[i.pluginName][a]&&n[i.pluginName][a](ae({sortable:n},t)),n.options[i.pluginName]&&n[i.pluginName][e]&&n[i.pluginName][e](ae({sortable:n},t)))})},initializePlugins:function(e,n,t,o){ke.forEach(function(s){var l=s.pluginName;if(!(!e.options[l]&&!s.initializeByDefault)){var u=new s(e,n,e.options);u.sortable=e,u.options=e.options,e[l]=u,se(t,u.defaults)}});for(var a in e.options)if(e.options.hasOwnProperty(a)){var i=this.modifyOption(e,a,e.options[a]);typeof i<"u"&&(e.options[a]=i)}},getEventProperties:function(e,n){var t={};return ke.forEach(function(o){typeof o.eventProperties=="function"&&se(t,o.eventProperties.call(n[o.pluginName],e))}),t},modifyOption:function(e,n,t){var o;return ke.forEach(function(a){e[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[n]=="function"&&(o=a.optionListeners[n].call(e[a.pluginName],t))}),o}};function on(r){var e=r.sortable,n=r.rootEl,t=r.name,o=r.targetEl,a=r.cloneEl,i=r.toEl,s=r.fromEl,l=r.oldIndex,u=r.newIndex,c=r.oldDraggableIndex,f=r.newDraggableIndex,_=r.originalEvent,h=r.putSortable,v=r.extraEventProperties;if(e=e||n&&n[X],!!e){var m,E=e.options,W="on"+t.charAt(0).toUpperCase()+t.substr(1);window.CustomEvent&&!ue&&!Qe?m=new CustomEvent(t,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(t,!0,!0)),m.to=i||n,m.from=s||n,m.item=o||n,m.clone=a,m.oldIndex=l,m.newIndex=u,m.oldDraggableIndex=c,m.newDraggableIndex=f,m.originalEvent=_,m.pullMode=h?h.lastPutMode:void 0;var C=ae(ae({},v),Ue.getEventProperties(t,e));for(var R in C)m[R]=C[R];n&&n.dispatchEvent(m),E[W]&&E[W].call(e,m)}}var an=["evt"],Y=function(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=t.evt,a=Qr(t,an);Ue.pluginEvent.bind(y)(e,n,ae({dragEl:d,parentEl:N,ghostEl:b,rootEl:O,nextEl:xe,lastDownEl:ot,cloneEl:I,cloneHidden:he,dragStarted:Le,putSortable:M,activeSortable:y.active,originalEvent:o,oldIndex:Ie,oldDraggableIndex:Ve,newIndex:Q,newDraggableIndex:fe,hideGhostForTarget:sr,unhideGhostForTarget:ur,cloneNowHidden:function(){he=!0},cloneNowShown:function(){he=!1},dispatchSortableEvent:function(s){B({sortable:n,name:s,originalEvent:o})}},a))};function B(r){on(ae({putSortable:M,cloneEl:I,targetEl:d,rootEl:O,oldIndex:Ie,oldDraggableIndex:Ve,newIndex:Q,newDraggableIndex:fe},r))}var d,N,b,O,xe,ot,I,he,Ie,Q,Ve,fe,Je,M,Oe=!1,dt=!1,ct=[],_e,ee,yt,bt,Vt,Ht,Le,Ce,He,We=!1,et=!1,at,P,_t=[],Dt=!1,ft=[],mt=typeof document<"u",tt=Nt,Wt=Qe||ue?"cssFloat":"float",ln=mt&&!Ut&&!Nt&&"draggable"in document.createElement("div"),ar=function(){if(mt){if(ue)return!1;var r=document.createElement("x");return r.style.cssText="pointer-events:auto",r.style.pointerEvents==="auto"}}(),ir=function(e,n){var t=g(e),o=parseInt(t.width)-parseInt(t.paddingLeft)-parseInt(t.paddingRight)-parseInt(t.borderLeftWidth)-parseInt(t.borderRightWidth),a=Ae(e,0,n),i=Ae(e,1,n),s=a&&g(a),l=i&&g(i),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+F(a).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+F(i).width;if(t.display==="flex")return t.flexDirection==="column"||t.flexDirection==="column-reverse"?"vertical":"horizontal";if(t.display==="grid")return t.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&s.float&&s.float!=="none"){var f=s.float==="left"?"left":"right";return i&&(l.clear==="both"||l.clear===f)?"vertical":"horizontal"}return a&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=o&&t[Wt]==="none"||i&&t[Wt]==="none"&&u+c>o)?"vertical":"horizontal"},sn=function(e,n,t){var o=t?e.left:e.top,a=t?e.right:e.bottom,i=t?e.width:e.height,s=t?n.left:n.top,l=t?n.right:n.bottom,u=t?n.width:n.height;return o===s||a===l||o+i/2===s+u/2},un=function(e,n){var t;return ct.some(function(o){var a=o[X].options.emptyInsertThreshold;if(!(!a||$t(o))){var i=F(o),s=e>=i.left-a&&e<=i.right+a,l=n>=i.top-a&&n<=i.bottom+a;if(s&&l)return t=o}}),t},lr=function(e){function n(a,i){return function(s,l,u,c){var f=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(a==null&&(i||f))return!0;if(a==null||a===!1)return!1;if(i&&a==="clone")return a;if(typeof a=="function")return n(a(s,l,u,c),i)(s,l,u,c);var _=(i?s:l).options.group.name;return a===!0||typeof a=="string"&&a===_||a.join&&a.indexOf(_)>-1}}var t={},o=e.group;(!o||nt(o)!="object")&&(o={name:o}),t.name=o.name,t.checkPull=n(o.pull,!0),t.checkPut=n(o.put),t.revertClone=o.revertClone,e.group=t},sr=function(){!ar&&b&&g(b,"display","none")},ur=function(){!ar&&b&&g(b,"display","")};mt&&!Ut&&document.addEventListener("click",function(r){if(dt)return r.preventDefault(),r.stopPropagation&&r.stopPropagation(),r.stopImmediatePropagation&&r.stopImmediatePropagation(),dt=!1,!1},!0);var we=function(e){if(d){e=e.touches?e.touches[0]:e;var n=un(e.clientX,e.clientY);if(n){var t={};for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.target=t.rootEl=n,t.preventDefault=void 0,t.stopPropagation=void 0,n[X]._onDragOver(t)}}},dn=function(e){d&&d.parentNode[X]._isOutsideThisEl(e.target)};function y(r,e){if(!(r&&r.nodeType&&r.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(r));this.el=r,this.options=e=se({},e),r[X]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(r.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ir(r,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,s){i.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:y.supportPointer!==!1&&"PointerEvent"in window&&(!Ye||Nt),emptyInsertThreshold:5};Ue.initializePlugins(this,r,n);for(var t in n)!(t in e)&&(e[t]=n[t]);lr(e);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=e.forceFallback?!1:ln,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?x(r,"pointerdown",this._onTapStart):(x(r,"mousedown",this._onTapStart),x(r,"touchstart",this._onTapStart)),this.nativeDraggable&&(x(r,"dragover",this),x(r,"dragenter",this)),ct.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),se(this,tn())}y.prototype={constructor:y,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ce=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,d):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,t=this.el,o=this.options,a=o.preventOnFilter,i=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(s||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=o.filter;if(yn(t),!d&&!(/mousedown|pointerdown/.test(i)&&e.button!==0||o.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Ye&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=te(l,o.draggable,t,!1),!(l&&l.animated)&&ot!==l)){if(Ie=Z(l),Ve=Z(l,o.draggable),typeof c=="function"){if(c.call(this,e,l,this)){B({sortable:n,rootEl:u,name:"filter",targetEl:l,toEl:t,fromEl:t}),Y("filter",n,{evt:e}),a&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(f){if(f=te(u,f.trim(),t,!1),f)return B({sortable:n,rootEl:f,name:"filter",targetEl:l,fromEl:t,toEl:t}),Y("filter",n,{evt:e}),!0}),c)){a&&e.preventDefault();return}o.handle&&!te(u,o.handle,t,!1)||this._prepareDragStart(e,s,l)}}},_prepareDragStart:function(e,n,t){var o=this,a=o.el,i=o.options,s=a.ownerDocument,l;if(t&&!d&&t.parentNode===a){var u=F(t);if(O=a,d=t,N=d.parentNode,xe=d.nextSibling,ot=t,Je=i.group,y.dragged=d,_e={target:d,clientX:(n||e).clientX,clientY:(n||e).clientY},Vt=_e.clientX-u.left,Ht=_e.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,d.style["will-change"]="all",l=function(){if(Y("delayEnded",o,{evt:e}),y.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!jt&&o.nativeDraggable&&(d.draggable=!0),o._triggerDragStart(e,n),B({sortable:o,name:"choose",originalEvent:e}),K(d,i.chosenClass,!0)},i.ignore.split(",").forEach(function(c){er(d,c.trim(),wt)}),x(s,"dragover",we),x(s,"mousemove",we),x(s,"touchmove",we),i.supportPointer?(x(s,"pointerup",o._onDrop),!this.nativeDraggable&&x(s,"pointercancel",o._onDrop)):(x(s,"mouseup",o._onDrop),x(s,"touchend",o._onDrop),x(s,"touchcancel",o._onDrop)),jt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,d.draggable=!0),Y("delayStart",this,{evt:e}),i.delay&&(!i.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Qe||ue))){if(y.eventCanceled){this._onDrop();return}i.supportPointer?(x(s,"pointerup",o._disableDelayedDrag),x(s,"pointercancel",o._disableDelayedDrag)):(x(s,"mouseup",o._disableDelayedDrag),x(s,"touchend",o._disableDelayedDrag),x(s,"touchcancel",o._disableDelayedDrag)),x(s,"mousemove",o._delayedDragTouchMoveHandler),x(s,"touchmove",o._delayedDragTouchMoveHandler),i.supportPointer&&x(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(l,i.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){d&&wt(d),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;w(e,"mouseup",this._disableDelayedDrag),w(e,"touchend",this._disableDelayedDrag),w(e,"touchcancel",this._disableDelayedDrag),w(e,"pointerup",this._disableDelayedDrag),w(e,"pointercancel",this._disableDelayedDrag),w(e,"mousemove",this._delayedDragTouchMoveHandler),w(e,"touchmove",this._delayedDragTouchMoveHandler),w(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?x(document,"pointermove",this._onTouchMove):n?x(document,"touchmove",this._onTouchMove):x(document,"mousemove",this._onTouchMove):(x(d,"dragend",this),x(O,"dragstart",this._onDragStart));try{document.selection?it(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(Oe=!1,O&&d){Y("dragStarted",this,{evt:n}),this.nativeDraggable&&x(document,"dragover",dn);var t=this.options;!e&&K(d,t.dragClass,!1),K(d,t.ghostClass,!0),y.active=this,e&&this._appendGhost(),B({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(ee){this._lastX=ee.clientX,this._lastY=ee.clientY,sr();for(var e=document.elementFromPoint(ee.clientX,ee.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ee.clientX,ee.clientY),e!==n);)n=e;if(d.parentNode[X]._isOutsideThisEl(e),n)do{if(n[X]){var t=void 0;if(t=n[X]._onDragOver({clientX:ee.clientX,clientY:ee.clientY,target:e,rootEl:n}),t&&!this.options.dragoverBubble)break}e=n}while(n=Jt(n));ur()}},_onTouchMove:function(e){if(_e){var n=this.options,t=n.fallbackTolerance,o=n.fallbackOffset,a=e.touches?e.touches[0]:e,i=b&&$e(b,!0),s=b&&i&&i.a,l=b&&i&&i.d,u=tt&&P&&Xt(P),c=(a.clientX-_e.clientX+o.x)/(s||1)+(u?u[0]-_t[0]:0)/(s||1),f=(a.clientY-_e.clientY+o.y)/(l||1)+(u?u[1]-_t[1]:0)/(l||1);if(!y.active&&!Oe){if(t&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<t)return;this._onDragStart(e,!0)}if(b){i?(i.e+=c-(yt||0),i.f+=f-(bt||0)):i={a:1,b:0,c:0,d:1,e:c,f};var _="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");g(b,"webkitTransform",_),g(b,"mozTransform",_),g(b,"msTransform",_),g(b,"transform",_),yt=c,bt=f,ee=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!b){var e=this.options.fallbackOnBody?document.body:O,n=F(d,!0,tt,!0,e),t=this.options;if(tt){for(P=e;g(P,"position")==="static"&&g(P,"transform")==="none"&&P!==document;)P=P.parentNode;P!==document.body&&P!==document.documentElement?(P===document&&(P=oe()),n.top+=P.scrollTop,n.left+=P.scrollLeft):P=oe(),_t=Xt(P)}b=d.cloneNode(!0),K(b,t.ghostClass,!1),K(b,t.fallbackClass,!0),K(b,t.dragClass,!0),g(b,"transition",""),g(b,"transform",""),g(b,"box-sizing","border-box"),g(b,"margin",0),g(b,"top",n.top),g(b,"left",n.left),g(b,"width",n.width),g(b,"height",n.height),g(b,"opacity","0.8"),g(b,"position",tt?"absolute":"fixed"),g(b,"zIndex","100000"),g(b,"pointerEvents","none"),y.ghost=b,e.appendChild(b),g(b,"transform-origin",Vt/parseInt(b.style.width)*100+"% "+Ht/parseInt(b.style.height)*100+"%")}},_onDragStart:function(e,n){var t=this,o=e.dataTransfer,a=t.options;if(Y("dragStart",this,{evt:e}),y.eventCanceled){this._onDrop();return}Y("setupClone",this),y.eventCanceled||(I=nr(d),I.removeAttribute("id"),I.draggable=!1,I.style["will-change"]="",this._hideClone(),K(I,this.options.chosenClass,!1),y.clone=I),t.cloneId=it(function(){Y("clone",t),!y.eventCanceled&&(t.options.removeCloneOnHide||O.insertBefore(I,d),t._hideClone(),B({sortable:t,name:"clone"}))}),!n&&K(d,a.dragClass,!0),n?(dt=!0,t._loopId=setInterval(t._emulateDragOver,50)):(w(document,"mouseup",t._onDrop),w(document,"touchend",t._onDrop),w(document,"touchcancel",t._onDrop),o&&(o.effectAllowed="move",a.setData&&a.setData.call(t,o,d)),x(document,"drop",t),g(d,"transform","translateZ(0)")),Oe=!0,t._dragStartId=it(t._dragStarted.bind(t,n,e)),x(document,"selectstart",t),Le=!0,window.getSelection().removeAllRanges(),Ye&&g(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,t=e.target,o,a,i,s=this.options,l=s.group,u=y.active,c=Je===l,f=s.sort,_=M||u,h,v=this,m=!1;if(Dt)return;function E(qe,cr){Y(qe,v,ae({evt:e,isOwner:c,axis:h?"vertical":"horizontal",revert:i,dragRect:o,targetRect:a,canSort:f,fromSortable:_,target:t,completed:C,onMove:function(Mt,fr){return rt(O,n,d,o,Mt,F(Mt),e,fr)},changed:R},cr))}function W(){E("dragOverAnimationCapture"),v.captureAnimationState(),v!==_&&_.captureAnimationState()}function C(qe){return E("dragOverCompleted",{insertion:qe}),qe&&(c?u._hideClone():u._showClone(v),v!==_&&(K(d,M?M.options.ghostClass:u.options.ghostClass,!1),K(d,s.ghostClass,!0)),M!==v&&v!==y.active?M=v:v===y.active&&M&&(M=null),_===v&&(v._ignoreWhileAnimating=t),v.animateAll(function(){E("dragOverAnimationComplete"),v._ignoreWhileAnimating=null}),v!==_&&(_.animateAll(),_._ignoreWhileAnimating=null)),(t===d&&!d.animated||t===n&&!t.animated)&&(Ce=null),!s.dragoverBubble&&!e.rootEl&&t!==document&&(d.parentNode[X]._isOutsideThisEl(e.target),!qe&&we(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function R(){Q=Z(d),fe=Z(d,s.draggable),B({sortable:v,name:"change",toEl:n,newIndex:Q,newDraggableIndex:fe,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),t=te(t,s.draggable,n,!0),E("dragOver"),y.eventCanceled)return m;if(d.contains(e.target)||t.animated&&t.animatingX&&t.animatingY||v._ignoreWhileAnimating===t)return C(!1);if(dt=!1,u&&!s.disabled&&(c?f||(i=N!==O):M===this||(this.lastPutMode=Je.checkPull(this,u,d,e))&&l.checkPut(this,u,d,e))){if(h=this._getDirection(e,t)==="vertical",o=F(d),E("dragOverValid"),y.eventCanceled)return m;if(i)return N=O,W(),this._hideClone(),E("revert"),y.eventCanceled||(xe?O.insertBefore(d,xe):O.appendChild(d)),C(!0);var z=$t(n,s.draggable);if(!z||pn(e,h,this)&&!z.animated){if(z===d)return C(!1);if(z&&n===e.target&&(t=z),t&&(a=F(t)),rt(O,n,d,o,t,a,e,!!t)!==!1)return W(),z&&z.nextSibling?n.insertBefore(d,z.nextSibling):n.appendChild(d),N=n,R(),C(!0)}else if(z&&hn(e,h,this)){var ge=Ae(n,0,s,!0);if(ge===d)return C(!1);if(t=ge,a=F(t),rt(O,n,d,o,t,a,e,!1)!==!1)return W(),n.insertBefore(d,ge),N=n,R(),C(!0)}else if(t.parentNode===n){a=F(t);var re=0,ye,Fe=d.parentNode!==n,G=!sn(d.animated&&d.toRect||o,t.animated&&t.toRect||a,h),Me=h?"top":"left",de=Yt(t,"top","top")||Yt(d,"top","top"),Pe=de?de.scrollTop:void 0;Ce!==t&&(ye=a[Me],We=!1,et=!G&&s.invertSwap||Fe),re=mn(e,t,a,h,G?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,et,Ce===t);var ie;if(re!==0){var be=Z(d);do be-=re,ie=N.children[be];while(ie&&(g(ie,"display")==="none"||ie===b))}if(re===0||ie===t)return C(!1);Ce=t,He=re;var Be=t.nextElementSibling,ce=!1;ce=re===1;var Ze=rt(O,n,d,o,t,a,e,ce);if(Ze!==!1)return(Ze===1||Ze===-1)&&(ce=Ze===1),Dt=!0,setTimeout(fn,30),W(),ce&&!Be?n.appendChild(d):t.parentNode.insertBefore(d,ce?Be:t),de&&rr(de,0,Pe-de.scrollTop),N=d.parentNode,ye!==void 0&&!et&&(at=Math.abs(ye-F(t)[Me])),R(),C(!0)}if(n.contains(d))return C(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){w(document,"mousemove",this._onTouchMove),w(document,"touchmove",this._onTouchMove),w(document,"pointermove",this._onTouchMove),w(document,"dragover",we),w(document,"mousemove",we),w(document,"touchmove",we)},_offUpEvents:function(){var e=this.el.ownerDocument;w(e,"mouseup",this._onDrop),w(e,"touchend",this._onDrop),w(e,"pointerup",this._onDrop),w(e,"pointercancel",this._onDrop),w(e,"touchcancel",this._onDrop),w(document,"selectstart",this)},_onDrop:function(e){var n=this.el,t=this.options;if(Q=Z(d),fe=Z(d,t.draggable),Y("drop",this,{evt:e}),N=d&&d.parentNode,Q=Z(d),fe=Z(d,t.draggable),y.eventCanceled){this._nulling();return}Oe=!1,et=!1,We=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Tt(this.cloneId),Tt(this._dragStartId),this.nativeDraggable&&(w(document,"drop",this),w(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ye&&g(document.body,"user-select",""),g(d,"transform",""),e&&(Le&&(e.cancelable&&e.preventDefault(),!t.dropBubble&&e.stopPropagation()),b&&b.parentNode&&b.parentNode.removeChild(b),(O===N||M&&M.lastPutMode!=="clone")&&I&&I.parentNode&&I.parentNode.removeChild(I),d&&(this.nativeDraggable&&w(d,"dragend",this),wt(d),d.style["will-change"]="",Le&&!Oe&&K(d,M?M.options.ghostClass:this.options.ghostClass,!1),K(d,this.options.chosenClass,!1),B({sortable:this,name:"unchoose",toEl:N,newIndex:null,newDraggableIndex:null,originalEvent:e}),O!==N?(Q>=0&&(B({rootEl:N,name:"add",toEl:N,fromEl:O,originalEvent:e}),B({sortable:this,name:"remove",toEl:N,originalEvent:e}),B({rootEl:N,name:"sort",toEl:N,fromEl:O,originalEvent:e}),B({sortable:this,name:"sort",toEl:N,originalEvent:e})),M&&M.save()):Q!==Ie&&Q>=0&&(B({sortable:this,name:"update",toEl:N,originalEvent:e}),B({sortable:this,name:"sort",toEl:N,originalEvent:e})),y.active&&((Q==null||Q===-1)&&(Q=Ie,fe=Ve),B({sortable:this,name:"end",toEl:N,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Y("nulling",this),O=d=N=b=xe=I=ot=he=_e=ee=Le=Q=fe=Ie=Ve=Ce=He=M=Je=y.dragged=y.ghost=y.clone=y.active=null,ft.forEach(function(e){e.checked=!0}),ft.length=yt=bt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":d&&(this._onDragOver(e),cn(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,t=this.el.children,o=0,a=t.length,i=this.options;o<a;o++)n=t[o],te(n,i.draggable,this.el,!1)&&e.push(n.getAttribute(i.dataIdAttr)||gn(n));return e},sort:function(e,n){var t={},o=this.el;this.toArray().forEach(function(a,i){var s=o.children[i];te(s,this.options.draggable,o,!1)&&(t[a]=s)},this),n&&this.captureAnimationState(),e.forEach(function(a){t[a]&&(o.removeChild(t[a]),o.appendChild(t[a]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return te(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var t=this.options;if(n===void 0)return t[e];var o=Ue.modifyOption(this,e,n);typeof o<"u"?t[e]=o:t[e]=n,e==="group"&&lr(t)},destroy:function(){Y("destroy",this);var e=this.el;e[X]=null,w(e,"mousedown",this._onTapStart),w(e,"touchstart",this._onTapStart),w(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(w(e,"dragover",this),w(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ct.splice(ct.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!he){if(Y("hideClone",this),y.eventCanceled)return;g(I,"display","none"),this.options.removeCloneOnHide&&I.parentNode&&I.parentNode.removeChild(I),he=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(he){if(Y("showClone",this),y.eventCanceled)return;d.parentNode==O&&!this.options.group.revertClone?O.insertBefore(I,d):xe?O.insertBefore(I,xe):O.appendChild(I),this.options.group.revertClone&&this.animate(d,I),g(I,"display",""),he=!1}}};function cn(r){r.dataTransfer&&(r.dataTransfer.dropEffect="move"),r.cancelable&&r.preventDefault()}function rt(r,e,n,t,o,a,i,s){var l,u=r[X],c=u.options.onMove,f;return window.CustomEvent&&!ue&&!Qe?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=r,l.dragged=n,l.draggedRect=t,l.related=o||e,l.relatedRect=a||F(e),l.willInsertAfter=s,l.originalEvent=i,r.dispatchEvent(l),c&&(f=c.call(u,l,i)),f}function wt(r){r.draggable=!1}function fn(){Dt=!1}function hn(r,e,n){var t=F(Ae(n.el,0,n.options,!0)),o=or(n.el,n.options,b),a=10;return e?r.clientX<o.left-a||r.clientY<t.top&&r.clientX<t.right:r.clientY<o.top-a||r.clientY<t.bottom&&r.clientX<t.left}function pn(r,e,n){var t=F($t(n.el,n.options.draggable)),o=or(n.el,n.options,b),a=10;return e?r.clientX>o.right+a||r.clientY>t.bottom&&r.clientX>t.left:r.clientY>o.bottom+a||r.clientX>t.right&&r.clientY>t.top}function mn(r,e,n,t,o,a,i,s){var l=t?r.clientY:r.clientX,u=t?n.height:n.width,c=t?n.top:n.left,f=t?n.bottom:n.right,_=!1;if(!i){if(s&&at<u*o){if(!We&&(He===1?l>c+u*a/2:l<f-u*a/2)&&(We=!0),We)_=!0;else if(He===1?l<c+at:l>f-at)return-He}else if(l>c+u*(1-o)/2&&l<f-u*(1-o)/2)return vn(e)}return _=_||i,_&&(l<c+u*a/2||l>f-u*a/2)?l>c+u/2?1:-1:0}function vn(r){return Z(d)<Z(r)?1:-1}function gn(r){for(var e=r.tagName+r.className+r.src+r.href+r.textContent,n=e.length,t=0;n--;)t+=e.charCodeAt(n);return t.toString(36)}function yn(r){ft.length=0;for(var e=r.getElementsByTagName("input"),n=e.length;n--;){var t=e[n];t.checked&&ft.push(t)}}function it(r){return setTimeout(r,0)}function Tt(r){return clearTimeout(r)}mt&&x(document,"touchmove",function(r){(y.active||Oe)&&r.cancelable&&r.preventDefault()});y.utils={on:x,off:w,css:g,find:er,is:function(e,n){return!!te(e,n,e,!1)},extend:Jr,throttle:tr,closest:te,toggleClass:K,clone:nr,index:Z,nextTick:it,cancelNextTick:Tt,detectDirection:ir,getChild:Ae,expando:X};y.get=function(r){return r[X]};y.mount=function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(y.utils=ae(ae({},y.utils),t.utils)),Ue.mount(t)})};y.create=function(r,e){return new y(r,e)};y.version=Ur;var A=[],je,kt,Ct=!1,xt,Et,ht,Re;function bn(){function r(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return r.prototype={dragStarted:function(n){var t=n.originalEvent;this.sortable.nativeDraggable?x(document,"dragover",this._handleAutoScroll):this.options.supportPointer?x(document,"pointermove",this._handleFallbackAutoScroll):t.touches?x(document,"touchmove",this._handleFallbackAutoScroll):x(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var t=n.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?w(document,"dragover",this._handleAutoScroll):(w(document,"pointermove",this._handleFallbackAutoScroll),w(document,"touchmove",this._handleFallbackAutoScroll),w(document,"mousemove",this._handleFallbackAutoScroll)),zt(),lt(),en()},nulling:function(){ht=kt=je=Ct=Re=xt=Et=null,A.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,t){var o=this,a=(n.touches?n.touches[0]:n).clientX,i=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(a,i);if(ht=n,t||this.options.forceAutoScrollFallback||Qe||ue||Ye){St(n,this.options,s,t);var l=me(s,!0);Ct&&(!Re||a!==xt||i!==Et)&&(Re&&zt(),Re=setInterval(function(){var u=me(document.elementFromPoint(a,i),!0);u!==l&&(l=u,lt()),St(n,o.options,u,t)},10),xt=a,Et=i)}else{if(!this.options.bubbleScroll||me(s,!0)===oe()){lt();return}St(n,this.options,me(s,!1),!1)}}},se(r,{pluginName:"scroll",initializeByDefault:!0})}function lt(){A.forEach(function(r){clearInterval(r.pid)}),A=[]}function zt(){clearInterval(Re)}var St=tr(function(r,e,n,t){if(e.scroll){var o=(r.touches?r.touches[0]:r).clientX,a=(r.touches?r.touches[0]:r).clientY,i=e.scrollSensitivity,s=e.scrollSpeed,l=oe(),u=!1,c;kt!==n&&(kt=n,lt(),je=e.scroll,c=e.scrollFn,je===!0&&(je=me(n,!0)));var f=0,_=je;do{var h=_,v=F(h),m=v.top,E=v.bottom,W=v.left,C=v.right,R=v.width,z=v.height,ge=void 0,re=void 0,ye=h.scrollWidth,Fe=h.scrollHeight,G=g(h),Me=h.scrollLeft,de=h.scrollTop;h===l?(ge=R<ye&&(G.overflowX==="auto"||G.overflowX==="scroll"||G.overflowX==="visible"),re=z<Fe&&(G.overflowY==="auto"||G.overflowY==="scroll"||G.overflowY==="visible")):(ge=R<ye&&(G.overflowX==="auto"||G.overflowX==="scroll"),re=z<Fe&&(G.overflowY==="auto"||G.overflowY==="scroll"));var Pe=ge&&(Math.abs(C-o)<=i&&Me+R<ye)-(Math.abs(W-o)<=i&&!!Me),ie=re&&(Math.abs(E-a)<=i&&de+z<Fe)-(Math.abs(m-a)<=i&&!!de);if(!A[f])for(var be=0;be<=f;be++)A[be]||(A[be]={});(A[f].vx!=Pe||A[f].vy!=ie||A[f].el!==h)&&(A[f].el=h,A[f].vx=Pe,A[f].vy=ie,clearInterval(A[f].pid),(Pe!=0||ie!=0)&&(u=!0,A[f].pid=setInterval((function(){t&&this.layer===0&&y.active._onTouchMove(ht);var Be=A[this.layer].vy?A[this.layer].vy*s:0,ce=A[this.layer].vx?A[this.layer].vx*s:0;typeof c=="function"&&c.call(y.dragged.parentNode[X],ce,Be,r,ht,A[this.layer].el)!=="continue"||rr(A[this.layer].el,ce,Be)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&_!==l&&(_=me(_,!1)));Ct=u}},30),dr=function(e){var n=e.originalEvent,t=e.putSortable,o=e.dragEl,a=e.activeSortable,i=e.dispatchSortableEvent,s=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var u=t||a;s();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(c.clientX,c.clientY);l(),u&&!u.el.contains(f)&&(i("spill"),this.onSpill({dragEl:o,putSortable:t}))}};function At(){}At.prototype={startIndex:null,dragStart:function(e){this.startIndex=e.oldDraggableIndex},onSpill:function(e){var n=e.dragEl,t=e.putSortable;this.sortable.captureAnimationState(),t&&t.captureAnimationState();var o=Ae(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(n,o):this.sortable.el.appendChild(n),this.sortable.animateAll(),t&&t.animateAll()},drop:dr};se(At,{pluginName:"revertOnSpill"});function Ft(){}Ft.prototype={onSpill:function(e){var n=e.dragEl,t=e.putSortable||this.sortable;t.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),t.animateAll()},drop:dr};se(Ft,{pluginName:"removeOnSpill"});y.mount(new bn);y.mount(Ft,At);var _n=y;H();function wn(r,e,n={}){let t;const{document:o=yr,...a}=n,i={onUpdate:c=>{Sn(e,c.oldIndex,c.newIndex,c)}},s=()=>{const c=typeof r=="string"?o?.querySelector(r):hr(r);!c||t!==void 0||(t=new _n(c,{...i,...a}))},l=()=>{t?.destroy(),t=void 0},u=(c,f)=>{if(f!==void 0)t?.option(c,f);else return t?.option(c)};return _r(s),br(l),{stop:l,start:s,option:u}}function xn(r,e,n){const t=r.children[n];r.insertBefore(e,t)}function En(r){r.parentNode&&r.parentNode.removeChild(r)}function Sn(r,e,n,t=null){t!=null&&(En(t.item),xn(t.from,t.item,e));const o=xr(r),a=o?[...Pt(r)]:Pt(r);if(n>=0&&n<a.length){const i=a.splice(e,1)[0];gr(()=>{a.splice(n,0,i),o&&(r.value=a)})}}H();var Dn={class:"flex flex-col justify-start items-center flex-grow gap-4"},Tn={class:"flex justify-start items-start flex-grow-0 flex-shrink-0 relative gap-2 rounded-lg"},kn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-0.5"},Cn={class:"flex justify-start items-start self-stretch flex-grow-0 flex-shrink-0 relative gap-1.5"},On={class:"flex-grow w-full text-base font-medium text-center"},In=U({__name:"TypeButton",props:{type:{type:Object,required:!0},selected:{type:Boolean,default:!1},className:{type:String,required:!1,default:""}},setup(r){const e=r,n=Se(()=>{let t="nomercy";switch(e.type?.value){case"music":t="noteDouble";break;case"tv":t="tv";break;case"image":t="picture";break;case"movie":t="film";break;default:t="nomercy"}return t});return(t,o)=>(D(),j("div",{class:Kt([{"bg-white/11 dark:bg-black/8 outline outline-2 outline-focus hover:bg-focus/[0.15]":r.selected,"hover:bg-focus/[0.15]":!r.selected},"flex justify-start items-start flex-grow gap-1 px-2 py-4 rounded-xl"])},[p("div",Dn,[p("div",Tn,[T(pe,{"class-name":r.className,icon:n.value},null,8,["class-name","icon"])]),p("div",kn,[p("div",Cn,[p("p",On,k(r.type.name),1)])])])],2))}}),Nn=In;H();var $n={class:"my-6 text-sm text-surface-10"},An=U({__name:"DeleteFolderModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},libraryId:{type:String,required:!0},name:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},setup(r){const e=r,n=ve(),t=De();function o(){J().delete(`dashboard/libraries/${e.libraryId}/folders/${e.id}`).then(({data:a})=>{n.invalidateQueries({queryKey:["dashboard","libraries"]}),t.add({severity:a.status==="ok"?"success":"error",summary:S(a.status==="ok"?"Success":"Error"),detail:S(a.message,...a.args??[]),life:5e3}),e.close()}).catch(a=>{t.add({severity:"error",summary:S("Error"),detail:a.message,life:5e3}),e.close()})}return(a,i)=>{const s=Ke("Button");return D(),L(pt,{close:r.close,open:r.open,params:{folder:r.name},"max-width":"max-w-xl",title:"Delete folder {{folder}}"},{actions:$(()=>[T(s,{id:"yes",onclick:o,color:"red","end-icon":"trash",type:"button",variant:"contained"},{default:$(()=>[V(k(a.$t("Delete")),1)]),_:1}),T(s,{id:"no",onclick:r.close,color:"auto",type:"button",variant:"text"},{default:$(()=>[V(k(a.$t("Cancel")),1)]),_:1},8,["onclick"])]),default:$(()=>[p("div",$n,k(a.$t("Are you sure you want to delete this folder?")),1)]),_:1},8,["close","open","params"])}}}),Fn=An;H();var Mn={class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 gap-2 text-surface-1"},Pn={class:"flex flex-col justify-center items-center flex-grow gap-2"},Bn={class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 h-10 relative overflow-hidden gap-2 pl-3 pr-2.5 py-2.5 rounded-[10px] bg-surface-10/5 hover:bg-surface-12/5 active:bg-surface-12/5 text-surface-12/12 hover:text-surface-12"},qn={class:"flex-grow w-available text-base font-semibold text-left"},Ln=U({__name:"FolderItem",props:Qt({folder:{type:Object,required:!0}},{modelValue:{type:Object,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const e=r,n=De(),t=ve(),o=Ot(r,"modelValue"),{data:a}=It({path:"dashboard/encoderProfiles",queryKey:["dashboard","encoderProfiles"]}),i=Se(()=>{switch(o.value.type){case"anime":return a.value?.filter(h=>h.container==="m3u8").map(h=>Te(h));case"movie":return a.value?.filter(h=>h.container==="m3u8").map(h=>Te(h));case"tv":return a.value?.filter(h=>h.container==="m3u8").map(h=>Te(h));case"music":return a.value?.filter(h=>h.container==="mp3"||h.container==="flac").map(h=>Te(h));default:return[]}}),s=q(i.value?.filter(h=>e.folder.folder?.encoder_profiles?.some(v=>v.id===h.id))??[]);ne([i,e],([h,v])=>{!h||!v||(s.value=h.filter(m=>v.folder.folder?.encoder_profiles.some(E=>E.id===m.id)))},{deep:!0});function l(h){const v=h.map(m=>Te(m));s.value=v,u(Te(e.folder),v)}function u(h,v){if(!o.value)return;const m=o.value.folder_library.map(E=>E.folder_id===h.folder_id?{...E,folder:{...E.folder,encoder_profiles:v.map(W=>W)}}:E);J().patch(`dashboard/libraries/${o.value.id}`,{folder_library:m}).then(()=>{t.invalidateQueries({queryKey:["dashboard","libraries"]})}).catch(E=>{n.add({severity:"error",summary:S("Error"),detail:E.message,life:5e3})})}ne(o,()=>{i.value&&(s.value=i.value.filter(h=>e.folder.folder?.encoder_profiles.some(v=>v.id===h.id)))});const c=q(!1);function f(){c.value=!0}function _(){c.value=!1}return(h,v)=>{const m=Ke("MultiSelect");return D(),j(Ne,null,[p("div",Mn,[T(m,{id:"encoderProfiles","model-value":s.value,options:i.value,class:"w-[160px]","option-label":"name",placeholder:"Select","onUpdate:modelValue":l},null,8,["model-value","options"]),p("div",Pn,[p("div",Bn,[p("p",qn,k(r.folder.folder.path),1),p("button",{class:"flex-grow-0 flex-shrink-0 cursor-pointer hover:text-surface-1",onClick:f},[T(pe,{"class-name":"w-6 h-6",icon:"trash"})])])])]),T(Fn,{id:r.folder.folder.id,close:_,"library-id":o.value?.id,name:r.folder.folder.path,open:c.value},null,8,["id","library-id","name","open"])],64)}}}),jn=Ln;H();mr();var Rn={class:"mx-auto flex w-full flex-col h-available"},Yn=U({__name:"NewFolderModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},folder:{type:String,required:!0},setFolder:{type:Function,required:!0},library:{type:Object,required:!1}},setup(r){const e=r,n=vr(),t=ve(),o=De();function a(){J().post(`dashboard/libraries/${n.params.id??e.library?.id}/folders`,{path:e.folder}).then(({data:i})=>{t.invalidateQueries({queryKey:["dashboard","libraries"]}),o.add({severity:i.status==="ok"?"success":"error",summary:S(i.status==="ok"?"Success":"Error"),detail:S(i.message,...i.args),life:5e3}),e.setFolder("/"),e.close()}).catch(i=>{console.error("Error adding folder:",i),e.close()})}return(i,s)=>{const l=Ke("Button");return D(),L(pt,{close:r.close,open:r.open,"max-width":"max-w-5xl overflow-clip max-h-[60vh] h-[60vh]",title:"Add folder"},{actions:$(()=>[T(l,{id:"yes",onclick:a,color:"theme",type:"button",variant:"contained"},{default:$(()=>[V(k(i.$t("Add")),1)]),_:1}),T(l,{id:"no",onclick:r.close,color:"auto",type:"button",variant:"text"},{default:$(()=>[V(k(i.$t("Cancel")),1)]),_:1},8,["onclick"])]),default:$(()=>[p("div",Rn,[T(Ar,{selected:r.folder,"set-selected":r.setFolder},null,8,["selected","set-selected"])])]),_:1},8,["close","open"])}}}),Xn=Yn;H();var Vn={class:"flex flex-col justify-start items-start flex-grow-0 flex-shrink-0 w-full relative gap-8 p-1 px-6"},Hn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-3"},Wn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-6"},zn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-4"},Gn={class:"grid grid-cols-4 justify-start items-start self-stretch gap-2"},Kn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-2"},Qn={class:"flex justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-2"},Un={class:"flex flex-col justify-start items-start flex-grow gap-1.5"},Zn={class:"flex justify-start items-center flex-grow-0 flex-shrink-0 relative gap-px"},Jn={class:"flex-grow-0 flex-shrink-0 text-sm font-medium text-left"},eo={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-3"},to={class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 relative gap-2 rounded"},ro={class:"flex-grow w-[501px] text-lg font-medium text-left"},no={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-6"},oo={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-2"},ao={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-2"},io={class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 relative gap-1"},lo={class:"flex-grow-0 flex-shrink-0 text-sm text-left"},so={class:"flex w-full justify-end items-start self-stretch flex-grow-0 flex-shrink-0 gap-2 rounded-lg bg-white/[0.04] p-2"},uo=U({__name:"EditLibraryModal",props:Qt({open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},{modelValue:{type:Object,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const e=r,n=Ot(r,"modelValue"),t=ve(),o=De(),a=q(n.value?.title),i=Gt(a,500),s=q(n.value?.type??"movie");ne(n,m=>{m&&(a.value=m.title,s.value=m.type||"movie",n.value.folder_library||(n.value={...n.value,folder_library:[]}))},{deep:!0});const l=q([]),u=q("/");function c(m){u.value=m}const f=q(!1);function _(){f.value=!0}function h(){f.value=!1}function v(){J().patch(`dashboard/libraries/${n.value.id}`,{...n.value,subtitles:l.value.map(m=>m.iso_639_1),specialSeasonName:n.value.specialSeasonName}).then(()=>{t.invalidateQueries({queryKey:["dashboard","libraries"]}),e.close()}).catch(m=>{o.add({severity:"error",summary:S("Error"),detail:m.message,life:5e3}),e.close()})}return ne(i,m=>{m&&J().patch(`dashboard/libraries/${n.value.id}`,{title:m}).then(()=>{t.invalidateQueries({queryKey:["dashboard","libraries"]})}).catch(E=>{o.add({severity:"error",summary:S("Error"),detail:E.message,life:5e3})})}),ne(s,m=>{m&&J().patch(`dashboard/libraries/${n.value.id}`,{type:m}).then(()=>{t.invalidateQueries({queryKey:["dashboard","libraries"]})}).catch(E=>{o.add({severity:"error",summary:S("Error"),detail:E.message,life:5e3})})}),(m,E)=>{const W=Ke("InputText");return D(),j(Ne,null,[T(pt,{id:"editLibraryModal",close:r.close,open:r.open,background:"","max-width":"max-w-[565px]","no-close":"",title:"Edit Library"},{actions:$(()=>[p("div",so,[T(Ee,{id:"done",color:"theme",type:"button",variant:"contained",onClick:v},{default:$(()=>[V(k(m.$t("Done")),1)]),_:1})])]),default:$(()=>[p("div",Vn,[p("div",Hn,[p("div",Wn,[p("div",zn,[p("div",Gn,[(D(!0),j(Ne,null,st(Ge(Or),C=>(D(),L(Nn,{key:C.value,selected:s.value===C.value,type:C,"class-name":"size-8",onClick:R=>s.value=C.value},null,8,["selected","type","onClick"]))),128))]),p("div",Kn,[p("div",Qn,[p("div",Un,[p("div",Zn,[p("p",Jn,k(m.$t("Library Title")),1),E[2]||(E[2]=p("p",{class:"flex-grow-0 flex-shrink-0 text-sm font-medium text-left text-focus"}," * ",-1))]),T(W,{id:"title",modelValue:a.value,"onUpdate:modelValue":E[0]||(E[0]=C=>a.value=C),class:"w-full",required:""},null,8,["modelValue"])])])])])])]),E[3]||(E[3]=p("div",{class:"flex-grow-0 flex-shrink-0 w-10 h-0.5 rounded bg-[#e2f0fd]/[0.08]"},null,-1)),p("div",eo,[p("div",to,[p("p",ro,k(m.$t("Select one or more folders")),1)]),p("div",no,[p("div",oo,[p("div",ao,[p("button",{id:"save",class:"group/button flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 h-11 relative overflow-hidden gap-2 pl-3 pr-2.5 py-2.5 rounded-[10px] font-semibold transition-colors bg-surface-10/5 hover:bg-surface-12/5 active:bg-surface-12/5 text-surface-12/12 hover:text-surface-12",type:"button",onClick:_},[p("span",null,k(m.$t("Add folder")),1),T(pe,{"class-name":"w-6 h-6 flex-grow-0 flex-shrink-0 ml-auto",icon:"folderAdd"})])]),n.value?.folder_library?(D(!0),j(Ne,{key:0},st(n.value?.folder_library,C=>(D(),L(jn,{key:C.folder_id,modelValue:n.value,"onUpdate:modelValue":E[1]||(E[1]=R=>n.value=R),folder:C},null,8,["modelValue","folder"]))),128)):ze("",!0),p("div",io,[T(pe,{"class-name":"w-4 h-4 flex-grow-0 flex-shrink-0",icon:"infoCircle"}),p("p",lo,k(m.$t("You can always add folder and change encoding profiles later")),1)])])])])])]),_:1},8,["close","open"]),T(Xn,{close:h,folder:u.value,library:n.value,open:f.value,"set-folder":c},null,8,["folder","library","open"])],64)}}}),co=uo;H();var fo={class:"my-6 text-sm text-surface-10"},ho=U({__name:"DeleteLibraryModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},name:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},setup(r){const e=r,n=ve(),t=De();function o(){J().delete(`dashboard/libraries/${e.id}`).then(({data:a})=>{t.add({severity:a.status==="ok"?"success":"error",summary:S(a.status==="ok"?"Success":"Error"),detail:S(a.message,...a.args??[]),life:5e3}),n.invalidateQueries({queryKey:["dashboard","libraries"]})}),e.close()}return(a,i)=>(D(),L(pt,{close:r.close,open:r.open,params:{library:e.name},"max-width":"max-w-xl",title:"Delete library {{library}}"},{actions:$(()=>[T(Ee,{id:"yes",onclick:o,color:"red","end-icon":"trash",type:"button",variant:"contained"},{default:$(()=>[V(k(a.$t("Delete")),1)]),_:1}),T(Ee,{id:"no",onclick:r.close,color:"auto",type:"button",variant:"text"},{default:$(()=>[V(k(a.$t("Cancel")),1)]),_:1},8,["onclick"])]),default:$(()=>[p("div",fo,k(a.$t("Are you sure you want to delete this library?")),1)]),_:1},8,["close","open","params"]))}}),po=ho;H();var mo={class:"flex h-min children:cursor-default flex-col items-center rounded-lg w-inherit odd:bg-surface-12/5 even:bg-surface-12/2 dark:odd:bg-surface-12/5 dark:even:bg-surface-12/2 text-surface-12/80"},vo={class:"flex items-center gap-2 overflow-x-hidden py-2 pr-2 w-inherit overflow-y-show"},go={class:"ml-2 h-auto w-8 p-2 handle"},yo={class:"w-full line-clamp-1"},bo=U({__name:"LibraryItem",props:{modelValue:{type:Object,required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(r){const e=Ot(r,"modelValue"),n=q(!1);function t(){n.value=!0}function o(){n.value=!1}const a=q(!1);function i(){a.value=!0}function s(){a.value=!1}const l=Se(()=>{let u;switch(e.value.type){case"music":u="noteDouble";break;case"tv":u="tv";break;case"image":u="camera";break;case"movie":u="film";break;default:u="nomercy"}return u});return(u,c)=>(D(),j("div",mo,[p("div",vo,[p("button",go,[T(pe,{class:"h-6 w-6",icon:"menuDotsVertical"})]),T(pe,{icon:l.value,class:"h-6 w-6"},null,8,["icon"]),p("span",yo,k(e.value?.title),1),p("button",{class:"ml-auto flex justify-center items-center h-10 px-2.5 py-2 gap-2 rounded-lg text-sm select-none w-auto font-semibold leading-[100%] transition-all duration-150 button-text hover:outline-slate-11 dark:hover:outline-slate-11 outline-1 outline outline-transparent",type:"button",onClick:i},[T(pe,{class:"h-6 w-6",icon:"folderEdit"})]),p("button",{class:"ml-auto flex justify-center items-center h-10 px-2.5 py-2 gap-2 rounded-lg text-sm select-none w-auto font-semibold leading-[100%] transition-all duration-150 button-text hover:outline-slate-11 dark:hover:outline-slate-11 outline-1 outline outline-transparent",type:"button",onClick:t},[T(pe,{class:"h-6 w-6",icon:"folderRemove"})])]),e.value?(D(),L(co,{key:0,id:e.value?.id,modelValue:e.value,"onUpdate:modelValue":c[0]||(c[0]=f=>e.value=f),close:s,open:a.value},null,8,["id","modelValue","open"])):ze("",!0),e.value?(D(),L(po,{key:1,id:e.value?.id,close:o,name:e.value.title,open:n.value},null,8,["id","name","open"])):ze("",!0)]))}}),_o=Ir(bo,[["__scopeId","data-v-a50b62c6"]]);H();var wo={class:"flex flex-col overflow-hidden text-start h-available"},xo={class:"mb-2 text-xl font-semibold"},Eo={class:"mb-4 text-sm"},So={key:0,class:"grid w-available h-available place-items-center overflow-hidden"},Do={class:"mt-4 flex w-full justify-start"},To=U({__name:"Libraries",props:{setNextButtonLocked:{type:Function,required:!0}},setup(r){const e=r,n=ve(),{data:t,isLoading:o}=It({path:"dashboard/libraries",queryKey:["dashboard","libraries"]}),a=q(null),i=q(t.value??[]);ne(t,u=>{console.log("Libraries updated:",u),u&&(i.value=u,e.setNextButtonLocked(u?.length===0))});function s(){J().post("dashboard/libraries").then(()=>{n.invalidateQueries({queryKey:["dashboard","libraries"]})})}function l(){J().patch("dashboard/libraries/sort",{libraries:i.value.map((u,c)=>({id:u.id,order:c}))}).then(()=>{n.invalidateQueries({queryKey:["dashboard","libraries"]})})}return ne(i,()=>{l()}),wn(a,i,{animation:150,handle:".handle"}),(u,c)=>(D(),j("div",wo,[p("h2",xo,k(u.$t("Organize your media library")),1),p("p",Eo,k(u.$t("Add your media libraries to organize your content.")),1),Ge(o)?(D(),j("div",So,[T(Ge(Er),{class:"ion-padding",name:"crescent"})])):(D(),j("div",{key:1,ref_key:"el",ref:a,class:"flex h-auto w-full flex-col overflow-y-auto text-start gap-1"},[(D(!0),j(Ne,null,st(i.value,(f,_)=>(D(),L(_o,{key:f.id,modelValue:i.value[_],"onUpdate:modelValue":h=>i.value[_]=h},null,8,["modelValue","onUpdate:modelValue"]))),128))],512)),p("div",Do,[T(Ee,{id:"yes",color:"theme",type:"button",variant:"contained",onClick:s},{default:$(()=>[V(k(u.$t("Add media library")),1)]),_:1})])]))}}),ko=To;H();var Co=U({__name:"Finish",props:{setNextButtonLocked:{type:Function,required:!0}},setup(r){const{t:e}=Nr();return ve(),(n,t)=>null}}),Oo=Co;H();var Io={class:"flex flex-col gap-2 h-available"},No={class:"flex flex-col gap-2"},$o={class:"mt-auto flex flex-col"},Ao={class:"mb-4 text-sm"},Fo={class:"text-theme-10 hover:underline",href:"https://nomercy.tv/privacy-policy",target:"_blank"},Mo={class:"text-theme-10 hover:underline",href:"https://nomercy.tv/terms-of-service",target:"_blank"},Po=U({__name:"Base",props:{setNextButtonLocked:{type:Function,required:!0}},setup(r){const e=r,n=ve(),t=De(),{data:o}=It({path:"dashboard/server/info",queryKey:["serverinfo"]}),a=q(o.value?.server??""),i=Gt(a,500);ne(o,l=>{l&&(a.value=l.server)});function s(){J().patch("dashboard/server/info",{name:i.value}).then(({data:l})=>{t.add({severity:"success",summary:S("Success"),detail:S(l.message,...l.args??[]),life:5e3}),n.invalidateQueries({queryKey:["servers"]})})}return ne(i,(l,u)=>{!l||l===u||u===""||s()}),ne(a,l=>{e.setNextButtonLocked(!l)}),(l,u)=>{const c=Ke("InputText");return D(),j("div",Io,[p("div",No,[u[1]||(u[1]=p("label",{for:"serverName"},"Server name",-1)),T(c,{id:"serverName",modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=f=>a.value=f),class:"w-1/3",name:"Give your server a friendly name to help identify it."},null,8,["modelValue"])]),p("div",$o,[p("p",Ao,[V(k(l.$t("By using this NoMercy app, a NoMercy MediaServer, or any of our services, you agree to the"))+" ",1),p("a",Fo,k(l.$t("Privacy Policy")),1),V(" "+k(l.$t("and"))+" ",1),p("a",Mo,k(l.$t("Terms of Service")),1),u[2]||(u[2]=V(". ",-1))])])])}}}),Bo=Po;H();var qo=U({__name:"Desktop",setup(r){const e=De(),n=q(["Base info","Media libraries","Finish"]),t=q("Base info"),o=q(!1);async function a(){console.log("Finish"),await J().post("/dashboard/libraries/refresh").then(()=>{e.add({severity:"success",summary:S("Success"),detail:"Your media libraries are being scanned in the background.",life:16e3})}).catch(l=>{e.add({severity:"error",summary:"Error refreshing libraries",detail:l.message,life:16e3})}),await J().get("libraries").then(({data:l})=>{wr(l.data),kr.value=!0,pr.value=!0,qt.replace("/")}).catch(()=>{qt.replace({name:"Server offline"})})}function i(l){t.value=l}function s(l){o.value=l}return Cr(()=>{e.add({severity:"info",summary:S("Info"),detail:S("This is an informational message."),life:5e5}),e.add({severity:"success",summary:S("Success"),detail:S("This is a success message."),life:5e5}),e.add({severity:"warn",summary:S("Warning"),detail:S("This is a warning message."),life:5e5}),e.add({severity:"error",summary:S("Error"),detail:S("This is an error message."),life:5e5}),e.add({severity:"secondary",summary:S("Secondary"),detail:S("This is an secondary message."),life:5e5}),e.add({severity:"contrast",summary:S("Contrast"),detail:S("This is an contrast message."),life:5e5}),e.add({severity:"info",detail:S("This is an informational message."),life:5e5}),e.add({severity:"success",detail:S("This is a success message."),life:5e5}),e.add({severity:"warn",detail:S("This is a warning message."),life:5e5}),e.add({severity:"error",detail:S("This is an error message."),life:5e5}),e.add({severity:"secondary",detail:S("This is an secondary message."),life:5e5}),e.add({severity:"contrast",detail:S("This is an contrast message."),life:5e5})}),(l,u)=>(D(),L(Ge(Dr),null,{default:$(()=>[T(Ge(Tr),{fullscreen:!0},{default:$(()=>[T(zr,{"current-step":t.value,finish:a,"next-button-locked":o.value,"set-current-step":i,steps:n.value},{default:$(()=>[t.value==="Base info"?(D(),L(Bo,{key:0,"set-next-button-locked":s})):t.value==="Media libraries"?(D(),L(ko,{key:1,"set-next-button-locked":s})):t.value==="Finish"?(D(),L(Oo,{key:2,"set-next-button-locked":s})):ze("",!0)]),_:1},8,["current-step","next-button-locked","steps"])]),_:1})]),_:1}))}}),ea=qo;export{ea as default};
