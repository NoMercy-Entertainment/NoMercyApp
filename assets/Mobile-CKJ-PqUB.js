import{Bt as q,Gt as g,I,Ln as r,M as A,Mt as R,Rn as T,Rt as s,T as V,Tt as $,Vt as L,an as N,cn as n,i as P,kn as p,mt as j,qt as E,u as O,un as G,xn as S,yn as _,zt as x}from"./index-C8wrpkyN.js";import"./dist-DT2yuChF.js";import"./esm-DnlYWABm.js";import"./esm-CdHIRdo_.js";import"./dist-DtOedwIT.js";import"./focus-visible-C1DWu8Oz.js";import"./index5-C9RIJ-sZ.js";import"./client-DAXuPTec.js";import"./ionic-global-QXgPMqNd.js";import"./hardware-back-button-9ZINzT5a.js";import"./index3-BubtwhWu.js";import"./helpers-D5mJiZ9q.js";import"./index6-Cj1ScfU-.js";import"./index8-DaGgXvc2.js";import"./keyboard-COERgV0V.js";import"./index2-BuY1gQTr.js";import"./ios.transition-BUwO3_AE.js";import"./keyboard2-CSWHSxpI.js";import"./md.transition-Dd2SUgMb.js";import"./dir-CJiJYBc7.js";import"./basecomponent-CKGbzbTY.js";import"./classnames-C7QsyfAI.js";import"./button-BynHS9zl.js";import"./baseicon-BULsv_7E.js";import"./times-C8aYiEVK.js";import{l as W,m as c,o as y,p as d}from"./ui-BWVnjNNY.js";import"./client-BmAhQ-69.js";import{v as D,x as J}from"./currentServer-B_KQACAB.js";import"./config-BZ-AEJ_J.js";import"./core-BLZUGO-K.js";import"./esm-BiKSXF-U.js";import"./global-WVsx5src.js";import"./esm-B8xVkXPy.js";import"./bundle-mjs-DzMTChaT.js";import"./user-CXzDmTwG.js";import"./serverClient-K02oLPZR.js";import{t as K}from"./router-I2PvuKTp.js";import"./utils-CYCtUrjH.js";import"./useBaseQuery-B6wsCOmB.js";import"./useInfiniteServerClient-D5CFD8Z7.js";import"./SocketClient-CeGi9Yeo.js";import"./useQueryClient-mZLXzkAX.js";import"./useQuery-BBjfmHCe.js";import"./apiClient-CnOywAmP.js";import"./notifications-DAOHq0v-.js";import"./utils-T6SCnbWu.js";import"./deviceInfo-DQllL7m1.js";import"./auth-D3TfzZqc.js";import"./musicPlaylists-CeYpVUjG.js";import"./esm-7i_Wtgyh.js";import"./contextMenuItems-BAxEuer3.js";import"./_plugin-vue_export-helper-pDp7unP0.js";import"./AppLogoSquare-B9MCCmvc.js";import{t as Q}from"./MoooomIcon-un4l75-N.js";import"./DropdownMenu-CZfoN-P5.js";import"./dist-Dd_BbWhG.js";import"./fileupload-BFNv7rr5.js";import{t as U}from"./useServerClient-Bvu1z2Rs.js";import"./Button-C7060WzV.js";import"./CoverImage-CcRvdF9S.js";import"./MusicButton-yLkQD0Gb.js";import"./BannerButton-B2nPYdxM.js";import"./MediaLikeButton-DVyfvAKN.js";import"./PlayerIcon-B_LEyqNM.js";import{t as X}from"./Marquee-WbcysVQu.js";import"./Modal-SWnpBpsA.js";import"./BigPlayButton-l6keFQVr.js";import"./EqSpinner-DO4w_JXh.js";import{t as Y}from"./NotFound-C0w2vGjZ.js";import"./ShareButton-CcLOsF80.js";import"./ClickUploadModal-Bofg3J3p.js";import{i as Z,n as tt,r as et,t as rt}from"./TrackRow-pTkGj6kt.js";$();A();var ot={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},at={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},lt=E({__name:"Mobile",setup(it){const k=I(),{data:t,isError:B}=U({path:k.fullPath}),z=p(null),b=p(),i=p("");_(t,e=>{D(e?.name??null),u(e?.tracks??[],c.value,d.value,i.value),y(e?.color_palette?.cover)}),_(d,e=>{u(t.value?.tracks??[],c.value,e,i.value)}),_(c,e=>{u(t.value?.tracks??[],e,d.value,i.value)}),_(i,e=>{u(t.value?.tracks??[],c.value,d.value,e)});function u(e,a,l,o){const C=J(e??[],a,l,W);o===""?b.value=C:b.value=C?.filter(w=>w.name?.toLowerCase().includes(o?.toLowerCase?.())||w.artist_track?.some(F=>F.name.toLowerCase().includes(o?.toLowerCase?.()))||w.album_track?.[0]?.name.toLowerCase().includes(o?.toLowerCase?.()))??[]}N(()=>{u(t?.value?.tracks??[],c.value,d.value,i.value),t.value?.color_palette?.cover&&y(t.value?.color_palette?.cover)}),V(()=>{u(t?.value?.tracks??[],c.value,d.value,i.value),t.value?.color_palette?.cover&&y(t.value?.color_palette?.cover)});function H(){K.back()}const f=p(!1),M=p(!1),m=p(),h=p();function v(){const l=j("capacitor")?88:64,o=m.value?.$el?.getBoundingClientRect().top;if(!o){requestAnimationFrame(v);return}if(f.value=o<=170,M.value=o<=160,window.CSS.supports("container-type","scroll-state")){requestAnimationFrame(v);return}o===l?(m.value?.$el?.classList.add("!bg-focus"),m.value?.$el?.firstChild?.classList.add("!bg-surface-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")):(m.value?.$el?.classList.remove("!bg-focus"),m.value?.$el?.firstChild?.classList.remove("!bg-surface-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")),requestAnimationFrame(v)}return _(h,()=>{requestAnimationFrame(v)}),(e,a)=>(n(),x(r(O),null,{default:S(()=>[g(r(P),{ref_key:"container",ref:h,"scroll-events":!0,onIonScroll:v},{default:S(()=>[r(B)&&!r(t)?(n(),x(Y,{key:0})):!r(k).params.id||r(k).params.id&&r(t)?.id===r(k).params.id?(n(),L("div",{key:1,ref_key:"main",ref:z,class:"flex flex-col h-auto overflow-x-clip w-available sm:rounded-2xl -mt-6 text-surface-12"},[g(et,{data:r(t)},null,8,["data"]),s("div",ot,[a[2]||(a[2]=s("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),s("div",{id:"navbar",class:T([{"opacity-0 pointer-events-none":!f.value,"opacity-100 pointer-events-auto":f.value},"fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-surface-11 dark:bg-surface-1 top-0 pt-4 transition-all duration-200"])},[a[1]||(a[1]=s("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-all duration-200 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),s("button",{class:"z-30 flex h-10 w-11 items-center justify-center rounded-md",onClick:H},[g(Q,{icon:"arrowLeft"})]),s("div",{id:"navText",class:T([{"opacity-0 pointer-events-none":!f.value,"opacity-100 pointer-events-auto":f.value},"pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-all duration-200 w-[70%] overflow-clip text-xl"])},[g(X,{text:r(t)?.name},null,8,["text"])],2)],2),(n(),x(Z,{key:r(t)?.id,data:r(t),filter:i.value,onFilterChange:a[0]||(a[0]=l=>i.value=l)},null,8,["data","filter"])),s("div",at,[(n(),x(tt,{key:r(t)?.id,ref_key:"sortHeader",ref:m})),(n(!0),L(R,null,G(b.value,(l,o)=>(n(),x(rt,{key:l.id+l?.favorite,data:l,"display-list":b.value,index:o},null,8,["data","display-list","index"]))),128))])])],512)):q("",!0)]),_:1},512)]),_:1}))}}),Te=lt;export{Te as default};
