import"./useBaseQuery-dQ9bk6bN.js";import"./useInfiniteServerClient-C_qQjXxt.js";import"./useQueryClient-E_0_uywC.js";import"./useQuery-CAOy4GtT.js";import{Ac as A,Bs as E,Ci as H,Co as K,Do as b,Ec as R,Gc as e,Gs as n,H as m,J as U,Js as c,Ks as k,Lo as G,Mc as J,Mt as h,Nc as v,Ns as W,Oc as r,Qs as l,Rc as g,Rs as C,St as I,Uo as O,Wo as Q,Ws as X,X as _,Y as S,_c as Y,bo as Z,cr as T,ec as ee,fc as te,go as q,hc as u,ho as ae,ka as M,mo as d,nr as $,qr as le,qs as y,ta as oe,ut as se,xo as re,yc as ie,yo as ne,zs as P}from"./index-C2NorOFh.js";import"./basecomponent-ByGG5niv.js";import"./classnames-ai0DVBar.js";import"./button-YxeIOoWX.js";import"./baseicon-BAjlXfXv.js";import{t as ue}from"./_plugin-vue_export-helper-CEc1WwrB.js";import"./AppLogoSquare-BwdQSUMi.js";import"./MoooomIcon-Oo_Hdgji.js";import"./dist-ZILVzFl-.js";import{t as ce}from"./useServerClient-CiaRNOjP.js";import{t as z}from"./CoverImage-DspMar8h.js";import{t as de}from"./MusicButton-LchQiOeJ.js";import{t as B}from"./MediaLikeButton-Y-di0k1H.js";import"./PlayerIcon-ORWjUqL6.js";import{t as fe}from"./TrackLinks-CcTWY2eC.js";import{t as pe}from"./Marquee-Dy0sL7xI.js";import{t as me}from"./EqSpinner-vD3Nhdu8.js";import{t as ve}from"./BigPlayButton-BPHHUezP.js";W();O();var _e={class:"w-available h-available absolute left-[202px] top-0 overflow-hidden bg-focus"},be=["src"],ye={class:"flex justify-center w-available aspect-square my-8 ml-8 mr-16"},we={key:0,class:"relative mb-8 flex w-full flex-1 flex-shrink-0 flex-col items-start justify-start gap-4 flex-grow-1 text-left"},xe=["innerHTML"],ke={key:1,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap"},he={class:"flex items-center h-8 gap-2 self-stretch w-full text-xs font-medium text-left"},ge={key:0,class:"flex gap-2"},Ce={key:1,class:"flex gap-2"},Ie={class:"flex gap-2 items-center justify-between w-full"},Se=["data-id","data-index","onClick"],Te={class:"flex w-available overflow-clip items-end"},qe=ee({__name:"Tv",setup(Me){const L=Q(),{data:a}=ce({path:L.fullPath});te(()=>{a.value?.color_palette?.cover&&T(a.value?.color_palette?.cover),setTimeout(()=>{const o=document.querySelector(".focusable");o&&o.focus()},100)}),R(a,o=>{o?.color_palette?.cover&&T(o?.color_palette?.cover),setTimeout(()=>{const t=document.querySelector(".focusable");t&&t.focus()},100)});const w=g(),F=g();G(()=>{setTimeout(()=>{const o=document.querySelector(".focusable");o&&o.focus()},100)});function j(o){const t=o.target,i=w.value?.getAttribute("data-index")??0,s=t.querySelector(`[data-index="${i}"] .focusable`);s&&s.focus()}function D(o){const t=o.target;w.value=t,t&&t.scrollIntoView({behavior:"smooth",block:"center"});const i=t.closest("[data-id]")?.getAttribute("data-id"),s=t.querySelector(`[data-index="${i}"] .focusable`);s&&s.focus()}function V(o){const t=o.target;if(o.key==="ArrowUp"){const i=(t.closest("ion-item")?.previousSibling).querySelector(".focusable");i&&(i.focus(),i.scrollIntoView({behavior:"smooth",block:"center"}))}else if(o.key==="ArrowDown"){const i=(t.closest("ion-item")?.nextSibling).querySelector(".focusable");i&&(i.focus(),i.scrollIntoView({behavior:"smooth",block:"center"}))}}const f=X(()=>`${a.value?.type?.replace(/s$/u,"")}/${a.value?.id}`);function N(o){if(a.value?.tracks){if(!oe.value.features?.nomercyConnect){if(S.value===f.value){m.togglePlayback();return}m.playTrack(o,a.value?.tracks),I(f.value);return}if(U.value||h.value?.invoke("ChangeDeviceCommand",M.value).then(()=>{console.log("Switched to device:",M.value)}).catch(t=>{console.error("Error switching device:",t)}),h.value?.invoke("StartPlaybackCommand",a.value?.type.replace(/s$/u,""),a.value?.id,_.value?.id??o?.id),S.value===f.value){m.togglePlayback();return}m.playTrack(o,a.value?.tracks),I(f.value)}}return(o,t)=>{const i=ie("MoooomIcon");return u(),k(e(K),null,{default:r(()=>[l(e(ae),{fullscreen:!0},{default:r(()=>[(u(),c("div",{key:e(a)?.id,style:J(e($)?`--color-theme-8: ${e($)}`:""),class:"w-full h-full absolute left-0 top-0 bg-[#131314] pointer-events-none -z-10"},[n("div",_e,[n("img",{src:`${e(H)?.serverBaseUrl}${e(a)?.backdrop??e(a)?.cover}`,alt:"",class:"w-available h-available absolute left-[-0.39px] top-[-0.39px] opacity-40 object-cover object-center"},null,8,be),t[5]||(t[5]=n("div",{class:"w-[150vw] h-[150vw] absolute left-[-30%] bottom-[-50%]",style:{background:`radial-gradient(
                closest-side,
                rgba(19, 19, 20, 0.1) 0%,
                rgba(19, 19, 20, 1) 70.73974609375%
              )`}},null,-1))])],4)),l(e(q),null,{default:r(()=>[l(e(b),{class:"ion-align-items-end"},{default:r(()=>[l(e(d),{size:"3"},{default:r(()=>[n("div",ye,[l(z,{alt:e(a)?.name,data:e(a),class:"w-auto h-full aspect-square"},null,8,["alt","data"])]),e(a)?.name?(u(),c("div",we,[e(a).name.length>50?(u(),c("div",{key:0,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap",innerHTML:e(le)(e(a)?.name??"Songs you like","text-xs line-clamp-1")},null,8,xe)):(u(),c("p",ke,v(e(a)?.name),1)),n("div",he,[e(a)?.type?(u(),c("span",ge,[n("span",null,v(e(a)?.type.replace(/s$/u,"").toTitleCase()),1)])):y("",!0),e(a)?.tracks?(u(),c("span",Ce,[t[6]||(t[6]=n("span",null,"â€¢",-1)),n("span",null,v(e(a)?.tracks.length)+" "+v(o.$t("tracks")),1)])):y("",!0)]),n("div",Ie,[l(B,{data:e(a)},null,8,["data"]),l(ve,{data:e(a),class:"w-12 h-12 ml-auto"},null,8,["data"])])])):y("",!0)]),_:1}),l(e(d),{ref_key:"scrollContainer",ref:F,class:"w-full h-available overflow-auto scroll-smooth",size:"6",tabindex:"0",onFocus:t[4]||(t[4]=s=>j(s))},{default:r(()=>[l(e(re),{lines:"none",mode:"md"},{default:r(()=>[(u(!0),c(E,null,Y(e(a)?.tracks,(s,x)=>(u(),k(e(ne),{key:s.id+s?.favorite,class:"group/track focus-within:bg-white/4 rounded-md overflow-clip",mode:"md",tabindex:"-1"},{default:r(()=>[l(e(q),null,{default:r(()=>[l(e(b),{"data-id":s.id,"data-index":x,class:"items-center !rounded-md !overflow-clip",tabindex:"-1"},{default:r(()=>[l(e(d),{size:"2",tabindex:"-1"},{default:r(()=>[n("button",{"data-id":s.id,"data-index":x,class:"focusable flex justify-center w-full aspect-video focus:outline outline-focus outline-2 outline-offset-2 mr-2 overflow-clip",tabindex:"0",onClick:p=>N(s),onFocus:t[0]||(t[0]=p=>D(p))},[l(z,{alt:s.name,data:s,class:"w-auto h-full aspect-square"},null,8,["alt","data"])],40,Se)]),_:2},1024),l(e(d),{class:"my-auto mt-2",size:"8",tabindex:"-1"},{default:r(()=>[l(e(Z),{tabindex:"-1"},{default:r(()=>[n("div",Te,[n("div",{class:A([{"w-0":e(_)?.id!==s.id,"w-6 mr-1":e(_)?.id===s.id},"flex items-center justify-center h-full aspect-square overflow-clip transition-width duration-200"])},[l(me,{playing:e(se)},null,8,["playing"])],2),l(pe,{playing:!!e(_)?.id,text:s.name,class:"!w-[calc(100%-30px)] children:leading-none w-available overflow-clip"},null,8,["playing","text"])]),l(fe,{id:s.id,data:s.artist_track,suffix:"track",type:"artists",onKeyup:t[1]||(t[1]=p=>V(p)),onKeydown:[t[2]||(t[2]=C(P(()=>{},["prevent"]),["up"])),t[3]||(t[3]=C(P(()=>{},["prevent"]),["down"]))]},null,8,["id","data"])]),_:2},1024)]),_:2},1024),l(e(d),{class:"opacity-0 group-focus-within/track:opacity-100 -ml-2",size:"2",tabindex:"-1"},{default:r(()=>[l(e(b),{class:"flex flex-nowrap",tabindex:"-1"},{default:r(()=>[l(B,{data:s},null,8,["data"]),l(de,{onclick:()=>{},class:"!bg-transparent mr-2",label:"",tabindex:"0"},{default:r(()=>[l(i,{class:"text-white",icon:"menuDotsHorizontal"})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1032,["data-id","data-index"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})}}}),Ye=ue(qe,[["__scopeId","data-v-d82a9d55"]]);export{Ye as default};
