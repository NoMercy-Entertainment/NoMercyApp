import"./useBaseQuery-BpQmVyGr.js";import"./useInfiniteServerClient-CmF5E4L1.js";import"./useQueryClient-uPahzja3.js";import"./useQuery-Djpo7kUO.js";import{Bs as V,Ci as $,Co as j,Do as v,Ec as D,Gc as p,Gs as n,H,Hc as A,Js as c,Ks as y,Lo as E,Ns as K,Oc as r,Pc as h,Qs as a,Rs as k,St as N,Uo as U,Vc as e,Wc as G,Wo as R,X as m,_c as W,bo as J,cr as g,ec as O,fc as Q,go as C,gt as X,hc as u,ho as Y,mo as d,nr as I,qr as Z,qs as _,ut as ee,xo as te,yc as ae,yo as le,zs as S}from"./index-BK3EmIoe.js";import"./basecomponent-Bo9nAowL.js";import"./classnames-ai0DVBar.js";import"./button-Bt5Yw7G5.js";import"./baseicon-sbDb7bYQ.js";import{t as oe}from"./_plugin-vue_export-helper-CEc1WwrB.js";import"./AppLogoSquare-34otkQeb.js";import"./MoooomIcon-QVLMyfGN.js";import"./dist-BnNK8Inf.js";import{t as se}from"./useServerClient-tUZ9DQel.js";import{t as T}from"./CoverImage-BeXRjOt-.js";import{t as re}from"./MusicButton-BEZxdP9Z.js";import{t as q}from"./MediaLikeButton-SCmMIV2d.js";import"./PlayerIcon-DSvk32z9.js";import{t as ie}from"./TrackLinks-DEWtPn5Q.js";import{t as ne}from"./Marquee-C_47YWOB.js";import{t as ue}from"./EqSpinner-DE1jK3-n.js";import{t as ce}from"./BigPlayButton-Bv2FMup4.js";K();U();var de={class:"w-available h-available absolute left-[202px] top-0 overflow-hidden bg-focus"},fe=["src"],pe={class:"flex justify-center w-available aspect-square my-8 ml-8 mr-16"},me={key:0,class:"relative mb-8 flex w-full flex-1 flex-shrink-0 flex-col items-start justify-start gap-4 flex-grow-1 text-left"},ve=["innerHTML"],_e={key:1,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap"},be={class:"flex items-center h-8 gap-2 self-stretch w-full text-xs font-medium text-left"},xe={key:0,class:"flex gap-2"},we={key:1,class:"flex gap-2"},ye={class:"flex gap-2 items-center justify-between w-full"},he=["data-id","data-index","onClick"],ke={class:"flex w-available overflow-clip items-end"},ge=O({__name:"Tv",setup(Ce){const b=R(),{data:l}=se({path:b.fullPath,keepForever:!0});Q(()=>{l.value?.color_palette?.cover&&g(l.value?.color_palette?.cover),setTimeout(()=>{const o=document.querySelector(".focusable");o&&o.focus()},100)}),D(l,o=>{o?.color_palette?.cover&&g(o?.color_palette?.cover),setTimeout(()=>{const t=document.querySelector(".focusable");t&&t.focus()},100)});const x=h(),L=h();E(()=>{setTimeout(()=>{const o=document.querySelector(".focusable");o&&o.focus()},100)});function z(o){const t=o.target,i=x.value?.getAttribute("data-index")??0,s=t.querySelector(`[data-index="${i}"] .focusable`);s&&s.focus()}function B(o){const t=o.target;x.value=t,t&&t.scrollIntoView({behavior:"smooth",block:"center"});const i=t.closest("[data-id]")?.getAttribute("data-id"),s=t.querySelector(`[data-index="${i}"] .focusable`);s&&s.focus()}function F(o){const t=o.target;if(o.key==="ArrowUp"){const i=(t.closest("ion-item")?.previousSibling).querySelector(".focusable");i&&(i.focus(),i.scrollIntoView({behavior:"smooth",block:"center"}))}else if(o.key==="ArrowDown"){const i=(t.closest("ion-item")?.nextSibling).querySelector(".focusable");i&&(i.focus(),i.scrollIntoView({behavior:"smooth",block:"center"}))}}function P(){N(b.fullPath)}function M(o){m.value||P(),H.playTrack(o,l.value?.tracks??[]),X()}return(o,t)=>{const i=ae("MoooomIcon");return u(),y(e(j),null,{default:r(()=>[a(e(Y),{fullscreen:!0},{default:r(()=>[(u(),c("div",{key:e(l)?.id,style:G(e(I)?`--color-theme-8: ${e(I)}`:""),class:"w-full h-full absolute left-0 top-0 bg-[#131314] pointer-events-none -z-10"},[n("div",de,[n("img",{src:`${e($)?.serverBaseUrl}${e(l)?.backdrop??e(l)?.cover}`,alt:"",class:"w-available h-available absolute left-[-0.39px] top-[-0.39px] opacity-40 object-cover object-center"},null,8,fe),t[5]||(t[5]=n("div",{class:"w-[150vw] h-[150vw] absolute left-[-30%] bottom-[-50%]",style:{background:`radial-gradient(
                closest-side,
                rgba(19, 19, 20, 0.1) 0%,
                rgba(19, 19, 20, 1) 70.73974609375%
              )`}},null,-1))])],4)),a(e(C),null,{default:r(()=>[a(e(v),{class:"ion-align-items-end"},{default:r(()=>[a(e(d),{size:"3"},{default:r(()=>[n("div",pe,[a(T,{alt:e(l)?.name,data:e(l),class:"w-auto h-full aspect-square"},null,8,["alt","data"])]),e(l)?.name?(u(),c("div",me,[e(l).name.length>50?(u(),c("div",{key:0,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap",innerHTML:e(Z)(e(l)?.name??"Songs you like","text-xs line-clamp-1")},null,8,ve)):(u(),c("p",_e,p(e(l)?.name),1)),n("div",be,[e(l)?.type?(u(),c("span",xe,[n("span",null,p(e(l)?.type.replace(/s$/u,"").toTitleCase()),1)])):_("",!0),e(l)?.tracks?(u(),c("span",we,[t[6]||(t[6]=n("span",null,"â€¢",-1)),n("span",null,p(e(l)?.tracks.length)+" "+p(o.$t("tracks")),1)])):_("",!0)]),n("div",ye,[a(q,{data:e(l)},null,8,["data"]),a(ce,{data:e(l),class:"w-12 h-12 ml-auto"},null,8,["data"])])])):_("",!0)]),_:1}),a(e(d),{ref_key:"scrollContainer",ref:L,class:"w-full h-available overflow-auto scroll-smooth",size:"6",tabindex:"0",onFocus:t[4]||(t[4]=s=>z(s))},{default:r(()=>[a(e(te),{lines:"none",mode:"md"},{default:r(()=>[(u(!0),c(V,null,W(e(l)?.tracks,(s,w)=>(u(),y(e(le),{key:s.id,class:"group/track focus-within:bg-white/4 rounded-md overflow-clip",mode:"md",tabindex:"-1"},{default:r(()=>[a(e(C),null,{default:r(()=>[a(e(v),{"data-id":s.id,"data-index":w,class:"items-center !rounded-md !overflow-clip",tabindex:"-1"},{default:r(()=>[a(e(d),{size:"2",tabindex:"-1"},{default:r(()=>[n("button",{"data-id":s.id,"data-index":w,class:"focusable flex justify-center w-full aspect-video focus:outline outline-focus outline-2 outline-offset-2 mr-2 overflow-clip",tabindex:"0",onClick:f=>M(s),onFocus:t[0]||(t[0]=f=>B(f))},[a(T,{alt:s.name,data:s,class:"w-auto h-full aspect-square"},null,8,["alt","data"])],40,he)]),_:2},1024),a(e(d),{class:"my-auto mt-2",size:"8",tabindex:"-1"},{default:r(()=>[a(e(J),{tabindex:"-1"},{default:r(()=>[n("div",ke,[n("div",{class:A([{"w-0":e(m)?.id!==s.id,"w-6 mr-1":e(m)?.id===s.id},"flex items-center justify-center h-full aspect-square overflow-clip transition-width duration-200"])},[a(ue,{playing:e(ee)},null,8,["playing"])],2),a(ne,{playing:!!e(m)?.id,text:s.name,class:"!w-[calc(100%-30px)] children:leading-none w-available overflow-clip"},null,8,["playing","text"])]),a(ie,{id:s.id,data:s.artist_track,suffix:"track",type:"artists",onKeyup:t[1]||(t[1]=f=>F(f)),onKeydown:[t[2]||(t[2]=k(S(()=>{},["prevent"]),["up"])),t[3]||(t[3]=k(S(()=>{},["prevent"]),["down"]))]},null,8,["id","data"])]),_:2},1024)]),_:2},1024),a(e(d),{class:"opacity-0 group-focus-within/track:opacity-100 -ml-2",size:"2",tabindex:"-1"},{default:r(()=>[a(e(v),{class:"flex flex-nowrap",tabindex:"-1"},{default:r(()=>[a(q,{data:s},null,8,["data"]),a(re,{onclick:()=>{},class:"!bg-transparent mr-2",label:"",tabindex:"0"},{default:r(()=>[a(i,{class:"text-white",icon:"menuDotsHorizontal"})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1032,["data-id","data-index"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})}}}),We=oe(ge,[["__scopeId","data-v-ee9cf7a3"]]);export{We as default};
