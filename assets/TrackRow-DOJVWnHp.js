import{Bn as se,Bt as u,Gt as m,I as M,Ln as t,Lt as p,M as D,Mt as Z,Rn as y,Rt as a,Tt as L,Vn as h,Vt as g,Wt as J,an as le,cn as r,fn as X,kn as B,mt as w,qt as P,un as ie,xn as b,yn as W,zt as c}from"./index-cywnPOBC.js";import{B as ne,I as oe,S as ue,l as I,m as R,n as de,p as A,u as ce,x as me}from"./ui-C0FA7XgL.js";import{g as q}from"./client-TRoQZYEY.js";import{D as S,E as T,o as N}from"./currentServer-ns-65dJg.js";import{f as V}from"./global-oyc8MvKQ.js";import{s as fe}from"./user-DdN2xDWa.js";import{x as pe}from"./router-b6Y7vD7A.js";import{N as ve,Z as he,c as ge,g as z,k as O,l as _}from"./SocketClient-BXQHVNG_.js";import{a as ye}from"./contextMenuItems-CnT1Q0_S.js";import{t as ke}from"./_plugin-vue_export-helper-pDp7unP0.js";import{t as j}from"./MoooomIcon-DKjYVqpr.js";import{t as xe}from"./DropdownMenu-DahWlyk2.js";import{n as be}from"./dist-DxpR9Lgz.js";import{t as H}from"./CoverImage-5Kr6U9m2.js";import{t as we}from"./MusicButton-DNSqRPtJ.js";import{t as _e}from"./BannerButton-D551V_yc.js";import{t as Y}from"./MediaLikeButton-BxCAAXfp.js";import{t as G}from"./PlayerIcon-Box4yPCR.js";import{t as F}from"./Marquee-D5BdhaYU.js";import{n as Se,t as U}from"./BigPlayButton-BZO__rjN.js";import{n as K,t as Ce}from"./EqSpinner-C3RZ5e3G.js";import{t as Q}from"./ShareButton-D4ftU7kH.js";L();D();var Te={class:"flex sm:gap-4 items-center py-4 px-4 sm:px-8 w-full pl-3 pr-4 sm:pr-10 h-20 z-40","data-index":"1"},$e={class:"relative hidden h-fit cursor-pointer items-center justify-center focus-within:text-surface sm:flex mr-auto"},Re=["value"],Ee={class:"absolute top-2 right-2 bottom-2 flex items-center justify-center"},je=P({__name:"ControlHeader",props:{data:{type:Object,required:!1},filter:{type:String,required:!0}},emits:["filterChange"],setup(e){const l=e,i=M();function s(){_.setQueue(l.data?.tracks??[])}const n=p(()=>({title:l.data?.name??"",url:`https://app.nomercy.tv${i.fullPath}`}));return(d,v)=>(r(),g(Z,null,[v[1]||(v[1]=a("div",{class:"pointer-events-none absolute z-0 h-96 w-full"},null,-1)),a("div",Te,[e.data?.tracks?(r(),c(U,{key:0,data:e.data,class:"hidden sm:flex"},null,8,["data"])):u("",!0),a("div",$e,[a("input",{id:"search",value:e.filter,class:"bg-transparent border-surface-12/5 border-2 rounded-md focus-visible:!border-surface-12/9 focus-visible:text-white placeholder-current p-2",name:"search",placeholder:"Filter…",type:"text",onInput:v[0]||(v[0]=f=>d.$emit("filterChange",f.target?.value))},null,40,Re),a("div",Ee,[m(j,{class:"!w-7",icon:"searchMagnifyingGlass"})])]),m(Q,{"share-data":n.value,class:"!p-0 hidden sm:flex sm:ml-auto"},null,8,["share-data"]),m(Y,{data:e.data,"class-name":"!w-8 !h-8",color:"var(--color-theme-8)"},null,8,["data"]),m(Q,{class:"!p-0 sm:hidden"}),t(pe)?(r(),c(we,{key:1,id:"add",onclick:s,class:"",label:"Add"},{default:b(()=>[m(j,{class:"!w-7",icon:"add"})]),_:1})):u("",!0)]),a("div",{class:y([{"top-11":!t(w)("capacitor"),"top-10":t(w)("capacitor")},"sm:hidden sticky left-full -mt-16 z-1199 flex justify-center items-center gap-2 mr-4 h-auto"]),style:{"box-shadow":"0 1px 2px 0 rgba(16, 24, 40, 0.05)"}},[e.data?.tracks?(r(),c(U,{key:0,data:e.data},null,8,["data"])):u("",!0)],2)],64))}}),jt=je;L();var Le={key:2,class:"absolute grid inset-0 items-center bg-black/40 w-full flex items-center justify-center flex-col opacity-0 group-hover/cover:opacity-100 transition-all duration-100"},Pe={class:"p-4 font-semibold text-theme-8 text-lg"},Be={key:0,class:"relative my-4 flex w-full flex-1 flex-shrink-0 flex-col items-start justify-start gap-4 flex-grow-1 sm:hidden"},Ae=["innerHTML"],qe={class:"relative hidden flex-1 flex-shrink-0 flex-col items-start justify-start gap-1 flex-grow-1 sm:flex cursor-pointer"},ze={class:"text-left font-semibold uppercase"},He=["innerHTML"],Me={class:"relative flex items-center justify-start gap-2 text-sm"},De={class:"relative flex items-center justify-start gap-2"},We={key:0,class:"flex items-center gap-4 text-sm font-medium"},Ie={key:0,class:"relative aspect-square h-12 w-12 overflow-clip rounded-full min-w-12"},Ne={key:1,class:"text-left text-sm font-medium"},Ve={class:"text-left text-sm font-medium"},Oe={key:2,class:"text-left text-sm font-medium"},Ge={class:"text-left text-sm font-medium"},Fe=P({__name:"ArtistHeader",props:{data:{type:Object,required:!1}},setup(e){const l=e,{t:i}=be(),s=B("");B();const n=B();function d(o){if(o)return me(i,o?.tracks?.map(x=>ue(x.duration)).reduce((x,$)=>x+$,0)??0)}W(l,o=>{o&&(s.value=d(o.data))}),le(()=>{s.value=d(l.data)}),W(n,o=>{!o||!_._audioElement1?.motion||!_._audioElement2?.motion||(_._audioElement1?.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(o).backgroundColor]}),_._audioElement1.motion.gradient="theme",_._audioElement2?.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(o).backgroundColor]}),_._audioElement2.motion.gradient="theme")});const v=p(()=>ne(oe(de.value),150));function f(){const o=new CustomEvent("showModal",{detail:{modalName:"createPlaylist",modalTitle:"Edit {{name}} playlist",modalTitleArgs:{name:l.data?.name},modalProps:l.data}});document.dispatchEvent(o)}return(o,x)=>{const $=X("RouterLink");return r(),g("div",{id:"artist-header",class:y([{"pt-safe-offset-16 px-8 gap-4":t(w)("capacitor"),"pt-24 px-6 gap-2 sm:gap-12":!t(w)("capacitor"),"text-black/12":v.value,"text-white/12":!v.value},"relative z-0 flex flex-col items-end justify-start sm:flex-row sm:gap-9 sm:pt-8 sm:pb-8 sm:px-8"])},[a("div",{id:"audio-color",ref_key:"audioColor",ref:n,class:"absolute top-0 left-0 h-full w-full overflow-clip bg-focus",style:{background:"hsl(from var(--color-theme-8) h s 32%)"}},null,512),x[0]||(x[0]=a("div",{class:"absolute top-0 left-0 h-full w-full overflow-clip"},null,-1)),a("div",{class:y([{"-mt-4":t(w)("capacitor"),"":!t(w)("capacitor")},"frosting relative mx-auto group/cover flex aspect-square w-80 overflow-clip max-w-[90%] flex-col items-center justify-center rounded-xl bg-gradient-to-br min-w-64 bg-theme-6 from-theme-5 via-theme-6 to-theme-9 shadow cursor-pointer"]),onClick:f},[e.data?.cover?(r(),c(H,{key:0,id:"image",data:e.data,size:250,"class-name":"aspect-square rounded-xl w-full",loading:"eager"},null,8,["data"])):e.data?.id?(r(),c(Se,{key:1,id:e.data.id,type:e.data.type,class:"aspect-square rounded-xl w-full"},null,8,["id","type"])):u("",!0),e.data?.type!=="track"?(r(),g("div",Le,[a("span",Pe,h(o.$t("Change cover")),1)])):u("",!0)],2),e.data?.name?(r(),g("div",Be,[a("div",{class:"w-full text-2xl font-semibold whitespace-pre-line",innerHTML:t(N)(e.data?.name??"Songs you like","text-sm line-clamp-1")},null,8,Ae)])):u("",!0),a("div",qe,[a("p",ze,h(e.data?.type?.replace(/s$/u,"")),1),a("div",{class:"w-full text-5xl font-semibold line-clamp-2 leading-[130%] whitespace-pre",onClick:f,innerHTML:t(N)(e.data?.name??"Songs you like","text-2xl line-clamp-1")},null,8,He),a("div",Me,h(e.data?.description),1),a("div",De,[e.data?.artists?.length?(r(),g("div",We,[e.data?.artists?.[0].cover?(r(),g("div",Ie,[m(H,{id:"image",data:e.data?.artists?.[0],size:250,"class-name":"h-full w-full",loading:"eager"},null,8,["data"])])):u("",!0),m($,{to:e.data?.artists?.[0].link??"#",class:"text-sm empty:hidden"},{default:b(()=>[J(h(e.data?.artists?.[0]?.name??"Various artists"),1)]),_:1},8,["to"])])):u("",!0),e.data?.tracks&&e.data?.artists?.length?(r(),g("p",Ne," • ")):u("",!0),a("p",Ve,h(e.data?.tracks?.length)+" "+h(e.data?.tracks?.length===1?t(i)("track"):t(i)("tracks")),1),(s.value?.length??0)>0&&e.data?.tracks?.length?(r(),g("p",Oe," • ")):u("",!0),a("p",Ge,h(s.value),1)])])],2)}}}),Lt=Fe;L();var Ue=["onclick"],Ke={class:""},Qe=P({__name:"SortButton",props:{name:{type:String,required:!0},sortingType:{type:String,required:!0},iconSpacer:{type:String,default:""}},setup(e){function l(s){console.log("handleSortChange",s),R.value===s?I(A.value===T.asc?T.desc:T.asc):I(T.asc),ce(s)}function i(s){const n=s.target;if(s.key==="ArrowUp"){const d=n.parentElement?.parentElement?.previousElementSibling;d&&d.nodeName==="BUTTON"||d.nodeName==="A"?d.focus():document.querySelector("#playList")?.focus()}else s.key==="ArrowDown"?n.parentElement?.parentElement?.nextElementSibling?.focus():s.key==="ArrowLeft"?n.previousElementSibling?.focus():s.key==="ArrowRight"&&n.nextElementSibling?.focus()}return(s,n)=>(r(),g("button",{onclick:()=>l(e.sortingType),onkeyup:i,class:"relative cursor-pointer items-center focus-visible:underline focus-visible:underline-offset-2","no-ring":""},[a("span",Ke,h(s.$t(e.name)),1),t(A)===t(T).asc&&t(R)===e.sortingType&&t(R)!==t(S).index?(r(),c(j,{key:0,class:y(`w-6 h-6 ${e.iconSpacer}`),icon:"chevronUp"},null,8,["class"])):t(A)===t(T).desc&&t(R)===e.sortingType&&t(R)!==t(S).index?(r(),c(j,{key:1,class:y(`w-6 h-6 ${e.iconSpacer}`),icon:"chevronDown"},null,8,["class"])):u("",!0)],8,Ue))}}),E=Qe;L();D();var Ze=P({__name:"SortHeader",setup(e){const l=M(),i=p(()=>l.path.startsWith("/music/album")),s=p(()=>l.path.startsWith("/music/artist")),n=p(()=>l.path.startsWith("/music/playlists")),d=p(()=>l.path.startsWith("/music/tracks")),v=p(()=>l.path.startsWith("/music/genres"));return(f,o)=>(r(),g("div",{id:"sortHeaderElement",class:y([{"top-safe-offset-[4rem]":t(w)("capacitor"),"top-safe-offset-16":!t(w)("capacitor")},"sticky -mx-4 px-4 z-30 mt-4 block h-10 content-center items-center justify-start self-stretch bg-transparent text-sm font-medium transition-all duration-200 w-available group/track sm:w-available sm:-top-px"])},[o[0]||(o[0]=a("span",{id:"sorterChild",class:"absolute inset-0 h-10 sm:rounded-t-2xl overflow-clip w-full transition-all duration-200"},null,-1)),a("span",{class:y([{"album-grid":i.value||n.value||d.value||v.value,"artist-grid":s.value},"grid justify-start items-center self-stretch pr-3 sm:px-3 rounded-lg group/track text-sm font-medium py-2 z-0 group/track"])},[m(E,{id:"sortIndex","aria-label":f.$t("Sort by index"),"sorting-type":t(S).index,class:"!flex justify-center","icon-spacer":"absolute left-6",name:"#"},null,8,["aria-label","sorting-type"]),m(E,{"aria-label":f.$t("Sort by name"),"sorting-type":t(S).name,class:"flex sm:flex","icon-spacer":"w-6 h-6",name:"Title"},null,8,["aria-label","sorting-type"]),m(E,{"aria-label":f.$t("Sort by album"),class:y([{"opacity-0":i.value},"!hidden sm:!flex"]),"sorting-type":t(S).album,"icon-spacer":"w-6 h-6",name:"Album"},null,8,["aria-label","class","sorting-type"]),m(E,{"aria-label":f.$t("Sort by date"),"sorting-type":t(S).date,class:"!hidden sm:!flex","icon-spacer":"w-6 h-6",name:"Release date"},null,8,["aria-label","sorting-type"]),m(E,{"aria-label":f.$t("Sort by duration"),"sorting-type":t(S).duration,class:"!hidden sm:!flex gap-2 flex-row-reverse pr-[4.5rem]","icon-spacer":"w-6 h-6",name:"Duration"},null,8,["aria-label","sorting-type"])],2)],2))}}),Pt=ke(Ze,[["__scopeId","data-v-4977e8f6"]]);L();D();var Je=["data-track-id"],Xe={class:"flex justify-center text-center"},Ye={key:0,class:"group-focus-visible/track:sm:hidden group-hover/track:sm:hidden"},et={class:"flex h-12 items-center gap-2 overflow-hidden w-available sm:gap-4"},tt={class:"flex h-full flex-col justify-evenly overflow-clip w-inherit"},at={class:"flex h-6 flex-nowrap overflow-clip text-left line-clamp-1 w-inherit tracking-wide leading-6 px-2 py-1 -ml-2"},rt=["data-size"],st={class:"flex whitespace-nowrap"},lt={class:"hidden sm:flex invisible max-h-12 md:visible"},it={class:"hidden sm:flex mr-4 monospace sm:mr-0"},nt=P({__name:"TrackRow",props:{data:{type:Object,required:!0},index:{type:Number,required:!0},displayList:{type:Array,required:!0}},setup(e){const l=e,i=M(),s=p(()=>i.path.startsWith("/music/album")),n=p(()=>i.path.startsWith("/music/artist")),d=p(()=>i.path.startsWith("/music/playlists")),v=p(()=>i.path.startsWith("/music/tracks")),f=p(()=>i.path.startsWith("/music/genres")),o=p(()=>s.value?"album":n.value?"artist":d.value?"playlist":v.value?"favorite":f.value?"genre":"unknown"),x=p(()=>s.value?l.data?.album_track.at(0)?.id:n.value?l.data?.artist_track.at(0)?.id:d.value||v.value||f.value?i.params.id:"unknown");function $(){if(!fe.value.features?.nomercyConnect){ge.playTrack(l.data,l.displayList);return}he.value?.invoke("StartPlaybackCommand",o.value,x.value,l.data.id)}const ee=p(()=>!l.data?.date||!q?.language||q.language==="undefined"?null:new Date(l.data.date).toLocaleDateString(q?.language??"en-US",{year:"numeric",month:"long",day:"2-digit"}));return(te,C)=>{const ae=X("RouterLink");return r(),g("button",{class:y([{"album-grid":s.value||d.value||v.value||f.value,"artist-grid":n.value},"grid justify-start children:pointer-events-none items-center self-stretch pr-3 sm:px-3 rounded-lg sm:hover:bg-surface-6/8 group/track text-sm font-medium py-2 z-10"]),"data-track-id":e.data?.id,onclick:$,"data-target":"track",tabindex:"0",onContextmenu:C[1]||(C[1]=k=>t(ye)(k,te.$route,e.data))},[a("span",Xe,[t(z)?.id!==e.data.id?(r(),g("span",Ye,h(e.index+1),1)):u("",!0),t(z)?.id===e.data.id?(r(),c(Ce,{key:1,playing:t(O),class:"hidden group-focus-visible/track:sm:!hidden group-hover/track:sm:!hidden",color:"var(--color-theme-8)"},null,8,["playing"])):u("",!0),t(z)?.id===e.data.id&&t(O)?(r(),c(G,{key:2,class:"hidden h-6 w-6 group-focus-visible/track:sm:block group-hover/track:sm:block",icon:"nmPause"})):(r(),c(G,{key:3,class:"hidden h-6 w-6 group-focus-visible/track:sm:block group-hover/track:sm:block",icon:"nmPlay"}))]),a("span",et,[s.value?(r(),c(H,{key:0,data:e.data,size:100,style:se({display:s.value?"none":""}),"class-name":"relative hidden h-12 w-12 overflow-hidden min-w-[3rem] sm:block",loading:"eager"},null,8,["data","style"])):u("",!0),a("span",tt,[a("span",at,h(e.data.name),1),a("span",{"data-size":t(ve),class:"inline-flex h-6 w-available gap-1 overflow-hidden whitespace-nowrap text-slate-3 dark:slate-dark-3 line-clamp-1 text-2xs hover:animate-pause leading-6"},[m(F,null,{default:b(()=>[e.data&&s.value||d.value||v.value||f.value?(r(),c(K,{key:0,id:e.data.id,data:e.data.artist_track,onclick:k=>k.stopPropagation(),"data-target":"artist",type:"artists"},null,8,["id","data","onclick"])):u("",!0),e.data&&n.value?(r(),c(K,{key:1,id:e.data.id,data:e.data.album_track,onclick:k=>k.stopPropagation(),"data-target":"album",type:"albums"},null,8,["id","data","onclick"])):u("",!0)]),_:1})],8,rt)])]),(r(!0),g(Z,null,ie(e.data.album_track,k=>(r(),c(F,{key:k.id,class:"!hidden sm:!flex"},{default:b(()=>[a("button",{class:y([{"opacity-0":s.value,"opacity-100":n.value},"items-center overflow-clip pr-2 line-clamp-2 h-inherit w-inherit flex"]),onClick:C[0]||(C[0]=re=>re.stopPropagation())},[m(ae,{to:k?.link,class:"flex items-center gap-1 whitespace-nowrap font-semibold line-clamp-1 hover:underline focus:underline dark:font-medium pointer-events-auto","data-target":"album","no-ring":"",tabindex:"0"},{default:b(()=>[a("span",st,h(k.name),1)]),_:2},1032,["to"])],2)]),_:2},1024))),128)),a("span",lt,h(ee.value),1),a("span",{class:y([{"mr-16":!t(V)},"flex items-center justify-end gap-2 text-end"])},[(r(),c(Y,{key:e.data.id+e.data?.favorite,data:e.data,color:"var(--color-theme-8)","no-background":""},null,8,["data"])),a("span",it,h(e.data.duration),1),t(V)?(r(),c(xe,{key:0,direction:"down"},{button:b(()=>[m(_e,{class:"",title:""},{default:b(()=>[m(j,{"class-name":"relative h-5 w-5",icon:"menuDotsVertical"})]),_:1})]),default:b(()=>[C[2]||(C[2]=J(" Hellooo ",-1))]),_:1})):u("",!0)],2)],42,Je)}}}),Bt=nt;export{jt as i,Pt as n,Lt as r,Bt as t};
