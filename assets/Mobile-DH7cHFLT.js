import{aG as D,be as K,e3 as j,az as P,c9 as q,aP as S,aM as G,L as T,ax as O,aW as Q,cg as U,K as m,d0 as W,j as c,o,a7 as $,x as z,aI as t,bQ as A,a as _,c as u,bn as H,C as h,ct as g,bh as f,h as y,F as x,w as V,e4 as J,bO as X}from"./index-h9IS6Irn.js";import{_ as Y}from"./MediaCard.vue_vue_type_script_setup_true_lang-D_unCq5d.js";import{_ as Z}from"./PersonCard.vue_vue_type_script_setup_true_lang-DRtQPd3z.js";import{_ as ee,a as se}from"./EmptyCard.vue_vue_type_script_setup_true_lang-BHBD4-Y0.js";import"./CardIndicator.vue_vue_type_script_setup_true_lang-DX8uH0Bo.js";import"./NoResultImage.vue_vue_type_script_setup_true_lang-dfmoimxa.js";const te="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",ne="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",pe=D({__name:"Mobile",setup(oe){var M;const d=K(),{data:l,fetchNextPage:k,hasNextPage:w,isError:le}=j({queryKey:["libraries",(M=d.params.id??d.name)==null?void 0:M.split("&").at(0)],limit:20,keepForever:!0});P(()=>{q(),S(null),G(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),T(l,s=>{s&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const F=O(()=>{var n,i,r,p;const s=(p=(r=(i=(n=l.value)==null?void 0:n.pages)==null?void 0:i[0])==null?void 0:r.data)==null?void 0:p[0];return s&&Q.value&&s.media_type!=="person"&&s.media_type!=="genres"});U(()=>{stop(),S(null)});const C=m(),E=m();P(()=>{var s,n;E.value=d.params.id??d.name,w.value&&(((n=(s=l==null?void 0:l.value)==null?void 0:s.pages)==null?void 0:n.length)??0)<50&&k(),document.addEventListener("scrollToDiv",i=>{var r;(r=C.value)==null||r.scrollTo({top:i.detail.top-100,behavior:"smooth"})})}),W(()=>{document.dispatchEvent(new Event("indexer"))}),T(l,s=>{var n;s&&w.value&&((n=s==null?void 0:s.pages)==null?void 0:n.length)<50&&k()});const L=m(),R=m(),v=(s,n)=>{L.value=n,R.value.show(s)};return(s,n)=>(o(),c(t(X),null,{default:$(()=>[z(t(A),{fullscreen:!0,class:"ion-padding",style:{"--padding-bottom":"0"}},{default:$(()=>{var i;return[n[0]||(n[0]=_("div",{class:"fixed top-0 pt-safe w-full bg-slate-light-1 dark:bg-slate-dark-3 z-1199"},null,-1)),_("div",{ref_key:"lib",ref:C,class:"pt-safe-offset-9 flex h-auto w-full pr-8 overflow-auto scroll-container"},[(o(),u("div",{class:h(["z-0 flex flex-col gap-4 rounded-3xl border-0 w-available scrollbar-none border-auto-3",{"pb-2":t(g)&&t(f),"children:pb-4 sm:children:pb-3":!t(g)&&t(f)}]),key:(i=t(H).currentRoute.value.params)==null?void 0:i.id},[_("div",{class:h(`grid w-full gap-4 scroll-smooth music-showing:pb-0 pl-1 py-4 ${F.value?te:ne}`)},[t(l)?(o(!0),u(x,{key:0},V(t(l).pages??[],(r,p)=>{var B,I,N;return o(),u(x,{key:p},[r.data.length>0?(o(!0),u(x,{key:0},V(r.data??[],(e,b)=>(o(),u(x,null,[(e==null?void 0:e.media_type)==="tv"||(e==null?void 0:e.media_type)=="movie"||(e==null?void 0:e.media_type)=="collection"||(e==null?void 0:e.media_type)=="specials"?(o(),c(Y,{key:e.id,data:e,onContextMenu:a=>v(a,e),index:b},null,8,["data","onContextMenu","index"])):(e==null?void 0:e.media_type)==="person"?(o(),c(Z,{key:e.id+"_person",data:e,onContextMenu:a=>v(a,e),index:b},null,8,["data","onContextMenu","index"])):(e==null?void 0:e.media_type)==="genres"?(o(),c(ee,{key:e.id+"_genres",data:e,onContextMenu:a=>v(a,e),index:b},null,8,["data","onContextMenu","index"])):y("",!0)],64))),256)):((N=(I=(B=t(l).pages)==null?void 0:B[0])==null?void 0:I.data)==null?void 0:N.length)==0?(o(),c(se,{key:1})):y("",!0)],64)}),128)):y("",!0)],2)],2)),z(J,{id:E.value,class:h(["w-8 fixed right-0 bg-slate-light-1 dark:bg-slate-dark-3 transition-all duration-200",{"h-available":!t(g),"h-inherit top-24":t(g),"-mt-4 pt-4 pb-4 mb-0":!t(f),"-mt-4 pt-4 pb-4 mb-14":t(f)}])},null,8,["id","class"])],512)]}),_:1})]),_:1}))}});export{pe as default};
