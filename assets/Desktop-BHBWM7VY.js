import{C as j,Ct as s,Dt as N,K as C,O as A,S as a,T as U,U as E,X as F,c as M,it as n,j as R,k as t,mt as i,ot as p,vt as z,w as y,x as J}from"./i18n-Rm1NkeNf.js";import"./ionic-vX7GXDhi.js";import{C as L,_ as X}from"./vue-core-ChFWZS_w.js";import{l as m,m as H}from"./primevue-DkuV93HA.js";import{c as W}from"./query-BPfDyGC_.js";import{Ji as G,Ki as Y,_n as D,b as Z,qi as u,vn as I}from"./index-Xs7mRxBv.js";import{t as h}from"./Toggle-2XMrw9sI.js";import"./useInfiniteServerClient-B6uzCz3X.js";import{t as ee}from"./useServerClient-6_hsTJr5.js";import"./ScrollContainer-BeiOH-Xw.js";import"./useMounted-A4MEnwHg.js";import"./RipperOverlay-Bh3rLKE1.js";import"./ripperSocket-D-Jp9l05.js";import"./FloatingBackButton-DGRFoRNG.js";import{t as re}from"./DashboardLayout-Be6c4Ety.js";M();var le={key:0,class:"col-span-2 col-start-1 2xl:col-start-1"},ae={class:"flex flex-col gap-2"},oe={class:"flex flex-col gap-2"},se={class:"flex flex-col gap-2"},te={key:1,class:"col-span-2 col-start-1 2xl:col-start-3"},ue={class:"flex flex-col gap-2"},ne={class:"flex flex-col gap-2"},ie={class:"flex flex-col gap-2"},de={class:"flex flex-col gap-2"},ve={class:"flex flex-col gap-2"},me={class:"flex flex-col gap-2"},fe={class:"flex flex-col gap-2"},pe={key:2,class:"col-span-2 col-start-1 2xl:col-start-5"},_e={class:"flex flex-col gap-2"},we={class:"flex gap-4"},ke=["aria-label","href"],ge=R({__name:"Desktop",setup(xe){const{data:l,refetch:O,error:$}=ee({path:"/dashboard/configuration"}),_=i(!1),d=i(l.value??{}),v=(r,e)=>{if(l.value){if(z(l.value[r])===e){delete d.value[r],d.value={...d.value};return}d.value={...d.value,[r]:e??void 0}}};n(l,r=>{r&&(d.value={},w.value=r?.name,k.value=r?.external_port,g.value=r?.internal_port,x.value=r?.queue_workers,V.value=r?.cron_workers,b.value=r?.data_workers,c.value=r?.request_workers,q.value=r?.encoder_workers,S.value=r?.image_workers,B.value=r?.file_workers,f.value=r?.swagger,_.value=!0)}),E(()=>{l.value&&(d.value={},w.value=l.value?.name,k.value=l.value?.external_port,g.value=l.value?.internal_port,x.value=l.value?.queue_workers,V.value=l.value?.cron_workers,b.value=l.value?.data_workers,c.value=l.value?.request_workers,q.value=l.value?.encoder_workers,S.value=l.value?.image_workers,B.value=l.value?.file_workers,f.value=l.value?.swagger,_.value=!0)});const w=i(l.value?.name??"");n(w,r=>{v("name",r),u.value&&(I([...D.value.filter(e=>e.id!==u.value.id),{...u.value,name:r.toString()}]),G({...u.value,name:r.toString()}))});const k=i(l.value?.external_port??0);n(k,r=>{v("external_port",r),u.value&&(I([...D.value.filter(e=>e.id!==u.value.id),{...u.value,external_port:r.toString()}]),G({...u.value,external_port:r.toString()}))});const g=i(l.value?.internal_port??0);n(g,r=>{v("internal_port",r),u.value&&(I([...D.value.filter(e=>e.id!==u.value.id),{...u.value,internal_port:r.toString()}]),G({...u.value,internal_port:r.toString()}))});const x=i(l.value?.queue_workers??0);n(x,r=>{v("queue_workers",r)});const V=i(l.value?.cron_workers??0);n(V,r=>{v("cron_workers",r)});const b=i(l.value?.data_workers??0);n(b,r=>{v("data_workers",r)});const c=i(l.value?.request_workers??0);n(c,r=>{v("request_workers",r)});const S=i(l.value?.image_workers??0);n(S,r=>{v("image_workers",r)});const q=i(l.value?.encoder_workers??0);n(q,r=>{v("encoder_workers",r)});const B=i(l.value?.file_workers??0);n(B,r=>{v("file_workers",r)});const f=i(l.value?.swagger??!1);n(f,r=>{v("swagger",r)});const K=J(()=>Object.keys(d.value).length>0);n(d,r=>{console.log(r)});const P=W(),Q=()=>{console.raw(d.value),Y().patch("/dashboard/configuration",d.value).then(()=>{O(),P.invalidateQueries({queryKey:["serverInfo"]})})};return(r,e)=>{const T=F("Button");return C(),j(s(L),null,{default:p(()=>[t(s(X),{fullscreen:!0},{default:p(()=>[t(re,{error:s($),gridStyle:2,description:"",title:"General"},{cta:p(()=>[...e[12]||(e[12]=[])]),actions:p(()=>[t(T,{id:"save",disabled:!K.value,class:"ml-auto",color:"theme",form:"myForm",type:"submit",onClick:e[11]||(e[11]=o=>Q())},{default:p(()=>[A(N(r.$t("Save")),1)]),_:1},8,["disabled"])]),default:p(()=>[_.value?(C(),U("div",le,[a("div",ae,[e[13]||(e[13]=a("label",{for:"name"},"Server name",-1)),t(s(H),{id:"name",modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=o=>w.value=o),class:"mb-4"},null,8,["modelValue"])]),a("div",oe,[e[14]||(e[14]=a("label",{for:"internal_port"},"Secure internal port",-1)),t(s(m),{id:"internal_port",modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=o=>g.value=o),min:2e3,useGrouping:!1,class:"mb-4",showButtons:""},null,8,["modelValue"])]),a("div",se,[e[15]||(e[15]=a("label",{for:"external_port"},"Secure external port",-1)),t(s(m),{id:"external_port",modelValue:k.value,"onUpdate:modelValue":e[2]||(e[2]=o=>k.value=o),min:2e3,useGrouping:!1,class:"mb-4",showButtons:""},null,8,["modelValue"])])])):y("",!0),_.value?(C(),U("div",te,[a("div",ue,[e[16]||(e[16]=a("label",{for:"queue_workers"},"Queue workers",-1)),t(s(m),{id:"queue_workers",modelValue:x.value,"onUpdate:modelValue":e[3]||(e[3]=o=>x.value=o),min:0,useGrouping:!1,class:"mb-4",showButtons:""},null,8,["modelValue"])]),a("div",ne,[e[17]||(e[17]=a("label",{for:"encoder_workers"},"Encoder workers",-1)),t(s(m),{id:"encoder_workers",modelValue:q.value,"onUpdate:modelValue":e[4]||(e[4]=o=>q.value=o),min:0,useGrouping:!1,class:"mb-4",showButtons:""},null,8,["modelValue"])]),a("div",ie,[e[18]||(e[18]=a("label",{for:"cron_workers"},"Cron workers",-1)),t(s(m),{id:"cron_workers",modelValue:V.value,"onUpdate:modelValue":e[5]||(e[5]=o=>V.value=o),min:0,useGrouping:!1,class:"mb-4",showButtons:""},null,8,["modelValue"])]),a("div",de,[e[19]||(e[19]=a("label",{for:"data_workers"},"Data workers",-1)),t(s(m),{id:"data_workers",modelValue:b.value,"onUpdate:modelValue":e[6]||(e[6]=o=>b.value=o),min:0,useGrouping:!1,class:"mb-4",showButtons:""},null,8,["modelValue"])]),a("div",ve,[e[20]||(e[20]=a("label",{for:"image_workers"},"Image workers",-1)),t(s(m),{id:"image_workers",modelValue:S.value,"onUpdate:modelValue":e[7]||(e[7]=o=>S.value=o),min:0,useGrouping:!1,class:"mb-4",showButtons:""},null,8,["modelValue"])]),a("div",me,[e[21]||(e[21]=a("label",{for:"file_workers"},"File workers",-1)),t(s(m),{id:"file_workers",modelValue:B.value,"onUpdate:modelValue":e[8]||(e[8]=o=>B.value=o),min:0,useGrouping:!1,class:"mb-4",showButtons:""},null,8,["modelValue"])]),a("div",fe,[e[22]||(e[22]=a("label",{for:"request_workers"},"Request workers",-1)),t(s(m),{id:"request_workers",modelValue:c.value,"onUpdate:modelValue":e[9]||(e[9]=o=>c.value=o),min:0,useGrouping:!1,class:"mb-4",showButtons:""},null,8,["modelValue"])])])):y("",!0),_.value?(C(),U("div",pe,[a("div",_e,[a("span",we,[e[23]||(e[23]=a("label",{for:"swagger"},"Open API / Swagger Ui",-1)),f.value&&s(u)?.serverBaseUrl?(C(),U("a",{key:0,"aria-label":r.$t("Open API / Swagger Ui in a new tab"),href:s(u)?.serverBaseUrl,class:"flex gap-1 items-center underline underline-offset-4 h-4 text-sm",target:"_blank"},[a("span",null,N(r.$t("Open")),1),t(Z,{className:"size-4",color:"theme",icon:"shareSquare"})],8,ke)):y("",!0)]),t(h,{"model-value":f.value,"onUpdate:modelValue":e[10]||(e[10]=o=>f.value=o)},null,8,["model-value"])])])):y("",!0)]),_:1},8,["error"])]),_:1})]),_:1})}}}),Ke=ge;export{Ke as default};
