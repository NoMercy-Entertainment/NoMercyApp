import{$ as _,f as V,w as A,h as y,o as c,j as i,a0 as x,b as k,x as C,G as I,k as z,c as B,F as D,q as F,T as H,d as S,aN as K,p as M,z as R,av as P,as as G}from"./vue-ionic-CemLi1Vc.js";import{u as O}from"./useServerClient-1saKC6g8.js";import{j as E,c as T,ah as J,b9 as L}from"./index-C_zEUz-P.js";import"./vendor-Dgtccx1h.js";import"./icons-BW5E66pf.js";import"./rxjs-BCp2L9Rn.js";import"./media-C2AqgyMX.js";import"./api-BBofn2cc.js";import"./swiper-D00Cnjmx.js";import"./useInfiniteServerClient-CxV2a3Hr.js";import"./music-player-Ck3tZcPH.js";import"./primevue-BPlwQLS6.js";const Q={class:"w-available h-available absolute left-[202px] top-0 overflow-hidden bg-focus"},W=["src"],X={class:"flex flex-col justify-start items-start w-[484px] relative left-[58px] top-20 gap-7"},Y={class:"flex flex-col justify-start items-start self-stretch relative gap-5"},Z={class:"flex flex-col justify-start items-start w-full relative gap-0 mt-8"},ee=["innerHTML"],te={class:"flex items-center h-8 gap-2 self-stretch w-full opacity-60 text-xs font-medium text-left text-[#c4c7c5]"},se={key:0,class:"flex gap-2"},le={key:1,class:"flex gap-2"},ae={class:"line-clamp-4 text-sm -mt-4"},oe=_({__name:"MusicHeader",props:{selected:{type:Object,required:!1}},setup(o){const v=o;return V(()=>{var r,n;E((n=(r=v.selected)==null?void 0:r.color_palette)==null?void 0:n.cover)}),A(v,r=>{var n,p;E((p=(n=r.selected)==null?void 0:n.color_palette)==null?void 0:p.cover)}),(r,n)=>{var p,g,u,m,w,b,e,t,s,l;return c(),y("div",{key:(p=o.selected)==null?void 0:p.id,class:"w-full h-full absolute left-0 top-0 bg-[#131314]",style:I(x(L)?`--color-focus: ${x(L)}`:"")},[i("div",Q,[i("img",{class:"w-available h-available absolute left-[-0.39px] top-[-0.39px] opacity-40 object-cover object-center",src:`${(g=x(T))==null?void 0:g.serverBaseUrl}${(u=o.selected)==null?void 0:u.cover}`,alt:""},null,8,W),n[0]||(n[0]=i("div",{class:"w-available h-available absolute left-[-0.39px] top-[-0.39px]"},null,-1)),n[1]||(n[1]=i("div",{class:"w-[150vw] h-[150vw] absolute left-[-30%] bottom-[-50%]",style:{background:`radial-gradient(
            closest-side,
            rgba(19, 19, 20, 0.1) 0%,
            rgba(19, 19, 20, 1) 70.73974609375%
          )`}},null,-1))]),i("div",X,[i("div",Y,[i("div",Z,[(m=o.selected)!=null&&m.name?(c(),y("p",{key:0,class:"self-stretch flex-grow-0 flex-shrink-0 w-full text-3xl font-bold text-left z-10",innerHTML:x(J)(((w=o.selected)==null?void 0:w.name)??" ","text-lg line-clamp-2")},null,8,ee)):k("",!0),i("div",te,[(b=o.selected)!=null&&b.type?(c(),y("span",se,[i("span",null,C((e=o.selected)==null?void 0:e.type.replace(/s$/u,"").toTitleCase()),1)])):k("",!0),(t=o.selected)!=null&&t.tracks?(c(),y("span",le,[n[2]||(n[2]=i("span",null,"â€¢",-1)),i("span",null,C((s=o.selected)==null?void 0:s.tracks)+" "+C(r.$t("tracks")),1)])):k("",!0)])]),i("div",ae,C((l=o.selected)==null?void 0:l.description),1)])])],4)}}}),re={key:0,"data-row":"",class:"grid grid-rows-[auto_1fr] grid-cols-7 relative justify-start flex-1 w-full gap-3 mb-2 mt-4"},ne={class:"row-start-1 col-span-7 pointer-events-none font-semibold font-3xl"},ie=["src"],ce=_({__name:"TvCarousel2",props:{data:{type:Array,required:!0},title:{type:String,required:!0},handleFocus:{type:Function,required:!0},handleDown:{type:Function,required:!0},handleUp:{type:Function,required:!0},suffix:{type:String,required:!1,default:""}},setup(o){return(v,r)=>{var p,g;const n=z("RouterLink");return c(),y(D,null,[o.data.length?(c(),y("div",re,[i("h3",ne,C(o.title),1),(c(!0),y(D,null,F((p=o.data)==null?void 0:p.slice(0,7),(u,m)=>{var w,b,e;return c(),B(n,{key:u.id,to:`${(w=u.props)==null?void 0:w.data.link}${o.suffix}`,"data-card":(b=u.props)==null?void 0:b.data.id,"data-index":m,class:"row-start-2 w-full h-auto rounded-xl bg-cover aspect-square focus:scale-105 focus:outline outline-[2.2px] outline-white transition-transform duration-200 scroll-mb-20 scroll-mt-8 snap-top snap-mandatory",style:I(`background-image: url('${(e=x(T))==null?void 0:e.serverBaseUrl}${u.props.data.cover}')`),onFocus:t=>o.handleFocus(t,u.props.data),onKeydown:r[0]||(r[0]=t=>o.handleDown(t)),onKeyup:r[1]||(r[1]=t=>o.handleUp(t))},null,8,["to","data-card","data-index","style","onFocus"])}),128))])):k("",!0),(c(),B(H,{to:".image-preload-container"},[(c(!0),y(D,null,F((g=o.data)==null?void 0:g.slice(0,7),u=>{var m;return c(),y("img",{key:u.id,src:`${(m=x(T))==null?void 0:m.serverBaseUrl}${u.props.data.cover}`,width:"0",height:"0",loading:"eager",alt:"",class:"absolute"},null,8,ie)}),128))]))],64)}}}),ue={class:"w-screen h-screen relative overflow-hidden bg-[#131314]"},$e=_({__name:"Tv",setup(o){const{data:v}=O({queryKey:["music","home"]}),r=S(),n=S(),p=S(!1),g=S(),u=S();A(v,e=>{var s,l,a,h,d;if(!e)return;const t=e.filter(f=>f.component==="NMCarousel");t&&(r.value=(d=(h=(a=(l=(s=t.find(f=>f.props.items.length>0))==null?void 0:s.props)==null?void 0:l.items)==null?void 0:a[0])==null?void 0:h.props)==null?void 0:d.data)}),K(()=>{var t,s,l,a,h,d;const e=(t=v.value)==null?void 0:t.filter(f=>f.component==="NMCarousel");e&&(r.value=(d=(h=(a=(l=(s=e.find(f=>f.props.items.length>0))==null?void 0:s.props)==null?void 0:l.items)==null?void 0:a[0])==null?void 0:h.props)==null?void 0:d.data,setTimeout(()=>{var $;const f=document.querySelector(`[data-card="${($=r.value)==null?void 0:$.id}"]`);f&&f.focus()},100))}),A(r,e=>{setTimeout(()=>{const t=document.querySelector(`[data-card="${e==null?void 0:e.id}"]`);t&&t.focus()},100)});function m(e,t){var l;const s=e.target;if((s==null?void 0:s.nodeName)==="DIV"){(l=u.value??s.querySelector("a"))==null||l.focus();return}t&&(r.value=t,u.value=s)}function w(e){var N,U;if(p.value){e.preventDefault();return}clearTimeout(g.value),p.value=!0;const t=e.target,s=t.getAttribute("data-index"),l=t.closest("[data-row]"),a=l==null?void 0:l.previousElementSibling,h=a==null?void 0:a.querySelector(`a[data-index="${s}"]`),d=l==null?void 0:l.nextElementSibling,f=d==null?void 0:d.querySelector(`a[data-index="${s}"]`),$=t.previousElementSibling,j=t.nextElementSibling;if(h&&e.key==="ArrowUp")e.preventDefault(),h.focus();else if(f&&e.key==="ArrowDown")e.preventDefault(),f.focus();else if($&&e.key==="ArrowLeft")e.preventDefault(),$.focus();else if(j&&e.key==="ArrowRight")e.preventDefault(),j.focus();else if(a&&e.key==="ArrowUp"){const q=(N=Array.from(a==null?void 0:a.querySelectorAll("a")))==null?void 0:N.at(-1);q&&q.focus()}else if(d&&e.key==="ArrowDown"){const q=(U=Array.from(d==null?void 0:d.querySelectorAll("a")))==null?void 0:U.at(-1);q&&q.focus()}}function b(){g.value=setTimeout(()=>{p.value=!1},150)}return(e,t)=>(c(),B(x(G),null,{default:M(()=>[R(x(P),{fullscreen:!0},{default:M(()=>{var s,l;return[i("div",ue,[r.value?(c(),B(oe,{key:0,selected:r.value},null,8,["selected"])):k("",!0),i("div",{ref_key:"scrollContainer",ref:n,tabindex:"0",class:"flex flex-col justify-start items-start w-available -mx-3 px-3 absolute left-14 right-14 top-[320px] h-available overflow-auto scroll-smooth gap-4 flex-1 pb-8",onFocus:t[0]||(t[0]=a=>m(a))},[x(v)?(c(!0),y(D,{key:0},F(((l=(s=x(v))==null?void 0:s.filter)==null?void 0:l.call(s,a=>a.component==="NMCarousel"))??[],a=>(c(),B(ce,{key:a.id,title:a.props.title,data:a.props.items??[],"handle-focus":m,"handle-down":w,"handle-up":b},null,8,["title","data"]))),128)):k("",!0)],544)])]}),_:1})]),_:1}))}});export{$e as default};
