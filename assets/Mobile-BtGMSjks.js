import{C as P,Ft as _,Gt as w,Ln as s,Rn as C,Rt as c,Tt as h,cn as m,i as I,kn as M,mt as l,qt as S,u as N,w as T,xn as d,yn as x,zt as v}from"./index-cywnPOBC.js";import"./dist-yzM0QGvF.js";import{t as B}from"./esm-CsGjMs42.js";import"./esm-D4f7ygqA.js";import"./dist-CG1k-g7C.js";import"./focus-visible-dQviwWa0.js";import"./index5-DWzlHdCO.js";import"./client-D7oxUmH6.js";import"./ionic-global-DCe2g38l.js";import"./hardware-back-button-Bqrrbg0Z.js";import"./index3-bIbYCfqw.js";import"./helpers-BGGXVDsd.js";import"./index6-vUi4VFUZ.js";import"./index8-5IzBz0Dr.js";import"./keyboard-CAPY05Np.js";import"./index2-DsYXeg3E.js";import"./ios.transition-DeZfFnMt.js";import"./keyboard2-CYwkuq6R.js";import"./md.transition-CoCDKCK7.js";import"./dir-VVnELOav.js";import"./ui-C0FA7XgL.js";import"./client-TRoQZYEY.js";import{t as D}from"./currentServer-ns-65dJg.js";import"./config-BZ-AEJ_J.js";import"./core-Byg9KrIc.js";import"./esm-D9ex0nT9.js";import{p as f}from"./global-oyc8MvKQ.js";import"./esm-B2mzPl6v.js";import"./bundle-mjs-BuAB9hD1.js";import{s as t}from"./user-DdN2xDWa.js";import"./serverClient-h83xvsoB.js";import{t as a}from"./router-b6Y7vD7A.js";import"./utils-CfbU6uFB.js";import"./useBaseQuery--g5SyDb6.js";import"./useInfiniteServerClient-DYu8wLRM.js";import{l as y}from"./SocketClient-BXQHVNG_.js";import"./useQueryClient-CeysrMlA.js";import"./useQuery-BSaIeQ43.js";import"./apiClient-cmnl9Hzw.js";import"./notifications-Cig9DoL1.js";import{c as U,i as V,l as A,r as L,y as z}from"./utils-D5nhA-44.js";import"./deviceInfo-D74C9RbC.js";import"./auth-Bz7Q9vHJ.js";import{s as p}from"./imageModal-BIphXLR8.js";import{t as R}from"./useServerClient-BCJ_nw8c.js";import{a as F,i as j,n as q,o as E,r as G}from"./VideoPlayer-zDHN3OcG.js";import"./buttons-BrAf7pXX.js";import{t as O}from"./videoNoMercyConnectPlugin-Hx_j5vTI.js";h();var H=S({__name:"Mobile",setup(J){const{data:n}=R({enabled:!t.value.features?.nomercyConnect}),e=M();function u(o){const i={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:o?.filter(r=>!!r.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:t.value?.accessToken||localStorage.getItem("access_token")||"",basePath:D.value?.serverBaseUrl,imageBasePath:"https://app.nomercy.tv/tmdb-images",forceTvMode:(l("android")||l("ios"))&&!l("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||l("capacitor"),renderAhead:100,disableAutoPlayback:t.value.features?.nomercyConnect};if(e.value=G("player1").setup(i),e.value?.once("back",()=>{history.state.back?a.back():a.replace("/")}),t.value.features?.nomercyConnect){const r=new O;e.value?.registerPlugin("videoNoMercyConnect",r),e.value?.usePlugin("videoNoMercyConnect")}const g=new j;e.value?.registerPlugin("desktopUI",g),e.value?.usePlugin("desktopUI");const b=new F;if(e.value?.registerPlugin("autoSkip",b),e.value?.usePlugin("autoSkip"),!t.value.features?.nomercyConnect){const r=new E;e.value?.registerPlugin("sync",r),e.value?.usePlugin("sync")}const k=new q;e.value?.registerPlugin("octopus",k),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?a.back():a.replace("/")}),e.value?.on("dispose",async()=>{await A(),await L(),history.state.back?a.back():await a.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{p(!0)}),e.value?.on("pause",()=>{p(!1)}),e.value?.on("ready",async()=>{await U(),await z(),await V(),y.stop()}),e.value?.on("item",()=>{e.value?.play()}),B.addListener("backButton",()=>{e.value?.emit("back-button-hyjack"),e.value?.dispose()})}return x(n,o=>{o?.length&&u(o)}),P(()=>{y.stop(),t.value.features?.nomercyConnect?u():n.value?.length&&u(n.value)}),T(()=>{e.value?.dispose(),p(!1)}),(o,i)=>(m(),v(s(N),null,{default:d(()=>[w(s(I),{fullscreen:!0},{default:d(()=>[(m(),v(_,{to:"body"},[c("div",{class:C([{"mb-28":s(f),"mb-0":!s(f)},"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"])},[...i[0]||(i[0]=[c("div",{id:"player1",class:"group nomercyplayer"},null,-1)])],2)]))]),_:1})]),_:1}))}}),qe=H;export{qe as default};
