import{$ as Q,d as R,w as $,f as q,aJ as E,c as G,o as L,p as V,z as W,a0 as F,au as X,j as Y,ar as Z,Q as t}from"./vue-ionic-Db_NiJFp.js";import{g as i}from"./imageModal-Dkr6ZQXR.js";import{S as ee}from"./syncPlugin-BQXoJpD2.js";import{A as oe}from"./autoSkipPlugin-Cl5DzRhI.js";import"./vendor-Dgtccx1h.js";import{u as r,n as ae,c as ne,r as K}from"./index-C7Gmekvn.js";import{D as re}from"./desktopUIPlugin-B_EWG-hr.js";import{n as se,O as te}from"./video-player-D-oqapjW.js";import{K as le}from"./keyHandlerPlugin-yjXNzzi6.js";import{u as ue}from"./useServerClient-C1HPpcel.js";import{V as ie}from"./videoNoMercyConnectPlugin-qZFZGUX_.js";import"./media-C2AqgyMX.js";import"./icons-BW5E66pf.js";import"./api-BBofn2cc.js";import"./swiper-D00Cnjmx.js";import"./buttons-DnucOQvv.js";import"./rxjs-BCp2L9Rn.js";import"./music-player-bBxcOCLu.js";import"./primevue-Bn7Q4nqF.js";import"./baseUIPlugin-ATvTL8aQ.js";import"./subtitles-octopus-By2PrHjB.js";import"./useInfiniteServerClient-CLgCj6Fg.js";const Te=Q({__name:"Desktop",setup(ce){var c;const{data:l}=ue({enabled:!((c=r.value.features)!=null&&c.nomercyConnect)}),e=R();function u(o){var p,m,d,f,g,y,v,P,k,C,b,w,S,M,_,h,I,N,U,x,B,D,T,A;const n={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:(o==null?void 0:o.filter(a=>!!a.id))??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:(p=r.value)==null?void 0:p.accessToken,basePath:(m=ne.value)==null?void 0:m.serverBaseUrl,forceTvMode:(t("android")||t("ios"))&&!t("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||t("capacitor"),renderAhead:100,disableAutoPlayback:(d=r.value.features)==null?void 0:d.nomercyConnect};if((f=e.value)==null||f.dispose(),e.value=se("player1").setup(n),(g=e.value)==null||g.once("back",()=>{K.back()}),(y=r.value.features)!=null&&y.nomercyConnect){const a=new ie;(v=e.value)==null||v.registerPlugin("videoNoMercyConnect",a),(P=e.value)==null||P.usePlugin("videoNoMercyConnect")}const O=new re;(k=e.value)==null||k.registerPlugin("desktopUI",O),(C=e.value)==null||C.usePlugin("desktopUI");const j=new oe;(b=e.value)==null||b.registerPlugin("autoSkip",j),(w=e.value)==null||w.usePlugin("autoSkip");const z=new le;if((S=e.value)==null||S.registerPlugin("keyHandler",z),(M=e.value)==null||M.usePlugin("keyHandler"),!((_=r.value.features)!=null&&_.nomercyConnect)){const a=new ee;(h=e.value)==null||h.registerPlugin("sync",a),(I=e.value)==null||I.usePlugin("sync")}const J=new te;(N=e.value)==null||N.registerPlugin("octopus",J),(U=e.value)==null||U.usePlugin("octopus"),(x=e.value)==null||x.once("play",()=>{var a;(a=e.value)==null||a.enterFullscreen()}),(B=e.value)==null||B.on("playlistComplete",()=>{console.log("Playlist complete"),K.back()}),(D=e.value)==null||D.on("play",()=>{i(!0)}),(T=e.value)==null||T.on("pause",()=>{i(!1)}),(A=e.value)==null||A.on("fullscreen",a=>{var s,H;(H=(s=window.external)==null?void 0:s.sendMessage)==null||H.call(s,a?"enterFullscreen":"exitFullscreen")})}return $(l,o=>{o!=null&&o.length&&u(o)}),q(()=>{var o,n;ae.stop(),(o=r.value.features)!=null&&o.nomercyConnect?u():(n=l.value)!=null&&n.length&&u(l.value)}),E(()=>{var o;(o=e.value)==null||o.dispose(),i(!1)}),(o,n)=>(L(),G(F(Z),null,{default:V(()=>[W(F(X),{fullscreen:!0},{default:V(()=>n[0]||(n[0]=[Y("div",{id:"player1",class:"group nomercyplayer"},null,-1)])),_:1})]),_:1}))}});export{Te as default};
