import"./useBaseQuery-BjcRoUle.js";import"./useInfiniteServerClient-C6VvXOvL.js";import"./useQueryClient-6VbozcbB.js";import"./useQuery-8mENMoCn.js";import{Ac as a,Cc as i,Fs as n,Hs as g,Is as _,Ls as A,Mo as I,No as q,Oo as N,Rs as L,Ss as $,Ws as j,_c as S,_r as p,cr as y,dr as P,ds as R,fo as V,gr as f,hc as k,i as E,ic as u,io as O,jc as T,ks as W,oc as D,pi as G,tc as J,ui as K}from"./index-hMnv1PVv.js";import"./basecomponent-D_UEt3Di.js";import"./classnames-D1foEy1e.js";import"./button-B6tG3UZG.js";import"./baseicon-DOufG3vN.js";import"./musicPlaylists-fUguIxvl.js";import"./contextMenuItems-soWLGaJh.js";import"./_plugin-vue_export-helper-CEc1WwrB.js";import"./AppLogoSquare-BEiYFMZZ.js";import{t as Q}from"./MoooomIcon-mzdi33MS.js";import"./DropdownMenu-BuJ_8xzG.js";import"./dist-BZgawwfv.js";import{t as U}from"./useServerClient-BS75nouq.js";import"./CoverImage-nxFvTk7e.js";import"./MusicButton-BFtRsgCh.js";import"./BannerButton-YztOGtR-.js";import"./MediaLikeButton-uD0naBxE.js";import"./PlayerIcon-DXqyXStS.js";import{t as X}from"./Marquee-m0k8CZC0.js";import"./EqSpinner-LZjnBIW5.js";import"./FavoriteImage-DVti6z2A.js";import"./TrackLinks-CXzqeuqH.js";import"./BigPlayButton-Cq344GsB.js";import{t as Y}from"./NotFound-J4n7D-lz.js";import"./ShareButton-VMvIQvXB.js";import{i as Z,n as ee,r as te,t as ae}from"./TrackRow-BQrYSDND.js";$();I();var re={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},oe={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},le=j({__name:"Mobile",setup(se){const x=q(),{data:e,isError:B}=U({path:x.fullPath}),H=i(null),b=i(),s=i("");k(e,t=>{K(t?.name??null),c(t?.tracks??[],p.value,f.value,s.value),y(t?.color_palette?.cover)}),k(f,t=>{c(e.value?.tracks??[],p.value,t,s.value)}),k(p,t=>{c(e.value?.tracks??[],t,f.value,s.value)}),k(s,t=>{c(e.value?.tracks??[],p.value,f.value,t)});function c(t,o,l,r){const C=G(t??[],o,l,P);r===""?b.value=C:b.value=C?.filter(w=>w.name?.toLowerCase().includes(r?.toLowerCase?.())||w.artist_track?.some(M=>M.name.toLowerCase().includes(r?.toLowerCase?.()))||w.album_track?.[0]?.name.toLowerCase().includes(r?.toLowerCase?.()))??[]}J(()=>{c(e?.value?.tracks??[],p.value,f.value,s.value),e.value?.color_palette?.cover&&y(e.value?.color_palette?.cover)}),N(()=>{c(e?.value?.tracks??[],p.value,f.value,s.value),e.value?.color_palette?.cover&&y(e.value?.color_palette?.cover)});function F(){E.back()}const v=i(!1),z=i(!1),d=i(),h=i();function m(){const l=R("capacitor")?88:64,r=d.value?.$el?.getBoundingClientRect().top;if(!r){requestAnimationFrame(m);return}if(v.value=r<=170,z.value=r<=160,window.CSS.supports("container-type","scroll-state")){requestAnimationFrame(m);return}r===l?(d.value?.$el?.classList.add("!bg-focus"),d.value?.$el?.firstChild?.classList.add("!bg-surface-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")):(d.value?.$el?.classList.remove("!bg-focus"),d.value?.$el?.firstChild?.classList.remove("!bg-surface-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")),requestAnimationFrame(m)}return k(h,()=>{requestAnimationFrame(m)}),(t,o)=>(u(),_(a(V),null,{default:S(()=>[g(a(O),{ref_key:"container",ref:h,"scroll-events":!0,onIonScroll:m},{default:S(()=>[a(B)&&!a(e)?(u(),_(Y,{key:0})):!a(x).params.id||a(x).params.id&&a(e)?.id===a(x).params.id?(u(),L("div",{key:1,ref_key:"main",ref:H,class:"flex flex-col h-auto overflow-x-clip w-available sm:rounded-2xl -mt-6 text-surface-12"},[g(te,{data:a(e)},null,8,["data"]),n("div",re,[o[2]||(o[2]=n("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),n("div",{id:"navbar",class:T([{"opacity-0 pointer-events-none":!v.value,"opacity-100 pointer-events-auto":v.value},"fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-surface-11 dark:bg-surface-1 top-0 pt-4 transition-all duration-200"])},[o[1]||(o[1]=n("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-all duration-200 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),n("button",{class:"z-30 flex h-10 w-11 items-center justify-center rounded-md",onClick:F},[g(Q,{icon:"arrowLeft"})]),n("div",{id:"navText",class:T([{"opacity-0 pointer-events-none":!v.value,"opacity-100 pointer-events-auto":v.value},"pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-all duration-200 w-[70%] overflow-clip text-xl"])},[g(X,{text:a(e)?.name},null,8,["text"])],2)],2),(u(),_(Z,{key:a(e)?.id,data:a(e),filter:s.value,onFilterChange:o[0]||(o[0]=l=>s.value=l)},null,8,["data","filter"])),n("div",oe,[(u(),_(ee,{key:a(e)?.id,ref_key:"sortHeader",ref:d})),(u(!0),L(W,null,D(b.value,(l,r)=>(u(),_(ae,{key:l.id+l?.favorite,data:l,"display-list":b.value,index:r},null,8,["data","display-list","index"]))),128))])])],512)):A("",!0)]),_:1},512)]),_:1}))}}),$e=le;export{$e as default};
