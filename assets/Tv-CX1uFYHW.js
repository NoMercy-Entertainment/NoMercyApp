import{I as P,Z as B,E as V,a7 as v,w as E,l as y,ci as M,d as h,o as c,s as n,j as a,K as e,bu as A,c as u,A as D,cT as k,a as r,R as H,eo as g,ep as b,eq as d,b as _,bm as K,t as m,bE as N,F as R,h as U,bB as G,bH as Z,n as J,a3 as p,ak as O,er as S,y as I,bh as Q,ah as W,bz as X,am as Y}from"./index-C1DjUpiP.js";import{u as ee}from"./useServerClient-BNYfM5AW.js";import{_ as C}from"./CoverImage.vue_vue_type_script_setup_true_lang-nw-ptjc7.js";import{_ as te}from"./OptimizedIcon.vue_vue_type_script_setup_true_lang-D4l8g0_V.js";import{_ as ae}from"./BigPlayButton.vue_vue_type_script_setup_true_lang-Cd--g6SW.js";import{_ as le}from"./MusicButton.vue_vue_type_script_setup_true_lang-X1eBpCOY.js";import{_ as se}from"./TrackLinks.vue_vue_type_script_setup_true_lang-DJrN5rKW.js";import{E as oe}from"./EqSpinner-BbIVusd0.js";import{M as T}from"./MediaLikeButton-C4LvEZhA.js";import{_ as ie}from"./Marquee.vue_vue_type_script_setup_true_lang-DM9H6LSz.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useQuery-8YWJGe_9.js";import"./useBaseQuery-juBGMRNQ.js";import"./useQueryClient-OkkyraFc.js";import"./useInfiniteServerClient-ARVV4sGq.js";import"./AppLogoSquare-DBIPgV3M.js";import"./PlayerIcon.vue_vue_type_script_setup_true_lang-Bs90e-24.js";import"./index-BZgGgbsZ.js";import"./index-BoXe2avd.js";import"./index-BqsC4e3Z.js";import"./index-kAUf1tII.js";import"./index-ZhWAdK_X.js";const re={class:"w-available h-available absolute left-[202px] top-0 overflow-hidden bg-focus"},ce=["src"],ue={class:"flex justify-center w-available aspect-square my-8 ml-8 mr-16"},de={key:0,class:"relative mb-8 flex w-full flex-1 flex-shrink-0 flex-col items-start justify-start gap-4 flex-grow-1 text-left"},fe=["innerHTML"],me={key:1,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap"},pe={class:"flex items-center h-8 gap-2 self-stretch w-full text-xs font-medium text-left"},be={key:0,class:"flex gap-2"},_e={key:1,class:"flex gap-2"},xe={class:"flex gap-2 items-center justify-between w-full"},we=["data-index","data-id","onClick"],ve={class:"flex w-available overflow-clip items-end"},ye=P({__name:"Tv",setup(he){const x=B(),{data:l}=ee({path:x.fullPath,keepForever:!0});V(()=>{l.value?.color_palette?.cover&&v(l.value?.color_palette?.cover),setTimeout(()=>{const s=document.querySelector(".focusable");s&&s.focus()},100)}),E(l,s=>{s?.color_palette?.cover&&v(s?.color_palette?.cover),setTimeout(()=>{const t=document.querySelector(".focusable");t&&t.focus()},100)});const w=y(),$=y();M(()=>{setTimeout(()=>{const s=document.querySelector(".focusable");s&&s.focus()},100)});function q(s){const t=s.target,o=w.value?.getAttribute("data-index")??0,i=t.querySelector(`[data-index="${o}"] .focusable`);i&&i.focus()}function F(s){const t=s.target;w.value=t,t&&t.scrollIntoView({behavior:"smooth",block:"center"});const o=t.closest("[data-id]")?.getAttribute("data-id"),i=t.querySelector(`[data-index="${o}"] .focusable`);i&&i.focus()}function z(s){const t=s.target;if(s.key==="ArrowUp"){const i=(t.closest("ion-item")?.previousSibling).querySelector(".focusable");i&&(i.focus(),i.scrollIntoView({behavior:"smooth",block:"center"}))}else if(s.key==="ArrowDown"){const i=(t.closest("ion-item")?.nextSibling).querySelector(".focusable");i&&(i.focus(),i.scrollIntoView({behavior:"smooth",block:"center"}))}}function L(){Y(x.fullPath)}function j(s){p.value||L(),W.playTrack(s,l.value?.tracks??[]),X()}return(s,t)=>(c(),h(e(Q),null,{default:n(()=>[a(e(A),{fullscreen:!0},{default:n(()=>[(c(),u("div",{key:e(l)?.id,class:"w-full h-full absolute left-0 top-0 bg-[#131314] pointer-events-none -z-10",style:D(e(k)?`--color-focus: ${e(k)}`:"")},[r("div",re,[r("img",{class:"w-available h-available absolute left-[-0.39px] top-[-0.39px] opacity-40 object-cover object-center",src:`${e(H)?.serverBaseUrl}${e(l)?.backdrop??e(l)?.cover}`,alt:""},null,8,ce),t[5]||(t[5]=r("div",{class:"w-[150vw] h-[150vw] absolute left-[-30%] bottom-[-50%]",style:{background:`radial-gradient(
                closest-side,
                rgba(19, 19, 20, 0.1) 0%,
                rgba(19, 19, 20, 1) 70.73974609375%
              )`}},null,-1))])],4)),a(e(g),null,{default:n(()=>[a(e(b),{class:"ion-align-items-end"},{default:n(()=>[a(e(d),{size:"3"},{default:n(()=>[r("div",ue,[a(C,{data:e(l),alt:e(l)?.name,class:"w-auto h-full aspect-square"},null,8,["data","alt"])]),e(l)?.name?(c(),u("div",de,[e(l).name.length>50?(c(),u("div",{key:0,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap",innerHTML:e(K)(e(l)?.name??"Songs you like","text-xs line-clamp-1")},null,8,fe)):(c(),u("p",me,m(e(l)?.name),1)),r("div",pe,[e(l)?.type?(c(),u("span",be,[r("span",null,m(e(l)?.type.replace(/s$/u,"").toTitleCase()),1)])):_("",!0),e(l)?.tracks?(c(),u("span",_e,[t[6]||(t[6]=r("span",null,"â€¢",-1)),r("span",null,m(e(l)?.tracks.length)+" "+m(s.$t("tracks")),1)])):_("",!0)]),r("div",xe,[a(T,{data:e(l)},null,8,["data"]),a(ae,{data:e(l),class:"w-12 h-12 ml-auto"},null,8,["data"])])])):_("",!0)]),_:1}),a(e(d),{ref_key:"scrollContainer",ref:$,size:"6",tabindex:"0",class:"w-full h-available overflow-auto scroll-smooth",onFocus:t[4]||(t[4]=o=>q(o))},{default:n(()=>[a(e(N),{mode:"md",lines:"none"},{default:n(()=>[(c(!0),u(R,null,U(e(l)?.tracks,(o,i)=>(c(),h(e(G),{key:o.id,tabindex:"-1",mode:"md",class:"group/track focus-within:bg-white/4 rounded-md overflow-clip"},{default:n(()=>[a(e(g),null,{default:n(()=>[a(e(b),{"data-index":i,"data-id":o.id,tabindex:"-1",class:"items-center !rounded-md !overflow-clip"},{default:n(()=>[a(e(d),{size:"2",tabindex:"-1"},{default:n(()=>[r("button",{tabindex:"0","data-index":i,"data-id":o.id,class:"focusable flex justify-center w-full aspect-video focus:outline outline-focus outline-2 outline-offset-2 mr-2 overflow-clip",onFocus:t[0]||(t[0]=f=>F(f)),onClick:f=>j(o)},[a(C,{data:o,alt:o.name,class:"w-auto h-full aspect-square"},null,8,["data","alt"])],40,we)]),_:2},1024),a(e(d),{size:"8",tabindex:"-1",class:"my-auto mt-2"},{default:n(()=>[a(e(Z),{tabindex:"-1"},{default:n(()=>[r("div",ve,[r("div",{class:J(["flex items-center justify-center h-full aspect-square overflow-clip transition-width duration-200",{"w-0":e(p)?.id!==o.id,"w-6 mr-1":e(p)?.id===o.id}])},[a(oe,{playing:e(O)},null,8,["playing"])],2),a(ie,{playing:!!e(p)?.id,text:o.name,class:"!w-[calc(100%-30px)] text-auto-12 children:leading-none w-available overflow-clip"},null,8,["playing","text"])]),a(se,{id:o.id,data:o.artist_track,type:"artists",suffix:"track",onKeydown:[t[1]||(t[1]=S(I(()=>{},["prevent"]),["up"])),t[2]||(t[2]=S(I(()=>{},["prevent"]),["down"]))],onKeyup:t[3]||(t[3]=f=>z(f))},null,8,["id","data"])]),_:2},1024)]),_:2},1024),a(e(d),{size:"2",tabindex:"-1",class:"opacity-0 group-focus-within/track:opacity-100 -ml-2"},{default:n(()=>[a(e(b),{tabindex:"-1",class:"flex flex-nowrap"},{default:n(()=>[a(T,{data:o},null,8,["data"]),a(le,{label:"",tabindex:"0",onclick:()=>{},class:"!bg-transparent mr-2"},{default:n(()=>[a(te,{icon:"menuDotsHorizontal",class:"text-white"})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1032,["data-index","data-id"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}))}}),Re=ne(ye,[["__scopeId","data-v-8b2e1a0d"]]);export{Re as default};
