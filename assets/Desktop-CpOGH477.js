import{aG as w,j as u,o as l,a7 as r,a as _,c as $,aQ as I,t as c,bD as R,ba as k,K as C,v as S,x as s,aI as o,bP as L,F as q,w as N,C as x,a6 as m,bO as j,bF as v,bp as D}from"./index-DbxIITaY.js";import{_ as F}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-By9USuDv.js";import{_ as K}from"./DashboardCard.vue_vue_type_script_setup_true_lang-BNxf4A_1.js";import"./FloatingBackButton.vue_vue_type_script_setup_true_lang-Dp6rriM-.js";import"./Button.vue_vue_type_script_setup_true_lang-BbTZel8q.js";const V={class:"relative flex aspect-video flex-shrink-0 flex-grow-0 flex-col items-center justify-center self-stretch overflow-clip rounded-lg bg-theme-11 dark:bg-theme-8 text-slate-light-12/80 dark:text-slate-dark-12/80"},z={key:1,class:"text-xl font-bold"},O=w({__name:"LibraryCard",props:{data:{type:Object,required:!0}},setup(e){return(y,i)=>{var n,a,d;return l(),u(K,{route:`/dashboard/libraries/${e.data.id}`,line1:e.data.title,line2:e.data.folder_library&&((n=e.data.folder_library)==null?void 0:n.length)!=1?`${(a=e.data.folder_library)==null?void 0:a.length} folders`:`${(d=e.data.folder_library)==null?void 0:d.length}  folder`},{image:r(()=>[_("div",V,[i[0]||(i[0]=_("div",{class:"backdropCard-overlay"},null,-1)),e.data.image?(l(),u(I,{key:0,path:e.data.image,class:"z-0"},null,8,["path"])):(l(),$("span",z,c(e.data.title),1))])]),_:1},8,["route","line1","line2"])}}}),G=w({__name:"Desktop",setup(e){var p;const{data:y,error:i}=R({path:"dashboard/libraries",queryKey:["dashboard","libraries",(p=k.value)==null?void 0:p.serverBaseUrl]}),n=()=>{v().post("dashboard/libraries").then(({data:t})=>{var b;D.invalidateQueries({queryKey:["dashboard","libraries",(b=k.value)==null?void 0:b.serverBaseUrl]})})},a=C(!1),d=()=>{a.value=!0,v().post("dashboard/libraries/refresh").then(({data:t})=>{a.value=!1}).catch(()=>{a.value=!1})},f=C(!1),B=()=>{f.value=!0,v().post("dashboard/libraries/rescan").then(({data:t})=>{f.value=!1}).catch(()=>{f.value=!1})};return(t,b)=>{const h=S("Button");return l(),u(o(j),null,{default:r(()=>[s(o(L),{fullscreen:!0},{default:r(()=>[s(F,{error:o(i),gridStyle:1,title:"Libraries",description:"Manage your media libraries and their content here."},{cta:r(()=>[s(h,{id:"newLibrary",color:"theme",startIcon:"folderAdd",onClick:n},{default:r(()=>[m(c(t.$t("New library")),1)]),_:1})]),actions:r(()=>[s(h,{type:"button",id:"refresh",variant:"text",startIcon:"folderSwap",disabled:a.value,class:x(a.value?"first:children:animate-spin cursor-not-allowed":""),onClick:d},{default:r(()=>[m(c(t.$t("Refresh all libraries")),1)]),_:1},8,["disabled","class"]),s(h,{type:"button",id:"rescan",variant:"text",startIcon:"folderSwap",disabled:a.value,class:x(a.value?"first:children:animate-spin cursor-not-allowed":""),onClick:B},{default:r(()=>[m(c(t.$t("Rescan all libraries")),1)]),_:1},8,["disabled","class"])]),default:r(()=>[(l(!0),$(q,null,N(o(y)??[],g=>(l(),u(O,{key:g.id,data:g},null,8,["data"]))),128))]),_:1},8,["error"])]),_:1})]),_:1})}}});export{G as default};
//# sourceMappingURL=Desktop-CpOGH477.js.map
