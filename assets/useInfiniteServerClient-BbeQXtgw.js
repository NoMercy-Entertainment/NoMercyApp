import{Q as m,u as x}from"./useBaseQuery-vm7BPSk-.js";import{cZ as v,c_ as b,c$ as R,Y as y,R as O,O as M}from"./index-C_qNKMWs.js";var N=class extends m{constructor(e,a){super(e,a)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:v()})}getOptimisticResult(e){return e.behavior=v(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,a){var d,n;const{state:t}=e,c=super.createResult(e,a),{isFetching:r,isRefetching:s,isError:h,isRefetchError:f}=c,u=(n=(d=t.fetchMeta)==null?void 0:d.fetchMore)==null?void 0:n.direction,i=h&&u==="forward",P=r&&u==="forward",g=h&&u==="backward",l=r&&u==="backward";return{...c,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:R(a,t.data),hasPreviousPage:b(a,t.data),isFetchNextPageError:i,isFetchingNextPage:P,isFetchPreviousPageError:g,isFetchingPreviousPage:l,isRefetchError:f&&!i&&!g,isRefetching:s&&!P&&!l}}};function q(e,a){return x(N,e)}function E(e){var c;if(e!=null&&e.queryKey)return e==null?void 0:e.queryKey;const a=y(),t=[];return(c=(e==null?void 0:e.path)??a.path)==null||c.split("/").slice(1).forEach(r=>{r.includes("?")?(t.push(r.split("?")[0]),t.push(r.split("?")[1].split("=")[1])):t.push(r)}),(e==null?void 0:e.queryKey)??t}function K(e){var c;const t=y();return q({...e,queryKey:(e==null?void 0:e.queryKey)??((e==null?void 0:e.path)??t.fullPath).split("/").slice(1),enabled:!!((c=O.value)!=null&&c.id)&&(e==null?void 0:e.enabled),retry:0,staleTime:e!=null&&e.keepForever?1/0:1e3*60*5,retryOnMount:!1,refetchOnMount:!0,refetchOnWindowFocus:!1,refetchOnReconnect:!0,initialPageParam:0,getNextPageParam:r=>r.has_more?r.next_page:void 0,getPreviousPageParam:r=>r.has_more?r.next_page-2:void 0,queryFn:({pageParam:r=0,signal:s})=>new Promise((h,f)=>M().get((e==null?void 0:e.path)??t.fullPath,{signal:s,params:{page:r,version:e==null?void 0:e.version,take:(e==null?void 0:e.limit)??3}}).then(u=>{h(u.data)}).catch(f))})}export{E as q,K as u};
