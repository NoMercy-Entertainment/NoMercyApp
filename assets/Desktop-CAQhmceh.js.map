{"version":3,"file":"Desktop-CAQhmceh.js","sources":["../../src/views/Search/Desktop.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport {onMounted, watch} from 'vue';\nimport {IonPage, IonContent, onIonViewWillEnter} from '@ionic/vue';\nimport {useRoute} from \"vue-router\";\n\nimport {setBackground, setColorPalette} from '@/store/ui';\n\nimport {\n  search,\n  searchValue,\n  searchType,\n  hasMoreResults,\n  fetchNextPage,\n  musicSearchResult,\n  videoSearchResult,\n} from '@/store/search';\nimport {greetingValue} from '@/config/global';\n\nimport ScrollContainer from \"@/Layout/Desktop/components/ScrollContainer.vue\";\nimport SearchCard from \"@/components/Cards/SearchCard.vue\";\nimport MoooomIcon from '@/components/Images/icons/MoooomIcon.vue';\nimport CosmosBg2 from '@/components/Images/CosmosBg2.vue';\n\nconst route = useRoute();\n\nonIonViewWillEnter(() => {\n  searchType.value = route.query.from == 'music' ? 'music' : 'video';\n  setColorPalette(null);\n  setBackground(null);\n  setTimeout(() => {\n    search.value.focus();\n  }, 100);\n});\n\nonMounted(() => {\n  searchType.value = route.query.from == 'music' ? 'music' : 'video';\n  setColorPalette(null);\n  setBackground(null);\n  setTimeout(() => {\n    search.value.focus();\n  }, 100);\n});\n\nwatch(searchType, () => {\n  setTimeout(() => {\n    if(searchValue.value?.length == 0) {\n      search.value.focus();\n    }\n  }, 100);\n});\n\n</script>\n\n<template>\n  <ion-page>\n    <ion-content :fullscreen=\"true\">\n      <div\n          :class=\"{\n            'w-available relative flex flex-col items-center gap-10 m-3 overflow-clip rounded-2xl transform-all duration-300 will-change-auto min-w-available': true,\n            'h-24 min-h-24 ': searchValue?.length > 0,\n            'h-[480px] min-h-[480px] ': searchValue?.length == 0\n          }\"\n      >\n        <CosmosBg2/>\n\n        <div v-if=\"greetingValue && searchValue?.length == 0\"\n             class=\"relative z-10 mt-12 flex flex-shrink-0 flex-grow-0 flex-col items-center justify-end gap-3\">\n          <p class=\"flex-shrink-0 flex-grow-0 text-7xl font-black\">\n            {{ $t(`Good ${greetingValue}`) }}!\n          </p>\n          <p class=\"flex-shrink-0 flex-grow-0 text-3xl font-medium\">\n            {{\n              searchType == 'video'\n                  ? $t('What would you like to see?')\n                  : $t('What would you like to listen to?')\n            }}\n          </p>\n        </div>\n\n        <div\n            class=\"flex justify-center items-center self-center flex-grow-0 flex-shrink-0 w-full sm:w-1/2 relative overflow-hidden gap-4 p-2 pr-0 rounded-[20px] border-2 bg-[#d7dbdf] border-[#eceef0] dark:bg-black dark:border-[#202425]\"\n            :class=\"{\n              'mb-auto' : searchValue?.length == 0,\n              'my-auto' : searchValue?.length > 0,\n            }\">\n          <div\n              class=\"flex flex-col justify-start items-start flex-grow-0 flex-shrink-0 gap-2 p-1 rounded-xl bg-[#012139]/[0.13] dark:bg-[#dfeffe]/[0.14] backdrop-blur\"\n          >\n            <div class=\"relative flex justify-center items-start flex-grow-0 flex-shrink-0 gap-2\">\n              <div class=\"absolute w-[117px] h-available inset-0 bg-focus z-0 rounded-lg transition-all duration-150\"\n                   :class=\"{\n                      'translate-x-0': searchType == 'video',\n                      'translate-x-[107%]': searchType == 'music',\n                    }\"\n              ></div>\n              <button @click=\"searchType = 'video'\"\n                      class=\"flex justify-center items-center flex-grow-0 flex-shrink-0 relative gap-2 pl-3 pr-4 py-3 rounded-lg w-[117px]\"\n                      :class=\"{\n                         'text-slate-dark-12': searchType == 'video',\n                      }\"\n              >\n                <MoooomIcon icon=\"film\" class=\"h-6 w-6 flex-grow-0 flex-shrink-0 transition-all duration-150\"/>\n                <p class=\"hidden sm:flex flex-grow-0 flex-shrink-0 text-xl font-semibold text-left transition-all duration-150\">\n                  {{ $t('Video') }}\n                </p>\n              </button>\n              <button @click=\"searchType = 'music'\"\n                      class=\"flex justify-center items-center flex-grow-0 flex-shrink-0 relative gap-2 pl-3 pr-4 py-3 rounded-lg w-[117px]\"\n                      :class=\"{\n                         'text-slate-dark-12': searchType == 'music',\n                      }\"\n              >\n                <MoooomIcon icon=\"noteDouble\" class=\"h-6 w-6 flex-grow-0 flex-shrink-0 transition-all duration-150\"/>\n                <p class=\"hidden sm:flex flex-grow-0 flex-shrink-0 text-xl font-semibold text-left transition-all duration-150\">\n                  {{ $t('Music') }}\n                </p>\n              </button>\n            </div>\n          </div>\n\n          <label class=\"flex w-available mr-1\">\n            <input id=\"search\"\n                   :placeholder=\"searchType == 'video'\n                              ? `${$t('Movie')}, ${$t('Show')} ${$t('or')} ${$t('Person')}...`\n                              : `${$t('Artist')}, ${$t('Album')} ${$t('or')} ${$t('Track')}...`\"\n                   class=\"w-available flex-shrink-0 border-transparent bg-transparent px-2 py-1 text-2xl shadow-transparent flex-grow-1\n                   focus: outline-none\"\n                   v-model=\"searchValue\" name=\"search\" type=\"search\" ref=\"search\" autocomplete=\"off\"/>\n          </label>\n        </div>\n      </div>\n\n      <div v-if=\"searchType == 'video' && videoSearchResult.length > 0\"\n           class=\"flex w-full flex-col gap-4 p-1 h-available overflow-hidden sm:px-4 sm:py-0\">\n\n        <div class=\"grid grid-cols-3 gap-2 sm:gap-4 h-min overflow-hidden\">\n          <template v-for=\"type in ['movie', 'tv', 'person']\" :key=\"type\">\n\n            <div class=\"relative flex flex-col gap-2 sm:gap-4 h-available overflow-hidden\">\n\n              <p class=\"flex-shrink-0 flex-grow-0 text-2xl font-semibold text-left\">\n                {{ $t(type.replace('tv', 'show').toTitleCase()) }}\n              </p>\n\n              <div class=\"relative h-available overflow-hidden -mt-2\">\n                <ScrollContainer :static=\"false\">\n                  <div class=\"flex flex-col gap-2 sm:gap-4 h-min mr-6 mt-2\">\n                    <template v-for=\"item in (videoSearchResult ?? []).filter(r => r.media_type == type)\"\n                              :key=\"item.id\">\n                      <SearchCard :item=\"item\" />\n                    </template>\n                  </div>\n\n                  <div class=\"z-50 flex justify-center mt-3\" ref=\"loadMore\"\n                       v-if=\"hasMoreResults && videoSearchResult.length > 0\">\n                    <button @click=\"fetchNextPage()\" class=\"h-12 rounded bg-focus px-4 py-2 text-white\">\n                      {{ $t('Load more') }}\n                    </button>\n                  </div>\n                </ScrollContainer>\n              </div>\n            </div>\n          </template>\n        </div>\n        <!--        <div class=\"z-50 flex justify-center mb-4\" ref=\"loadMore\" v-if=\"hasMoreResults && videoSearchResult.length > 0\">-->\n        <!--          <button @click=\"fetchNextPage()\" class=\"h-12 rounded bg-focus px-4 py-2 text-white\">-->\n        <!--            {{ $t('Load more') }}-->\n        <!--          </button>-->\n        <!--        </div>-->\n      </div>\n      <div v-else-if=\"musicSearchResult\"\n           class=\"flex w-full flex-col p-1 h-available sm:p-4 sm:pt-0 overflow-auto\">\n        <component v-for=\"(render, index) in musicSearchResult ?? []\" :index=\"index\" :key=\"render.id\"\n                   :is=\"render.component\" v-bind=\"render.props\"/>\n      </div>\n    </ion-content>\n  </ion-page>\n</template>\n\n<style scoped>\nion-content::part(scroll) {\n  display: flex;\n  flex-direction: column;\n  @apply h-available overflow-hidden;\n}\n</style>"],"names":["route","useRoute","onIonViewWillEnter","searchType","setColorPalette","setBackground","search","onMounted","watch","_a","searchValue"],"mappings":"glDAuBA,MAAMA,EAAQC,EAAS,EAEvB,OAAAC,EAAmB,IAAM,CACvBC,EAAW,MAAQH,EAAM,MAAM,MAAQ,QAAU,QAAU,QAC3DI,EAAgB,IAAI,EACpBC,EAAc,IAAI,EAClB,WAAW,IAAM,CACfC,EAAO,MAAM,MAAM,GAClB,GAAG,CAAA,CACP,EAEDC,EAAU,IAAM,CACdJ,EAAW,MAAQH,EAAM,MAAM,MAAQ,QAAU,QAAU,QAC3DI,EAAgB,IAAI,EACpBC,EAAc,IAAI,EAClB,WAAW,IAAM,CACfC,EAAO,MAAM,MAAM,GAClB,GAAG,CAAA,CACP,EAEDE,EAAML,EAAY,IAAM,CACtB,WAAW,IAAM,SACZM,EAAAC,EAAY,QAAZ,YAAAD,EAAmB,SAAU,GAC9BH,EAAO,MAAM,MAAM,GAEpB,GAAG,CAAA,CACP"}