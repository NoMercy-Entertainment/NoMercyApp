import{Y as D,a4 as E,d as k,w as C,f as O,h as d,o as i,y as h,l as v,i as o,Z as m,aZ as Z,t as u,B as I,v as b,a_ as M,c as q,x as Y,a$ as G,F as H,p as J,b0 as K,b1 as P,b as Q}from"./vue-ionic-Cb5qD3-A.js";import{bq as V}from"./index-Cwse5Pwc.js";import{_}from"./OptimizedIcon.vue_vue_type_script_setup_true_lang-BgDponKe.js";const R={class:"relative w-full"},W={key:0,class:"flex items-center self-center"},X=["src","onerror","alt"],ee={class:"ml-3 block truncate text-left"},ae={key:1,class:"flex items-center self-center"},te={key:0,class:"ml-3 block truncate text-left"},ne={key:1,class:"ml-3 block truncate text-left"},le={class:"ml-2 flex items-center self-center"},se=["src","onerror","alt"],ue=D({__name:"LanguageSelect",props:{modelValue:{type:Object,required:!0},name:{type:String,required:!0},id:{type:String,required:!0},multiple:{type:Boolean,required:!1,default:!1},variant:{type:String,required:!1,default:"normal"},languages:{type:Array,required:!1}},emits:["update:modelValue"],setup(a,{emit:U}){const x=a,z=U,{t:$}=E(),t=k(x.modelValue),w=k(""),g=k([]),c=k(x.languages??[]);return C(x,n=>{n.languages&&(c.value=n.languages)}),C(t,n=>{n&&z("update:modelValue",n)}),C(c,n=>{var s;n&&(x.multiple?g.value=n:g.value=w.value===""?n.filter(e=>V.includes(e.iso_639_1))??[]:((s=n.filter(e=>V.includes(e.iso_639_1)))==null?void 0:s.filter(e=>e.english_name.toLowerCase().includes(w.value.toLowerCase())))??[])}),O(()=>{var n;c.value&&(x.multiple?g.value=c.value:g.value=w.value===""?c.value.filter(s=>V.includes(s.iso_639_1))??[]:((n=c.value.filter(s=>V.includes(s.iso_639_1)))==null?void 0:n.filter(s=>s.english_name.toLowerCase().includes(w.value.toLowerCase())))??[])}),(n,s)=>(i(),d("div",R,[h(m(K),{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=e=>t.value=e),as:"div",multiple:a.multiple,onChange:s[1]||(s[1]=e=>{var r;return n.$emit("update:modelValue",(r=e.target)==null?void 0:r.value)})},{default:v(()=>[h(m(Z),{class:u(["block select-none space-nowrap empty:hidden",{"mb-1 text-sm font-medium":a.variant==="normal","mb-0.5 text-sm font-medium":a.variant==="dense","mb-px text-xs font-thin":a.variant==="tight"}])},{default:v(()=>[I(b(m($)(a.name)),1)]),_:1},8,["class"]),o("div",{class:u(["relative",{"h-10 min-h-10 mt-2":a.variant==="normal","h-8 min-h-8 mt-1":a.variant==="dense","h-7 min-h-7 mt-0":a.variant==="tight"}])},[h(m(M),{class:u(["relative flex items-center w-full cursor-default rounded-md shadow-sm sm:text-sm data-[headlessui-state='disabled']:grayscale *:data-[headlessui-state='disabled']:hidden",{"!bg-auto-1 ring-[1.5px] ring-inset ring-auto-3 focus:outline-none focus:ring-2 focus:ring-focus data-[headlessui-state='open']:ring-2 data-[headlessui-state='open']:ring-focus":a.variant==="normal"||a.variant==="dense","h-10 min-h-10 pl-3":a.variant==="normal","h-8 min-h-8 pl-2":a.variant==="dense","h-5 min-h-5 pl-0":a.variant==="tight"}])},{default:v(()=>{var e,r,f,p,y,B,L,S,j,A,N,T,F;return[Array.isArray(t.value)?(i(),d("span",ae,[((N=t.value)==null?void 0:N.length)>4?(i(),d("span",te,b((T=t.value)==null?void 0:T.length)+" "+b(m($)("selected")),1)):(i(),d("span",ne,b((F=t.value.map(l=>(l==null?void 0:l.name)!==""&&(l==null?void 0:l.name)!==null?l==null?void 0:l.name:l==null?void 0:l.english_name))==null?void 0:F.join(", ")),1))])):(i(),d("span",W,[o("img",{src:`https://pub-a68768bb5b1045f296df9ea56bd53a7f.r2.dev/flags/${(r=(e=t.value)==null?void 0:e.iso_639_1)==null?void 0:r.toUpperCase()}.svg`,onerror:l=>{l.target.onerror=null,l.target.src="https://pub-a68768bb5b1045f296df9ea56bd53a7f.r2.dev/flags/xxx.svg"},alt:`${((f=t.value)==null?void 0:f.name)!==""&&((p=t.value)==null?void 0:p.name)!==null?(y=t.value)==null?void 0:y.name:(B=t.value)==null?void 0:B.english_name} flag`,class:"h-auto w-6 rounded-sm border border-auto-50 group-hover:border-theme-600"},null,8,X),o("span",ee,b(((L=t.value)==null?void 0:L.name)!==""&&((S=t.value)==null?void 0:S.name)!==null?(j=t.value)==null?void 0:j.name:(A=t.value)==null?void 0:A.english_name),1)])),o("span",{class:u(["absolute inset-y-0 right-0 flex h-auto items-center rounded-r-md min-h-auto focus-visible:outline-transparent",{"h-10 min-h-10 px-3":a.variant==="normal","h-8 min-h-8 px-2":a.variant==="dense",hidden:a.variant==="tight"}])},[a.multiple?(i(),q(_,{key:0,icon:"arrowSelect","class-name":"w-5 ui-open:rotate-180 transition-transform duration-200"})):(i(),q(_,{key:1,icon:"chevronDown","class-name":"w-5 ui-open:rotate-180 transition-transform duration-200"}))],2)]}),_:1},8,["class"]),h(Y,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:v(()=>[h(m(G),{class:u(["absolute z-10 h-auto max-h-56 min-w-fit overflow-auto rounded-md text-base shadow-lg ring-1 ring-black ring-opacity-5 min-h-auto w-available bg-auto-1 focus:outline-none sm:text-sm",{"py-2 px-3":a.variant==="normal","py-1 px-2":a.variant==="dense","py-0.5 px-1.5":a.variant==="tight"}])},{default:v(()=>[(i(!0),d(H,null,J(g.value,e=>(i(),q(m(P),{key:e.iso_639_1,as:"template",value:e},{default:v(({active:r,selected:f})=>{var p;return[o("li",{class:u(["relative flex w-full min-w-fit cursor-default select-none items-center rounded-sm",{"!bg-focus text-auto-12 ":r,"text-contrast":!r,"h-8 min-h-8":a.variant==="normal","h-6 min-h-6":a.variant==="dense"}])},[o("div",le,[o("img",{src:`https://pub-a68768bb5b1045f296df9ea56bd53a7f.r2.dev/flags/${(p=e==null?void 0:e.iso_639_1)==null?void 0:p.toUpperCase()}.svg`,onerror:y=>{y.target.onerror=null,y.target.src="https://pub-a68768bb5b1045f296df9ea56bd53a7f.r2.dev/flags/xxx.svg"},alt:`${e.name!==""&&e.name!==null?e.name:e.english_name} flag`,class:"h-auto w-6 rounded-sm border border-auto-1 group-hover:border-theme-600"},null,8,se),o("span",{class:u(["mx-3 block truncate text-left",{"font-semibold":f,"font-normal":!f}])},b(e.name!==""&&e.name!==null?e.name:e.english_name),3)]),f?(i(),d("span",{key:0,class:u(["absolute right-0 flex items-center justify-center pr-4 data-[headlessui-state='disabled']:hidden",{"text-auto-50":r,"text-focus":!r}])},[h(_,{icon:"check",class:"h-5 w-5","aria-hidden":"true"})],2)):Q("",!0)],2)]}),_:2},1032,["value"]))),128))]),_:1},8,["class"])]),_:1})],2)]),_:1},8,["modelValue","multiple"])]))}});export{ue as _};
