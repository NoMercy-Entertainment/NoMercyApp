import{Y as O,aa as R,d,w as C,f as Q,a5 as W,c as L,o as f,l as I,y as H,Z as s,ar as Y,h as M,b as Z,i as m,t as V,F as D,p as G,an as J,Q as K}from"./vue-ionic-D3xJGFcP.js";import{u as U}from"./useServerClient-DE6jxTTP.js";import{bO as g,bP as v,d as z,bC as X,bQ as ee,bR as te,a0 as oe}from"./index-m4cPkZcj.js";import{_ as ae,a as re,S as se,b as le}from"./TrackRow.vue_vue_type_script_setup_true_lang-BHuUkY8e.js";import{_ as ie}from"./OptimizedIcon.vue_vue_type_script_setup_true_lang-BW90dOSz.js";import{_ as ne}from"./NotFound.vue_vue_type_script_setup_true_lang-C19PiEr3.js";import"./vendor-CKnYbqeP.js";import"./icons-BW5E66pf.js";import"./rxjs-BCp2L9Rn.js";import"./media-C2AqgyMX.js";import"./api-BBofn2cc.js";import"./swiper-D00Cnjmx.js";import"./useInfiniteServerClient-B1gkYmgo.js";import"./music-player-Ct3VsQMm.js";import"./BigPlayButton.vue_vue_type_script_setup_true_lang-Cc5jw0HO.js";import"./PlayerIcon.vue_vue_type_script_setup_true_lang-Dw33TbDI.js";import"./MusicButton.vue_vue_type_script_setup_true_lang-CEKb7rDL.js";import"./MediaLikeButton-tsNhNPn1.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ShareButton.vue_vue_type_script_setup_true_lang-DpWi2eQp.js";import"./FavoriteImage.vue_vue_type_script_setup_true_lang-BomyiUks.js";import"./CoverImage.vue_vue_type_script_setup_true_lang-z7AjfzVU.js";import"./AppLogoSquare-C-yBYgP-.js";import"./contextMenuItems-BtDfovVa.js";import"./musicPlaylists-BDJhizOv.js";import"./EqSpinner-DKLuTFlk.js";import"./TrackLinks.vue_vue_type_script_setup_true_lang-Dm6W_CCS.js";import"./DropdownMenu.vue_vue_type_script_setup_true_lang-K111P0Jb.js";import"./BannerButton.vue_vue_type_script_setup_true_lang-N5cMGulO.js";import"./Marquee.vue_vue_type_script_setup_true_lang-Cr1ECvDQ.js";const ce={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},pe=["innerHTML"],de={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-slate-dark-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},Re=O({__name:"Mobile",setup(fe){const T=R(),{data:a,isError:j}=U({path:T.fullPath}),q=d(null),S=d(),c=d("");C(a,o=>{var t;oe((o==null?void 0:o.name)??null),u((o==null?void 0:o.tracks)??[],v.value,g.value,c.value),z((t=o==null?void 0:o.color_palette)==null?void 0:t.cover)}),C(g,o=>{var t;u(((t=a.value)==null?void 0:t.tracks)??[],v.value,o,c.value)}),C(v,o=>{var t;u(((t=a.value)==null?void 0:t.tracks)??[],o,g.value,c.value)}),C(c,o=>{var t;u(((t=a.value)==null?void 0:t.tracks)??[],v.value,g.value,o)});const u=(o,t,i,e)=>{const r=ee(o??[],t,i,te);e==""?S.value=r:S.value=(r==null?void 0:r.filter(n=>{var l,p,_,x,h,y;return((p=n.name)==null?void 0:p.toLowerCase().includes((l=e==null?void 0:e.toLowerCase)==null?void 0:l.call(e)))||((_=n.artist_track)==null?void 0:_.some(B=>{var w;return B.name.toLowerCase().includes((w=e==null?void 0:e.toLowerCase)==null?void 0:w.call(e))}))||((y=(x=n.album_track)==null?void 0:x[0])==null?void 0:y.name.toLowerCase().includes((h=e==null?void 0:e.toLowerCase)==null?void 0:h.call(e)))}))??[]};Q(()=>{var o,t,i,e,r;u(((o=a==null?void 0:a.value)==null?void 0:o.tracks)??[],v.value,g.value,c.value),(i=(t=a.value)==null?void 0:t.color_palette)!=null&&i.cover&&z((r=(e=a.value)==null?void 0:e.color_palette)==null?void 0:r.cover)}),W(()=>{var o,t,i,e,r;u(((o=a==null?void 0:a.value)==null?void 0:o.tracks)??[],v.value,g.value,c.value),(i=(t=a.value)==null?void 0:t.color_palette)!=null&&i.cover&&z((r=(e=a.value)==null?void 0:e.color_palette)==null?void 0:r.cover)});const A=()=>{window.history.back()},k=d(!1),N=d(!1),b=d(),F=d(),$=()=>{var r,n,l,p,_,x,h,y,B,w,P,E;const i=K("capacitor")?88:64,e=(n=(r=b.value)==null?void 0:r.$el)==null?void 0:n.getBoundingClientRect().top;if(!e){requestAnimationFrame($);return}k.value=e<=170,N.value=e<=160,e==i?((p=(l=b.value)==null?void 0:l.$el)==null||p.classList.add("!bg-focus"),(h=(x=(_=b.value)==null?void 0:_.$el)==null?void 0:x.firstChild)==null||h.classList.add("!bg-slate-light-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")):((B=(y=b.value)==null?void 0:y.$el)==null||B.classList.remove("!bg-focus"),(E=(P=(w=b.value)==null?void 0:w.$el)==null?void 0:P.firstChild)==null||E.classList.remove("!bg-slate-light-10/11","dark:!bg-[rgb(var(--background-auto)/79%)]")),requestAnimationFrame($)};return C(F,()=>{requestAnimationFrame($)}),(o,t)=>(f(),L(s(J),null,{default:I(()=>[H(s(Y),{ref_key:"container",ref:F,onIonScroll:$,scrollEvents:!0},{default:I(()=>{var i,e,r,n;return[s(j)&&!s(a)?(f(),L(ne,{key:0})):!s(T).params.id||s(T).params.id&&((i=s(a))==null?void 0:i.id)==s(T).params.id?(f(),M("div",{key:1,ref_key:"main",ref:q,class:"flex flex-col h-auto overflow-x-clip w-available sm:rounded-2xl -mt-safe-offset-12 bg-[rgb(var(--background-auto))]"},[H(ae,{data:s(a)},null,8,["data"]),m("div",ce,[t[2]||(t[2]=m("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom bg-focus"},null,-1)),m("div",{id:"navbar",class:V(["fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-slate-light-11 dark:bg-slate-dark-1 top-0 pt-safe-offset-4 transition-all duration-200",{"opacity-0 pointer-events-none":!k.value,"opacity-100 pointer-events-auto":k.value}])},[t[1]||(t[1]=m("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-all duration-200 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),m("button",{onClick:A,class:"z-30 flex h-10 w-11 items-center justify-center rounded-md"},[H(ie,{icon:"arrowLeft"})]),m("div",{id:"navText",class:V(["pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-all duration-200 w-[70%] overflow-clip text-xl",{"opacity-0 pointer-events-none":!k.value,"opacity-100 pointer-events-auto":k.value}]),innerHTML:s(X)(((e=s(a))==null?void 0:e.name)??"Songs you like","text-xs line-clamp-1")},null,10,pe)],2),(f(),L(re,{key:(r=s(a))==null?void 0:r.id,data:s(a),filter:c.value,onFilterChange:t[0]||(t[0]=l=>c.value=l)},null,8,["data","filter"])),m("div",de,[(f(),L(se,{ref_key:"sortHeader",ref:b,key:(n=s(a))==null?void 0:n.id})),(f(!0),M(D,null,G(S.value,(l,p)=>(f(),L(le,{key:l.id+(l==null?void 0:l.favorite),data:l,displayList:S.value,index:p},null,8,["data","displayList","index"]))),128))])])],512)):Z("",!0)]}),_:1},512)]),_:1}))}});export{Re as default};
