import{$ as j,ab as G,f as M,w as B,B as K,aG as U,d as g,aM as A,c as d,o as r,p as x,z as H,a0 as o,au as J,h as u,v as N,j as O,F as m,q as I,b as P,ar as Q}from"./vue-ionic-Db_NiJFp.js";import{_ as W,f as R,e as X,b as Y,r as S,i as v,d as h}from"./index-CH0I4ZsZ.js";import{u as Z}from"./useInfiniteServerClient-DDuYcdud.js";import{_ as ee}from"./NMCard.vue_vue_type_script_setup_true_lang-Bf6FJBGU.js";import{_ as ae}from"./PersonCard.vue_vue_type_script_setup_true_lang-CBa5nymI.js";import{_ as oe,a as re}from"./EmptyCard.vue_vue_type_script_setup_true_lang-Crj8usdN.js";import{_ as te}from"./ScrollContainer.vue_vue_type_script_setup_true_lang-TEfEQEY_.js";import{_ as ne}from"./NotFound.vue_vue_type_script_setup_true_lang-ds4Z0OwI.js";import"./vendor-Dgtccx1h.js";import"./icons-BW5E66pf.js";import"./rxjs-BCp2L9Rn.js";import"./media-C2AqgyMX.js";import"./api-BBofn2cc.js";import"./swiper-D00Cnjmx.js";import"./music-player-bBxcOCLu.js";import"./primevue-Bn7Q4nqF.js";import"./contextMenuItems-BCgW0O1O.js";import"./musicPlaylists-CGhRwZ4V.js";import"./TMDBImage.vue_vue_type_script_setup_true_lang-CcMK6W7S.js";import"./AppLogoSquare-KpTTA6Sb.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./CardIndicator.vue_vue_type_script_setup_true_lang-C8IICOUC.js";import"./OptimizedIcon.vue_vue_type_script_setup_true_lang-DHzcpnxP.js";import"./NoResultImage.vue_vue_type_script_setup_true_lang-BXXdeNuj.js";const se="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",le="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",Se=j({__name:"Desktop",setup(de){const i=G(),{data:n,fetchNextPage:y,hasNextPage:k,isError:T}=Z({queryKey:["libraries",(i==null?void 0:i.params.id)??i.name],limit:20,keepForever:!0});M(()=>{W(),R(null),X(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),B(n,a=>{a&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const V=K(()=>{var t,l,s,c;const a=(c=(s=(l=(t=n.value)==null?void 0:t.pages)==null?void 0:l[0])==null?void 0:s.data)==null?void 0:c[0];return a&&Y.value&&a.media_type!=="person"&&a.media_type!=="genres"});U(()=>{stop(),R(null)});const z=g(),D=g();M(()=>{var a,t;D.value=i.params.id??i.name,k.value&&(((t=(a=n==null?void 0:n.value)==null?void 0:a.pages)==null?void 0:t.length)??0)<50&&y(),document.addEventListener("scrollToDiv",l=>{var s;(s=z.value)==null||s.scrollTo({top:l.detail.top-100,behavior:"smooth"})})}),A(()=>{document.dispatchEvent(new Event("indexer"))}),B(n,a=>{var t;a&&k.value&&((t=a==null?void 0:a.pages)==null?void 0:t.length)<50&&y()});const F=g(),q=g();function f(a,t){F.value=t,q.value.show(a)}return(a,t)=>(r(),d(o(Q),null,{default:x(()=>[H(o(J),{fullscreen:!0},{default:x(()=>{var l;return[o(T)&&!((l=o(n))!=null&&l.pages)?(r(),d(ne,{key:0})):(r(),d(te,{key:1,id:o(S).currentRoute.value.fullPath,"auto-hide":!0,static:!0},{default:x(()=>{var s,c;return[(r(),u("div",{ref:"containerRef",key:(s=o(S).currentRoute.value.params)==null?void 0:s.id,class:N(["z-0 flex flex-col gap-4 rounded-3xl border-0 p-4 w-available scrollbar-none border-auto-3 transform-gpu will-change-auto",{"pb-24":o(v)&&!o(h),"pb-40":o(v)&&o(h),"children:pb-4 sm:children:pb-3":!o(v)&&o(h)}])},[O("div",{class:N(`grid w-full gap-4 scroll-smooth music-showing:pb-0 whitespace-pre ${V.value?se:le}`)},[(r(!0),u(m,null,I(((c=o(n))==null?void 0:c.pages)??[],(b,L)=>{var w,C,E,$;return r(),u(m,{key:L},[b.data.length>0?(r(!0),u(m,{key:0},I(b.data??[],(e,_)=>(r(),u(m,null,[(e==null?void 0:e.media_type)==="tv"||(e==null?void 0:e.media_type)==="movie"||(e==null?void 0:e.media_type)==="collection"||(e==null?void 0:e.media_type)==="specials"?(r(),d(ee,{key:e.id,data:e,index:_,onContextMenu:p=>f(p,e)},null,8,["data","index","onContextMenu"])):(e==null?void 0:e.media_type)==="person"?(r(),d(ae,{key:`${e.id}_person`,data:e,index:_,onContextMenu:p=>f(p,e)},null,8,["data","index","onContextMenu"])):(e==null?void 0:e.media_type)==="genres"?(r(),d(oe,{key:`${e.id}_genres`,data:e,index:_,onContextMenu:p=>f(p,e)},null,8,["data","index","onContextMenu"])):P("",!0)],64))),256)):(($=(E=(C=(w=o(n))==null?void 0:w.pages)==null?void 0:C[0])==null?void 0:E.data)==null?void 0:$.length)===0?(r(),d(re,{key:1})):P("",!0)],64)}),128))],2)],2))]}),_:1},8,["id"]))]}),_:1})]),_:1}))}});export{Se as default};
