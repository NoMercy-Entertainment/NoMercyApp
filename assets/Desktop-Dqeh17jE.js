import{$ as O,At as p,C as d,Dt as j,Et as t,K as X,S as l,T as f,Y as r,Z as P,_t as R,c as ee,g as T,j as te,k as u,kt as i,lt as m,n as ae,q as re,st as le,w as n,x as g}from"./i18n-DXLa9EKW.js";import"./ionic-B9XaRwPa.js";import{S as se,x as oe,y as ie}from"./vue-core-DBpBuPMK.js";import{w as ne}from"./primevue-wrrgrfJj.js";import"./query-DJ5OsBey.js";import{Br as E,Gn as x,Kn as k,Qi as y,Si as s,Sr as de,b,bi as ue,ha as M,ir as ce,n as A,qn as w,ua as fe,v as pe}from"./index-CLM6Y7vI.js";import"./useInfiniteServerClient-DbihGahL.js";import{t as me}from"./useServerClient-QYfn39K-.js";import{o as I}from"./sidebar-LHAvD8Rt.js";import{t as ve}from"./ScrollContainer-aZQSs5X2.js";import"./MusicButton-E8_BNXYz.js";import{t as $}from"./BannerButton-BP0Yr5ty.js";import{t as he}from"./MediaLikeButton-CTr1VNS5.js";import"./swiper-DkXT2e8s.js";import"./CardIndicator-CN-BcQKi.js";import{t as _e}from"./NMCard-j-QTt5GV.js";import"./swiper-config-BqkNjSI4.js";import{t as ge}from"./dist-bb6H8N6c.js";import{t as ye}from"./FloatingBackButton-BrTpeYvl.js";import{n as xe,t as ke}from"./ContentRating-UDLHof_-.js";import{t as C}from"./InfoHeaderItem-BRJ5PBcS.js";import{t as be}from"./NotFound-BTw0r7lj.js";import{t as we}from"./ShareButton-fPfMKtEf.js";import"./Carousel-B9m9x-iy.js";import"./PersonCard-D-H9ekYc.js";import{n as L,t as H}from"./ImageCarousel-D3BZXPjH.js";import{t as Ce}from"./ListControlHeaderMoreMenu-lfEmRt9H.js";ee();ie();var N=ge(),Se={class:"z-0 flex flex-col gap-4 rounded-3xl border-0 w-available scrollbar-none border-surface-3 text-surface-12/70 dark:text-surface-12/80"},ze={class:"flex flex-col gap-4 overflow-clip rounded-3xl border-0 pb-2 w-available scrollbar-none border-surface-3"},De={key:0,class:"flex flex-col relative mx-auto w-full gap-4 rounded-lg p-4 max-w-screen-4xl justify-end min-h-[calc(100vh-6rem)] z-10"},Be={class:"z-0 flex w-full flex-grow flex-col items-end justify-end gap-2"},je={class:"tv:group-focus-visible/card:bg-black/3 absolute z-20 grid h-available w-full items-center transition-transform duration-200 opacity-0 [background:radial-gradient(75%_50%_at_50%_50%,_rgba(0,_0,_0,_0.40)_0%,_rgba(0,_0,_0,_0.00)_100%),_rgba(0,_0,_0,_0.09)] mx-auto group-hover/card:opacity-100"},Pe={class:"inset-0 grid group-hover/card:grid h-full w-full place-content-center group-focus-visible/card:bg-none group-hover/card:bg-none text-5xl text-transparent transition-transform duration-200 group-focus-visible/card:transitioning group-hover/card:text-surface-12"},Re={class:"col-start-1 content-center col-end-2 mt-auto bottom-6 left-8 w-full flex-shrink-0 select-none flex-grow-0 text-sm text-surface-12/70 dark:text-surface-12/80"},Te={class:"col-start-2 col-end-4 flex w-full flex-grow flex-col items-start justify-start gap-4"},Ee={class:"relative flex flex-shrink-0 flex-grow-0 items-end justify-end gap-4 self-stretch"},Me={class:"flex-grow text-5xl font-bold fade-up",style:{"animation-delay":"600ms","font-size":"clamp(1.25rem, 2.309vw + 0.652rem, 2rem)","line-height":"clamp(1.875rem, 2.54vw + 1.218rem, 2.75rem)"}},Ae={class:"relative flex flex-shrink-0 flex-grow-0 items-end justify-end gap-4"},Ie={class:"flex flex-shrink-0 items-center justify-start gap-4 self-stretch"},$e={class:"flex-shrink-0 text-sm font-bold uppercase"},Le={class:"flex-shrink-0 flex-grow-0 text-sm font-bold uppercase"},He={class:"flex-shrink-0 flex-grow-0 text-sm font-bold uppercase"},Ne={class:"relative flex flex-col items-start justify-start gap-2 self-stretch"},qe=30,Fe=te({__name:"Desktop",setup(Ke){const v=oe(),q=se(),{t:F}=ae(),c=ne();function o(a){return`animation-delay: ${a*qe}ms`}const{data:e,isError:K}=me({queryKey:["base","collection",v.params.id],limit:1e3,keepForever:!0}),_=R(null),S=R(null);le(e,a=>{a&&(a?.backdrop&&x(a?.backdrop),a?.color_palette&&k(a.color_palette.backdrop),a?.logo&&w(a?.logo),_.value=a.duration&&new Date(new Date().getTime()+a.duration*60*1e3).toLocaleTimeString(M.language??"en-US",{hour:"2-digit",minute:"2-digit"}),S.value=setInterval(()=>{_.value=a.duration&&new Date(new Date().getTime()+a.duration*60*1e3).toLocaleTimeString(M.language??"en-US",{hour:"2-digit",minute:"2-digit"})},1e3))}),X(()=>{document.dispatchEvent(new Event("sidebar")),ue(e?.value?.title),e?.value?.backdrop&&x(e?.value?.backdrop),e?.value?.color_palette&&k(e?.value?.color_palette.backdrop),e?.value?.logo&&w(e?.value?.logo)}),re(()=>{x(null),k(null),w(null),clearInterval(S.value??void 0)});const U=g(()=>({url:`https://app.nomercy.tv${v.fullPath}`})),z=g(()=>e.value?.total_duration?ce(F,e.value.total_duration??0,!0):null),D=g(()=>`${(0,N.collect)(e.value?.collection).min("year")} - ${(0,N.collect)(e.value?.collection).max("year")}`);function V(){}function G(){y().post(`${v.fullPath}/rescan`).then(({data:a})=>{c.add({severity:a.status==="ok"?"success":"error",summary:s("Success"),detail:s(a.message,...a.args),life:5e3})}).catch(()=>{c.add({severity:"error",summary:s("error"),detail:s("An error occurred while rescanning the library folders"),life:5e3})})}function Q(){y().post(`${v.fullPath}/refresh`).then(({data:a})=>{c.add({severity:a.status==="ok"?"success":"error",summary:s(a.status==="ok"?"Success":"Error"),detail:s(a.message,...a.args),life:5e3})}).catch(()=>{c.add({severity:"error",summary:s("Error"),detail:s("An error occurred while rescanning the library folders"),life:5e3})})}function W(){y().delete(`${v.fullPath}`).then(({data:a})=>{c.add({severity:a.status==="ok"?"success":"error",summary:s(a.status==="ok"?"Success":"Error"),detail:s(a.message,...a.args),life:5e3})}).catch(()=>{c.add({severity:"error",summary:s("error"),detail:s("An error occurred while rescanning the library folders"),life:5e3})})}function Y(){y().post(`${v.fullPath}/add`).then(({data:a})=>{c.add({severity:a.status==="ok"?"success":"error",summary:s(a.status==="ok"?"Success":"Error"),detail:s(a.message,...a.args),life:5e3})}).catch(()=>{c.add({severity:"error",summary:s("Error"),detail:s("An error occurred while rescanning the library folders"),life:5e3})})}const Z=g(()=>[{icon:"arrowRefreshHorizontal",onclick:G,title:"Rescan files",privileged:!0},{icon:"arrowRefreshHorizontal",onclick:Q,title:"Refresh data",privileged:!0},{icon:"folderAdd",onclick:Y,title:`Add ${e?.value?.media_type}`,privileged:!0},{icon:"folderRemove",onclick:W,title:`Delete ${e?.value?.media_type}`,privileged:!0},{icon:"edit",onclick:()=>{q.push(`/dashboard/specials/${e?.value?.id}`)},title:"Edit metadata"}]);return(a,B)=>{const J=O("RouterLink");return t(K)&&!t(e)?(r(),d(be,{key:0})):(r(),d(ve,{key:1,"auto-hide":!0,static:!0},{default:m(()=>[l("div",Se,[l("div",ze,[u(ye),t(e)?(r(),f("div",De,[B[0]||(B[0]=l("div",{class:"z-0 flex w-full flex-grow flex-col min-h-40"},null,-1)),l("div",Be,[l("div",{style:i(o(0)),class:"children:absolute relative right-1 bottom-0 col-start-1 col-end-2 flex h-auto w-auto select-none justify-end pb-2 max-w-[20vw] w-available translate-x-[4px] sm:h-40 lg:max-w-[30vw] aspect-[32/9] fade-up"},[t(e)?.logo?(r(),d(A,{key:t(e)?.logo,"auto-shadow":!0,path:t(e)?.logo,right:!0,shadow:t(de)(t(e)?.color_palette?.poster),size:500,title:t(e)?.title,class:"pointer-events-none relative mx-auto flex h-full w-full select-none place-self-start overflow-hidden p-4 items-end justify-end","class-name":"relative bottom-0 h-auto w-auto p-4",type:"logo"},null,8,["path","shadow","title"])):n("",!0)],4),l("div",{style:i(o(2)),class:"relative grid flex-shrink-0 flex-grow-0 grid-cols-3 items-start justify-start self-stretch rounded-2xl bg-gradient-to-b p-6 from-surface-1/12 via-surface-2/12 to-surface-2/11 border-surface-5/8 border-1 min-h-[23.5rem] fade-up"},[t(e)?.poster?(r(),f("div",{key:0,style:i(o(11)),class:"absolute z-10 col-start-1 col-end-2 h-auto w-full items-start justify-start rounded-lg top-0 -translate-y-[35%] sm:block fade-up"},[u(J,{"aria-label":a.$t("Play"),class:j([{" 4xl:-mt-10 5xl:-mt-20 6xl:-mt-28 mb-20 6xl:mb-28":t(I)==="open"," 4xl:-mt-2 5xl:-mt-60 6xl:-mt-28 mb-60 6xl:mb-28":t(I)!=="open"},"relative h-available m-auto mx-auto flex-1 flex max-w-[75%] scale-95 cursor-default group/card z-0 transitioning rounded-2xl aspect-poster overflow-clip select-none cover !shadow-none max-h-available"]),to:`${t(e)?.link}/watch`,"data-nav":"true","data-nav-r":"play","data-nav-reset":"true"},{default:m(()=>[(r(),d(A,{key:t(e)?.poster||"poster","auto-shadow":!0,"color-palette":t(e)?.color_palette?.poster,path:t(e)?.poster,size:760,title:t(e)?.title,aspect:"poster",class:"m-auto scale-100 rounded-2xl","class-name":"pointer-events-none absolute z-20 flex scale-100 select-none items-center place-self-start overflow-hidden rounded-2xl",priority:"high",type:"image"},null,8,["color-palette","path","title"])),l("span",je,[l("span",Pe,[u(b,{"class-name":"w-20 text-surface-12/70 dark:text-surface-12/80",icon:"play"})])])]),_:1},8,["aria-label","class","to"])],4)):n("",!0),l("p",Re,p(a.$t("Data provided by The Movie Database(TMDb)"))+". ",1),l("div",Te,[l("div",Ee,[l("p",Me,p(t(e)?.title?.replace(/(: | en de )/,`
`)),1),l("div",Ae,[u($,{href:`${t(e)?.link}/watch`,style:i(o(13)),title:_.value?`${a.$t("Ends at")} ${_.value}`:a.$t("Play"),class:"bg-surface-6 fade-up"},{default:m(()=>[u(b,{"class-name":"w-6 text-surface-12/70 dark:text-surface-12/80",icon:"play"})]),_:1},8,["href","style","title"]),u($,{style:i(o(14)),class:"bg-surface-6 fade-up",title:"Mark as watched",onClick:V},{default:m(()=>[u(b,{"class-name":"w-6 text-surface-12/70 dark:text-surface-12/80",icon:"check"})]),_:1},8,["style"]),u(we,{"share-data":U.value,style:i(o(15)),class:"!p-0 fade-up"},null,8,["share-data","style"]),t(e)?(r(),d(he,{key:0,data:t(e),style:i(o(16)),class:"fade-up",type:"video"},null,8,["data","style"])):n("",!0),u(Ce,{items:Z.value,style:i(o(17)),class:"text-surface-12/70 dark:text-surface-12/80 fade-up"},null,8,["items","style"])])]),l("div",Ie,[D.value?(r(),d(C,{key:0,style:i(o(19)),class:"fade-up"},{default:m(()=>[l("p",$e,p(D.value),1)]),_:1},8,["style"])):n("",!0),u(C,{style:i(o(20)),class:"fade-up"},{default:m(()=>[l("p",Le,p(t(e)?.have_items)+" / "+p(t(e)?.number_of_items),1)]),_:1},8,["style"]),z.value?(r(),d(C,{key:1,style:i(o(21)),class:"fade-up"},{default:m(()=>[l("p",He,p(z.value),1)]),_:1},8,["style"])):n("",!0),t(e)?.content_ratings?.length?(r(),f("div",{key:2,style:i(o(22)),class:"relative overflow-hidden fade-up"},[u(ke,{ratings:t(e).content_ratings,size:6,class:"h-full min-!h-[1rem] object-scale-down rounded-lg overflow-clip"},null,8,["ratings"])],4)):n("",!0)]),l("div",Ne,[l("div",{style:i(o(23)),class:"h-px bg-surface-1/10 fade-up"},null,4),t(e)?.overview?(r(),f("div",{key:0,style:i(o(24)),class:"w-full text-lg font-medium mb-4 fade-up"},p(t(e)?.overview),5)):n("",!0),t(e)?.genres?.length?(r(),f("div",{key:1,style:i(o(25)),class:"flex flex-wrap gap-1.5 fade-up"},[(r(!0),f(T,null,P(t(e)?.genres,h=>(r(),d(xe,{key:h.id,genre:h},null,8,["genre"]))),128))],4)):n("",!0)])])],4)])])):n("",!0),t(e)?(r(),f("section",{key:1,class:j([t(fe)?"media-backdrop-grid":"media-poster-grid","items-start justify-start gap-4 self-stretch px-4"])},[(r(!0),f(T,null,P(t(e)?.collection??[],h=>(r(),d(_e,{key:h?.id,data:h},null,8,["data"]))),128))],2)):n("",!0),t(e)?.cast&&t(e)?.cast?.length>0?(r(),d(L,{key:2,id:"cast",data:t(E)(t(e)?.cast,"order","id").slice(0,50),index:0,next_id:"crew",previous_id:"poster",title:"Cast"},null,8,["data"])):n("",!0),t(e)?.crew&&t(e)?.crew?.length>0?(r(),d(L,{key:3,id:"crew",data:t(E)(t(e)?.crew).slice(0,50),index:0,next_id:"backdrop",previous_id:"cast",title:"Crew"},null,8,["data"])):n("",!0),t(e)?.posters&&t(e)?.posters?.length>0?(r(),d(H,{key:4,id:"poster",data:t(e)?.posters,index:0,next_id:"backdrop",previous_id:"crew",title:"Poster",type:"poster"},null,8,["data"])):n("",!0),t(e)?.backdrops&&t(e)?.backdrops?.length>0?(r(),d(H,{key:5,id:"backdrop","color-palette":t(e)?.color_palette?.poster,data:t(e)?.backdrops,index:0,next_id:"",previous_id:"backdrop",title:"Backdrop",type:"backdrop"},null,8,["color-palette","data"])):n("",!0)])])]),_:1}))}}}),_t=pe(Fe,[["__scopeId","data-v-d1d0f2f4"]]);export{_t as default};
