import{B as We,bq as Ye,d as Ze,o as r,c as g,a as s,m as Me,aw as I,aB as b,t as o,r as De,z as et,h as _,aC as $,eV as Ge,d3 as Ke,au as H,eW as Fe,eX as F,eY as tt,eZ as He,e_ as Le,bt as L,b1 as Z,I as N,az as ee,en as Qe,e$ as st,f0 as at,e as y,a7 as j,v as k,u as Q,F as K,f1 as Ee,J as ue,dB as lt,aM as C,bv as ne,q as rt,a6 as ie,c6 as Je,f2 as Re,dK as ot,f3 as nt,bE as it,bF as ct}from"./index-Bfb4eeQA.js";import{d as de,u as ut,c as A,_ as dt}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-DN9Fe7xn.js";import{u as Y}from"./useHubListener-D3kd7je3.js";import{_ as ft}from"./ActivityCard.vue_vue_type_script_setup_true_lang-X9zcQHMi.js";import"./FloatingBackButton.vue_vue_type_script_setup_true_lang-NpF_oR0E.js";import"./Button.vue_vue_type_script_setup_true_lang-DYUvFrPQ.js";import"./index-DpbMifct.js";var ht={root:{position:"relative"}},pt={root:"p-chart"},vt=We.extend({name:"chart",classes:pt,inlineStyles:ht}),gt={name:"BaseChart",extends:Ze,props:{type:String,data:null,options:null,plugins:null,width:{type:Number,default:300},height:{type:Number,default:150},canvasProps:{type:null,default:null}},style:vt,provide:function(){return{$pcChart:this,$parentInstance:this}}},Xe={name:"Chart",extends:gt,inheritAttrs:!1,emits:["select","loaded"],chart:null,watch:{data:{handler:function(){this.reinit()},deep:!0},type:function(){this.reinit()},options:function(){this.reinit()}},mounted:function(){this.initChart()},beforeUnmount:function(){this.chart&&(this.chart.destroy(),this.chart=null)},methods:{initChart:function(){var t=this;Ye(()=>import("./auto-Bax5IhbS.js"),[]).then(function(a){t.chart&&(t.chart.destroy(),t.chart=null),a&&a.default&&(t.chart=new a.default(t.$refs.canvas,{type:t.type,data:t.data,options:t.options,plugins:t.plugins})),t.$emit("loaded",t.chart)})},getCanvas:function(){return this.$canvas},getChart:function(){return this.chart},getBase64Image:function(){return this.chart.toBase64Image()},refresh:function(){this.chart&&this.chart.update()},reinit:function(){this.initChart()},onCanvasClick:function(t){if(this.chart){var a=this.chart.getElementsAtEventForMode(t,"nearest",{intersect:!0},!1),i=this.chart.getElementsAtEventForMode(t,"dataset",{intersect:!0},!1);a&&a[0]&&i&&this.$emit("select",{originalEvent:t,element:a[0],dataset:i})}},generateLegend:function(){if(this.chart)return this.chart.generateLegend()}}};function te(e){"@babel/helpers - typeof";return te=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},te(e)}function Te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),a.push.apply(a,i)}return a}function Ve(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Te(Object(a),!0).forEach(function(i){xt(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Te(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function xt(e,t,a){return(t=mt(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function mt(e){var t=wt(e,"string");return te(t)=="symbol"?t:t+""}function wt(e,t){if(te(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,t||"default");if(te(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yt=["width","height"];function kt(e,t,a,i,c,f){return r(),g("div",Me({class:e.cx("root"),style:e.sx("root")},e.ptmi("root")),[s("canvas",Me({ref:"canvas",width:e.width,height:e.height,onClick:t[0]||(t[0]=function(h){return f.onCanvasClick(h)})},Ve(Ve({},e.canvasProps),e.ptm("canvas"))),null,16,yt)],16)}Xe.render=kt;const bt={key:0,class:"flex flex-shrink-0 flex-grow-0 flex-col items-start justify-start gap-3 self-stretch"},_t={class:"relative flex flex-shrink-0 flex-grow-0 items-center justify-start gap-4 self-stretch text-slate-light-12 dark:text-slate-dark-12"},$t={class:"flex-grow text-xl font-medium"},Ct={class:"ml-auto flex gap-2"},J=I({__name:"ServerSystemCard",props:{title:{type:String,required:!0},background:{type:Boolean,required:!1,default:!0}},setup(e){return(t,a)=>b(de)?(r(),g("div",bt,[s("div",_t,[s("p",$t,o(t.$t(e.title)),1),s("div",Ct,[De(t.$slots,"cta")])]),s("div",{class:et(["flex flex-shrink-0 flex-grow-0 flex-col items-start justify-start gap-4 self-stretch rounded-xl",{"bg-slate-lightA-3 dark:bg-slate-darkA-3 p-4":e.background}])},[De(t.$slots,"default")],2)])):_("",!0)}}),jt={class:"flex flex-shrink-0 flex-grow-0 items-start justify-start gap-4 self-stretch text-slate-light-11/80 dark:text-slate-dark-11/80"},St={class:"flex flex-grow flex-col items-start justify-start gap-1 text-left"},Pt={class:"relative flex flex-shrink-0 flex-grow-0 items-center justify-start self-stretch"},Ot={class:"w-8 flex-shrink-0 flex-grow-0 text-sm"},Nt={class:"relative h-2 flex-grow rounded-lg"},At={class:"w-10 flex-shrink-0 flex-grow-0 text-right text-sm"},It=I({__name:"ResourceBar",props:{cpu:{type:Number,required:!0,default:0},value:{type:Number,required:!0,default:0}},setup(e){const t=e,a=$(()=>Ge.value?Ke(t.value,Fe):"rgb(var(--color-focus))");return(i,c)=>(r(),g("div",jt,[s("div",St,[s("div",Pt,[s("p",Ot,o(e.cpu),1),s("div",Nt,[c[0]||(c[0]=s("div",{class:"absolute h-2 w-full rounded left-[-1px] top-[-1px] bg-auto-2 dark:bg-auto-1"},null,-1)),s("div",{class:"absolute h-2 rounded transition-all duration-500 left-[-1px] top-[-1px]",style:H({width:`${e.value}%`,backgroundImage:`linear-gradient(90deg, ${a.value} 0%, ${a.value} 100%)`})},null,4)]),s("p",At,o(Math.floor(e.value))+"% ",1)])])]))}}),zt={class:"relative flex aspect-video h-auto w-full flex-1 flex-shrink-0 flex-col items-start justify-center gap-1 flex-grow-1"},qt={class:"relative h-full flex-1 flex-shrink-0 w-available"},Bt={class:"absolute top-2/3 left-1/2 -translate-x-1/2 text-center font-semibold text-[2.5vw] monospace sm:text-[1.5vw] md:text-[2vw] lg:text-[1.2vw] 2xl:text-[1vw] 5xl:text-[0.6vw]"},Ut={class:"flex-shrink-0 flex-grow-0 scale-75 self-stretch text-center text-sm font-semibold w-available text-[2.5vw] sm:text-[1.5vw] md:text-[2vw] lg:text-[1.2vw] 2xl:text-[1vw] 5xl:text-[0.7vw]"},ce=I({__name:"ResourceCircle",props:{name:{type:String,required:!0},value:{type:Number,required:!0},size:{type:Number,required:!0}},setup(e){const t=e,a=$(()=>{if(Ge.value)return Ke(t.value,Fe);switch(t.name){case"CPU":return F(Le,50);case"Memory":return F(He,50);case"GPU":return F(tt,50)}}),i=$(()=>Math.PI*72),c=$(()=>(1-(t.value==-1?0:t.value)/100)*i.value);return(f,h)=>(r(),g("div",zt,[s("div",qt,[(r(),g("svg",{viewBox:"0 0 152 148",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"absolute inset-2 mx-auto rounded",style:H({width:e.size*2,height:e.size*2}),preserveAspectRatio:"xMidYMid meet"},[h[0]||(h[0]=s("path",{d:"M148 76C148 66.5448 146.138 57.1822 142.519 48.4468C138.901 39.7114 133.598 31.7741 126.912 25.0883C120.226 18.4025 112.289 13.099 103.553 9.48068C94.8178 5.86234 85.4552 4 76 4C66.5448 3.99999 57.1823 5.86232 48.4468 9.48066C39.7114 13.099 31.7742 18.4025 25.0883 25.0883C18.4025 31.7741 13.099 39.7113 9.48069 48.4468C5.86234 57.1822 4 66.5448 4 76",class:"stroke-auto-2 dark:stroke-auto-1","stroke-width":"8","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)),s("path",{class:"absolute -top-1 -left-1 h-2 rounded transition-all duration-500",d:"M4 76C4 56.9044 11.5857 38.5909 25.0883 25.0883C38.5909 11.5857 56.9044 4 76 4C95.0956 4 113.409 11.5857 126.912 25.0883C140.414 38.5909 148 56.9044 148 76",style:H({stroke:a.value,strokeDasharray:i.value,strokeDashoffset:c.value}),"stroke-width":"8","stroke-linecap":"round","stroke-linejoin":"round"},null,4)],4)),s("p",Bt,o(e.value==-1?f.$t(""):Math.floor(e.value))+o(e.value==-1?"":"%"),1)]),s("p",Ut,o(e.name),1)]))}}),Mt={class:"flex items-start justify-between gap-2 overflow-clip w-available text-slate-light-12/80 dark:text-slate-dark-12/80"},Dt={class:"flex flex-shrink-0 flex-grow-0 flex-col items-start justify-start self-stretch"},oe=40,Et=I({__name:"ServerResourceCard",setup(e){var B;const{data:t}=L({path:"dashboard/server/info",queryKey:["serverInfo",(B=Z.value)==null?void 0:B.serverBaseUrl]}),a=N(),i=N("graph"),c=N(Array(oe).fill("")),f=N(Array(oe).fill(null)),h=N(Array(oe).fill(null)),P=N(Array(oe).fill([null])),x=l=>{l&&(a.value=l,f.value=[...f.value.slice(-40),M.value],h.value=[...h.value.slice(-40),D.value],P.value=[...P.value.slice(-40),S.value])};ut(()=>{var l;return(l=A.value)==null?void 0:l.invoke("StartResources")},()=>{var l;return(l=A.value)==null?void 0:l.invoke("StopResources").catch()}),Y(A,"ResourceUpdate",x);const d=()=>{var l;(l=A.value)==null||l.invoke("StartResources")};ee(()=>{const l=Qe();l==null||l.onreconnected(d)});const n=$(()=>{var l,u,p;return((p=(u=(l=a.value)==null?void 0:l.cpu)==null?void 0:u.core)==null?void 0:p.toSorted((v,m)=>v.index-m.index))??[]}),S=$(()=>{var l,u;return((u=(l=a.value)==null?void 0:l.gpu)==null?void 0:u.toSorted((p,v)=>p.index-v.index).map(p=>p.encode))??[]}),M=$(()=>{var l,u,p,v;return(p=(u=(l=a.value)==null?void 0:l.cpu)==null?void 0:u.core)!=null&&p.length?Math.floor(((v=n.value)==null?void 0:v.reduce((m,w)=>m+w.utilization,0))/n.value.length):-1}),D=$(()=>{var l,u,p,v;return((u=(l=a.value)==null?void 0:l.memory)==null?void 0:u.percentage)=="NaN"?-1:((v=(p=a.value)==null?void 0:p.memory)==null?void 0:v.percentage)??-1}),R=$(()=>{var u,p,v;if(((p=(u=a.value)==null?void 0:u.gpu)==null?void 0:p.length)==0)return-1;const l=Math.floor(((v=S.value)==null?void 0:v.reduce((m,w)=>m+w,0))/S.value.length);return Number.isNaN(l)?-1:l}),z=$(()=>(window.innerWidth-5e3)/3),T=l=>{if(l.length===1)return[{color:Ee(l[0]),opacity:50}];const m=50/2,w=[];for(let O=0;O<l.length;O++){const U=25+O%3*m;w.push({color:Ee(l[O]),opacity:U})}return w},V=$(()=>{var l,u,p,v;return{labels:c.value,datasets:[...((u=(l=t.value)==null?void 0:l.cpu)==null?void 0:u.map((m,w)=>{var U;const O=Le;return{label:`CPU ${((U=t.value)==null?void 0:U.cpu.length)>1?w:""}`,data:f.value,yAxisID:"y",borderColor:F(O,50)}}))??[],{label:"Memory",data:h.value,yAxisID:"y",borderColor:F(He,50)},...((v=(p=t.value)==null?void 0:p.gpu)==null?void 0:v.map((m,w)=>{var X,W;const O=T((X=t.value)==null?void 0:X.gpu)[w],U=F(O.color,O.opacity);return{label:`GPU ${((W=t.value)==null?void 0:W.gpu.length)>1?w:""}`,data:P.value.map(se=>se[w]),yAxisID:"y",borderColor:U}}))??[]]}}),q=st("legendPosition","bottom"),G=$(()=>{const l=getComputedStyle(document.documentElement),u=at.value?`rgb(${l.getPropertyValue("--color-slate-12")})`:`rgb(${l.getPropertyValue("--color-slate-1")})`,p=l.getPropertyValue("--p-content-border-color"),v=["left","top","right","bottom"];return{indexAxis:"x",maintainAspectRatio:!1,animation:!1,plugins:{legend:{labels:{color:u},position:q.value,onClick(){q.value=v[(v.indexOf(q.value)+1)%v.length]}}},elements:{line:{tension:.2},point:{pointStyle:!1}},scales:{x:{ticks:{color:"transparent"},grid:{color:"transparent"}},y:{min:0,max:100,beginAtZero:!0,clip:!0,ticks:{color:u},grid:{color:p}}}}}),E=$(()=>{var m,w;return`${(((w=(m=t.value)==null?void 0:m.gpu)==null?void 0:w.length)??0)*40+120}px`});return(l,u)=>(r(),y(J,{title:"Resources monitor"},{cta:j(()=>u[0]||(u[0]=[])),default:j(()=>{var p,v;return[s("div",Mt,[k(ce,{name:"CPU",value:M.value,size:z.value},null,8,["value","size"]),u[1]||(u[1]=s("div",{class:"w-px flex-shrink-0 flex-grow-0 self-stretch bg-white/10"},null,-1)),k(ce,{name:"Memory",value:D.value,size:z.value},null,8,["value","size"]),u[2]||(u[2]=s("div",{class:"w-px flex-shrink-0 flex-grow-0 self-stretch bg-white/10"},null,-1)),k(ce,{name:"GPU",value:R.value,size:z.value},null,8,["value","size"])]),s("div",Dt,[i.value=="bar"?(r(!0),g(K,{key:0},Q(((v=(p=a.value)==null?void 0:p.cpu)==null?void 0:v.core)??[],(m,w)=>(r(),g(K,{key:m.index},[Number.isNaN(m.utilization)?_("",!0):(r(),y(It,{key:0,cpu:w,value:m.utilization},null,8,["cpu","value"]))],64))),128)):_("",!0),i.value=="graph"?(r(),y(b(Xe),{key:1,type:"line",data:V.value,options:G.value,style:H(`height: ${E.value}`),class:"w-available"},null,8,["data","options","style"])):_("",!0)])]}),_:1}))}}),Rt={key:0,class:"relative flex w-full flex-col items-start justify-start overflow-clip rounded-lg pt-2 group/encoderCard gap-1.5 px-2.5 pb-3.5 bg-slate-lightA-3 dark:bg-slate-darkA-3"},Tt={class:"relative flex w-full items-center justify-center gap-0.5"},Vt={class:"w-full flex-grow text-sm font-semibold text-auto-12 line-clamp-1"},Gt={class:"flex-shrink-0 flex-grow-0 text-right text-xs font-light text-auto-alpha-10"},Kt={class:"relative flex items-start justify-start gap-2"},Ft={key:0,class:"relative aspect-video h-auto w-1/3 flex-shrink-0 flex-grow-0 overflow-hidden rounded-sm min-w-36",style:{background:`linear-gradient(
                      to bottom,
                      rgba(0, 0, 0, 0) 0%,
                      rgba(0, 0, 0, 0) 25%,
                      rgba(0, 0, 0, 0) 50%,
                      #000 100%
                    )`}},Ht={class:"absolute inset-0 z-0 h-full w-full bg-white/[0.01]"},Lt=["src"],Qt={class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-[10px]"},Jt={class:"absolute z-10 flex items-end justify-start left-[3%] bottom-[3%] gap-[2%]"},Xt={class:"absolute z-10 flex items-end justify-end right-[3%] bottom-[3%] gap-[2%] text-[10px]"},Wt={class:"group-hover/progress:hidden text-right font-bold text-auto-12 monospace"},Yt={class:"flex h-full flex-grow flex-col items-start justify-evenly"},Zt={class:"relative flex h-4 items-center justify-center overflow-clip"},es={class:"ml-2 w-full font-medium text-2xs text-auto-12"},ts={key:0,class:"relative flex h-4 w-full items-start justify-start gap-2"},ss={key:0,class:"relative flex h-4 items-center justify-center overflow-clip"},as={class:"ml-2 w-full font-medium text-2xs text-auto-12"},ls={key:1,class:"relative flex h-4 w-full items-start justify-start gap-2"},rs={key:0,class:"relative flex h-4 items-center justify-center overflow-clip"},os={class:"ml-1 font-medium text-2xs text-auto-12"},ns={key:2,class:"relative flex h-4 items-center justify-center gap-2 overflow-clip"},is=["title"],cs={class:"w-full text-xs text-auto-alpha-10 line-clamp-1"},us=["title"],ds={class:"w-full text-xs text-auto-alpha-10 line-clamp-1"},fs=["title"],hs={class:"w-full text-xs text-auto-alpha-10 line-clamp-1"},ps={key:0,class:"absolute -bottom-0.5 left-0 h-1 w-full blur-[1px]"},vs=I({__name:"ServerEncoderTaskCard",props:{data:{type:Object,required:!0}},setup(e){var x;const t=e,a=N((x=t.data)==null?void 0:x.status);ue(t,d=>{a.value=d.data.status});const i=$(()=>a.value==="running"?"running":"paused"),c=$(()=>{var n;return t.data.thumbnails?(((n=Z.value)==null?void 0:n.serverBaseUrl)+"\\"+t.data.thumbnails).replace(/\\+/gu,"/").replace(/\/\/images/u,"/images")+"?token="+lt.value.accessToken:null}),f=()=>{ne().post(`/dashboard/tasks/pause/${t.data.process_id}`).then(({data:d})=>{a.value=d?"paused":a.value}).catch(()=>{})},h=()=>{ne().post(`/dashboard/tasks/resume/${t.data.process_id}`).then(({data:d})=>{a.value=d?"running":a.value}).catch(()=>{})},P=()=>{a.value==="running"?f():h()};return(d,n)=>{var S,M,D,R,z,T,V,q,G,E,B,l,u,p,v,m,w,O,U,X,W,se,fe,he,pe,ve,ge,xe,me,we,ye,ke,be,_e,$e,Ce,ae,je,Se,Pe,Oe,le,Ne,Ae,Ie,ze,re,qe,Be,Ue;return e.data?(r(),g("div",Rt,[s("div",Tt,[s("p",Vt,o(e.data.title.replace(/NoMercy/giu,"")),1),s("p",Gt,o(d.$t("Id"))+": "+o((S=e.data)==null?void 0:S.process_id),1)]),s("div",Kt,[((M=e.data)==null?void 0:M.message)=="Encoding video"?(r(),g("div",Ft,[s("div",Ht,[n[0]||(n[0]=s("div",{class:"pointer-events-none absolute inset-0 z-10 mt-auto h-4/5 bg-gradient-to-t from-black via-black/60"},null,-1)),c.value?(r(),g("img",{key:0,src:c.value,class:"absolute z-0 h-full w-full",alt:""},null,8,Lt)):_("",!0)]),s("div",{onClick:P,class:"absolute top-1/2 left-1/2 z-10 group-hover/encoderCard:flex hidden h-11 w-11 -translate-x-1/2 -translate-y-1/2 rounded-full bg-black/60 p-0.5 group/progress text-focus"},[s("div",Qt,[i.value=="running"?(r(),y(C,{key:0,icon:"pause",class:"w-10 text-white"})):(r(),y(C,{key:1,icon:"play",class:"w-10 text-white"}))])]),s("div",Jt,[(D=e.data)!=null&&D.has_gpu?(r(),y(C,{key:0,icon:"gpu",className:"w-[15%]"})):(r(),y(C,{key:1,icon:"cpu",className:"w-[15%]"})),(R=e.data)!=null&&R.is_hdr?(r(),y(C,{key:2,icon:"hdr",className:"w-[15%]"})):(r(),y(C,{key:3,icon:"hdrOff",className:"w-[15%]"}))]),s("div",Xt,[s("span",Wt,o(Math.floor(((z=e.data)==null?void 0:z.progress)??0))+"% ",1)])])):_("",!0),s("div",Yt,[s("div",Zt,[k(C,{icon:"stickyNote",className:"relative w-4 text-auto-12"}),s("p",es,o((T=e.data)==null?void 0:T.message),1)]),((V=e.data)==null?void 0:V.message)=="Encoding video"?(r(),g("div",ts,[(q=e.data)!=null&&q.speed?(r(),g("div",ss,[k(C,{icon:"dashboard",className:"relative w-4 text-auto-12"}),s("p",as,o((G=e.data)==null?void 0:G.speed)+"X ",1)])):_("",!0)])):_("",!0),((E=e.data)==null?void 0:E.message)=="Encoding video"?(r(),g("div",ls,[(B=e.data)!=null&&B.remaining_split?(r(),g("div",rs,[k(C,{icon:"hourglass",className:"relative w-4 text-auto-12"}),s("p",os,o((u=(l=e.data)==null?void 0:l.remaining_split)!=null&&u[0]&&((p=e.data)==null?void 0:p.remaining_split[0])>0?` ${((m=(v=e.data)==null?void 0:v.remaining_split)==null?void 0:m[0])+d.$t("d")} `:"")+" "+o((O=(w=e.data)==null?void 0:w.remaining_split)!=null&&O[1]&&(((U=e.data)==null?void 0:U.remaining_split[1])>0||((X=e.data)==null?void 0:X.remaining_split[0])>0)?` ${((se=(W=e.data)==null?void 0:W.remaining_split)==null?void 0:se[1])+d.$t("h")} `:"")+" "+o((he=(fe=e.data)==null?void 0:fe.remaining_split)!=null&&he[2]&&(((pe=e.data)==null?void 0:pe.remaining_split[2])>0||((ve=e.data)==null?void 0:ve.remaining_split[1])>0||((ge=e.data)==null?void 0:ge.remaining_split[0])>0)?` ${((me=(xe=e.data)==null?void 0:xe.remaining_split)==null?void 0:me[2])+d.$t("m")} `:"")+" "+o((ye=(we=e.data)==null?void 0:we.remaining_split)!=null&&ye[3]?` ${((be=(ke=e.data)==null?void 0:ke.remaining_split)==null?void 0:be[3])+d.$t("s")} `:""),1)])):_("",!0)])):_("",!0),(_e=e.data)!=null&&_e.video_streams&&(($e=e.data)==null?void 0:$e.message)=="Encoding video"?(r(),g("div",ns,[s("div",{class:"relative flex h-4 w-full cursor-pointer items-center justify-start gap-2",title:((je=(ae=(Ce=e.data)==null?void 0:Ce.video_streams)==null?void 0:ae.join)==null?void 0:je.call(ae,", "))??""},[k(C,{icon:"film",className:"w-4"}),s("p",cs,o((Se=e.data)==null?void 0:Se.video_streams.length),1)],8,is),(Pe=e.data)!=null&&Pe.audio_streams?(r(),g("div",{key:0,class:"relative flex h-4 cursor-pointer items-center justify-center gap-2 overflow-clip",title:((Ne=(le=(Oe=e.data)==null?void 0:Oe.audio_streams)==null?void 0:le.join)==null?void 0:Ne.call(le,", "))??""},[k(C,{icon:"audioFile",className:"w-4"}),s("p",ds,o((Ae=e.data)==null?void 0:Ae.audio_streams.length),1)],8,us)):_("",!0),(Ie=e.data)!=null&&Ie.subtitle_streams?(r(),g("div",{key:1,class:"relative flex h-4 cursor-pointer items-center justify-center gap-2 overflow-clip",title:((qe=(re=(ze=e.data)==null?void 0:ze.subtitle_streams)==null?void 0:re.join)==null?void 0:qe.call(re,", "))??""},[k(C,{icon:"chatBubble",className:"w-4"}),s("p",hs,o((Be=e.data)==null?void 0:Be.subtitle_streams.length),1)],8,fs)):_("",!0)])):_("",!0)])]),((Ue=e.data)==null?void 0:Ue.message)=="Encoding video"?(r(),g("div",ps,[n[1]||(n[1]=s("div",{class:"absolute w-full h-1 left-[-1px] top-[-1px] bg-black/[0.22]"},null,-1)),s("div",{class:"w-0 h-1 absolute left-[-1px] top-[-1px] rounded-sm bg-gradient-to-r from-black/5 to-[rgb(var(--color-focus))] z-10",style:H(`width: ${e.data.progress}%;`)},null,4),s("div",{class:"w-1 h-0.5 absolute top-[-1px] rounded-sm bg-[#f1eefe] -translate-x-[2px] z-0",style:H(`left: ${e.data.progress}%;`)},null,4)])):_("",!0)])):_("",!0)}}}),gs={class:"flex flex-shrink-0 flex-grow-0 items-start gap-4 self-stretch overflow-hidden rounded-lg py-4 pr-1 pl-4 bg-slate-lightA-3 dark:bg-slate-darkA-3 text-slate-light-12/80 dark:text-slate-dark-12/80"},xs={class:"relative flex flex-1 flex-grow flex-col items-start space-y-[-2px] w-full"},ms={class:"w-full flex-grow text-sm font-semibold text-auto-12 line-clamp-1"},ws={class:"flex-shrink-0 flex-grow-0 self-stretch text-xs w-available !mt-1 text-slate-light-12/80 dark:text-slate-dark-12/80"},ys={class:"text-slate-light-11 dark:text-slate-dark-11"},ks={class:"flex-shrink-0 flex-grow-0 self-stretch text-xs w-available text-slate-light-12/80 dark:text-slate-dark-12/80 w-full flex justify-between"},bs={class:"flex-shrink-0 flex-grow-0 self-stretch text-xs w-available text-slate-light-12/80 dark:text-slate-dark-12/80"},_s={class:"text-slate-light-11 dark:text-slate-dark-11"},$s={class:"flex-shrink-0 flex-grow-0 self-stretch break-all text-xs w-available text-slate-light-12/80 dark:text-slate-dark-12/80"},Cs={class:"text-slate-light-11 dark:text-slate-dark-11"},js={class:"relative flex flex-shrink-0 flex-grow-0 items-start justify-start gap-2 overflow-hidden rounded-lg bg-transparent p-1.5 -mt-1.5 -mr-0.5"},Ss=I({__name:"ServerQueueTaskCard",props:{data:{type:Object,required:!0}},setup(e){const t=e,a=N(t.data.priority??0),i=async c=>{ne().patch(`/dashboard/tasks/queue/${t.data.id}`,{id:t.data.id,priority:c}).then(()=>{console.log("Priority updated")})};return ue(a,c=>{console.log(c),i(c)}),(c,f)=>{const h=rt("InputNumber");return r(),g("div",gs,[s("div",xs,[s("p",ms,o(e.data.title.replace(/NoMercy/giu,"")),1),s("p",ws,[ie(o(c.$t("Id"))+": ",1),s("span",ys,o(e.data.id),1)]),s("p",ks,[s("span",null,o(c.$t("Priority"))+":",1),k(h,{size:"small",variant:"filled",showButtons:"",modelValue:a.value,"onUpdate:modelValue":f[0]||(f[0]=P=>a.value=P),class:"ml-auto h-8 first:children:!w-12 last:children:!w-4 children:last:children:!w-4 translate-x-12 overflow-clip -mb-2",min:0,max:100,step:1},null,8,["modelValue"])]),s("p",bs,[ie(o(c.$t("Profile"))+": ",1),s("span",_s,o(e.data.profile),1)]),s("p",$s,[ie(o(c.$t("File"))+": ",1),s("span",Cs,o(e.data.input_file),1)])]),s("button",js,[k(C,{icon:"cross",class:"relative h-5 w-5 flex-shrink-0 flex-grow-0"})])])}}}),Ps=Je(Ss,[["__scopeId","data-v-2bbadf4f"]]),Os={class:"relative flex items-start justify-start gap-2 self-stretch rounded-lg p-4 bg-slate-lightA-3 dark:bg-slate-darkA-3 text-slate-light-12/80 dark:text-slate-dark-12/80"},Ns={class:"flex-shrink-0 flex-grow-0 self-stretch text-sm font-semibold"},As=I({__name:"ServerTasksCard",setup(e){ee(()=>{t.value=[]});const t=N([]),{data:a,refetch:i}=L({path:"dashboard/tasks/queue",queryKey:["queue"],refetchInterval:3e4}),c=x=>{x.status=="running"||x.status=="paused"?t.value=Re([...t.value.filter(d=>(d==null?void 0:d.process_id)!==(x==null?void 0:x.process_id)),x],"process_id"):(t.value=Re([...t.value.filter(d=>(d==null?void 0:d.process_id)!==(x==null?void 0:x.process_id))],"process_id"),i())},f=$(()=>{var x;return(x=a.value)==null?void 0:x.filter(d=>!t.value.find(n=>n.process_id===d.process_id))}),h=x=>{a.value=x},P=()=>{t.value=[],i()};return Y(A,"encoder-progress",c),Y(A,"encoder-queue",h),Y(A,"encoder-clear",P),Y(A,"disconnected",P),(x,d)=>{var n;return t.value.length||(n=b(a))!=null&&n.length?(r(),y(J,{key:0,title:"Running tasks",background:!1},{cta:j(()=>d[0]||(d[0]=[])),default:j(()=>[(r(!0),g(K,null,Q(t.value??[],S=>(r(),y(vs,{key:S.process_id,data:S},null,8,["data"]))),128)),(r(!0),g(K,null,Q(f.value,S=>(r(),y(Ps,{key:S.process_id,data:S},null,8,["data"]))),128))]),_:1})):(r(),y(J,{key:1,title:"Running tasks",background:!1},{default:j(()=>[s("div",Os,[s("span",Ns,o(x.$t("No tasks are currently running")),1)])]),_:1}))}}}),Is=I({__name:"ServerActivityCard",setup(e){const{data:t}=L({path:"dashboard/activity",refetchInterval:1e4,data:{take:999},queryKey:["server","activity"]}),{data:a}=L({path:"dashboard/devices",refetchInterval:1e4,queryKey:["devices"]});return(i,c)=>b(de)?(r(),y(J,{key:0,title:"Activity",background:!1},{cta:j(()=>c[0]||(c[0]=[])),default:j(()=>{var f;return[(r(!0),g(K,null,Q(((f=b(t))==null?void 0:f.slice(0,5))??[],h=>(r(),y(ft,{devices:b(a)??[],key:h==null?void 0:h.id,activity:h},null,8,["devices","activity"]))),128))]}),_:1})):_("",!0)}}),zs={class:"relative h-7 flex flex-shrink-0 flex-grow-0 items-center justify-center gap-2 overflow-hidden border-1 border-slate-light-10 dark:border-slate-dark-10 text-slate-light-12/80 dark:text-slate-dark-12/80 rounded-lg pl-1 pr-2 py-1"},qs={class:"flex-shrink-0 flex-grow-0 text-sm"},Bs={class:"relative h-7 flex flex-shrink-0 flex-grow-0 items-center justify-center gap-2 overflow-hidden border-1 border-slate-light-10 dark:border-slate-dark-10 text-slate-light-12/80 dark:text-slate-dark-12/80 rounded-lg pl-1 pr-2 py-1"},Us={class:"flex-shrink-0 flex-grow-0 text-sm"},Ms={class:"relative flex flex-shrink-0 flex-grow-0 items-start justify-start gap-4 self-stretch overflow-clip w-available"},Ds={class:"w-auto flex-grow whitespace-nowrap text-sm text-slate-light-12 dark:text-slate-dark-12"},Es={class:"flex-shrink-0 flex-grow-0 text-sm line-clamp-1 text-slate-light-10 dark:text-slate-dark-10"},Rs={class:"relative flex flex-shrink-0 flex-grow-0 items-start justify-start gap-4 self-stretch overflow-clip w-available"},Ts={class:"w-auto flex-grow whitespace-nowrap text-sm text-slate-light-12 dark:text-slate-dark-12"},Vs={class:"flex-shrink-0 flex-grow-0 text-sm line-clamp-1 text-slate-light-10 dark:text-slate-dark-10"},Gs={class:"relative flex flex-shrink-0 flex-grow-0 items-start justify-start gap-4 self-stretch overflow-clip w-available"},Ks={class:"w-auto flex-grow whitespace-nowrap text-sm text-slate-light-12 dark:text-slate-dark-12"},Fs={class:"flex-shrink-0 flex-grow-0 text-sm line-clamp-1 text-slate-light-10 dark:text-slate-dark-10"},Hs={class:"relative flex flex-shrink-0 flex-grow-0 items-start justify-start gap-4 self-stretch overflow-clip w-available"},Ls={class:"w-auto flex-grow whitespace-nowrap text-sm text-slate-light-12 dark:text-slate-dark-12"},Qs={class:"flex-shrink-0 flex-grow-0 text-sm line-clamp-1 text-slate-light-10 dark:text-slate-dark-10"},Js={class:"relative flex flex-shrink-0 flex-grow-0 items-start justify-start gap-4 self-stretch overflow-clip w-available"},Xs={class:"w-auto flex-grow whitespace-nowrap text-sm text-slate-light-12 dark:text-slate-dark-12"},Ws={class:"flex-shrink-0 flex-grow-0 text-sm line-clamp-1 text-slate-light-10 dark:text-slate-dark-10"},Ys={class:"relative flex flex-shrink-0 flex-grow-0 items-start justify-start gap-4 self-stretch overflow-clip w-available"},Zs={class:"w-auto flex-grow whitespace-nowrap text-sm text-slate-light-12 dark:text-slate-dark-12"},ea={class:"flex-shrink-0 flex-grow-0 text-sm line-clamp-1 text-slate-light-10 dark:text-slate-dark-10"},ta={class:"relative flex flex-shrink-0 flex-grow-0 items-start justify-start gap-4 self-stretch overflow-clip w-available"},sa={class:"w-auto flex-grow whitespace-nowrap text-sm text-slate-light-12 dark:text-slate-dark-12"},aa={class:"flex-shrink-0 flex-grow-0 text-sm line-clamp-1 text-slate-light-10 dark:text-slate-dark-10"},la=I({__name:"ServerSystemInfoCard",setup(e){var x,d;const t=N(!1),a=N(!0),{data:i,refetch:c}=ot({queryKey:["runners",(x=Z.value)==null?void 0:x.serverBaseUrl],retryOnMount:!0,queryFn:()=>ne().get("dashboard/tasks/runners").then(({data:n})=>(t.value=!(n.workers>0),n.workers??[]))}),{data:f}=L({path:"dashboard/server/info",queryKey:["serverInfo",(d=Z.value)==null?void 0:d.serverBaseUrl]}),h=()=>{a.value=!0,c()},P=()=>{a.value=!1};return ee(()=>{const n=Qe();n==null||n.onreconnected(h),n==null||n.onclose(P)}),(n,S)=>(r(),y(J,{title:"System"},{cta:j(()=>[s("div",zs,[k(C,{icon:"pause",class:"w-4"}),s("p",qs,o(n.$t("Pause")),1)]),s("div",Bs,[k(C,{icon:"shutdown",class:"w-4"}),s("p",Us,o(n.$t("Shutdown")),1)])]),default:j(()=>{var M,D,R,z,T,V,q,G;return[s("div",Ms,[s("p",Ds,o(n.$t("Server")),1),s("p",Es,o((M=b(f))==null?void 0:M.server),1)]),s("div",Rs,[s("p",Ts,o(n.$t("Server version")),1),s("p",Vs,o((D=b(f))==null?void 0:D.version),1)]),s("div",Gs,[s("p",Ks,o(n.$t("Uptime")),1),s("p",Fs,[(r(),y(nt,{startTime:(R=b(f))==null?void 0:R.bootTime,key:(z=b(f))==null?void 0:z.bootTime},null,8,["startTime"]))])]),s("div",Hs,[s("p",Ls,o(n.$t("OS")),1),s("p",Qs,o((T=b(f))==null?void 0:T.os.toTitleCase()),1)]),s("div",Js,[s("p",Xs,o(n.$t("Architecture")),1),s("p",Ws,o((V=b(f))==null?void 0:V.arch),1)]),(r(!0),g(K,null,Q((q=b(f))==null?void 0:q.cpu,(E,B)=>(r(),g("div",Ys,[s("p",Zs,o(n.$t("CPU"))+" #"+o(B+1),1),s("p",ea,o(E),1)]))),256)),(r(!0),g(K,null,Q((G=b(f))==null?void 0:G.gpu,(E,B)=>(r(),g("div",ta,[s("p",sa,o(n.$t("GPU"))+" #"+o(B+1),1),s("p",aa,o(E),1)]))),256))]}),_:1}))}}),ra=Je(la,[["__scopeId","data-v-f1f7ee77"]]),oa={class:"col-span-3 col-start-1 flex flex-col gap-4 lg:col-span-2 xl:col-span-2 xl:col-start-1 xl:row-start-1"},na={class:"col-span-3 col-start-1 flex flex-col gap-4 lg:col-span-2 xl:col-span-2 xl:col-start-3 xl:row-start-1"},ia={class:"col-span-3 col-start-1 flex flex-col gap-4 lg:col-span-2 lg:col-start-1 lg:row-start-2 2xl:col-span-2 2xl:col-start-5 2xl:row-start-1 2xl:flex"},ga=I({__name:"Desktop",setup(e){var c;const t=N(!0);ue(A,f=>{t.value=!!f}),ee(()=>{setTimeout(()=>{t.value=!!A.value},1e3)});const{data:a,error:i}=L({path:"dashboard/server/storage",queryKey:["dashboard","storage",(c=Z.value)==null?void 0:c.serverBaseUrl]});return ee(()=>{console.raw(a.value)}),(f,h)=>(r(),y(b(ct),null,{default:j(()=>[k(b(it),{fullscreen:!0},{default:j(()=>[k(dt,{title:"Dashboard overview",gridStyle:2},{cta:j(()=>h[0]||(h[0]=[])),default:j(()=>[s("div",oa,[k(ra),b(de)?(r(),y(Et,{key:0})):(r(),y(J,{key:1,title:"Resources monitor",class:"animate-pulse"},{cta:j(()=>h[1]||(h[1]=[])),default:j(()=>[h[2]||(h[2]=s("div",{class:"min-h-80"},null,-1))]),_:1}))]),s("div",na,[k(As)]),s("div",ia,[k(Is)])]),_:1})]),_:1})]),_:1}))}});export{ga as default};
//# sourceMappingURL=Desktop-BeswZTpS.js.map
