import{Y as D,a7 as K,f as N,w as S,C as L,aB as Y,d,aK as U,c,o as s,l as T,y as P,Z as t,aq as Z,i as h,h as p,t as b,b as y,F as g,p as V,am as j}from"./vue-ionic-Cb5qD3-A.js";import{Y as A,b as z,a as G,s as H,i as f,c as x,r as J}from"./index-12A6nDGS.js";import{u as O}from"./useInfiniteServerClient-EfKLLLHu.js";import{I as Q}from"./Indexer-CO_EWp4a.js";import{_ as W}from"./NMCard.vue_vue_type_script_setup_true_lang-HPWW6tzu.js";import{_ as X}from"./PersonCard.vue_vue_type_script_setup_true_lang-DbVZ7hUJ.js";import{_ as ee,a as oe}from"./EmptyCard.vue_vue_type_script_setup_true_lang-Bu1HspHy.js";import"./vendor-CKnYbqeP.js";import"./icons-BW5E66pf.js";import"./rxjs-BCp2L9Rn.js";import"./media-C2AqgyMX.js";import"./api-BBofn2cc.js";import"./swiper-D00Cnjmx.js";import"./music-player-gfKAgRMD.js";import"./scrollHandlers-CSjCSkQk.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./contextMenuItems-CmECt4oa.js";import"./musicPlaylists-C4qMUhS5.js";import"./TMDBImage.vue_vue_type_script_setup_true_lang-ukY4i4b6.js";import"./AppLogoSquare-u0HA8Xzq.js";import"./CardIndicator.vue_vue_type_script_setup_true_lang-JzO6dHUF.js";import"./OptimizedIcon.vue_vue_type_script_setup_true_lang-BgDponKe.js";import"./NoResultImage.vue_vue_type_script_setup_true_lang-DbKdSlxn.js";const te="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",re="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",$e=D({__name:"Mobile",setup(se){var M;const m=K(),{data:n,fetchNextPage:k,hasNextPage:w,isError:ne}=O({queryKey:["libraries",(M=m.params.id??m.name)==null?void 0:M.split("&").at(0)],limit:20,keepForever:!0});N(()=>{A(),z(null),G(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),S(n,o=>{o&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const F=L(()=>{var r,l,i,u;const o=(u=(i=(l=(r=n.value)==null?void 0:r.pages)==null?void 0:l[0])==null?void 0:i.data)==null?void 0:u[0];return o&&H.value&&o.media_type!=="person"&&o.media_type!=="genres"});Y(()=>{stop(),z(null)});const C=d(),E=d();N(()=>{var o,r;E.value=m.params.id??m.name,w.value&&(((r=(o=n==null?void 0:n.value)==null?void 0:o.pages)==null?void 0:r.length)??0)<50&&k(),document.addEventListener("scrollToDiv",l=>{var i;(i=C.value)==null||i.scrollTo({top:l.detail.top-100,behavior:"smooth"})})}),U(()=>{document.dispatchEvent(new Event("indexer"))}),S(n,o=>{var r;o&&w.value&&((r=o==null?void 0:o.pages)==null?void 0:r.length)<50&&k()});const R=d(),q=d();function v(o,r){R.value=r,q.value.show(o)}return(o,r)=>(s(),c(t(j),null,{default:T(()=>[P(t(Z),{fullscreen:!0,class:"ion-padding",style:{"--padding-bottom":"0"}},{default:T(()=>{var l;return[r[0]||(r[0]=h("div",{class:"fixed top-0 pt-safe w-full bg-slate-light-1 dark:bg-slate-dark-3 z-1199"},null,-1)),h("div",{ref_key:"lib",ref:C,class:"pt-safe-offset-9 flex h-auto w-full pr-8 overflow-auto scroll-container"},[(s(),p("div",{key:(l=t(J).currentRoute.value.params)==null?void 0:l.id,class:b(["z-0 flex flex-col gap-4 rounded-3xl border-0 w-available scrollbar-none border-auto-3",{"pb-2":t(f)&&t(x),"children:pb-4 sm:children:pb-3":!t(f)&&t(x)}])},[h("div",{class:b(`grid w-full gap-4 scroll-smooth music-showing:pb-0 pl-1 py-4 ${F.value?te:re}`)},[t(n)?(s(!0),p(g,{key:0},V(t(n).pages??[],(i,u)=>{var B,I,$;return s(),p(g,{key:u},[i.data.length>0?(s(!0),p(g,{key:0},V(i.data??[],(e,_)=>(s(),p(g,null,[(e==null?void 0:e.media_type)==="tv"||(e==null?void 0:e.media_type)==="movie"||(e==null?void 0:e.media_type)==="collection"||(e==null?void 0:e.media_type)==="specials"?(s(),c(W,{key:e.id,data:e,index:_,onContextMenu:a=>v(a,e)},null,8,["data","index","onContextMenu"])):(e==null?void 0:e.media_type)==="person"?(s(),c(X,{key:`${e.id}_person`,data:e,index:_,onContextMenu:a=>v(a,e)},null,8,["data","index","onContextMenu"])):(e==null?void 0:e.media_type)==="genres"?(s(),c(ee,{key:`${e.id}_genres`,data:e,index:_,onContextMenu:a=>v(a,e)},null,8,["data","index","onContextMenu"])):y("",!0)],64))),256)):(($=(I=(B=t(n).pages)==null?void 0:B[0])==null?void 0:I.data)==null?void 0:$.length)===0?(s(),c(oe,{key:1})):y("",!0)],64)}),128)):y("",!0)],2)],2)),P(Q,{id:E.value,class:b(["w-8 fixed right-0 bg-slate-light-1 dark:bg-slate-dark-3 transition-all duration-200",{"h-available":!t(f),"h-inherit top-24":t(f),"-mt-4 pt-4 pb-4 mb-0":!t(x),"-mt-4 pt-4 pb-4 mb-14":t(x)}])},null,8,["id","class"])],512)]}),_:1})]),_:1}))}});export{$e as default};
