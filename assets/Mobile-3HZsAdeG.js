import{I as V,Z as z,E as C,b1 as F,aa as E,a7 as R,w as M,C as D,a0 as K,bM as L,l as c,ci as j,d as n,o as s,s as I,j as B,K as t,bu as q,a as v,c as l,n as x,a2 as u,a3 as p,a4 as U,b,F as m,h as $,bh as Z}from"./index-C1DjUpiP.js";import{u as A}from"./useInfiniteServerClient-ARVV4sGq.js";import{I as G}from"./Indexer-BELecNdM.js";import{_ as H}from"./NMCard.vue_vue_type_script_setup_true_lang-DyiXnuGJ.js";import{_ as J}from"./PersonCard.vue_vue_type_script_setup_true_lang-B0Q0l6rz.js";import{_ as O,a as Q}from"./EmptyCard.vue_vue_type_script_setup_true_lang-DQaLubiK.js";import"./useBaseQuery-juBGMRNQ.js";import"./useQueryClient-OkkyraFc.js";import"./scrollHandlers-nzhhAbQr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./contextMenuItems-BjWjf7WP.js";import"./musicPlaylists-DPgttUCi.js";import"./TMDBImage.vue_vue_type_script_setup_true_lang-BnMxpgRt.js";import"./AppLogoSquare-DBIPgV3M.js";import"./CardIndicator.vue_vue_type_script_setup_true_lang-Cq-Klt6y.js";import"./index-BZgGgbsZ.js";import"./OptimizedIcon.vue_vue_type_script_setup_true_lang-D4l8g0_V.js";import"./NoResultImage.vue_vue_type_script_setup_true_lang-uabLHaIR.js";const W="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",X="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",_e=V({__name:"Mobile",setup(Y){const i=z(),{data:a,fetchNextPage:_,hasNextPage:h,isError:ee}=A({queryKey:["libraries",(i.params.id??i.name)?.split("&").at(0)],limit:20,keepForever:!0});C(()=>{F(),E(null),R(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),M(a,o=>{o&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const N=D(()=>{const o=a.value?.pages?.[0]?.data?.[0];return o&&K.value&&o.media_type!=="person"&&o.media_type!=="genres"});L(()=>{stop(),E(null)});const y=c(),k=c();C(()=>{k.value=i.params.id??i.name,h.value&&(a?.value?.pages?.length??0)<50&&_(),document.addEventListener("scrollToDiv",o=>{y.value?.scrollTo({top:o.detail.top-100,behavior:"smooth"})})}),j(()=>{document.dispatchEvent(new Event("indexer"))}),M(a,o=>{o&&h.value&&o?.pages?.length<50&&_()});const S=c(),T=c();function g(o,d){S.value=d,T.value.show(o)}return(o,d)=>(s(),n(t(Z),null,{default:I(()=>[B(t(q),{fullscreen:!0,class:"ion-padding",style:{"--padding-bottom":"0"}},{default:I(()=>[d[0]||(d[0]=v("div",{class:"fixed top-0 pt-safe w-full bg-slate-light-1 dark:bg-slate-dark-3 z-1199"},null,-1)),v("div",{ref_key:"lib",ref:y,class:"pt-safe-offset-9 flex h-auto w-full pr-8 overflow-auto scroll-container"},[(s(),l("div",{key:t(U).currentRoute.value.params?.id,class:x(["z-0 flex flex-col gap-4 rounded-3xl border-0 w-available scrollbar-none border-auto-3",{"pb-2":t(u)&&t(p),"children:pb-4 sm:children:pb-3":!t(u)&&t(p)}])},[v("div",{class:x(`grid w-full gap-4 scroll-smooth music-showing:pb-0 pl-1 py-4 ${N.value?W:X}`)},[t(a)?(s(!0),l(m,{key:0},$(t(a).pages??[],(w,P)=>(s(),l(m,{key:P},[w.data.length>0?(s(!0),l(m,{key:0},$(w.data??[],(e,f)=>(s(),l(m,null,[e?.media_type==="tv"||e?.media_type==="movie"||e?.media_type==="collection"||e?.media_type==="specials"?(s(),n(H,{key:e.id,data:e,index:f,onContextMenu:r=>g(r,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="person"?(s(),n(J,{key:`${e.id}_person`,data:e,index:f,onContextMenu:r=>g(r,e)},null,8,["data","index","onContextMenu"])):e?.media_type==="genres"?(s(),n(O,{key:`${e.id}_genres`,data:e,index:f,onContextMenu:r=>g(r,e)},null,8,["data","index","onContextMenu"])):b("",!0)],64))),256)):t(a).pages?.[0]?.data?.length===0?(s(),n(Q,{key:1})):b("",!0)],64))),128)):b("",!0)],2)],2)),B(G,{id:k.value,class:x(["w-8 fixed right-0 bg-slate-light-1 dark:bg-slate-dark-3 transition-all duration-200",{"h-available":!t(u),"h-inherit top-24":t(u),"-mt-4 pt-4 pb-4 mb-0":!t(p),"-mt-4 pt-4 pb-4 mb-14":t(p)}])},null,8,["id","class"])],512)]),_:1})]),_:1}))}});export{_e as default};
