import{aG as P,be as j,bE as z,K as B,L as $,c9 as M,eJ as x,eK as C,aM as S,eL as K,eM as R,aN as W,aO as D,aP as G,j as m,o as n,a7 as H,x as T,aI as r,bQ as J,bH as Q,c as V,h as q,a as I,C as A,cu as E,bh as N,F as U,w as X,bO as Y}from"./index-ChYFPiWd.js";import{_ as Z,a as ee,S as te,b as se}from"./TrackRow.vue_vue_type_script_setup_true_lang-Cozg17Y7.js";import{_ as ae}from"./NotFound.vue_vue_type_script_setup_true_lang-CWRJRxlr.js";import"./BigPlayButton.vue_vue_type_script_setup_true_lang-BGSRwGKW.js";import"./FavoriteImage.vue_vue_type_script_setup_true_lang-DLUxSq99.js";import"./TrackLinks.vue_vue_type_script_setup_true_lang-D0_B03k_.js";import"./BannerButton.vue_vue_type_script_setup_true_lang-CPd_faPP.js";const re={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},pe=P({__name:"Desktop",setup(oe){const w=j(),{data:a,isError:v}=z({path:w.fullPath,keepForever:!0}),F=B(null),h=B(),c=B("");$(a,e=>{var s,l;e&&(M((e==null?void 0:e.name)??null),p((e==null?void 0:e.tracks)??[],C.value,x.value,c.value),(s=e==null?void 0:e.color_palette)!=null&&s.cover&&S((l=e==null?void 0:e.color_palette)==null?void 0:l.cover))}),$(x,e=>{var s;p(((s=a.value)==null?void 0:s.tracks)??[],C.value,e,c.value)}),$(C,e=>{var s;p(((s=a.value)==null?void 0:s.tracks)??[],e,x.value,c.value)}),$(c,e=>{var s;p(((s=a.value)==null?void 0:s.tracks)??[],C.value,x.value,e)});const p=(e,s,l,t)=>{const i=K(e??[],s,l,R);t==""?h.value=i:h.value=(i==null?void 0:i.filter(o=>{var f,u,_,k,b,y;return((u=o.name)==null?void 0:u.toLowerCase().includes((f=t==null?void 0:t.toLowerCase)==null?void 0:f.call(t)))||((_=o.artist_track)==null?void 0:_.some(L=>{var g;return L.name.toLowerCase().includes((g=t==null?void 0:t.toLowerCase)==null?void 0:g.call(t))}))||((y=(k=o.album_track)==null?void 0:k[0])==null?void 0:y.name.toLowerCase().includes((b=t==null?void 0:t.toLowerCase)==null?void 0:b.call(t)))}))??[]};W(()=>{var e,s,l,t,i,o;(e=a==null?void 0:a.value)!=null&&e.tracks&&p(((s=a==null?void 0:a.value)==null?void 0:s.tracks)??[],C.value,x.value,c.value),(t=(l=a.value)==null?void 0:l.color_palette)!=null&&t.cover&&S((o=(i=a.value)==null?void 0:i.color_palette)==null?void 0:o.cover)}),D(()=>{document.getElementById("navbar")&&(document.getElementById("navbar").style.display="flex"),S(null),G(null)});const d=B(),O=()=>{var s,l,t,i,o,f,u,_,k,b,y,L,g;if(window.CSS.supports("container-type","scroll-state"))return;Math.ceil(((t=(l=(s=d.value)==null?void 0:s.$el)==null?void 0:l.getBoundingClientRect())==null?void 0:t.top)??500)<=67?((o=(i=d.value)==null?void 0:i.$el)==null||o.classList.add("!bg-focus"),(_=(u=(f=d.value)==null?void 0:f.$el)==null?void 0:u.firstChild)==null||_.classList.add("!bg-black/50")):((b=(k=d.value)==null?void 0:k.$el)==null||b.classList.remove("!bg-focus"),(g=(L=(y=d.value)==null?void 0:y.$el)==null?void 0:L.firstChild)==null||g.classList.remove("!bg-black/50"))};return(e,s)=>(n(),m(r(Y),null,{default:H(()=>[T(r(J),{fullscreen:!0,class:"flex"},{default:H(()=>[r(v)&&!r(a)?(n(),m(ae,{key:0})):(n(),m(Q,{key:1,autoHide:!0,static:!0,onScroll:O},{default:H(()=>{var l,t,i;return[!r(w).params.id||r(w).params.id&&((l=r(a))==null?void 0:l.id)==r(w).params.id?(n(),V("div",{key:0,ref_key:"main",ref:F,class:"flex flex-col overflow-x-clip w-available h-available sm:rounded-2xl"},[T(Z,{data:r(a)},null,8,["data"]),I("div",re,[s[1]||(s[1]=I("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom bg-focus"},null,-1)),(n(),m(ee,{key:(t=r(a))==null?void 0:t.id,data:r(a),filter:c.value,onFilterChange:s[0]||(s[0]=o=>c.value=o)},null,8,["data","filter"])),I("div",{class:A(["flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-slate-light-1 dark:bg-slate-dark-2 flex-grow-1 gap-0.5 sm:p-4",{"pb-24":r(E)&&!r(N),"pb-40":r(E)&&r(N),"pb-4 sm:pb-4":!r(E)&&r(N)}])},[(n(),m(te,{ref_key:"sortHeader",ref:d,key:(i=r(a))==null?void 0:i.id})),(n(!0),V(U,null,X(h.value,(o,f)=>(n(),m(se,{key:o.id,data:o,displayList:h.value,index:f},null,8,["data","displayList","index"]))),128))],2)])],512)):q("",!0)]}),_:1}))]),_:1})]),_:1}))}});export{pe as default};
