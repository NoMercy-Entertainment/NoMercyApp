{"version":3,"file":"ActivityCard.vue_vue_type_script_setup_true_lang-DaMuM97U.js","sources":["../../src/views/Dashboard/System/System/Components/ServerActivityCard/ActivityCard.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { computed, onMounted, onUnmounted, PropType, ref } from 'vue';\nimport { Card } from 'primevue';\n\nimport type { ActivityLog } from '@/types/server';\nimport type { Device } from '@/types/api/dashboard/server';\n\nimport { timeAgoShort } from '@/lib/dateTime';\nimport { censorPublicIpAddresses } from '@/lib/stringArray';\n\nconst props = defineProps({\n  activity: {\n    type: Object as PropType<ActivityLog>,\n    required: true,\n  },\n  devices: {\n    type: Array as PropType<Array<Device>>,\n    required: true,\n  }\n});\n\nconst interval = ref<NodeJS.Timeout>();\nconst showTime = ref('');\n\nonMounted(() => {\n  showTime.value = timeAgoShort(new Date(props.activity?.time).getTime());\n\n  interval.value = setInterval(() => {\n    showTime.value = timeAgoShort(new Date(props.activity?.time).getTime());\n  }, 1000);\n});\n\nonUnmounted(() => {\n  clearInterval(interval.value);\n});\n\nconst device = computed(() => {\n  const d = props.devices?.find(d => d.id == props.activity?.device_id);\n  return {\n    name: d?.custom_name || d?.device || d?.device_id,\n    ip: censorPublicIpAddresses(d?.ip),\n  };\n});\n\n</script>\n\n<template>\n  <Card>\n    <template #title>\n      <span class=\"text-slate-light-12/80 dark:text-slate-dark-12/70\">\n        {{ activity?.user }} {{ $t(activity?.type) }}\n      </span>\n    </template>\n    <template #content>\n      <div class=\"flex flex-col text-slate-light-12 dark:text-slate-dark-12\">\n        <p class=\"flex-shrink-0 flex-grow-0 self-stretch text-sm\">\n          {{ $t('Time') }}:\n          <span class=\"text-slate-light-11 dark:text-slate-dark-11\">\n            {{ showTime }}\n          </span>\n        </p>\n        <span class=\"flex-shrink-0 flex-grow-0 self-stretch text-sm\">\n          {{ $t('Device') }}:\n          <span class=\"text-slate-light-11 dark:text-slate-dark-11\">\n            {{ device.name }}\n          </span>\n        </span>\n        <span class=\"flex-shrink-0 flex-grow-0 self-stretch text-sm\">\n          {{ $t('IP address') }}:\n          <span class=\"text-slate-light-11 dark:text-slate-dark-11\">\n            {{ device.ip }}\n          </span>\n        </span>\n      </div>\n    </template>\n  </Card>\n</template>\n"],"names":["props","__props","interval","ref","showTime","onMounted","timeAgoShort","_a","onUnmounted","device","computed","d","censorPublicIpAddresses"],"mappings":"uwBAUA,MAAMA,EAAQC,EAWRC,EAAWC,EAAoB,EAC/BC,EAAWD,EAAI,EAAE,EAEvBE,EAAU,IAAM,OACLD,EAAA,MAAQE,EAAa,IAAI,MAAKC,EAAAP,EAAM,WAAN,YAAAO,EAAgB,IAAI,EAAE,SAAS,EAE7DL,EAAA,MAAQ,YAAY,IAAM,OACxBE,EAAA,MAAQE,EAAa,IAAI,MAAKC,EAAAP,EAAM,WAAN,YAAAO,EAAgB,IAAI,EAAE,SAAS,GACrE,GAAI,CAAA,CACR,EAEDC,EAAY,IAAM,CAChB,cAAcN,EAAS,KAAK,CAAA,CAC7B,EAEK,MAAAO,EAASC,EAAS,IAAM,OACtB,MAAAC,GAAIJ,EAAAP,EAAM,UAAN,YAAAO,EAAe,KAAKI,GAAKA,OAAAA,OAAAA,EAAE,MAAMJ,EAAAP,EAAM,WAAN,YAAAO,EAAgB,aACpD,MAAA,CACL,MAAMI,GAAA,YAAAA,EAAG,eAAeA,GAAA,YAAAA,EAAG,UAAUA,GAAA,YAAAA,EAAG,WACxC,GAAIC,EAAwBD,GAAA,YAAAA,EAAG,EAAE,CACnC,CAAA,CACD"}