const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BaseLayout-C4r9p2LQ.js","assets/_plugin-vue_export-helper-pDp7unP0.js","assets/index-Dv83kAv_.js","assets/index-CNpAbMRX.css","assets/utils-DRKz5xy4.js","assets/bundle-mjs-m3ebY3zV.js","assets/dist-BWFEUpD5.js","assets/SocketClient-CLd4yl1R.js","assets/esm-ANv1qkIu.js","assets/index2-Bme3R7x6.js","assets/helpers-D9i4TsoA.js","assets/index5-Cn-unn0n.js","assets/index6-dPj4fqeV.js","assets/ionic-global-BrT5QOOk.js","assets/client-Lt1iJPRU.js","assets/keyboard-BGaVckUv.js","assets/dir-BGpU1TP6.js","assets/focus-visible-Cof-Vqco.js","assets/index3-D57DmiIb.js","assets/hardware-back-button-DUNt_0t6.js","assets/index8-CrgDNp2f.js","assets/ios.transition-CmHvz4bI.js","assets/keyboard2-DeMt_g_-.js","assets/md.transition-DBZTZPtp.js","assets/utils-S5luT9U1.js","assets/client-D4e5iciK.js","assets/esm-CLtwhlBL.js","assets/core-CBi4z1eg.js","assets/user-Cpc-QsaC.js","assets/deviceInfo-DoGAY46a.js","assets/esm-CjYSFQTD.js","assets/config-BZ-AEJ_J.js","assets/currentServer-CyRP1M2f.js","assets/ui-Dy0BhNPE.js","assets/esm-B--WsoEr.js","assets/global-Cl9NRZH-.js","assets/esm-CU7dLS2l.js","assets/ChristmasSnow-DC0Ll1hc.js","assets/render-BxNxGvpM.js","assets/basecomponent-BjQ2yHda.js","assets/button-BlCqSJTL.js","assets/classnames-C7QsyfAI.js","assets/baseicon-6Enlr15r.js","assets/portal-D5vg5gK5.js","assets/useQueryClient-_29YjZdz.js","assets/md5-DJTWJTif.js","assets/dist-Be7NXLvN.js","assets/MoooomIcon-DnG74F3v.js","assets/PlayerIcon-D31foD-s.js","assets/ScrollContainer-UnRcXO1f.js","assets/ScrollContainer-IaqLNtyt.css","assets/TMDBImage-Bq86Jy-T.js","assets/AppLogoSquare-i1IW1kFU.js","assets/AppLogoSquare-tviIpcab.css","assets/CoverImage-D4HQmV-e.js","assets/MusicButton-DnLkBuhm.js","assets/SliderBar-Bw2lvsoc.js","assets/serverClient-Dh7JrGPq.js","assets/contextMenuItems-BciBz7Zs.js","assets/musicPlaylists-D6UXHs9I.js","assets/imageModal-ouzoPsP3.js","assets/dist-CkXwLdCd.js","assets/Toggle-CqcDjFUJ.js","assets/baseeditableholder-D4L7RVRG.js","assets/Button-CaPmXbrb.js","assets/swiper-vue-BkqBCy7j.js","assets/DropdownMenu-ApthCE94.js","assets/BannerButton-e4he2uED.js","assets/MediaLikeButton-CMUSbHSn.js","assets/MediaLikeButton-DgtJX4Bs.css","assets/auth-hpDtC4ST.js","assets/apiClient-9DYr7MVK.js","assets/notifications-qUxNFD5p.js","assets/BaseLayout-CdtzWsQ5.css","assets/BaseLayout-C_qqkuoS.js","assets/konami-DlHYFkgv.js","assets/times-BlMeJS_W.js","assets/fileupload-B15e1gvu.js","assets/useInfiniteServerClient-r3ptfaNG.js","assets/useBaseQuery-D6HQWFWH.js","assets/useMutationState-Byr2jfbw.js","assets/RipperOverlay-DPcurQGk.js","assets/useMounted-BO0RWNIx.js","assets/ripperSocket-66QK4sK-.js","assets/HubConnection-BFcxaOir.js","assets/Indexer-cLHoHUIP.js","assets/indexer-BbRL4yVJ.js","assets/Indexer-BQEVBSdN.css","assets/AppLogo-Db-SbIzj.js","assets/AppLogo-BxAvpjKC.css","assets/KeepCounting-LYnsmuR2.js","assets/Marquee-DSc1WxSu.js","assets/Modal-DzSyuW3f.js","assets/Modal-VkhBf0wd.css","assets/useServerClient-CvCiAwnH.js","assets/useQuery-CVx6KcJR.js","assets/search-iPAqG-mz.js","assets/sidebar-B0DLjSkO.js","assets/BaseLayout-B6p6_Xjs.css","assets/Collection-GeBjotbQ.js","assets/AuthView-Dcbv6rqv.js","assets/Logout-Rxg6Zpg9.js","assets/ExploreContainer-DGN6wFTj.js","assets/ExploreContainer-BZmj7tlQ.css","assets/Home-DdXuwHMh.js","assets/Info-C4a0NmBJ.js","assets/Libraries-D0eP43BU.js","assets/Library-BXQTAj-U.js","assets/PaginatedLibrary-pg9adx_L.js","assets/Person-DmWEpS1Y.js","assets/Search-BgKf2O1C.js","assets/Watch-Djbi9ZoA.js","assets/Artist-BlhBCsn7.js","assets/Cards-CyRIvVxi.js","assets/List-BBQvTtQD.js","assets/Start-srTO5ULU.js","assets/Logs-UxSgZKfL.js","assets/Plugins-C4Qq1orU.js","assets/Schedule-21N99VcW.js","assets/Metadata-qKo5HsUC.js","assets/Ripper-NZdE4b5g.js","assets/Specials-C8HwOibc.js","assets/Activity-C07JXUOp.js","assets/Devices-Bx0BtcXZ.js","assets/Dlna-Dxz29OYt.js","assets/EncoderProfiles-DdC3pBn3.js","assets/General-CSYlcKpw.js","assets/Libraries-CDZg4gTf.js","assets/Notifications-AnMq4FK8.js","assets/System-CjcRHA5e.js","assets/Users-86V3jyQa.js","assets/Controls-DBpwxc6s.js","assets/Display-B3Ptcn9M.js","assets/Profile-B2-6nvpn.js","assets/Subtitles-CLf43UOQ.js","assets/Cast-DfLZuiiD.js","assets/Download-DX6icU4J.js","assets/SelectServers-Bh_XWbIm.js","assets/NoServers-xxtkKTzh.js","assets/ServerOffline-OXi7g1q6.js","assets/PostInstall-2XDFxO_y.js","assets/NotFound-D2iwUNhY.js","assets/Edit-DljwDHTq.js","assets/Select-CzVHFSnt.js","assets/use-text-value-B24OZ3qk.js","assets/DashboardLayout-CDV4ClI3.js","assets/FloatingBackButton-DBcoXYDj.js","assets/useApiClient-CyffuvlZ.js","assets/Edit-Cwq6z4Z9.js","assets/FolderBrowser-ChXetoP7.js","assets/LanguageSelect-BVoNxdea.js","assets/NoResultImage-DWWQ0VzE.js","assets/Edit-BonhAn0y.js","assets/inputtext-uAIuOOBF.js","assets/Show-BcKASPVE.js","assets/ActivityCard-DLpNLeIB.js","assets/card-DcVY5yiR.js","assets/Edit-GAM1hyDf.js"])))=>i.map(i=>d[i]);
import{A as we,An as S,Ct as i,Lt as D,M as ke,Nn as Oe,P as ce,Tt as I,bn as ae,j as Ve,mt as re,wt as Be}from"./index-Dv83kAv_.js";import{n as Z}from"./dist-CkXwLdCd.js";import{f as Ce}from"./ui-Dy0BhNPE.js";import{n as ee,t as T}from"./currentServer-CyRP1M2f.js";import{u as Le}from"./core-CBi4z1eg.js";import{f as Ae}from"./global-Cl9NRZH-.js";import{n as te,s as P}from"./user-Cpc-QsaC.js";import{t as N}from"./serverClient-Dh7JrGPq.js";import{$ as ue,a as le,l as x,t as F,tt as pe}from"./SocketClient-CLd4yl1R.js";import{t as ne}from"./apiClient-9DYr7MVK.js";import{a as Me}from"./notifications-qUxNFD5p.js";import{r as He}from"./auth-hpDtC4ST.js";ke();I();var Ue=()=>{const e=[],a={},t=s=>{switch(s.routerAction){case"pop":f(s);break;default:v(s);break}s.routerDirection==="root"&&(E(),v(s))},n=s=>{const c=e.findIndex(u=>u.id===s.id);c>-1&&e.splice(c,1,s);const r=a[s.tab||""];if(r){const u=r.findIndex(h=>h.id===s.id);u>-1?r.splice(u,1,s):r.push(s)}else s.tab&&(a[s.tab]=[s])},f=s=>{const c=m(s.tab);let r;if(c){for(r=c[c.length-1];r&&r.id!==s.id;)c.pop(),r=c[c.length-1];c.pop(),c.push(s)}for(r=e[e.length-1];r&&r.id!==s.id;)e.pop(),r=e[e.length-1];e.pop(),e.push(s)},v=s=>{const c=m(s.tab);c&&(c[c.length-1]&&c[c.length-1].id===s.id&&c.pop(),c.push(s)),e.push(s)},E=s=>{if(s){const{position:c,tab:r}=s,u=e.findIndex(_=>_.position===c);if(u===-1)return;e.splice(u);const h=_=>{const y=a[_].findIndex(o=>o.position===c);y!==-1&&a[_].splice(y)},L=a[r];if(r&&L)h(r);else for(const _ in a)h(_)}else{for(const c in a)a[c]=[];e.length=0}},m=s=>{let c;return s&&(c=a[s],c||(c=a[s]=[])),c},O=()=>e.length,V=(s,c)=>e[c-s]||w(),w=()=>e[e.length-1];return{current:V,size:O,last:w,add:t,canGoBack:(s=1,c,r)=>r-s>=c,update:n,getFirstRouteInfoForTab:s=>{const c=m(s);if(c)return c[0]},getCurrentRouteInfoForTab:s=>{const c=m(s);if(c)return c[c.length-1]},findLastLocation:(s,c=-1)=>{const r=m(s.tab);if(r){if(c<-1)return r[r.length-1+c];for(let u=r.length-2;u>=0;u--){const h=r[u];if(h&&h.pathname===s.pushedByRoute)return h}}for(let u=e.length-2;u>=0;u--){const h=e[u];if(h&&h.pathname===s.pushedByRoute)return e[u+1+c]}},clearHistory:E}},me={main:0},De=(e="main")=>{var a;const t=((a=me[e])!==null&&a!==void 0?a:0)+1;return me[e]=t,t.toString()},xe=(e,a)=>{let t={direction:void 0,action:void 0,delta:void 0};a.afterEach((o,d,l)=>{if(l)return;const{direction:g,action:A,delta:p}=t;v=e.history.state.position;const H=e.history.state.replaced?"replace":void 0;G(o,A||H,g,p),t={direction:void 0,action:void 0,delta:void 0}});const n=Ue();let f=e.history.state.position,v=e.history.state.position,E,m;const O=[];typeof document<"u"&&document.addEventListener("ionBackButton",o=>{o.detail.register(0,d=>{e.history.go(-1),d()})}),e.history.listen((o,d,l)=>{t={delta:l.delta,action:l.type==="pop"&&l.delta>=1?"push":l.type,direction:l.direction===""?"forward":l.direction}});const V=(o,d)=>{const l=n.current(f,v);if(l&&l.pushedByRoute){const g=n.findLastLocation(l);g?(m=Object.assign(Object.assign({},g),{routerAction:"pop",routerDirection:"back",routerAnimation:d||l.routerAnimation}),l.lastPathname===l.pushedByRoute||g.pathname===l.pushedByRoute&&!l.tab&&!g.tab?a.back():a.go(g.position-l.position)):w(o,"pop","back",d)}else w(o,"pop","back",d)},w=(o,d,l,g,A)=>{h(d,l,g,A),d==="push"?a.push(o):a.replace(o)},G=(o,d,l,g)=>{let A;if(m)if(m.routerAction==="replace")A=n.current(f,v);else if(m.routerAction==="pop")A=n.current(f,v+1),d==="replace"&&n.clearHistory();else{const p=m.routerDirection==="root"?v:v-1;A=n.current(f,p)}else A=E;if(A||(A={pathname:"",search:""}),A.pathname+A.search!==o.fullPath){if(!m){if(d==="replace")m={routerAction:"replace",routerDirection:"none"};else if(d==="pop"){const U=n.current(f,v-g);if(U&&U.pushedByRoute){const b=n.findLastLocation(U,g);m=Object.assign(Object.assign({},b),{routerAction:"pop",routerDirection:"back"})}else m={routerAction:"pop",routerDirection:"none"}}m||(m={routerAction:"push",routerDirection:l||"forward"})}let p;if(m?.id)p=Object.assign(Object.assign({},m),{lastPathname:A.pathname});else{const U=m.routerAction==="push"&&m.routerDirection==="forward";if(p=Object.assign(Object.assign({id:De("routeInfo")},m),{lastPathname:A.pathname,pathname:o.path,search:o.fullPath&&o.fullPath.split("?")[1]||"",params:o.params&&o.params,prevRouteLastPathname:A.lastPathname}),U)p.pushedByRoute=A.pathname!==""?A.pathname:void 0;else if(p.routerAction==="pop"){const b=n.findLastLocation(p);p.pushedByRoute=b?.pushedByRoute}else if(p.routerAction==="push"&&p.tab!==A.tab){const b=n.getCurrentRouteInfoForTab(p.tab);p.pushedByRoute=b?.pushedByRoute}else if(p.routerAction==="replace"){const b=n.current(f,v),J=b?.pushedByRoute,Ie=J!==void 0&&J!==p.pathname?J:p.pushedByRoute;p.lastPathname=b?.pathname||p.lastPathname,p.pushedByRoute=Ie,p.routerDirection=b?.routerDirection||p.routerDirection,p.routerAnimation=b?.routerAnimation||p.routerAnimation,p.prevRouteLastPathname=b?.lastPathname}}p.position=v,p.delta=g;const H=n.size(),ie=v-f;H>ie||H===ie&&H>0&&d==="replace"?(p.routerAction==="push"||p.routerAction==="replace")&&g===void 0&&(n.clearHistory(p),n.add(p)):n.add(p),n.size()===1&&(f=p.position),E=p}m=void 0,O.forEach(p=>p(E))},Q=()=>E,$=(o=1)=>n.canGoBack(o,f,v),K=o=>{const{routerAnimation:d,routerDirection:l,routerLink:g}=o;h("push",l,d),a.push(g)},s=o=>{const d=n.getFirstRouteInfoForTab(o);d&&a.go(d.position-v)},c=(o,d)=>{if(!d)return;const l=n.getCurrentRouteInfoForTab(o),[g]=d.split("?");l?(m=Object.assign(Object.assign({},m),{routerAction:"push",routerDirection:"none",tab:o}),l.pathname===g?a.push({path:l.pathname,query:ce(l.search)}):a.push({path:g,query:ce(l.search)})):w(g,"push","none",void 0,o)},r=o=>{const d=Object.assign({},n.current(f,v));d.tab!==o&&(d.tab=o,n.update(d));const l=n.findLastLocation(d);d.pushedByRoute!==d.lastPathname&&l?.tab!==o&&(d.pushedByRoute=void 0,n.update(d))},u=o=>{O.push(o)},h=(o="push",d="forward",l,g)=>{m={routerAction:o,routerDirection:d,routerAnimation:l,tab:g}};return{handleNavigate:w,getLeavingRouteInfo:()=>n.current(f,v),handleNavigateBack:V,handleSetCurrentTab:r,getCurrentRouteInfo:Q,canGoBack:$,navigate:K,resetTab:s,changeTab:c,registerHistoryChangeListener:u,goBack:o=>{h("pop","back",o),a.back()},goForward:o=>{h("push","forward",o),a.forward()}}},We=e=>{const a={},t=()=>Object.keys(a).length,n=r=>{delete a[r]},f=r=>a[r],v=(r,u)=>{r.ionPageElement=u,r.ionRoute=!0,r.matchedRoute.instances={default:r.vueComponentRef.value}},E=(r,u)=>w(r.pathname,u,!1),m=(r,u,h=!0)=>w(r.lastPathname,u,h),O=(r,u)=>w(r,u,!1),V=(r,u)=>u.find(h=>{if(h.pathname===r)return h}),w=(r,u,h=!1)=>{const L=_=>{if(h&&!_.ionRoute||r==="")return!1;const y=e.resolve(r).matched.find(o=>o===_.matchedRoute);if(y)return y.path.includes(":")&&r!==_.pathname?!1:_};if(u){const _=a[u];if(!_)return;const y=e?_.find(L):V(r,_);if(y)return y}else for(const _ in a){const y=a[_],o=V(r,y);if(o)return o}};return{unmountLeavingViews:(r,u,h=1)=>{const L=a[r];if(!L)return;const _=L.findIndex(y=>y===u);for(let y=_+1;y<_-h;y++){const o=L[y];o.mount=!1,o.ionPageElement=void 0,o.ionRoute=!1,o.matchedRoute.instances={}}},mountIntermediaryViews:(r,u,h=1)=>{const L=a[r];if(!L)return;const _=L.findIndex(y=>y===u);for(let y=_+1;y<_+h;y++)L[y].mount=!0},clear:n,findViewItemByRouteInfo:E,findLeavingViewItemByRouteInfo:m,findViewItemByPathname:O,createViewItem:(r,u,h,L,_)=>({id:De("viewItem"),pathname:L.pathname,outletId:r,matchedRoute:h,ionPageElement:_,vueComponent:u,vueComponentRef:Oe(),ionRoute:!1,mount:!1,exact:L.pathname===h.path,params:L.params,vueComponentData:{}}),getChildrenToRender:r=>a[r]?a[r].filter(u=>u.mount):[],add:r=>{const{outletId:u}=r;a[u]?a[u].push(r):a[u]=[r]},remove:(r,u)=>{if(!u)throw Error("outletId required");const h=a[u];h&&(a[u]=h.filter(L=>L.id!==r.id))},registerIonPage:v,getViewStack:f,size:t}},je=e=>{const a=Object.assign({},e);delete a.tabsPrefix;const t=we(a),n=xe(e,t),f=We(t),v=t.install.bind(t);t.install=m=>{m.provide("navManager",n),m.provide("viewStacks",f),v(m)};const E=t.isReady.bind(t);return t.isReady=()=>E(),t},qe=e=>Ve(e);I();var oe=S([]);function Fe(e){oe.value=e}function _a(){oe.value=[]}var se=oe;Be();var Ne=i(()=>import("./BaseLayout-C4r9p2LQ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73])),ze=i(()=>import("./BaseLayout-C_qqkuoS.js"),__vite__mapDeps([74,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,75,76,77,62,63,78,79,80,64,66,81,82,83,84,85,86,87,67,68,69,88,89,90,91,92,93,70,71,94,95,72,96,97,98])),de=()=>i(()=>import("./Collection-GeBjotbQ.js"),__vite__mapDeps([99,2,3,6,8,35,27])),Ge=()=>i(()=>import("./AuthView-Dcbv6rqv.js"),__vite__mapDeps([100,2,3,6,8,35,27])),Qe=()=>i(()=>import("./Logout-Rxg6Zpg9.js"),__vite__mapDeps([101,2,3,30,6,26,25,27,28,102,1,103,31,70,71])),$e=()=>i(()=>import("./Home-DdXuwHMh.js"),__vite__mapDeps([104,2,3,6,8,35,27])),he=()=>i(()=>import("./Info-C4a0NmBJ.js"),__vite__mapDeps([105,2,3,6,8,35,27])),Ke=()=>i(()=>import("./Libraries-D0eP43BU.js"),__vite__mapDeps([106,2,3,6,8,35,27])),B=()=>i(()=>import("./Library-BXQTAj-U.js"),__vite__mapDeps([107,2,3,6,8,35,27])),Je=()=>i(()=>import("./PaginatedLibrary-pg9adx_L.js"),__vite__mapDeps([108,2,3,6,8,35,27])),Xe=()=>i(()=>import("./Person-DmWEpS1Y.js"),__vite__mapDeps([109,2,3,6,8,35,27])),Ye=()=>i(()=>import("./Search-BgKf2O1C.js"),__vite__mapDeps([110,2,3,6,8,35,27])),Ze=()=>i(()=>import("./Watch-Djbi9ZoA.js"),__vite__mapDeps([111,2,3,6,8,35,27])),et=()=>i(()=>import("./Artist-BlhBCsn7.js"),__vite__mapDeps([112,2,3,6,8,35,27])),W=()=>i(()=>import("./Cards-CyRIvVxi.js"),__vite__mapDeps([113,2,3,6,8,35,27])),j=()=>i(()=>import("./List-BBQvTtQD.js"),__vite__mapDeps([114,2,3,6,8,35,27])),tt=()=>i(()=>import("./Start-srTO5ULU.js"),__vite__mapDeps([115,2,3,6,8,35,27])),at=()=>i(()=>import("./Logs-UxSgZKfL.js"),__vite__mapDeps([116,2,3,6,8,35,27])),fe=()=>i(()=>import("./Plugins-C4Qq1orU.js"),__vite__mapDeps([117,2,3,6,8,35,27])),ve=()=>i(()=>import("./Schedule-21N99VcW.js"),__vite__mapDeps([118,2,3,6,8,35,27])),rt=()=>i(()=>import("./Metadata-qKo5HsUC.js"),__vite__mapDeps([119,2,3,6,8,35,27])),nt=()=>i(()=>import("./Ripper-NZdE4b5g.js"),__vite__mapDeps([120,2,3,6,8,35,27])),ot=()=>i(()=>import("./Specials-C8HwOibc.js"),__vite__mapDeps([121,2,3,6,8,35,27])),st=()=>i(()=>import("./Activity-C07JXUOp.js"),__vite__mapDeps([122,2,3,6,8,35,27])),it=()=>i(()=>import("./Devices-Bx0BtcXZ.js"),__vite__mapDeps([123,2,3,6,8,35,27])),ct=()=>i(()=>import("./Dlna-Dxz29OYt.js"),__vite__mapDeps([124,2,3,6,8,35,27]));function ut(){return i(()=>import("./EncoderProfiles-DdC3pBn3.js"),__vite__mapDeps([125,2,3,6,8,35,27]))}var lt=()=>i(()=>import("./General-CSYlcKpw.js"),__vite__mapDeps([126,2,3,6,8,35,27])),pt=()=>i(()=>import("./Libraries-CDZg4gTf.js"),__vite__mapDeps([127,2,3,6,8,35,27]));function _e(){return i(()=>import("./Notifications-AnMq4FK8.js"),__vite__mapDeps([128,2,3,6,8,35,27]))}var mt=()=>i(()=>import("./System-CjcRHA5e.js"),__vite__mapDeps([129,2,3,6,8,35,27])),dt=()=>i(()=>import("./Users-86V3jyQa.js"),__vite__mapDeps([130,2,3,6,8,35,27])),ht=()=>i(()=>import("./Controls-DBpwxc6s.js"),__vite__mapDeps([131,2,3,6,8,35,27])),ft=()=>i(()=>import("./Display-B3Ptcn9M.js"),__vite__mapDeps([132,2,3,6,8,35,27])),vt=()=>i(()=>import("./Profile-B2-6nvpn.js"),__vite__mapDeps([133,2,3,6,8,35,27])),_t=()=>i(()=>import("./Subtitles-CLf43UOQ.js"),__vite__mapDeps([134,2,3,6,8,35,27])),bt=()=>i(()=>import("./Cast-DfLZuiiD.js"),__vite__mapDeps([135,2,3,6,8,35,27])),Rt=()=>i(()=>import("./Download-DX6icU4J.js"),__vite__mapDeps([136,2,3,6,8,35,27])),yt=()=>i(()=>import("./SelectServers-Bh_XWbIm.js"),__vite__mapDeps([137,2,3,6,8,35,27])),gt=()=>i(()=>import("./NoServers-xxtkKTzh.js"),__vite__mapDeps([138,2,3,6,8,35,27])),Pt=()=>i(()=>import("./ServerOffline-OXi7g1q6.js"),__vite__mapDeps([139,2,3,6,8,35,27])),Et=()=>i(()=>import("./PostInstall-2XDFxO_y.js"),__vite__mapDeps([140,2,3,6,8,35,27])),Lt=()=>i(()=>import("./NotFound-D2iwUNhY.js"),__vite__mapDeps([141,2,3,6,8,35,27]));function C(){return Ae.value?Ne:ze}const At=[{path:"/",redirect:"/home"},{path:"/",component:C,children:[{path:"",redirect:"/home"},{path:"home",name:"Home",component:$e},{path:"search",name:"Search",component:Ye,props:{type:"all"}},{path:"libraries",name:"Libraries",component:Ke,beforeEnter:(e,a,t)=>{const n=se.value.at(0);n&&!Ae.value?t({path:n.link}):t()}},{path:"libraries/:id/letter/:letter",name:"Library paginated",strict:!0,component:B},{path:"libraries/:id",name:"Library",strict:!0,component:B},{path:"specials",name:"Specials",component:B},{path:"specials/:id",name:"Special",component:de},{path:"genre",name:"Genres",component:B},{path:"genre/:id",name:"Genre",component:B},{path:"collection",name:"Collections",component:B},{path:"collection/:id",name:"Collection",component:de},{path:"person",name:"People",component:Je},{path:"person/:id",name:"Person",component:Xe},{path:"movie/:id",name:"Movie",component:he},{path:"tv/:id",name:"TV Show",component:he},{path:":type/:id/watch",name:"Watch",component:Ze}]},{path:"/music",component:C,children:[{path:"music",redirect:"/music/start"},{path:"start",name:"Music Start",component:tt},{path:"artists",redirect:"/music/artists/_"},{path:"artists/:letter",name:"Artists",component:W,props:{type:"artists"}},{path:"artist/:id",name:"Artist",component:et},{path:"albums",redirect:"/music/albums/_"},{path:"albums/:letter",name:"Albums",component:W,props:{type:"albums"}},{path:"album/:id",name:"Album",component:j},{path:"genres",redirect:"/music/genres/letter/_"},{path:"genres/letter/:letter",name:"Music Genres",component:W,props:{type:"genres"}},{path:"genres/:id",name:"Music Genre",component:j},{path:"playlists",name:"Music Playlists",component:W,props:{type:"playlists"}},{path:"playlists/:id",name:"Music Playlist",component:j,props:{type:"playlists"}},{path:"tracks",name:"Tracks",component:j,props:{type:"tracks"}}]},{path:"/dashboard",component:C,children:[{path:"dashboard",name:"System",redirect:"/dashboard/system"},{path:"system",name:"System",component:mt},{path:"general",name:"General",component:lt},{path:"users",name:"Users",component:dt},{path:"users/:id",name:"Edit user",component:()=>i(()=>import("./Edit-DljwDHTq.js"),__vite__mapDeps([142,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,143,144,38,47,61,39,62,41,63,78,79,44,57,64,46,145,84,81,82,83,49,1,50,146,94,95,92,93,70,71,147,72]))},{path:"libraries",name:"Dashboard Libraries",component:pt},{path:"libraries/:id",name:"Dashboard Library",component:()=>i(()=>import("./Edit-Cwq6z4Z9.js"),__vite__mapDeps([148,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,61,78,79,44,57,64,47,145,84,81,82,83,49,1,50,146,94,95,149,150,151,92,93,70,71,72]))},{path:"specials",name:"Dashboard Specials",component:ot},{path:"specials/:id",name:"Dashboard Special",component:()=>i(()=>import("./Edit-BonhAn0y.js"),__vite__mapDeps([152,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,61,39,153,41,63,78,79,44,57,64,47,145,84,81,82,83,49,1,50,146,94,95,92,93,70,71,72]))},{path:"devices",name:"Devices",component:it},{path:"devices/:id",name:"Device",component:()=>i(()=>import("./Show-BcKASPVE.js"),__vite__mapDeps([154,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,61,39,78,79,44,57,145,84,64,47,81,82,83,49,1,50,146,94,95,70,71,72,155,156]))},{path:"ripper",name:"Ripper",component:nt},{path:"encoderprofiles",name:"Encoder Profiles",component:ut},{path:"encoderprofiles/:id",name:"Encoder Profile",component:()=>i(()=>import("./Edit-GAM1hyDf.js"),__vite__mapDeps([157,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,61,78,79,44,57,145,84,64,47,81,82,83,49,1,50,146,94,95,70,71,72]))},{path:"notifications",name:"Notifications",component:_e},{path:"notifications/:id",name:"Notification",component:_e},{path:"metadata",name:"Metadata",component:rt},{path:"activity",name:"Activity",component:st},{path:"dlna",name:"DLNA",component:ct},{path:"logs",name:"Logs",component:at},{path:"plugins",name:"Plugins",component:fe},{path:"plugins/:id",name:"Plugin",component:fe},{path:"schedule",name:"Scheduled Tasks",component:ve},{path:"schedule/:id",name:"Scheduled Task",component:ve}]},{path:"/preferences",component:C,children:[{path:"display",name:"Display",component:ft},{path:"profile",name:"Profile",component:vt},{path:"controls",name:"Controls",component:ht},{path:"subtitles",name:"Subtitles",component:_t}]},{path:"/dev",component:C,children:[{path:"cast",name:"Cast",component:bt},{path:"download",name:"Download",component:Rt}]},{path:"/setup",component:C,children:[{path:"setup",redirect:"setup/select-servers"},{path:"select-servers",name:"Select Server",component:yt},{path:"no-servers",name:"No Servers",component:gt},{path:"server-offline",name:"Server offline",component:Pt},{path:"post-install",name:"Post Install",component:Et}]},{path:"/auth",name:"Auth",component:Ge,meta:{public:!0,bypassSetup:!0}},{path:"/logout",name:"Logout",component:Qe,meta:{public:!0,bypassSetup:!0}},{path:"/:catchAll(.*)*",component:Lt,props:{message:"Page not found",status:404}}];var Dt=["code","state","session_state"];function Tt(e){return e.beforeEach((a,t,n)=>{if(!re("capacitor")){const f={...a.query};let v=!1;Dt.forEach(E=>{f[E]&&(delete f[E],v=!0)});for(const E in f)f[E]?.includes("?")&&(f[E]=f[E].split("?").at(0));v&&e.replace({query:f}).then()}n()})}var St=Tt,It={Home:["/libraries","/music"],Libraries:[]},Te=new Map,wt=3e4;function kt(e){const a=Te.get(e);return!(a&&Date.now()-a<wt)}function Ot(e){Te.set(e,Date.now())}async function Vt(e){if(!T.value?.serverApiUrl||!kt(e))return;const a=e.split("/").filter(Boolean);if(!pe.getQueryData(a)){Ot(e);try{await pe.prefetchQuery({queryKey:a,queryFn:async()=>{const t=await N().get(e);return t.data?.data??t.data},staleTime:1e3*60*5})}catch{}}}function Bt(e){const a=It[e.name];!a||a.length===0||requestIdleCallback(()=>{a.forEach(t=>{Vt(t)})})}function Ct(e){return e.afterEach(a=>{a.name&&(document.title=a.name),re("capacitor")||setTimeout(()=>{document.querySelector(".ion-page .ion-page-invisible")?.classList.remove("ion-page-invisible")},500),Bt(a)})}var Mt=Ct;I();const Se=Le("redirectUrl","/home"),ba=D(()=>R.currentRoute.value.path==="/search"),Ra=D(()=>R.currentRoute.value.path==="/music/search"),ya=D(()=>R.currentRoute.value.path==="/home"||R.currentRoute.value.path==="/"),Ht=D(()=>R.currentRoute.value.path.startsWith("/music")),ga=D(()=>R.currentRoute.value.path.startsWith("/libraries")||R.currentRoute.value.path.startsWith("/library")),Pa=D(()=>R.currentRoute.value.path.startsWith("/dashboard")),Ea=D(()=>R.currentRoute.value.path.startsWith("/preferences")),La=D(()=>se.value?.some?.(e=>e.type==="music")),Aa=D(()=>R.currentRoute.value.path.startsWith("/music/album")),Da=D(()=>R.currentRoute.value.path.startsWith("/music/artist")),Ta=D(()=>R.currentRoute.value.path.startsWith("/music/playlist")),Sa=D(()=>R.currentRoute.value.path.startsWith("/music/song")),Ia=D(()=>R.currentRoute.value.path.startsWith("/music/queue")),wa=D(()=>R.currentRoute.value.path.startsWith("/music/artist/")||R.currentRoute.value.path.startsWith("/music/album/")),ka=D(()=>Ht.value?"/search?from=music":"/search");I();const be=S(!1),Re=S(!1),ye=S(!1),k=S([]);function Ut(e){k.value=e.map(a=>({...a,serverApiUrl:a.serverApiUrl.replace(/\/$/,""),serverBaseUrl:a.serverBaseUrl.replace(/\/$/,"")}))}var Oa=k;I();var X=S(!1);function xt(){return new Promise((e,a)=>{if(X.value){e();return}if(se.value.length>0||ye.value){e();return}if(!T.value){e();return}N(5).get("setup/libraries").then(({data:t})=>{Fe(t.data),Ce.value=!0,ye.value=!0,e(),X.value=!0,R.replace(Se.value).then()}).catch(async()=>{X.value=!0,await R.replace({name:"Server offline"}).then(()=>e()),e()})})}var Wt=xt;I();var M=S([]),jt=D(()=>M.value);function qt(e){M.value=e}function Va(e){const a=M.value.indexOf(e);a!==-1&&(M.value=M.value.toSpliced(a,1)),ne().delete(`/messages/${e.id}`).catch(console.error)}function Ba(){M.value.forEach(e=>e.read=!0),ne().patch("/messages",{read:!0}).catch(console.error)}var Ca=jt;I();var ge=S(!1);function Ft(){return new Promise((e,a)=>{if(ge.value)return e();ne().get("/app_config").then(async({data:t})=>{if(!t?.data){await R.replace({name:"Select Server"}),a("No data returned from API");return}return Ut(t.data.servers),qt(t.data.messages??[]),Me(t.data.notifications??[]),te({...P.value,locale:t.data.locale,name:t.data.name,avatarUrl:t.data.avatarUrl,features:t.data.features,moderator:!!t.data.moderator}),ge.value=!0,k.value.length===0?await R.replace({name:"No Servers"}).then(()=>e()):k.value.length===1?ee(k.value[0]):k.value.length>1&&localStorage.getItem("currentServer")?ee(k.value.find(n=>n.id===localStorage.getItem("currentServer"))):k.value.length>1&&await R.replace({name:"Select Server"}),e()}).catch(t=>{a(t)})})}var Nt=Ft;I();function zt(){return x.accessToken?Promise.resolve():new Promise(e=>{ae(T,t=>{t&&(x.setBaseUrl(t.serverBaseUrl),x.setAccessToken(P.value.accessToken))}),x.setBaseUrl(T.value?.serverBaseUrl),x.setAccessToken(P.value.accessToken);const a=Le("nmplayer-music-supports-audio-context",!1);a.value=!1,e()})}var Gt=zt;I();var Pe=S(!1);function Qt(){return new Promise(async(e,a)=>{if(Pe.value)return e();if(Pe.value=!0,!T.value||!P.value)return P.value.features??={},P.value.features.nomercyConnect=!1,e();let t=new F(T.value.serverBaseUrl,P.value.accessToken,"videoHub");return await t.setup(),le(t),setTimeout(()=>{ae(T,async n=>{!n||!P.value||!t||(t.connection?.stop(),await t.dispose(),t=new F(n.serverBaseUrl,P.value.accessToken,"videoHub"),await t.setup(),le(t))})},5e3),e()})}var $t=Qt;I();var Ee=S(!1);function Kt(){return new Promise(async(e,a)=>{if(Ee.value)return e();if(Ee.value=!0,!T.value||!P.value||!P.value.features?.nomercyConnect)return P.value.features??={},P.value.features.nomercyConnect=!1,e();let t=new F(T.value.serverBaseUrl,P.value.accessToken,"musicHub");return await t.setup(),ue(t),setTimeout(()=>{ae(T,async n=>{console.log("Current server changed, reinitializing music socket",n),!(!n||!P.value||!t)&&(t.connection?.stop(),await t.dispose(),t=new F(n.serverBaseUrl,P.value.accessToken,"musicHub"),await t.setup(),ue(t))})},5e3),e()})}var Jt=Kt;I();var Y=S(!1);function Xt(){return new Promise((e,a)=>{if(Y.value){e();return}if(!T.value){e();return}N(5).get("setup/permissions").then(({data:t})=>{ee({...T.value,is_owner:t.owner,is_manager:t.manager}),Y.value=!0,e()}).catch(async()=>{Y.value=!0,await R.replace({name:"Server offline"}).then(()=>e()),e()})})}var Yt=Xt;I();var q=S(!1);function Zt(){return new Promise((e,a)=>{if(q.value){e();return}if(Re.value){e();return}if(!T.value){e();return}N(5).get("setup/server-info").then(({data:t})=>{if(be.value=t.data?.setup_complete??!1,Re.value=!0,!t.data?.setup_complete){console.log("Server setup not complete, redirecting to post-installation page"),Se.value="/setup/post-install",R.replace({name:"Post Install"}).then(()=>e()),q.value=!0;return}q.value=!0,e()}).catch(async t=>{be.value=!0,q.value=!0,await R.replace({name:"Server offline"}).then(()=>a(t)),a(t)})})}var ea=Zt;function ta(){return new Promise((e,a)=>{if(P.value?.id){e();return}try{const{isAuthenticated:t}=Z();if(t.value){const{keycloak:n,roles:f,token:v}=Z();return te({...P.value,accessToken:v.value}),n.value?.idTokenParsed&&te({...P.value,id:n.value?.idTokenParsed.sub,name:n.value?.idTokenParsed.display_name??n.value?.idTokenParsed?.name,email:n.value?.idTokenParsed?.email,moderator:f.value.includes("nova")}),e()}else He().then(()=>{t.value=!0,e()})}catch{a(new Error("Not authenticated"))}})}var aa={sequential:[ta,Nt],parallel:[Yt,ea,Wt],deferred:[Gt,$t,Jt]},ra=aa;async function na(e,a){if(Array.isArray(e)){for(const t of e)await t().catch(n=>{throw new Error(n)});a?.();return}if(e.sequential)for(const t of e.sequential)await t().catch(n=>{throw new Error(n)});e.parallel&&await Promise.all(e.parallel.map(t=>t().catch(n=>{throw new Error(n)}))),a?.(),e.deferred&&queueMicrotask(()=>{Promise.all(e.deferred.map(t=>t().catch(console.error)))})}var z=je({history:qe("/"),routes:At});z.beforeResolve(async(e,a,t)=>{if(re("capacitor")&&e.name!=="Auth"&&!P.value.accessToken){const{isAuthenticated:n}=Z();if(!n.value)return t({name:"Auth"})}if(e.name==="Auth")return t();await na(ra,t).catch(()=>t({name:"Server offline"}))});St(z);Mt(z);var R=z;export{ka as C,Fe as E,Se as S,_a as T,Ea as _,ye as a,Sa as b,La as c,Pa as d,ya as f,Ta as g,Ra as h,Va as i,Aa as l,Ht as m,Ba as n,Oa as o,ga as p,Ca as r,Ut as s,R as t,Da as u,Ia as v,se as w,wa as x,ba as y};
