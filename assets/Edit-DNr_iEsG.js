import{$ as F,ab as J,a_ as W,k as B,c as S,o as U,p as r,j as o,x as p,a0 as s,z as a,A as g,ae as X,d as u,a6 as Y,f as Z,w as E,b as ee}from"./vue-ionic-CBB0-pQG.js";import{u as te}from"./useServerClient-BsVFddfj.js";import{_ as oe}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-CtHGqhj4.js";import{a as L,bf as le,c as $}from"./index-BNKy1t0Z.js";import{_ as ae}from"./Modal.vue_vue_type_script_setup_true_lang-BSRwTDW4.js";import{u as se,g as b}from"./primevue-C9gt6Imy.js";import{_ as C}from"./Button.vue_vue_type_script_setup_true_lang-B1f6aX8I.js";import"./vendor-Dgtccx1h.js";import"./icons-BW5E66pf.js";import"./rxjs-BCp2L9Rn.js";import"./media-C2AqgyMX.js";import"./api-BBofn2cc.js";import"./swiper-D00Cnjmx.js";import"./useInfiniteServerClient-C9I-YiMh.js";import"./useMounted-Bk7seVGG.js";import"./FloatingBackButton.vue_vue_type_script_setup_true_lang-BvmS4d3n.js";import"./OptimizedIcon.vue_vue_type_script_setup_true_lang-C9WRDkJA.js";import"./ScrollContainer.vue_vue_type_script_setup_true_lang-B20zWu0F.js";import"./RipperOverlay.vue_vue_type_script_setup_true_lang-Dqydmqqy.js";import"./Button.vue_vue_type_script_setup_true_lang-A-Ix-vU7.js";import"./music-player-B5ZIX8zK.js";const re={class:"my-6 text-sm text-auto-10"},ie=F({__name:"DeleteSpecialModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},name:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},setup(m){const d=m,{t:c}=J(),h=W(),k=se();function l(){L().delete(`dashboard/specials/${d.id}`).then(({data:n})=>{k.add({severity:n.status==="ok"?"success":"error",summary:le(n.message,...n.args??[]),life:2e3}),h.invalidateQueries({queryKey:["dashboard","specials"]}),!d.noRedirect&&window.history.back()}),d.close()}return(n,q)=>{const w=B("Button");return U(),S(ae,{close:m.close,open:m.open,"max-width":"max-w-xl",params:{special:d.name},title:"Delete special {{special}}"},{actions:r(()=>[a(w,{id:"yes",onclick:l,"end-icon":"trash",color:"red",type:"button"},{default:r(()=>[g(p(s(c)("Delete")),1)]),_:1}),a(w,{id:"no","on-click":m.close,type:"button",color:"text-auto-alpha-11",variant:"text"},{default:r(()=>[g(p(s(c)("Cancel")),1)]),_:1},8,["on-click"])]),default:r(()=>[o("div",re,p(s(c)("Are you sure you want to delete this special?")),1)]),_:1},8,["close","open","params"])}}}),ne={class:"flex flex-col gap-5 col-span-5 col-start-1 2xl:col-start-1"},de={class:"flex flex-col gap-2"},ce={class:"flex flex-col gap-2"},ue={class:"flex gap-4 w-full"},pe={class:"flex flex-col gap-4 w-full"},me={class:"flex flex-col gap-2"},fe={class:"flex flex-col gap-4 w-full"},ve={class:"flex flex-col gap-2"},xe={class:"flex flex-col gap-4 col-span-2 row-start-1 col-start-1 2xl:col-start-6"},ge={class:"flex flex-col gap-5"},we={class:"flex flex-col gap-2"},Qe=F({__name:"Edit",setup(m){var D,I,N,R,T;const d=X(),{data:c,error:h,refetch:k}=te({path:"dashboard/specials",queryKey:["dashboard","specials"]}),l=u();Y(()=>{k()}),Z(()=>{c.value&&(l.value=c.value.find(e=>e.id===d.params.id))}),E(c,e=>{e&&(l.value=e.find(t=>t.id===d.params.id))});const n=u(!1);function q(){n.value=!0}function w(){n.value=!1}function P(){window.history.back()}const _=u(((D=l.value)==null?void 0:D.title)||""),y=u(((I=l.value)==null?void 0:I.overview)||""),f=u(((N=l.value)==null?void 0:N.backdrop)||""),v=u(((R=l.value)==null?void 0:R.poster)||""),x=u(((T=l.value)==null?void 0:T.logo)||"");E(l,e=>{e&&(_.value=e==null?void 0:e.title,y.value=e==null?void 0:e.overview,f.value=e==null?void 0:e.backdrop,v.value=e==null?void 0:e.poster,x.value=e==null?void 0:e.logo)});function G(){var e;L().patch(`/dashboard/specials/${(e=l.value)==null?void 0:e.id}`,{title:_.value,overview:y.value,backdrop:f.value,poster:v.value,logo:x.value}).then(({data:t})=>{console.log(t)})}return(e,t)=>{var M;const H=B("Textarea"),V=B("Image");return U(),S(oe,{"grid-style":1,error:s(h),title:"Special: {{title}}",params:{title:(M=l.value)==null?void 0:M.title}},{cta:r(()=>t[5]||(t[5]=[])),actions:r(()=>[a(C,{id:"remove",type:"button",variant:"text","start-icon":"folderRemove",class:"children:text-gray-400 children:transition-colors children:duration-100 children:hover:text-red-dark-8",color:"text-auto-alpha-11",onClick:q},{default:r(()=>[g(p(e.$t("Remove")),1)]),_:1}),a(C,{id:"cancel",type:"button",variant:"text",color:"white",onClick:P},{default:r(()=>[g(p(e.$t("Cancel")),1)]),_:1}),a(C,{id:"save",type:"button",class:"ml-auto",color:"theme",onClick:G},{default:r(()=>[g(p(e.$t("Save")),1)]),_:1})]),default:r(()=>{var A,K,O,Q,j,z;return[o("div",ne,[o("div",de,[t[6]||(t[6]=o("label",{for:"name"},"Name",-1)),a(s(b),{id:"name",modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=i=>_.value=i),variant:"filled",class:"w-full"},null,8,["modelValue"])]),o("div",ce,[t[7]||(t[7]=o("label",{for:"overview"},"Overview",-1)),a(H,{id:"overview",modelValue:y.value,"onUpdate:modelValue":t[1]||(t[1]=i=>y.value=i),variant:"filled",rows:8,class:"w-full"},null,8,["modelValue"])]),o("div",ue,[o("div",pe,[o("div",me,[t[8]||(t[8]=o("label",{for:"backdrop"},"Backdrop",-1)),a(s(b),{id:"backdrop",modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=i=>f.value=i),variant:"filled",class:"w-full"},null,8,["modelValue"])]),a(V,{src:`${(A=s($))==null?void 0:A.serverBaseUrl}/images/original${f.value}`,alt:"Image",width:"100%",class:"mx-2",preview:""},null,8,["src"])]),o("div",fe,[o("div",ve,[t[9]||(t[9]=o("label",{for:"logo"},"Logo",-1)),a(s(b),{id:"logo",modelValue:x.value,"onUpdate:modelValue":t[3]||(t[3]=i=>x.value=i),variant:"filled",class:"w-full"},null,8,["modelValue"])]),a(V,{src:`${(K=s($))==null?void 0:K.serverBaseUrl}/images/original${x.value}`,alt:"Image",width:"100%",class:"mx-2",preview:""},null,8,["src"])])])]),o("div",xe,[o("div",ge,[o("div",we,[t[10]||(t[10]=o("label",{for:"poster"},"Poster",-1)),a(s(b),{id:"poster",modelValue:v.value,"onUpdate:modelValue":t[4]||(t[4]=i=>v.value=i),variant:"filled",class:"w-full"},null,8,["modelValue"])]),a(V,{src:`${(O=s($))==null?void 0:O.serverBaseUrl}/images/original${v.value}`,alt:"Image",width:"100%",class:"mx-2",preview:""},null,8,["src"])])]),(Q=l.value)!=null&&Q.id?(U(),S(ie,{key:0,id:(j=l.value)==null?void 0:j.id,name:(z=l.value)==null?void 0:z.title,close:w,open:n.value},null,8,["id","name","open"])):ee("",!0)]}),_:1},8,["error","params"])}}});export{Qe as default};
