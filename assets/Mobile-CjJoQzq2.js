import{C as g,Et as k,G as y,H as P,J as _,S as r,Tt as n,c as w,gt as h,j as S,ot as C,y as M}from"./i18n-Cs-AFcrY.js";import{qi as l}from"./ionic-XwZpO7IE.js";import"./vue-core-CKeWI2Kt.js";import"./query-28IwY2wK.js";import{Gt as B,Ht as I,Kt as T,Qt as U,U as c,Wi as p,Xi as x,Zt as A,cn as D,k as a,s as o,wa as j}from"./index-BnnbGJJT.js";import"./useInfiniteServerClient-BaqYBifM.js";import{t as z}from"./useServerClient-BaNodTh9.js";import{a as G,i as H,n as L,o as N,r as q}from"./VideoPlayer-DystnOgy.js";import"./buttons-wPW-REbV.js";w();var E=S({__name:"Mobile",setup(F){const{data:i}=z({}),e=h();function u(t){const s={muted:!1,controls:!1,preload:"auto",debug:!1,autoPlay:!0,playlist:t?.filter(b=>!!b.id)??[],controlsTimeout:3e3,doubleClickDelay:300,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],accessToken:j.value?.accessToken||localStorage.getItem("access_token")||"",basePath:x.value?.serverBaseUrl,imageBasePath:"https://app.nomercy.tv/tmdb-images",forceTvMode:(l("android")||l("ios"))&&!l("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||l("capacitor"),renderAhead:100};e.value=q("player1").setup(s),e.value?.once("back",()=>{history.state.back?a.back():a.replace("/")});const d=new H;e.value?.registerPlugin("desktopUI",d),e.value?.usePlugin("desktopUI");const v=new G;e.value?.registerPlugin("autoSkip",v),e.value?.usePlugin("autoSkip");const m=new N;e.value?.registerPlugin("sync",m),e.value?.usePlugin("sync");const f=new L;e.value?.registerPlugin("octopus",f),e.value?.usePlugin("octopus"),e.value?.once("play",()=>{e.value?.enterFullscreen()}),e.value?.on("playlistComplete",()=>{history.state.back?a.back():a.replace("/")}),e.value?.on("dispose",async()=>{await U(),await B(),history.state.back?a.back():await a.replace("/")}),e.value?.on("back",()=>{e.value?.dispose()}),e.value?.on("play",()=>{o(!0)}),e.value?.on("pause",()=>{o(!1)}),e.value?.on("ready",async()=>{await A(),await D(),await T(),c.stop()}),e.value?.on("item",()=>{e.value?.play()}),I.addListener("backButton",()=>{e.value?.emit("back-button-hyjack"),e.value?.dispose()})}return C(i,t=>{t?.length&&u(t)}),y(()=>{c.stop(),u(i.value)}),P(()=>{e.value?.dispose(),o(!1)}),(t,s)=>(_(),g(M,{to:"body"},[r("div",{class:k([{"mb-28":n(p),"mb-0":!n(p)},"absolute inset-0 flex h-full w-full overflow-clip bg-black z-1199 text-white"])},[...s[0]||(s[0]=[r("div",{id:"player1",class:"group nomercyplayer"},null,-1)])],2)]))}}),Y=E;export{Y as default};
