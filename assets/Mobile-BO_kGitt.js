import{aG as D,be as K,e4 as j,az as N,c9 as q,aP as P,aM as G,L as S,ax as O,aW as Q,ch as U,K as m,d1 as W,j as c,o as t,a7 as T,x as $,aI as o,bQ as A,a as h,c as u,bn as H,C as _,cu as g,bh as z,h as b,F as f,w as V,e5 as J,bO as X}from"./index-D8FyVDZ7.js";import{_ as Y}from"./MediaCard.vue_vue_type_script_setup_true_lang-DDyrp0Fj.js";import{_ as Z}from"./PersonCard.vue_vue_type_script_setup_true_lang-DvJ8JoJ9.js";import{_ as ee,a as se}from"./EmptyCard.vue_vue_type_script_setup_true_lang-KLPSJPVa.js";import"./CardIndicator.vue_vue_type_script_setup_true_lang-DreWTo21.js";import"./NoResultImage.vue_vue_type_script_setup_true_lang-CitE5OF3.js";const ne="grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-5 5xl:grid-cols-9 tv:grid-cols-6",oe="grid-cols-2 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-7 3xl:grid-cols-9 4xl:grid-cols-10 5xl:grid-cols-[repeat(14,minmax(0,1fr))] tv:grid-cols-6",pe=D({__name:"Mobile",setup(te){var E;const d=K(),{data:l,fetchNextPage:y,hasNextPage:k,isError:le}=j({queryKey:["libraries",(E=d.params.id??d.name)==null?void 0:E.split("&").at(0)],limit:20,keepForever:!0});N(()=>{q(),P(null),G(null),document.dispatchEvent(new Event("sidebar")),setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)}),S(l,s=>{s&&setTimeout(()=>{document.dispatchEvent(new Event("indexer"))},1e3)});const F=O(()=>{var n,i,r,p;const s=(p=(r=(i=(n=l.value)==null?void 0:n.pages)==null?void 0:i[0])==null?void 0:r.data)==null?void 0:p[0];return s&&Q.value&&s.media_type!=="person"&&s.media_type!=="genres"});U(()=>{stop(),P(null)});const w=m(),C=m();N(()=>{var s,n;C.value=d.params.id??d.name,k.value&&(((n=(s=l==null?void 0:l.value)==null?void 0:s.pages)==null?void 0:n.length)??0)<50&&y(),document.addEventListener("scrollToDiv",i=>{var r;(r=w.value)==null||r.scrollTo({top:i.detail.top-100,behavior:"smooth"})})}),W(()=>{document.dispatchEvent(new Event("indexer"))}),S(l,s=>{var n;s&&k.value&&((n=s==null?void 0:s.pages)==null?void 0:n.length)<50&&y()});const L=m(),R=m(),x=(s,n)=>{L.value=n,R.value.show(s)};return(s,n)=>(t(),c(o(X),null,{default:T(()=>[$(o(A),{fullscreen:!0,class:"ion-padding",style:{"--padding-bottom":"0"}},{default:T(()=>{var i;return[n[0]||(n[0]=h("div",{class:"fixed top-0 pt-safe w-full bg-slate-light-1 dark:bg-slate-dark-3 z-1199"},null,-1)),h("div",{ref_key:"lib",ref:w,class:"pt-safe-offset-10 flex h-auto w-full pr-8 overflow-auto scroll-container"},[(t(),u("div",{class:_(["z-0 flex flex-col gap-4 rounded-3xl border-0 w-available scrollbar-none border-auto-3",{"pb-2":o(g)&&o(z),"children:pb-4 sm:children:pb-3":!o(g)&&o(z)}]),key:(i=o(H).currentRoute.value.params)==null?void 0:i.id},[h("div",{class:_(`grid w-full gap-4 scroll-smooth music-showing:pb-0 pl-1 py-4 ${F.value?ne:oe}`)},[o(l)?(t(!0),u(f,{key:0},V(o(l).pages??[],(r,p)=>{var M,B,I;return t(),u(f,{key:p},[r.data.length>0?(t(!0),u(f,{key:0},V(r.data??[],(e,v)=>(t(),u(f,null,[(e==null?void 0:e.media_type)==="tv"||(e==null?void 0:e.media_type)=="movie"||(e==null?void 0:e.media_type)=="collection"||(e==null?void 0:e.media_type)=="specials"?(t(),c(Y,{key:e.id,data:e,onContextMenu:a=>x(a,e),index:v},null,8,["data","onContextMenu","index"])):(e==null?void 0:e.media_type)==="person"?(t(),c(Z,{key:e.id+"_person",data:e,onContextMenu:a=>x(a,e),index:v},null,8,["data","onContextMenu","index"])):(e==null?void 0:e.media_type)==="genres"?(t(),c(ee,{key:e.id+"_genres",data:e,onContextMenu:a=>x(a,e),index:v},null,8,["data","onContextMenu","index"])):b("",!0)],64))),256)):((I=(B=(M=o(l).pages)==null?void 0:M[0])==null?void 0:B.data)==null?void 0:I.length)==0?(t(),c(se,{key:1})):b("",!0)],64)}),128)):b("",!0)],2)],2)),$(J,{id:C.value,class:_(["w-8 !-mt-4 pt-4 pb-4 mb-0 fixed right-0 bg-slate-light-1 dark:bg-slate-dark-3",{"h-available":!o(g),"h-inherit top-24":o(g)}])},null,8,["id","class"])],512)]}),_:1})]),_:1}))}});export{pe as default};
