import{At as y,C as n,Dt as q,Et as a,S as t,T as v,Y as s,Z as X,_t as u,c as g,g as E,j as b,k as e,kt as V,lt as i,st as z,w as h,x as O}from"./i18n-DBb78QAI.js";import{qi as A}from"./ionic-DNKsarlx.js";import{m as H,y as Q}from"./vue-core-C9HAaO_1.js";import"./primevue-CDzFprnl.js";import"./query-Dwz_k4KB.js";import{Ai as B,Bn as Z,Et as j,Fa as K,K as w,U as F,X as U,Z as r,at as M,b as f,g as W,mt as x,v as Y,wt as G,xr as J,yt as ee}from"./index-A9ZXfM_l.js";import{t as ae}from"./DropdownMenu-Cyc87lbu.js";import"./ScrollContainer-COxBM-C8.js";import{n as te,t as le}from"./LyricsOverlay-CWdyljV_.js";import{n as se,t as oe}from"./ChristmasSnow-DrQcrv5O.js";import{t as m}from"./MusicButton-DhCeCVMv.js";import"./BannerButton-MxYoA4eI.js";import{t as re}from"./MediaLikeButton-DCuQ0Y0N.js";import{n as ie,r as ne,t as ue}from"./TrackLinks-DP659EbH.js";import{a as ce,c as _e,i as de,n as fe,o as pe,r as ve,s as me,t as he}from"./EqButton-CfBf-EIL.js";import{n as xe,r as we}from"./swiper-qApLbPOj.js";g();var ye=["data-size"],ge={key:0,class:"whitespace-pre text-center leading-none text-2xs"},be={key:1,class:"whitespace-pre-line text-pretty text-left leading-5 text-base"},ke={class:"flex flex-col gap-1 min-h-[85px]"},Pe=b({__name:"TopRow",setup(k){const l=O(()=>r.value?.album_track?.[0]?.name);return(c,_)=>(s(),v("div",{"data-size":a(x),class:"flex h-16 w-full items-center justify-between"},[e(m,{onclick:()=>a(w)(),class:"!min-w-12",label:"close"},{default:i(()=>[e(f,{class:"h-6 w-6",icon:"chevronDown"})]),_:1},8,["onclick"]),t("div",{class:q([{"mt-2":!a(A)("capacitor")},"relative flex flex-col gap-1"])},[l.value?(s(),v("span",ge,y(c.$t("Now playing")),1)):h("",!0),l.value?(s(),v("div",be,y(l.value),1)):h("",!0)],2),e(ae,{class:"!min-w-12 flex items-center justify-center",orientation:"vertical"},{button:i(()=>[e(f,{class:"h-6 w-6",icon:"menuDotsVertical"})]),default:i(()=>[t("div",ke,[e(m,{onclick:()=>a(w)(),label:"close"},{default:i(()=>[e(f,{class:"h-6 w-6",icon:"chevronDown"})]),_:1},8,["onclick"]),e(m,{onclick:()=>a(w)(),label:"close"},{default:i(()=>[e(f,{class:"h-6 w-6",icon:"chevronDown"})]),_:1},8,["onclick"]),e(m,{onclick:()=>a(w)(),label:"close"},{default:i(()=>[e(f,{class:"h-6 w-6",icon:"chevronDown"})]),_:1},8,["onclick"])])]),_:1})],8,ye))}}),ze=Pe;g();var Be={class:"flex w-full flex-col justify-end gap-8"},Se={class:"my-1 flex w-full items-center"},Te={class:"z-10 flex w-full flex-col gap-2 overflow-clip"},Ce={class:"w-full overflow-clip text-xl font-semibold line-clamp-1"},De={class:"overflow-hidden leading-none w-inherit line-clamp-1"},$e=["data-size"],je=b({__name:"TrackRow",setup(k){function l(){x.value===B.compact?j(B.full):j(B.compact)}return(c,_)=>(s(),v("div",Be,[t("div",Se,[t("div",Te,[t("h6",Ce,[t("span",De,y(a(r)?.name),1)]),t("div",{"data-size":a(x),class:"mb-1 inline-flex w-fit gap-1 overflow-hidden whitespace-nowrap text-xs line-clamp-1 hover:animate-pause"},[a(r)?(s(),n(ue,{key:0,id:a(r).id,data:a(r).artist_track,onclick:l,type:"artists"},null,8,["id","data"])):h("",!0)],8,$e)]),a(r)?(s(),n(re,{key:a(r)?.id+a(r)?.favorite,data:a(r),class:"flex",color:"var(--color-theme-8)"},null,8,["data"])):h("",!0)])]))}}),Fe=je;g();var Me=["data-size"],qe=["data-size"],Ee=b({__name:"ButtonContainer",setup(k){const l=K("nmplayer-music-supports-audio-context",!1);return(c,_)=>(s(),v(E,null,[t("div",{"data-size":a(x),class:"flex w-full items-center justify-between px-6"},[e(ve),e(me),e(ie,{class:"!h-14 !w-14 !bg-focus/50 !rounded-full shadow-[0_1px_0_0_rgba(255,255,255,0.20)_inset,0_-1px_0_0_rgb(from_var(--color-slate-9)_r_g_b/60%)_inset,0_22px_30px_-4px_rgb(from_var(--color-slate-9)_r_g_b/70%)] dark:shadow-[0_1px_0_0_rgba(255,255,255,0.20)_inset,0_-1px_0_0_rgb(from_var(--color-slate-1)_r_g_b/30%)_inset,0_22px_30px_-4px_rgb(from_var(--color-slate-1)_r_g_b/70%)] hover:shadow-[0_1px_0_0_rgba(255,255,255,0.20)_inset,0_-1px_0_0_rgb(from_var(--color-slate-11)_r_g_b/60%)_inset,0_22px_30px_-4px_rgb(from_var(--color-slate-11)_r_g_b/70%)] dark:hover:shadow-[0_1px_0_0_rgba(255,255,255,0.20)_inset,0_-1px_0_0_rgb(from_var(--color-slate-1)_r_g_b/30%)_inset,0_22px_30px_-4px_rgb(from_var(--color-slate-1)_r_g_b/70%)] active:!shadow-none active:!dark:shadow-none"}),e(_e),e(de)],8,Me),t("div",{"data-size":a(x),class:"mb-12 flex h-12 w-full justify-between px-6 gap-2 z-10"},[e(ne,{ref:"deviceOverlay",class:"!w-auto !justify-start"},null,512),e(fe,{class:"ml-auto"}),a(l)?(s(),n(he,{key:0})):h("",!0),e(ce,{ref:"queueOverlay"},null,512),e(se),e(te)],8,qe)],64))}}),Oe=Ee;g();var Ie={class:"relative z-0 flex h-screen min-h-screen flex-col items-center justify-between gap-2 w-inherit scrollbar-none text-surface-12 overflow-clip"},Re={class:"frosting w-available max-w-2xl h-auto aspect-square shadow mx-6 relative items-center flex"},Le={class:"frosting relative mx-3 mb-0 -mt-8 rounded-2xl pt-10 w-available bg-focus/60 shadow text-surface-12"},Ne={class:"absolute top-0 z-10 flex w-full items-center rounded-t-2xl pr-2 pl-4 font-semibold"},Xe=b({__name:"FullPlayer",setup(k){const l=u("small"),c=u(),_=u(),I=u(),P=u(0),S=u(),T=u("lazy"),C=u([r.value,...Object.values(ee.value)]);z(l,()=>{setTimeout(()=>{l.value==="small"?document.querySelector("#MobilePlayer")?.scrollTo({top:window.innerHeight/2,behavior:"smooth"}):document.querySelector("#MobilePlayer")?.scrollTo({top:999990,behavior:"smooth"})},200)},{immediate:!0}),z(M,o=>{o&&(I.value=Z.value,setTimeout(()=>{T.value="eager"},50))}),z(r,o=>{if(!o)return;const d=C.value.findIndex(p=>p.id===o.id);P.value=d,S.value?.$el?.swiper.slideTo(d)});const D=O(()=>J(r.value?.color_palette?.cover,20,160));function R(o){o.touches.diff!==0&&(o.touches.startX>o.touches.currentX&&o.touches.diff<-100?F.next():o.touches.startX<o.touches.currentX&&o.touches.diff>100&&F.previous())}function L(){_.value&&(l.value=l.value==="small"?"full":"small",l.value==="small"?(c.value?.$el?.scrollToTop(),setTimeout(()=>{_.value.style.height="25rem"},500)):(_.value.style.height=`${window.innerHeight*.915}px`,setTimeout(()=>{c.value.$el?.scrollToBottom()},0)))}async function N(){G(!1)}return(o,d)=>(s(),n(a(Q),{id:"fullPlayer",key:"fullPlayer",breakpoints:[0,1],"initial-breakpoint":1,"is-open":a(M),onWillDismiss:N},{default:i(()=>[e(a(H),{ref_key:"content",ref:c,class:q({"is-open":l.value==="full"}),fullscreen:!0,style:V(D.value?`--color-theme-8: ${D.value};`:"")},{default:i(()=>[e(oe),t("div",Ie,[d[0]||(d[0]=t("div",{class:"pointer-events-none absolute inset-0 w-full transition-all duration-500",style:{background:"linear-gradient(to bottom, hsl(from var(--color-theme-8) h s 30%), hsl(from var(--color-theme-8) h s 5%))"}},null,-1)),e(ze,{class:"pt-safe px-6"}),(s(),n(a(xe),{key:a(U),ref_key:"swiper",ref:S,"initial-slide":P.value,loop:!0,"slides-per-view":1,class:"w-available swiper isolate z-0 mb-4",onTouchEnd:R},{default:i(()=>[(s(!0),v(E,null,X(C.value??[],(p,$)=>(s(),n(a(we),{key:p.id,"data-id":p.id,"data-index":$,class:"h-full"},{default:i(()=>[t("div",Re,[(s(),n(W,{key:p.id,data:p,loading:$===P.value?"eager":T.value,"class-name":"pointer-events-none relative aspect-square h-auto overflow-clip rounded-md w-inherit shadow"},null,8,["data","loading"]))])]),_:2},1032,["data-id","data-index"]))),128))]),_:1},8,["initial-slide"])),e(Fe,{class:"px-6"}),e(pe,{class:"children:!mx-0 gap-4 px-6"}),e(Oe)]),t("div",Le,[t("div",Ne,[t("span",null,y(o.$t("Lyrics")),1),e(m,{onclick:L,class:"ml-auto",label:"expand"},{default:i(()=>[l.value==="full"?(s(),n(f,{key:0,class:"h-5 w-5",icon:"arrowExitFullscreen"})):(s(),n(f,{key:1,class:"h-5 w-5",icon:"arrowEnterFullscreen"}))]),_:1})]),d[1]||(d[1]=t("div",{class:"pointer-events-none absolute inset-0 flex items-center justify-center rounded-xl bg-black opacity-3"},null,-1)),t("div",{ref_key:"lyricsContainer",ref:_,class:"relative w-full mb-0 flex-col overflow-auto scroll-smooth rounded-b-2xl p-4 transition-transform duration-150 h-[25rem]"},[e(le,{class:"sm:hidden"})],512)])]),_:1},8,["class","style"])]),_:1},8,["is-open"]))}}),oa=Y(Xe,[["__scopeId","data-v-41e13d42"]]);export{oa as default};
