import{bQ as kt,n as g,bC as it,aX as nt,br as wt,bR as vt,bM as M,bS as R,bN as A,bT as E,bP as ot,bU as St,aW as H,d as B,t as rt,v as $t,h as lt,u as _t,o as Ct}from"./index-CH0I4ZsZ.js";import{_ as dt}from"./BigPlayButton.vue_vue_type_script_setup_true_lang-DTpsnDwt.js";import{_ as z}from"./OptimizedIcon.vue_vue_type_script_setup_true_lang-DHzcpnxP.js";import{_ as Et}from"./MusicButton.vue_vue_type_script_setup_true_lang-Bxa8PaPU.js";import{M as ht}from"./MediaLikeButton-Bipg-pb5.js";import{_ as ct}from"./ShareButton.vue_vue_type_script_setup_true_lang-hycgRUzi.js";import{$ as L,ab as pt,B as O,h as w,o as s,j as i,c as y,b as h,z as m,a0 as e,p as T,v as $,Q as C,F as gt,a8 as yt,d as D,w as N,f as Tt,k as xt,x as _,A as bt,G as Rt,q as jt}from"./vue-ionic-Db_NiJFp.js";import{_ as At}from"./FavoriteImage.vue_vue_type_script_setup_true_lang-DFIgC-YQ.js";import{_ as G}from"./CoverImage.vue_vue_type_script_setup_true_lang-BQDoFA4P.js";import{_ as qt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{b8 as zt}from"./vendor-Dgtccx1h.js";import{o as Lt}from"./contextMenuItems-BCgW0O1O.js";import{E as Pt}from"./EqSpinner-CK0DbSUP.js";import{_ as ut}from"./TrackLinks.vue_vue_type_script_setup_true_lang-Wcjz6End.js";import{_ as Ht}from"./DropdownMenu.vue_vue_type_script_setup_true_lang-DCkFLs10.js";import{_ as Mt}from"./BannerButton.vue_vue_type_script_setup_true_lang-DfxO9biF.js";import{_ as mt}from"./PlayerIcon.vue_vue_type_script_setup_true_lang-dBhx_TVd.js";import{_ as ft}from"./Marquee.vue_vue_type_script_setup_true_lang-DLkodIWL.js";const Bt={class:"flex sm:gap-4 items-center py-4 px-4 sm:px-8 w-full pl-3 pr-4 sm:pr-10 h-20 z-40","data-index":"1"},Dt={class:"relative hidden h-fit cursor-pointer items-center justify-center text-auto-12/11 focus-within:text-auto sm:flex mr-auto"},Nt=["value"],Ot={class:"absolute top-2 right-2 bottom-2 flex items-center justify-center"},Ae=L({__name:"ControlHeader",props:{data:{type:Object,required:!1},filter:{type:String,required:!0}},emits:["filter-change"],setup(t){const d=t,b=pt();function c(){var l;g.setQueue(((l=d.data)==null?void 0:l.tracks)??[])}const f=O(()=>{var l;return{title:((l=d.data)==null?void 0:l.name)??"",url:`https://app.nomercy.tv${b.fullPath}`}});return(l,p)=>{var a,o;return s(),w(gt,null,[p[1]||(p[1]=i("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom bg-focus"},null,-1)),i("div",Bt,[(a=t.data)!=null&&a.tracks?(s(),y(dt,{key:0,data:t.data,class:"hidden sm:flex"},null,8,["data"])):h("",!0),i("div",Dt,[i("input",{id:"search",value:t.filter,class:"bg-transparent border-auto-12/5 border-2 rounded-md focus-visible:!border-auto-12/9 focus-visible:text-current placeholder-current p-2",placeholder:"Filter…",type:"text",name:"search",onInput:p[0]||(p[0]=r=>{var n;return l.$emit("filterChange",(n=r.target)==null?void 0:n.value)})},null,40,Nt),i("div",Ot,[m(z,{icon:"searchMagnifyingGlass",class:"!w-7"})])]),m(ct,{"share-data":f.value,class:"!p-0 text-white hidden sm:flex sm:ml-auto"},null,8,["share-data"]),m(ht,{data:t.data,color:"var(--color-focus)","class-name":"!w-8 !h-8"},null,8,["data"]),m(ct,{class:"!p-0 text-white sm:hidden"}),e(kt)?(s(),y(Et,{key:1,id:"add",onclick:c,class:"",label:"add"},{default:T(()=>[m(z,{icon:"add",class:"!w-7"})]),_:1})):h("",!0)]),i("div",{class:$(["sm:hidden sticky left-full -mt-16 z-1199 flex justify-center items-center gap-2 mr-4 h-auto",{"top-11":!e(C)("capacitor"),"top-10":e(C)("capacitor")}]),style:{"box-shadow":"0 1px 2px 0 rgba(16, 24, 40, 0.05)"}},[(o=t.data)!=null&&o.tracks?(s(),y(dt,{key:0,data:t.data},null,8,["data"])):h("",!0)],2)],64)}}}),Gt={key:0,class:"relative my-4 flex w-full flex-1 flex-shrink-0 flex-col items-start justify-start gap-4 flex-grow-1 sm:hidden"},Ut=["innerHTML"],Vt={class:"relative hidden flex-1 flex-shrink-0 flex-col items-start justify-start gap-1 flex-grow-1 sm:flex"},Ft={class:"text-left font-semibold uppercase text-white"},It=["innerHTML"],Qt={class:"relative flex items-center justify-start gap-2"},Wt={key:0,class:"flex items-center gap-4 text-sm font-medium"},Kt={key:0,class:"relative aspect-square h-12 w-12 overflow-clip rounded-full min-w-12"},Xt={key:1,class:"text-left text-sm font-medium text-white"},Jt={class:"text-left text-sm font-medium text-white"},Yt={key:2,class:"text-left text-sm font-medium text-white"},Zt={class:"text-left text-sm font-medium text-white"},qe=L({__name:"ArtistHeader",props:{data:{type:Object,required:!1}},setup(t){const d=t,{t:b}=yt(),c=D(""),f=D(),l=D();function p(a){var o;if(a)return wt(b,((o=a==null?void 0:a.tracks)==null?void 0:o.map(r=>vt(r.duration)).reduce((r,n)=>r+n,0))??0)}return N(d,a=>{a&&(c.value=p(a.data))}),Tt(()=>{c.value=p(d.data)}),N(f,a=>{if(!a)return;const o=a.getContext("2d",{willReadFrequently:!0,desynchronized:!0}),r=()=>{var u,v,S,k;const n=(v=(u=g._audioElement1)==null?void 0:u.motion)==null?void 0:v.canvas;n&&l.value&&(g._audioElement1.isPlaying()?((S=g._audioElement1)==null||S.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(l.value).backgroundColor]}),g._audioElement1.motion.gradient="theme",a.width=n.width,a.height=n.height,o.clearRect(0,0,a.width,a.height),o.drawImage(n,0,0,a.width,a.height)):g._audioElement2.isPlaying()&&((k=g._audioElement2)==null||k.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(l.value).backgroundColor]}),g._audioElement2.motion.gradient="theme",a.width=n.width,a.height=n.height,o.clearRect(0,0,a.width,a.height),o.drawImage(n,0,0,a.width,a.height))),requestAnimationFrame(r)};r()}),N(l,a=>{var o,r,n,u;!a||!((o=g._audioElement1)!=null&&o.motion)||!((r=g._audioElement2)!=null&&r.motion)||((n=g._audioElement1)==null||n.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(a).backgroundColor]}),g._audioElement1.motion.gradient="theme",(u=g._audioElement2)==null||u.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(a).backgroundColor]}),g._audioElement2.motion.gradient="theme")}),(a,o)=>{var n,u,v,S,k,j,x,P,U,V,F,I,Q,W,K,X,J,Y,Z,tt;const r=xt("RouterLink");return s(),w("div",{id:"artist-header",class:$(["relative z-0 flex flex-col items-end justify-start text-white sm:flex-row sm:gap-9 sm:pt-8 sm:pb-8 sm:px-8",{"pt-safe-offset-12 px-8 gap-4":e(C)("capacitor"),"pt-24 px-6 gap-2 sm:gap-12":!e(C)("capacitor")}])},[i("div",{id:"audio-color",ref_key:"audioColor",ref:l,class:"absolute top-0 left-0 h-full w-full overflow-clip bg-focus"},null,512),o[0]||(o[0]=i("div",{class:"absolute top-0 left-0 h-full w-full overflow-clip bg-black/50"},null,-1)),i("div",{class:$(["frosting relative mx-auto flex aspect-square w-80 max-w-[90%] flex-col items-center justify-center overflow-clip rounded-xl bg-gradient-to-br min-w-64 bg-theme-7 from-theme-5 via-theme-7 to-theme-11 shadow",{"-mt-4":e(C)("capacitor"),"":!e(C)("capacitor")}])},[(n=t.data)!=null&&n.cover?(s(),y(G,{key:0,id:"image",data:t.data,size:250,"class-name":"aspect-square rounded-xl w-full",loading:"eager"},null,8,["data"])):(u=t.data)!=null&&u.id?(s(),y(At,{key:1,id:t.data.id,type:t.data.type,class:"aspect-square rounded-xl w-full"},null,8,["id","type"])):h("",!0)],2),(v=t.data)!=null&&v.name?(s(),w("div",Gt,[i("div",{class:"w-full text-2xl font-semibold whitespace-pre-line",innerHTML:e(it)(((S=t.data)==null?void 0:S.name)??"Songs you like","text-sm line-clamp-1")},null,8,Ut)])):h("",!0),i("div",Vt,[i("p",Ft,_((j=(k=t.data)==null?void 0:k.type)==null?void 0:j.replace(/s$/u,"")),1),i("div",{class:"w-full text-5xl font-semibold line-clamp-2 leading-[130%] whitespace-pre",innerHTML:e(it)(((x=t.data)==null?void 0:x.name)??"Songs you like","text-2xl line-clamp-1")},null,8,It),i("div",Qt,[e(nt)?(s(),w("div",Wt,[((U=(P=t.data)==null?void 0:P.artists)==null?void 0:U.length)===1&&((F=(V=t.data)==null?void 0:V.artists)!=null&&F[0].cover)?(s(),w("div",Kt,[m(G,{id:"image",data:(Q=(I=t.data)==null?void 0:I.artists)==null?void 0:Q[0],size:250,"class-name":"h-full w-full",loading:"eager"},null,8,["data"])])):h("",!0),m(r,{to:((K=(W=t.data)==null?void 0:W.artists)==null?void 0:K[0].link)??"#",class:"text-sm empty:hidden"},{default:T(()=>{var et,at,st;return[bt(_(((st=(at=(et=t.data)==null?void 0:et.artists)==null?void 0:at[0])==null?void 0:st.name)??"Various artists"),1)]}),_:1},8,["to"])])):h("",!0),(X=t.data)!=null&&X.tracks&&e(nt)?(s(),w("p",Xt," • ")):h("",!0),i("p",Jt,_((Y=(J=t.data)==null?void 0:J.tracks)==null?void 0:Y.length)+" "+_(((tt=(Z=t.data)==null?void 0:Z.tracks)==null?void 0:tt.length)===1?e(b)("song"):e(b)("songs")),1),c.value?(s(),w("p",Yt," • ")):h("",!0),i("p",Zt,_(c.value),1)])])],2)}}}),te=["onclick"],ee={class:""},q=L({__name:"SortButton",props:{name:{type:String,required:!0},sortingType:{type:String,required:!0},iconSpacer:{type:String,default:""}},setup(t){const{t:d}=yt();function b(f){console.log("handleSortChange",f),A.value===f?ot(M.value===R.asc?R.desc:R.asc):ot(R.asc),St(f)}function c(f){var p,a,o,r,n,u,v,S;const l=f.target;if(f.key==="ArrowUp"){const k=(a=(p=l.parentElement)==null?void 0:p.parentElement)==null?void 0:a.previousElementSibling;k&&k.nodeName==="BUTTON"||k.nodeName==="A"?k.focus():(o=document.querySelector("#playList"))==null||o.focus()}else f.key==="ArrowDown"?(u=(n=(r=l.parentElement)==null?void 0:r.parentElement)==null?void 0:n.nextElementSibling)==null||u.focus():f.key==="ArrowLeft"?(v=l.previousElementSibling)==null||v.focus():f.key==="ArrowRight"&&((S=l.nextElementSibling)==null||S.focus())}return(f,l)=>(s(),w("button",{"no-ring":"",class:"relative cursor-pointer items-center focus-visible:underline focus-visible:underline-offset-2",onclick:()=>b(t.sortingType),onkeyup:c},[i("span",ee,_(e(d)(t.name)),1),e(M)===e(R).asc&&e(A)===t.sortingType&&e(A)!==e(E).index?(s(),y(z,{key:0,icon:"chevronUp",class:$(`w-6 h-6 ${t.iconSpacer}`)},null,8,["class"])):e(M)===e(R).desc&&e(A)===t.sortingType&&e(A)!==e(E).index?(s(),y(z,{key:1,icon:"chevronDown",class:$(`w-6 h-6 ${t.iconSpacer}`)},null,8,["class"])):h("",!0)],8,te))}}),ae=L({__name:"SortHeader",setup(t){return(d,b)=>(s(),w("div",{id:"sortHeaderElement",class:$(["sticky -mx-4 px-4 z-30 mt-4 block h-10 content-center items-center justify-start self-stretch bg-transparent text-sm font-medium transition-all duration-200 w-available group/track sm:w-available sm:-top-px",{"top-safe-offset-10":e(C)("capacitor"),"top-safe-offset-16":!e(C)("capacitor")}])},[b[0]||(b[0]=i("span",{id:"sorterChild",class:"absolute inset-0 h-10 sm:rounded-t-2xl overflow-clip w-full transition-all duration-200"},null,-1)),i("span",{class:$([{"album-grid":e(H),"artist-grid":!e(H)},"grid justify-start items-center self-stretch pr-3 sm:px-3 rounded-lg sm:hover:bg-slate-lightA-6 dark:hover:bg-slate-darkA-6 text-auto-12 group/track text-sm font-medium py-2 z-0 group/track gap-2"])},[m(q,{id:"sortIndex","aria-label":d.$t("Sort by index"),"sorting-type":e(E).index,class:"!flex justify-center","icon-spacer":"absolute left-6",name:"#"},null,8,["aria-label","sorting-type"]),m(q,{"aria-label":d.$t("Sort by name"),"sorting-type":e(E).name,class:"flex sm:flex","icon-spacer":"w-6 h-6",name:"Title"},null,8,["aria-label","sorting-type"]),m(q,{"aria-label":d.$t("Sort by album"),"sorting-type":e(E).album,class:$(["!hidden sm:!flex",{"opacity-0":!e(H),"opacity-100":e(H)}]),"icon-spacer":"w-6 h-6",name:"Album"},null,8,["aria-label","sorting-type","class"]),m(q,{name:"Release date","aria-label":d.$t("Sort by date"),"sorting-type":e(E).date,class:"!hidden sm:!flex","icon-spacer":"w-6 h-6"},null,8,["aria-label","sorting-type"]),m(q,{"aria-label":d.$t("Sort by duration"),"sorting-type":e(E).duration,class:"!hidden sm:!flex gap-2 flex-row-reverse pr-[4.5rem]","icon-spacer":"w-6 h-6",name:"Duration"},null,8,["aria-label","sorting-type"])],2)],2))}}),ze=qt(ae,[["__scopeId","data-v-ec18ad3c"]]),se=["data-track-id"],ie={class:"flex justify-center text-center"},ne={key:0,class:"group-focus-visible/track:sm:hidden group-hover/track:sm:hidden"},oe={class:"flex h-12 items-center gap-2 overflow-hidden w-available sm:gap-4"},re={class:"flex h-full flex-col justify-evenly overflow-clip w-inherit"},le={class:"flex h-6 flex-nowrap overflow-clip text-left line-clamp-1 w-inherit tracking-wide leading-6 px-2 py-1 -ml-2"},de=["data-size"],ce={class:"flex whitespace-nowrap"},ue={class:"hidden sm:flex invisible max-h-12 md:visible"},me={class:"hidden sm:flex mr-4 monospace sm:mr-0"},Le=L({__name:"TrackRow",props:{data:{type:Object,required:!0},index:{type:Number,required:!0},displayList:{type:Array,required:!0}},setup(t){const d=t,b=pt(),c=O(()=>b.path.startsWith("/music/album")),f=O(()=>b.path.startsWith("/music/artist"));function l(){var p,a,o,r,n,u;if(!((p=_t.value.features)!=null&&p.nomercyConnect)){g.playTrack(d.data,d.displayList);return}(u=Ct.value)==null||u.invoke("StartPlaybackCommand",c.value?"album":"artist",c.value?(o=(a=d.data)==null?void 0:a.album_track.at(0))==null?void 0:o.id:(n=(r=d.data)==null?void 0:r.artist_track.at(0))==null?void 0:n.id,d.data.id)}return(p,a)=>{var r,n,u,v,S,k,j;const o=xt("RouterLink");return s(),w("button",{"data-track-id":(r=t.data)==null?void 0:r.id,onclick:l,class:$(["grid justify-start children:pointer-events-none items-center self-stretch text-auto-12 pr-3 sm:px-3 rounded-lg sm:hover:bg-slate-lightA-6 dark:sm:hover:bg-slate-darkA-6 group/track text-sm font-medium py-2 z-10",{"album-grid":c.value,"artist-grid":!c.value}]),"data-target":"track",tabindex:"0",onContextmenu:a[1]||(a[1]=x=>e(Lt)(x,t.data))},[i("span",ie,[((n=e(B))==null?void 0:n.id)!==t.data.id?(s(),w("span",ne,_(t.index+1),1)):h("",!0),((u=e(B))==null?void 0:u.id)===t.data.id?(s(),y(Pt,{key:1,color:"rgb(var(--color-focus))",playing:e(rt),class:"hidden group-focus-visible/track:sm:!hidden group-hover/track:sm:!hidden"},null,8,["playing"])):h("",!0),((v=e(B))==null?void 0:v.id)===t.data.id&&e(rt)?(s(),y(mt,{key:2,icon:"nmPause",class:"hidden h-6 w-6 group-focus-visible/track:sm:block group-hover/track:sm:block"})):(s(),y(mt,{key:3,icon:"nmPlay",class:"hidden h-6 w-6 group-focus-visible/track:sm:block group-hover/track:sm:block"}))]),i("span",oe,[c.value?(s(),y(G,{key:0,data:t.data,size:100,style:Rt({display:c.value?"none":""}),"class-name":"relative hidden h-12 w-12 overflow-hidden min-w-[3rem] sm:block",loading:"eager"},null,8,["data","style"])):h("",!0),i("span",re,[i("span",le,_(t.data.name),1),i("span",{"data-size":e($t),class:"inline-flex h-6 w-available gap-1 overflow-hidden whitespace-nowrap text-slate-light-3 dark:slate-dark-3 line-clamp-1 text-2xs hover:animate-pause leading-6"},[m(ft,null,{default:T(()=>[t.data&&!f.value?(s(),y(ut,{key:0,id:t.data.id,data:t.data.artist_track,onclick:x=>x.stopPropagation(),"data-target":"artist",type:"artists"},null,8,["id","data","onclick"])):h("",!0),t.data&&!c.value?(s(),y(ut,{key:1,id:t.data.id,data:t.data.album_track,onclick:x=>x.stopPropagation(),"data-target":"album",type:"albums"},null,8,["id","data","onclick"])):h("",!0)]),_:1})],8,de)])]),(s(!0),w(gt,null,jt(t.data.album_track,x=>(s(),w("span",{key:x.id,class:$(["hidden items-center overflow-clip pr-2 line-clamp-2 h-inherit w-inherit sm:flex",{"opacity-0":!c.value,"opacity-100":c.value}]),onClick:a[0]||(a[0]=P=>P.stopPropagation())},[m(o,{to:x==null?void 0:x.link,tabindex:"0","data-target":"album",class:"flex items-center gap-1 whitespace-nowrap font-semibold line-clamp-1 hover:underline focus:underline dark:font-medium pointer-events-auto","no-ring":""},{default:T(()=>[i("span",ce,[m(ft,{text:x.name},null,8,["text"])])]),_:2},1032,["to"])],2))),128)),i("span",ue,_((S=t.data)!=null&&S.date?new Date((k=t.data)==null?void 0:k.date).toLocaleDateString(e(zt).language??"en-US",{year:"numeric",month:"short",day:"2-digit"}):p.$t("Unknown")),1),i("span",{class:$(["flex items-center justify-end gap-2 text-end",{"mr-16":!e(lt)}])},[(s(),y(ht,{key:t.data.id+((j=t.data)==null?void 0:j.favorite),data:t.data,color:"var(--color-focus)"},null,8,["data"])),i("span",me,_(t.data.duration),1),e(lt)?(s(),y(Ht,{key:0,direction:"down"},{button:T(()=>[m(Mt,{class:"",title:""},{default:T(()=>[m(z,{"class-name":"relative h-5 w-5",icon:"menuDotsVertical"})]),_:1})]),default:T(()=>[a[2]||(a[2]=bt(" Hellooo "))]),_:1})):h("",!0)],2)],42,se)}}});export{ze as S,qe as _,Ae as a,Le as b};
