import{$s as x,Ai as F,Bs as J,Ic as X,Is as S,Ks as k,Ls as L,Mc as M,Nc as E,Rs as O,Ta as $,Tc as w,Ts as Z,Ws as D,Xs as G,ba as j,bc as Y,cc as ee,dc as te,ic as ae,js as le,lc as q,oc as P,rc as ne,sc as se,vc as z,ws as A,yc as R}from"./index-DO6J_9Tp.js";import{t as re}from"./button-CFDRyzJl.js";import{_ as B,a as N,c as oe,d as K,f as ue,g as ie,h as ce,i as p,l as de,m as ve,n as I,o as fe,p as U,r as pe,s as me,t as be,u as ge}from"./use-text-value-CU8t7vyJ.js";import{a as Ie,c as b,r as H,s as ye,t as C}from"./render-DXuRPkyW.js";import{t as V}from"./MoooomIcon-c5XNQtse.js";A();function he({container:a,accept:v,walk:m,enabled:s}){z(()=>{let f=a.value;if(!f||s!==void 0&&!s.value)return;let d=Ie(a);if(!d)return;let e=Object.assign(o=>v(o),{acceptNode:v}),r=d.createTreeWalker(f,NodeFilter.SHOW_ELEMENT,e,!1);for(;r.nextNode();)m(r.currentNode)})}A();var Me=(a=>(a[a.Open=0]="Open",a[a.Closed=1]="Closed",a))(Me||{}),we=(a=>(a[a.Pointer=0]="Pointer",a[a.Other=1]="Other",a))(we||{});function Se(a){requestAnimationFrame(()=>requestAnimationFrame(a))}var W=Symbol("MenuContext");function _(a){let v=G(W,null);if(v===null){let m=new Error(`<${a} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(m,_),m}return v}var xe=k({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(a,{slots:v,attrs:m}){let s=w(1),f=w(null),d=w(null),e=w([]),r=w(""),o=w(null),y=w(1);function h(t=n=>n){let n=o.value!==null?e.value[o.value]:null,l=ue(t(e.value.slice()),g=>b(g.dataRef.domRef)),i=n?l.indexOf(n):null;return i===-1&&(i=null),{items:l,activeItemIndex:i}}let u={menuState:s,buttonRef:f,itemsRef:d,items:e,searchQuery:r,activeItemIndex:o,activationTrigger:y,closeMenu:()=>{s.value=1,o.value=null},openMenu:()=>s.value=0,goToItem(t,n,l){let i=h(),g=pe(t===I.Specific?{focus:I.Specific,id:n}:{focus:t},{resolveItems:()=>i.items,resolveActiveIndex:()=>i.activeItemIndex,resolveId:c=>c.id,resolveDisabled:c=>c.dataRef.disabled});r.value="",o.value=g,y.value=l??1,e.value=i.items},search(t){let n=r.value!==""?0:1;r.value+=t.toLowerCase();let l=(o.value!==null?e.value.slice(o.value+n).concat(e.value.slice(0,o.value+n)):e.value).find(g=>g.dataRef.textValue.startsWith(r.value)&&!g.dataRef.disabled),i=l?e.value.indexOf(l):-1;i===-1||i===o.value||(o.value=i,y.value=1)},clearSearch(){r.value=""},registerItem(t,n){let l=h(i=>[...i,{id:t,dataRef:n}]);e.value=l.items,o.value=l.activeItemIndex,y.value=1},unregisterItem(t){let n=h(l=>{let i=l.findIndex(g=>g.id===t);return i!==-1&&l.splice(i,1),l});e.value=n.items,o.value=n.activeItemIndex,y.value=1}};return ge([f,d],(t,n)=>{var l;u.closeMenu(),ie(n,ve.Loose)||(t.preventDefault(),(l=b(f))==null||l.focus())},S(()=>s.value===0)),se(W,u),me(S(()=>ye(s.value,{0:N.Open,1:N.Closed}))),()=>{let t={open:s.value===0,close:u.closeMenu};return C({ourProps:{},theirProps:a,slot:t,slots:v,attrs:m,name:"Menu"})}}}),Re=k({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(a,{attrs:v,slots:m,expose:s}){var f;let d=(f=a.id)!=null?f:`headlessui-menu-button-${B()}`,e=_("MenuButton");s({el:e.buttonRef,$el:e.buttonRef});function r(u){switch(u.key){case p.Space:case p.Enter:case p.ArrowDown:u.preventDefault(),u.stopPropagation(),e.openMenu(),x(()=>{var t;(t=b(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(I.First)});break;case p.ArrowUp:u.preventDefault(),u.stopPropagation(),e.openMenu(),x(()=>{var t;(t=b(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(I.Last)});break}}function o(u){switch(u.key){case p.Space:u.preventDefault();break}}function y(u){a.disabled||(e.menuState.value===0?(e.closeMenu(),x(()=>{var t;return(t=b(e.buttonRef))==null?void 0:t.focus({preventScroll:!0})})):(u.preventDefault(),e.openMenu(),Se(()=>{var t;return(t=b(e.itemsRef))==null?void 0:t.focus({preventScroll:!0})})))}let h=de(S(()=>({as:a.as,type:v.type})),e.buttonRef);return()=>{var u;let t={open:e.menuState.value===0},{...n}=a,l={ref:e.buttonRef,id:d,type:h.value,"aria-haspopup":"menu","aria-controls":(u=b(e.itemsRef))==null?void 0:u.id,"aria-expanded":e.menuState.value===0,onKeydown:r,onKeyup:o,onClick:y};return C({ourProps:l,theirProps:n,slot:t,attrs:v,slots:m,name:"MenuButton"})}}}),ke=k({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(a,{attrs:v,slots:m,expose:s}){var f;let d=(f=a.id)!=null?f:`headlessui-menu-items-${B()}`,e=_("MenuItems"),r=w(null);s({el:e.itemsRef,$el:e.itemsRef}),he({container:S(()=>b(e.itemsRef)),enabled:S(()=>e.menuState.value===0),accept(t){return t.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:t.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(t){t.setAttribute("role","none")}});function o(t){var n;switch(r.value&&clearTimeout(r.value),t.key){case p.Space:if(e.searchQuery.value!=="")return t.preventDefault(),t.stopPropagation(),e.search(t.key);case p.Enter:if(t.preventDefault(),t.stopPropagation(),e.activeItemIndex.value!==null){let l=e.items.value[e.activeItemIndex.value];(n=b(l.dataRef.domRef))==null||n.click()}e.closeMenu(),U(b(e.buttonRef));break;case p.ArrowDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(I.Next);case p.ArrowUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(I.Previous);case p.Home:case p.PageUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(I.First);case p.End:case p.PageDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(I.Last);case p.Escape:t.preventDefault(),t.stopPropagation(),e.closeMenu(),x(()=>{var l;return(l=b(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})});break;case p.Tab:t.preventDefault(),t.stopPropagation(),e.closeMenu(),x(()=>ce(b(e.buttonRef),t.shiftKey?K.Previous:K.Next));break;default:t.key.length===1&&(e.search(t.key),r.value=setTimeout(()=>e.clearSearch(),350));break}}function y(t){switch(t.key){case p.Space:t.preventDefault();break}}let h=fe(),u=S(()=>h!==null?(h.value&N.Open)===N.Open:e.menuState.value===0);return()=>{var t,n;let l={open:e.menuState.value===0},{...i}=a,g={"aria-activedescendant":e.activeItemIndex.value===null||(t=e.items.value[e.activeItemIndex.value])==null?void 0:t.id,"aria-labelledby":(n=b(e.buttonRef))==null?void 0:n.id,id:d,onKeydown:o,onKeyup:y,role:"menu",tabIndex:0,ref:e.itemsRef};return C({ourProps:g,theirProps:i,slot:l,attrs:v,slots:m,features:H.RenderStrategy|H.Static,visible:u.value,name:"MenuItems"})}}}),Te=k({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(a,{slots:v,attrs:m,expose:s}){var f;let d=(f=a.id)!=null?f:`headlessui-menu-item-${B()}`,e=_("MenuItem"),r=w(null);s({el:r,$el:r});let o=S(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===d:!1),y=be(r),h=S(()=>({disabled:a.disabled,get textValue(){return y()},domRef:r}));ne(()=>e.registerItem(d,h)),ae(()=>e.unregisterItem(d)),z(()=>{e.menuState.value===0&&o.value&&e.activationTrigger.value!==0&&x(()=>{var c,T;return(T=(c=b(r))==null?void 0:c.scrollIntoView)==null?void 0:T.call(c,{block:"nearest"})})});function u(c){if(a.disabled)return c.preventDefault();e.closeMenu(),U(b(e.buttonRef))}function t(){if(a.disabled)return e.goToItem(I.Nothing);e.goToItem(I.Specific,d)}let n=oe();function l(c){n.update(c)}function i(c){n.wasMoved(c)&&(a.disabled||o.value||e.goToItem(I.Specific,d,0))}function g(c){n.wasMoved(c)&&(a.disabled||o.value&&e.goToItem(I.Nothing))}return()=>{let{disabled:c,...T}=a,Q={active:o.value,disabled:c,close:e.closeMenu};return C({ourProps:{id:d,ref:r,role:"menuitem",tabIndex:c===!0?void 0:-1,"aria-disabled":c===!0?!0:void 0,onClick:u,onFocus:t,onPointerenter:l,onMouseenter:l,onPointermove:i,onMousemove:i,onPointerleave:g,onMouseleave:g},theirProps:{...m,...T},slot:Q,attrs:m,slots:v,name:"MenuItem"})}}});A();var De={class:"relative flex flex-1 items-center justify-start gap-2 text-base font-semibold"},Pe={class:"flex flex-1 w-full whitespace-nowrap"},Ne=k({__name:"ListControlHeaderMoreMenu",props:{items:{type:Array,required:!0},className:{type:String,required:!1,default:""},title:{type:String,required:!1,default:"More options"},showDelay:{type:Number,required:!1,default:750},hideDelay:{type:Number,required:!1,default:300},noTip:{type:Boolean,required:!1,default:!1}},setup(a){const v=a,m=S(()=>v.items.filter(s=>!s.privileged||s.privileged&&(F.value?.is_owner||F.value?.is_manager)));return(s,f)=>{const d=te("tooltip");return P(),O(M(xe),{as:"div",class:"relative select-none z-[150]"},{default:R(()=>[Y((P(),O(M(re),{"aria-label":s.$t(a.title),as:M(Re),class:E([{[M(j)(M($),"flex flex-nowrap w-fit min-w-fit")]:!0},"data-[headlessui-state='open']:bg-surface-12/6 sm:data-[headlessui-state='open']:bg-surface-12/6"]),unstyled:!0},{default:R(()=>[q(s.$slots,"button",{},()=>[D(V,{icon:"menuDotsHorizontal"})])]),_:3},8,["aria-label","as","class"])),[[d,{showDelay:a.showDelay,hideDelay:a.hideDelay,value:a.noTip?null:s.$t(a.title)},void 0,{top:!0}]]),D(Z,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"scale-95 transform opacity-0","enter-to-class":"scale-100 transform opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"scale-100 transform opacity-100","leave-to-class":"scale-95 transform opacity-0"},{default:R(()=>[D(M(ke),{class:E(M(j)(a.className,"absolute z-10 m-2 ml-8 flex origin-top-right -translate-x-full flex-col gap-2 rounded-xl p-1 shadow-lg bg-surface-3 dark:bg-surface-1 border-1 border-surface-8/11 w-max min-w-min"))},{default:R(()=>[q(s.$slots,"default"),(P(!0),J(le,null,ee(m.value,(e,r)=>(P(),O(M(Te),{key:r,class:E([M($).replace("sm:bg-surface-12/2",""),"w-available min-w-60 !flex"]),as:"div",onClick:e.onclick},{default:R(()=>[L("span",De,[D(V,{icon:e.icon,title:e.title},null,8,["icon","title"]),L("span",Pe,X(s.$t(e.title)),1)])]),_:2},1032,["class","onClick"]))),128))]),_:3},8,["class"])]),_:3})]),_:3})}}}),Be=Ne;export{Re as n,Te as r,Be as t};
