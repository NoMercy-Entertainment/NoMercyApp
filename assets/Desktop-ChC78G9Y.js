import{aw as S,b3 as P,bt as j,I as L,J as B,aF as O,eu as x,ev as y,aE as I,aG as R,e as $,a7 as v,aB as r,ew as W,bZ as D,ex as G,o as d,v as E,bw as J,c as V,a as F,z as M,ck as H,b6 as T,F as Z,u as q,h as A,bE as K,bF as Q}from"./index-Bfb4eeQA.js";import{_ as U,a as X,b as Y,c as ee}from"./TrackRow.vue_vue_type_script_setup_true_lang-BF5rCtHZ.js";import"./BigPlayButton.vue_vue_type_script_setup_true_lang-E5LkswY8.js";import"./FavoriteImage.vue_vue_type_script_setup_true_lang-Cm6jKrl4.js";import"./BannerButton.vue_vue_type_script_setup_true_lang-DozEQle7.js";const se={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},ne=S({__name:"Desktop",setup(te){const w=P(),{data:a}=j({path:w.fullPath,keepForever:!0}),z=L(null),C=L(),n=L("");B(a,e=>{var t,l;e&&(D((e==null?void 0:e.name)??null),m((e==null?void 0:e.tracks)??[],y.value,x.value,n.value),(t=e==null?void 0:e.color_palette)!=null&&t.cover&&I((l=e==null?void 0:e.color_palette)==null?void 0:l.cover))}),B(x,e=>{var t;m(((t=a.value)==null?void 0:t.tracks)??[],y.value,e,n.value)}),B(y,e=>{var t;m(((t=a.value)==null?void 0:t.tracks)??[],e,x.value,n.value)}),B(n,e=>{var t;m(((t=a.value)==null?void 0:t.tracks)??[],y.value,x.value,e)});const m=(e,t,l,s)=>{const i=W(e??[],t,l,G);s==""?C.value=i:C.value=(i==null?void 0:i.filter(o=>{var c,p,u,b,_,k;return((p=o.name)==null?void 0:p.toLowerCase().includes((c=s==null?void 0:s.toLowerCase)==null?void 0:c.call(s)))||((u=o.artist_track)==null?void 0:u.some(h=>{var g;return h.name.toLowerCase().includes((g=s==null?void 0:s.toLowerCase)==null?void 0:g.call(s))}))||((k=(b=o.album_track)==null?void 0:b[0])==null?void 0:k.name.toLowerCase().includes((_=s==null?void 0:s.toLowerCase)==null?void 0:_.call(s)))}))??[]};O(()=>{var e,t,l,s,i,o;(e=a==null?void 0:a.value)!=null&&e.tracks&&m(((t=a==null?void 0:a.value)==null?void 0:t.tracks)??[],y.value,x.value,n.value),(s=(l=a.value)==null?void 0:l.color_palette)!=null&&s.cover&&I((o=(i=a.value)==null?void 0:i.color_palette)==null?void 0:o.cover)}),R(()=>{document.getElementById("navbar")&&(document.getElementById("navbar").style.display="flex"),I(null)});const f=L(),N=()=>{var t,l,s,i,o,c,p,u,b,_,k,h,g;Math.ceil(((s=(l=(t=f.value)==null?void 0:t.$el)==null?void 0:l.getBoundingClientRect())==null?void 0:s.top)??500)<=67?((o=(i=f.value)==null?void 0:i.$el)==null||o.classList.add("!bg-focus"),(u=(p=(c=f.value)==null?void 0:c.$el)==null?void 0:p.firstChild)==null||u.classList.add("!bg-black/50")):((_=(b=f.value)==null?void 0:b.$el)==null||_.classList.remove("!bg-focus"),(g=(h=(k=f.value)==null?void 0:k.$el)==null?void 0:h.firstChild)==null||g.classList.remove("!bg-black/50"))};return(e,t)=>(d(),$(r(Q),null,{default:v(()=>[E(r(K),{fullscreen:!0,class:"flex"},{default:v(()=>[E(J,{autoHide:!0,static:!0,onScroll:N},{default:v(()=>{var l,s,i;return[!r(w).params.id||r(w).params.id&&((l=r(a))==null?void 0:l.id)==r(w).params.id?(d(),V("div",{key:0,ref_key:"main",ref:z,class:"flex flex-col overflow-x-clip w-available h-available sm:rounded-2xl"},[E(U,{data:r(a)},null,8,["data"]),F("div",se,[t[1]||(t[1]=F("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom bg-focus"},null,-1)),(d(),$(X,{key:(s=r(a))==null?void 0:s.id,data:r(a),filter:n.value,onFilterChange:t[0]||(t[0]=o=>n.value=o)},null,8,["data","filter"])),F("div",{class:M(["flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-slate-light-1 dark:bg-slate-dark-2 flex-grow-1 gap-0.5 sm:p-4",{"pb-24":r(H)&&!r(T),"pb-40":r(H)&&r(T),"pb-4 sm:pb-4":!r(H)&&r(T)}])},[(d(),$(Y,{ref_key:"sortHeader",ref:f,key:(i=r(a))==null?void 0:i.id})),(d(!0),V(Z,null,q(C.value,(o,c)=>(d(),$(ee,{key:o.id,data:o,displayList:C.value,index:c},null,8,["data","displayList","index"]))),128))],2)])],512)):A("",!0)]}),_:1})]),_:1})]),_:1}))}});export{ne as default};
//# sourceMappingURL=Desktop-ChC78G9Y.js.map
