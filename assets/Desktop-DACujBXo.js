import{I as Q,C as Ee,c as K,o as D,a as h,t as k,A as Ft,F as Oe,h as at,n as Wt,j as C,r as fr,d as j,b as Ge,s as $,q as V,f9 as hr,fa as pr,fb as mr,fc as gr,b9 as vr,H as Mt,G as br,du as Se,f as We,O as Z,dv as S,dy as zt,cY as Tt,cH as De,l as q,w as re,$ as yr,a$ as Kt,K as Et,fd as _r,E as xr,bu as wr,bh as Er,f6 as Sr,f7 as Dr,f8 as kr,a5 as Bt}from"./index-BzddMR-Z.js";import{_ as we}from"./Button.vue_vue_type_script_setup_true_lang-Doyr5lyq.js";import{A as Cr}from"./AppLogo-BnYC6ckk.js";import{u as me}from"./useQueryClient-CScaY66s.js";import{_ as ft}from"./Modal.vue_vue_type_script_setup_true_lang-BvrA8NPy.js";import{_ as he}from"./MoooomIcon.vue_vue_type_script_setup_true_lang-CfQ3LG-D.js";import{u as It}from"./useServerClient-Q1lUvFmE.js";import{_ as Tr}from"./FolderBrowser.vue_vue_type_script_setup_true_lang-rKB6sI4M.js";import{_ as Ir}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as Or}from"./index-rsbz97XY.js";import"./OptimizedIcon.vue_vue_type_script_setup_true_lang-BC8tj0dR.js";import"./Shadow-B5L7gSR3.js";import"./useQuery-Cjmb8-YN.js";import"./useBaseQuery-FjCDbk8j.js";import"./useInfiniteServerClient-Bd554tV4.js";import"./ScrollContainer.vue_vue_type_script_setup_true_lang-Duu3RqA5.js";const Nr={class:"-mt-12 px-4"},$r={class:"text-xl font-bold text-slate-light-12/80 dark:text-slate-dark-12/80"},Ar={"aria-hidden":"true",class:"mt-4"},Pr={class:"overflow-hidden rounded-full bg-gray-200"},Fr=Q({__name:"Stepper",props:{steps:{type:Array,required:!0},currentStep:{type:String,required:!0}},setup(t){const e=t,n=Ee(()=>e.steps?e.steps?.indexOf(e.currentStep):0),r=Ee(()=>e.steps?(n.value+1)/e.steps.length*100:0);return(o,i)=>(D(),K("div",Nr,[h("h4",$r,k(o.$t(t.currentStep)),1),h("div",Ar,[h("div",Pr,[h("div",{style:Ft(`width: ${r.value}%`),class:"h-1 rounded-full bg-focus transition-all duration-300"},null,4)]),h("div",{style:Ft(`grid-template-columns: repeat(${t.steps.length}, minmax(0, 1fr))`),class:"mt-6 hidden text-sm font-medium text-auto-600 sm:grid"},[(D(!0),K(Oe,null,at(t.steps,a=>(D(),K("div",{key:a,class:"text-center font-semibold"},k(o.$t(a)),1))),128))],4)])]))}}),Mr={class:"mx-auto grid h-available place-content-center px-4 sm:px-6 lg:px-8"},Br={class:"mx-auto w-screen max-w-6xl"},qr={class:"flex h-full w-full flex-col gap-4 overflow-hidden p-8 pb-0 min-h-[80vh] max-h-[80vh] h-available"},jr={class:"mx-auto h-44 w-auto p-2"},Lr={class:"overflow-hidden p-4 h-available"},Rr={class:"mt-auto flex h-16 w-full justify-end gap-4 rounded-b-lg p-4 bg-slate-light-1/70 dark:bg-slate-dark-1/70"},Yr=Q({__name:"Frame",props:{steps:{type:Array,required:!0},nextButtonLocked:{type:Boolean,default:!1},currentStep:{type:String,required:!0},setCurrentStep:{type:Function,required:!0},finish:{type:Function,required:!0}},setup(t){const e=t,n=Ee(()=>e.steps.findIndex(a=>a===e.currentStep)===0),r=Ee(()=>e.steps.findIndex(a=>a===e.currentStep)===e.steps.length-1);function o(){e.steps.findIndex(a=>a===e.currentStep)<e.steps.length-1&&e.setCurrentStep(e.steps[e.steps.findIndex(a=>a===e.currentStep)+1])}function i(){e.steps.findIndex(a=>a===e.currentStep)>0&&e.setCurrentStep(e.steps[e.steps.findIndex(a=>a===e.currentStep)-1])}return(a,s)=>(D(),K("div",Mr,[h("div",Br,[h("div",{class:Wt(["animate-loading","w-full h-full gap-2.5 flex flex-col ml-auto overflow-hidden rounded-xl bg-slate-light-1 dark:bg-slate-dark-1 bg-cover border-2 border-transparent text-start transition-all duration-300"]),style:{"--bg-color":"linear-gradient(rgb(var(--background-auto-3)), rgb(var(--background-auto-3)))","--border-color":`linear-gradient(var(--angle, 45deg),
						rgb(var(--color-focus) / 0.7) 0%,
						rgb(var(--color-focus) / 0.3) 33.33%,
						rgb(var(--color-focus) / 0.14) 66.67%,
						rgb(var(--color-focus) / 0.1) 100%
					)`}},[h("div",qr,[h("div",jr,[C(Cr,{class:"pb-8"})]),C(Fr,{"current-step":t.currentStep,steps:t.steps},null,8,["current-step","steps"]),h("div",Lr,[fr(a.$slots,"default")])]),h("div",Rr,[n.value?Ge("",!0):(D(),j(we,{key:0,id:"yes",class:"ml-auto !w-28",color:"slate",type:"button",variant:"text",onClick:i},{default:$(()=>[V(k(a.$t("Back")),1)]),_:1})),r.value?(D(),j(we,{key:1,id:"cancel",disabled:t.nextButtonLocked,class:"!w-28",color:"theme",type:"button",variant:"default",onClick:t.finish},{default:$(()=>[V(k(a.$t("Finish")),1)]),_:1},8,["disabled","onClick"])):(D(),j(we,{key:2,id:"save",disabled:t.nextButtonLocked,class:"!w-28",color:"theme",type:"button",variant:"default",onClick:o},{default:$(()=>[V(k(a.$t("Next")),1)]),_:1},8,["disabled"]))])])])]))}});/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function qt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function oe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qt(Object(n),!0).forEach(function(r){Vr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tt(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?tt=function(e){return typeof e}:tt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(t)}function Vr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function le(){return le=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},le.apply(this,arguments)}function Xr(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,i;for(i=0;i<r.length;i++)o=r[i],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function Hr(t,e){if(t==null)return{};var n=Xr(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var Gr="1.15.6";function ae(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var se=ae(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ze=ae(/Edge/i),jt=ae(/firefox/i),Re=ae(/safari/i)&&!ae(/chrome/i)&&!ae(/android/i),Ot=ae(/iP(ad|od|hone)/i),Qt=ae(/chrome/i)&&ae(/android/i),Ut={capture:!1,passive:!1};function w(t,e,n){t.addEventListener(e,n,!se&&Ut)}function x(t,e,n){t.removeEventListener(e,n,!se&&Ut)}function lt(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function Zt(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function ee(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&lt(t,e):lt(t,e))||r&&t===n)return t;if(t===n)break}while(t=Zt(t))}return null}var Lt=/\s+/g;function W(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(Lt," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(Lt," ")}}function v(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function Ne(t,e){var n="";if(typeof t=="string")n=t;else do{var r=v(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function Jt(t,e,n){if(t){var r=t.getElementsByTagName(e),o=0,i=r.length;if(n)for(;o<i;o++)n(r[o],o);return r}return[]}function ne(){var t=document.scrollingElement;return t||document.documentElement}function P(t,e,n,r,o){if(!(!t.getBoundingClientRect&&t!==window)){var i,a,s,l,u,c,f;if(t!==window&&t.parentNode&&t!==ne()?(i=t.getBoundingClientRect(),a=i.top,s=i.left,l=i.bottom,u=i.right,c=i.height,f=i.width):(a=0,s=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(e||n)&&t!==window&&(o=o||t.parentNode,!se))do if(o&&o.getBoundingClientRect&&(v(o,"transform")!=="none"||n&&v(o,"position")!=="static")){var _=o.getBoundingClientRect();a-=_.top+parseInt(v(o,"border-top-width")),s-=_.left+parseInt(v(o,"border-left-width")),l=a+i.height,u=s+i.width;break}while(o=o.parentNode);if(r&&t!==window){var p=Ne(o||t),g=p&&p.a,m=p&&p.d;p&&(a/=m,s/=g,f/=g,c/=m,l=a+c,u=s+f)}return{top:a,left:s,bottom:l,right:u,width:f,height:c}}}function Rt(t,e,n){for(var r=pe(t,!0),o=P(t)[e];r;){var i=P(r)[n],a=void 0;if(a=o>=i,!a)return r;if(r===ne())break;r=pe(r,!1)}return!1}function $e(t,e,n,r){for(var o=0,i=0,a=t.children;i<a.length;){if(a[i].style.display!=="none"&&a[i]!==b.ghost&&(r||a[i]!==b.dragged)&&ee(a[i],n.draggable,t,!1)){if(o===e)return a[i];o++}i++}return null}function Nt(t,e){for(var n=t.lastElementChild;n&&(n===b.ghost||v(n,"display")==="none"||e&&!lt(n,e));)n=n.previousElementSibling;return n||null}function U(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==b.clone&&(!e||lt(t,e))&&n++;return n}function Yt(t){var e=0,n=0,r=ne();if(t)do{var o=Ne(t),i=o.a,a=o.d;e+=t.scrollLeft*i,n+=t.scrollTop*a}while(t!==r&&(t=t.parentNode));return[e,n]}function Wr(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function pe(t,e){if(!t||!t.getBoundingClientRect)return ne();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=v(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return ne();if(r||e)return n;r=!0}}while(n=n.parentNode);return ne()}function zr(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function pt(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Ye;function er(t,e){return function(){if(!Ye){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),Ye=setTimeout(function(){Ye=void 0},e)}}}function Kr(){clearTimeout(Ye),Ye=void 0}function tr(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function rr(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function nr(t,e,n){var r={};return Array.from(t.children).forEach(function(o){var i,a,s,l;if(!(!ee(o,e.draggable,t,!1)||o.animated||o===n)){var u=P(o);r.left=Math.min((i=r.left)!==null&&i!==void 0?i:1/0,u.left),r.top=Math.min((a=r.top)!==null&&a!==void 0?a:1/0,u.top),r.right=Math.max((s=r.right)!==null&&s!==void 0?s:-1/0,u.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,u.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var Y="Sortable"+new Date().getTime();function Qr(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(o){if(!(v(o,"display")==="none"||o===b.ghost)){t.push({target:o,rect:P(o)});var i=oe({},t[t.length-1].rect);if(o.thisAnimationDuration){var a=Ne(o,!0);a&&(i.top-=a.f,i.left-=a.e)}o.fromRect=i}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(Wr(t,{target:r}),1)},animateAll:function(r){var o=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var i=!1,a=0;t.forEach(function(s){var l=0,u=s.target,c=u.fromRect,f=P(u),_=u.prevFromRect,p=u.prevToRect,g=s.rect,m=Ne(u,!0);m&&(f.top-=m.f,f.left-=m.e),u.toRect=f,u.thisAnimationDuration&&pt(_,f)&&!pt(c,f)&&(g.top-f.top)/(g.left-f.left)===(c.top-f.top)/(c.left-f.left)&&(l=Zr(g,_,p,o.options)),pt(f,c)||(u.prevFromRect=c,u.prevToRect=f,l||(l=o.options.animation),o.animate(u,g,f,l)),l&&(i=!0,a=Math.max(a,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(e),i?e=setTimeout(function(){typeof r=="function"&&r()},a):typeof r=="function"&&r(),t=[]},animate:function(r,o,i,a){if(a){v(r,"transition",""),v(r,"transform","");var s=Ne(this.el),l=s&&s.a,u=s&&s.d,c=(o.left-i.left)/(l||1),f=(o.top-i.top)/(u||1);r.animatingX=!!c,r.animatingY=!!f,v(r,"transform","translate3d("+c+"px,"+f+"px,0)"),this.forRepaintDummy=Ur(r),v(r,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),v(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){v(r,"transition",""),v(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},a)}}}}function Ur(t){return t.offsetWidth}function Zr(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var ke=[],mt={initializeByDefault:!0},Ke={mount:function(e){for(var n in mt)mt.hasOwnProperty(n)&&!(n in e)&&(e[n]=mt[n]);ke.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),ke.push(e)},pluginEvent:function(e,n,r){var o=this;this.eventCanceled=!1,r.cancel=function(){o.eventCanceled=!0};var i=e+"Global";ke.forEach(function(a){n[a.pluginName]&&(n[a.pluginName][i]&&n[a.pluginName][i](oe({sortable:n},r)),n.options[a.pluginName]&&n[a.pluginName][e]&&n[a.pluginName][e](oe({sortable:n},r)))})},initializePlugins:function(e,n,r,o){ke.forEach(function(s){var l=s.pluginName;if(!(!e.options[l]&&!s.initializeByDefault)){var u=new s(e,n,e.options);u.sortable=e,u.options=e.options,e[l]=u,le(r,u.defaults)}});for(var i in e.options)if(e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);typeof a<"u"&&(e.options[i]=a)}},getEventProperties:function(e,n){var r={};return ke.forEach(function(o){typeof o.eventProperties=="function"&&le(r,o.eventProperties.call(n[o.pluginName],e))}),r},modifyOption:function(e,n,r){var o;return ke.forEach(function(i){e[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[n]=="function"&&(o=i.optionListeners[n].call(e[i.pluginName],r))}),o}};function Jr(t){var e=t.sortable,n=t.rootEl,r=t.name,o=t.targetEl,i=t.cloneEl,a=t.toEl,s=t.fromEl,l=t.oldIndex,u=t.newIndex,c=t.oldDraggableIndex,f=t.newDraggableIndex,_=t.originalEvent,p=t.putSortable,g=t.extraEventProperties;if(e=e||n&&n[Y],!!e){var m,E=e.options,X="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!se&&!ze?m=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(r,!0,!0)),m.to=a||n,m.from=s||n,m.item=o||n,m.clone=i,m.oldIndex=l,m.newIndex=u,m.oldDraggableIndex=c,m.newDraggableIndex=f,m.originalEvent=_,m.pullMode=p?p.lastPutMode:void 0;var T=oe(oe({},g),Ke.getEventProperties(r,e));for(var L in T)m[L]=T[L];n&&n.dispatchEvent(m),E[X]&&E[X].call(e,m)}}var en=["evt"],R=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=r.evt,i=Hr(r,en);Ke.pluginEvent.bind(b)(e,n,oe({dragEl:d,parentEl:N,ghostEl:y,rootEl:I,nextEl:xe,lastDownEl:rt,cloneEl:O,cloneHidden:fe,dragStarted:qe,putSortable:F,activeSortable:b.active,originalEvent:o,oldIndex:Ie,oldDraggableIndex:Ve,newIndex:z,newDraggableIndex:ce,hideGhostForTarget:lr,unhideGhostForTarget:sr,cloneNowHidden:function(){fe=!0},cloneNowShown:function(){fe=!1},dispatchSortableEvent:function(s){B({sortable:n,name:s,originalEvent:o})}},i))};function B(t){Jr(oe({putSortable:F,cloneEl:O,targetEl:d,rootEl:I,oldIndex:Ie,oldDraggableIndex:Ve,newIndex:z,newDraggableIndex:ce},t))}var d,N,y,I,xe,rt,O,fe,Ie,z,Ve,ce,Ue,F,Te=!1,st=!1,ut=[],ye,J,gt,vt,Vt,Xt,qe,Ce,Xe,He=!1,Ze=!1,nt,M,bt=[],St=!1,dt=[],ht=typeof document<"u",Je=Ot,Ht=ze||se?"cssFloat":"float",tn=ht&&!Qt&&!Ot&&"draggable"in document.createElement("div"),or=(function(){if(ht){if(se)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}})(),ir=function(e,n){var r=v(e),o=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),i=$e(e,0,n),a=$e(e,1,n),s=i&&v(i),l=a&&v(a),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+P(i).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+P(a).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&s.float&&s.float!=="none"){var f=s.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===f)?"vertical":"horizontal"}return i&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=o&&r[Ht]==="none"||a&&r[Ht]==="none"&&u+c>o)?"vertical":"horizontal"},rn=function(e,n,r){var o=r?e.left:e.top,i=r?e.right:e.bottom,a=r?e.width:e.height,s=r?n.left:n.top,l=r?n.right:n.bottom,u=r?n.width:n.height;return o===s||i===l||o+a/2===s+u/2},nn=function(e,n){var r;return ut.some(function(o){var i=o[Y].options.emptyInsertThreshold;if(!(!i||Nt(o))){var a=P(o),s=e>=a.left-i&&e<=a.right+i,l=n>=a.top-i&&n<=a.bottom+i;if(s&&l)return r=o}}),r},ar=function(e){function n(i,a){return function(s,l,u,c){var f=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(i==null&&(a||f))return!0;if(i==null||i===!1)return!1;if(a&&i==="clone")return i;if(typeof i=="function")return n(i(s,l,u,c),a)(s,l,u,c);var _=(a?s:l).options.group.name;return i===!0||typeof i=="string"&&i===_||i.join&&i.indexOf(_)>-1}}var r={},o=e.group;(!o||tt(o)!="object")&&(o={name:o}),r.name=o.name,r.checkPull=n(o.pull,!0),r.checkPut=n(o.put),r.revertClone=o.revertClone,e.group=r},lr=function(){!or&&y&&v(y,"display","none")},sr=function(){!or&&y&&v(y,"display","")};ht&&!Qt&&document.addEventListener("click",function(t){if(st)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),st=!1,!1},!0);var _e=function(e){if(d){e=e.touches?e.touches[0]:e;var n=nn(e.clientX,e.clientY);if(n){var r={};for(var o in e)e.hasOwnProperty(o)&&(r[o]=e[o]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[Y]._onDragOver(r)}}},on=function(e){d&&d.parentNode[Y]._isOutsideThisEl(e.target)};function b(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=le({},e),t[Y]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ir(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,s){a.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:b.supportPointer!==!1&&"PointerEvent"in window&&(!Re||Ot),emptyInsertThreshold:5};Ke.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);ar(e);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=e.forceFallback?!1:tn,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?w(t,"pointerdown",this._onTapStart):(w(t,"mousedown",this._onTapStart),w(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(w(t,"dragover",this),w(t,"dragenter",this)),ut.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),le(this,Qr())}b.prototype={constructor:b,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ce=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,d):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,o=this.options,i=o.preventOnFilter,a=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(s||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=o.filter;if(hn(r),!d&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||o.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Re&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=ee(l,o.draggable,r,!1),!(l&&l.animated)&&rt!==l)){if(Ie=U(l),Ve=U(l,o.draggable),typeof c=="function"){if(c.call(this,e,l,this)){B({sortable:n,rootEl:u,name:"filter",targetEl:l,toEl:r,fromEl:r}),R("filter",n,{evt:e}),i&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(f){if(f=ee(u,f.trim(),r,!1),f)return B({sortable:n,rootEl:f,name:"filter",targetEl:l,fromEl:r,toEl:r}),R("filter",n,{evt:e}),!0}),c)){i&&e.preventDefault();return}o.handle&&!ee(u,o.handle,r,!1)||this._prepareDragStart(e,s,l)}}},_prepareDragStart:function(e,n,r){var o=this,i=o.el,a=o.options,s=i.ownerDocument,l;if(r&&!d&&r.parentNode===i){var u=P(r);if(I=i,d=r,N=d.parentNode,xe=d.nextSibling,rt=r,Ue=a.group,b.dragged=d,ye={target:d,clientX:(n||e).clientX,clientY:(n||e).clientY},Vt=ye.clientX-u.left,Xt=ye.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,d.style["will-change"]="all",l=function(){if(R("delayEnded",o,{evt:e}),b.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!jt&&o.nativeDraggable&&(d.draggable=!0),o._triggerDragStart(e,n),B({sortable:o,name:"choose",originalEvent:e}),W(d,a.chosenClass,!0)},a.ignore.split(",").forEach(function(c){Jt(d,c.trim(),yt)}),w(s,"dragover",_e),w(s,"mousemove",_e),w(s,"touchmove",_e),a.supportPointer?(w(s,"pointerup",o._onDrop),!this.nativeDraggable&&w(s,"pointercancel",o._onDrop)):(w(s,"mouseup",o._onDrop),w(s,"touchend",o._onDrop),w(s,"touchcancel",o._onDrop)),jt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,d.draggable=!0),R("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(ze||se))){if(b.eventCanceled){this._onDrop();return}a.supportPointer?(w(s,"pointerup",o._disableDelayedDrag),w(s,"pointercancel",o._disableDelayedDrag)):(w(s,"mouseup",o._disableDelayedDrag),w(s,"touchend",o._disableDelayedDrag),w(s,"touchcancel",o._disableDelayedDrag)),w(s,"mousemove",o._delayedDragTouchMoveHandler),w(s,"touchmove",o._delayedDragTouchMoveHandler),a.supportPointer&&w(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){d&&yt(d),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;x(e,"mouseup",this._disableDelayedDrag),x(e,"touchend",this._disableDelayedDrag),x(e,"touchcancel",this._disableDelayedDrag),x(e,"pointerup",this._disableDelayedDrag),x(e,"pointercancel",this._disableDelayedDrag),x(e,"mousemove",this._delayedDragTouchMoveHandler),x(e,"touchmove",this._delayedDragTouchMoveHandler),x(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?w(document,"pointermove",this._onTouchMove):n?w(document,"touchmove",this._onTouchMove):w(document,"mousemove",this._onTouchMove):(w(d,"dragend",this),w(I,"dragstart",this._onDragStart));try{document.selection?ot(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(Te=!1,I&&d){R("dragStarted",this,{evt:n}),this.nativeDraggable&&w(document,"dragover",on);var r=this.options;!e&&W(d,r.dragClass,!1),W(d,r.ghostClass,!0),b.active=this,e&&this._appendGhost(),B({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(J){this._lastX=J.clientX,this._lastY=J.clientY,lr();for(var e=document.elementFromPoint(J.clientX,J.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(J.clientX,J.clientY),e!==n);)n=e;if(d.parentNode[Y]._isOutsideThisEl(e),n)do{if(n[Y]){var r=void 0;if(r=n[Y]._onDragOver({clientX:J.clientX,clientY:J.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=Zt(n));sr()}},_onTouchMove:function(e){if(ye){var n=this.options,r=n.fallbackTolerance,o=n.fallbackOffset,i=e.touches?e.touches[0]:e,a=y&&Ne(y,!0),s=y&&a&&a.a,l=y&&a&&a.d,u=Je&&M&&Yt(M),c=(i.clientX-ye.clientX+o.x)/(s||1)+(u?u[0]-bt[0]:0)/(s||1),f=(i.clientY-ye.clientY+o.y)/(l||1)+(u?u[1]-bt[1]:0)/(l||1);if(!b.active&&!Te){if(r&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(y){a?(a.e+=c-(gt||0),a.f+=f-(vt||0)):a={a:1,b:0,c:0,d:1,e:c,f};var _="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");v(y,"webkitTransform",_),v(y,"mozTransform",_),v(y,"msTransform",_),v(y,"transform",_),gt=c,vt=f,J=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!y){var e=this.options.fallbackOnBody?document.body:I,n=P(d,!0,Je,!0,e),r=this.options;if(Je){for(M=e;v(M,"position")==="static"&&v(M,"transform")==="none"&&M!==document;)M=M.parentNode;M!==document.body&&M!==document.documentElement?(M===document&&(M=ne()),n.top+=M.scrollTop,n.left+=M.scrollLeft):M=ne(),bt=Yt(M)}y=d.cloneNode(!0),W(y,r.ghostClass,!1),W(y,r.fallbackClass,!0),W(y,r.dragClass,!0),v(y,"transition",""),v(y,"transform",""),v(y,"box-sizing","border-box"),v(y,"margin",0),v(y,"top",n.top),v(y,"left",n.left),v(y,"width",n.width),v(y,"height",n.height),v(y,"opacity","0.8"),v(y,"position",Je?"absolute":"fixed"),v(y,"zIndex","100000"),v(y,"pointerEvents","none"),b.ghost=y,e.appendChild(y),v(y,"transform-origin",Vt/parseInt(y.style.width)*100+"% "+Xt/parseInt(y.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,o=e.dataTransfer,i=r.options;if(R("dragStart",this,{evt:e}),b.eventCanceled){this._onDrop();return}R("setupClone",this),b.eventCanceled||(O=rr(d),O.removeAttribute("id"),O.draggable=!1,O.style["will-change"]="",this._hideClone(),W(O,this.options.chosenClass,!1),b.clone=O),r.cloneId=ot(function(){R("clone",r),!b.eventCanceled&&(r.options.removeCloneOnHide||I.insertBefore(O,d),r._hideClone(),B({sortable:r,name:"clone"}))}),!n&&W(d,i.dragClass,!0),n?(st=!0,r._loopId=setInterval(r._emulateDragOver,50)):(x(document,"mouseup",r._onDrop),x(document,"touchend",r._onDrop),x(document,"touchcancel",r._onDrop),o&&(o.effectAllowed="move",i.setData&&i.setData.call(r,o,d)),w(document,"drop",r),v(d,"transform","translateZ(0)")),Te=!0,r._dragStartId=ot(r._dragStarted.bind(r,n,e)),w(document,"selectstart",r),qe=!0,window.getSelection().removeAllRanges(),Re&&v(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,o,i,a,s=this.options,l=s.group,u=b.active,c=Ue===l,f=s.sort,_=F||u,p,g=this,m=!1;if(St)return;function E(Be,dr){R(Be,g,oe({evt:e,isOwner:c,axis:p?"vertical":"horizontal",revert:a,dragRect:o,targetRect:i,canSort:f,fromSortable:_,target:r,completed:T,onMove:function(Pt,cr){return et(I,n,d,o,Pt,P(Pt),e,cr)},changed:L},dr))}function X(){E("dragOverAnimationCapture"),g.captureAnimationState(),g!==_&&_.captureAnimationState()}function T(Be){return E("dragOverCompleted",{insertion:Be}),Be&&(c?u._hideClone():u._showClone(g),g!==_&&(W(d,F?F.options.ghostClass:u.options.ghostClass,!1),W(d,s.ghostClass,!0)),F!==g&&g!==b.active?F=g:g===b.active&&F&&(F=null),_===g&&(g._ignoreWhileAnimating=r),g.animateAll(function(){E("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==_&&(_.animateAll(),_._ignoreWhileAnimating=null)),(r===d&&!d.animated||r===n&&!r.animated)&&(Ce=null),!s.dragoverBubble&&!e.rootEl&&r!==document&&(d.parentNode[Y]._isOutsideThisEl(e.target),!Be&&_e(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function L(){z=U(d),ce=U(d,s.draggable),B({sortable:g,name:"change",toEl:n,newIndex:z,newDraggableIndex:ce,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=ee(r,s.draggable,n,!0),E("dragOver"),b.eventCanceled)return m;if(d.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||g._ignoreWhileAnimating===r)return T(!1);if(st=!1,u&&!s.disabled&&(c?f||(a=N!==I):F===this||(this.lastPutMode=Ue.checkPull(this,u,d,e))&&l.checkPut(this,u,d,e))){if(p=this._getDirection(e,r)==="vertical",o=P(d),E("dragOverValid"),b.eventCanceled)return m;if(a)return N=I,X(),this._hideClone(),E("revert"),b.eventCanceled||(xe?I.insertBefore(d,xe):I.appendChild(d)),T(!0);var H=Nt(n,s.draggable);if(!H||un(e,p,this)&&!H.animated){if(H===d)return T(!1);if(H&&n===e.target&&(r=H),r&&(i=P(r)),et(I,n,d,o,r,i,e,!!r)!==!1)return X(),H&&H.nextSibling?n.insertBefore(d,H.nextSibling):n.appendChild(d),N=n,L(),T(!0)}else if(H&&sn(e,p,this)){var ge=$e(n,0,s,!0);if(ge===d)return T(!1);if(r=ge,i=P(r),et(I,n,d,o,r,i,e,!1)!==!1)return X(),n.insertBefore(d,ge),N=n,L(),T(!0)}else if(r.parentNode===n){i=P(r);var te=0,ve,Ae=d.parentNode!==n,G=!rn(d.animated&&d.toRect||o,r.animated&&r.toRect||i,p),Pe=p?"top":"left",ue=Rt(r,"top","top")||Rt(d,"top","top"),Fe=ue?ue.scrollTop:void 0;Ce!==r&&(ve=i[Pe],He=!1,Ze=!G&&s.invertSwap||Ae),te=dn(e,r,i,p,G?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Ze,Ce===r);var ie;if(te!==0){var be=U(d);do be-=te,ie=N.children[be];while(ie&&(v(ie,"display")==="none"||ie===y))}if(te===0||ie===r)return T(!1);Ce=r,Xe=te;var Me=r.nextElementSibling,de=!1;de=te===1;var Qe=et(I,n,d,o,r,i,e,de);if(Qe!==!1)return(Qe===1||Qe===-1)&&(de=Qe===1),St=!0,setTimeout(ln,30),X(),de&&!Me?n.appendChild(d):r.parentNode.insertBefore(d,de?Me:r),ue&&tr(ue,0,Fe-ue.scrollTop),N=d.parentNode,ve!==void 0&&!Ze&&(nt=Math.abs(ve-P(r)[Pe])),L(),T(!0)}if(n.contains(d))return T(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){x(document,"mousemove",this._onTouchMove),x(document,"touchmove",this._onTouchMove),x(document,"pointermove",this._onTouchMove),x(document,"dragover",_e),x(document,"mousemove",_e),x(document,"touchmove",_e)},_offUpEvents:function(){var e=this.el.ownerDocument;x(e,"mouseup",this._onDrop),x(e,"touchend",this._onDrop),x(e,"pointerup",this._onDrop),x(e,"pointercancel",this._onDrop),x(e,"touchcancel",this._onDrop),x(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(z=U(d),ce=U(d,r.draggable),R("drop",this,{evt:e}),N=d&&d.parentNode,z=U(d),ce=U(d,r.draggable),b.eventCanceled){this._nulling();return}Te=!1,Ze=!1,He=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Dt(this.cloneId),Dt(this._dragStartId),this.nativeDraggable&&(x(document,"drop",this),x(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Re&&v(document.body,"user-select",""),v(d,"transform",""),e&&(qe&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),y&&y.parentNode&&y.parentNode.removeChild(y),(I===N||F&&F.lastPutMode!=="clone")&&O&&O.parentNode&&O.parentNode.removeChild(O),d&&(this.nativeDraggable&&x(d,"dragend",this),yt(d),d.style["will-change"]="",qe&&!Te&&W(d,F?F.options.ghostClass:this.options.ghostClass,!1),W(d,this.options.chosenClass,!1),B({sortable:this,name:"unchoose",toEl:N,newIndex:null,newDraggableIndex:null,originalEvent:e}),I!==N?(z>=0&&(B({rootEl:N,name:"add",toEl:N,fromEl:I,originalEvent:e}),B({sortable:this,name:"remove",toEl:N,originalEvent:e}),B({rootEl:N,name:"sort",toEl:N,fromEl:I,originalEvent:e}),B({sortable:this,name:"sort",toEl:N,originalEvent:e})),F&&F.save()):z!==Ie&&z>=0&&(B({sortable:this,name:"update",toEl:N,originalEvent:e}),B({sortable:this,name:"sort",toEl:N,originalEvent:e})),b.active&&((z==null||z===-1)&&(z=Ie,ce=Ve),B({sortable:this,name:"end",toEl:N,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){R("nulling",this),I=d=N=y=xe=O=rt=fe=ye=J=qe=z=ce=Ie=Ve=Ce=Xe=F=Ue=b.dragged=b.ghost=b.clone=b.active=null,dt.forEach(function(e){e.checked=!0}),dt.length=gt=vt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":d&&(this._onDragOver(e),an(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,o=0,i=r.length,a=this.options;o<i;o++)n=r[o],ee(n,a.draggable,this.el,!1)&&e.push(n.getAttribute(a.dataIdAttr)||fn(n));return e},sort:function(e,n){var r={},o=this.el;this.toArray().forEach(function(i,a){var s=o.children[a];ee(s,this.options.draggable,o,!1)&&(r[i]=s)},this),n&&this.captureAnimationState(),e.forEach(function(i){r[i]&&(o.removeChild(r[i]),o.appendChild(r[i]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return ee(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var o=Ke.modifyOption(this,e,n);typeof o<"u"?r[e]=o:r[e]=n,e==="group"&&ar(r)},destroy:function(){R("destroy",this);var e=this.el;e[Y]=null,x(e,"mousedown",this._onTapStart),x(e,"touchstart",this._onTapStart),x(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(x(e,"dragover",this),x(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ut.splice(ut.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!fe){if(R("hideClone",this),b.eventCanceled)return;v(O,"display","none"),this.options.removeCloneOnHide&&O.parentNode&&O.parentNode.removeChild(O),fe=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(fe){if(R("showClone",this),b.eventCanceled)return;d.parentNode==I&&!this.options.group.revertClone?I.insertBefore(O,d):xe?I.insertBefore(O,xe):I.appendChild(O),this.options.group.revertClone&&this.animate(d,O),v(O,"display",""),fe=!1}}};function an(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function et(t,e,n,r,o,i,a,s){var l,u=t[Y],c=u.options.onMove,f;return window.CustomEvent&&!se&&!ze?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=o||e,l.relatedRect=i||P(e),l.willInsertAfter=s,l.originalEvent=a,t.dispatchEvent(l),c&&(f=c.call(u,l,a)),f}function yt(t){t.draggable=!1}function ln(){St=!1}function sn(t,e,n){var r=P($e(n.el,0,n.options,!0)),o=nr(n.el,n.options,y),i=10;return e?t.clientX<o.left-i||t.clientY<r.top&&t.clientX<r.right:t.clientY<o.top-i||t.clientY<r.bottom&&t.clientX<r.left}function un(t,e,n){var r=P(Nt(n.el,n.options.draggable)),o=nr(n.el,n.options,y),i=10;return e?t.clientX>o.right+i||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>o.bottom+i||t.clientX>r.right&&t.clientY>r.top}function dn(t,e,n,r,o,i,a,s){var l=r?t.clientY:t.clientX,u=r?n.height:n.width,c=r?n.top:n.left,f=r?n.bottom:n.right,_=!1;if(!a){if(s&&nt<u*o){if(!He&&(Xe===1?l>c+u*i/2:l<f-u*i/2)&&(He=!0),He)_=!0;else if(Xe===1?l<c+nt:l>f-nt)return-Xe}else if(l>c+u*(1-o)/2&&l<f-u*(1-o)/2)return cn(e)}return _=_||a,_&&(l<c+u*i/2||l>f-u*i/2)?l>c+u/2?1:-1:0}function cn(t){return U(d)<U(t)?1:-1}function fn(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function hn(t){dt.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&dt.push(r)}}function ot(t){return setTimeout(t,0)}function Dt(t){return clearTimeout(t)}ht&&w(document,"touchmove",function(t){(b.active||Te)&&t.cancelable&&t.preventDefault()});b.utils={on:w,off:x,css:v,find:Jt,is:function(e,n){return!!ee(e,n,e,!1)},extend:zr,throttle:er,closest:ee,toggleClass:W,clone:rr,index:U,nextTick:ot,cancelNextTick:Dt,detectDirection:ir,getChild:$e,expando:Y};b.get=function(t){return t[Y]};b.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(b.utils=oe(oe({},b.utils),r.utils)),Ke.mount(r)})};b.create=function(t,e){return new b(t,e)};b.version=Gr;var A=[],je,kt,Ct=!1,_t,xt,ct,Le;function pn(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?w(document,"dragover",this._handleAutoScroll):this.options.supportPointer?w(document,"pointermove",this._handleFallbackAutoScroll):r.touches?w(document,"touchmove",this._handleFallbackAutoScroll):w(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?x(document,"dragover",this._handleAutoScroll):(x(document,"pointermove",this._handleFallbackAutoScroll),x(document,"touchmove",this._handleFallbackAutoScroll),x(document,"mousemove",this._handleFallbackAutoScroll)),Gt(),it(),Kr()},nulling:function(){ct=kt=je=Ct=Le=_t=xt=null,A.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var o=this,i=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(i,a);if(ct=n,r||this.options.forceAutoScrollFallback||ze||se||Re){wt(n,this.options,s,r);var l=pe(s,!0);Ct&&(!Le||i!==_t||a!==xt)&&(Le&&Gt(),Le=setInterval(function(){var u=pe(document.elementFromPoint(i,a),!0);u!==l&&(l=u,it()),wt(n,o.options,u,r)},10),_t=i,xt=a)}else{if(!this.options.bubbleScroll||pe(s,!0)===ne()){it();return}wt(n,this.options,pe(s,!1),!1)}}},le(t,{pluginName:"scroll",initializeByDefault:!0})}function it(){A.forEach(function(t){clearInterval(t.pid)}),A=[]}function Gt(){clearInterval(Le)}var wt=er(function(t,e,n,r){if(e.scroll){var o=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,s=e.scrollSpeed,l=ne(),u=!1,c;kt!==n&&(kt=n,it(),je=e.scroll,c=e.scrollFn,je===!0&&(je=pe(n,!0)));var f=0,_=je;do{var p=_,g=P(p),m=g.top,E=g.bottom,X=g.left,T=g.right,L=g.width,H=g.height,ge=void 0,te=void 0,ve=p.scrollWidth,Ae=p.scrollHeight,G=v(p),Pe=p.scrollLeft,ue=p.scrollTop;p===l?(ge=L<ve&&(G.overflowX==="auto"||G.overflowX==="scroll"||G.overflowX==="visible"),te=H<Ae&&(G.overflowY==="auto"||G.overflowY==="scroll"||G.overflowY==="visible")):(ge=L<ve&&(G.overflowX==="auto"||G.overflowX==="scroll"),te=H<Ae&&(G.overflowY==="auto"||G.overflowY==="scroll"));var Fe=ge&&(Math.abs(T-o)<=a&&Pe+L<ve)-(Math.abs(X-o)<=a&&!!Pe),ie=te&&(Math.abs(E-i)<=a&&ue+H<Ae)-(Math.abs(m-i)<=a&&!!ue);if(!A[f])for(var be=0;be<=f;be++)A[be]||(A[be]={});(A[f].vx!=Fe||A[f].vy!=ie||A[f].el!==p)&&(A[f].el=p,A[f].vx=Fe,A[f].vy=ie,clearInterval(A[f].pid),(Fe!=0||ie!=0)&&(u=!0,A[f].pid=setInterval((function(){r&&this.layer===0&&b.active._onTouchMove(ct);var Me=A[this.layer].vy?A[this.layer].vy*s:0,de=A[this.layer].vx?A[this.layer].vx*s:0;typeof c=="function"&&c.call(b.dragged.parentNode[Y],de,Me,t,ct,A[this.layer].el)!=="continue"||tr(A[this.layer].el,de,Me)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&_!==l&&(_=pe(_,!1)));Ct=u}},30),ur=function(e){var n=e.originalEvent,r=e.putSortable,o=e.dragEl,i=e.activeSortable,a=e.dispatchSortableEvent,s=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var u=r||i;s();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(c.clientX,c.clientY);l(),u&&!u.el.contains(f)&&(a("spill"),this.onSpill({dragEl:o,putSortable:r}))}};function $t(){}$t.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var o=$e(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(n,o):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:ur};le($t,{pluginName:"revertOnSpill"});function At(){}At.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,o=r||this.sortable;o.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),o.animateAll()},drop:ur};le(At,{pluginName:"removeOnSpill"});b.mount(new pn);b.mount(At,$t);function mn(t,e,n={}){let r;const{document:o=hr,...i}=n,a={onUpdate:c=>{bn(e,c.oldIndex,c.newIndex,c)}},s=()=>{const c=typeof t=="string"?o?.querySelector(t):mr(t);!c||r!==void 0||(r=new b(c,{...a,...i}))},l=()=>{r?.destroy(),r=void 0},u=(c,f)=>{if(f!==void 0)r?.option(c,f);else return r?.option(c)};return pr(s),gr(l),{stop:l,start:s,option:u}}function gn(t,e,n){const r=t.children[n];t.insertBefore(e,r)}function vn(t){t.parentNode&&t.parentNode.removeChild(t)}function bn(t,e,n,r=null){r!=null&&(vn(r.item),gn(r.from,r.item,e));const o=vr(t),i=o?[...Mt(t)]:Mt(t);if(n>=0&&n<i.length){const a=i.splice(e,1)[0];br(()=>{i.splice(n,0,a),o&&(t.value=i)})}}const yn={class:"flex flex-col justify-start items-center flex-grow gap-4"},_n={class:"flex justify-start items-start flex-grow-0 flex-shrink-0 relative gap-2 rounded-lg"},xn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-0.5"},wn={class:"flex justify-start items-start self-stretch flex-grow-0 flex-shrink-0 relative gap-1.5"},En={class:"flex-grow w-full text-base font-medium text-center text-slate-dark-1/70 dark:text-slate-light-1/70"},Sn=Q({__name:"TypeButton",props:{type:{type:Object,required:!0},selected:{type:Boolean,default:!1},className:{type:String,required:!1,default:""}},setup(t){const e=t,n=Ee(()=>{let r="nomercy";switch(e.type?.value){case"music":r="noteDouble";break;case"tv":r="tv";break;case"image":r="picture";break;case"movie":r="film";break;default:r="nomercy"}return r});return(r,o)=>(D(),K("div",{class:Wt(["flex justify-start items-start flex-grow gap-1 px-2 py-4 rounded-xl",{"bg-white/11 dark:bg-black/8 outline outline-2 outline-focus hover:bg-focus/[0.15]":t.selected,"hover:bg-focus/[0.15]":!t.selected}])},[h("div",yn,[h("div",_n,[C(he,{icon:n.value,"class-name":t.className},null,8,["icon","class-name"])]),h("div",xn,[h("div",wn,[h("p",En,k(t.type.name),1)])])])],2))}}),Dn={class:"my-6 text-sm text-auto-10"},kn=Q({__name:"DeleteFolderModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},libraryId:{type:String,required:!0},name:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},setup(t){const e=t,n=me(),r=Se();function o(){Z().delete(`dashboard/libraries/${e.libraryId}/folders/${e.id}`).then(({data:i})=>{n.invalidateQueries({queryKey:["dashboard","libraries"]}),r.add({severity:i.status==="ok"?"success":"error",summary:S(i.status==="ok"?"Success":"Error"),detail:S(i.message,...i.args??[]),life:5e3}),e.close()}).catch(i=>{r.add({severity:"error",summary:S("Error"),detail:i.message,life:5e3}),e.close()})}return(i,a)=>{const s=We("Button");return D(),j(ft,{close:t.close,open:t.open,"max-width":"max-w-xl",params:{folder:t.name},title:"Delete folder {{folder}}"},{actions:$(()=>[C(s,{id:"yes",onclick:o,"end-icon":"trash",color:"red",type:"button",variant:"contained"},{default:$(()=>[V(k(i.$t("Delete")),1)]),_:1}),C(s,{id:"no",onclick:t.close,type:"button",color:"auto-alpha",variant:"text"},{default:$(()=>[V(k(i.$t("Cancel")),1)]),_:1},8,["onclick"])]),default:$(()=>[h("div",Dn,k(i.$t("Are you sure you want to delete this folder?")),1)]),_:1},8,["close","open","params"])}}}),Cn={class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 gap-2"},Tn={class:"flex flex-col justify-center items-center flex-grow gap-2"},In={class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 h-10 relative overflow-hidden gap-2 pl-3 pr-2.5 py-2.5 rounded-[10px] bg-slate-light-12/3 dark:bg-slate-dark-12/[0.03] text-slate-dark-8 dark:text-slate-dark-11"},On={class:"flex-grow w-available text-base font-semibold text-left"},Nn=Q({__name:"FolderItem",props:zt({folder:{type:Object,required:!0}},{modelValue:{type:Object,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=t,n=Se(),r=me(),o=Tt(t,"modelValue"),{data:i}=It({path:"dashboard/encoderProfiles",queryKey:["dashboard","encoderProfiles"]}),a=Ee(()=>{switch(o.value.type){case"anime":return i.value?.filter(p=>p.container==="m3u8").map(p=>De(p));case"movie":return i.value?.filter(p=>p.container==="m3u8").map(p=>De(p));case"tv":return i.value?.filter(p=>p.container==="m3u8").map(p=>De(p));case"music":return i.value?.filter(p=>p.container==="mp3"||p.container==="flac").map(p=>De(p));default:return[]}}),s=q(a.value?.filter(p=>e.folder.folder?.encoder_profiles?.some(g=>g.id===p.id))??[]);re([a,e],([p,g])=>{!p||!g||(s.value=p.filter(m=>g.folder.folder?.encoder_profiles.some(E=>E.id===m.id)))},{deep:!0});function l(p){const g=p.map(m=>De(m));s.value=g,u(De(e.folder),g)}function u(p,g){if(!o.value)return;const m=o.value.folder_library.map(E=>E.folder_id===p.folder_id?{...E,folder:{...E.folder,encoder_profiles:g.map(X=>X)}}:E);Z().patch(`dashboard/libraries/${o.value.id}`,{folder_library:m}).then(()=>{r.invalidateQueries({queryKey:["dashboard","libraries"]})}).catch(E=>{n.add({severity:"error",summary:S("Error"),detail:E.message,life:5e3})})}re(o,()=>{a.value&&(s.value=a.value.filter(p=>e.folder.folder?.encoder_profiles.some(g=>g.id===p.id)))});const c=q(!1);function f(){c.value=!0}function _(){c.value=!1}return(p,g)=>{const m=We("MultiSelect");return D(),K(Oe,null,[h("div",Cn,[C(m,{id:"encoderProfiles","model-value":s.value,placeholder:"Select",class:"w-[160px]",options:a.value,"option-label":"name","onUpdate:modelValue":l},null,8,["model-value","options"]),h("div",Tn,[h("div",In,[h("p",On,k(t.folder.folder.path),1),h("button",{class:"flex-grow-0 flex-shrink-0 cursor-pointer hover:text-slate-light-12 hover:dark:text-slate-dark-12",onClick:f},[C(he,{icon:"trash","class-name":"w-6 h-6"})])])])]),C(kn,{id:t.folder.folder.id,"library-id":o.value?.id,name:t.folder.folder.path,close:_,open:c.value},null,8,["id","library-id","name","open"])],64)}}}),$n={class:"mx-auto flex w-full flex-col h-available overflow-clip"},An=Q({__name:"NewFolderModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},folder:{type:String,required:!0},setFolder:{type:Function,required:!0},library:{type:Object,required:!1}},setup(t){const e=t,n=yr(),r=me(),o=Se();function i(){Z().post(`dashboard/libraries/${n.params.id??e.library?.id}/folders`,{path:e.folder}).then(({data:a})=>{r.invalidateQueries({queryKey:["dashboard","libraries"]}),o.add({severity:a.status==="ok"?"success":"error",summary:S(a.status==="ok"?"Success":"Error"),detail:S(a.message,...a.args),life:5e3}),e.setFolder("/"),e.close()}).catch(a=>{console.error("Error adding folder:",a),e.close()})}return(a,s)=>{const l=We("Button");return D(),j(ft,{close:t.close,open:t.open,"max-width":"max-w-5xl",title:"Add folder"},{actions:$(()=>[C(l,{id:"yes",onclick:i,color:"theme",type:"button",variant:"contained"},{default:$(()=>[V(k(a.$t("Add")),1)]),_:1}),C(l,{id:"no",onclick:t.close,type:"button",color:"auto-alpha",variant:"text"},{default:$(()=>[V(k(a.$t("Cancel")),1)]),_:1},8,["onclick"])]),default:$(()=>[h("div",$n,[C(Tr,{selected:t.folder,"set-selected":t.setFolder},null,8,["selected","set-selected"])])]),_:1},8,["close","open"])}}}),Pn={class:"flex flex-col justify-start items-start flex-grow-0 flex-shrink-0 w-full relative gap-8 p-1 px-6"},Fn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-3"},Mn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-6"},Bn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-4"},qn={class:"grid grid-cols-4 justify-start items-start self-stretch gap-2"},jn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-2"},Ln={class:"flex justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-2"},Rn={class:"flex flex-col justify-start items-start flex-grow gap-1.5"},Yn={class:"flex justify-start items-center flex-grow-0 flex-shrink-0 relative gap-px"},Vn={class:"flex-grow-0 flex-shrink-0 text-sm font-medium text-left text-auto-10"},Xn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-3"},Hn={class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 relative gap-2 rounded"},Gn={class:"flex-grow w-[501px] text-lg font-medium text-left text-auto-11"},Wn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-6"},zn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-2"},Kn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-2"},Qn={class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 relative gap-1 text-slate-light-12 dark:text-slate-dark-11"},Un={class:"flex-grow-0 flex-shrink-0 text-sm text-left"},Zn={class:"flex w-full justify-end items-start self-stretch flex-grow-0 flex-shrink-0 gap-2 rounded-lg bg-white/[0.04] p-2"},Jn=Q({__name:"EditLibraryModal",props:zt({open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},{modelValue:{type:Object,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=t,n=Tt(t,"modelValue"),r=me(),o=Se(),i=q(n.value?.title),a=Kt(i,500),s=q(n.value?.type??"movie");re(n,m=>{m&&(i.value=m.title,s.value=m.type||"movie",n.value.folder_library||(n.value={...n.value,folder_library:[]}))},{deep:!0});const l=q([]),u=q("/");function c(m){u.value=m}const f=q(!1);function _(){f.value=!0}function p(){f.value=!1}function g(){Z().patch(`dashboard/libraries/${n.value.id}`,{...n.value,subtitles:l.value.map(m=>m.iso_639_1),specialSeasonName:n.value.specialSeasonName}).then(()=>{r.invalidateQueries({queryKey:["dashboard","libraries"]}),e.close()}).catch(m=>{o.add({severity:"error",summary:S("Error"),detail:m.message,life:5e3}),e.close()})}return re(a,m=>{m&&Z().patch(`dashboard/libraries/${n.value.id}`,{title:m}).then(()=>{r.invalidateQueries({queryKey:["dashboard","libraries"]})}).catch(E=>{o.add({severity:"error",summary:S("Error"),detail:E.message,life:5e3})})}),re(s,m=>{m&&Z().patch(`dashboard/libraries/${n.value.id}`,{type:m}).then(()=>{r.invalidateQueries({queryKey:["dashboard","libraries"]})}).catch(E=>{o.add({severity:"error",summary:S("Error"),detail:E.message,life:5e3})})}),(m,E)=>{const X=We("InputText");return D(),K(Oe,null,[C(ft,{id:"editLibraryModal",close:t.close,open:t.open,"max-width":"max-w-[565px]",title:"Edit Library",background:"","no-close":""},{actions:$(()=>[h("div",Zn,[C(we,{id:"done",type:"button",color:"theme",variant:"contained",onClick:g},{default:$(()=>[V(k(m.$t("Done")),1)]),_:1})])]),default:$(()=>[h("div",Pn,[h("div",Fn,[h("div",Mn,[h("div",Bn,[h("div",qn,[(D(!0),K(Oe,null,at(Et(_r),T=>(D(),j(Sn,{key:T.value,type:T,selected:s.value===T.value,"class-name":"size-8 text-slate-dark-5 dark:text-slate-light-5",onClick:L=>s.value=T.value},null,8,["type","selected","onClick"]))),128))]),h("div",jn,[h("div",Ln,[h("div",Rn,[h("div",Yn,[h("p",Vn,k(m.$t("Library Title")),1),E[2]||(E[2]=h("p",{class:"flex-grow-0 flex-shrink-0 text-sm font-medium text-left text-focus"}," * ",-1))]),C(X,{id:"title",modelValue:i.value,"onUpdate:modelValue":E[0]||(E[0]=T=>i.value=T),class:"w-full",required:""},null,8,["modelValue"])])])])])])]),E[3]||(E[3]=h("div",{class:"flex-grow-0 flex-shrink-0 w-10 h-0.5 rounded bg-[#e2f0fd]/[0.08]"},null,-1)),h("div",Xn,[h("div",Hn,[h("p",Gn,k(m.$t("Select one or more folders")),1)]),h("div",Wn,[h("div",zn,[h("div",Kn,[h("button",{id:"save",type:"button",class:"group/button flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 h-11 relative overflow-hidden gap-2 pl-3 pr-2.5 py-2.5 rounded-[10px] text-slate-dark-8 dark:text-slate-dark-11 font-semibold transition-colors bg-slate-dark-2/[0.13] dark:bg-slate-dark-11/[0.14] hover:bg-slate-dark-12/[0.13] hover:dark:bg-slate-dark-12/[0.14] active:bg-slate-dark-12/[0.13] active:dark:bg-slate-dark-10/[0.14]",onClick:_},[h("span",null,k(m.$t("Add folder")),1),C(he,{icon:"folderAdd","class-name":"w-6 h-6 flex-grow-0 flex-shrink-0 ml-auto group-hover/button:text-slate-light-12 group-hover/button:dark:text-slate-dark-12"})])]),n.value?.folder_library?(D(!0),K(Oe,{key:0},at(n.value?.folder_library,T=>(D(),j(Nn,{key:T.folder_id,modelValue:n.value,"onUpdate:modelValue":E[1]||(E[1]=L=>n.value=L),folder:T},null,8,["modelValue","folder"]))),128)):Ge("",!0),h("div",Qn,[C(he,{icon:"infoCircle","class-name":"w-4 h-4 flex-grow-0 flex-shrink-0"}),h("p",Un,k(m.$t("You can always add folder and change encoding profiles later")),1)])])])])])]),_:1},8,["close","open"]),C(An,{close:p,folder:u.value,open:f.value,"set-folder":c,library:n.value},null,8,["folder","open","library"])],64)}}}),eo={class:"my-6 text-sm text-auto-10"},to=Q({__name:"DeleteLibraryModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},name:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},setup(t){const e=t,n=me(),r=Se();function o(){Z().delete(`dashboard/libraries/${e.id}`).then(({data:i})=>{r.add({severity:i.status==="ok"?"success":"error",summary:S(i.status==="ok"?"Success":"Error"),detail:S(i.message,...i.args??[]),life:5e3}),n.invalidateQueries({queryKey:["dashboard","libraries"]})}),e.close()}return(i,a)=>(D(),j(ft,{close:t.close,open:t.open,"max-width":"max-w-xl",params:{library:e.name},title:"Delete library {{library}}"},{actions:$(()=>[C(we,{id:"yes",onclick:o,"end-icon":"trash",color:"red",type:"button",variant:"contained"},{default:$(()=>[V(k(i.$t("Delete")),1)]),_:1}),C(we,{id:"no",onclick:t.close,type:"button",color:"auto-alpha",variant:"text"},{default:$(()=>[V(k(i.$t("Cancel")),1)]),_:1},8,["onclick"])]),default:$(()=>[h("div",eo,k(i.$t("Are you sure you want to delete this library?")),1)]),_:1},8,["close","open","params"]))}}),ro={class:"flex h-min children:cursor-default flex-col items-center rounded-lg w-inherit odd:bg-slate-light-12/5 even:bg-slate-light-12/2 dark:odd:bg-slate-dark-12/5 dark:even:bg-slate-dark-12/2 text-slate-light-12/80 dark:text-slate-dark-12/80"},no={class:"flex items-center gap-2 overflow-x-hidden py-2 pr-2 w-inherit overflow-y-show"},oo={class:"ml-2 h-auto w-8 p-2 handle"},io={class:"w-full line-clamp-1"},ao=Q({__name:"LibraryItem",props:{modelValue:{type:Object,required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(t){const e=Tt(t,"modelValue"),n=q(!1);function r(){n.value=!0}function o(){n.value=!1}const i=q(!1);function a(){i.value=!0}function s(){i.value=!1}const l=Ee(()=>{let u;switch(e.value.type){case"music":u="noteDouble";break;case"tv":u="tv";break;case"image":u="camera";break;case"movie":u="film";break;default:u="nomercy"}return u});return(u,c)=>(D(),K("div",ro,[h("div",no,[h("button",oo,[C(he,{icon:"menuDotsVertical",class:"h-6 w-6"})]),C(he,{icon:l.value,class:"h-6 w-6"},null,8,["icon"]),h("span",io,k(e.value?.title),1),h("button",{class:"ml-auto flex justify-center items-center h-10 px-2.5 py-2 gap-2 rounded-lg text-sm select-none w-auto font-semibold leading-[100%] transition-all duration-150 button-text hover:outline-slate-light-11 dark:hover:outline-slate-dark-11 outline-1 outline outline-transparent",type:"button",onClick:a},[C(he,{icon:"folderEdit",class:"h-6 w-6"})]),h("button",{class:"ml-auto flex justify-center items-center h-10 px-2.5 py-2 gap-2 rounded-lg text-sm select-none w-auto font-semibold leading-[100%] transition-all duration-150 button-text hover:outline-slate-light-11 dark:hover:outline-slate-dark-11 outline-1 outline outline-transparent",type:"button",onClick:r},[C(he,{icon:"folderRemove",class:"h-6 w-6"})])]),e.value?(D(),j(Jn,{key:0,id:e.value?.id,modelValue:e.value,"onUpdate:modelValue":c[0]||(c[0]=f=>e.value=f),close:s,open:i.value},null,8,["id","modelValue","open"])):Ge("",!0),e.value?(D(),j(to,{key:1,id:e.value?.id,name:e.value.title,close:o,open:n.value},null,8,["id","name","open"])):Ge("",!0)]))}}),lo=Ir(ao,[["__scopeId","data-v-e7d91ecb"]]),so={class:"flex flex-col overflow-hidden text-start h-available"},uo={class:"mb-2 text-xl font-semibold"},co={class:"mb-4 text-sm"},fo={class:"mt-4 flex w-full justify-start"},ho=Q({__name:"Libraries",props:{setNextButtonLocked:{type:Function,required:!0}},setup(t){const e=t,n=me(),{data:r}=It({path:"dashboard/libraries",queryKey:["dashboard","libraries"]}),o=q(null),i=q(r.value??[]);re(r,l=>{console.log("Libraries updated:",l),l&&(i.value=l,e.setNextButtonLocked(l?.length===0))});function a(){Z().post("dashboard/libraries").then(()=>{n.invalidateQueries({queryKey:["dashboard","libraries"]})})}function s(){Z().patch("dashboard/libraries/sort",{libraries:i.value.map((l,u)=>({id:l.id,order:u}))}).then(()=>{n.invalidateQueries({queryKey:["dashboard","libraries"]})})}return re(i,()=>{s()}),mn(o,i,{animation:150,handle:".handle"}),(l,u)=>(D(),K("div",so,[h("h2",uo,k(l.$t("Organize your media library")),1),h("p",co,k(l.$t("Add your media libraries to organize your content.")),1),h("div",{ref_key:"el",ref:o,class:"flex h-auto w-full flex-col overflow-y-auto text-start gap-1"},[(D(!0),K(Oe,null,at(i.value,(c,f)=>(D(),j(lo,{key:c.id,modelValue:i.value[f],"onUpdate:modelValue":_=>i.value[f]=_},null,8,["modelValue","onUpdate:modelValue"]))),128))],512),h("div",fo,[C(we,{id:"yes",color:"theme",type:"button",variant:"contained",onClick:a},{default:$(()=>[V(k(l.$t("Add media library")),1)]),_:1})])]))}}),po=Q({__name:"Finish",props:{setNextButtonLocked:{type:Function,required:!0}},setup(t){return Or(),me(),(e,n)=>null}}),mo={class:"flex flex-col gap-2 h-available"},go={class:"flex flex-col gap-2"},vo={class:"mt-auto flex flex-col"},bo={class:"mb-4 text-sm"},yo={href:"https://nomercy.tv/privacy-policy",target:"_blank",class:"text-theme-10 hover:underline"},_o={href:"https://nomercy.tv/terms-of-service",target:"_blank",class:"text-theme-10 hover:underline"},xo=Q({__name:"Base",props:{setNextButtonLocked:{type:Function,required:!0}},setup(t){const e=t,n=me(),r=Se(),{data:o}=It({path:"dashboard/server/info",queryKey:["serverinfo"]}),i=q(o.value?.server??""),a=Kt(i,500);re(o,l=>{l&&(i.value=l.server)});function s(){Z().patch("dashboard/server/info",{name:a.value}).then(({data:l})=>{r.add({severity:"success",summary:S("Success"),detail:S(l.message,...l.args??[]),life:5e3}),n.invalidateQueries({queryKey:["servers"]})})}return re(a,(l,u)=>{!l||l===u||u===""||s()}),re(i,l=>{e.setNextButtonLocked(!l)}),(l,u)=>{const c=We("InputText");return D(),K("div",mo,[h("div",go,[u[1]||(u[1]=h("label",{for:"serverName"},"Server name",-1)),C(c,{id:"serverName",modelValue:i.value,"onUpdate:modelValue":u[0]||(u[0]=f=>i.value=f),class:"w-1/3",name:"Give your server a friendly name to help identify it."},null,8,["modelValue"])]),h("div",vo,[h("p",bo,[V(k(l.$t("By using this NoMercy app, a NoMercy MediaServer, or any of our services, you agree to the"))+" ",1),h("a",yo,k(l.$t("Privacy Policy")),1),V(" "+k(l.$t("and"))+" ",1),h("a",_o,k(l.$t("Terms of Service")),1),u[2]||(u[2]=V(". ",-1))])])])}}}),jo=Q({__name:"Desktop",setup(t){const e=Se(),n=q(["Base info","Media libraries","Finish"]),r=q("Base info"),o=q(!1);async function i(){console.log("Finish"),await Z().post("/dashboard/libraries/refresh").then(()=>{e.add({severity:"success",summary:S("Success"),detail:"Your media libraries are being scanned in the background.",life:16e3})}).catch(l=>{e.add({severity:"error",summary:"Error refreshing libraries",detail:l.message,life:16e3})}),await Z().get("libraries").then(({data:l})=>{Sr(l.data),Dr.value=!0,kr.value=!0,Bt.replace("/")}).catch(()=>{Bt.replace({name:"Server offline"})})}function a(l){r.value=l}function s(l){o.value=l}return xr(()=>{e.add({severity:"info",summary:S("This is an informational message."),life:5e5}),e.add({severity:"info",summary:S("Info"),detail:S("This is an informational message."),life:5e5}),e.add({severity:"success",summary:S("This is a success message."),life:5e5}),e.add({severity:"success",summary:S("Success"),detail:S("This is a success message."),life:5e5}),e.add({severity:"warn",summary:S("This is a warning message."),life:5e5}),e.add({severity:"warn",summary:S("Warning"),detail:S("This is a warning message."),life:5e5}),e.add({severity:"error",summary:S("This is an error message."),life:5e5}),e.add({severity:"error",summary:S("Error"),detail:S("This is an error message."),life:5e5}),e.add({severity:"secondary",summary:S("This is an secondary message."),life:5e5}),e.add({severity:"secondary",summary:S("Secondary"),detail:S("This is an secondary message."),life:5e5}),e.add({severity:"contrast",summary:S("This is an contrast message."),life:5e5}),e.add({severity:"contrast",summary:S("Contrast"),detail:S("This is an contrast message."),life:5e5})}),(l,u)=>(D(),j(Et(Er),null,{default:$(()=>[C(Et(wr),{fullscreen:!0},{default:$(()=>[C(Yr,{"current-step":r.value,finish:i,"next-button-locked":o.value,"set-current-step":a,steps:n.value},{default:$(()=>[r.value==="Base info"?(D(),j(xo,{key:0,"set-next-button-locked":s})):r.value==="Media libraries"?(D(),j(ho,{key:1,"set-next-button-locked":s})):r.value==="Finish"?(D(),j(po,{key:2,"set-next-button-locked":s})):Ge("",!0)]),_:1},8,["current-step","next-button-locked","steps"])]),_:1})]),_:1}))}});export{jo as default};
