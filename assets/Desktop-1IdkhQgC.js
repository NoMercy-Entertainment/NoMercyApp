import{Y as $,c as u,o as l,l as r,i as g,h as w,v as c,d as k,j as R,y as s,Z as d,ar as S,F as I,p as L,t as C,B as b,an as q}from"./vue-ionic-D3xJGFcP.js";import{l as x,y as p,A as N}from"./index-m4cPkZcj.js";import{u as j}from"./useServerClient-DE6jxTTP.js";import{_ as V}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-CY2tOJyU.js";import{_ as z}from"./DashboardCard.vue_vue_type_script_setup_true_lang-N7HH8S3y.js";import{_ as A}from"./TMDBImage.vue_vue_type_script_setup_true_lang-Db2VcENz.js";import"./vendor-CKnYbqeP.js";import"./icons-BW5E66pf.js";import"./rxjs-BCp2L9Rn.js";import"./media-C2AqgyMX.js";import"./api-BBofn2cc.js";import"./swiper-D00Cnjmx.js";import"./music-player-Ct3VsQMm.js";import"./useInfiniteServerClient-B1gkYmgo.js";import"./useMounted-B9e0d8af.js";import"./FloatingBackButton.vue_vue_type_script_setup_true_lang-QOFWZZ0j.js";import"./OptimizedIcon.vue_vue_type_script_setup_true_lang-BW90dOSz.js";import"./Button.vue_vue_type_script_setup_true_lang-C41C23VY.js";import"./ScrollContainer.vue_vue_type_script_setup_true_lang-Nb3gNPqt.js";import"./RipperOverlay.vue_vue_type_script_setup_true_lang-Cp4iKbrB.js";import"./Button.vue_vue_type_script_setup_true_lang-DD6UfTlP.js";import"./AppLogoSquare-C-yBYgP-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"relative flex aspect-video flex-shrink-0 flex-grow-0 flex-col items-center justify-center self-stretch overflow-clip rounded-lg bg-theme-11 dark:bg-theme-8 text-slate-light-12/80 dark:text-slate-dark-12/80"},F={key:1,class:"text-xl font-bold"},K=$({__name:"LibraryCard",props:{data:{type:Object,required:!0}},setup(e){return(v,i)=>{var o,a,n;return l(),u(z,{route:`/dashboard/libraries/${e.data.id}`,line1:e.data.title,line2:e.data.folder_library&&((o=e.data.folder_library)==null?void 0:o.length)!=1?`${(a=e.data.folder_library)==null?void 0:a.length} folders`:`${(n=e.data.folder_library)==null?void 0:n.length}  folder`},{image:r(()=>[g("div",D,[i[0]||(i[0]=g("div",{class:"backdropCard-overlay"},null,-1)),e.data.image?(l(),u(A,{key:0,path:e.data.image,class:"z-0"},null,8,["path"])):(l(),w("span",F,c(e.data.title),1))])]),_:1},8,["route","line1","line2"])}}}),de=$({__name:"Desktop",setup(e){var y;const{data:v,error:i}=j({path:"dashboard/libraries",queryKey:["dashboard","libraries",(y=x.value)==null?void 0:y.serverBaseUrl]}),o=()=>{p().post("dashboard/libraries").then(({data:t})=>{var f;N.invalidateQueries({queryKey:["dashboard","libraries",(f=x.value)==null?void 0:f.serverBaseUrl]})})},a=k(!1),n=()=>{a.value=!0,p().post("dashboard/libraries/refresh").then(({data:t})=>{a.value=!1}).catch(()=>{a.value=!1})},m=k(!1),B=()=>{m.value=!0,p().post("dashboard/libraries/rescan").then(({data:t})=>{m.value=!1}).catch(()=>{m.value=!1})};return(t,f)=>{const h=R("Button");return l(),u(d(q),null,{default:r(()=>[s(d(S),{fullscreen:!0},{default:r(()=>[s(V,{error:d(i),gridStyle:1,title:"Libraries",description:"Manage your media libraries and their content here."},{cta:r(()=>[s(h,{id:"newLibrary",color:"theme",startIcon:"folderAdd",onClick:o},{default:r(()=>[b(c(t.$t("New library")),1)]),_:1})]),actions:r(()=>[s(h,{type:"button",id:"refresh",variant:"text",startIcon:"folderSwap",disabled:a.value,class:C(a.value?"first:children:animate-spin cursor-not-allowed":""),onClick:n},{default:r(()=>[b(c(t.$t("Refresh all libraries")),1)]),_:1},8,["disabled","class"]),s(h,{type:"button",id:"rescan",variant:"text",startIcon:"folderSwap",disabled:a.value,class:C(a.value?"first:children:animate-spin cursor-not-allowed":""),onClick:B},{default:r(()=>[b(c(t.$t("Rescan all libraries")),1)]),_:1},8,["disabled","class"])]),default:r(()=>[(l(!0),w(I,null,L(d(v)??[],_=>(l(),u(K,{key:_.id,data:_},null,8,["data"]))),128))]),_:1},8,["error"])]),_:1})]),_:1})}}});export{de as default};
