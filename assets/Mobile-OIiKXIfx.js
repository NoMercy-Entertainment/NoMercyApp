import{C as g,Ct as t,Et as I,J as q,K as f,S as n,T as z,U as J,_t as O,c as U,g as G,it as k,j as K,k as _,mt as m,ot as W,w as Y,wt as M,x as u}from"./i18n-fABvX7Av.js";import{ya as D}from"./ionic-DIYphHxf.js";import{C as Q,R as X,U as Z,W as ee,_ as te}from"./vue-core-CySh1wU7.js";import"./primevue-C3smGU9Q.js";import"./dist-CJipjyJM.js";import"./query-BsKzQ1i8.js";import"./esm-D1nPlPuN.js";import{t as ae}from"./esm-Dqy1ik-w.js";import{Hn as re,Jn as h,b as se,gi as oe,k as le,qn as y,zn as L,zr as ie}from"./index-C2s_qrrf.js";import"./DropdownMenu-WXWw6or4.js";import"./useInfiniteServerClient-CMO3-ZWw.js";import{t as ne}from"./useServerClient-CuTLtZ_P.js";import"./MusicButton-DjUzxkcN.js";import"./BannerButton-BuxuXs3n.js";import"./MediaLikeButton-B9kozM8r.js";import{t as ue}from"./Marquee-CbaqDRNh.js";import"./TrackLinks-V7aE_JSU.js";import"./BigPlayButton-CQ2DlgeT.js";import"./EqSpinner-D6kcc6gr.js";import{t as ce}from"./NotFound-b74PvKIW.js";import"./ShareButton-D9UxC6Lf.js";import{i as de,n as pe,r as fe,t as ve}from"./TrackRow-v32Fp14i.js";U();Z();var me={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},he={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},ye=K({__name:"Mobile",setup(xe){const s=ee(),b=u(()=>s.path.startsWith("/music/album")),w=u(()=>s.path.startsWith("/music/artist")),C=u(()=>s.path.startsWith("/music/playlists")),S=u(()=>s.path.startsWith("/music/tracks")),T=u(()=>s.path.startsWith("/music/genres")),P=u(()=>b.value?"album":w.value?"artist":C.value?"playlist":S.value?"favorite":T.value?"genre":"unknown"),V=u(()=>String(s.params.id??"")),{data:e,isError:R}=ne({path:s.fullPath}),$=m(null),c=O([]),i=m("");k(e,a=>{oe(a?.name??null),v(a?.tracks??[],h.value,y.value,i.value),L(a?.color_palette?.cover)}),k(y,a=>{v(e.value?.tracks??[],h.value,a,i.value)}),k(h,a=>{v(e.value?.tracks??[],a,y.value,i.value)}),k(i,a=>{v(e.value?.tracks??[],h.value,y.value,a)});function v(a,l,r,o){const d=ie(a??[],l,r,re);o===""?c.value=d:c.value=d?.filter(p=>p.name?.toLowerCase().includes(o?.toLowerCase?.())||p.artist_track?.some(A=>A.name.toLowerCase().includes(o?.toLowerCase?.()))||p.album_track?.[0]?.name.toLowerCase().includes(o?.toLowerCase?.()))??[]}J(()=>{v(e?.value?.tracks??[],h.value,y.value,i.value),e.value?.color_palette?.cover&&L(e.value?.color_palette?.cover)}),X(()=>{v(e?.value?.tracks??[],h.value,y.value,i.value),e.value?.color_palette?.cover&&L(e.value?.color_palette?.cover)});function j(){le.back()}const x=m(!1),F=m(!1),B=m(),H=m(),E=ae(u(()=>({count:c.value?.length??0,getScrollElement:()=>H.value?.$el??null,estimateSize:()=>56,overscan:10})));function N(){const r=D("capacitor")?88:64,o=B.value?.$el,d=o?.firstChild;if(!o||!d)return;const p=o.getBoundingClientRect().top;x.value=p<=170,F.value=p<=160,p<=r?document.documentElement.classList.contains("scheme-dark")?d.style.background="hsl(from var(--color-theme-8) h s 23%)":(d.style.background="var(--color-theme-8)",o.style.color="white"):(d.style.background="",o.style.color="")}return(a,l)=>(f(),g(t(Q),null,{default:W(()=>[_(t(te),{ref_key:"container",ref:H,"scroll-events":!0,onIonScroll:N},{default:W(()=>[t(R)&&!t(e)?(f(),g(ce,{key:0})):!t(s).params.id||t(s).params.id&&t(e)?.id===t(s).params.id?(f(),z("div",{key:1,ref_key:"main",ref:$,class:"flex flex-col h-auto overflow-x-clip w-available sm:rounded-2xl -mt-6 text-surface-12"},[_(fe,{data:t(e)},null,8,["data"]),n("div",me,[l[2]||(l[2]=n("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),n("div",{id:"navbar",class:M([{"opacity-0 pointer-events-none":!x.value,"opacity-100 pointer-events-auto":x.value},"fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-surface-11 dark:bg-surface-1 top-0 pt-4 transition-all duration-200"])},[l[1]||(l[1]=n("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-all duration-200 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),n("button",{class:"z-30 flex h-10 w-11 items-center justify-center rounded-md",onClick:j},[_(se,{icon:"arrowLeft"})]),n("div",{id:"navText",class:M([{"opacity-0 pointer-events-none":!x.value,"opacity-100 pointer-events-auto":x.value},"pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-all duration-200 w-[70%] overflow-clip text-xl"])},[_(ue,{text:t(e)?.name},null,8,["text"])],2)],2),(f(),g(de,{key:t(e)?.id,data:t(e),filter:i.value,onFilterChange:l[0]||(l[0]=r=>i.value=r)},null,8,["data","filter"])),n("div",he,[(f(),g(pe,{key:t(e)?.id,ref_key:"sortHeader",ref:B,"is-album-route":b.value,"is-artist-route":w.value,"is-playlists-route":C.value,"is-favorites-route":S.value,"is-genres-route":T.value},null,8,["is-album-route","is-artist-route","is-playlists-route","is-favorites-route","is-genres-route"])),n("div",{style:I({height:`${t(E).getTotalSize()}px`,width:"100%",position:"relative"})},[(f(!0),z(G,null,q(t(E).getVirtualItems(),r=>(f(),z("div",{key:c.value[r.index]?.id+c.value[r.index]?.favorite,style:I({position:"absolute",top:0,left:0,width:"100%",height:`${r.size}px`,transform:`translateY(${r.start}px)`})},[_(ve,{data:c.value[r.index],"display-list":c.value,index:r.index,"is-album-route":b.value,"is-artist-route":w.value,"is-playlists-route":C.value,"is-favorites-route":S.value,"is-genres-route":T.value,"route-type":P.value,"route-param-id":V.value},null,8,["data","display-list","index","is-album-route","is-artist-route","is-playlists-route","is-favorites-route","is-genres-route","route-type","route-param-id"])],4))),128))],4)])])],512)):Y("",!0)]),_:1},512)]),_:1}))}}),Ne=ye;export{Ne as default};
