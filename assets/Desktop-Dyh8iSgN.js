import{aG as ee,bE as re,K as l,L as n,az as oe,ba as t,f6 as $,f7 as N,f8 as h,ax as se,bC as ae,v as te,j as le,o as S,a7 as _,x as i,aI as d,bQ as ne,c as C,h as y,a,t as R,aS as ue,bF as ie,a6 as de,bP as me,bJ as pe,bG as ve}from"./index-DAB1IrN_.js";import{_ as _e}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-DuvO0BJ5.js";import{a as fe}from"./index-BaJL-8Gj.js";import{s as q}from"./index-C-jR3bLt.js";import"./FloatingBackButton.vue_vue_type_script_setup_true_lang-wjmomsJU.js";import"./Button.vue_vue_type_script_setup_true_lang-C1N1iGBk.js";const we={key:0,class:"col-span-2 col-start-1 2xl:col-start-1"},ge={class:"flex flex-col gap-2"},ce={class:"flex flex-col gap-2"},ke={class:"flex flex-col gap-2"},xe={key:1,class:"col-span-2 col-start-1 2xl:col-start-3"},be={class:"flex flex-col gap-2"},Ve={class:"flex flex-col gap-2"},Se={class:"flex flex-col gap-2"},qe={key:2,class:"col-span-2 col-start-1 2xl:col-start-5"},Be={class:"flex flex-col gap-2"},Ce={class:"flex gap-4"},ye=["aria-label","href"],Pe=ee({__name:"Desktop",setup(Ue){var O,P,Q,E,j,z,A,D,F,K;const{data:o,refetch:H,error:W}=re({path:"/dashboard/configuration"}),f=l(!1),u=l(o.value??{}),m=(e,r)=>{if(o.value){if(pe(o.value[e])==r){delete u.value[e],u.value={...u.value};return}u.value={...u.value,[e]:r??void 0}}};n(o,e=>{e&&(u.value={},w.value=e==null?void 0:e.server_name,g.value=e==null?void 0:e.external_port,c.value=e==null?void 0:e.internal_port,k.value=e==null?void 0:e.queue_workers,U.value=e==null?void 0:e.cron_workers,G.value=e==null?void 0:e.data_workers,I.value=e==null?void 0:e.request_workers,b.value=e==null?void 0:e.encoder_workers,x.value=e==null?void 0:e.image_workers,p.value=e==null?void 0:e.swagger,f.value=!0)}),oe(()=>{var e,r,B,v,V,s,T,J,L,M;o.value&&(u.value={},w.value=(e=o.value)==null?void 0:e.server_name,g.value=(r=o.value)==null?void 0:r.external_port,c.value=(B=o.value)==null?void 0:B.internal_port,k.value=(v=o.value)==null?void 0:v.queue_workers,U.value=(V=o.value)==null?void 0:V.cron_workers,G.value=(s=o.value)==null?void 0:s.data_workers,I.value=(T=o.value)==null?void 0:T.request_workers,b.value=(J=o.value)==null?void 0:J.encoder_workers,x.value=(L=o.value)==null?void 0:L.image_workers,p.value=(M=o.value)==null?void 0:M.swagger,f.value=!0)});const w=l(((O=o.value)==null?void 0:O.server_name)??"");n(w,e=>{m("server_name",e),t.value&&($([...N.value.filter(r=>r.id!==t.value.id),{...t.value,server_name:e.toString()}]),h({...t.value,server_name:e.toString()}))});const g=l(((P=o.value)==null?void 0:P.external_port)??0);n(g,e=>{m("external_port",e),t.value&&($([...N.value.filter(r=>r.id!==t.value.id),{...t.value,external_port:e.toString()}]),h({...t.value,external_port:e.toString()}))});const c=l(((Q=o.value)==null?void 0:Q.internal_port)??0);n(c,e=>{m("internal_port",e),t.value&&($([...N.value.filter(r=>r.id!==t.value.id),{...t.value,internal_port:e.toString()}]),h({...t.value,internal_port:e.toString()}))});const k=l(((E=o.value)==null?void 0:E.queue_workers)??0);n(k,e=>{m("queue_workers",e)});const U=l(((j=o.value)==null?void 0:j.cron_workers)??0);n(U,e=>{m("cron_workers",e)});const G=l(((z=o.value)==null?void 0:z.data_workers)??0);n(G,e=>{m("data_workers",e)});const I=l(((A=o.value)==null?void 0:A.request_workers)??0);n(I,e=>{m("request_workers",e)});const x=l(((D=o.value)==null?void 0:D.image_workers)??0);n(x,e=>{m("image_workers",e)});const b=l(((F=o.value)==null?void 0:F.encoder_workers)??0);n(b,e=>{m("encoder_workers",e)});const p=l(((K=o.value)==null?void 0:K.swagger)??!1);n(p,e=>{m("swagger",e)});const X=se(()=>Object.keys(u.value).length>0);n(u,e=>{console.log(e)});const Y=ae(),Z=()=>{console.raw(u.value),ve().patch("/dashboard/configuration",u.value).then(()=>{H(),Y.invalidateQueries({queryKey:["serverInfo"]})})};return(e,r)=>{const B=te("Button");return S(),le(d(me),null,{default:_(()=>[i(d(ne),{fullscreen:!0},{default:_(()=>[i(_e,{error:d(W),gridStyle:2,title:"General",description:""},{cta:_(()=>r[8]||(r[8]=[])),actions:_(()=>[i(B,{type:"submit",id:"save",disabled:!X.value,color:"theme",class:"ml-auto",form:"myForm",onClick:r[7]||(r[7]=v=>Z())},{default:_(()=>[de(R(e.$t("Save")),1)]),_:1},8,["disabled"])]),default:_(()=>{var v,V;return[f.value?(S(),C("div",we,[a("div",ge,[r[9]||(r[9]=a("label",{for:"server_name"},"Server name",-1)),i(d(fe),{id:"server_name",modelValue:w.value,"onUpdate:modelValue":r[0]||(r[0]=s=>w.value=s),class:"mb-4"},null,8,["modelValue"])]),a("div",ce,[r[10]||(r[10]=a("label",{for:"internal_port"},"Secure internal port",-1)),i(d(q),{id:"internal_port",modelValue:c.value,"onUpdate:modelValue":r[1]||(r[1]=s=>c.value=s),class:"mb-4",useGrouping:!1,showButtons:"",min:2e3},null,8,["modelValue"])]),a("div",ke,[r[11]||(r[11]=a("label",{for:"external_port"},"Secure external port",-1)),i(d(q),{id:"external_port",modelValue:g.value,"onUpdate:modelValue":r[2]||(r[2]=s=>g.value=s),class:"mb-4",useGrouping:!1,showButtons:"",min:2e3},null,8,["modelValue"])])])):y("",!0),f.value?(S(),C("div",xe,[a("div",be,[r[12]||(r[12]=a("label",{for:"encoder_workers"},"Encoder workers",-1)),i(d(q),{id:"encoder_workers",modelValue:b.value,"onUpdate:modelValue":r[3]||(r[3]=s=>b.value=s),class:"mb-4",useGrouping:!1,showButtons:"",min:0},null,8,["modelValue"])]),a("div",Ve,[r[13]||(r[13]=a("label",{for:"image_workers"},"Image workers",-1)),i(d(q),{id:"image_workers",modelValue:x.value,"onUpdate:modelValue":r[4]||(r[4]=s=>x.value=s),class:"mb-4",useGrouping:!1,showButtons:"",min:0},null,8,["modelValue"])]),a("div",Se,[r[14]||(r[14]=a("label",{for:"queue_workers"},"Queue workers",-1)),i(d(q),{id:"queue_workers",modelValue:k.value,"onUpdate:modelValue":r[5]||(r[5]=s=>k.value=s),class:"mb-4",useGrouping:!1,showButtons:"",min:0},null,8,["modelValue"])])])):y("",!0),f.value?(S(),C("div",qe,[a("div",Be,[a("span",Ce,[r[15]||(r[15]=a("label",{for:"swagger"},"Open API / Swagger Ui",-1)),p.value&&((v=d(t))!=null&&v.serverBaseUrl)?(S(),C("a",{key:0,target:"_blank","aria-label":e.$t("Open API / Swagger Ui in a new tab"),href:(V=d(t))==null?void 0:V.serverBaseUrl,class:"flex gap-1 items-center underline underline-offset-4 h-4 text-sm"},[a("span",null,R(e.$t("Open")),1),i(ue,{icon:"shareSquare",className:"size-4",color:"theme"})],8,ye)):y("",!0)]),i(ie,{"model-value":p.value,"onUpdate:modelValue":r[6]||(r[6]=s=>p.value=s)},null,8,["model-value"])])])):y("",!0)]}),_:1},8,["error"])]),_:1})]),_:1})}}});export{Pe as default};
//# sourceMappingURL=Desktop-Dyh8iSgN.js.map
