import{Gt as l,Ln as d,Mt as S,Rn as v,Rt as y,Tt as k,Vn as u,Vt as C,Wt as f,cn as o,fn as D,i as E,kn as _,n as $,qt as w,u as q,un as V,xn as a,zt as m}from"./index-C8wrpkyN.js";import"./dist-DT2yuChF.js";import"./esm-DnlYWABm.js";import"./esm-CdHIRdo_.js";import"./dist-DtOedwIT.js";import"./focus-visible-C1DWu8Oz.js";import"./index5-C9RIJ-sZ.js";import"./client-DAXuPTec.js";import"./ionic-global-QXgPMqNd.js";import"./hardware-back-button-9ZINzT5a.js";import"./index3-BubtwhWu.js";import"./helpers-D5mJiZ9q.js";import"./index6-Cj1ScfU-.js";import"./index8-DaGgXvc2.js";import"./keyboard-COERgV0V.js";import"./index2-BuY1gQTr.js";import"./ios.transition-BUwO3_AE.js";import"./keyboard2-CSWHSxpI.js";import"./md.transition-Dd2SUgMb.js";import"./dir-CJiJYBc7.js";import"./ui-BWVnjNNY.js";import"./client-BmAhQ-69.js";import{C as t,t as g}from"./currentServer-B_KQACAB.js";import"./config-BZ-AEJ_J.js";import"./core-BLZUGO-K.js";import"./esm-BiKSXF-U.js";import"./global-WVsx5src.js";import"./esm-B8xVkXPy.js";import"./bundle-mjs-DzMTChaT.js";import"./user-CXzDmTwG.js";import{t as b}from"./serverClient-K02oLPZR.js";import"./router-I2PvuKTp.js";import"./utils-CYCtUrjH.js";import"./useBaseQuery-B6wsCOmB.js";import"./useInfiniteServerClient-D5CFD8Z7.js";import{tt as N}from"./SocketClient-CeGi9Yeo.js";import"./useQueryClient-mZLXzkAX.js";import"./useQuery-BBjfmHCe.js";import"./apiClient-CnOywAmP.js";import"./notifications-DAOHq0v-.js";import"./utils-T6SCnbWu.js";import"./deviceInfo-DQllL7m1.js";import"./auth-D3TfzZqc.js";import"./_plugin-vue_export-helper-pDp7unP0.js";import"./AppLogoSquare-B9MCCmvc.js";import{t as T}from"./TMDBImage-Dzn16_6n.js";import"./MoooomIcon-un4l75-N.js";import{t as z}from"./useServerClient-Bvu1z2Rs.js";import"./ScrollContainer-Nc0DKhrC.js";import"./useMounted-CAJFTqdL.js";import"./RipperOverlay-D6qylJUX.js";import"./HubConnection-Dx0QDLJI.js";import"./ripperSocket-C3CKrXMp.js";import"./Button-C7060WzV.js";import"./FloatingBackButton-XWxuqzT1.js";import{t as A}from"./DashboardLayout-C7CKBnVp.js";import{t as I}from"./DashboardCard-D9GMu4dL.js";k();var M={class:"relative flex aspect-video flex-shrink-0 flex-grow-0 flex-col items-center justify-center self-stretch overflow-clip rounded-lg bg-theme-8"},j={key:1,class:"text-xl font-bold"},K=w({__name:"LibraryCard",props:{data:{type:Object,required:!0}},setup(r){return(s,n)=>(o(),m(I,{line1:r.data.title,line2:r.data.folder_library&&r.data.folder_library?.length!==1?`${r.data.folder_library?.length} folders`:`${r.data.folder_library?.length}  folder`,route:`/dashboard/libraries/${r.data.id}`},{image:a(()=>[y("div",M,[n[0]||(n[0]=y("div",{class:"backdropCard-overlay"},null,-1)),r.data.image?(o(),m(T,{key:0,path:r.data.image,aspect:"backdrop",class:"z-0"},null,8,["path"])):(o(),C("span",j,u(r.data.title),1))])]),_:1},8,["line1","line2","route"]))}}),U=K;k();var F=w({__name:"Desktop",setup(r){const s=$(),{data:n,error:x}=z({path:"dashboard/libraries",queryKey:["dashboard","libraries",g.value?.serverBaseUrl]});function B(){b().post("dashboard/libraries").then(({data:e})=>{s.add({severity:e.status==="ok"?"success":"error",summary:t(e.status==="ok"?"Success":"Error"),detail:t(e.message,...e.args),life:5e3}),N.invalidateQueries({queryKey:["dashboard","libraries",g.value?.serverBaseUrl]})})}const i=_(!1);function L(){i.value=!0,b().post("dashboard/libraries/refresh").then(({data:e})=>{i.value=!1,s.add({severity:e.status==="ok"?"success":"error",summary:t(e.status==="ok"?"Success":"Error"),detail:t(e.message,...e.args),life:5e3})}).catch(()=>{i.value=!1,s.add({severity:"error",summary:t("Error"),detail:t("An error occurred while rescanning the libraries"),life:5e3})})}const c=_(!1);function R(){c.value=!0,b().post("dashboard/libraries/rescan").then(({data:e})=>{c.value=!1,s.add({severity:e.status==="ok"?"success":"error",summary:t(e.status==="ok"?"Success":"Error"),detail:t(e.message,...e.args),life:5e3})}).catch(()=>{c.value=!1,s.add({severity:"error",summary:t("Error"),detail:t("An error occurred while rescanning the libraries"),life:5e3})})}return(e,G)=>{const p=D("Button");return o(),m(d(q),null,{default:a(()=>[l(d(E),{fullscreen:!0},{default:a(()=>[l(A,{error:d(x),"grid-style":1,title:"Libraries",description:"Manage your media libraries and their content here."},{cta:a(()=>[l(p,{id:"newLibrary",color:"theme","start-icon":"folderAdd",onClick:B},{default:a(()=>[f(u(e.$t("New library")),1)]),_:1})]),actions:a(()=>[l(p,{id:"refresh",type:"button",variant:"text","start-icon":"folderSwap",disabled:i.value,class:v(i.value?"first:children:animate-spin cursor-not-allowed":""),onClick:L},{default:a(()=>[f(u(e.$t("Refresh all libraries")),1)]),_:1},8,["disabled","class"]),l(p,{id:"rescan",type:"button",variant:"text","start-icon":"folderSwap",disabled:i.value,class:v(i.value?"first:children:animate-spin cursor-not-allowed":""),onClick:R},{default:a(()=>[f(u(e.$t("Rescan all libraries")),1)]),_:1},8,["disabled","class"])]),default:a(()=>[(o(!0),C(S,null,V(d(n)??[],h=>(o(),m(U,{key:h.id,data:h},null,8,["data"]))),128))]),_:1},8,["error"])]),_:1})]),_:1})}}}),We=F;export{We as default};
