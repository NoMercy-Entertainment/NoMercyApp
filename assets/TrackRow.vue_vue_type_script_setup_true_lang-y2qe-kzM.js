import{bP as bt,q as p,bC as it,aX as nt,br as kt,bQ as wt,bL as M,bR as R,bM as A,bS as E,bO as ot,bT as vt,aW as H,h as B,w as rt,x as St,i as lt,u as $t,t as _t}from"./index-CyQIzsKG.js";import{_ as dt}from"./BigPlayButton.vue_vue_type_script_setup_true_lang-hYTTRhMA.js";import{_ as z}from"./OptimizedIcon.vue_vue_type_script_setup_true_lang-CHVfvbJh.js";import{_ as Ct}from"./MusicButton.vue_vue_type_script_setup_true_lang-CvIAMOpr.js";import{M as ht}from"./MediaLikeButton-CEQMcfYW.js";import{_ as ct}from"./ShareButton.vue_vue_type_script_setup_true_lang-mCYt55xI.js";import{$ as L,ae as pt,B as O,h as k,o as i,j as n,c as g,b as f,z as m,a0 as e,p as T,v as S,Q as C,F as gt,ab as Et,d as D,w as N,f as Tt,k as yt,x as $,A as xt,G as Rt,q as jt}from"./vue-ionic-9j_oSDCB.js";import{_ as At}from"./FavoriteImage.vue_vue_type_script_setup_true_lang-5EUBDpmP.js";import{_ as G}from"./CoverImage.vue_vue_type_script_setup_true_lang-DlE12f7N.js";import{_ as qt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{b8 as zt}from"./vendor-Dgtccx1h.js";import{o as Lt}from"./contextMenuItems-h_yk04dr.js";import{E as Pt}from"./EqSpinner-D5uIOOVR.js";import{_ as ut}from"./TrackLinks.vue_vue_type_script_setup_true_lang-BI4oJblJ.js";import{_ as Ht}from"./DropdownMenu.vue_vue_type_script_setup_true_lang-CmVPRs-h.js";import{_ as Mt}from"./BannerButton.vue_vue_type_script_setup_true_lang-D4vEf_LK.js";import{_ as mt}from"./PlayerIcon.vue_vue_type_script_setup_true_lang-8t4AtdGs.js";import{_ as ft}from"./Marquee.vue_vue_type_script_setup_true_lang-D61ARarg.js";const Bt={class:"flex sm:gap-4 items-center py-4 px-4 sm:px-8 w-full pl-3 pr-4 sm:pr-10 h-20 z-40","data-index":"1"},Dt={class:"relative hidden h-fit cursor-pointer items-center justify-center text-auto-12/11 focus-within:text-auto sm:flex mr-auto"},Nt=["value"],Ot={class:"absolute top-2 right-2 bottom-2 flex items-center justify-center"},Ae=L({__name:"ControlHeader",props:{data:{type:Object,required:!1},filter:{type:String,required:!0}},emits:["filter-change"],setup(t){const d=t,x=pt();function s(){var c;p.setQueue(((c=d.data)==null?void 0:c.tracks)??[])}const w=O(()=>{var c;return{title:((c=d.data)==null?void 0:c.name)??"",url:`https://app.nomercy.tv${x.fullPath}`}});return(c,h)=>{var a,r;return i(),k(gt,null,[h[1]||(h[1]=n("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom bg-focus"},null,-1)),n("div",Bt,[(a=t.data)!=null&&a.tracks?(i(),g(dt,{key:0,data:t.data,class:"hidden sm:flex"},null,8,["data"])):f("",!0),n("div",Dt,[n("input",{id:"search",value:t.filter,class:"bg-transparent border-auto-12/5 border-2 rounded-md focus-visible:!border-auto-12/9 focus-visible:text-current placeholder-current p-2",placeholder:"Filter…",type:"text",name:"search",onInput:h[0]||(h[0]=l=>{var o;return c.$emit("filterChange",(o=l.target)==null?void 0:o.value)})},null,40,Nt),n("div",Ot,[m(z,{icon:"searchMagnifyingGlass",class:"!w-7"})])]),m(ct,{"share-data":w.value,class:"!p-0 text-white hidden sm:flex sm:ml-auto"},null,8,["share-data"]),m(ht,{data:t.data,color:"var(--color-focus)","class-name":"!w-8 !h-8"},null,8,["data"]),m(ct,{class:"!p-0 text-white sm:hidden"}),e(bt)?(i(),g(Ct,{key:1,id:"add",onclick:s,class:"",label:"add"},{default:T(()=>[m(z,{icon:"add",class:"!w-7"})]),_:1})):f("",!0)]),n("div",{class:S(["sm:hidden sticky left-full -mt-16 z-1199 flex justify-center items-center gap-2 mr-4 h-auto",{"top-11":!e(C)("capacitor"),"top-10":e(C)("capacitor")}]),style:{"box-shadow":"0 1px 2px 0 rgba(16, 24, 40, 0.05)"}},[(r=t.data)!=null&&r.tracks?(i(),g(dt,{key:0,data:t.data},null,8,["data"])):f("",!0)],2)],64)}}}),Gt={key:0,class:"relative my-4 flex w-full flex-1 flex-shrink-0 flex-col items-start justify-start gap-4 flex-grow-1 sm:hidden"},Vt=["innerHTML"],Ft={class:"relative hidden flex-1 flex-shrink-0 flex-col items-start justify-start gap-1 flex-grow-1 sm:flex"},It={class:"text-left font-semibold uppercase text-white"},Ut=["innerHTML"],Qt={class:"relative flex items-center justify-start gap-2"},Wt={key:0,class:"flex items-center gap-4 text-sm font-medium"},Kt={key:0,class:"relative aspect-square h-12 w-12 overflow-clip rounded-full min-w-12"},Xt={key:1,class:"text-left text-sm font-medium text-white"},Jt={class:"text-left text-sm font-medium text-white"},Yt={key:2,class:"text-left text-sm font-medium text-white"},Zt={class:"text-left text-sm font-medium text-white"},qe=L({__name:"ArtistHeader",props:{data:{type:Object,required:!1}},setup(t){const d=t,{t:x}=Et(),s=D(""),w=D(),c=D();function h(a){var r;if(a)return kt(x,((r=a==null?void 0:a.tracks)==null?void 0:r.map(l=>wt(l.duration)).reduce((l,o)=>l+o,0))??0)}return N(d,a=>{a&&(s.value=h(a.data))}),Tt(()=>{s.value=h(d.data)}),N(w,a=>{if(!a)return;const r=a.getContext("2d",{willReadFrequently:!0,desynchronized:!0}),l=()=>{var u,v,b,_;const o=(v=(u=p._audioElement1)==null?void 0:u.motion)==null?void 0:v.canvas;o&&c.value&&(p._audioElement1.isPlaying()?((b=p._audioElement1)==null||b.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(c.value).backgroundColor]}),p._audioElement1.motion.gradient="theme",a.width=o.width,a.height=o.height,r.clearRect(0,0,a.width,a.height),r.drawImage(o,0,0,a.width,a.height)):p._audioElement2.isPlaying()&&((_=p._audioElement2)==null||_.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(c.value).backgroundColor]}),p._audioElement2.motion.gradient="theme",a.width=o.width,a.height=o.height,r.clearRect(0,0,a.width,a.height),r.drawImage(o,0,0,a.width,a.height))),requestAnimationFrame(l)};l()}),N(c,a=>{var r,l,o,u;!a||!((r=p._audioElement1)!=null&&r.motion)||!((l=p._audioElement2)!=null&&l.motion)||((o=p._audioElement1)==null||o.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(a).backgroundColor]}),p._audioElement1.motion.gradient="theme",(u=p._audioElement2)==null||u.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(a).backgroundColor]}),p._audioElement2.motion.gradient="theme")}),(a,r)=>{var o,u,v,b,_,j,y,P,V,F,I,U,Q,W,K,X,J,Y,Z,tt;const l=yt("RouterLink");return i(),k("div",{id:"artist-header",class:S(["relative z-0 flex flex-col items-end justify-start text-white sm:flex-row sm:gap-9 sm:pt-8 sm:pb-8 sm:px-8",{"pt-safe-offset-12 px-8 gap-4":e(C)("capacitor"),"pt-24 px-6 gap-2 sm:gap-12":!e(C)("capacitor")}])},[n("div",{id:"audio-color",ref_key:"audioColor",ref:c,class:"absolute top-0 left-0 h-full w-full overflow-clip bg-focus"},null,512),r[0]||(r[0]=n("div",{class:"absolute top-0 left-0 h-full w-full overflow-clip bg-black/50"},null,-1)),n("div",{class:S(["frosting relative mx-auto flex aspect-square w-80 max-w-[90%] flex-col items-center justify-center overflow-clip rounded-xl bg-gradient-to-br min-w-64 bg-theme-7 from-theme-5 via-theme-7 to-theme-11 shadow",{"-mt-4":e(C)("capacitor"),"":!e(C)("capacitor")}])},[(o=t.data)!=null&&o.cover?(i(),g(G,{key:0,id:"image",data:t.data,size:250,"class-name":"aspect-square rounded-xl w-full",loading:"eager"},null,8,["data"])):(u=t.data)!=null&&u.id?(i(),g(At,{key:1,id:t.data.id,type:t.data.type,class:"aspect-square rounded-xl w-full"},null,8,["id","type"])):f("",!0)],2),(v=t.data)!=null&&v.name?(i(),k("div",Gt,[n("div",{class:"w-full text-2xl font-semibold whitespace-pre-line",innerHTML:e(it)(((b=t.data)==null?void 0:b.name)??"Songs you like","text-sm line-clamp-1")},null,8,Vt)])):f("",!0),n("div",Ft,[n("p",It,$((j=(_=t.data)==null?void 0:_.type)==null?void 0:j.replace(/s$/u,"")),1),n("div",{class:"w-full text-5xl font-semibold line-clamp-2 leading-[130%] whitespace-pre",innerHTML:e(it)(((y=t.data)==null?void 0:y.name)??"Songs you like","text-2xl line-clamp-1")},null,8,Ut),n("div",Qt,[e(nt)?(i(),k("div",Wt,[((V=(P=t.data)==null?void 0:P.artists)==null?void 0:V.length)===1&&((I=(F=t.data)==null?void 0:F.artists)!=null&&I[0].cover)?(i(),k("div",Kt,[m(G,{id:"image",data:(Q=(U=t.data)==null?void 0:U.artists)==null?void 0:Q[0],size:250,"class-name":"h-full w-full",loading:"eager"},null,8,["data"])])):f("",!0),m(l,{to:((K=(W=t.data)==null?void 0:W.artists)==null?void 0:K[0].link)??"#",class:"text-sm empty:hidden"},{default:T(()=>{var et,at,st;return[xt($(((st=(at=(et=t.data)==null?void 0:et.artists)==null?void 0:at[0])==null?void 0:st.name)??"Various artists"),1)]}),_:1},8,["to"])])):f("",!0),(X=t.data)!=null&&X.tracks&&e(nt)?(i(),k("p",Xt," • ")):f("",!0),n("p",Jt,$((Y=(J=t.data)==null?void 0:J.tracks)==null?void 0:Y.length)+" "+$(((tt=(Z=t.data)==null?void 0:Z.tracks)==null?void 0:tt.length)===1?e(x)("song"):e(x)("songs")),1),s.value?(i(),k("p",Yt," • ")):f("",!0),n("p",Zt,$(s.value),1)])])],2)}}}),te=["onclick"],ee={class:""},q=L({__name:"SortButton",props:{name:{type:String,required:!0},sortingType:{type:String,required:!0},iconSpacer:{type:String,default:""}},setup(t){function d(s){console.log("handleSortChange",s),A.value===s?ot(M.value===R.asc?R.desc:R.asc):ot(R.asc),vt(s)}function x(s){var c,h,a,r,l,o,u,v;const w=s.target;if(s.key==="ArrowUp"){const b=(h=(c=w.parentElement)==null?void 0:c.parentElement)==null?void 0:h.previousElementSibling;b&&b.nodeName==="BUTTON"||b.nodeName==="A"?b.focus():(a=document.querySelector("#playList"))==null||a.focus()}else s.key==="ArrowDown"?(o=(l=(r=w.parentElement)==null?void 0:r.parentElement)==null?void 0:l.nextElementSibling)==null||o.focus():s.key==="ArrowLeft"?(u=w.previousElementSibling)==null||u.focus():s.key==="ArrowRight"&&((v=w.nextElementSibling)==null||v.focus())}return(s,w)=>(i(),k("button",{"no-ring":"",class:"relative cursor-pointer items-center focus-visible:underline focus-visible:underline-offset-2",onclick:()=>d(t.sortingType),onkeyup:x},[n("span",ee,$(s.$t(t.name)),1),e(M)===e(R).asc&&e(A)===t.sortingType&&e(A)!==e(E).index?(i(),g(z,{key:0,icon:"chevronUp",class:S(`w-6 h-6 ${t.iconSpacer}`)},null,8,["class"])):e(M)===e(R).desc&&e(A)===t.sortingType&&e(A)!==e(E).index?(i(),g(z,{key:1,icon:"chevronDown",class:S(`w-6 h-6 ${t.iconSpacer}`)},null,8,["class"])):f("",!0)],8,te))}}),ae=L({__name:"SortHeader",setup(t){return(d,x)=>(i(),k("div",{id:"sortHeaderElement",class:S(["sticky -mx-4 px-4 z-30 mt-4 block h-10 content-center items-center justify-start self-stretch bg-transparent text-sm font-medium transition-all duration-200 w-available group/track sm:w-available sm:-top-px",{"top-safe-offset-10":e(C)("capacitor"),"top-safe-offset-16":!e(C)("capacitor")}])},[x[0]||(x[0]=n("span",{id:"sorterChild",class:"absolute inset-0 h-10 sm:rounded-t-2xl overflow-clip w-full transition-all duration-200"},null,-1)),n("span",{class:S([{"album-grid":e(H),"artist-grid":!e(H)},"grid justify-start items-center self-stretch pr-3 sm:px-3 rounded-lg sm:hover:bg-slate-lightA-6 dark:hover:bg-slate-darkA-6 text-auto-12 group/track text-sm font-medium py-2 z-0 group/track gap-2"])},[m(q,{id:"sortIndex","aria-label":d.$t("Sort by index"),"sorting-type":e(E).index,class:"!flex justify-center","icon-spacer":"absolute left-6",name:"#"},null,8,["aria-label","sorting-type"]),m(q,{"aria-label":d.$t("Sort by name"),"sorting-type":e(E).name,class:"flex sm:flex","icon-spacer":"w-6 h-6",name:"Title"},null,8,["aria-label","sorting-type"]),m(q,{"aria-label":d.$t("Sort by album"),"sorting-type":e(E).album,class:S(["!hidden sm:!flex",{"opacity-0":!e(H),"opacity-100":e(H)}]),"icon-spacer":"w-6 h-6",name:"Album"},null,8,["aria-label","sorting-type","class"]),m(q,{name:"Release date","aria-label":d.$t("Sort by date"),"sorting-type":e(E).date,class:"!hidden sm:!flex","icon-spacer":"w-6 h-6"},null,8,["aria-label","sorting-type"]),m(q,{"aria-label":d.$t("Sort by duration"),"sorting-type":e(E).duration,class:"!hidden sm:!flex gap-2 flex-row-reverse pr-[4.5rem]","icon-spacer":"w-6 h-6",name:"Duration"},null,8,["aria-label","sorting-type"])],2)],2))}}),ze=qt(ae,[["__scopeId","data-v-ec18ad3c"]]),se=["data-track-id"],ie={class:"flex justify-center text-center"},ne={key:0,class:"group-focus-visible/track:sm:hidden group-hover/track:sm:hidden"},oe={class:"flex h-12 items-center gap-2 overflow-hidden w-available sm:gap-4"},re={class:"flex h-full flex-col justify-evenly overflow-clip w-inherit"},le={class:"flex h-6 flex-nowrap overflow-clip text-left line-clamp-1 w-inherit tracking-wide leading-6 px-2 py-1 -ml-2"},de=["data-size"],ce={class:"flex whitespace-nowrap"},ue={class:"hidden sm:flex invisible max-h-12 md:visible"},me={class:"hidden sm:flex mr-4 monospace sm:mr-0"},Le=L({__name:"TrackRow",props:{data:{type:Object,required:!0},index:{type:Number,required:!0},displayList:{type:Array,required:!0}},setup(t){const d=t,x=pt(),s=O(()=>x.path.startsWith("/music/album")),w=O(()=>x.path.startsWith("/music/artist"));function c(){var h,a,r,l,o,u;if(!((h=$t.value.features)!=null&&h.nomercyConnect)){p.playTrack(d.data,d.displayList);return}(u=_t.value)==null||u.invoke("StartPlaybackCommand",s.value?"album":"artist",s.value?(r=(a=d.data)==null?void 0:a.album_track.at(0))==null?void 0:r.id:(o=(l=d.data)==null?void 0:l.artist_track.at(0))==null?void 0:o.id,d.data.id)}return(h,a)=>{var l,o,u,v,b,_,j;const r=yt("RouterLink");return i(),k("button",{"data-track-id":(l=t.data)==null?void 0:l.id,onclick:c,class:S(["grid justify-start children:pointer-events-none items-center self-stretch text-auto-12 pr-3 sm:px-3 rounded-lg sm:hover:bg-slate-lightA-6 dark:sm:hover:bg-slate-darkA-6 group/track text-sm font-medium py-2 z-10",{"album-grid":s.value,"artist-grid":!s.value}]),"data-target":"track",tabindex:"0",onContextmenu:a[1]||(a[1]=y=>e(Lt)(y,t.data))},[n("span",ie,[((o=e(B))==null?void 0:o.id)!==t.data.id?(i(),k("span",ne,$(t.index+1),1)):f("",!0),((u=e(B))==null?void 0:u.id)===t.data.id?(i(),g(Pt,{key:1,color:"rgb(var(--color-focus))",playing:e(rt),class:"hidden group-focus-visible/track:sm:!hidden group-hover/track:sm:!hidden"},null,8,["playing"])):f("",!0),((v=e(B))==null?void 0:v.id)===t.data.id&&e(rt)?(i(),g(mt,{key:2,icon:"nmPause",class:"hidden h-6 w-6 group-focus-visible/track:sm:block group-hover/track:sm:block"})):(i(),g(mt,{key:3,icon:"nmPlay",class:"hidden h-6 w-6 group-focus-visible/track:sm:block group-hover/track:sm:block"}))]),n("span",oe,[s.value?(i(),g(G,{key:0,data:t.data,size:100,style:Rt({display:s.value?"none":""}),"class-name":"relative hidden h-12 w-12 overflow-hidden min-w-[3rem] sm:block",loading:"eager"},null,8,["data","style"])):f("",!0),n("span",re,[n("span",le,$(t.data.name),1),n("span",{"data-size":e(St),class:"inline-flex h-6 w-available gap-1 overflow-hidden whitespace-nowrap text-slate-light-3 dark:slate-dark-3 line-clamp-1 text-2xs hover:animate-pause leading-6"},[m(ft,null,{default:T(()=>[t.data&&!w.value?(i(),g(ut,{key:0,id:t.data.id,data:t.data.artist_track,onclick:y=>y.stopPropagation(),"data-target":"artist",type:"artists"},null,8,["id","data","onclick"])):f("",!0),t.data&&!s.value?(i(),g(ut,{key:1,id:t.data.id,data:t.data.album_track,onclick:y=>y.stopPropagation(),"data-target":"album",type:"albums"},null,8,["id","data","onclick"])):f("",!0)]),_:1})],8,de)])]),(i(!0),k(gt,null,jt(t.data.album_track,y=>(i(),k("span",{key:y.id,class:S(["hidden items-center overflow-clip pr-2 line-clamp-2 h-inherit w-inherit sm:flex",{"opacity-0":!s.value,"opacity-100":s.value}]),onClick:a[0]||(a[0]=P=>P.stopPropagation())},[m(r,{to:y==null?void 0:y.link,tabindex:"0","data-target":"album",class:"flex items-center gap-1 whitespace-nowrap font-semibold line-clamp-1 hover:underline focus:underline dark:font-medium pointer-events-auto","no-ring":""},{default:T(()=>[n("span",ce,[m(ft,{text:y.name},null,8,["text"])])]),_:2},1032,["to"])],2))),128)),n("span",ue,$((b=t.data)!=null&&b.date?new Date((_=t.data)==null?void 0:_.date).toLocaleDateString(e(zt).language??"en-US",{year:"numeric",month:"short",day:"2-digit"}):h.$t("Unknown")),1),n("span",{class:S(["flex items-center justify-end gap-2 text-end",{"mr-16":!e(lt)}])},[(i(),g(ht,{key:t.data.id+((j=t.data)==null?void 0:j.favorite),data:t.data,color:"var(--color-focus)"},null,8,["data"])),n("span",me,$(t.data.duration),1),e(lt)?(i(),g(Ht,{key:0,direction:"down"},{button:T(()=>[m(Mt,{class:"",title:""},{default:T(()=>[m(z,{"class-name":"relative h-5 w-5",icon:"menuDotsVertical"})]),_:1})]),default:T(()=>[a[2]||(a[2]=xt(" Hellooo "))]),_:1})):f("",!0)],2)],42,se)}}});export{ze as S,qe as _,Ae as a,Le as b};
