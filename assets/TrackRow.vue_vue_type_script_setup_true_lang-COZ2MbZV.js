import{I as T,Z as U,C as L,c as p,o as i,a as n,d as u,b as d,j as r,K as t,ew as J,s as v,n as y,S as w,F as W,ah as c,l as j,w as R,E as X,f as K,ed as H,t as x,cw as D,q as Q,e0 as Y,ex as ee,es as q,ey as $,et as _,ez as S,ev as M,eA as te,cv as A,a3 as z,ak as B,A as ae,al as se,h as ie,a5 as ne,W as N,ag as oe,ai as re}from"./index-C1DjUpiP.js";import{_ as O}from"./BigPlayButton.vue_vue_type_script_setup_true_lang-Cd--g6SW.js";import{_ as E}from"./OptimizedIcon.vue_vue_type_script_setup_true_lang-D4l8g0_V.js";import{_ as le}from"./MusicButton.vue_vue_type_script_setup_true_lang-X1eBpCOY.js";import{M as Z}from"./MediaLikeButton-C4LvEZhA.js";import{_ as I}from"./ShareButton.vue_vue_type_script_setup_true_lang-FY5fvgSx.js";import{u as de}from"./index-BZgGgbsZ.js";import{_ as ce}from"./FavoriteImage.vue_vue_type_script_setup_true_lang-BUaqAHeE.js";import{_ as P}from"./CoverImage.vue_vue_type_script_setup_true_lang-nw-ptjc7.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{o as me}from"./contextMenuItems-BjWjf7WP.js";import{E as fe}from"./EqSpinner-BbIVusd0.js";import{_ as V}from"./TrackLinks.vue_vue_type_script_setup_true_lang-DrIciJy4.js";import{_ as he}from"./DropdownMenu.vue_vue_type_script_setup_true_lang-BFgnaa-p.js";import{_ as pe}from"./BannerButton.vue_vue_type_script_setup_true_lang-De6ww0Wv.js";import{_ as F}from"./PlayerIcon.vue_vue_type_script_setup_true_lang-Bs90e-24.js";import{_ as G}from"./Marquee.vue_vue_type_script_setup_true_lang-DM9H6LSz.js";const ge={class:"flex sm:gap-4 items-center py-4 px-4 sm:px-8 w-full pl-3 pr-4 sm:pr-10 h-20 z-40","data-index":"1"},ye={class:"relative hidden h-fit cursor-pointer items-center justify-center text-auto-12/11 focus-within:text-auto sm:flex mr-auto"},xe=["value"],ke={class:"absolute top-2 right-2 bottom-2 flex items-center justify-center"},lt=T({__name:"ControlHeader",props:{data:{type:Object,required:!1},filter:{type:String,required:!0}},emits:["filter-change"],setup(e){const o=e,f=U();function s(){c.setQueue(o.data?.tracks??[])}const g=L(()=>({title:o.data?.name??"",url:`https://app.nomercy.tv${f.fullPath}`}));return(m,k)=>(i(),p(W,null,[k[1]||(k[1]=n("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom bg-focus"},null,-1)),n("div",ge,[e.data?.tracks?(i(),u(O,{key:0,data:e.data,class:"hidden sm:flex"},null,8,["data"])):d("",!0),n("div",ye,[n("input",{id:"search",value:e.filter,class:"bg-transparent border-auto-12/5 border-2 rounded-md focus-visible:!border-auto-12/9 focus-visible:text-current placeholder-current p-2",placeholder:"Filter…",type:"text",name:"search",onInput:k[0]||(k[0]=a=>m.$emit("filterChange",a.target?.value))},null,40,xe),n("div",ke,[r(E,{icon:"searchMagnifyingGlass",class:"!w-7"})])]),r(I,{"share-data":g.value,class:"!p-0 text-white hidden sm:flex sm:ml-auto"},null,8,["share-data"]),r(Z,{data:e.data,color:"var(--color-focus)","class-name":"!w-8 !h-8"},null,8,["data"]),r(I,{class:"!p-0 text-white sm:hidden"}),t(J)?(i(),u(le,{key:1,id:"add",onclick:s,class:"",label:"add"},{default:v(()=>[r(E,{icon:"add",class:"!w-7"})]),_:1})):d("",!0)]),n("div",{class:y(["sm:hidden sticky left-full -mt-16 z-1199 flex justify-center items-center gap-2 mr-4 h-auto",{"top-11":!t(w)("capacitor"),"top-10":t(w)("capacitor")}]),style:{"box-shadow":"0 1px 2px 0 rgba(16, 24, 40, 0.05)"}},[e.data?.tracks?(i(),u(O,{key:0,data:e.data},null,8,["data"])):d("",!0)],2)],64))}}),be={key:0,class:"relative my-4 flex w-full flex-1 flex-shrink-0 flex-col items-start justify-start gap-4 flex-grow-1 sm:hidden"},we=["innerHTML"],ve={class:"relative hidden flex-1 flex-shrink-0 flex-col items-start justify-start gap-1 flex-grow-1 sm:flex"},Se={class:"text-left font-semibold uppercase text-white"},$e=["innerHTML"],_e={class:"relative flex items-center justify-start gap-2"},Ce={key:0,class:"flex items-center gap-4 text-sm font-medium"},Ee={key:0,class:"relative aspect-square h-12 w-12 overflow-clip rounded-full min-w-12"},Te={key:1,class:"text-left text-sm font-medium text-white"},Ae={class:"text-left text-sm font-medium text-white"},je={key:2,class:"text-left text-sm font-medium text-white"},Re={class:"text-left text-sm font-medium text-white"},dt=T({__name:"ArtistHeader",props:{data:{type:Object,required:!1}},setup(e){const o=e,{t:f}=de(),s=j(""),g=j(),m=j();function k(a){if(a)return Y(f,a?.tracks?.map(h=>ee(h.duration)).reduce((h,l)=>h+l,0)??0)}return R(o,a=>{a&&(s.value=k(a.data))}),X(()=>{s.value=k(o.data)}),R(g,a=>{if(!a)return;const h=a.getContext("2d",{willReadFrequently:!0,desynchronized:!0}),l=()=>{const b=c._audioElement1?.motion?.canvas;b&&m.value&&(c._audioElement1.isPlaying()?(c._audioElement1?.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(m.value).backgroundColor]}),c._audioElement1.motion.gradient="theme",a.width=b.width,a.height=b.height,h.clearRect(0,0,a.width,a.height),h.drawImage(b,0,0,a.width,a.height)):c._audioElement2.isPlaying()&&(c._audioElement2?.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(m.value).backgroundColor]}),c._audioElement2.motion.gradient="theme",a.width=b.width,a.height=b.height,h.clearRect(0,0,a.width,a.height),h.drawImage(b,0,0,a.width,a.height))),requestAnimationFrame(l)};l()}),R(m,a=>{!a||!c._audioElement1?.motion||!c._audioElement2?.motion||(c._audioElement1?.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(a).backgroundColor]}),c._audioElement1.motion.gradient="theme",c._audioElement2?.motion.registerGradient("theme",{bgColor:"transparent",dir:"h",colorStops:[getComputedStyle(a).backgroundColor]}),c._audioElement2.motion.gradient="theme")}),(a,h)=>{const l=K("RouterLink");return i(),p("div",{id:"artist-header",class:y(["relative z-0 flex flex-col items-end justify-start text-white sm:flex-row sm:gap-9 sm:pt-8 sm:pb-8 sm:px-8",{"pt-safe-offset-12 px-8 gap-4":t(w)("capacitor"),"pt-24 px-6 gap-2 sm:gap-12":!t(w)("capacitor")}])},[n("div",{id:"audio-color",ref_key:"audioColor",ref:m,class:"absolute top-0 left-0 h-full w-full overflow-clip bg-focus"},null,512),h[0]||(h[0]=n("div",{class:"absolute top-0 left-0 h-full w-full overflow-clip bg-black/50"},null,-1)),n("div",{class:y(["frosting relative mx-auto flex aspect-square w-80 max-w-[90%] flex-col items-center justify-center overflow-clip rounded-xl bg-gradient-to-br min-w-64 bg-theme-7 from-theme-5 via-theme-7 to-theme-11 shadow",{"-mt-4":t(w)("capacitor"),"":!t(w)("capacitor")}])},[e.data?.cover?(i(),u(P,{key:0,id:"image",data:e.data,size:250,"class-name":"aspect-square rounded-xl w-full",loading:"eager"},null,8,["data"])):e.data?.id?(i(),u(ce,{key:1,id:e.data.id,type:e.data.type,class:"aspect-square rounded-xl w-full"},null,8,["id","type"])):d("",!0)],2),e.data?.name?(i(),p("div",be,[n("div",{class:"w-full text-2xl font-semibold whitespace-pre-line",innerHTML:t(H)(e.data?.name??"Songs you like","text-sm line-clamp-1")},null,8,we)])):d("",!0),n("div",ve,[n("p",Se,x(e.data?.type?.replace(/s$/u,"")),1),n("div",{class:"w-full text-5xl font-semibold line-clamp-2 leading-[130%] whitespace-pre",innerHTML:t(H)(e.data?.name??"Songs you like","text-2xl line-clamp-1")},null,8,$e),n("div",_e,[t(D)?(i(),p("div",Ce,[e.data?.artists?.length===1&&e.data?.artists?.[0].cover?(i(),p("div",Ee,[r(P,{id:"image",data:e.data?.artists?.[0],size:250,"class-name":"h-full w-full",loading:"eager"},null,8,["data"])])):d("",!0),r(l,{to:e.data?.artists?.[0].link??"#",class:"text-sm empty:hidden"},{default:v(()=>[Q(x(e.data?.artists?.[0]?.name??"Various artists"),1)]),_:1},8,["to"])])):d("",!0),e.data?.tracks&&t(D)?(i(),p("p",Te," • ")):d("",!0),n("p",Ae,x(e.data?.tracks?.length)+" "+x(e.data?.tracks?.length===1?t(f)("song"):t(f)("songs")),1),s.value?(i(),p("p",je," • ")):d("",!0),n("p",Re,x(s.value),1)])])],2)}}}),qe=["onclick"],ze={class:""},C=T({__name:"SortButton",props:{name:{type:String,required:!0},sortingType:{type:String,required:!0},iconSpacer:{type:String,default:""}},setup(e){function o(s){console.log("handleSortChange",s),_.value===s?M(q.value===$.asc?$.desc:$.asc):M($.asc),te(s)}function f(s){const g=s.target;if(s.key==="ArrowUp"){const m=g.parentElement?.parentElement?.previousElementSibling;m&&m.nodeName==="BUTTON"||m.nodeName==="A"?m.focus():document.querySelector("#playList")?.focus()}else s.key==="ArrowDown"?g.parentElement?.parentElement?.nextElementSibling?.focus():s.key==="ArrowLeft"?g.previousElementSibling?.focus():s.key==="ArrowRight"&&g.nextElementSibling?.focus()}return(s,g)=>(i(),p("button",{"no-ring":"",class:"relative cursor-pointer items-center focus-visible:underline focus-visible:underline-offset-2",onclick:()=>o(e.sortingType),onkeyup:f},[n("span",ze,x(s.$t(e.name)),1),t(q)===t($).asc&&t(_)===e.sortingType&&t(_)!==t(S).index?(i(),u(E,{key:0,icon:"chevronUp",class:y(`w-6 h-6 ${e.iconSpacer}`)},null,8,["class"])):t(q)===t($).desc&&t(_)===e.sortingType&&t(_)!==t(S).index?(i(),u(E,{key:1,icon:"chevronDown",class:y(`w-6 h-6 ${e.iconSpacer}`)},null,8,["class"])):d("",!0)],8,qe))}}),Le=T({__name:"SortHeader",setup(e){return(o,f)=>(i(),p("div",{id:"sortHeaderElement",class:y(["sticky -mx-4 px-4 z-30 mt-4 block h-10 content-center items-center justify-start self-stretch bg-transparent text-sm font-medium transition-all duration-200 w-available group/track sm:w-available sm:-top-px",{"top-safe-offset-10":t(w)("capacitor"),"top-safe-offset-16":!t(w)("capacitor")}])},[f[0]||(f[0]=n("span",{id:"sorterChild",class:"absolute inset-0 h-10 sm:rounded-t-2xl overflow-clip w-full transition-all duration-200"},null,-1)),n("span",{class:y([{"album-grid":t(A),"artist-grid":!t(A)},"grid justify-start items-center self-stretch pr-3 sm:px-3 rounded-lg sm:hover:bg-slate-lightA-6 dark:hover:bg-slate-darkA-6 text-auto-12 group/track text-sm font-medium py-2 z-0 group/track gap-2"])},[r(C,{id:"sortIndex","aria-label":o.$t("Sort by index"),"sorting-type":t(S).index,class:"!flex justify-center","icon-spacer":"absolute left-6",name:"#"},null,8,["aria-label","sorting-type"]),r(C,{"aria-label":o.$t("Sort by name"),"sorting-type":t(S).name,class:"flex sm:flex","icon-spacer":"w-6 h-6",name:"Title"},null,8,["aria-label","sorting-type"]),r(C,{"aria-label":o.$t("Sort by album"),"sorting-type":t(S).album,class:y(["!hidden sm:!flex",{"opacity-0":!t(A),"opacity-100":t(A)}]),"icon-spacer":"w-6 h-6",name:"Album"},null,8,["aria-label","sorting-type","class"]),r(C,{name:"Release date","aria-label":o.$t("Sort by date"),"sorting-type":t(S).date,class:"!hidden sm:!flex","icon-spacer":"w-6 h-6"},null,8,["aria-label","sorting-type"]),r(C,{"aria-label":o.$t("Sort by duration"),"sorting-type":t(S).duration,class:"!hidden sm:!flex gap-2 flex-row-reverse pr-[4.5rem]","icon-spacer":"w-6 h-6",name:"Duration"},null,8,["aria-label","sorting-type"])],2)],2))}}),ct=ue(Le,[["__scopeId","data-v-ec18ad3c"]]),Pe=["data-track-id"],He={class:"flex justify-center text-center"},De={key:0,class:"group-focus-visible/track:sm:hidden group-hover/track:sm:hidden"},Me={class:"flex h-12 items-center gap-2 overflow-hidden w-available sm:gap-4"},Be={class:"flex h-full flex-col justify-evenly overflow-clip w-inherit"},Ne={class:"flex h-6 flex-nowrap overflow-clip text-left line-clamp-1 w-inherit tracking-wide leading-6 px-2 py-1 -ml-2"},Oe=["data-size"],Ie={class:"flex whitespace-nowrap"},Ve={class:"hidden sm:flex invisible max-h-12 md:visible"},Fe={class:"hidden sm:flex mr-4 monospace sm:mr-0"},ut=T({__name:"TrackRow",props:{data:{type:Object,required:!0},index:{type:Number,required:!0},displayList:{type:Array,required:!0}},setup(e){const o=e,f=U(),s=L(()=>f.path.startsWith("/music/album")),g=L(()=>f.path.startsWith("/music/artist"));function m(){if(!oe.value.features?.nomercyConnect){c.playTrack(o.data,o.displayList);return}re.value?.invoke("StartPlaybackCommand",s.value?"album":"artist",s.value?o.data?.album_track.at(0)?.id:o.data?.artist_track.at(0)?.id,o.data.id)}return(k,a)=>{const h=K("RouterLink");return i(),p("button",{"data-track-id":e.data?.id,onclick:m,class:y(["grid justify-start children:pointer-events-none items-center self-stretch text-auto-12 pr-3 sm:px-3 rounded-lg sm:hover:bg-slate-lightA-6 dark:sm:hover:bg-slate-darkA-6 group/track text-sm font-medium py-2 z-10",{"album-grid":s.value,"artist-grid":!s.value}]),"data-target":"track",tabindex:"0",onContextmenu:a[1]||(a[1]=l=>t(me)(l,e.data))},[n("span",He,[t(z)?.id!==e.data.id?(i(),p("span",De,x(e.index+1),1)):d("",!0),t(z)?.id===e.data.id?(i(),u(fe,{key:1,color:"rgb(var(--color-focus))",playing:t(B),class:"hidden group-focus-visible/track:sm:!hidden group-hover/track:sm:!hidden"},null,8,["playing"])):d("",!0),t(z)?.id===e.data.id&&t(B)?(i(),u(F,{key:2,icon:"nmPause",class:"hidden h-6 w-6 group-focus-visible/track:sm:block group-hover/track:sm:block"})):(i(),u(F,{key:3,icon:"nmPlay",class:"hidden h-6 w-6 group-focus-visible/track:sm:block group-hover/track:sm:block"}))]),n("span",Me,[s.value?(i(),u(P,{key:0,data:e.data,size:100,style:ae({display:s.value?"none":""}),"class-name":"relative hidden h-12 w-12 overflow-hidden min-w-[3rem] sm:block",loading:"eager"},null,8,["data","style"])):d("",!0),n("span",Be,[n("span",Ne,x(e.data.name),1),n("span",{"data-size":t(se),class:"inline-flex h-6 w-available gap-1 overflow-hidden whitespace-nowrap text-slate-light-3 dark:slate-dark-3 line-clamp-1 text-2xs hover:animate-pause leading-6"},[r(G,null,{default:v(()=>[e.data&&!g.value?(i(),u(V,{key:0,id:e.data.id,data:e.data.artist_track,onclick:l=>l.stopPropagation(),"data-target":"artist",type:"artists"},null,8,["id","data","onclick"])):d("",!0),e.data&&!s.value?(i(),u(V,{key:1,id:e.data.id,data:e.data.album_track,onclick:l=>l.stopPropagation(),"data-target":"album",type:"albums"},null,8,["id","data","onclick"])):d("",!0)]),_:1})],8,Oe)])]),(i(!0),p(W,null,ie(e.data.album_track,l=>(i(),p("span",{key:l.id,class:y(["hidden items-center overflow-clip pr-2 line-clamp-2 h-inherit w-inherit sm:flex",{"opacity-0":!s.value,"opacity-100":s.value}]),onClick:a[0]||(a[0]=b=>b.stopPropagation())},[r(h,{to:l?.link,tabindex:"0","data-target":"album",class:"flex items-center gap-1 whitespace-nowrap font-semibold line-clamp-1 hover:underline focus:underline dark:font-medium pointer-events-auto","no-ring":""},{default:v(()=>[n("span",Ie,[r(G,{text:l.name},null,8,["text"])])]),_:2},1032,["to"])],2))),128)),n("span",Ve,x(e.data?.date?new Date(e.data?.date).toLocaleDateString(t(ne).language??"en-US",{year:"numeric",month:"short",day:"2-digit"}):k.$t("Unknown")),1),n("span",{class:y(["flex items-center justify-end gap-2 text-end",{"mr-16":!t(N)}])},[(i(),u(Z,{key:e.data.id+e.data?.favorite,data:e.data,color:"var(--color-focus)"},null,8,["data"])),n("span",Fe,x(e.data.duration),1),t(N)?(i(),u(he,{key:0,direction:"down"},{button:v(()=>[r(pe,{class:"",title:""},{default:v(()=>[r(E,{"class-name":"relative h-5 w-5",icon:"menuDotsVertical"})]),_:1})]),default:v(()=>[a[2]||(a[2]=Q(" Hellooo ",-1))]),_:1})):d("",!0)],2)],42,Pe)}}});export{ct as S,dt as _,lt as a,ut as b};
