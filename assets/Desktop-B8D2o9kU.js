import{C as R,Ct as Ge,Dt as k,Et as Mt,J as st,K as S,L as Gt,O as V,S as p,T as z,X as Ke,Y as pr,c as W,g as Ne,it as ne,j as Q,k as D,mt as B,n as hr,ot as N,rt as Ot,ut as mr,vt as ke,w as Ae,wt as Kt,x as Se,xt as Bt,z as vr}from"./i18n-Rm1NkeNf.js";import"./ionic-vX7GXDhi.js";import{A as gr,C as br,U as yr,W as _r,_ as wr}from"./vue-core-ChFWZS_w.js";import{C as De}from"./primevue-DkuV93HA.js";import{c as ve}from"./query-BPfDyGC_.js";import{Fa as xr,Ki as J,Mi as Er,Na as Ut,Pa as Sr,Sa as Dr,_i as H,b as he,gn as kr,k as qt,qn as Cr,v as Tr,wa as Or,x as ht,xi as Ir,y as Ee}from"./index-CkV6UDO5.js";import{t as Nr}from"./AppLogo-BXPG5fmA.js";import"./useInfiniteServerClient-B6aRbCAO.js";import{t as It}from"./useServerClient-DUgKKIQ0.js";import"./ScrollContainer-BQALzZ77.js";import{t as $r}from"./FolderBrowser-DOs-67GM.js";W();var Ar={class:"-mt-12 px-4"},Fr={class:"text-xl font-bold"},Pr={"aria-hidden":"true",class:"mt-4"},Mr={class:"overflow-hidden rounded-full bg-surface-11"},Br=Q({__name:"Stepper",props:{steps:{type:Array,required:!0},currentStep:{type:String,required:!0}},setup(r){const e=r,n=Se(()=>e.steps?e.steps?.indexOf(e.currentStep):0),t=Se(()=>e.steps?(n.value+1)/e.steps.length*100:0);return(o,a)=>(S(),z("div",Ar,[p("h4",Fr,k(o.$t(r.currentStep)),1),p("div",Pr,[p("div",Mr,[p("div",{style:Mt(`width: ${t.value}%`),class:"h-1 rounded-full bg-focus transition-all duration-300"},null,4)]),p("div",{style:Mt(`grid-template-columns: repeat(${r.steps.length}, minmax(0, 1fr))`),class:"mt-6 hidden text-sm font-medium text-surface-12/12 sm:grid"},[(S(!0),z(Ne,null,st(r.steps,i=>(S(),z("div",{key:i,class:"text-center font-semibold"},k(o.$t(i)),1))),128))],4)])]))}}),qr=Br;W();var Lr={class:"mx-auto grid h-available place-content-center px-4 sm:px-6 lg:px-8 text-surface-12"},jr={class:"mx-auto w-screen max-w-6xl"},Rr={class:"flex h-full w-full flex-col gap-4 overflow-hidden p-8 pb-0 min-h-[80vh] max-h-[80vh] h-available"},Yr={class:"mx-auto h-44 w-auto p-2"},Xr={class:"overflow-hidden p-4 h-available"},Vr={class:"mt-auto flex h-16 w-full justify-end gap-4 rounded-b-lg p-4"},zr=Q({__name:"Frame",props:{steps:{type:Array,required:!0},nextButtonLocked:{type:Boolean,default:!1},currentStep:{type:String,required:!0},setCurrentStep:{type:Function,required:!0},finish:{type:Function,required:!0}},setup(r){const e=r,n=Se(()=>e.steps.findIndex(i=>i===e.currentStep)===0),t=Se(()=>e.steps.findIndex(i=>i===e.currentStep)===e.steps.length-1);function o(){e.steps.findIndex(i=>i===e.currentStep)<e.steps.length-1&&e.setCurrentStep(e.steps[e.steps.findIndex(i=>i===e.currentStep)+1])}function a(){e.steps.findIndex(i=>i===e.currentStep)>0&&e.setCurrentStep(e.steps[e.steps.findIndex(i=>i===e.currentStep)-1])}return(i,s)=>(S(),z("div",Lr,[p("div",jr,[p("div",{class:Kt(["animate-loading","w-full h-full gap-2.5 flex flex-col ml-auto overflow-hidden rounded-xl bg-surface-1 dark:bg-surface-2 bg-cover border-2 border-transparent text-start transition-all duration-300"]),style:{"--bg-color":"linear-gradient(rgb(var(--surface-2)), rgb(var(--surface-2)))","--border-color":`linear-gradient(var(--angle, 45deg),
						rgb(var(--color-theme-8) / 0.7) 0%,
						rgb(var(--color-theme-8) / 0.3) 33.33%,
						rgb(var(--color-theme-8) / 0.14) 66.67%,
						rgb(var(--color-theme-8) / 0.1) 100%
					)`}},[p("div",Rr,[p("div",Yr,[D(Nr,{class:"pb-8"})]),D(qr,{"current-step":r.currentStep,steps:r.steps},null,8,["current-step","steps"]),p("div",Xr,[pr(i.$slots,"default")])]),p("div",Vr,[n.value?Ae("",!0):(S(),R(Ee,{key:0,id:"yes",class:"ml-auto !w-28",color:"contrast",type:"button",variant:"text",onClick:a},{default:N(()=>[V(k(i.$t("Back")),1)]),_:1})),t.value?(S(),R(Ee,{key:1,id:"cancel",disabled:r.nextButtonLocked,class:"!w-28",color:"theme",type:"button",variant:"default",onClick:r.finish},{default:N(()=>[V(k(i.$t("Finish")),1)]),_:1},8,["disabled","onClick"])):(S(),R(Ee,{key:2,id:"save",disabled:r.nextButtonLocked,class:"!w-28",color:"theme",type:"button",variant:"default",onClick:o},{default:N(()=>[V(k(i.$t("Next")),1)]),_:1},8,["disabled"]))])])])]))}}),Hr=zr;function Lt(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function ae(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Lt(Object(n),!0).forEach(function(t){Wr(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function nt(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?nt=function(e){return typeof e}:nt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(r)}function Wr(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function se(){return se=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r},se.apply(this,arguments)}function Gr(r,e){if(r==null)return{};var n={},t=Object.keys(r),o,a;for(a=0;a<t.length;a++)o=t[a],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}function Kr(r,e){if(r==null)return{};var n=Gr(r,e),t,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(o=0;o<a.length;o++)t=a[o],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}var Ur="1.15.6";function le(r){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(r)}var ue=le(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ue=le(/Edge/i),jt=le(/firefox/i),Xe=le(/safari/i)&&!le(/chrome/i)&&!le(/android/i),Nt=le(/iP(ad|od|hone)/i),Qt=le(/chrome/i)&&le(/android/i),Zt={capture:!1,passive:!1};function E(r,e,n){r.addEventListener(e,n,!ue&&Zt)}function x(r,e,n){r.removeEventListener(e,n,!ue&&Zt)}function ut(r,e){if(e){if(e[0]===">"&&(e=e.substring(1)),r)try{if(r.matches)return r.matches(e);if(r.msMatchesSelector)return r.msMatchesSelector(e);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(e)}catch{return!1}return!1}}function Jt(r){return r.host&&r!==document&&r.host.nodeType?r.host:r.parentNode}function te(r,e,n,t){if(r){n=n||document;do{if(e!=null&&(e[0]===">"?r.parentNode===n&&ut(r,e):ut(r,e))||t&&r===n)return r;if(r===n)break}while(r=Jt(r))}return null}var Rt=/\s+/g;function K(r,e,n){r&&e&&(r.classList?r.classList[n?"add":"remove"](e):r.className=((" "+r.className+" ").replace(Rt," ").replace(" "+e+" "," ")+(n?" "+e:"")).replace(Rt," "))}function v(r,e,n){var t=r&&r.style;if(t){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(r,""):r.currentStyle&&(n=r.currentStyle),e===void 0?n:n[e];!(e in t)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),t[e]=n+(typeof n=="string"?"":"px")}}function $e(r,e){var n="";if(typeof r=="string")n=r;else do{var t=v(r,"transform");t&&t!=="none"&&(n=t+" "+n)}while(!e&&(r=r.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function er(r,e,n){if(r){var t=r.getElementsByTagName(e),o=0,a=t.length;if(n)for(;o<a;o++)n(t[o],o);return t}return[]}function oe(){var r=document.scrollingElement;return r||document.documentElement}function F(r,e,n,t,o){if(!(!r.getBoundingClientRect&&r!==window)){var a,i,s,l,u,c,f;if(r!==window&&r.parentNode&&r!==oe()?(a=r.getBoundingClientRect(),i=a.top,s=a.left,l=a.bottom,u=a.right,c=a.height,f=a.width):(i=0,s=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(e||n)&&r!==window&&(o=o||r.parentNode,!ue))do if(o&&o.getBoundingClientRect&&(v(o,"transform")!=="none"||n&&v(o,"position")!=="static")){var _=o.getBoundingClientRect();i-=_.top+parseInt(v(o,"border-top-width")),s-=_.left+parseInt(v(o,"border-left-width")),l=i+a.height,u=s+a.width;break}while(o=o.parentNode);if(t&&r!==window){var h=$e(o||r),m=h&&h.a,w=h&&h.d;h&&(i/=w,s/=m,f/=m,c/=w,l=i+c,u=s+f)}return{top:i,left:s,bottom:l,right:u,width:f,height:c}}}function Yt(r,e,n){for(var t=me(r,!0),o=F(r)[e];t;){var a=F(t)[n],i=void 0;if(n==="top"||n==="left"?i=o>=a:i=o<=a,!i)return t;if(t===oe())break;t=me(t,!1)}return!1}function Fe(r,e,n,t){for(var o=0,a=0,i=r.children;a<i.length;){if(i[a].style.display!=="none"&&i[a]!==g.ghost&&(t||i[a]!==g.dragged)&&te(i[a],n.draggable,r,!1)){if(o===e)return i[a];o++}a++}return null}function $t(r,e){for(var n=r.lastElementChild;n&&(n===g.ghost||v(n,"display")==="none"||e&&!ut(n,e));)n=n.previousElementSibling;return n||null}function Z(r,e){var n=0;if(!r||!r.parentNode)return-1;for(;r=r.previousElementSibling;)r.nodeName.toUpperCase()!=="TEMPLATE"&&r!==g.clone&&(!e||ut(r,e))&&n++;return n}function Xt(r){var e=0,n=0,t=oe();if(r)do{var o=$e(r),a=o.a,i=o.d;e+=r.scrollLeft*a,n+=r.scrollTop*i}while(r!==t&&(r=r.parentNode));return[e,n]}function Qr(r,e){for(var n in r)if(r.hasOwnProperty(n)){for(var t in e)if(e.hasOwnProperty(t)&&e[t]===r[n][t])return Number(n)}return-1}function me(r,e){if(!r||!r.getBoundingClientRect)return oe();var n=r,t=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=v(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return oe();if(t||e)return n;t=!0}}while(n=n.parentNode);return oe()}function Zr(r,e){if(r&&e)for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r}function vt(r,e){return Math.round(r.top)===Math.round(e.top)&&Math.round(r.left)===Math.round(e.left)&&Math.round(r.height)===Math.round(e.height)&&Math.round(r.width)===Math.round(e.width)}var Ve;function tr(r,e){return function(){if(!Ve){var n=arguments,t=this;n.length===1?r.call(t,n[0]):r.apply(t,n),Ve=setTimeout(function(){Ve=void 0},e)}}}function Jr(){clearTimeout(Ve),Ve=void 0}function rr(r,e,n){r.scrollLeft+=e,r.scrollTop+=n}function nr(r){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(r).cloneNode(!0):n?n(r).clone(!0)[0]:r.cloneNode(!0)}function or(r,e,n){var t={};return Array.from(r.children).forEach(function(o){var a,i,s,l;if(!(!te(o,e.draggable,r,!1)||o.animated||o===n)){var u=F(o);t.left=Math.min((a=t.left)!==null&&a!==void 0?a:1/0,u.left),t.top=Math.min((i=t.top)!==null&&i!==void 0?i:1/0,u.top),t.right=Math.max((s=t.right)!==null&&s!==void 0?s:-1/0,u.right),t.bottom=Math.max((l=t.bottom)!==null&&l!==void 0?l:-1/0,u.bottom)}}),t.width=t.right-t.left,t.height=t.bottom-t.top,t.x=t.left,t.y=t.top,t}var X="Sortable"+new Date().getTime();function en(){var r=[],e;return{captureAnimationState:function(){r=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(t){if(!(v(t,"display")==="none"||t===g.ghost)){r.push({target:t,rect:F(t)});var o=ae({},r[r.length-1].rect);if(t.thisAnimationDuration){var a=$e(t,!0);a&&(o.top-=a.f,o.left-=a.e)}t.fromRect=o}})},addAnimationState:function(t){r.push(t)},removeAnimationState:function(t){r.splice(Qr(r,{target:t}),1)},animateAll:function(t){var o=this;if(!this.options.animation){clearTimeout(e),typeof t=="function"&&t();return}var a=!1,i=0;r.forEach(function(s){var l=0,u=s.target,c=u.fromRect,f=F(u),_=u.prevFromRect,h=u.prevToRect,m=s.rect,w=$e(u,!0);w&&(f.top-=w.f,f.left-=w.e),u.toRect=f,u.thisAnimationDuration&&vt(_,f)&&!vt(c,f)&&(m.top-f.top)/(m.left-f.left)===(c.top-f.top)/(c.left-f.left)&&(l=rn(m,_,h,o.options)),vt(f,c)||(u.prevFromRect=c,u.prevToRect=f,l||(l=o.options.animation),o.animate(u,m,f,l)),l&&(a=!0,i=Math.max(i,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(e),a?e=setTimeout(function(){typeof t=="function"&&t()},i):typeof t=="function"&&t(),r=[]},animate:function(t,o,a,i){if(i){v(t,"transition",""),v(t,"transform","");var s=$e(this.el),l=s&&s.a,u=s&&s.d,c=(o.left-a.left)/(l||1),f=(o.top-a.top)/(u||1);t.animatingX=!!c,t.animatingY=!!f,v(t,"transform","translate3d("+c+"px,"+f+"px,0)"),this.forRepaintDummy=tn(t),v(t,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),v(t,"transform","translate3d(0,0,0)"),typeof t.animated=="number"&&clearTimeout(t.animated),t.animated=setTimeout(function(){v(t,"transition",""),v(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},i)}}}}function tn(r){return r.offsetWidth}function rn(r,e,n,t){return Math.sqrt(Math.pow(e.top-r.top,2)+Math.pow(e.left-r.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*t.animation}var Ce=[],gt={initializeByDefault:!0},Qe={mount:function(e){for(var n in gt)gt.hasOwnProperty(n)&&!(n in e)&&(e[n]=gt[n]);Ce.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Ce.push(e)},pluginEvent:function(e,n,t){var o=this;this.eventCanceled=!1,t.cancel=function(){o.eventCanceled=!0};var a=e+"Global";Ce.forEach(function(i){n[i.pluginName]&&(n[i.pluginName][a]&&n[i.pluginName][a](ae({sortable:n},t)),n.options[i.pluginName]&&n[i.pluginName][e]&&n[i.pluginName][e](ae({sortable:n},t)))})},initializePlugins:function(e,n,t,o){Ce.forEach(function(s){var l=s.pluginName;if(!(!e.options[l]&&!s.initializeByDefault)){var u=new s(e,n,e.options);u.sortable=e,u.options=e.options,e[l]=u,se(t,u.defaults)}});for(var a in e.options)if(e.options.hasOwnProperty(a)){var i=this.modifyOption(e,a,e.options[a]);typeof i<"u"&&(e.options[a]=i)}},getEventProperties:function(e,n){var t={};return Ce.forEach(function(o){typeof o.eventProperties=="function"&&se(t,o.eventProperties.call(n[o.pluginName],e))}),t},modifyOption:function(e,n,t){var o;return Ce.forEach(function(a){e[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[n]=="function"&&(o=a.optionListeners[n].call(e[a.pluginName],t))}),o}};function nn(r){var e=r.sortable,n=r.rootEl,t=r.name,o=r.targetEl,a=r.cloneEl,i=r.toEl,s=r.fromEl,l=r.oldIndex,u=r.newIndex,c=r.oldDraggableIndex,f=r.newDraggableIndex,_=r.originalEvent,h=r.putSortable,m=r.extraEventProperties;if(e=e||n&&n[X],!!e){var w,b=e.options,C="on"+t.charAt(0).toUpperCase()+t.substr(1);window.CustomEvent&&!ue&&!Ue?w=new CustomEvent(t,{bubbles:!0,cancelable:!0}):(w=document.createEvent("Event"),w.initEvent(t,!0,!0)),w.to=i||n,w.from=s||n,w.item=o||n,w.clone=a,w.oldIndex=l,w.newIndex=u,w.oldDraggableIndex=c,w.newDraggableIndex=f,w.originalEvent=_,w.pullMode=h?h.lastPutMode:void 0;var P=ae(ae({},m),Qe.getEventProperties(t,e));for(var $ in P)w[$]=P[$];n&&n.dispatchEvent(w),b[C]&&b[C].call(e,w)}}var on=["evt"],Y=function(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=t.evt,a=Kr(t,on);Qe.pluginEvent.bind(g)(e,n,ae({dragEl:d,parentEl:I,ghostEl:y,rootEl:T,nextEl:xe,lastDownEl:ot,cloneEl:O,cloneHidden:pe,dragStarted:je,putSortable:M,activeSortable:g.active,originalEvent:o,oldIndex:Ie,oldDraggableIndex:ze,newIndex:U,newDraggableIndex:fe,hideGhostForTarget:sr,unhideGhostForTarget:ur,cloneNowHidden:function(){pe=!0},cloneNowShown:function(){pe=!1},dispatchSortableEvent:function(s){j({sortable:n,name:s,originalEvent:o})}},a))};function j(r){nn(ae({putSortable:M,cloneEl:O,targetEl:d,rootEl:T,oldIndex:Ie,oldDraggableIndex:ze,newIndex:U,newDraggableIndex:fe},r))}var d,I,y,T,xe,ot,O,pe,Ie,U,ze,fe,Je,M,Oe=!1,dt=!1,ct=[],_e,ee,bt,yt,Vt,zt,je,Te,He,We=!1,et=!1,at,L,_t=[],Dt=!1,ft=[],mt=typeof document<"u",tt=Nt,Ht=Ue||ue?"cssFloat":"float",an=mt&&!Qt&&!Nt&&"draggable"in document.createElement("div"),ar=function(){if(mt){if(ue)return!1;var r=document.createElement("x");return r.style.cssText="pointer-events:auto",r.style.pointerEvents==="auto"}}(),ir=function(e,n){var t=v(e),o=parseInt(t.width)-parseInt(t.paddingLeft)-parseInt(t.paddingRight)-parseInt(t.borderLeftWidth)-parseInt(t.borderRightWidth),a=Fe(e,0,n),i=Fe(e,1,n),s=a&&v(a),l=i&&v(i),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+F(a).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+F(i).width;if(t.display==="flex")return t.flexDirection==="column"||t.flexDirection==="column-reverse"?"vertical":"horizontal";if(t.display==="grid")return t.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&s.float&&s.float!=="none"){var f=s.float==="left"?"left":"right";return i&&(l.clear==="both"||l.clear===f)?"vertical":"horizontal"}return a&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=o&&t[Ht]==="none"||i&&t[Ht]==="none"&&u+c>o)?"vertical":"horizontal"},ln=function(e,n,t){var o=t?e.left:e.top,a=t?e.right:e.bottom,i=t?e.width:e.height,s=t?n.left:n.top,l=t?n.right:n.bottom,u=t?n.width:n.height;return o===s||a===l||o+i/2===s+u/2},sn=function(e,n){var t;return ct.some(function(o){var a=o[X].options.emptyInsertThreshold;if(!(!a||$t(o))){var i=F(o),s=e>=i.left-a&&e<=i.right+a,l=n>=i.top-a&&n<=i.bottom+a;if(s&&l)return t=o}}),t},lr=function(e){function n(a,i){return function(s,l,u,c){var f=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(a==null&&(i||f))return!0;if(a==null||a===!1)return!1;if(i&&a==="clone")return a;if(typeof a=="function")return n(a(s,l,u,c),i)(s,l,u,c);var _=(i?s:l).options.group.name;return a===!0||typeof a=="string"&&a===_||a.join&&a.indexOf(_)>-1}}var t={},o=e.group;(!o||nt(o)!="object")&&(o={name:o}),t.name=o.name,t.checkPull=n(o.pull,!0),t.checkPut=n(o.put),t.revertClone=o.revertClone,e.group=t},sr=function(){!ar&&y&&v(y,"display","none")},ur=function(){!ar&&y&&v(y,"display","")};mt&&!Qt&&document.addEventListener("click",function(r){if(dt)return r.preventDefault(),r.stopPropagation&&r.stopPropagation(),r.stopImmediatePropagation&&r.stopImmediatePropagation(),dt=!1,!1},!0);var we=function(e){if(d){e=e.touches?e.touches[0]:e;var n=sn(e.clientX,e.clientY);if(n){var t={};for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.target=t.rootEl=n,t.preventDefault=void 0,t.stopPropagation=void 0,n[X]._onDragOver(t)}}},un=function(e){d&&d.parentNode[X]._isOutsideThisEl(e.target)};function g(r,e){if(!(r&&r.nodeType&&r.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(r));this.el=r,this.options=e=se({},e),r[X]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(r.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ir(r,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,s){i.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:g.supportPointer!==!1&&"PointerEvent"in window&&(!Xe||Nt),emptyInsertThreshold:5};Qe.initializePlugins(this,r,n);for(var t in n)!(t in e)&&(e[t]=n[t]);lr(e);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=e.forceFallback?!1:an,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?E(r,"pointerdown",this._onTapStart):(E(r,"mousedown",this._onTapStart),E(r,"touchstart",this._onTapStart)),this.nativeDraggable&&(E(r,"dragover",this),E(r,"dragenter",this)),ct.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),se(this,en())}g.prototype={constructor:g,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Te=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,d):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,t=this.el,o=this.options,a=o.preventOnFilter,i=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(s||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=o.filter;if(gn(t),!d&&!(/mousedown|pointerdown/.test(i)&&e.button!==0||o.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Xe&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=te(l,o.draggable,t,!1),!(l&&l.animated)&&ot!==l)){if(Ie=Z(l),ze=Z(l,o.draggable),typeof c=="function"){if(c.call(this,e,l,this)){j({sortable:n,rootEl:u,name:"filter",targetEl:l,toEl:t,fromEl:t}),Y("filter",n,{evt:e}),a&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(f){if(f=te(u,f.trim(),t,!1),f)return j({sortable:n,rootEl:f,name:"filter",targetEl:l,fromEl:t,toEl:t}),Y("filter",n,{evt:e}),!0}),c)){a&&e.preventDefault();return}o.handle&&!te(u,o.handle,t,!1)||this._prepareDragStart(e,s,l)}}},_prepareDragStart:function(e,n,t){var o=this,a=o.el,i=o.options,s=a.ownerDocument,l;if(t&&!d&&t.parentNode===a){var u=F(t);if(T=a,d=t,I=d.parentNode,xe=d.nextSibling,ot=t,Je=i.group,g.dragged=d,_e={target:d,clientX:(n||e).clientX,clientY:(n||e).clientY},Vt=_e.clientX-u.left,zt=_e.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,d.style["will-change"]="all",l=function(){if(Y("delayEnded",o,{evt:e}),g.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!jt&&o.nativeDraggable&&(d.draggable=!0),o._triggerDragStart(e,n),j({sortable:o,name:"choose",originalEvent:e}),K(d,i.chosenClass,!0)},i.ignore.split(",").forEach(function(c){er(d,c.trim(),wt)}),E(s,"dragover",we),E(s,"mousemove",we),E(s,"touchmove",we),i.supportPointer?(E(s,"pointerup",o._onDrop),!this.nativeDraggable&&E(s,"pointercancel",o._onDrop)):(E(s,"mouseup",o._onDrop),E(s,"touchend",o._onDrop),E(s,"touchcancel",o._onDrop)),jt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,d.draggable=!0),Y("delayStart",this,{evt:e}),i.delay&&(!i.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Ue||ue))){if(g.eventCanceled){this._onDrop();return}i.supportPointer?(E(s,"pointerup",o._disableDelayedDrag),E(s,"pointercancel",o._disableDelayedDrag)):(E(s,"mouseup",o._disableDelayedDrag),E(s,"touchend",o._disableDelayedDrag),E(s,"touchcancel",o._disableDelayedDrag)),E(s,"mousemove",o._delayedDragTouchMoveHandler),E(s,"touchmove",o._delayedDragTouchMoveHandler),i.supportPointer&&E(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(l,i.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){d&&wt(d),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;x(e,"mouseup",this._disableDelayedDrag),x(e,"touchend",this._disableDelayedDrag),x(e,"touchcancel",this._disableDelayedDrag),x(e,"pointerup",this._disableDelayedDrag),x(e,"pointercancel",this._disableDelayedDrag),x(e,"mousemove",this._delayedDragTouchMoveHandler),x(e,"touchmove",this._delayedDragTouchMoveHandler),x(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?E(document,"pointermove",this._onTouchMove):n?E(document,"touchmove",this._onTouchMove):E(document,"mousemove",this._onTouchMove):(E(d,"dragend",this),E(T,"dragstart",this._onDragStart));try{document.selection?it(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(Oe=!1,T&&d){Y("dragStarted",this,{evt:n}),this.nativeDraggable&&E(document,"dragover",un);var t=this.options;!e&&K(d,t.dragClass,!1),K(d,t.ghostClass,!0),g.active=this,e&&this._appendGhost(),j({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(ee){this._lastX=ee.clientX,this._lastY=ee.clientY,sr();for(var e=document.elementFromPoint(ee.clientX,ee.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ee.clientX,ee.clientY),e!==n);)n=e;if(d.parentNode[X]._isOutsideThisEl(e),n)do{if(n[X]){var t=void 0;if(t=n[X]._onDragOver({clientX:ee.clientX,clientY:ee.clientY,target:e,rootEl:n}),t&&!this.options.dragoverBubble)break}e=n}while(n=Jt(n));ur()}},_onTouchMove:function(e){if(_e){var n=this.options,t=n.fallbackTolerance,o=n.fallbackOffset,a=e.touches?e.touches[0]:e,i=y&&$e(y,!0),s=y&&i&&i.a,l=y&&i&&i.d,u=tt&&L&&Xt(L),c=(a.clientX-_e.clientX+o.x)/(s||1)+(u?u[0]-_t[0]:0)/(s||1),f=(a.clientY-_e.clientY+o.y)/(l||1)+(u?u[1]-_t[1]:0)/(l||1);if(!g.active&&!Oe){if(t&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<t)return;this._onDragStart(e,!0)}if(y){i?(i.e+=c-(bt||0),i.f+=f-(yt||0)):i={a:1,b:0,c:0,d:1,e:c,f};var _="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");v(y,"webkitTransform",_),v(y,"mozTransform",_),v(y,"msTransform",_),v(y,"transform",_),bt=c,yt=f,ee=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!y){var e=this.options.fallbackOnBody?document.body:T,n=F(d,!0,tt,!0,e),t=this.options;if(tt){for(L=e;v(L,"position")==="static"&&v(L,"transform")==="none"&&L!==document;)L=L.parentNode;L!==document.body&&L!==document.documentElement?(L===document&&(L=oe()),n.top+=L.scrollTop,n.left+=L.scrollLeft):L=oe(),_t=Xt(L)}y=d.cloneNode(!0),K(y,t.ghostClass,!1),K(y,t.fallbackClass,!0),K(y,t.dragClass,!0),v(y,"transition",""),v(y,"transform",""),v(y,"box-sizing","border-box"),v(y,"margin",0),v(y,"top",n.top),v(y,"left",n.left),v(y,"width",n.width),v(y,"height",n.height),v(y,"opacity","0.8"),v(y,"position",tt?"absolute":"fixed"),v(y,"zIndex","100000"),v(y,"pointerEvents","none"),g.ghost=y,e.appendChild(y),v(y,"transform-origin",Vt/parseInt(y.style.width)*100+"% "+zt/parseInt(y.style.height)*100+"%")}},_onDragStart:function(e,n){var t=this,o=e.dataTransfer,a=t.options;if(Y("dragStart",this,{evt:e}),g.eventCanceled){this._onDrop();return}Y("setupClone",this),g.eventCanceled||(O=nr(d),O.removeAttribute("id"),O.draggable=!1,O.style["will-change"]="",this._hideClone(),K(O,this.options.chosenClass,!1),g.clone=O),t.cloneId=it(function(){Y("clone",t),!g.eventCanceled&&(t.options.removeCloneOnHide||T.insertBefore(O,d),t._hideClone(),j({sortable:t,name:"clone"}))}),!n&&K(d,a.dragClass,!0),n?(dt=!0,t._loopId=setInterval(t._emulateDragOver,50)):(x(document,"mouseup",t._onDrop),x(document,"touchend",t._onDrop),x(document,"touchcancel",t._onDrop),o&&(o.effectAllowed="move",a.setData&&a.setData.call(t,o,d)),E(document,"drop",t),v(d,"transform","translateZ(0)")),Oe=!0,t._dragStartId=it(t._dragStarted.bind(t,n,e)),E(document,"selectstart",t),je=!0,window.getSelection().removeAllRanges(),Xe&&v(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,t=e.target,o,a,i,s=this.options,l=s.group,u=g.active,c=Je===l,f=s.sort,_=M||u,h,m=this,w=!1;if(Dt)return;function b(Le,cr){Y(Le,m,ae({evt:e,isOwner:c,axis:h?"vertical":"horizontal",revert:i,dragRect:o,targetRect:a,canSort:f,fromSortable:_,target:t,completed:P,onMove:function(Pt,fr){return rt(T,n,d,o,Pt,F(Pt),e,fr)},changed:$},cr))}function C(){b("dragOverAnimationCapture"),m.captureAnimationState(),m!==_&&_.captureAnimationState()}function P(Le){return b("dragOverCompleted",{insertion:Le}),Le&&(c?u._hideClone():u._showClone(m),m!==_&&(K(d,M?M.options.ghostClass:u.options.ghostClass,!1),K(d,s.ghostClass,!0)),M!==m&&m!==g.active?M=m:m===g.active&&M&&(M=null),_===m&&(m._ignoreWhileAnimating=t),m.animateAll(function(){b("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==_&&(_.animateAll(),_._ignoreWhileAnimating=null)),(t===d&&!d.animated||t===n&&!t.animated)&&(Te=null),!s.dragoverBubble&&!e.rootEl&&t!==document&&(d.parentNode[X]._isOutsideThisEl(e.target),!Le&&we(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),w=!0}function $(){U=Z(d),fe=Z(d,s.draggable),j({sortable:m,name:"change",toEl:n,newIndex:U,newDraggableIndex:fe,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),t=te(t,s.draggable,n,!0),b("dragOver"),g.eventCanceled)return w;if(d.contains(e.target)||t.animated&&t.animatingX&&t.animatingY||m._ignoreWhileAnimating===t)return P(!1);if(dt=!1,u&&!s.disabled&&(c?f||(i=I!==T):M===this||(this.lastPutMode=Je.checkPull(this,u,d,e))&&l.checkPut(this,u,d,e))){if(h=this._getDirection(e,t)==="vertical",o=F(d),b("dragOverValid"),g.eventCanceled)return w;if(i)return I=T,C(),this._hideClone(),b("revert"),g.eventCanceled||(xe?T.insertBefore(d,xe):T.appendChild(d)),P(!0);var q=$t(n,s.draggable);if(!q||pn(e,h,this)&&!q.animated){if(q===d)return P(!1);if(q&&n===e.target&&(t=q),t&&(a=F(t)),rt(T,n,d,o,t,a,e,!!t)!==!1)return C(),q&&q.nextSibling?n.insertBefore(d,q.nextSibling):n.appendChild(d),I=n,$(),P(!0)}else if(q&&fn(e,h,this)){var ge=Fe(n,0,s,!0);if(ge===d)return P(!1);if(t=ge,a=F(t),rt(T,n,d,o,t,a,e,!1)!==!1)return C(),n.insertBefore(d,ge),I=n,$(),P(!0)}else if(t.parentNode===n){a=F(t);var re=0,be,Pe=d.parentNode!==n,G=!ln(d.animated&&d.toRect||o,t.animated&&t.toRect||a,h),Me=h?"top":"left",de=Yt(t,"top","top")||Yt(d,"top","top"),Be=de?de.scrollTop:void 0;Te!==t&&(be=a[Me],We=!1,et=!G&&s.invertSwap||Pe),re=hn(e,t,a,h,G?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,et,Te===t);var ie;if(re!==0){var ye=Z(d);do ye-=re,ie=I.children[ye];while(ie&&(v(ie,"display")==="none"||ie===y))}if(re===0||ie===t)return P(!1);Te=t,He=re;var qe=t.nextElementSibling,ce=!1;ce=re===1;var Ze=rt(T,n,d,o,t,a,e,ce);if(Ze!==!1)return(Ze===1||Ze===-1)&&(ce=Ze===1),Dt=!0,setTimeout(cn,30),C(),ce&&!qe?n.appendChild(d):t.parentNode.insertBefore(d,ce?qe:t),de&&rr(de,0,Be-de.scrollTop),I=d.parentNode,be!==void 0&&!et&&(at=Math.abs(be-F(t)[Me])),$(),P(!0)}if(n.contains(d))return P(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){x(document,"mousemove",this._onTouchMove),x(document,"touchmove",this._onTouchMove),x(document,"pointermove",this._onTouchMove),x(document,"dragover",we),x(document,"mousemove",we),x(document,"touchmove",we)},_offUpEvents:function(){var e=this.el.ownerDocument;x(e,"mouseup",this._onDrop),x(e,"touchend",this._onDrop),x(e,"pointerup",this._onDrop),x(e,"pointercancel",this._onDrop),x(e,"touchcancel",this._onDrop),x(document,"selectstart",this)},_onDrop:function(e){var n=this.el,t=this.options;if(U=Z(d),fe=Z(d,t.draggable),Y("drop",this,{evt:e}),I=d&&d.parentNode,U=Z(d),fe=Z(d,t.draggable),g.eventCanceled){this._nulling();return}Oe=!1,et=!1,We=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),kt(this.cloneId),kt(this._dragStartId),this.nativeDraggable&&(x(document,"drop",this),x(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Xe&&v(document.body,"user-select",""),v(d,"transform",""),e&&(je&&(e.cancelable&&e.preventDefault(),!t.dropBubble&&e.stopPropagation()),y&&y.parentNode&&y.parentNode.removeChild(y),(T===I||M&&M.lastPutMode!=="clone")&&O&&O.parentNode&&O.parentNode.removeChild(O),d&&(this.nativeDraggable&&x(d,"dragend",this),wt(d),d.style["will-change"]="",je&&!Oe&&K(d,M?M.options.ghostClass:this.options.ghostClass,!1),K(d,this.options.chosenClass,!1),j({sortable:this,name:"unchoose",toEl:I,newIndex:null,newDraggableIndex:null,originalEvent:e}),T!==I?(U>=0&&(j({rootEl:I,name:"add",toEl:I,fromEl:T,originalEvent:e}),j({sortable:this,name:"remove",toEl:I,originalEvent:e}),j({rootEl:I,name:"sort",toEl:I,fromEl:T,originalEvent:e}),j({sortable:this,name:"sort",toEl:I,originalEvent:e})),M&&M.save()):U!==Ie&&U>=0&&(j({sortable:this,name:"update",toEl:I,originalEvent:e}),j({sortable:this,name:"sort",toEl:I,originalEvent:e})),g.active&&((U==null||U===-1)&&(U=Ie,fe=ze),j({sortable:this,name:"end",toEl:I,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Y("nulling",this),T=d=I=y=xe=O=ot=pe=_e=ee=je=U=fe=Ie=ze=Te=He=M=Je=g.dragged=g.ghost=g.clone=g.active=null,ft.forEach(function(e){e.checked=!0}),ft.length=bt=yt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":d&&(this._onDragOver(e),dn(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,t=this.el.children,o=0,a=t.length,i=this.options;o<a;o++)n=t[o],te(n,i.draggable,this.el,!1)&&e.push(n.getAttribute(i.dataIdAttr)||vn(n));return e},sort:function(e,n){var t={},o=this.el;this.toArray().forEach(function(a,i){var s=o.children[i];te(s,this.options.draggable,o,!1)&&(t[a]=s)},this),n&&this.captureAnimationState(),e.forEach(function(a){t[a]&&(o.removeChild(t[a]),o.appendChild(t[a]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return te(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var t=this.options;if(n===void 0)return t[e];var o=Qe.modifyOption(this,e,n);typeof o<"u"?t[e]=o:t[e]=n,e==="group"&&lr(t)},destroy:function(){Y("destroy",this);var e=this.el;e[X]=null,x(e,"mousedown",this._onTapStart),x(e,"touchstart",this._onTapStart),x(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(x(e,"dragover",this),x(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ct.splice(ct.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!pe){if(Y("hideClone",this),g.eventCanceled)return;v(O,"display","none"),this.options.removeCloneOnHide&&O.parentNode&&O.parentNode.removeChild(O),pe=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(pe){if(Y("showClone",this),g.eventCanceled)return;d.parentNode==T&&!this.options.group.revertClone?T.insertBefore(O,d):xe?T.insertBefore(O,xe):T.appendChild(O),this.options.group.revertClone&&this.animate(d,O),v(O,"display",""),pe=!1}}};function dn(r){r.dataTransfer&&(r.dataTransfer.dropEffect="move"),r.cancelable&&r.preventDefault()}function rt(r,e,n,t,o,a,i,s){var l,u=r[X],c=u.options.onMove,f;return window.CustomEvent&&!ue&&!Ue?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=r,l.dragged=n,l.draggedRect=t,l.related=o||e,l.relatedRect=a||F(e),l.willInsertAfter=s,l.originalEvent=i,r.dispatchEvent(l),c&&(f=c.call(u,l,i)),f}function wt(r){r.draggable=!1}function cn(){Dt=!1}function fn(r,e,n){var t=F(Fe(n.el,0,n.options,!0)),o=or(n.el,n.options,y),a=10;return e?r.clientX<o.left-a||r.clientY<t.top&&r.clientX<t.right:r.clientY<o.top-a||r.clientY<t.bottom&&r.clientX<t.left}function pn(r,e,n){var t=F($t(n.el,n.options.draggable)),o=or(n.el,n.options,y),a=10;return e?r.clientX>o.right+a||r.clientY>t.bottom&&r.clientX>t.left:r.clientY>o.bottom+a||r.clientX>t.right&&r.clientY>t.top}function hn(r,e,n,t,o,a,i,s){var l=t?r.clientY:r.clientX,u=t?n.height:n.width,c=t?n.top:n.left,f=t?n.bottom:n.right,_=!1;if(!i){if(s&&at<u*o){if(!We&&(He===1?l>c+u*a/2:l<f-u*a/2)&&(We=!0),We)_=!0;else if(He===1?l<c+at:l>f-at)return-He}else if(l>c+u*(1-o)/2&&l<f-u*(1-o)/2)return mn(e)}return _=_||i,_&&(l<c+u*a/2||l>f-u*a/2)?l>c+u/2?1:-1:0}function mn(r){return Z(d)<Z(r)?1:-1}function vn(r){for(var e=r.tagName+r.className+r.src+r.href+r.textContent,n=e.length,t=0;n--;)t+=e.charCodeAt(n);return t.toString(36)}function gn(r){ft.length=0;for(var e=r.getElementsByTagName("input"),n=e.length;n--;){var t=e[n];t.checked&&ft.push(t)}}function it(r){return setTimeout(r,0)}function kt(r){return clearTimeout(r)}mt&&E(document,"touchmove",function(r){(g.active||Oe)&&r.cancelable&&r.preventDefault()});g.utils={on:E,off:x,css:v,find:er,is:function(e,n){return!!te(e,n,e,!1)},extend:Zr,throttle:tr,closest:te,toggleClass:K,clone:nr,index:Z,nextTick:it,cancelNextTick:kt,detectDirection:ir,getChild:Fe,expando:X};g.get=function(r){return r[X]};g.mount=function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(g.utils=ae(ae({},g.utils),t.utils)),Qe.mount(t)})};g.create=function(r,e){return new g(r,e)};g.version=Ur;var A=[],Re,Ct,Tt=!1,xt,Et,pt,Ye;function bn(){function r(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return r.prototype={dragStarted:function(n){var t=n.originalEvent;this.sortable.nativeDraggable?E(document,"dragover",this._handleAutoScroll):this.options.supportPointer?E(document,"pointermove",this._handleFallbackAutoScroll):t.touches?E(document,"touchmove",this._handleFallbackAutoScroll):E(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var t=n.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?x(document,"dragover",this._handleAutoScroll):(x(document,"pointermove",this._handleFallbackAutoScroll),x(document,"touchmove",this._handleFallbackAutoScroll),x(document,"mousemove",this._handleFallbackAutoScroll)),Wt(),lt(),Jr()},nulling:function(){pt=Ct=Re=Tt=Ye=xt=Et=null,A.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,t){var o=this,a=(n.touches?n.touches[0]:n).clientX,i=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(a,i);if(pt=n,t||this.options.forceAutoScrollFallback||Ue||ue||Xe){St(n,this.options,s,t);var l=me(s,!0);Tt&&(!Ye||a!==xt||i!==Et)&&(Ye&&Wt(),Ye=setInterval(function(){var u=me(document.elementFromPoint(a,i),!0);u!==l&&(l=u,lt()),St(n,o.options,u,t)},10),xt=a,Et=i)}else{if(!this.options.bubbleScroll||me(s,!0)===oe()){lt();return}St(n,this.options,me(s,!1),!1)}}},se(r,{pluginName:"scroll",initializeByDefault:!0})}function lt(){A.forEach(function(r){clearInterval(r.pid)}),A=[]}function Wt(){clearInterval(Ye)}var St=tr(function(r,e,n,t){if(e.scroll){var o=(r.touches?r.touches[0]:r).clientX,a=(r.touches?r.touches[0]:r).clientY,i=e.scrollSensitivity,s=e.scrollSpeed,l=oe(),u=!1,c;Ct!==n&&(Ct=n,lt(),Re=e.scroll,c=e.scrollFn,Re===!0&&(Re=me(n,!0)));var f=0,_=Re;do{var h=_,m=F(h),w=m.top,b=m.bottom,C=m.left,P=m.right,$=m.width,q=m.height,ge=void 0,re=void 0,be=h.scrollWidth,Pe=h.scrollHeight,G=v(h),Me=h.scrollLeft,de=h.scrollTop;h===l?(ge=$<be&&(G.overflowX==="auto"||G.overflowX==="scroll"||G.overflowX==="visible"),re=q<Pe&&(G.overflowY==="auto"||G.overflowY==="scroll"||G.overflowY==="visible")):(ge=$<be&&(G.overflowX==="auto"||G.overflowX==="scroll"),re=q<Pe&&(G.overflowY==="auto"||G.overflowY==="scroll"));var Be=ge&&(Math.abs(P-o)<=i&&Me+$<be)-(Math.abs(C-o)<=i&&!!Me),ie=re&&(Math.abs(b-a)<=i&&de+q<Pe)-(Math.abs(w-a)<=i&&!!de);if(!A[f])for(var ye=0;ye<=f;ye++)A[ye]||(A[ye]={});(A[f].vx!=Be||A[f].vy!=ie||A[f].el!==h)&&(A[f].el=h,A[f].vx=Be,A[f].vy=ie,clearInterval(A[f].pid),(Be!=0||ie!=0)&&(u=!0,A[f].pid=setInterval((function(){t&&this.layer===0&&g.active._onTouchMove(pt);var qe=A[this.layer].vy?A[this.layer].vy*s:0,ce=A[this.layer].vx?A[this.layer].vx*s:0;typeof c=="function"&&c.call(g.dragged.parentNode[X],ce,qe,r,pt,A[this.layer].el)!=="continue"||rr(A[this.layer].el,ce,qe)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&_!==l&&(_=me(_,!1)));Tt=u}},30),dr=function(e){var n=e.originalEvent,t=e.putSortable,o=e.dragEl,a=e.activeSortable,i=e.dispatchSortableEvent,s=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var u=t||a;s();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(c.clientX,c.clientY);l(),u&&!u.el.contains(f)&&(i("spill"),this.onSpill({dragEl:o,putSortable:t}))}};function At(){}At.prototype={startIndex:null,dragStart:function(e){this.startIndex=e.oldDraggableIndex},onSpill:function(e){var n=e.dragEl,t=e.putSortable;this.sortable.captureAnimationState(),t&&t.captureAnimationState();var o=Fe(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(n,o):this.sortable.el.appendChild(n),this.sortable.animateAll(),t&&t.animateAll()},drop:dr};se(At,{pluginName:"revertOnSpill"});function Ft(){}Ft.prototype={onSpill:function(e){var n=e.dragEl,t=e.putSortable||this.sortable;t.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),t.animateAll()},drop:dr};se(Ft,{pluginName:"removeOnSpill"});g.mount(new bn);g.mount(Ft,At);var yn=g;W();function _n(r,e,n={}){let t;const{document:o=Dr,...a}=n,i={onUpdate:c=>{En(e,c.oldIndex,c.newIndex,c)}},s=()=>{const c=typeof r=="string"?o?.querySelector(r):Or(r);!c||t!==void 0||(t=new yn(c,{...i,...a}))},l=()=>{t?.destroy(),t=void 0},u=(c,f)=>{if(f!==void 0)t?.option(c,f);else return t?.option(c)};return Sr(s),xr(l),{stop:l,start:s,option:u}}function wn(r,e,n){const t=r.children[n];r.insertBefore(e,t)}function xn(r){r.parentNode&&r.parentNode.removeChild(r)}function En(r,e,n,t=null){t!=null&&(xn(t.item),wn(t.from,t.item,e));const o=mr(r),a=o?[...Bt(r)]:Bt(r);if(n>=0&&n<a.length){const i=a.splice(e,1)[0];vr(()=>{a.splice(n,0,i),o&&(r.value=a)})}}W();var Sn={class:"flex flex-col justify-start items-center flex-grow gap-4"},Dn={class:"flex justify-start items-start flex-grow-0 flex-shrink-0 relative gap-2 rounded-lg"},kn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-0.5"},Cn={class:"flex justify-start items-start self-stretch flex-grow-0 flex-shrink-0 relative gap-1.5"},Tn={class:"flex-grow w-full text-base font-medium text-center"},On=Q({__name:"TypeButton",props:{type:{type:Object,required:!0},selected:{type:Boolean,default:!1},className:{type:String,required:!1,default:""}},setup(r){const e=r,n=Se(()=>{let t="nomercy";switch(e.type?.value){case"music":t="noteDouble";break;case"tv":t="tv";break;case"image":t="picture";break;case"movie":t="film";break;default:t="nomercy"}return t});return(t,o)=>(S(),z("div",{class:Kt([{"bg-white/11 dark:bg-black/8 outline outline-2 outline-focus hover:bg-focus/[0.15]":r.selected,"hover:bg-focus/[0.15]":!r.selected},"flex justify-start items-start flex-grow gap-1 px-2 py-4 rounded-xl"])},[p("div",Sn,[p("div",Dn,[D(he,{"class-name":r.className,icon:n.value},null,8,["class-name","icon"])]),p("div",kn,[p("div",Cn,[p("p",Tn,k(r.type.name),1)])])])],2))}}),In=On;W();var Nn={class:"my-6 text-sm text-surface-10"},$n=Q({__name:"DeleteFolderModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},libraryId:{type:String,required:!0},name:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},setup(r){const e=r,n=ve(),t=De();function o(){J().delete(`dashboard/libraries/${e.libraryId}/folders/${e.id}`).then(({data:a})=>{n.invalidateQueries({queryKey:["dashboard","libraries"]}),t.add({severity:a.status==="ok"?"success":"error",summary:H(a.status==="ok"?"Success":"Error"),detail:H(a.message,...a.args??[]),life:5e3}),e.close()}).catch(a=>{t.add({severity:"error",summary:H("Error"),detail:a.message,life:5e3}),e.close()})}return(a,i)=>{const s=Ke("Button");return S(),R(ht,{close:r.close,open:r.open,params:{folder:r.name},"max-width":"max-w-xl",title:"Delete folder {{folder}}"},{actions:N(()=>[D(s,{id:"yes",onclick:o,color:"red","end-icon":"trash",type:"button",variant:"contained"},{default:N(()=>[V(k(a.$t("Delete")),1)]),_:1}),D(s,{id:"no",onclick:r.close,color:"auto",type:"button",variant:"text"},{default:N(()=>[V(k(a.$t("Cancel")),1)]),_:1},8,["onclick"])]),default:N(()=>[p("div",Nn,k(a.$t("Are you sure you want to delete this folder?")),1)]),_:1},8,["close","open","params"])}}}),An=$n;W();var Fn={class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 gap-2 text-surface-1"},Pn={class:"flex flex-col justify-center items-center flex-grow gap-2"},Mn={class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 h-10 relative overflow-hidden gap-2 pl-3 pr-2.5 py-2.5 rounded-[10px] bg-surface-10/5 hover:bg-surface-12/5 active:bg-surface-12/5 text-surface-12/12 hover:text-surface-12"},Bn={class:"flex-grow w-available text-base font-semibold text-left"},qn=Q({__name:"FolderItem",props:Gt({folder:{type:Object,required:!0}},{modelValue:{type:Object,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const e=r,n=De(),t=ve(),o=Ot(r,"modelValue"),{data:a}=It({path:"dashboard/encoderProfiles",queryKey:["dashboard","encoderProfiles"]}),i=Se(()=>{switch(o.value.type){case"anime":return a.value?.filter(h=>h.container==="m3u8").map(h=>ke(h));case"movie":return a.value?.filter(h=>h.container==="m3u8").map(h=>ke(h));case"tv":return a.value?.filter(h=>h.container==="m3u8").map(h=>ke(h));case"music":return a.value?.filter(h=>h.container==="mp3"||h.container==="flac").map(h=>ke(h));default:return[]}}),s=B(i.value?.filter(h=>e.folder.folder?.encoder_profiles?.some(m=>m.id===h.id))??[]);ne([i,e],([h,m])=>{!h||!m||(s.value=h.filter(w=>m.folder.folder?.encoder_profiles.some(b=>b.id===w.id)))},{deep:!0});function l(h){const m=h.map(w=>ke(w));s.value=m,u(ke(e.folder),m)}function u(h,m){if(!o.value)return;const w=o.value.folder_library.map(b=>b.folder_id===h.folder_id?{...b,folder:{...b.folder,encoder_profiles:m.map(C=>C)}}:b);J().patch(`dashboard/libraries/${o.value.id}`,{folder_library:w}).then(()=>{t.invalidateQueries({queryKey:["dashboard","libraries"]})}).catch(b=>{n.add({severity:"error",summary:H("Error"),detail:b.message,life:5e3})})}ne(o,()=>{i.value&&(s.value=i.value.filter(h=>e.folder.folder?.encoder_profiles.some(m=>m.id===h.id)))});const c=B(!1);function f(){c.value=!0}function _(){c.value=!1}return(h,m)=>{const w=Ke("MultiSelect");return S(),z(Ne,null,[p("div",Fn,[D(w,{id:"encoderProfiles","model-value":s.value,options:i.value,class:"w-[160px]","option-label":"name",placeholder:"Select","onUpdate:modelValue":l},null,8,["model-value","options"]),p("div",Pn,[p("div",Mn,[p("p",Bn,k(r.folder.folder.path),1),p("button",{class:"flex-grow-0 flex-shrink-0 cursor-pointer hover:text-surface-1",onClick:f},[D(he,{"class-name":"w-6 h-6",icon:"trash"})])])])]),D(An,{id:r.folder.folder.id,close:_,"library-id":o.value?.id,name:r.folder.folder.path,open:c.value},null,8,["id","library-id","name","open"])],64)}}}),Ln=qn;W();yr();var jn={class:"mx-auto flex w-full flex-col h-available"},Rn=Q({__name:"NewFolderModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},folder:{type:String,required:!0},setFolder:{type:Function,required:!0},library:{type:Object,required:!1}},setup(r){const e=r,n=_r(),t=ve(),o=De();function a(){J().post(`dashboard/libraries/${n.params.id??e.library?.id}/folders`,{path:e.folder}).then(({data:i})=>{t.invalidateQueries({queryKey:["dashboard","libraries"]}),o.add({severity:i.status==="ok"?"success":"error",summary:H(i.status==="ok"?"Success":"Error"),detail:H(i.message,...i.args),life:5e3}),e.setFolder("/"),e.close()}).catch(i=>{console.error("Error adding folder:",i),e.close()})}return(i,s)=>{const l=Ke("Button");return S(),R(ht,{close:r.close,open:r.open,"max-width":"max-w-5xl overflow-clip max-h-[60vh] h-[60vh]",title:"Add folder"},{actions:N(()=>[D(l,{id:"yes",onclick:a,color:"theme",type:"button",variant:"contained"},{default:N(()=>[V(k(i.$t("Add")),1)]),_:1}),D(l,{id:"no",onclick:r.close,color:"auto",type:"button",variant:"text"},{default:N(()=>[V(k(i.$t("Cancel")),1)]),_:1},8,["onclick"])]),default:N(()=>[p("div",jn,[D($r,{selected:r.folder,"set-selected":r.setFolder},null,8,["selected","set-selected"])])]),_:1},8,["close","open"])}}}),Yn=Rn;W();var Xn={class:"flex flex-col justify-start items-start flex-grow-0 flex-shrink-0 w-full relative gap-8 p-1 px-6"},Vn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-3"},zn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-6"},Hn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-4"},Wn={class:"grid grid-cols-4 justify-start items-start self-stretch gap-2"},Gn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-2"},Kn={class:"flex justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-2"},Un={class:"flex flex-col justify-start items-start flex-grow gap-1.5"},Qn={class:"flex justify-start items-center flex-grow-0 flex-shrink-0 relative gap-px"},Zn={class:"flex-grow-0 flex-shrink-0 text-sm font-medium text-left"},Jn={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-3"},eo={class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 relative gap-2 rounded"},to={class:"flex-grow w-[501px] text-lg font-medium text-left"},ro={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-6"},no={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-2"},oo={class:"flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-2"},ao={class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 relative gap-1"},io={class:"flex-grow-0 flex-shrink-0 text-sm text-left"},lo={class:"flex w-full justify-end items-start self-stretch flex-grow-0 flex-shrink-0 gap-2 rounded-lg bg-white/[0.04] p-2"},so=Q({__name:"EditLibraryModal",props:Gt({open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},{modelValue:{type:Object,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const e=r,n=Ot(r,"modelValue"),t=ve(),o=De(),a=B(n.value?.title),i=Ut(a,500),s=B(n.value?.type??"movie");ne(n,b=>{b&&(a.value=b.title,s.value=b.type||"movie",n.value.folder_library||(n.value={...n.value,folder_library:[]}))},{deep:!0});const l=B([]),u=B("/");function c(b){u.value=b}const f=B(!1);function _(){f.value=!0}function h(){f.value=!1}const m=B(!1);async function w(){if(!m.value){m.value=!0;try{await J().patch(`dashboard/libraries/${n.value.id}`,{...n.value,subtitles:l.value.map(b=>b.iso_639_1),specialSeasonName:n.value.specialSeasonName}),t.invalidateQueries({queryKey:["dashboard","libraries"]}),e.close()}catch(b){o.add({severity:"error",summary:H("Error"),detail:b instanceof Error?b.message:"Unknown error",life:5e3})}finally{m.value=!1}}}return ne(i,b=>{b&&J().patch(`dashboard/libraries/${n.value.id}`,{title:b}).then(()=>{t.invalidateQueries({queryKey:["dashboard","libraries"]})}).catch(C=>{o.add({severity:"error",summary:H("Error"),detail:C.message,life:5e3})})}),ne(s,b=>{b&&J().patch(`dashboard/libraries/${n.value.id}`,{type:b}).then(()=>{t.invalidateQueries({queryKey:["dashboard","libraries"]})}).catch(C=>{o.add({severity:"error",summary:H("Error"),detail:C.message,life:5e3})})}),(b,C)=>{const P=Ke("InputText");return S(),z(Ne,null,[D(ht,{id:"editLibraryModal",close:r.close,open:r.open,background:"","max-width":"max-w-[565px]","no-close":"",title:"Edit Library"},{actions:N(()=>[p("div",lo,[D(Ee,{id:"done",disabled:m.value,color:"theme",type:"button",variant:"contained",onClick:w},{default:N(()=>[V(k(m.value?b.$t("Saving..."):b.$t("Done")),1)]),_:1},8,["disabled"])])]),default:N(()=>[p("div",Xn,[p("div",Vn,[p("div",zn,[p("div",Hn,[p("div",Wn,[(S(!0),z(Ne,null,st(Ge(Ir),$=>(S(),R(In,{key:$.value,selected:s.value===$.value,type:$,"class-name":"size-8",onClick:q=>s.value=$.value},null,8,["selected","type","onClick"]))),128))]),p("div",Gn,[p("div",Kn,[p("div",Un,[p("div",Qn,[p("p",Zn,k(b.$t("Library Title")),1),C[2]||(C[2]=p("p",{class:"flex-grow-0 flex-shrink-0 text-sm font-medium text-left text-focus"}," * ",-1))]),D(P,{id:"title",modelValue:a.value,"onUpdate:modelValue":C[0]||(C[0]=$=>a.value=$),class:"w-full",required:""},null,8,["modelValue"])])])])])])]),C[3]||(C[3]=p("div",{class:"flex-grow-0 flex-shrink-0 w-10 h-0.5 rounded bg-[#e2f0fd]/[0.08]"},null,-1)),p("div",Jn,[p("div",eo,[p("p",to,k(b.$t("Select one or more folders")),1)]),p("div",ro,[p("div",no,[p("div",oo,[p("button",{id:"save",class:"group/button flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 h-11 relative overflow-hidden gap-2 pl-3 pr-2.5 py-2.5 rounded-[10px] font-semibold transition-colors bg-surface-10/5 hover:bg-surface-12/5 active:bg-surface-12/5 text-surface-12/12 hover:text-surface-12",type:"button",onClick:_},[p("span",null,k(b.$t("Add folder")),1),D(he,{"class-name":"w-6 h-6 flex-grow-0 flex-shrink-0 ml-auto",icon:"folderAdd"})])]),n.value?.folder_library?(S(!0),z(Ne,{key:0},st(n.value?.folder_library,$=>(S(),R(Ln,{key:$.folder_id,modelValue:n.value,"onUpdate:modelValue":C[1]||(C[1]=q=>n.value=q),folder:$},null,8,["modelValue","folder"]))),128)):Ae("",!0),p("div",ao,[D(he,{"class-name":"w-4 h-4 flex-grow-0 flex-shrink-0",icon:"infoCircle"}),p("p",io,k(b.$t("You can always add folder and change encoding profiles later")),1)])])])])])]),_:1},8,["close","open"]),D(Yn,{close:h,folder:u.value,library:n.value,open:f.value,"set-folder":c},null,8,["folder","library","open"])],64)}}}),uo=so;W();var co={class:"my-6 text-sm text-surface-10"},fo=Q({__name:"DeleteLibraryModal",props:{open:{type:Boolean,required:!0},close:{type:Function,required:!0},id:{type:String,required:!0},name:{type:String,required:!0},noRedirect:{type:Boolean,default:!1}},setup(r){const e=r,n=ve(),t=De(),o=B(!1);async function a(){if(!o.value){o.value=!0;try{const{data:i}=await J().delete(`dashboard/libraries/${e.id}`);t.add({severity:i.status==="ok"?"success":"error",summary:H(i.status==="ok"?"Success":"Error"),detail:H(i.message,...i.args??[]),life:5e3}),n.invalidateQueries({queryKey:["dashboard","libraries"]}),e.close()}catch{o.value=!1}}}return(i,s)=>(S(),R(ht,{close:r.close,open:r.open,params:{library:e.name},"max-width":"max-w-xl",title:"Delete library {{library}}"},{actions:N(()=>[D(Ee,{id:"yes",disabled:o.value,onclick:a,color:"red","end-icon":"trash",type:"button",variant:"contained"},{default:N(()=>[V(k(o.value?i.$t("Deleting..."):i.$t("Delete")),1)]),_:1},8,["disabled"]),D(Ee,{id:"no",disabled:o.value,onclick:r.close,color:"auto",type:"button",variant:"text"},{default:N(()=>[V(k(i.$t("Cancel")),1)]),_:1},8,["disabled","onclick"])]),default:N(()=>[p("div",co,k(i.$t("Are you sure you want to delete this library?")),1)]),_:1},8,["close","open","params"]))}}),po=fo;W();var ho={class:"flex h-min children:cursor-default flex-col items-center rounded-lg w-inherit odd:bg-surface-12/5 even:bg-surface-12/2 dark:odd:bg-surface-12/5 dark:even:bg-surface-12/2 text-surface-12/80"},mo={class:"flex items-center gap-2 overflow-x-hidden py-2 pr-2 w-inherit overflow-y-show"},vo={class:"ml-2 h-auto w-8 p-2 handle"},go={class:"w-full line-clamp-1"},bo=Q({__name:"LibraryItem",props:{modelValue:{type:Object,required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(r){const e=Ot(r,"modelValue"),n=B(!1);function t(){n.value=!0}function o(){n.value=!1}const a=B(!1);function i(){a.value=!0}function s(){a.value=!1}const l=Se(()=>{let u;switch(e.value.type){case"music":u="noteDouble";break;case"tv":u="tv";break;case"image":u="camera";break;case"movie":u="film";break;default:u="nomercy"}return u});return(u,c)=>(S(),z("div",ho,[p("div",mo,[p("button",vo,[D(he,{class:"h-6 w-6",icon:"menuDotsVertical"})]),D(he,{icon:l.value,class:"h-6 w-6"},null,8,["icon"]),p("span",go,k(e.value?.title),1),p("button",{class:"ml-auto flex justify-center items-center h-10 px-2.5 py-2 gap-2 rounded-lg text-sm select-none w-auto font-semibold leading-[100%] transition-all duration-150 button-text hover:outline-slate-11 dark:hover:outline-slate-11 outline-1 outline outline-transparent",type:"button",onClick:i},[D(he,{class:"h-6 w-6",icon:"folderEdit"})]),p("button",{class:"ml-auto flex justify-center items-center h-10 px-2.5 py-2 gap-2 rounded-lg text-sm select-none w-auto font-semibold leading-[100%] transition-all duration-150 button-text hover:outline-slate-11 dark:hover:outline-slate-11 outline-1 outline outline-transparent",type:"button",onClick:t},[D(he,{class:"h-6 w-6",icon:"folderRemove"})])]),e.value?(S(),R(uo,{key:0,id:e.value?.id,modelValue:e.value,"onUpdate:modelValue":c[0]||(c[0]=f=>e.value=f),close:s,open:a.value},null,8,["id","modelValue","open"])):Ae("",!0),e.value?(S(),R(po,{key:1,id:e.value?.id,close:o,name:e.value.title,open:n.value},null,8,["id","name","open"])):Ae("",!0)]))}}),yo=Tr(bo,[["__scopeId","data-v-a50b62c6"]]);W();var _o={class:"flex flex-col overflow-hidden text-start h-available"},wo={class:"mb-2 text-xl font-semibold"},xo={class:"mb-4 text-sm"},Eo={key:0,class:"grid w-available h-available place-items-center overflow-hidden"},So={class:"mt-4 flex w-full justify-start"},Do=Q({__name:"Libraries",props:{setNextButtonLocked:{type:Function,required:!0}},setup(r){const e=r,n=ve(),{data:t,isLoading:o}=It({path:"dashboard/libraries",queryKey:["dashboard","libraries"]}),a=B(null),i=B(t.value??[]);ne(t,u=>{console.log("Libraries updated:",u),u&&(i.value=u,e.setNextButtonLocked(u?.length===0))});function s(){J().post("dashboard/libraries").then(()=>{n.invalidateQueries({queryKey:["dashboard","libraries"]})})}function l(){J().patch("dashboard/libraries/sort",{libraries:i.value.map((u,c)=>({id:u.id,order:c}))}).then(()=>{n.invalidateQueries({queryKey:["dashboard","libraries"]})})}return ne(i,()=>{l()}),_n(a,i,{animation:150,handle:".handle"}),(u,c)=>(S(),z("div",_o,[p("h2",wo,k(u.$t("Organize your media library")),1),p("p",xo,k(u.$t("Add your media libraries to organize your content.")),1),Ge(o)?(S(),z("div",Eo,[D(Ge(gr),{class:"ion-padding",name:"crescent"})])):Ae("",!0),p("div",{ref_key:"el",ref:a,class:"flex h-auto w-full flex-col overflow-y-auto text-start gap-1"},[(S(!0),z(Ne,null,st(i.value,(f,_)=>(S(),R(yo,{key:f.id,modelValue:i.value[_],"onUpdate:modelValue":h=>i.value[_]=h},null,8,["modelValue","onUpdate:modelValue"]))),128))],512),p("div",So,[D(Ee,{id:"yes",color:"theme",type:"button",variant:"contained",onClick:s},{default:N(()=>[V(k(u.$t("Add media library")),1)]),_:1})])]))}}),ko=Do;W();var Co=Q({__name:"Finish",props:{setNextButtonLocked:{type:Function,required:!0}},setup(r){const{t:e}=hr();return ve(),(n,t)=>null}}),To=Co;W();var Oo={class:"flex flex-col gap-2 h-available"},Io={class:"flex flex-col gap-2"},No={class:"mt-auto flex flex-col"},$o={class:"mb-4 text-sm"},Ao={class:"text-theme-10 hover:underline",href:"https://nomercy.tv/privacy-policy",target:"_blank"},Fo={class:"text-theme-10 hover:underline",href:"https://nomercy.tv/terms-of-service",target:"_blank"},Po=Q({__name:"Base",props:{setNextButtonLocked:{type:Function,required:!0}},setup(r){const e=r,n=ve(),t=De(),{data:o}=It({path:"dashboard/server/info",queryKey:["serverinfo"]}),a=B(o.value?.server??""),i=Ut(a,500);ne(o,l=>{l&&(a.value=l.server)});function s(){J().patch("dashboard/server/info",{name:i.value}).then(({data:l})=>{t.add({severity:"success",summary:H("Success"),detail:H(l.message,...l.args??[]),life:5e3}),n.invalidateQueries({queryKey:["servers"]})})}return ne(i,(l,u)=>{!l||l===u||u===""||s()}),ne(a,l=>{e.setNextButtonLocked(!l)}),(l,u)=>{const c=Ke("InputText");return S(),z("div",Oo,[p("div",Io,[u[1]||(u[1]=p("label",{for:"serverName"},"Server name",-1)),D(c,{id:"serverName",modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=f=>a.value=f),class:"w-1/3",name:"Give your server a friendly name to help identify it."},null,8,["modelValue"])]),p("div",No,[p("p",$o,[V(k(l.$t("By using this NoMercy app, a NoMercy MediaServer, or any of our services, you agree to the"))+" ",1),p("a",Ao,k(l.$t("Privacy Policy")),1),V(" "+k(l.$t("and"))+" ",1),p("a",Fo,k(l.$t("Terms of Service")),1),u[2]||(u[2]=V(". ",-1))])])])}}}),Mo=Po;W();var Bo=Q({__name:"Desktop",setup(r){const e=De(),n=B(["Base info","Media libraries","Finish"]),t=B("Base info"),o=B(!1);async function a(){console.log("Finish"),await J().post("/dashboard/libraries/refresh").then(()=>{e.add({severity:"success",summary:H("Success"),detail:"Your media libraries are being scanned in the background.",life:16e3})}).catch(l=>{e.add({severity:"error",summary:"Error refreshing libraries",detail:l.message,life:16e3})}),await J().get("libraries").then(({data:l})=>{Er(l.data),Cr.value=!0,kr.value=!0,qt.replace("/")}).catch(()=>{qt.replace({name:"Server offline"})})}function i(l){t.value=l}function s(l){o.value=l}return(l,u)=>(S(),R(Ge(br),null,{default:N(()=>[D(Ge(wr),{fullscreen:!0},{default:N(()=>[D(Hr,{"current-step":t.value,finish:a,"next-button-locked":o.value,"set-current-step":i,steps:n.value},{default:N(()=>[t.value==="Base info"?(S(),R(Mo,{key:0,"set-next-button-locked":s})):t.value==="Media libraries"?(S(),R(ko,{key:1,"set-next-button-locked":s})):t.value==="Finish"?(S(),R(To,{key:2,"set-next-button-locked":s})):Ae("",!0)]),_:1},8,["current-step","next-button-locked","steps"])]),_:1})]),_:1}))}}),Uo=Bo;export{Uo as default};
