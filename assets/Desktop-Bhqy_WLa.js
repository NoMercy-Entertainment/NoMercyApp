import"./useBaseQuery-dQ9bk6bN.js";import"./useInfiniteServerClient-C_qQjXxt.js";import"./useQueryClient-E_0_uywC.js";import"./useQuery-CAOy4GtT.js";import{Ci as P,Co as k,Ec as _,Gc as c,Gs as C,Hs as b,Ks as p,Ns as h,Oc as d,Qs as w,Rc as S,Ss as n,U as M,ec as N,fc as U,hc as f,ho as x,i as o,pc as I,ta as s}from"./index-C2NorOFh.js";import{s as i}from"./imageModal-Dqed3B3i.js";import{t as D}from"./useServerClient-CiaRNOjP.js";import{i as H,n as T,o as B,r as A,s as F}from"./VideoPlayer-BikAUURu.js";import"./buttons-CU4wCn28.js";import{t as V}from"./keyHandlerPlugin-Bm7VIwN4.js";import{t as G}from"./videoNoMercyConnectPlugin-aXc5Q6XT.js";h();var E=N({__name:"Desktop",setup(K){const{data:u}=D({enabled:!s.value.features?.nomercyConnect}),e=S();function r(t){const l={controls:!1,debug:!1,playlist:t?.filter(a=>!!a.id)??[],accessToken:s.value?.accessToken,basePath:P.value?.serverBaseUrl,forceTvMode:(n("android")||n("ios"))&&!n("mobile"),disableTouchControls:!1,disableMediaControls:"mediaSession"in navigator||n("capacitor"),renderAhead:100,disableAutoPlayback:s.value.features?.nomercyConnect};if(e.value=A("player1").setup(l),e.value.once("back",()=>{history.state.back?o.back():o.replace("/")}),s.value.features?.nomercyConnect){const a=new G;e.value.registerPlugin("videoNoMercyConnect",a),e.value.usePlugin("videoNoMercyConnect")}const v=new H;e.value.registerPlugin("desktopUI",v),e.value.usePlugin("desktopUI");const g=new B;e.value.registerPlugin("autoSkip",g),e.value.usePlugin("autoSkip");const y=new V;if(e.value.registerPlugin("keyHandler",y),e.value.usePlugin("keyHandler"),!s.value.features?.nomercyConnect){const a=new F;e.value.registerPlugin("sync",a),e.value.usePlugin("sync")}const m=new T;e.value.registerPlugin("octopus",m),e.value.usePlugin("octopus"),e.value.once("play",()=>{e.value.enterFullscreen()}),e.value.on("playlistComplete",()=>{console.log("Playlist complete"),history.state.back?o.back():o.replace("/")}),e.value.on("play",()=>{i(!0)}),e.value.on("pause",()=>{i(!1)}),e.value.on("fullscreen",a=>{window.external?.sendMessage?.(a?"enterFullscreen":"exitFullscreen")})}return _(u,t=>{t?.length&&r(t)}),U(()=>{M.stop(),s.value.features?.nomercyConnect?r():u.value?.length&&r(u.value)}),I(()=>{e.value?.dispose(),i(!1)}),(t,l)=>(f(),p(c(k),null,{default:d(()=>[w(c(x),{fullscreen:!0},{default:d(()=>[(f(),p(b,{to:"body"},[l[0]||(l[0]=C("div",{id:"player1",class:"group nomercyplayer text-white"},null,-1))]))]),_:1})]),_:1}))}}),Z=E;export{Z as default};
