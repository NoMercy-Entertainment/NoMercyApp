const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BaseLayout-Dks66b_g.js","assets/_plugin-vue_export-helper-pDp7unP0.js","assets/index-C8wrpkyN.js","assets/index-BuQJHs7e.css","assets/utils-T6SCnbWu.js","assets/bundle-mjs-DzMTChaT.js","assets/dist-DT2yuChF.js","assets/ui-BWVnjNNY.js","assets/esm-B8xVkXPy.js","assets/esm-CdHIRdo_.js","assets/core-BLZUGO-K.js","assets/client-BmAhQ-69.js","assets/user-CXzDmTwG.js","assets/global-WVsx5src.js","assets/esm-BiKSXF-U.js","assets/currentServer-B_KQACAB.js","assets/config-BZ-AEJ_J.js","assets/SocketClient-CeGi9Yeo.js","assets/index2-BuY1gQTr.js","assets/helpers-D5mJiZ9q.js","assets/index5-C9RIJ-sZ.js","assets/index6-Cj1ScfU-.js","assets/ionic-global-QXgPMqNd.js","assets/client-DAXuPTec.js","assets/keyboard-COERgV0V.js","assets/dir-CJiJYBc7.js","assets/focus-visible-C1DWu8Oz.js","assets/index3-BubtwhWu.js","assets/hardware-back-button-9ZINzT5a.js","assets/index8-DaGgXvc2.js","assets/ios.transition-BUwO3_AE.js","assets/keyboard2-CSWHSxpI.js","assets/md.transition-Dd2SUgMb.js","assets/utils-CYCtUrjH.js","assets/deviceInfo-DQllL7m1.js","assets/esm-DnlYWABm.js","assets/esm-7i_Wtgyh.js","assets/ChristmasSnow-BTq5HVjx.js","assets/render-D4GOIDCS.js","assets/basecomponent-CKGbzbTY.js","assets/button-BynHS9zl.js","assets/classnames-C7QsyfAI.js","assets/baseicon-BULsv_7E.js","assets/portal-DGnXTFoQ.js","assets/useQueryClient-mZLXzkAX.js","assets/md5-p-jaBsWs.js","assets/dist-Dd_BbWhG.js","assets/MoooomIcon-un4l75-N.js","assets/PlayerIcon-B_LEyqNM.js","assets/ScrollContainer-Nc0DKhrC.js","assets/TMDBImage-Dzn16_6n.js","assets/AppLogoSquare-B9MCCmvc.js","assets/AppLogoSquare-tviIpcab.css","assets/MusicButton-yLkQD0Gb.js","assets/SliderBar-dUk-4-0F.js","assets/serverClient-K02oLPZR.js","assets/contextMenuItems-BAxEuer3.js","assets/musicPlaylists-CeYpVUjG.js","assets/imageModal-KC5z1j1w.js","assets/dist-DtOedwIT.js","assets/Toggle-BtwpVmfw.js","assets/baseeditableholder-C8rtGDAF.js","assets/swiper-vue-CgnUSjX-.js","assets/DropdownMenu-CZfoN-P5.js","assets/BannerButton-B2nPYdxM.js","assets/MediaLikeButton-DVyfvAKN.js","assets/MediaLikeButton-DgtJX4Bs.css","assets/CoverImage-CcRvdF9S.js","assets/auth-D3TfzZqc.js","assets/apiClient-CnOywAmP.js","assets/notifications-DAOHq0v-.js","assets/BaseLayout-DE-aBvYD.css","assets/BaseLayout-p3bGsCab.js","assets/HubConnection-Dx0QDLJI.js","assets/konami-OKTxxHHG.js","assets/times-C8aYiEVK.js","assets/fileupload-BFNv7rr5.js","assets/useInfiniteServerClient-D5CFD8Z7.js","assets/useBaseQuery-B6wsCOmB.js","assets/useMutationState-DDznLIuC.js","assets/useQuery-BBjfmHCe.js","assets/RipperOverlay-D6qylJUX.js","assets/Button-C7060WzV.js","assets/useMounted-CAJFTqdL.js","assets/ripperSocket-C3CKrXMp.js","assets/Indexer-Be4uStF-.js","assets/scrollHandlers-C74QlCNd.js","assets/Indexer-BajI4Owj.css","assets/AppLogo-xXRRO72g.js","assets/AppLogo-BxAvpjKC.css","assets/KeepCounting-D0dDRaER.js","assets/Marquee-WbcysVQu.js","assets/Modal-SWnpBpsA.js","assets/Modal-VkhBf0wd.css","assets/useServerClient-Bvu1z2Rs.js","assets/search-LUh2yIwm.js","assets/sidebar-BPkyWGvD.js","assets/BaseLayout-rgNdgF5N.css","assets/Collection-Bi7OQWjn.js","assets/AuthView-CwOO6G6M.js","assets/Logout-CpDuByaA.js","assets/ExploreContainer-acELJQY4.js","assets/ExploreContainer-BZmj7tlQ.css","assets/Home-Bjek-nds.js","assets/Info-CFblC2OU.js","assets/Libraries-Cjhorft_.js","assets/Library-BrPkUiEd.js","assets/PaginatedLibrary-B9RsgLbX.js","assets/Person-CNTZ1qDh.js","assets/Search-CI28zSVF.js","assets/Watch-bZAbBUPH.js","assets/Artist-C_UDdyS3.js","assets/Cards-DFXbJVU6.js","assets/List-Fr8UP9B3.js","assets/Start-wbiwhyI0.js","assets/Logs-BUadLqgC.js","assets/Plugins-Cg2hnlW7.js","assets/Schedule-DnJbKptn.js","assets/Metadata-Svu9slNB.js","assets/Ripper-CULm69zP.js","assets/Specials-DjoBkGqb.js","assets/Activity-T6hNcSFR.js","assets/Devices-BWkPN0Ns.js","assets/Dlna-CDc2sPiq.js","assets/EncoderProfiles-Dg79DbDt.js","assets/General-DUHwYZ00.js","assets/Libraries-B0XSB2xI.js","assets/Notifications-935mVtKt.js","assets/System-CjA1yB2V.js","assets/Users-CEAKT2aL.js","assets/Controls-BsQoDNqm.js","assets/Display-xgEy4MkJ.js","assets/Profile-BWqElbnu.js","assets/Subtitles-Bxe1Cv0g.js","assets/Cast-DEQfNClU.js","assets/Download-CWEuww2J.js","assets/SelectServers-pTDErWxR.js","assets/NoServers-Czf9jbHr.js","assets/ServerOffline-Cljp8abw.js","assets/PostInstall-yWsUfNRv.js","assets/NotFound-DElbvitH.js","assets/Edit-Cky3qoPN.js","assets/Select-CLfP-EXx.js","assets/use-text-value-n-n4xhYL.js","assets/DashboardLayout-C7CKBnVp.js","assets/FloatingBackButton-XWxuqzT1.js","assets/useApiClient-CjFzmKv0.js","assets/Edit-8HhV1cpp.js","assets/FolderBrowser-D_lSDE3I.js","assets/LanguageSelect-D10rCqRF.js","assets/NoResultImage-CEMCT0Re.js","assets/Edit-DwYP8DK0.js","assets/inputtext-B3hSGjUk.js","assets/Show-BkDc4aff.js","assets/card-_I5Wr2p9.js","assets/ActivityCard-Q6J9VCLy.js","assets/Edit-CyKdySiY.js"])))=>i.map(i=>d[i]);
import{A as we,Ct as s,Lt as A,M as ke,Mn as Oe,P as ce,Tt as S,j as Ve,kn as I,mt as ae,wt as Be,yn as re}from"./index-C8wrpkyN.js";import{n as Z}from"./dist-DtOedwIT.js";import{f as Ce}from"./ui-BWVnjNNY.js";import{n as ee,t as T}from"./currentServer-B_KQACAB.js";import{l as Le}from"./core-BLZUGO-K.js";import{f as De}from"./global-WVsx5src.js";import{n as te,s as P}from"./user-CXzDmTwG.js";import{t as F}from"./serverClient-K02oLPZR.js";import{$ as ue,a as le,l as x,t as q,tt as pe}from"./SocketClient-CeGi9Yeo.js";import{t as oe}from"./apiClient-CnOywAmP.js";import{a as Me}from"./notifications-DAOHq0v-.js";import{r as He}from"./auth-D3TfzZqc.js";ke();S();var Ue=()=>{const e=[],a={},t=i=>{switch(i.routerAction){case"pop":v(i);break;default:f(i);break}i.routerDirection==="root"&&(E(),f(i))},o=i=>{const c=e.findIndex(u=>u.id===i.id);c>-1&&e.splice(c,1,i);const r=a[i.tab||""];if(r){const u=r.findIndex(h=>h.id===i.id);u>-1?r.splice(u,1,i):r.push(i)}else i.tab&&(a[i.tab]=[i])},v=i=>{const c=d(i.tab);let r;if(c){for(r=c[c.length-1];r&&r.id!==i.id;)c.pop(),r=c[c.length-1];c.pop(),c.push(i)}for(r=e[e.length-1];r&&r.id!==i.id;)e.pop(),r=e[e.length-1];e.pop(),e.push(i)},f=i=>{const c=d(i.tab);c&&(c[c.length-1]&&c[c.length-1].id===i.id&&c.pop(),c.push(i)),e.push(i)},E=i=>{if(i){const{position:c,tab:r}=i,u=e.findIndex(_=>_.position===c);if(u===-1)return;e.splice(u);const h=_=>{const R=a[_].findIndex(n=>n.position===c);R!==-1&&a[_].splice(R)},L=a[r];if(r&&L)h(r);else for(const _ in a)h(_)}else{for(const c in a)a[c]=[];e.length=0}},d=i=>{let c;return i&&(c=a[i],c||(c=a[i]=[])),c},O=()=>e.length,V=(i,c)=>{const r=c-i;return e[r]||w()},w=()=>e[e.length-1];return{current:V,size:O,last:w,add:t,canGoBack:(i=1,c,r)=>r-i>=c,update:o,getFirstRouteInfoForTab:i=>{const c=d(i);if(c)return c[0]},getCurrentRouteInfoForTab:i=>{const c=d(i);if(c)return c[c.length-1]},findLastLocation:(i,c=-1)=>{const r=d(i.tab);if(r){if(c<-1)return r[r.length-1+c];for(let u=r.length-2;u>=0;u--){const h=r[u];if(h&&h.pathname===i.pushedByRoute)return h}}for(let u=e.length-2;u>=0;u--){const h=e[u];if(h&&h.pathname===i.pushedByRoute)return e[u+1+c]}},clearHistory:E}},de={main:0},Ae=(e="main")=>{var a;const t=((a=de[e])!==null&&a!==void 0?a:0)+1;return de[e]=t,t.toString()},xe=(e,a)=>{let t={direction:void 0,action:void 0,delta:void 0};a.afterEach((n,m,l)=>{if(l)return;const{direction:g,action:D,delta:p}=t;f=e.history.state.position;const H=e.history.state.replaced?"replace":void 0;z(n,D||H,g,p),t={direction:void 0,action:void 0,delta:void 0}});const o=Ue();let v=e.history.state.position,f=e.history.state.position,E,d;const O=[];typeof document<"u"&&document.addEventListener("ionBackButton",n=>{n.detail.register(0,m=>{e.history.go(-1),m()})}),e.history.listen((n,m,l)=>{t={delta:l.delta,action:l.type==="pop"&&l.delta>=1?"push":l.type,direction:l.direction===""?"forward":l.direction}});const V=(n,m)=>{const l=o.current(v,f);if(l&&l.pushedByRoute){const g=o.findLastLocation(l);g?(d=Object.assign(Object.assign({},g),{routerAction:"pop",routerDirection:"back",routerAnimation:m||l.routerAnimation}),l.lastPathname===l.pushedByRoute||g.pathname===l.pushedByRoute&&!l.tab&&!g.tab?a.back():a.go(g.position-l.position)):w(n,"pop","back",m)}else w(n,"pop","back",m)},w=(n,m,l,g,D)=>{h(m,l,g,D),m==="push"?a.push(n):a.replace(n)},z=(n,m,l,g)=>{let D;if(d)if(d.routerAction==="replace")D=o.current(v,f);else if(d.routerAction==="pop")D=o.current(v,f+1),m==="replace"&&o.clearHistory();else{const p=d.routerDirection==="root"?f:f-1;D=o.current(v,p)}else D=E;if(D||(D={pathname:"",search:""}),D.pathname+D.search!==n.fullPath){if(!d){if(m==="replace")d={routerAction:"replace",routerDirection:"none"};else if(m==="pop"){const U=o.current(v,f-g);if(U&&U.pushedByRoute){const b=o.findLastLocation(U,g);d=Object.assign(Object.assign({},b),{routerAction:"pop",routerDirection:"back"})}else d={routerAction:"pop",routerDirection:"none"}}d||(d={routerAction:"push",routerDirection:l||"forward"})}let p;if(d?.id)p=Object.assign(Object.assign({},d),{lastPathname:D.pathname});else{const U=d.routerAction==="push"&&d.routerDirection==="forward";if(p=Object.assign(Object.assign({id:Ae("routeInfo")},d),{lastPathname:D.pathname,pathname:n.path,search:n.fullPath&&n.fullPath.split("?")[1]||"",params:n.params&&n.params,prevRouteLastPathname:D.lastPathname}),U)p.pushedByRoute=D.pathname!==""?D.pathname:void 0;else if(p.routerAction==="pop"){const b=o.findLastLocation(p);p.pushedByRoute=b?.pushedByRoute}else if(p.routerAction==="push"&&p.tab!==D.tab){const b=o.getCurrentRouteInfoForTab(p.tab);p.pushedByRoute=b?.pushedByRoute}else if(p.routerAction==="replace"){const b=o.current(v,f),K=b?.pushedByRoute,Ie=K!==void 0&&K!==p.pathname?K:p.pushedByRoute;p.lastPathname=b?.pathname||p.lastPathname,p.pushedByRoute=Ie,p.routerDirection=b?.routerDirection||p.routerDirection,p.routerAnimation=b?.routerAnimation||p.routerAnimation,p.prevRouteLastPathname=b?.lastPathname}}p.position=f,p.delta=g;const H=o.size(),se=f-v;H>se||H===se&&H>0&&m==="replace"?(p.routerAction==="push"||p.routerAction==="replace")&&g===void 0&&(o.clearHistory(p),o.add(p)):o.add(p),o.size()===1&&(v=p.position),E=p}d=void 0,O.forEach(p=>p(E))},G=()=>E,Q=(n=1)=>o.canGoBack(n,v,f),$=n=>{const{routerAnimation:m,routerDirection:l,routerLink:g}=n;h("push",l,m),a.push(g)},i=n=>{const m=o.getFirstRouteInfoForTab(n);m&&a.go(m.position-f)},c=(n,m)=>{if(!m)return;const l=o.getCurrentRouteInfoForTab(n),[g]=m.split("?");l?(d=Object.assign(Object.assign({},d),{routerAction:"push",routerDirection:"none",tab:n}),l.pathname===g?a.push({path:l.pathname,query:ce(l.search)}):a.push({path:g,query:ce(l.search)})):w(g,"push","none",void 0,n)},r=n=>{const m=Object.assign({},o.current(v,f));m.tab!==n&&(m.tab=n,o.update(m));const l=o.findLastLocation(m);m.pushedByRoute!==m.lastPathname&&l?.tab!==n&&(m.pushedByRoute=void 0,o.update(m))},u=n=>{O.push(n)},h=(n="push",m="forward",l,g)=>{d={routerAction:n,routerDirection:m,routerAnimation:l,tab:g}};return{handleNavigate:w,getLeavingRouteInfo:()=>o.current(v,f),handleNavigateBack:V,handleSetCurrentTab:r,getCurrentRouteInfo:G,canGoBack:Q,navigate:$,resetTab:i,changeTab:c,registerHistoryChangeListener:u,goBack:n=>{h("pop","back",n),a.back()},goForward:n=>{h("push","forward",n),a.forward()}}},We=e=>{const a={},t=()=>Object.keys(a).length,o=r=>{delete a[r]},v=r=>a[r],f=(r,u)=>{r.ionPageElement=u,r.ionRoute=!0,r.matchedRoute.instances={default:r.vueComponentRef.value}},E=(r,u)=>w(r.pathname,u,!1),d=(r,u,h=!0)=>w(r.lastPathname,u,h),O=(r,u)=>w(r,u,!1),V=(r,u)=>u.find(h=>{if(h.pathname===r)return h}),w=(r,u,h=!1)=>{const L=_=>{if(h&&!_.ionRoute||r==="")return!1;const R=e.resolve(r).matched.find(n=>n===_.matchedRoute);if(R)return R.path.includes(":")&&r!==_.pathname?!1:_};if(u){const _=a[u];if(!_)return;const R=e?_.find(L):V(r,_);if(R)return R}else for(const _ in a){const R=a[_],n=V(r,R);if(n)return n}};return{unmountLeavingViews:(r,u,h=1)=>{const L=a[r];if(!L)return;const _=L.findIndex(R=>R===u);for(let R=_+1;R<_-h;R++){const n=L[R];n.mount=!1,n.ionPageElement=void 0,n.ionRoute=!1,n.matchedRoute.instances={}}},mountIntermediaryViews:(r,u,h=1)=>{const L=a[r];if(!L)return;const _=L.findIndex(R=>R===u);for(let R=_+1;R<_+h;R++)L[R].mount=!0},clear:o,findViewItemByRouteInfo:E,findLeavingViewItemByRouteInfo:d,findViewItemByPathname:O,createViewItem:(r,u,h,L,_)=>({id:Ae("viewItem"),pathname:L.pathname,outletId:r,matchedRoute:h,ionPageElement:_,vueComponent:u,vueComponentRef:Oe(),ionRoute:!1,mount:!1,exact:L.pathname===h.path,params:L.params,vueComponentData:{}}),getChildrenToRender:r=>a[r]?a[r].filter(u=>u.mount):[],add:r=>{const{outletId:u}=r;a[u]?a[u].push(r):a[u]=[r]},remove:(r,u)=>{if(!u)throw Error("outletId required");const h=a[u];h&&(a[u]=h.filter(L=>L.id!==r.id))},registerIonPage:f,getViewStack:v,size:t}},je=e=>{const a=Object.assign({},e);delete a.tabsPrefix;const t=we(a),o=xe(e,t),v=We(t),f=t.install.bind(t);t.install=d=>{d.provide("navManager",o),d.provide("viewStacks",v),f(d)};const E=t.isReady.bind(t);return t.isReady=()=>E(),t},qe=e=>Ve(e);S();var ne=I([]);function Fe(e){ne.value=e}function fa(){ne.value=[]}var ie=ne;Be();var Ne=s(()=>import("./BaseLayout-Dks66b_g.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71])),ze=s(()=>import("./BaseLayout-p3bGsCab.js"),__vite__mapDeps([72,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,73,74,75,76,60,61,77,78,79,80,63,81,82,83,84,85,86,87,64,65,66,88,89,90,91,92,93,67,68,69,94,70,95,96,97])),me=()=>s(()=>import("./Collection-Bi7OQWjn.js"),__vite__mapDeps([98,2,3,6,14,10,13])),Ge=()=>s(()=>import("./AuthView-CwOO6G6M.js"),__vite__mapDeps([99,2,3,6,14,10,13])),Qe=()=>s(()=>import("./Logout-CpDuByaA.js"),__vite__mapDeps([100,1,2,3,35,6,8,10,11,12,101,102,16,68,69])),$e=()=>s(()=>import("./Home-Bjek-nds.js"),__vite__mapDeps([103,2,3,6,14,10,13])),he=()=>s(()=>import("./Info-CFblC2OU.js"),__vite__mapDeps([104,2,3,6,14,10,13])),Ke=()=>s(()=>import("./Libraries-Cjhorft_.js"),__vite__mapDeps([105,2,3,6,14,10,13])),B=()=>s(()=>import("./Library-BrPkUiEd.js"),__vite__mapDeps([106,2,3,6,14,10,13])),Je=()=>s(()=>import("./PaginatedLibrary-B9RsgLbX.js"),__vite__mapDeps([107,2,3,6,14,10,13])),Xe=()=>s(()=>import("./Person-CNTZ1qDh.js"),__vite__mapDeps([108,2,3,6,14,10,13])),Ye=()=>s(()=>import("./Search-CI28zSVF.js"),__vite__mapDeps([109,2,3,6,14,10,13])),Ze=()=>s(()=>import("./Watch-bZAbBUPH.js"),__vite__mapDeps([110,2,3,6,14,10,13])),et=()=>s(()=>import("./Artist-C_UDdyS3.js"),__vite__mapDeps([111,2,3,6,14,10,13])),W=()=>s(()=>import("./Cards-DFXbJVU6.js"),__vite__mapDeps([112,2,3,6,14,10,13])),J=()=>s(()=>import("./List-Fr8UP9B3.js"),__vite__mapDeps([113,2,3,6,14,10,13])),tt=()=>s(()=>import("./Start-wbiwhyI0.js"),__vite__mapDeps([114,2,3,6,14,10,13])),at=()=>s(()=>import("./Logs-BUadLqgC.js"),__vite__mapDeps([115,2,3,6,14,10,13])),ve=()=>s(()=>import("./Plugins-Cg2hnlW7.js"),__vite__mapDeps([116,2,3,6,14,10,13])),fe=()=>s(()=>import("./Schedule-DnJbKptn.js"),__vite__mapDeps([117,2,3,6,14,10,13])),rt=()=>s(()=>import("./Metadata-Svu9slNB.js"),__vite__mapDeps([118,2,3,6,14,10,13])),ot=()=>s(()=>import("./Ripper-CULm69zP.js"),__vite__mapDeps([119,2,3,6,14,10,13])),nt=()=>s(()=>import("./Specials-DjoBkGqb.js"),__vite__mapDeps([120,2,3,6,14,10,13])),it=()=>s(()=>import("./Activity-T6hNcSFR.js"),__vite__mapDeps([121,2,3,6,14,10,13])),st=()=>s(()=>import("./Devices-BWkPN0Ns.js"),__vite__mapDeps([122,2,3,6,14,10,13])),ct=()=>s(()=>import("./Dlna-CDc2sPiq.js"),__vite__mapDeps([123,2,3,6,14,10,13]));function ut(){return s(()=>import("./EncoderProfiles-Dg79DbDt.js"),__vite__mapDeps([124,2,3,6,14,10,13]))}var lt=()=>s(()=>import("./General-DUHwYZ00.js"),__vite__mapDeps([125,2,3,6,14,10,13])),pt=()=>s(()=>import("./Libraries-B0XSB2xI.js"),__vite__mapDeps([126,2,3,6,14,10,13]));function _e(){return s(()=>import("./Notifications-935mVtKt.js"),__vite__mapDeps([127,2,3,6,14,10,13]))}var dt=()=>s(()=>import("./System-CjA1yB2V.js"),__vite__mapDeps([128,2,3,6,14,10,13])),mt=()=>s(()=>import("./Users-CEAKT2aL.js"),__vite__mapDeps([129,2,3,6,14,10,13])),ht=()=>s(()=>import("./Controls-BsQoDNqm.js"),__vite__mapDeps([130,2,3,6,14,10,13])),vt=()=>s(()=>import("./Display-xgEy4MkJ.js"),__vite__mapDeps([131,2,3,6,14,10,13])),ft=()=>s(()=>import("./Profile-BWqElbnu.js"),__vite__mapDeps([132,2,3,6,14,10,13])),_t=()=>s(()=>import("./Subtitles-Bxe1Cv0g.js"),__vite__mapDeps([133,2,3,6,14,10,13])),bt=()=>s(()=>import("./Cast-DEQfNClU.js"),__vite__mapDeps([134,2,3,6,14,10,13])),Rt=()=>s(()=>import("./Download-CWEuww2J.js"),__vite__mapDeps([135,2,3,6,14,10,13])),yt=()=>s(()=>import("./SelectServers-pTDErWxR.js"),__vite__mapDeps([136,2,3,6,14,10,13])),gt=()=>s(()=>import("./NoServers-Czf9jbHr.js"),__vite__mapDeps([137,2,3,6,14,10,13])),Pt=()=>s(()=>import("./ServerOffline-Cljp8abw.js"),__vite__mapDeps([138,2,3,6,14,10,13])),Et=()=>s(()=>import("./PostInstall-yWsUfNRv.js"),__vite__mapDeps([139,2,3,6,14,10,13])),Lt=()=>s(()=>import("./NotFound-DElbvitH.js"),__vite__mapDeps([140,2,3,6,14,10,13]));function C(){return De.value?Ne:ze}const Dt=[{path:"/",redirect:"/home"},{path:"/",component:C,children:[{path:"",redirect:"/home"},{path:"home",name:"Home",component:$e},{path:"search",name:"Search",component:Ye,props:{type:"all"}},{path:"libraries",name:"Libraries",component:Ke,beforeEnter:(e,a,t)=>{const o=ie.value.at(0);o&&!De.value?t({path:o.link}):t()}},{path:"libraries/:id/letter/:letter",name:"Library paginated",strict:!0,component:B},{path:"libraries/:id",name:"Library",strict:!0,component:B},{path:"specials",name:"Specials",component:B},{path:"specials/:id",name:"Special",component:me},{path:"genre",name:"Genres",component:B},{path:"genre/:id",name:"Genre",component:B},{path:"collection",name:"Collections",component:B},{path:"collection/:id",name:"Collection",component:me},{path:"person",name:"People",component:Je},{path:"person/:id",name:"Person",component:Xe},{path:"movie/:id",name:"Movie",component:he},{path:"tv/:id",name:"TV Show",component:he},{path:":type/:id/watch",name:"Watch",component:Ze}]},{path:"/music",component:C,children:[{path:"music",redirect:"/music/start"},{path:"start",name:"Music Start",component:tt},{path:"artists",redirect:"/music/artists/_"},{path:"artists/:letter",name:"Artists",component:W,props:{type:"artists"}},{path:"artist/:id",name:"Artist",component:et},{path:"albums",redirect:"/music/albums/_"},{path:"albums/:letter",name:"Albums",component:W,props:{type:"albums"}},{path:"album/:id",name:"Album",component:J},{path:"genres",name:"Music Genres",component:W,props:{type:"genres"}},{path:"genres/:id",name:"Music Genre",component:W},{path:"playlists",name:"Music Playlists",component:W,props:{type:"playlists"}},{path:"playlists/:id",name:"Music Playlist",component:J,props:{type:"playlists"}},{path:"tracks",name:"Tracks",component:J,props:{type:"tracks"}}]},{path:"/dashboard",component:C,children:[{path:"dashboard",name:"System",redirect:"/dashboard/system"},{path:"system",name:"System",component:dt},{path:"general",name:"General",component:lt},{path:"users",name:"Users",component:mt},{path:"users/:id",name:"Edit user",component:()=>s(()=>import("./Edit-Cky3qoPN.js"),__vite__mapDeps([141,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,142,143,38,47,59,73,39,60,41,61,77,78,44,55,80,46,144,81,82,83,84,49,145,94,92,93,68,69,146,70]))},{path:"libraries",name:"Dashboard Libraries",component:pt},{path:"libraries/:id",name:"Dashboard Library",component:()=>s(()=>import("./Edit-8HhV1cpp.js"),__vite__mapDeps([147,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,59,73,77,78,44,55,80,47,144,81,82,83,84,49,145,94,148,149,150,92,93,68,69,70]))},{path:"specials",name:"Dashboard Specials",component:nt},{path:"specials/:id",name:"Dashboard Special",component:()=>s(()=>import("./Edit-DwYP8DK0.js"),__vite__mapDeps([151,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,59,73,39,152,41,61,77,78,44,55,80,47,144,81,82,83,84,49,145,94,92,93,68,69,70]))},{path:"devices",name:"Devices",component:st},{path:"devices/:id",name:"Device",component:()=>s(()=>import("./Show-BkDc4aff.js"),__vite__mapDeps([153,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,59,73,39,154,77,78,44,55,80,47,144,81,82,83,84,49,145,94,68,69,70,155]))},{path:"ripper",name:"Ripper",component:ot},{path:"encoderprofiles",name:"Encoder Profiles",component:ut},{path:"encoderprofiles/:id",name:"Encoder Profile",component:()=>s(()=>import("./Edit-CyKdySiY.js"),__vite__mapDeps([156,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,59,73,77,78,44,55,80,47,144,81,82,83,84,49,145,94,68,69,70]))},{path:"notifications",name:"Notifications",component:_e},{path:"notifications/:id",name:"Notification",component:_e},{path:"metadata",name:"Metadata",component:rt},{path:"activity",name:"Activity",component:it},{path:"dlna",name:"DLNA",component:ct},{path:"logs",name:"Logs",component:at},{path:"plugins",name:"Plugins",component:ve},{path:"plugins/:id",name:"Plugin",component:ve},{path:"schedule",name:"Scheduled Tasks",component:fe},{path:"schedule/:id",name:"Scheduled Task",component:fe}]},{path:"/preferences",component:C,children:[{path:"display",name:"Display",component:vt},{path:"profile",name:"Profile",component:ft},{path:"controls",name:"Controls",component:ht},{path:"subtitles",name:"Subtitles",component:_t}]},{path:"/dev",component:C,children:[{path:"cast",name:"Cast",component:bt},{path:"download",name:"Download",component:Rt}]},{path:"/setup",component:C,children:[{path:"setup",redirect:"setup/select-servers"},{path:"select-servers",name:"Select Server",component:yt},{path:"no-servers",name:"No Servers",component:gt},{path:"server-offline",name:"Server offline",component:Pt},{path:"post-install",name:"Post Install",component:Et}]},{path:"/auth",name:"Auth",component:Ge,meta:{public:!0,bypassSetup:!0}},{path:"/logout",name:"Logout",component:Qe,meta:{public:!0,bypassSetup:!0}},{path:"/:catchAll(.*)*",component:Lt,props:{message:"Page not found",status:404}}];var At=["code","state","session_state"];function Tt(e){return e.beforeEach((a,t,o)=>{if(!ae("capacitor")){console.log(a.path);const v={...a.query};let f=!1;At.forEach(E=>{v[E]&&(delete v[E],f=!0)});for(const E in v)v[E]?.includes("?")&&(v[E]=v[E].split("?").at(0));f&&e.replace({query:v}).then()}o()})}var St=Tt,It={Home:["/libraries","/music"],Libraries:[]},Te=new Map;function wt(e){const a=Te.get(e);return!(a&&Date.now()-a<3e4)}function kt(e){Te.set(e,Date.now())}async function Ot(e){if(!T.value?.serverApiUrl||!wt(e))return;const a=e.split("/").filter(Boolean);if(!pe.getQueryData(a)){kt(e);try{await pe.prefetchQuery({queryKey:a,queryFn:async()=>{const t=await F().get(e);return t.data?.data??t.data},staleTime:1e3*60*5})}catch{}}}function Vt(e){const a=e.name,t=It[a];!t||t.length===0||requestIdleCallback(()=>{t.forEach(o=>{Ot(o)})})}function Bt(e){return e.afterEach(a=>{a.name&&(document.title=a.name),ae("capacitor")||setTimeout(()=>{document.querySelector(".ion-page .ion-page-invisible")?.classList.remove("ion-page-invisible")},500),Vt(a)})}var Ct=Bt;S();const Se=Le("redirectUrl","/home"),_a=A(()=>y.currentRoute.value.path==="/search"),ba=A(()=>y.currentRoute.value.path==="/music/search"),Ra=A(()=>y.currentRoute.value.path==="/home"||y.currentRoute.value.path==="/"),Mt=A(()=>y.currentRoute.value.path.startsWith("/music")),ya=A(()=>y.currentRoute.value.path.startsWith("/libraries")||y.currentRoute.value.path.startsWith("/library")),ga=A(()=>y.currentRoute.value.path.startsWith("/dashboard")),Pa=A(()=>y.currentRoute.value.path.startsWith("/preferences")),Ea=A(()=>ie.value?.some?.(e=>e.type==="music")),La=A(()=>y.currentRoute.value.path.startsWith("/music/album")),Da=A(()=>y.currentRoute.value.path.startsWith("/music/artist")),Aa=A(()=>y.currentRoute.value.path.startsWith("/music/playlist")),Ta=A(()=>y.currentRoute.value.path.startsWith("/music/song")),Sa=A(()=>y.currentRoute.value.path.startsWith("/music/queue")),Ia=A(()=>y.currentRoute.value.path.startsWith("/music/artist/")||y.currentRoute.value.path.startsWith("/music/album/")),wa=A(()=>Mt.value?"/search?from=music":"/search");S();const be=I(!1),Re=I(!1),ye=I(!1),k=I([]);function Ht(e){k.value=e.map(a=>({...a,serverApiUrl:a.serverApiUrl.replace(/\/$/,""),serverBaseUrl:a.serverBaseUrl.replace(/\/$/,"")}))}var ka=k;S();var X=I(!1);function Ut(){return new Promise((e,a)=>{if(X.value){e();return}if(ie.value.length>0||ye.value){e();return}if(!T.value){e();return}F(5).get("libraries").then(({data:t})=>{Fe(t.data),Ce.value=!0,ye.value=!0,e(),X.value=!0,y.replace(Se.value).then()}).catch(async()=>{X.value=!0,await y.replace({name:"Server offline"}).then(()=>e()),e()})})}var xt=Ut;S();var M=I([]),Wt=A(()=>M.value);function jt(e){M.value=e}function Oa(e){const a=M.value.indexOf(e);a!==-1&&(M.value=M.value.toSpliced(a,1)),oe().delete(`/messages/${e.id}`).catch(console.error)}function Va(){M.value.forEach(e=>e.read=!0),oe().patch("/messages",{read:!0}).catch(console.error)}var Ba=Wt;S();var ge=I(!1);function qt(){return new Promise((e,a)=>{if(ge.value)return e();oe().get("/app_config").then(async({data:t})=>(t?.data||a("No data returned from API"),Ht(t.data.servers),jt(t.data.messages??[]),Me(t.data.notifications??[]),te({...P.value,locale:t.data.locale,name:t.data.name,avatarUrl:t.data.avatarUrl,features:t.data.features,moderator:!!t.data.moderator}),ge.value=!0,k.value.length===0?await y.replace({name:"No Servers"}).then(()=>e()):k.value.length===1?ee(k.value[0]):k.value.length>1&&localStorage.getItem("currentServer")?ee(k.value.find(o=>o.id===localStorage.getItem("currentServer"))):k.value.length>1&&await y.replace({name:"Select Server"}),e())).catch(t=>{a(t)})})}var Ft=qt;S();function Nt(){return x.accessToken?Promise.resolve():new Promise(e=>{re(T,t=>{t&&(x.setBaseUrl(t.serverBaseUrl),x.setAccessToken(P.value.accessToken))}),x.setBaseUrl(T.value?.serverBaseUrl),x.setAccessToken(P.value.accessToken);const a=Le("nmplayer-music-supports-audio-context",!1);a.value=!1,e()})}var zt=Nt;S();var Pe=I(!1);function Gt(){return new Promise(async(e,a)=>{if(Pe.value)return e();if(Pe.value=!0,!T.value||!P.value)return P.value.features??={},P.value.features.nomercyConnect=!1,e();let t=new q(T.value.serverBaseUrl,P.value.accessToken,"videoHub");return await t.setup(),le(t),setTimeout(()=>{re(T,async o=>{!o||!P.value||!t||(t.connection?.stop(),await t.dispose(),t=new q(o.serverBaseUrl,P.value.accessToken,"videoHub"),await t.setup(),le(t))})},5e3),e()})}var Qt=Gt;S();var Ee=I(!1);function $t(){return new Promise(async(e,a)=>{if(Ee.value)return e();if(Ee.value=!0,!T.value||!P.value||!P.value.features?.nomercyConnect)return P.value.features??={},P.value.features.nomercyConnect=!1,e();let t=new q(T.value.serverBaseUrl,P.value.accessToken,"musicHub");return await t.setup(),ue(t),setTimeout(()=>{re(T,async o=>{console.log("Current server changed, reinitializing music socket",o),!(!o||!P.value||!t)&&(t.connection?.stop(),await t.dispose(),t=new q(o.serverBaseUrl,P.value.accessToken,"musicHub"),await t.setup(),ue(t))})},5e3),e()})}var Kt=$t;S();var Y=I(!1);function Jt(){return new Promise((e,a)=>{if(Y.value){e();return}if(!T.value){e();return}F(5).get("permissions").then(({data:t})=>{ee({...T.value,is_owner:t.owner,is_manager:t.manager}),Y.value=!0,e()}).catch(async()=>{Y.value=!0,await y.replace({name:"Server offline"}).then(()=>e()),e()})})}var Xt=Jt;S();var j=I(!1);function Yt(){return new Promise((e,a)=>{if(j.value){e();return}if(Re.value){e();return}if(!T.value){e();return}F(5).get("dashboard/server/info").then(({data:t})=>{if(be.value=t.data?.setup_complete??!1,Re.value=!0,!t.data?.setup_complete){console.log("Server setup not complete, redirecting to post-installation page"),Se.value="/setup/post-install",y.replace({name:"Post Install"}).then(()=>e()),j.value=!0;return}j.value=!0,e()}).catch(async t=>{be.value=!0,j.value=!0,await y.replace({name:"Server offline"}).then(()=>a(t)),a(t)})})}var Zt=Yt;function ea(){return new Promise((e,a)=>{if(P.value?.id){e();return}try{const{isAuthenticated:t}=Z();if(t.value){const{keycloak:o,roles:v,token:f}=Z();return te({...P.value,accessToken:f.value}),o.value?.idTokenParsed&&te({...P.value,id:o.value?.idTokenParsed.sub,name:o.value?.idTokenParsed.display_name??o.value?.idTokenParsed?.name,email:o.value?.idTokenParsed?.email,moderator:v.value.includes("nova")}),e()}else He().then(()=>{t.value=!0,e()})}catch{a(new Error("Not authenticated"))}})}var ta={sequential:[ea,Ft],parallel:[Xt,Zt,xt],deferred:[zt,Qt,Kt]},aa=ta;async function ra(e,a){if(Array.isArray(e)){for(const t of e)await t().catch(o=>{throw new Error(o)});a?.();return}if(e.sequential)for(const t of e.sequential)await t().catch(o=>{throw new Error(o)});e.parallel&&await Promise.all(e.parallel.map(t=>t().catch(o=>{throw new Error(o)}))),a?.(),e.deferred&&queueMicrotask(()=>{Promise.all(e.deferred.map(t=>t().catch(console.error)))})}var N=je({history:qe("/"),routes:Dt});N.beforeResolve(async(e,a,t)=>{if(ae("capacitor")&&e.name!=="Auth"&&!P.value.accessToken){const{isAuthenticated:o}=Z();if(!o.value)return t({name:"Auth"})}if(e.name==="Auth")return t();await ra(aa,t).catch(()=>t({name:"Server offline"}))});St(N);Ct(N);var y=N;export{wa as C,Fe as E,Se as S,fa as T,Pa as _,ye as a,Ta as b,Ea as c,ga as d,Ra as f,Aa as g,ba as h,Oa as i,La as l,Mt as m,Va as n,ka as o,ya as p,Ba as r,Ht as s,y as t,Da as u,Sa as v,ie as w,Ia as x,_a as y};
