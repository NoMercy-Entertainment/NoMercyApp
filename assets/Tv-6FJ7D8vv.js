import"./useBaseQuery-BZQz3z8A.js";import"./useInfiniteServerClient-BCxG2thI.js";import"./useQueryClient-BLXB1-sS.js";import"./useQuery-DApaTASy.js";import{$r as E,Ds as x,Eo as H,Fc as m,Fs as i,H as v,Hs as o,Is as k,J as N,Ls as b,Mc as A,Mo as K,Mt as h,No as R,Oi as U,Os as g,Pc as O,Ps as G,Rs as c,Ss as J,St as C,Ws as W,X as _,Y as I,ac as n,ao as S,co as X,cr as T,fo as Y,gc as Q,go as w,io as Z,jc as e,ks as ee,lo as te,nc as ae,nr as q,oa as le,ro as d,sc as oe,uo as se,ut as re,vc as r,wc as P,ya as $}from"./index-KuPPtKVH.js";import"./basecomponent-BJgvoaJ3.js";import"./classnames-D1foEy1e.js";import"./button-D14Yol-n.js";import"./baseicon-Z4Cu0c0s.js";import{t as ie}from"./_plugin-vue_export-helper-Qq1ciMp2.js";import"./AppLogoSquare-LEL4bnwr.js";import{t as ne}from"./MoooomIcon-DSVopICf.js";import"./dist-DCgLXeVZ.js";import{t as ue}from"./useServerClient-C2R5fGYz.js";import{t as M}from"./CoverImage-CaVs5Qxz.js";import{t as ce}from"./MusicButton-gRnQwArK.js";import{t as F}from"./MediaLikeButton-BAZdX4is.js";import"./PlayerIcon-DPeNYL8B.js";import{t as de}from"./TrackLinks-Ddy7xzOe.js";import{t as fe}from"./Marquee-BHUCeo5x.js";import{t as pe}from"./EqSpinner-BLoQYClG.js";import{t as me}from"./BigPlayButton-DeDq0AgG.js";J();K();var ve={class:"w-available h-available absolute left-[202px] top-0 overflow-hidden bg-focus"},_e=["src"],be={class:"flex justify-center w-available aspect-square my-8 ml-8 mr-16"},we={key:0,class:"relative mb-8 flex w-full flex-1 flex-shrink-0 flex-col items-start justify-start gap-4 flex-grow-1 text-left"},ye=["innerHTML"],xe={key:1,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap"},ke={class:"flex items-center h-8 gap-2 self-stretch w-full text-xs font-medium text-left"},he={key:0,class:"flex gap-2"},ge={key:1,class:"flex gap-2"},Ce={class:"flex gap-2 items-center justify-between w-full"},Ie=["data-id","data-index","onClick"],Se={class:"flex w-available overflow-clip items-end"},Te=W({__name:"Tv",setup(qe){const L=R(),{data:l}=ue({path:L.fullPath});ae(()=>{l.value?.color_palette?.cover&&T(l.value?.color_palette?.cover),setTimeout(()=>{const s=document.querySelector(".focusable");s&&s.focus()},100)}),Q(l,s=>{s?.color_palette?.cover&&T(s?.color_palette?.cover),setTimeout(()=>{const t=document.querySelector(".focusable");t&&t.focus()},100)});const y=P(),z=P();H(()=>{setTimeout(()=>{const s=document.querySelector(".focusable");s&&s.focus()},100)});function B(s){const t=s.target,a=y.value?.getAttribute("data-index")??0,u=t.querySelector(`[data-index="${a}"] .focusable`);u&&u.focus()}function j(s){const t=s.target;y.value=t,t&&t.scrollIntoView({behavior:"smooth",block:"center"});const a=t.closest("[data-id]")?.getAttribute("data-id"),u=t.querySelector(`[data-index="${a}"] .focusable`);u&&u.focus()}function D(s){const t=s.target;if(s.key==="ArrowUp"){const a=(t.closest("ion-item")?.previousSibling).querySelector(".focusable");a&&(a.focus(),a.scrollIntoView({behavior:"smooth",block:"center"}))}else if(s.key==="ArrowDown"){const a=(t.closest("ion-item")?.nextSibling).querySelector(".focusable");a&&(a.focus(),a.scrollIntoView({behavior:"smooth",block:"center"}))}}const f=G(()=>`${l.value?.type?.replace(/s$/u,"")}/${l.value?.id}`);function V(s){if(l.value?.tracks){if(!le.value.features?.nomercyConnect){if(I.value===f.value){v.togglePlayback();return}v.playTrack(s,l.value?.tracks),C(f.value);return}if(N.value||h.value?.invoke("ChangeDeviceCommand",$.value).then(()=>{console.log("Switched to device:",$.value)}).catch(t=>{console.error("Error switching device:",t)}),h.value?.invoke("StartPlaybackCommand",l.value?.type.replace(/s$/u,""),l.value?.id,_.value?.id??s?.id),I.value===f.value){v.togglePlayback();return}v.playTrack(s,l.value?.tracks),C(f.value)}}return(s,t)=>(n(),k(e(Y),null,{default:r(()=>[o(e(Z),{fullscreen:!0},{default:r(()=>[(n(),c("div",{key:e(l)?.id,style:O(e(q)?`--color-theme-8: ${e(q)}`:""),class:"w-full h-full absolute left-0 top-0 bg-[#131314] pointer-events-none -z-10"},[i("div",ve,[i("img",{src:`${e(U)?.serverBaseUrl}${e(l)?.backdrop??e(l)?.cover}`,alt:"",class:"w-available h-available absolute left-[-0.39px] top-[-0.39px] opacity-40 object-cover object-center"},null,8,_e),t[5]||(t[5]=i("div",{class:"w-[150vw] h-[150vw] absolute left-[-30%] bottom-[-50%]",style:{background:`radial-gradient(
                closest-side,
                rgba(19, 19, 20, 0.1) 0%,
                rgba(19, 19, 20, 1) 70.73974609375%
              )`}},null,-1))])],4)),o(e(S),null,{default:r(()=>[o(e(w),{class:"ion-align-items-end"},{default:r(()=>[o(e(d),{size:"3"},{default:r(()=>[i("div",be,[o(M,{alt:e(l)?.name,data:e(l),class:"w-auto h-full aspect-square"},null,8,["alt","data"])]),e(l)?.name?(n(),c("div",we,[e(l).name.length>50?(n(),c("div",{key:0,class:"w-full text-xl font-semibold line-clamp-2 leading-[130%] whitespace-pre-wrap",innerHTML:e(E)(e(l)?.name??"Songs you like","text-xs line-clamp-1")},null,8,ye)):(n(),c("p",xe,m(e(l)?.name),1)),i("div",ke,[e(l)?.type?(n(),c("span",he,[i("span",null,m(e(l)?.type.replace(/s$/u,"").toTitleCase()),1)])):b("",!0),e(l)?.tracks?(n(),c("span",ge,[t[6]||(t[6]=i("span",null,"â€¢",-1)),i("span",null,m(e(l)?.tracks.length)+" "+m(s.$t("tracks")),1)])):b("",!0)]),i("div",Ce,[o(F,{data:e(l)},null,8,["data"]),o(me,{data:e(l),class:"w-12 h-12 ml-auto"},null,8,["data"])])])):b("",!0)]),_:1}),o(e(d),{ref_key:"scrollContainer",ref:z,class:"w-full h-available overflow-auto scroll-smooth",size:"6",tabindex:"0",onFocus:t[4]||(t[4]=a=>B(a))},{default:r(()=>[o(e(se),{lines:"none",mode:"md"},{default:r(()=>[(n(!0),c(ee,null,oe(e(l)?.tracks,(a,u)=>(n(),k(e(X),{key:a.id+a?.favorite,class:"group/track focus-within:bg-white/4 rounded-md overflow-clip",mode:"md",tabindex:"-1"},{default:r(()=>[o(e(S),null,{default:r(()=>[o(e(w),{"data-id":a.id,"data-index":u,class:"items-center !rounded-md !overflow-clip",tabindex:"-1"},{default:r(()=>[o(e(d),{size:"2",tabindex:"-1"},{default:r(()=>[i("button",{"data-id":a.id,"data-index":u,class:"focusable flex justify-center w-full aspect-video focus:outline outline-focus outline-2 outline-offset-2 mr-2 overflow-clip",tabindex:"0",onClick:p=>V(a),onFocus:t[0]||(t[0]=p=>j(p))},[o(M,{alt:a.name,data:a,class:"w-auto h-full aspect-square"},null,8,["alt","data"])],40,Ie)]),_:2},1024),o(e(d),{class:"my-auto mt-2",size:"8",tabindex:"-1"},{default:r(()=>[o(e(te),{tabindex:"-1"},{default:r(()=>[i("div",Se,[i("div",{class:A([{"w-0":e(_)?.id!==a.id,"w-6 mr-1":e(_)?.id===a.id},"flex items-center justify-center h-full aspect-square overflow-clip transition-width duration-200"])},[o(pe,{playing:e(re)},null,8,["playing"])],2),o(fe,{playing:!!e(_)?.id,text:a.name,class:"!w-[calc(100%-30px)] children:leading-none w-available overflow-clip"},null,8,["playing","text"])]),o(de,{id:a.id,data:a.artist_track,suffix:"track",type:"artists",onKeyup:t[1]||(t[1]=p=>D(p)),onKeydown:[t[2]||(t[2]=x(g(()=>{},["prevent"]),["up"])),t[3]||(t[3]=x(g(()=>{},["prevent"]),["down"]))]},null,8,["id","data"])]),_:2},1024)]),_:2},1024),o(e(d),{class:"opacity-0 group-focus-within/track:opacity-100 -ml-2",size:"2",tabindex:"-1"},{default:r(()=>[o(e(w),{class:"flex flex-nowrap",tabindex:"-1"},{default:r(()=>[o(F,{data:a},null,8,["data"]),o(ce,{onclick:()=>{},class:"!bg-transparent mr-2",label:"",tabindex:"0"},{default:r(()=>[o(ne,{class:"text-white",icon:"menuDotsHorizontal"})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1032,["data-id","data-index"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}))}}),Ye=ie(Te,[["__scopeId","data-v-53ed80d4"]]);export{Ye as default};
