const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-F08gofix.js","assets/icons-BW5E66pf.js","assets/rxjs-BCp2L9Rn.js","assets/media-C2AqgyMX.js","assets/BaseLayout-hzY3m2ws.js","assets/vue-ionic-Cv2or74p.js","assets/api-BBofn2cc.js","assets/swiper-DhG1br88.js","assets/swiper-DHBATib1.css","assets/vue-ionic-cyRXqAUn.css","assets/primevue-JgeSHwCi.js","assets/contextMenuItems-qz4aCWlg.js","assets/musicPlaylists-C8dhy1GW.js","assets/Indexer-amvBjLNy.js","assets/scrollHandlers-BeusDcqi.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/Indexer-62jgfa62.css","assets/ShuffleButton.vue_vue_type_script_setup_true_lang-8E93WSmv.js","assets/imageModal-D23ADPBU.js","assets/AppLogoSquare-DwFk-Amv.js","assets/OptimizedIcon.vue_vue_type_script_setup_true_lang-Bi-0Ik3i.js","assets/TMDBImage.vue_vue_type_script_setup_true_lang-BqmXtdc4.js","assets/MusicButton.vue_vue_type_script_setup_true_lang-BwwPPEOd.js","assets/PlayerIcon.vue_vue_type_script_setup_true_lang-DTv9DYkH.js","assets/SliderBar.vue_vue_type_script_setup_true_lang-DvP4DqGF.js","assets/DropdownMenu.vue_vue_type_script_setup_true_lang-2HQRta31.js","assets/NoMercyAvatar.vue_vue_type_script_setup_true_lang-i3T4PwO7.js","assets/KeepCounting.vue_vue_type_script_setup_true_lang-C9-0SxaW.js","assets/colorScheme-B7H1zW-i.js","assets/ChristmasSnow.vue_vue_type_script_setup_true_lang-DvB20DCN.js","assets/ScrollContainer.vue_vue_type_script_setup_true_lang-DmZoFWtF.js","assets/Button.vue_vue_type_script_setup_true_lang-BDrzJc8T.js","assets/ChristmasSnow-RFWJfUZL.css","assets/Toggle-vHAM8dAO.js","assets/Toggle-Cce-JU1o.css","assets/AppLogo-DfeWhfbA.js","assets/useServerClient-Xl1-e1V_.js","assets/useInfiniteServerClient-B2dLGr_D.js","assets/sidebar-C7UUgLgA.js","assets/konami-C_D1eLem.js","assets/search-BmPcYzjb.js","assets/RipperOverlay.vue_vue_type_script_setup_true_lang-BAbiSAC9.js","assets/useMounted-CS-UU_bv.js","assets/CoverImage.vue_vue_type_script_setup_true_lang-DpZYITWV.js","assets/MediaLikeButton-DMIqvHI1.js","assets/MediaLikeButton-hc_m1dZw.css","assets/TrackLinks.vue_vue_type_script_setup_true_lang-qACZJEWy.js","assets/LyricsButton.vue_vue_type_script_setup_true_lang-9OnhP0FF.js","assets/Marquee.vue_vue_type_script_setup_true_lang-Bpl_f79J.js","assets/music-player-Dgg5bFLw.js","assets/BaseLayout-BrzfSSIq.css","assets/BaseLayout-C56R_pGd.js","assets/BaseLayout-BjDtyKnh.css","assets/BaseLayout-CD3fF46K.js","assets/EqSpinner-9noyKjt9.js","assets/EqSpinner-CW1Lp7Cr.css","assets/BaseLayout-T--DId4X.css","assets/Desktop-DspuB7nz.js","assets/NMComponent.vue_vue_type_script_setup_true_lang-BwUQIF-P.js","assets/routerHelper-BnJee-RO.js","assets/Mobile-BHIL_IcS.js","assets/Tv-BB41EQJa.js","assets/ContentRating.vue_vue_type_script_setup_true_lang-DDDpvR3h.js","assets/index-CIFV2Jeu.js","assets/index-CjzmaSgi.js","assets/Logout-oVb4LjN7.js","assets/ExploreContainer-DtxG91yI.js","assets/ExploreContainer-D8kyI-AX.css","assets/index-dyloFV7_.js","assets/index-KP5Z3Ahq.js","assets/index-CSYaeXh_.js","assets/index-CDrvkuV3.js","assets/index-BQ4mgza-.js","assets/index-FREZQ-Ku.js","assets/index-DHppfXH8.js","assets/index-SixyUBFJ.js","assets/index-BxHPsNnO.js","assets/index-DVQBbJMV.js","assets/index-Ba4eEttA.js","assets/index-B8GVdbyJ.js","assets/index-CmL9LGly.js","assets/index-HrVZL402.js","assets/index-G_lZOrul.js","assets/index-BjzimtO9.js","assets/index-CKE2ftx7.js","assets/index-CyYZizeF.js","assets/index-gR7g_41B.js","assets/index-ByxphXJH.js","assets/index-B_el_lMd.js","assets/index-BDiwVBUP.js","assets/index-DMERbfet.js","assets/index-DVA7f22p.js","assets/index-CmFK992g.js","assets/index-C1CDMxW9.js","assets/index-DBRGF_vX.js","assets/index-CPwt5c9_.js","assets/index-BsXmzMim.js","assets/index-C0YpbMZC.js","assets/index-C0VmGrXa.js","assets/index-Biu03Ymh.js","assets/index-wnC0kDP6.js","assets/Dashboard-Dgzxo0o9.js","assets/Dashboard-B7GgrZc-.css","assets/index-CqRL2aka.js","assets/index-CFMb_NNV.js","assets/index-VfnBFHmI.js","assets/index-BmfydjoP.js","assets/Edit-DyXHTtNv.js","assets/DashboardLayout.vue_vue_type_script_setup_true_lang-CwxBp8CJ.js","assets/FloatingBackButton.vue_vue_type_script_setup_true_lang-CVjaNhNF.js","assets/Button.vue_vue_type_script_setup_true_lang-R7-60zhu.js","assets/Modal.vue_vue_type_script_setup_true_lang-BFuGhVNW.js","assets/useApiClient-BHdEKNCm.js","assets/Select.vue_vue_type_script_setup_true_lang-C3DeV5g1.js","assets/Edit-MzWlH1vl.js","assets/LanguageSelect.vue_vue_type_script_setup_true_lang-DIVeKh7q.js","assets/NoResultImage.vue_vue_type_script_setup_true_lang-CQ9QZMn1.js","assets/Edit-DkxIHIJN.js","assets/Show-872BsZbL.js","assets/ActivityCard.vue_vue_type_script_setup_true_lang-3QHDJCQ3.js","assets/Edit-B6WXrd1j.js","assets/setupApp-huJj0fgG.js","assets/BannerButton.vue_vue_type_script_setup_true_lang-BkmQAM_r.js","assets/CardShadow.vue_vue_type_script_setup_true_lang-CoZxwqh-.js","assets/CardIndicator.vue_vue_type_script_setup_true_lang-BJQGYOzk.js","assets/swiper-config-Bu9mHf7T.js","assets/MusicCardImage.vue_vue_type_script_setup_true_lang-7awPRL7B.js","assets/FavoriteImage.vue_vue_type_script_setup_true_lang-BfrIwTIQ.js","assets/TrackLinks.vue_vue_type_script_setup_true_lang-DdBA3qA5.js","assets/BigPlayButton.vue_vue_type_script_setup_true_lang-SsVuvdg3.js","assets/setupApp-C59II3Tm.css","assets/index-CCspTCH-.js","assets/index-CmT2ghPr.js"])))=>i.map(i=>d[i]);
var C=Object.defineProperty;var E=(e,a,r)=>a in e?C(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r;var _=(e,a,r)=>E(e,typeof a!="symbol"?a+"":a,r);import{_ as __vitePreload}from"./icons-BW5E66pf.js";import{O as useMediaQuery,P as useLocalStorage,d as ref,Q as isPlatform,C as computed,R as toRaw,w as watch,G as reactive,S as toRefs,U as useOnline,V as QueryClient,W as createRouter,X as createWebHistory,Y as defineComponent,c as createBlock,o as openBlock,l as withCtx,i as createBaseVNode,y as createVNode,t as normalizeClass,Z as unref,_ as IonRouterOutlet,$ as IonApp,a0 as createApp,a1 as init}from"./vue-ionic-Cv2or74p.js";import{aZ as Device,a_ as uaParserExports,a$ as App,b0 as Preferences,b1 as StatusBar,b2 as AndroidFullScreen,b3 as AndroidSystemUiFlags,b4 as jwtDecode$1,aY as Keycloak,b5 as hexToRgba,b6 as hsvaToHex,b7 as instance,b8 as Backend,b9 as t$1,ba as VolumeButtons,bb as HubConnectionBuilder,bc as HttpTransportType,bd as LogLevel}from"./vendor-F08gofix.js";import{d as axios}from"./api-BBofn2cc.js";import{M as MusicPlayer}from"./music-player-Dgg5bFLw.js";import"./media-C2AqgyMX.js";import"./swiper-DhG1br88.js";import"./rxjs-BCp2L9Rn.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();const isTv=useMediaQuery("(width: 960px) and (height: 540px)"),tvModeOverride=useLocalStorage("tvModeOverride",!1),isMobile=ref((isPlatform("mobile")||isPlatform("mobileweb"))&&!isPlatform("ipad")),nativeOverride=useLocalStorage("nativeOverride",!1),isNative=computed(()=>isPlatform("cordova")||isPlatform("pwa")||nativeOverride.value),dashboardCardGrid=ref("grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 3xl:grid-cols-7 5xl:grid-cols-10"),dashboardBigCardGrid=ref("grid grid-cols-1 xl:grid-cols-3"),dashboardColumnGrid=ref("grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-6 5xl:grid-cols-10"),purple="#94f",blue="#39f",green="#4b4",orange="#f90",red="#f44",gray="#999",isDarkMode=ref(document.body.parentElement.classList.contains("scheme-dark")),genreColors=e=>{let a,r,n;switch(e){case"Action & Adventure":a="text-auto-1 dark:text-grass-dark-12/12 bg-grass-light-11/10 dark:bg-grass-dark-5 border-grass-light-8 dark:border-grass-dark-8 text-grass-light-12 hover:bg-grass-light-9/10 hover:dark:bg-grass-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-grass-6))]",n="lightning",r="!bg-grass-light-6 dark:!bg-grass-dark-4 group-hover/card:!bg-grass-light-7 dark:group-hover/card:!bg-grass-dark-5";break;case"Action":a="text-auto-1 dark:text-orange-dark-12/12 bg-orange-light-11/10 dark:bg-orange-dark-5 border-orange-light-8 dark:border-orange-dark-8 text-orange-light-12 hover:bg-orange-light-9/10 hover:dark:bg-orange-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-orange-6))]",n="muscle",r="!bg-orange-light-6 dark:!bg-orange-dark-4 group-hover/card:!bg-orange-light-7 dark:group-hover/card:!bg-orange-dark-5";break;case"Adventure":a="text-auto-1 dark:text-gold-dark-12/12 bg-gold-light-11/10 dark:bg-gold-dark-5 border-gold-light-8 dark:border-gold-dark-8 text-gold-light-12 hover:bg-gold-light-9/10 hover:dark:bg-gold-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-gold-6))]",n="mapClue",r="!bg-gold-light-6 dark:!bg-gold-dark-4 group-hover/card:!bg-gold-light-7 dark:group-hover/card:!bg-gold-dark-5";break;case"Animation":a="text-auto-1 dark:text-cyan-dark-12/12 bg-cyan-light-11/10 dark:bg-cyan-dark-5 border-cyan-light-8 dark:border-cyan-dark-8 text-cyan-light-12 hover:bg-cyan-light-9/10 hover:dark:bg-cyan-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-cyan-6))]",n="designerTools",r="!bg-cyan-light-6 dark:!bg-cyan-dark-4 group-hover/card:!bg-cyan-light-7 dark:group-hover/card:!bg-cyan-dark-5";break;case"Comedy":a="text-auto-1 dark:text-purple-dark-12/12 bg-purple-light-11/10 dark:bg-purple-dark-5 border-purple-light-8 dark:border-purple-dark-8 text-purple-light-12 hover:bg-purple-light-9/10 hover:dark:bg-purple-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-purple-6))]",n="openSmile",r="!bg-purple-light-6 dark:!bg-purple-dark-4 group-hover/card:!bg-purple-light-7 dark:group-hover/card:!bg-purple-dark-5";break;case"Crime":a="text-auto-1 dark:text-tomato-dark-12/12 bg-tomato-light-11/10 dark:bg-tomato-dark-5 border-tomato-light-8 dark:border-tomato-dark-8 text-tomato-light-12 hover:bg-tomato-light-9/10 hover:dark:bg-tomato-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-tomato-6))]",n="chefKnife",r="!bg-tomato-light-6 dark:!bg-tomato-dark-4 group-hover/card:!bg-tomato-light-7 dark:group-hover/card:!bg-tomato-dark-5";break;case"Documentary":a="text-auto-1 dark:text-gray-dark-12/12 bg-gray-light-11/10 dark:bg-gray-dark-5 border-gray-light-8 dark:border-gray-dark-8 text-gray-light-12 hover:bg-gray-light-9/10 hover:dark:bg-gray-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-gray-6))]",n="folderOpen",r="!bg-gray-light-6 dark:!bg-gray-dark-4 group-hover/card:!bg-gray-light-7 dark:group-hover/card:!bg-gray-dark-5";break;case"Drama":a="text-auto-1 dark:text-pink-dark-12/12 bg-pink-light-11/10 dark:bg-pink-dark-5 border-pink-light-8 dark:border-pink-dark-8 text-pink-light-12 hover:bg-pink-light-9/10 hover:dark:bg-pink-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-pink-6))]",n="sweatSmile",r="!bg-pink-light-6 dark:!bg-pink-dark-4 group-hover/card:!bg-pink-light-7 dark:group-hover/card:!bg-pink-dark-5";break;case"Family":a="text-auto-1 dark:text-indigo-dark-12/12 bg-indigo-light-11/10 dark:bg-indigo-dark-5 border-indigo-light-8 dark:border-indigo-dark-8 text-indigo-light-12 hover:bg-indigo-light-9/10 hover:dark:bg-indigo-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-indigo-6))]",n="multiUsers",r="!bg-indigo-light-6 dark:!bg-indigo-dark-4 group-hover/card:!bg-indigo-light-7 dark:group-hover/card:!bg-indigo-dark-5";break;case"Fantasy":a="text-auto-1 dark:text-green-dark-12/12 bg-green-light-11/10 dark:bg-green-dark-5 border-green-light-8 dark:border-green-dark-8 text-green-light-12 hover:bg-green-light-9/10 hover:dark:bg-green-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-green-6))]",n="witchHat",r="!bg-green-light-6 dark:!bg-green-dark-4 group-hover/card:!bg-green-light-7 dark:group-hover/card:!bg-green-dark-5";break;case"History":a="text-auto-1 dark:text-brown-dark-12/12 bg-brown-light-11/10 dark:bg-brown-dark-5 border-brown-light-8 dark:border-brown-dark-8 text-brown-light-12 hover:bg-brown-light-9/10 hover:dark:bg-brown-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-brown-6))]",n="paperScroll",r="!bg-brown-light-6 dark:!bg-brown-dark-4 group-hover/card:!bg-brown-light-7 dark:group-hover/card:!bg-brown-dark-5";break;case"Horror":a="text-auto-1 dark:text-red-dark-12/12 bg-red-light-11/10 dark:bg-red-dark-5 border-red-light-8 dark:border-red-dark-8 text-red-light-12 hover:bg-red-light-9/10 hover:dark:bg-red-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-red-6))]",n="ghost",r="!bg-red-light-6 dark:!bg-red-dark-4 group-hover/card:!bg-red-light-7 dark:group-hover/card:!bg-red-dark-5";break;case"Kids":a="text-auto-1 dark:text-blue-dark-12/12 bg-blue-light-11/10 dark:bg-blue-dark-5 border-blue-light-8 dark:border-blue-dark-8 text-blue-light-12 hover:bg-blue-light-9/10 hover:dark:bg-blue-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-blue-6))]",n="mouse",r="!bg-blue-light-6 dark:!bg-blue-dark-4 group-hover/card:!bg-blue-light-7 dark:group-hover/card:!bg-blue-dark-5";break;case"Music":a="text-auto-1 dark:text-amber-dark-12/12 bg-amber-light-11/10 dark:bg-amber-dark-5 border-amber-light-8 dark:border-amber-dark-8 text-amber-light-12 hover:bg-amber-light-9/10 hover:dark:bg-amber-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-amber-6))]",n="noteSixteenthPair",r="!bg-amber-light-6 dark:!bg-amber-dark-4 group-hover/card:!bg-amber-light-7 dark:group-hover/card:!bg-amber-dark-5";break;case"Mystery":a="text-auto-1 dark:text-teal-dark-12/12 bg-teal-light-11/10 dark:bg-teal-dark-5 border-teal-light-8 dark:border-teal-dark-8 text-teal-light-12 hover:bg-teal-light-9/10 hover:dark:bg-teal-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-teal-6))]",n="footPrint",r="!bg-teal-light-6 dark:!bg-teal-dark-4 group-hover/card:!bg-teal-light-7 dark:group-hover/card:!bg-teal-dark-5";break;case"News":a="text-auto-1 dark:text-red-dark-12/12 bg-red-light-11/10 dark:bg-red-dark-5 border-red-light-8 dark:border-red-dark-8 text-red-light-12 hover:bg-red-light-9/10 hover:dark:bg-red-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-red-6))]",n="globe",r="!bg-red-light-6 dark:!bg-red-dark-4 group-hover/card:!bg-red-light-7 dark:group-hover/card:!bg-red-dark-5";break;case"Reality":a="text-auto-1 dark:text-sky-dark-12/12 bg-sky-light-11/10 dark:bg-sky-dark-5 border-sky-light-8 dark:border-sky-dark-8 text-sky-light-12 hover:bg-sky-light-9/10 hover:dark:bg-sky-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-sky-6))]",n="eye",r="!bg-sky-light-6 dark:!bg-sky-dark-4 group-hover/card:!bg-sky-light-7 dark:group-hover/card:!bg-sky-dark-5";break;case"Romance":a="text-auto-1 dark:text-crimson-dark-12/12 bg-crimson-light-11/10 dark:bg-crimson-dark-5 border-crimson-light-8 dark:border-crimson-dark-8 text-crimson-light-12 hover:bg-crimson-light-9/10 hover:dark:bg-crimson-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-crimson-6))]",n="bubbles",r="!bg-crimson-light-6 dark:!bg-crimson-dark-4 group-hover/card:!bg-crimson-light-7 dark:group-hover/card:!bg-crimson-dark-5";break;case"Sci-Fi & Fantasy":a="text-auto-1 dark:text-blue-dark-12/12 bg-blue-light-11/10 dark:bg-blue-dark-5 border-blue-light-8 dark:border-blue-dark-8 text-blue-light-12 hover:bg-blue-light-9/10 hover:dark:bg-blue-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-blue-6))]",n="ussEnterprise",r="!bg-blue-light-6 dark:!bg-blue-dark-4 group-hover/card:!bg-blue-light-7 dark:group-hover/card:!bg-blue-dark-5";break;case"Science Fiction":a="text-auto-1 dark:text-sky-dark-12/12 bg-sky-light-11/10 dark:bg-sky-dark-5 border-sky-light-8 dark:border-sky-dark-8 text-sky-light-12 hover:bg-sky-light-9/10 hover:dark:bg-sky-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-sky-6))]",n="rocket",r="!bg-sky-light-6 dark:!bg-sky-dark-4 group-hover/card:!bg-sky-light-7 dark:group-hover/card:!bg-sky-dark-5";break;case"Soap":a="text-auto-1 dark:text-violet-dark-12/12 bg-violet-light-11/10 dark:bg-violet-dark-5 border-violet-light-8 dark:border-violet-dark-8 text-violet-light-12 hover:bg-violet-light-9/10 hover:dark:bg-violet-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-violet-6))]",n="bubbles",r="!bg-violet-light-6 dark:!bg-violet-dark-4 group-hover/card:!bg-violet-light-7 dark:group-hover/card:!bg-violet-dark-5";break;case"Talk":a="text-auto-1 dark:text-slate-dark-12/12 bg-slate-light-11/10 dark:bg-slate-dark-5 border-slate-light-8 dark:border-slate-dark-8 text-slate-light-12 hover:bg-slate-light-9/10 hover:dark:bg-slate-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-slate-6))]",n="megaphone",r="!bg-slate-light-6 dark:!bg-slate-dark-4 group-hover/card:!bg-slate-light-7 dark:group-hover/card:!bg-slate-dark-5";break;case"Thriller":a="text-auto-1 dark:text-mauve-dark-12/12 bg-mauve-light-11/10 dark:bg-mauve-dark-5 border-mauve-light-8 dark:border-mauve-dark-8 text-mauve-light-12 hover:bg-mauve-light-9/10 hover:dark:bg-mauve-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-mauve-6))]",n="searchMagnifyingGlass",r="!bg-mauve-light-6 dark:!bg-mauve-dark-4 group-hover/card:!bg-mauve-light-7 dark:group-hover/card:!bg-mauve-dark-5";break;case"TV Movie":a="text-auto-1 dark:text-yellow-dark-12/12 bg-yellow-light-11/10 dark:bg-yellow-dark-5 border-yellow-light-8 dark:border-yellow-dark-8 text-yellow-light-12 hover:bg-yellow-light-9/10 hover:dark:bg-yellow-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-yellow-6))]",n="tv",r="!bg-yellow-light-6 dark:!bg-yellow-dark-4 group-hover/card:!bg-yellow-light-7 dark:group-hover/card:!bg-yellow-dark-5";break;case"War & Politics":a="text-auto-1 dark:text-sand-dark-12/12 bg-sand-light-11/10 dark:bg-sand-dark-5 border-sand-light-8 dark:border-sand-dark-8 text-sand-light-12 hover:bg-sand-light-9/10 hover:dark:bg-sand-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-sand-6))]",n="medal",r="!bg-sand-light-6 dark:!bg-sand-dark-4 group-hover/card:!bg-sand-light-7 dark:group-hover/card:!bg-sand-dark-5";break;case"War":a="text-auto-1 dark:text-green-dark-12/12 bg-green-light-11/10 dark:bg-green-dark-5 border-green-light-8 dark:border-green-dark-8 text-green-light-12 hover:bg-green-light-9/10 hover:dark:bg-green-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-green-6))]",n="gun",r="!bg-green-light-6 dark:!bg-green-dark-4 group-hover/card:!bg-green-light-7 dark:group-hover/card:!bg-green-dark-5";break;case"Western":a="text-auto-1 dark:text-yellow-dark-12/12 bg-yellow-light-11/10 dark:bg-yellow-dark-5 border-yellow-light-8 dark:border-yellow-dark-8 text-yellow-light-12 hover:bg-yellow-light-9/10 hover:dark:bg-yellow-dark-6 hover:shadow-[0px_0px_0_3px_rgb(var(--color-yellow-6))]",n="cowboyHat",r="!bg-yellow-light-6 dark:!bg-yellow-dark-4 group-hover/card:!bg-yellow-light-7 dark:group-hover/card:!bg-yellow-dark-5";break;default:a=" default-background",n="bat",r=""}return{bg:a,iconBg:r,icon:n}},media_types=[{title:"Anime",value:"anime"},{title:"Movie",value:"movie"},{title:"TV Show",value:"tv"},{title:"Music",value:"music"},{title:"Images",value:"image"},{title:"Audio Books",value:"audiobook"}],greetingValue=computed(()=>{const e=new Date().getHours();switch(!0){case(e>=6&&e<12):return"Morning";case(e>=12&&e<18):return"Afternoon";case(e>=18&&e<24):return"Evening";case(e>=24||e<6):return"Night"}return"Day"});console.raw=(...e)=>{console.log(...e.map(a=>toRaw(a)))};(async()=>{const e=await Device.getId().then(a=>a.identifier);console.raw({isTv:isTv.value,tvModeOverride:tvModeOverride.value,isMobile:isMobile.value,isNativeMobile:isPlatform("mobile"),isWebMobile:isPlatform("mobileweb"),isNative:isNative.value,nativeOverride:nativeOverride.value,isDarkMode:isDarkMode.value,greetingValue:greetingValue.value,device_id:e})})();watch([isTv,tvModeOverride],()=>{location.reload()});const res=new uaParserExports.UAParser().getResult(),makeDeviceInfo=async()=>{var o,s;const e=await Device.getInfo();let a="";switch(e.platform){case"android":a=e.platform,isPlatform("tablet")&&(a="tablet"),isTv.value&&(a="tv");break;case"ios":a=e.platform,isPlatform("tablet")&&(a="tablet");break;case"web":a=e.platform,isPlatform("tablet")&&(a="tablet"),isPlatform("electron")&&(a="desktop"),isPlatform("mobileweb")&&(a="android");break;default:a=e.platform}const r=e.name??localStorage.getItem("CapacitorStorage.deviceName")??localStorage.getItem("CapacitorStorage.deviceId")??deviceId.value,n=useLocalStorage("nmplayer-music-volume",100);return{id:localStorage.getItem("CapacitorStorage.deviceId")??deviceId.value,browser:`${(o=res.browser)==null?void 0:o.name} ${(s=res.browser)==null?void 0:s.version}`,os:`${e.model.toLowerCase().includes(e.operatingSystem.toLowerCase())?"":e.operatingSystem} ${e.osVersion}`.trim(),device:e.manufacturer?`${e.manufacturer} ${e.model}`:"",type:a,name:r,version:"0.0.1",volume_percent:n.value}},ai=ref(),appInfo=computed(()=>ai.value),di=ref(),deviceInfo=computed(()=>di.value),ci=ref(),clientInfo=computed(()=>ci.value),bi=ref(),batteryInfo=computed(()=>bi.value),as=ref();computed(()=>as.value);const deviceName=useLocalStorage("deviceName","");function setDeviceName(e){deviceName.value=e,Preferences.set({key:"deviceName",value:e}).then()}const getDeviceName=async()=>{var r;const e=await Device.getId().then(n=>n.identifier),a=(await Preferences.get({key:"deviceName"})).value??((r=deviceInfo.value)==null?void 0:r.name)??e;setDeviceName(a)},deviceId=useLocalStorage("deviceId","");function setDeviceId(e){deviceId.value=e,Preferences.set({key:"deviceId",value:e}).then()}const getDeviceId=async()=>{const e=await Device.getId().then(a=>a.identifier);setDeviceId(e)};(async()=>(await getDeviceName(),await getDeviceId(),di.value=await Device.getInfo(),ci.value=await makeDeviceInfo(),isPlatform("capacitor")&&isPlatform("android")&&(ai.value=await App.getInfo(),bi.value=await Device.getBatteryInfo()),await App.addListener("appStateChange",e=>{as.value=e}),console.log({appInfo:toRaw(appInfo.value),deviceInfo:toRaw(deviceInfo.value),batteryInfo:toRaw(batteryInfo.value)})))();const episodeCounter=e=>{let a=0,r=0;return e&&(e!=null&&e.number_of_items)&&(a=e.number_of_items??0,r=e.have_items??0,r=r>=0?r:0),{number_of_items:a,have_items:r}},scrollIntoView=e=>{const r=e??document.activeElement.parentElement,n=document.activeElement.getBoundingClientRect().top+document.activeElement.getBoundingClientRect().height/2-r.offsetHeight/3,o=r.scrollTop,s=performance.now();function i(d){const g=d-s,m=Math.min(g/300,1);r.scrollTo(o+n*m,0),g<300&&requestAnimationFrame(i)}requestAnimationFrame(i)},scrollCenter=(e,a,r)=>{if(!e||!a)return;const n=(r==null?void 0:r.duration)||60,o=a.getBoundingClientRect(),s=e.getBoundingClientRect(),i=s.top+s.height/2,d=o.top+o.height/2,g=i-d,m=a.scrollTop+g,h=a.scrollTop,f=performance.now();function k(P){const y=P-f,w=Math.min(y/n,1),v=h+(m-h)*w;a.scrollTo(0,Math.floor(v)),y<n&&requestAnimationFrame(k)}requestAnimationFrame(k)},shouldMarquee=e=>{var o,s;const a=e.querySelector('[data-marquee="scroller"]');a.style.removeProperty("--marquee-width"),a.classList.remove("animate-marquee");const r=((o=e.getBoundingClientRect())==null?void 0:o.width)??0,n=((s=a.getBoundingClientRect())==null?void 0:s.width)??0;r<n?(a.style.setProperty("--marquee-width",`${r}px`),a.classList.add("animate-marquee")):(a.style.removeProperty("--marquee-width"),a.classList.remove("animate-marquee"))},stopPropagation=e=>e.stopPropagation(),lockPortrait=async()=>{if(isPlatform("capacitor")&&!isTv.value){const{ScreenOrientation:e}=await __vitePreload(async()=>{const{ScreenOrientation:a}=await import("./vendor-F08gofix.js").then(r=>r.bs);return{ScreenOrientation:a}},__vite__mapDeps([0,1,2,3]));try{e.lock({orientation:"portrait"}).then()}catch{}}},lockLandscape=async()=>{if(isPlatform("capacitor")&&!isTv.value){const{ScreenOrientation:e}=await __vitePreload(async()=>{const{ScreenOrientation:a}=await import("./vendor-F08gofix.js").then(r=>r.bs);return{ScreenOrientation:a}},__vite__mapDeps([0,1,2,3]));try{e.lock({orientation:"landscape"}).then()}catch{}}},unlockOrientation=async()=>{if(isPlatform("capacitor")){const{ScreenOrientation:e}=await __vitePreload(async()=>{const{ScreenOrientation:a}=await import("./vendor-F08gofix.js").then(r=>r.bs);return{ScreenOrientation:a}},__vite__mapDeps([0,1,2,3]));try{e.unlock().then()}catch{}}},timeout$1=ref(),isLeanModeEnabled=ref(!1),enableImmersiveMode=async()=>{isPlatform("capacitor")&&!isTv.value&&!isLeanModeEnabled.value&&(isLeanModeEnabled.value=!0,window.addEventListener("touchstart",listener),listener(),await AndroidFullScreen.setSystemUiVisibility(AndroidSystemUiFlags.LayoutHideNavigation|AndroidSystemUiFlags.HideNavigation|AndroidSystemUiFlags.LayoutFullscreen|AndroidSystemUiFlags.LayoutStable|AndroidSystemUiFlags.Fullscreen),await StatusBar.setOverlaysWebView({overlay:!0}))},disableImmersiveMode=()=>{isPlatform("capacitor")&&!isTv.value&&isLeanModeEnabled.value&&(isLeanModeEnabled.value=!1,window.removeEventListener("touchstart",listener),clearInterval(timeout$1.value),StatusBar.show().then(),AndroidFullScreen.showSystemUI().then(),StatusBar.setOverlaysWebView({overlay:!0}).then())},listener=()=>{clearInterval(timeout$1.value),timeout$1.value=setInterval(async()=>{await AndroidFullScreen.setSystemUiVisibility(AndroidSystemUiFlags.LayoutHideNavigation|AndroidSystemUiFlags.HideNavigation|AndroidSystemUiFlags.LayoutFullscreen|AndroidSystemUiFlags.LayoutStable|AndroidSystemUiFlags.Fullscreen)},3e3)},clicks=ref(0),timer=ref(),delay=300,onDoubleClick=(e,a,r)=>{clicks.value++,clicks.value===1?timer.value=setTimeout(()=>{clicks.value=0},delay):(clearTimeout(timer.value),r==null||r(e),clicks.value=0)},u=ref({accessToken:localStorage.getItem("access_token")||"",refreshToken:localStorage.getItem("refresh_token")||"",idToken:localStorage.getItem("id_token")||""}),user=computed(()=>u.value),testUserToken=ref("test"),keycloak=ref({}),setUser=e=>{u.value=e},setUserFromKeycloak=e=>{if(!e){alert("No user found");return}if(!e.tokenParsed){alert("No token parsed");return}keycloak.value=e,localStorage.setItem("access_token",e.token),localStorage.setItem("refresh_token",e.refreshToken),localStorage.setItem("id_token",e.idToken),u.value={...u.value,name:e.tokenParsed.display_name,email:e.tokenParsed.email,id:e.tokenParsed.sub,accessToken:e.token,locale:e.tokenParsed.locale,moderator:e.hasRealmRole("nova")}};class PreloadService{constructor(){_(this,"preloadedResources",new Set);_(this,"criticalComponentLoaders",[()=>__vitePreload(()=>import("./BaseLayout-hzY3m2ws.js"),__vite__mapDeps([4,5,0,1,2,3,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50])),()=>__vitePreload(()=>import("./BaseLayout-C56R_pGd.js"),__vite__mapDeps([51,5,0,1,2,3,6,7,8,9,17,10,18,19,15,20,21,11,12,22,23,24,29,26,30,31,32,43,25,46,44,45,28,33,34,38,49,52])),()=>__vitePreload(()=>import("./BaseLayout-CD3fF46K.js"),__vite__mapDeps([53,5,0,1,2,3,6,7,8,9,17,10,18,19,15,20,21,11,12,22,23,24,26,43,48,54,55,46,47,44,45,49,56])),()=>__vitePreload(()=>import("./Desktop-DspuB7nz.js"),__vite__mapDeps([57,5,0,1,2,3,6,7,8,9,30,58,59,49])),()=>__vitePreload(()=>import("./Mobile-BHIL_IcS.js"),__vite__mapDeps([60,5,0,1,2,3,6,7,8,9,30,58,59,49])),()=>__vitePreload(()=>import("./Tv-BB41EQJa.js"),__vite__mapDeps([61,5,0,1,2,3,6,7,8,9,36,37,62,21,19,15,49]))])}preloadCriticalAssets(){this.preloadFont("/fonts/Inter-roman.var-latin.woff2"),this.preloadFont("/fonts/mooooom-icons.woff"),this.preloadImage("/img/icons/android-chrome-192x192.png")}preloadFont(a){if(this.preloadedResources.has(a))return;const r=document.createElement("link");r.rel="preload",r.as="font",r.type="font/woff2",r.crossOrigin="anonymous",r.href=a,document.head.appendChild(r),this.preloadedResources.add(a)}preloadImage(a){if(this.preloadedResources.has(a))return;const r=document.createElement("link");r.rel="preload",r.as="image",r.href=a,document.head.appendChild(r),this.preloadedResources.add(a)}async preloadModule(a){if(!this.preloadedResources.has(a))try{const r=document.createElement("link");r.rel="modulepreload",r.href=a,document.head.appendChild(r),this.preloadedResources.add(a)}catch(r){console.warn(`Failed to preload module: ${a}`,r)}}async prefetchRoute(a){if(!this.preloadedResources.has(a))try{(await fetch(a,{method:"HEAD",credentials:"same-origin"})).ok&&this.preloadedResources.add(a)}catch(r){console.warn(`Failed to prefetch route: ${a}`,r)}}smartPreload(){let a;document.addEventListener("mouseover",r=>{const o=r.target.closest('a[href][target="_blank"]');o&&(clearTimeout(a),a=setTimeout(()=>{this.prefetchRoute(o.href)},100))}),document.addEventListener("touchstart",r=>{const o=r.target.closest("a[href]");o&&this.prefetchRoute(o.href)},{passive:!0})}preloadImagesInViewport(){const a=document.querySelectorAll("img[data-src]"),r=new IntersectionObserver(n=>{n.forEach(o=>{if(o.isIntersecting){const s=o.target,i=s.dataset.src;i&&(this.preloadImage(i),r.unobserve(s))}})},{rootMargin:"50px"});a.forEach(n=>r.observe(n))}preloadCriticalComponents(){"requestIdleCallback"in window?requestIdleCallback(async()=>{for(const a of this.criticalComponentLoaders)try{await a()}catch(r){console.warn("Failed to preload critical component:",r)}}):setTimeout(async()=>{for(const a of this.criticalComponentLoaders)try{await a()}catch(r){console.warn("Failed to preload critical component:",r)}},100)}init(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>this.startPreloading()):this.startPreloading()}startPreloading(){this.preloadCriticalAssets(),this.smartPreload(),this.preloadImagesInViewport(),window.addEventListener("load",()=>{this.preloadCriticalComponents()})}}const preloadService=new PreloadService,state=reactive({isAuthenticated:!1,hasFailed:!1,isPending:!1,token:"",refreshToken:"",decodedToken:{},username:"",roles:[],resourceRoles:{}}),setToken=e=>{state.token=e;const a=jwtDecode$1(state.token);state.decodedToken=a,state.roles=a.realm_access.roles,state.username=a.preferred_username,state.resourceRoles=a.resource_access?Object.fromEntries(Object.entries(a.resource_access).map(([r,n])=>[r,n.roles])):{}},setRefreshToken=e=>{state.refreshToken=e},hasFailed=e=>{state.hasFailed=e},isPending=e=>{state.isPending=e},isAuthenticated=e=>{state.isAuthenticated=e};function isPromise(e){return!isNil(e)&&typeof e.then=="function"}function isFunction(e){return!isNil(e)&&typeof e=="function"}function isString(e){return!isNil(e)&&(typeof e=="string"||e instanceof String)}function isNil(e){return e==null}let $keycloak;function isTokenReady(){return new Promise(e=>checkToken(e))}const checkToken=e=>{!isNil($keycloak)&&!isNil($keycloak==null?void 0:$keycloak.token)?e():setTimeout(()=>checkToken(e),500)};function getKeycloak(){return $keycloak}function getToken(){return updateToken()}async function updateToken(){if(!$keycloak)throw new Error("Keycloak is not initialized.");try{await $keycloak.updateToken(10),setToken($keycloak.token),setRefreshToken($keycloak.refreshToken)}catch(e){throw hasFailed(!0),console.error("Failed to refresh token:",e.message),new Error(e.message)}return $keycloak.token}function createKeycloak(e){return $keycloak=new Keycloak(e),getKeycloak()}async function initKeycloak(e){try{if(!isPlatform("capacitor")){isPending(!0);const a=await $keycloak.init(e);isAuthenticated(a),isNil($keycloak.token)||setToken($keycloak.token),$keycloak.onAuthRefreshSuccess=()=>setToken($keycloak.token),$keycloak.onTokenExpired=()=>updateToken()}}catch(a){throw hasFailed(!0),isAuthenticated(!1),new Error(a)}finally{isPending(!1)}}const useKeycloak=()=>({...toRefs(state),keycloak:getKeycloak(),hasRoles:e=>!isNil(e)&&state.isAuthenticated&&e.every(a=>state.roles.includes(a)),hasResourceRoles:(e,a)=>!isNil(e)&&!isNil(a)&&state.isAuthenticated&&e.every(r=>state.resourceRoles[a].includes(r))}),client=({baseUrl:e,timeout:a})=>{var o,s,i;const r=((o=localStorage.getItem("NoMercy-displayLanguage"))==null?void 0:o.replace(/"/gu,""))||((s=navigator.language.split("-"))==null?void 0:s[0]),n=axios.create({headers:{Accept:"application/json","Accept-Language":r,Authorization:`Bearer ${((i=user.value)==null?void 0:i.accessToken)||localStorage.getItem("access_token")}`},timeout:a||1e4,baseURL:e});return n.interceptors.request.use(d=>(keycloak.value.authenticated&&(d.headers.Authorization=`Bearer ${keycloak.value.token||localStorage.getItem("access_token")}`),d),async d=>{var g;if(((g=d.response)==null?void 0:g.status)===401)await keycloak.value.keycloak.updateToken(5).then(()=>axios.request(d.config)).catch(()=>Promise.reject(d));else return Promise.reject(d)}),n},cs=ref(null),currentServer=computed(()=>cs.value),setCurrentServer=e=>{e!=null&&e.id&&localStorage.setItem("currentServer",e==null?void 0:e.id),cs.value=e},isOnline=useOnline();watch(isOnline,e=>{e&&cs.value&&pingServer(cs.value).then(a=>{cs.value={...cs.value,serverBaseUrl:a,serverApiUrl:a+"/api/v1"}})});const pingServer=async e=>new Promise(async a=>{const r=`https://${e.internal_domain}:${e.internal_port}`,n=`https://${e.external_domain}:${e.external_port}`;await client({baseUrl:r}).get("/api/v1/dashboard/server").then(()=>{a(r)}),await client({baseUrl:n}).get("/api/v1/dashboard/server").then(()=>{a(n)})}),libraries=ref([]),setLibraries=e=>{libraries.value=e},clearLibraries=()=>{libraries.value=[]};var S;const shouldShowLibraryLinks=ref((((S=libraries.value)==null?void 0:S.length)??0)>0);watch(libraries,e=>{shouldShowLibraryLinks.value=((e==null?void 0:e.length)??0)>0});watch(currentServer,e=>{if(!e){shouldShowLibraryLinks.value=!1;return}});const MobileBaseLayout=__vitePreload(()=>import("./BaseLayout-C56R_pGd.js"),__vite__mapDeps([51,5,0,1,2,3,6,7,8,9,17,10,18,19,15,20,21,11,12,22,23,24,29,26,30,31,32,43,25,46,44,45,28,33,34,38,49,52])),TvBaseLayout=__vitePreload(()=>import("./BaseLayout-CD3fF46K.js"),__vite__mapDeps([53,5,0,1,2,3,6,7,8,9,17,10,18,19,15,20,21,11,12,22,23,24,26,43,48,54,55,46,47,44,45,49,56])),DesktopBaseLayout=__vitePreload(()=>import("./BaseLayout-hzY3m2ws.js"),__vite__mapDeps([4,5,0,1,2,3,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50])),BaseCollection=()=>__vitePreload(()=>import("./index-CIFV2Jeu.js"),__vite__mapDeps([63,1,5,0,2,3,6,7,8,9,49])),AuthView=()=>__vitePreload(()=>import("./index-CjzmaSgi.js"),__vite__mapDeps([64,1,5,0,2,3,6,7,8,9,49])),Logout=()=>__vitePreload(()=>import("./Logout-oVb4LjN7.js"),__vite__mapDeps([65,0,1,2,3,5,6,7,8,9,66,15,67,49])),BaseIndex=()=>__vitePreload(()=>import("./index-dyloFV7_.js"),__vite__mapDeps([68,1,5,0,2,3,6,7,8,9,49])),BaseInfo=()=>__vitePreload(()=>import("./index-KP5Z3Ahq.js"),__vite__mapDeps([69,1,5,0,2,3,6,7,8,9,49])),BaseLibraries=()=>__vitePreload(()=>import("./index-CSYaeXh_.js"),__vite__mapDeps([70,1,5,0,2,3,6,7,8,9,49])),BaseLibrary=()=>__vitePreload(()=>import("./index-CDrvkuV3.js"),__vite__mapDeps([71,1,5,0,2,3,6,7,8,9,49])),PaginatedLibrary=()=>__vitePreload(()=>import("./index-BQ4mgza-.js"),__vite__mapDeps([72,1,5,0,2,3,6,7,8,9,49])),BasePerson=()=>__vitePreload(()=>import("./index-FREZQ-Ku.js"),__vite__mapDeps([73,1,5,0,2,3,6,7,8,9,49])),Search=()=>__vitePreload(()=>import("./index-DHppfXH8.js"),__vite__mapDeps([74,1,5,0,2,3,6,7,8,9,49])),BaseWatch=()=>__vitePreload(()=>import("./index-SixyUBFJ.js"),__vite__mapDeps([75,1,5,0,2,3,6,7,8,9,49])),MusicArtist=()=>__vitePreload(()=>import("./index-BxHPsNnO.js"),__vite__mapDeps([76,1,5,0,2,3,6,7,8,9,49])),MusicCards=()=>__vitePreload(()=>import("./index-DVQBbJMV.js"),__vite__mapDeps([77,1,5,0,2,3,6,7,8,9,49])),MusicList=()=>__vitePreload(()=>import("./index-Ba4eEttA.js"),__vite__mapDeps([78,1,5,0,2,3,6,7,8,9,49])),MusicStart=()=>__vitePreload(()=>import("./index-B8GVdbyJ.js"),__vite__mapDeps([79,1,5,0,2,3,6,7,8,9,49])),DashboardLogs=()=>__vitePreload(()=>import("./index-CmL9LGly.js"),__vite__mapDeps([80,1,5,0,2,3,6,7,8,9,49])),DashboardPlugins=()=>__vitePreload(()=>import("./index-HrVZL402.js"),__vite__mapDeps([81,1,5,0,2,3,6,7,8,9,49])),DashboardSchedule=()=>__vitePreload(()=>import("./index-G_lZOrul.js"),__vite__mapDeps([82,1,5,0,2,3,6,7,8,9,49])),DashboardMetadata=()=>__vitePreload(()=>import("./index-BjzimtO9.js"),__vite__mapDeps([83,1,5,0,2,3,6,7,8,9,49])),DashboardRipper=()=>__vitePreload(()=>import("./index-CKE2ftx7.js"),__vite__mapDeps([84,1,5,0,2,3,6,7,8,9,49])),DashboardSpecials=()=>__vitePreload(()=>import("./index-CyYZizeF.js"),__vite__mapDeps([85,1,5,0,2,3,6,7,8,9,49])),DashboardActivity=()=>__vitePreload(()=>import("./index-gR7g_41B.js"),__vite__mapDeps([86,1,5,0,2,3,6,7,8,9,49])),DashboardDevices=()=>__vitePreload(()=>import("./index-ByxphXJH.js"),__vite__mapDeps([87,1,5,0,2,3,6,7,8,9,49])),DashboardDlna=()=>__vitePreload(()=>import("./index-B_el_lMd.js"),__vite__mapDeps([88,1,5,0,2,3,6,7,8,9,49])),DashboardEncoderProfiles=()=>__vitePreload(()=>import("./index-BDiwVBUP.js"),__vite__mapDeps([89,1,5,0,2,3,6,7,8,9,49])),DashboardGeneral=()=>__vitePreload(()=>import("./index-DMERbfet.js"),__vite__mapDeps([90,1,5,0,2,3,6,7,8,9,49])),DashboardLibraries=()=>__vitePreload(()=>import("./index-DVA7f22p.js"),__vite__mapDeps([91,1,5,0,2,3,6,7,8,9,49])),DashboardNotifications=()=>__vitePreload(()=>import("./index-CmFK992g.js"),__vite__mapDeps([92,1,5,0,2,3,6,7,8,9,49])),DashboardSystem=()=>__vitePreload(()=>import("./index-C1CDMxW9.js"),__vite__mapDeps([93,1,5,0,2,3,6,7,8,9,49])),DashboardUsers=()=>__vitePreload(()=>import("./index-DBRGF_vX.js"),__vite__mapDeps([94,1,5,0,2,3,6,7,8,9,49])),PreferencesControls=()=>__vitePreload(()=>import("./index-CPwt5c9_.js"),__vite__mapDeps([95,1,5,0,2,3,6,7,8,9,49])),PreferencesDisplay=()=>__vitePreload(()=>import("./index-BsXmzMim.js"),__vite__mapDeps([96,1,5,0,2,3,6,7,8,9,49])),PreferencesProfile=()=>__vitePreload(()=>import("./index-C0YpbMZC.js"),__vite__mapDeps([97,1,5,0,2,3,6,7,8,9,49])),PreferencesSubtitles=()=>__vitePreload(()=>import("./index-C0VmGrXa.js"),__vite__mapDeps([98,1,5,0,2,3,6,7,8,9,49])),DevCast=()=>__vitePreload(()=>import("./index-Biu03Ymh.js"),__vite__mapDeps([99,1,5,0,2,3,6,7,8,9,49])),DevDownload=()=>__vitePreload(()=>import("./index-wnC0kDP6.js"),__vite__mapDeps([100,1,5,0,2,3,6,7,8,9,49])),DevPerformanceDashboard=()=>__vitePreload(()=>import("./Dashboard-Dgzxo0o9.js"),__vite__mapDeps([101,5,0,1,2,3,6,7,8,9,15,49,102])),SetupSelectServer=()=>__vitePreload(()=>import("./index-CqRL2aka.js"),__vite__mapDeps([103,1,5,0,2,3,6,7,8,9,49])),SetupNoServer=()=>__vitePreload(()=>import("./index-CFMb_NNV.js"),__vite__mapDeps([104,1,5,0,2,3,6,7,8,9,49])),SetupServerOffline=()=>__vitePreload(()=>import("./index-VfnBFHmI.js"),__vite__mapDeps([105,1,5,0,2,3,6,7,8,9,49])),NotFound=()=>__vitePreload(()=>import("./index-BmfydjoP.js"),__vite__mapDeps([106,1,5,0,2,3,6,7,8,9,49])),getBaseLayout=()=>isTv.value||tvModeOverride.value?TvBaseLayout:isMobile.value?MobileBaseLayout:DesktopBaseLayout,routes=[{path:"/",redirect:"/home"},{path:"/",component:getBaseLayout,children:[{path:"",redirect:"/home"},{path:"home",name:"Home",component:BaseIndex},{path:"search",name:"Search",component:Search,props:{type:"all"}},{path:"libraries",name:"Libraries",component:BaseLibraries,beforeEnter:(e,a,r)=>{const n=libraries.value.at(0);n&&!isMobile.value&&!isTv.value?r({name:"Library",params:{id:n.link.replace("/","")}}):r()}},{path:"libraries/:id/letter/:letter",name:"Library paginated",strict:!0,component:BaseLibrary},{path:"libraries/:id",name:"Library",strict:!0,component:BaseLibrary},{path:"specials",name:"Specials",component:BaseLibrary},{path:"specials/:id",name:"Special",component:BaseCollection},{path:"genre",name:"Genres",component:BaseLibrary},{path:"genre/:id",name:"Genre",component:BaseLibrary},{path:"collection",name:"Collections",component:BaseLibrary},{path:"collection/:id",name:"Collection",component:BaseCollection},{path:"person",name:"People",component:PaginatedLibrary},{path:"person/:id",name:"Person",component:BasePerson},{path:"movie/:id",name:"Movie",component:BaseInfo},{path:"tv/:id",name:"TV Show",component:BaseInfo},{path:":type/:id/watch",name:"Watch",component:BaseWatch},{path:":catchAll(.*)*",component:NotFound,props:{message:"Page not found",status:404}}]},{path:"/music",component:getBaseLayout,children:[{path:"music",redirect:"/music/start"},{path:"start",name:"Music Start",component:MusicStart},{path:"artists",redirect:"/music/artists/_"},{path:"artists/:letter",name:"Artists",component:MusicCards,props:{type:"artists"}},{path:"artist/:id",name:"Artist",component:MusicArtist},{path:"albums",redirect:"/music/albums/_"},{path:"albums/:letter",name:"Albums",component:MusicCards,props:{type:"albums"}},{path:"album/:id",name:"Album",component:MusicList},{path:"genres",name:"Music Genres",component:MusicCards,props:{type:"genres"}},{path:"genres/:id",name:"Music Genre",component:MusicCards},{path:"playlists",name:"Music Playlists",component:MusicCards,props:{type:"playlists"}},{path:"playlists/:id",name:"Music Playlist",component:MusicList,props:{type:"playlists"}},{path:"tracks",name:"Tracks",component:MusicList,props:{type:"tracks"}}]},{path:"/dashboard",component:getBaseLayout,children:[{path:"dashboard",name:"System",redirect:"/dashboard/system"},{path:"system",name:"System",component:DashboardSystem},{path:"general",name:"General",component:DashboardGeneral},{path:"users",name:"Users",component:DashboardUsers},{path:"users/:id",name:"Edit user",component:()=>__vitePreload(()=>import("./Edit-DyXHTtNv.js"),__vite__mapDeps([107,5,0,1,2,3,6,7,8,9,36,37,108,42,109,20,110,30,41,31,111,33,15,34,112,113,49]))},{path:"libraries",name:"Dashboard Libraries",component:DashboardLibraries},{path:"libraries/:id",name:"Dashboard Library",component:()=>__vitePreload(()=>import("./Edit-MzWlH1vl.js"),__vite__mapDeps([114,5,0,1,2,3,6,7,8,9,36,37,108,42,109,20,110,30,41,31,115,111,116,49]))},{path:"specials",name:"Dashboard Specials",component:DashboardSpecials},{path:"specials/:id",name:"Dashboard Special",component:()=>__vitePreload(()=>import("./Edit-DkxIHIJN.js"),__vite__mapDeps([117,5,0,1,2,3,6,7,8,9,36,37,108,42,109,20,110,30,41,31,111,10,49]))},{path:"devices",name:"Devices",component:DashboardDevices},{path:"devices/:id",name:"Device",component:()=>__vitePreload(()=>import("./Show-872BsZbL.js"),__vite__mapDeps([118,5,0,1,2,3,6,7,8,9,36,37,108,42,109,20,110,30,41,31,119,10,49]))},{path:"ripper",name:"Ripper",component:DashboardRipper},{path:"encoderprofiles",name:"Encoder Profiles",component:DashboardEncoderProfiles},{path:"encoderprofiles/:id",name:"Encoder Profile",component:()=>__vitePreload(()=>import("./Edit-B6WXrd1j.js"),__vite__mapDeps([120,5,0,1,2,3,6,7,8,9,36,37,108,42,109,20,110,30,41,31,49]))},{path:"notifications",name:"Notifications",component:DashboardNotifications},{path:"notifications/:id",name:"Notification",component:DashboardNotifications},{path:"metadata",name:"Metadata",component:DashboardMetadata},{path:"activity",name:"Activity",component:DashboardActivity},{path:"dlna",name:"DLNA",component:DashboardDlna},{path:"logs",name:"Logs",component:DashboardLogs},{path:"plugins",name:"Plugins",component:DashboardPlugins},{path:"plugins/:id",name:"Plugin",component:DashboardPlugins},{path:"schedule",name:"Scheduled Tasks",component:DashboardSchedule},{path:"schedule/:id",name:"Scheduled Task",component:DashboardSchedule}]},{path:"/preferences",component:getBaseLayout,children:[{path:"display",name:"Display",component:PreferencesDisplay},{path:"profile",name:"Profile",component:PreferencesProfile},{path:"controls",name:"Controls",component:PreferencesControls},{path:"subtitles",name:"Subtitles",component:PreferencesSubtitles}]},{path:"/dev",component:getBaseLayout,children:[{path:"cast",name:"Cast",component:DevCast},{path:"download",name:"Download",component:DevDownload},{path:"performance",name:"Performance Dashboard",component:DevPerformanceDashboard}]},{path:"/setup",component:getBaseLayout,children:[{path:"setup",redirect:"setup/select-servers"},{path:"select-servers",name:"Select Server",component:SetupSelectServer},{path:"no-servers",name:"No Servers",component:SetupNoServer},{path:"server-offline",name:"Server offline",component:SetupServerOffline}]},{path:"/auth",name:"Auth",component:AuthView,meta:{public:!0,bypassSetup:!0}},{path:"/logout",name:"Logout",component:Logout,meta:{public:!0,bypassSetup:!0}}],removableQueries=["code","state","session_state"],beforeEach=e=>e.beforeEach((a,r,n)=>{var o;if(!isPlatform("capacitor")){const s={...a.query};let i=!1;removableQueries.forEach(d=>{s[d]&&(delete s[d],i=!0)});for(const d in s)(o=s[d])!=null&&o.includes("?")&&(s[d]=s[d].split("?").at(0));i&&e.replace({query:s}).then()}n()}),afterEach=e=>e.afterEach(a=>{a.name&&(document.title=a.name),isPlatform("capacitor")||setTimeout(()=>{var r;(r=document.querySelector(".ion-page .ion-page-invisible"))==null||r.classList.remove("ion-page-invisible")},500)}),serverClient=e=>{var a;if(!((a=currentServer.value)!=null&&a.serverApiUrl))throw new Error("Server not selected");return client({baseUrl:currentServer.value.serverApiUrl,timeout:e})};var VisibilityState=(e=>(e.hidden="hidden",e.showing="showing",e))(VisibilityState||{}),SizeState=(e=>(e.compact="compact",e.full="full",e))(SizeState||{}),SortType=(e=>(e.index="index",e.name="name",e.artist="artist",e.album="album",e.duration="duration",e.date="date",e))(SortType||{}),SortOrder=(e=>(e.asc="asc",e.desc="desc",e))(SortOrder||{});const siteTitle="NoMercy TV",suffix=location.hostname.includes("dev")||location.hostname.includes("vscode")||location.hostname.includes("12")||location.hostname.includes("192")?"-dev":"",ignoredRedirectQueries=["letter","page","season","sort","type","episode"],authBaseUrl=`https://auth${suffix}.nomercy.tv/realms/NoMercyTV/protocol/openid-connect/`,keycloakConfig={clientId:"nomercy-ui",realm:"NoMercyTV",url:`https://auth${suffix}.nomercy.tv`},tmdbImageBaseUrl="https://image.tmdb.org/t/p",tmdbApiKey="ed3bf860adef0537783e4abee86d65af",config=Object.freeze({__proto__:null,authBaseUrl,ignoredRedirectQueries,keycloakConfig,siteTitle,suffix,tmdbApiKey,tmdbImageBaseUrl}),setTitle$1=e=>{if(!e||e==""){document.title=siteTitle;return}const a=[];e&&a.push(e),window.matchMedia("(display-mode: standalone)").matches||(e&&a.push("-"),a.push(siteTitle)),document.title=a.join(" ")},breakLogoTitle=(e,a=[":","!","?"])=>{if(!e)return"";if(e.split("").some(r=>a.includes(r))){const r=new RegExp(a.map(o=>o=="?"?`\\${o}`:o).join("|"),"u"),n=new RegExp(a.map(o=>o=="?"?`\\${o}\\s`:`${o}\\s`).join("|"),"u");if(r&&n&&e.match(n))return e.replace(e.match(n)[0],`${e.match(r)[0]}
`)}return e},copyToClipboard=async e=>{if(navigator.clipboard&&window.isSecureContext)try{return await navigator.clipboard.writeText(e),!0}catch{return!1}else{const a=document.createElement("textarea");a.value=e,a.style.position="absolute",a.style.left="-999999px",document.body.prepend(a),a.select();try{return document.execCommand("copy"),Promise.resolve(!0)}catch(r){return console.error(r),Promise.resolve(!1)}finally{a.remove()}}},groupBy=(e,a)=>{const r={};return e.map(n=>{r[n[a]]=e.filter(o=>o[a]==n[a])}),r},limitSentenceByCharacters=(e,a=340)=>{if(!e)return"";const r=e.substring(0,a).split(".");return r.pop(r.length),`${r.join(".")}.`},pad=(e,a=2)=>{if(typeof e<"u"){const r=a-e.toString().length+1;return Array(+(r>0&&r)).join("0")+e}return""},sortBy=(e,a,r="asc",n)=>[...e??[]].sort((o,s)=>{var g,m,h,f;let i,d;return r=="desc"?(i=n?((g=s[a])==null?void 0:g[n])??"0":s[a]??"0",d=n?((m=o[a])==null?void 0:m[n])??"0":o[a]??"0"):(i=n?((h=o[a])==null?void 0:h[n])??"0":o[a]??"0",d=n?((f=s[a])==null?void 0:f[n])??"0":s[a]??"0"),i<d?-1:i>d?1:0}),sortByType=(e,a,r,n)=>a==SortType.name?(r||n(SortOrder.asc),sortBy(e,"name",r)):a==SortType.artist?(r||n(SortOrder.asc),sortBy(e,"artist_track[0]",r,SortType.name)):a==SortType.album?(r||n(SortOrder.asc),sortBy(e,"album_track[0]",r,SortType.name)):a==SortType.date?(r||n(SortOrder.desc),sortBy(e,"date",r||SortOrder.desc)):a==SortType.duration?(r||n(SortOrder.desc),sortBy(e,"duration",r||SortOrder.desc)):sortBy(e,"disc",r||SortOrder.desc),unique=(e,a)=>!e||!Array.isArray(e)?[]:e.filter((r,n,o)=>o.map(s=>s[a]).indexOf(r[a])===n),random_string=e=>{let a="";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length;for(let o=0;o<e;o++)a+=r.charAt(Math.floor(Math.random()*n));return a},sortByPosterAlphabetized=(e,a="name",r=null)=>{e=toRaw(e),r&&(e=unique(e,r));const n=Object.create(null),o=[];e.forEach(d=>{n[d.name]||(n[d.name]=[],o.push({...d,department:n[d.name]})),n[d.name].push(d.department)});const s=o.filter(d=>d.profile!=null).sort((d,g)=>+(d[a]>g[a])||-(d[a]<g[a])),i=o.filter(d=>d.profile==null).sort((d,g)=>+(d[a]>g[a])||-(d[a]<g[a]));return s.concat(i)};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};String.prototype.toTitleCase=function(){let e,a,r;r=this.replace(/([^\W_]+[^\s-]*) */gu,s=>s.charAt(0).toUpperCase()+s.substr(1).toLowerCase());const n=["A","An","The","And","But","Or","For","Nor","As","At","By","For","From","In","Into","Near","Of","On","Onto","To","With"];for(e=0,a=n.length;e<a;e++)r=r.replace(new RegExp(`\\s${n[e]}\\s`,"gu"),s=>s.toLowerCase());const o=["Id","Tv"];for(e=0,a=o.length;e<a;e++)r=r.replace(new RegExp(`\\b${o[e]}\\b`,"gu"),o[e].toUpperCase());return r};String.prototype.titleCase=function(e=navigator.language.split("-")[0],a=!0){let r,n=[];if(r=this.replace(/([^\s:\-'])([^\s:\-']*)/gu,s=>s.charAt(0).toUpperCase()+s.substr(1).toLowerCase()).replace(/Mc(.)/gu,(s,i)=>`Mc${i.toUpperCase()}`),a){n=["A","An","The","At","By","For","In","Of","On","To","Up","And","As","But","Or","Nor","Not"],e=="FR"?n=["Un","Une","Le","La","Les","Du","De","Des","À","Au","Aux","Par","Pour","Dans","Sur","Et","Comme","Mais","Ou","Où","Ne","Ni","Pas"]:e=="NL"&&(n=["De","Het","Een","En","Van","Naar","Op","Door","Voor","In","Als","Maar","Waar","Niet","Bij","Aan"]);for(let s=0;s<n.length;s++)r=r.replace(new RegExp(`\\s${n[s]}\\s`,"gu"),i=>i.toLowerCase())}const o=["Id","R&d"];for(let s=0;s<o.length;s++)r=r.replace(new RegExp(`\\b${o[s]}\\b`,"gu"),o[s].toUpperCase());return r};String.prototype.toPascalCase=function(){return this.match(/[a-z0-9]+/giu).map(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()).join("_")};String.prototype.toInt=function(){return parseInt(this,10)};const stringFormat=(e,...a)=>{const r=new RegExp(/\{(?<index>\d+)\}/u,"gu"),n=e.match(r);if((n==null?void 0:n.length)==null)return e;let o=e;for(let s=0;s<n.length;s++){const i=n[s],d=parseInt(n[s][1],10);o=o.replace(i,a[d].toString())}return o},humanFileSize=(e,a=!1,r=1)=>{const n=a?1e3:1024;if(Math.abs(e)<n)return`${e} B`;const o=a?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let s=-1;const i=10**r;do e/=n,++s;while(Math.round(Math.abs(e)*i)/i>=n&&s<o.length-1);return`${e.toFixed(r)} ${o[s]}`},breakTitle=(e,a=null)=>{if(!e)return"";const r=e.split(/(:\s|\sand\sthe\s|\sen\sde\s|\s-\s|\s–\s|\s&\s)/iu);return(r.includes(" - ")||r.includes(" – "))&&r.includes(": ")?e==null?void 0:e.replace(/(.+)(:\s|sand\sthe|\sen\sde|\s&\s)(.*)/u,`<span class=''>$1</span><span class='${a}'>$3</span>`).replace(/\s-.+$/iu," "):r.length==3&&e.length>30?e.includes(":")?e==null?void 0:e.replace(/(.+)(:\s|sand\sthe|\sen\sde|\s&\s)(.*)/u,`<span class=''>$1</span><span class='${a}'>$3</span>`):e==null?void 0:e.replace(/(.+)(\sand\sthe\s|\sen\sde\s|\s-\s|\s&\s)(.+)/iu,`<span class=''>$1</span><span class='${a}'>$3</span>`):(r.includes(" and the ")||r.includes(" en de "))&&e.length>25&&!r.includes(": ")?e==null?void 0:e.replace(/(.+)(:\s|\sand\sthe\s|\sen\sde\s|\s-\s|\s&\s)(.+)/iu,`<span class=''>$1</span><span class='${a}'>$3</span>`).replace(/\sand\sthe\s|\sen\sde\s/iu," "):(r.includes(" and the ")||r.includes(" en de "))&&e.length>40&&r.includes(": ")?e==null?void 0:e.replace(/(.+)(\sand\sthe\s|\sen\sde\s|\s-\s|\s&\s)(.+)/iu,`<span class=''>$1</span><span class='${a}'>$3</span>`).replace(/\sand\sthe\s|\sen\sde\s/iu," "):e.includes(":")&&e.split(/[I\-]+$/iu)[0].length>20?e==null?void 0:e.replace(/(.+)(:\s|sand\sthe|\sen\sde|\s&\s)(.*)/u,`<span class=''>$1</span><span class='${a}'>$3</span>`):e},breakTitle2=(e,a=null)=>e?e==null?void 0:e.replace(/(:\s|\sand\sthe|\sen\sde)(.*)/u,`:</br><span class='${a}'>$2</span>`):"",breakDescription=e=>e==null?void 0:e.split(/\.\s/u).filter(a=>!a.includes("Wikipedia")&&!a.includes("CC-")).join(`.
`),mappedEntries=e=>Object.entries(e),alphaNumericRange=function(){const e="_#ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split("");return function(a,r){let n=e.indexOf(a),o=e.indexOf(r);return!~a||!~r?null:e.slice(n,o+1)}}();Array.prototype.latest=function(){return[...this].sort((e,a)=>e.updated_at>a.updated_at?-1:e.updated_at<a.updated_at?1:0)};const isPublicIp=e=>!e.startsWith("192")&&!e.startsWith("10.")&&!e.startsWith("172"),censorPublicIpAddresses=e=>e?suffix!=""?e.replace(/([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})|([0-9]{1,3}-[0-9]{1,3}-[0-9]{1,3}-[0-9]{1,3})/gu,a=>isPublicIp(a)?"XXX.XXX.XXX.XXX":a):e:"",checkboxValue=(e,a)=>e.length==0?!1:e.length==(a==null?void 0:a.length)?!0:null,greenToRed=[{pct:0,color:{r:0,g:64,b:0}},{pct:1,color:{r:0,g:144,b:0}},{pct:50,color:{r:255,g:255,b:0}},{pct:100,color:{r:255,g:0,b:0}}],redToGreen=[{pct:0,color:{r:204,g:0,b:0}},{pct:50,color:{r:238,g:238,b:0}},{pct:99,color:{r:0,g:144,b:0}},{pct:100,color:{r:0,g:64,b:0}}],getColorFromPercent=(e,a=greenToRed)=>{let r;for(r=1;r<a.length-1&&!(e<a[r].pct);r++);const n=a[r-1],o=a[r],s=o.pct-n.pct,i=(e-n.pct)/s,d=1-i,g=i,m={r:Math.floor(n.color.r*d+o.color.r*g),g:Math.floor(n.color.g*d+o.color.g*g),b:Math.floor(n.color.b*d+o.color.b*g)};return`rgb(${[m.r,m.g,m.b].join(",")})`},getLuminosity=function(e){e=RGBString2hex(e).substring(1);const a=parseInt(e,16),r=a>>16&255,n=a>>8&255,o=a>>0&255;return .2126*r+.7152*n+.0722*o},tooLight=function(e,a=130){if(e){if(e.includes("#")){const n=hexToRgba(e);e=`rgb(${n.r} ${n.g} ${n.b})`}return getLuminosity(e)>a}return!1},tooDark=function(e,a=50){if(e){if(e.includes("#")){const n=hexToRgba(e);e=`rgb(${n.r} ${n.g} ${n.b})`}return getLuminosity(e)<a}return!1},byte2Hex=e=>{const a="0123456789ABCDEF";return String(a.substr(e>>4&15,1))+a.substr(e&15,1)},RGBString2hex=e=>{const a=e.replace("rgb(","").replace(")","").split(/,|\s/gu).slice(0,3).map(r=>parseInt(r,10));return`#${byte2Hex(a[0])}${byte2Hex(a[1])}${byte2Hex(a[2])}`},pickPaletteColor=(e,a=60,r=160)=>{if(!e||!e.darkVibrant)return"var(--color-theme-7)";if(!tooLight(e.lightVibrant,r)&&!tooDark(e.lightVibrant,a)){if(e.lightVibrant.includes("#")){const n=hexToRgba(e.lightVibrant);return`${n.r} ${n.g} ${n.b}`}return e.lightVibrant??"var(--color-theme-7)"}if(!tooDark(e.primary,a)&&!tooLight(e.primary,r)){if(e.primary.includes("#")){const n=hexToRgba(e.primary);return`${n.r} ${n.g} ${n.b}`}return e.primary??"var(--color-theme-7)"}if(!tooDark(e.dominant,a)&&!tooLight(e.dominant,r)){if(e.dominant.includes("#")){const n=hexToRgba(e.dominant);return`${n.r} ${n.g} ${n.b}`}return e.dominant??"var(--color-theme-7)"}if(!tooDark(e.darkVibrant,a)&&!tooLight(e.darkVibrant,r)){if(e.darkVibrant.includes("#")){const n=hexToRgba(e.darkVibrant);return`${n.r} ${n.g} ${n.b}`}return e.darkVibrant??"var(--color-theme-7)"}if(!tooDark(e.darkMuted,a)&&!tooLight(e.darkMuted,r)){if(e.darkMuted.includes("#")){const n=hexToRgba(e.darkMuted);return`${n.r} ${n.g} ${n.b}`}return e.darkMuted??"var(--color-theme-7)"}if(!tooLight(e.lightMuted,r)&&!tooDark(e.lightMuted,a)){if(e.lightMuted.includes("#")){const n=hexToRgba(e.lightMuted);return`${n.r} ${n.g} ${n.b}`}return e.lightMuted??"var(--color-theme-7)"}return"var(--color-theme-7)"},themeColors=[{title:"red",color:"rgb(var(--color-red-9))"},{title:"tomato",color:"rgb(var(--color-tomato-9))"},{title:"orange",color:"rgb(var(--color-orange-9))"},{title:"amber",color:"rgb(var(--color-amber-9))"},{title:"yellow",color:"rgb(var(--color-yellow-9))"},{title:"lime",color:"rgb(var(--color-lime-9))"},{title:"grass",color:"rgb(var(--color-grass-9))"},{title:"green",color:"rgb(var(--color-green-9))"},{title:"teal",color:"rgb(var(--color-teal-9))"},{title:"mint",color:"rgb(var(--color-mint-9))"},{title:"cyan",color:"rgb(var(--color-cyan-9))"},{title:"sky",color:"rgb(var(--color-sky-9))"},{title:"blue",color:"rgb(var(--color-blue-9))"},{title:"indigo",color:"rgb(var(--color-indigo-9))"},{title:"violet",color:"rgb(var(--color-violet-9))"},{title:"purple",color:"rgb(var(--color-purple-9))"},{title:"plum",color:"rgb(var(--color-plum-9))"},{title:"pink",color:"rgb(var(--color-pink-9))"},{title:"crimson",color:"rgb(var(--color-crimson-9))"},{title:"brown",color:"rgb(var(--color-brown-9))"},{title:"gold",color:"rgb(var(--color-gold-9))"},{title:"bronze",color:"rgb(var(--color-bronze-9))"},{title:"olive",color:"rgb(var(--color-olive-9))"},{title:"sage",color:"rgb(var(--color-sage-9))"},{title:"slate",color:"rgb(var(--color-slate-9))"},{title:"mauve",color:"rgb(var(--color-mauve-9))"},{title:"sand",color:"rgb(var(--color-sand-9))"},{title:"gray",color:"rgb(var(--color-gray-9))"}],getImageBrightness=(e,a)=>{const r=new Image;r.style.display="none",r.crossOrigin="anonymous",r.src=e,r.onload=()=>{let n=0,o=0;const s=document.createElement("canvas");s.width=r.naturalWidth,s.height=r.naturalHeight;const i=s.getContext("2d",{willReadFrequently:!0});i.drawImage(r,0,0);const g=i.getImageData(0,0,s.width,s.height).data;let m,h,f,k;for(let v=0,x=g.length;v<x;v+=4)m=g[v],h=g[v+1],f=g[v+2],k=g[v+3],o+=Math.floor((m+h+f)/3),n+=k;const P=100-Math.floor(n/(r.naturalWidth*r.naturalHeight)/255*100),y=Math.floor(o/(r.naturalWidth*r.naturalHeight)/255*100),w=Math.floor(y/(100-P)*100);a({brightness:y,transparency:P,nonTransparentBrightness:w})},r.onerror=()=>{a({brightness:0,transparency:0,nonTransparentBrightness:0})}},RGBToHSL=(e,a,r)=>{e/=255,a/=255,r/=255;const n=Math.max(e,a,r),o=n-Math.min(e,a,r),s=o?n===e?(a-r)/o:n===a?2+(r-e)/o:4+(e-a)/o:0;return{h:60*s<0?60*s+360:60*s,s:100*(o?n<=.5?o/(2*n-o):o/(2-(2*n-o)):0),l:100*(2*n-o)/2}},hexLighter=(e,a)=>{if(!e)return;const r=hexToRgba(e),n=RGBToHSL(r.r,r.g,r.b);for(a&&(n.l+=a);hsvaToHex({h:n.h,s:n.s,v:n.l,a:1}).length!==7;)n.l-=1;return hsvaToHex({h:n.h,s:n.s,v:n.l,a:1})},hexOpacity=(e,a)=>{const r=hexToRgba(e);return`rgba(${r.r} ${r.g} ${r.b}/ ${a}%)`},getGpuColor=e=>e.toLowerCase().includes("nvidia")?green:e.toLowerCase().includes("amd")?red:e.toLowerCase().includes("intel")?blue:gray;var T;instance.use(Backend).init({lng:((T=navigator.language.split("-"))==null?void 0:T[0])??"en",fallbackLng:"en",debug:!1,load:"currentOnly",interpolation:{escapeValue:!1}}).then();const availableTranslations=["en","nl"],languages=[{iso_639_1:"kw",english_name:"Cornish",name:""},{iso_639_1:"ff",english_name:"Fulah",name:"Fulfulde"},{iso_639_1:"gn",english_name:"Guarani",name:""},{iso_639_1:"id",english_name:"Indonesian",name:"Bahasaindonesia"},{iso_639_1:"lu",english_name:"Luba-Katanga",name:""},{iso_639_1:"nr",english_name:"Ndebele",name:""},{iso_639_1:"os",english_name:"Ossetian; Ossetic",name:""},{iso_639_1:"ru",english_name:"Russian",name:"Pусский"},{iso_639_1:"se",english_name:"Northern Sami",name:""},{iso_639_1:"so",english_name:"Somali",name:"Somali"},{iso_639_1:"es",english_name:"Spanish",name:"Español"},{iso_639_1:"sv",english_name:"Swedish",name:"svenska"},{iso_639_1:"ta",english_name:"Tamil",name:"தமிழ்"},{iso_639_1:"te",english_name:"Telugu",name:"తెలుగు"},{iso_639_1:"tn",english_name:"Tswana",name:""},{iso_639_1:"uk",english_name:"Ukrainian",name:"Український"},{iso_639_1:"uz",english_name:"Uzbek",name:"ozbek"},{iso_639_1:"el",english_name:"Greek",name:"ελληνικά"},{iso_639_1:"co",english_name:"Corsican",name:""},{iso_639_1:"dv",english_name:"Divehi",name:""},{iso_639_1:"kk",english_name:"Kazakh",name:"қазақ"},{iso_639_1:"ki",english_name:"Kikuyu",name:""},{iso_639_1:"or",english_name:"Oriya",name:""},{iso_639_1:"si",english_name:"Sinhalese",name:"සිංහල"},{iso_639_1:"st",english_name:"Sotho",name:""},{iso_639_1:"sr",english_name:"Serbian",name:"Srpski"},{iso_639_1:"ss",english_name:"Swati",name:""},{iso_639_1:"tr",english_name:"Turkish",name:"Türkçe"},{iso_639_1:"wa",english_name:"Walloon",name:""},{iso_639_1:"cn",english_name:"Cantonese",name:"广州话 / 廣州話"},{iso_639_1:"bi",english_name:"Bislama",name:""},{iso_639_1:"cr",english_name:"Cree",name:""},{iso_639_1:"cy",english_name:"Welsh",name:"Cymraeg"},{iso_639_1:"eu",english_name:"Basque",name:"euskera"},{iso_639_1:"hz",english_name:"Herero",name:""},{iso_639_1:"ho",english_name:"Hiri Motu",name:""},{iso_639_1:"ka",english_name:"Georgian",name:"ქართული"},{iso_639_1:"kr",english_name:"Kanuri",name:""},{iso_639_1:"km",english_name:"Khmer",name:""},{iso_639_1:"kj",english_name:"Kuanyama",name:""},{iso_639_1:"to",english_name:"Tonga",name:""},{iso_639_1:"vi",english_name:"Vietnamese",name:"Tiếng Việt"},{iso_639_1:"zu",english_name:"Zulu",name:"isiZulu"},{iso_639_1:"zh",english_name:"Mandarin",name:"普通话"},{iso_639_1:"ps",english_name:"Pushto",name:"پښتو"},{iso_639_1:"mk",english_name:"Macedonian",name:""},{iso_639_1:"ae",english_name:"Avestan",name:""},{iso_639_1:"az",english_name:"Azerbaijani",name:"Azərbaycan"},{iso_639_1:"ba",english_name:"Bashkir",name:""},{iso_639_1:"sh",english_name:"Serbo-Croatian",name:""},{iso_639_1:"lv",english_name:"Latvian",name:"Latviešu"},{iso_639_1:"lt",english_name:"Lithuanian",name:"Lietuvių"},{iso_639_1:"ms",english_name:"Malay",name:"Bahasa melayu"},{iso_639_1:"rm",english_name:"Raeto-Romance",name:""},{iso_639_1:"as",english_name:"Assamese",name:""},{iso_639_1:"gd",english_name:"Gaelic",name:""},{iso_639_1:"ja",english_name:"Japanese",name:"日本語"},{iso_639_1:"ko",english_name:"Korean",name:"한국어/조선말"},{iso_639_1:"ku",english_name:"Kurdish",name:""},{iso_639_1:"mo",english_name:"Moldavian",name:""},{iso_639_1:"mn",english_name:"Mongolian",name:""},{iso_639_1:"nb",english_name:"Norwegian Bokmål",name:"Bokmål"},{iso_639_1:"om",english_name:"Oromo",name:""},{iso_639_1:"pi",english_name:"Pali",name:""},{iso_639_1:"sq",english_name:"Albanian",name:"shqip"},{iso_639_1:"vo",english_name:"Volapük",name:""},{iso_639_1:"bo",english_name:"Tibetan",name:""},{iso_639_1:"da",english_name:"Danish",name:"Dansk"},{iso_639_1:"kl",english_name:"Kalaallisut",name:""},{iso_639_1:"kn",english_name:"Kannada",name:"?????"},{iso_639_1:"nl",english_name:"Dutch",name:"Nederlands"},{iso_639_1:"nn",english_name:"Norwegian Nynorsk",name:""},{iso_639_1:"sa",english_name:"Sanskrit",name:""},{iso_639_1:"am",english_name:"Amharic",name:""},{iso_639_1:"hy",english_name:"Armenian",name:""},{iso_639_1:"bs",english_name:"Bosnian",name:"Bosanski"},{iso_639_1:"hr",english_name:"Croatian",name:"Hrvatski"},{iso_639_1:"mh",english_name:"Marshall",name:""},{iso_639_1:"mg",english_name:"Malagasy",name:""},{iso_639_1:"ne",english_name:"Nepali",name:""},{iso_639_1:"su",english_name:"Sundanese",name:""},{iso_639_1:"ts",english_name:"Tsonga",name:""},{iso_639_1:"ug",english_name:"Uighur",name:""},{iso_639_1:"cs",english_name:"Czech",name:"Český"},{iso_639_1:"jv",english_name:"Javanese",name:""},{iso_639_1:"ro",english_name:"Romanian",name:"Română"},{iso_639_1:"sm",english_name:"Samoan",name:""},{iso_639_1:"tg",english_name:"Tajik",name:""},{iso_639_1:"wo",english_name:"Wolof",name:"Wolof"},{iso_639_1:"br",english_name:"Breton",name:""},{iso_639_1:"fr",english_name:"French",name:"Français"},{iso_639_1:"ga",english_name:"Irish",name:"Gaeilge"},{iso_639_1:"ht",english_name:"Haitian; Haitian Creole",name:""},{iso_639_1:"kv",english_name:"Komi",name:""},{iso_639_1:"mi",english_name:"Maori",name:""},{iso_639_1:"th",english_name:"Thai",name:"ภาษาไทย"},{iso_639_1:"xx",english_name:"No Language",name:"No Language"},{iso_639_1:"af",english_name:"Afrikaans",name:"Afrikaans"},{iso_639_1:"av",english_name:"Avaric",name:""},{iso_639_1:"bm",english_name:"Bambara",name:"Bamanankan"},{iso_639_1:"ca",english_name:"Catalan",name:"Català"},{iso_639_1:"ce",english_name:"Chechen",name:""},{iso_639_1:"de",english_name:"German",name:"Deutsch"},{iso_639_1:"gv",english_name:"Manx",name:""},{iso_639_1:"rw",english_name:"Kinyarwanda",name:"Kinyarwanda"},{iso_639_1:"ky",english_name:"Kirghiz",name:"??????"},{iso_639_1:"ln",english_name:"Lingala",name:""},{iso_639_1:"sn",english_name:"Shona",name:""},{iso_639_1:"yi",english_name:"Yiddish",name:""},{iso_639_1:"be",english_name:"Belarusian",name:"беларуская мова"},{iso_639_1:"cu",english_name:"Slavic",name:""},{iso_639_1:"dz",english_name:"Dzongkha",name:""},{iso_639_1:"eo",english_name:"Esperanto",name:"Esperanto"},{iso_639_1:"fi",english_name:"Finnish",name:"suomi"},{iso_639_1:"fy",english_name:"Frisian",name:""},{iso_639_1:"ie",english_name:"Interlingue",name:""},{iso_639_1:"ia",english_name:"Interlingua",name:""},{iso_639_1:"it",english_name:"Italian",name:"Italiano"},{iso_639_1:"ng",english_name:"Ndonga",name:""},{iso_639_1:"pa",english_name:"Punjabi",name:"ਪੰਜਾਬੀ"},{iso_639_1:"pt",english_name:"Portuguese",name:"Português"},{iso_639_1:"rn",english_name:"Rundi",name:"Kirundi"},{iso_639_1:"fa",english_name:"Persian",name:"فارسی"},{iso_639_1:"ch",english_name:"Chamorro",name:"Finu' Chamorro"},{iso_639_1:"cv",english_name:"Chuvash",name:""},{iso_639_1:"en",english_name:"English",name:"English"},{iso_639_1:"hu",english_name:"Hungarian",name:"Magyar"},{iso_639_1:"ii",english_name:"Yi",name:""},{iso_639_1:"kg",english_name:"Kongo",name:""},{iso_639_1:"li",english_name:"Limburgish",name:""},{iso_639_1:"ml",english_name:"Malayalam",name:""},{iso_639_1:"nv",english_name:"Navajo",name:""},{iso_639_1:"ny",english_name:"Chichewa; Nyanja",name:""},{iso_639_1:"sg",english_name:"Sango",name:""},{iso_639_1:"tw",english_name:"Twi",name:""},{iso_639_1:"ab",english_name:"Abkhazian",name:""},{iso_639_1:"ar",english_name:"Arabic",name:"العربية"},{iso_639_1:"ee",english_name:"Ewe",name:"Èʋegbe"},{iso_639_1:"fo",english_name:"Faroese",name:""},{iso_639_1:"ik",english_name:"Inupiaq",name:""},{iso_639_1:"ks",english_name:"Kashmiri",name:""},{iso_639_1:"lb",english_name:"Letzeburgesch",name:""},{iso_639_1:"nd",english_name:"Ndebele",name:""},{iso_639_1:"oc",english_name:"Occitan",name:""},{iso_639_1:"sk",english_name:"Slovak",name:"Slovenčina"},{iso_639_1:"tt",english_name:"Tatar",name:""},{iso_639_1:"ve",english_name:"Venda",name:""},{iso_639_1:"ay",english_name:"Aymara",name:""},{iso_639_1:"fj",english_name:"Fijian",name:""},{iso_639_1:"gu",english_name:"Gujarati",name:""},{iso_639_1:"io",english_name:"Ido",name:""},{iso_639_1:"lo",english_name:"Lao",name:""},{iso_639_1:"la",english_name:"Latin",name:"Latin"},{iso_639_1:"no",english_name:"Norwegian",name:"Norsk"},{iso_639_1:"oj",english_name:"Ojibwa",name:""},{iso_639_1:"pl",english_name:"Polish",name:"Polski"},{iso_639_1:"qu",english_name:"Quechua",name:""},{iso_639_1:"sl",english_name:"Slovenian",name:"Slovenščina"},{iso_639_1:"sc",english_name:"Sardinian",name:""},{iso_639_1:"sw",english_name:"Swahili",name:"Kiswahili"},{iso_639_1:"tl",english_name:"Tagalog",name:""},{iso_639_1:"ur",english_name:"Urdu",name:"اردو"},{iso_639_1:"bg",english_name:"Bulgarian",name:"български език"},{iso_639_1:"hi",english_name:"Hindi",name:"हिन्दी"},{iso_639_1:"yo",english_name:"Yoruba",name:"Èdè Yorùbá"},{iso_639_1:"ak",english_name:"Akan",name:""},{iso_639_1:"an",english_name:"Aragonese",name:""},{iso_639_1:"bn",english_name:"Bengali",name:"বাংলা"},{iso_639_1:"et",english_name:"Estonian",name:"Eesti"},{iso_639_1:"gl",english_name:"Galician",name:"Galego"},{iso_639_1:"ha",english_name:"Hausa",name:"Hausa"},{iso_639_1:"ig",english_name:"Igbo",name:""},{iso_639_1:"iu",english_name:"Inuktitut",name:""},{iso_639_1:"lg",english_name:"Ganda",name:""},{iso_639_1:"mr",english_name:"Marathi",name:""},{iso_639_1:"mt",english_name:"Maltese",name:"Malti"},{iso_639_1:"my",english_name:"Burmese",name:""},{iso_639_1:"na",english_name:"Nauru",name:""},{iso_639_1:"sd",english_name:"Sindhi",name:""},{iso_639_1:"xh",english_name:"Xhosa",name:""},{iso_639_1:"za",english_name:"Zhuang",name:""},{iso_639_1:"aa",english_name:"Afar",name:""},{iso_639_1:"is",english_name:"Icelandic",name:"Íslenska"},{iso_639_1:"ty",english_name:"Tahitian",name:""},{iso_639_1:"ti",english_name:"Tigrinya",name:""},{iso_639_1:"tk",english_name:"Turkmen",name:""},{iso_639_1:"he",english_name:"Hebrew",name:"עִבְרִית"}],autoThemeColors=useLocalStorage("autoThemeColors",!0),useAutoThemeColors=computed(()=>autoThemeColors.value);(async()=>{const{value:e}=await Preferences.get({key:"autoThemeColors"});if(e===null){autoThemeColors.value=!0,Preferences.set({key:"autoThemeColors",value:"true"}).then();return}autoThemeColors.value=!!e})();const setUseAutoThemeColors=e=>{autoThemeColors.value=e,Preferences.set({key:"autoThemeColors",value:e.toString()}).then()},backdrops=useLocalStorage("showBackdrops",!1),showBackdrops=computed(()=>backdrops.value);(async()=>{const{value:e}=await Preferences.get({key:"showBackdrops"});if(e===null){backdrops.value=!1,Preferences.set({key:"showBackdrops",value:"false"}).then();return}backdrops.value=e=="true"})();const setShowBackdrops=e=>{backdrops.value=e,Preferences.set({key:"showBackdrops",value:e.toString()}).then()},percentageColors=useLocalStorage("percentageColors",!0),usePercentageColors=computed(()=>percentageColors.value);(async()=>{const{value:e}=await Preferences.get({key:"percentageColors"});if(e===null){percentageColors.value=!0,Preferences.set({key:"percentageColors",value:"true"}).then();return}percentageColors.value=(e||!0)=="true"})();const setUsePercentageColors=e=>{percentageColors.value=e,Preferences.set({key:"percentageColors",value:e.toString()}).then()},ssd=useLocalStorage("screensaverDelay",5),screensaverDelay=computed(()=>ssd.value);(async()=>{const{value:e}=await Preferences.get({key:"screensaverDelay"});if(e===null){ssd.value=5,Preferences.set({key:"screensaverDelay",value:"5"}).then();return}ssd.value=parseInt(e??"5")})();const setScreensaverDelay=e=>{ssd.value=e,Preferences.set({key:"screensaverDelay",value:e.toString()}).then()};var I;const lang$1=useLocalStorage("displayLanguage",(I=window.navigator.language.split("-"))==null?void 0:I[0]),displayLanguage=computed(()=>lang$1.value);async function setDisplayLanguage(e){lang$1.value=e,await instance.changeLanguage(e),Preferences.set({key:"display_language",value:e}).then()}(async()=>Preferences.get({key:"display_language"}).then(async e=>{var a;await setDisplayLanguage(e.value??((a=window.navigator.language.split("-"))==null?void 0:a[0]))}))();const convertToHumanReact=(e,a,r=!1)=>{let n=parseInt(a.toString(),10),o=Math.floor(n/(3600*24));n-=o*3600*24;let s=Math.floor(n/3600);n-=s*3600;let i=Math.floor(n/60);return n-=i*60,o===0?o="":o>0&&o<2?o=o+" "+e(r?"d":"day"):o>0&&(o=o+" "+e(r?"d":"days")),s===0?s="":s>0&&s<2?s=s+" "+e(r?"hr":"hour"):s>0&&(s=s+" "+e(r?"hrs":"hours")),i===0?i="":i>0&&i<2?i=i+" "+e(r?"min":"minute"):i>0&&(i=i+" "+e(r?"min":"minutes")),n>0&&!r?n=n+" "+e(r?"sec":"seconds"):n="",o+" "+s+" "+i+" "+n},humanTime=function(e){e=parseInt(e,10);let a=pad(parseInt(`${e%86400/3600}`,10),2),r=parseInt(`${e%3600/60}`,10),n=parseInt(`${e%60}`,10);return`${r}`.length===1&&(r=`0${r}`),`${n}`.length===1&&(n=`0${n}`),a===0?a="00:":a=`${a}:`,r===0?r="00:":r=`${r}:`,a=="00:"&&(a=""),(a+r+n).replace("NaN:NaN:NaN","00:00")},humanTimeExtended=function(e,a,r=!1){const n=new Date().getTime(),o=Math.floor((n-new Date(a).getTime())/1e3);let s=Math.floor(o/(3600*24)),i=Math.floor(o%(3600*24)/3600),d=Math.floor(o%3600/60),g=o%60;return s===0?s="":s>0&&s<2?s=s+" "+e("day"):s>0&&(s=s+" "+e("days")),i===0?i="":i>0&&i<2?i=i+" "+e("hour"):i>0&&(i=i+" "+e("hours")),d===0?d="":d>0&&d<2?d=d+" "+e("minute"):d>0&&(d=d+" "+e("minutes")),g>0&&!r?g=g+" "+e("seconds"):g="",s+" "+i+" "+d+" "+g},convertToSeconds=e=>{if(!e)return 0;const a=e.split(":").map(r=>parseInt(r,10));return a.length<3&&a.unshift(0),+a[0]*60*60+ +a[1]*60+ +a[2]},parseYear=function(e){return e?new Date(e).getFullYear():""},calculateDuration=e=>{var a;if(e)return convertToHumanReact(t$1,((a=e==null?void 0:e.tracks)==null?void 0:a.map(r=>convertToSeconds(r.duration)).reduce((r,n)=>r+n,0))??0)},timeAgoShort=e=>{var h;const a=new Intl.RelativeTimeFormat((h=navigator.language.split("-"))==null?void 0:h[0],{numeric:"auto",style:"short"});e=new Date(e).getTime();const r=Date.now(),n=Math.floor((r-(e>1e12?e:e*1e3))/1e3);if(n<60)return t$1("just now");const o=Math.floor(n/60);if(o<60)return a.format(-o,"minute");const s=Math.floor(o/60);if(s<24)return a.format(-s,"hour");const i=Math.floor(s/24);if(i<7)return a.format(-i,"day");const d=Math.floor(i/7);if(d<4)return a.format(-d,"week");const g=Math.floor(i/30);if(g<12)return a.format(-g,"month");const m=Math.floor(i/365);return a.format(-m,"year")},userTime=e=>new Date(e).toLocaleString(instance.language,{timeZone:"UTC",day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),isXmasTime=()=>{const e=new Date,a=e.getFullYear();let r,n;return e>=new Date(a,5,1)?(r=new Date(a,11,7),n=new Date(a+1,0,5)):(r=new Date(a-1,11,7),n=new Date(a,0,5)),e>=r&&e<=n},scrollContainerElement=ref(),setupComplete=ref(!1),p=ref(),poster=computed(()=>p.value);function setPoster(e){p.value=e}const t=ref(),title=computed(()=>t.value);function setTitle(e){p.value=e}const b=ref(),background=computed(()=>b.value);function setBackground(e){b.value=e}const fc=ref("var(--color-theme-7)"),focusColor=computed(()=>fc.value),c=ref(),colorPalette=computed(()=>c.value);function setColorPalette(e){c.value=e,useAutoThemeColors.value?(fc.value=pickPaletteColor(e,20,160).replace(/,/gu," ").replace("rgb(",""),document.documentElement.style.setProperty("--color-focus",fc.value)):fc.value="var(--color-theme-7)"}const l=ref();computed(()=>l.value);function setLogo(e){l.value=e}computed(()=>isPlatform("capacitor")?__vitePreload(async()=>{const{StatusBar:e}=await import("./vendor-F08gofix.js").then(a=>a.br);return{StatusBar:e}},__vite__mapDeps([0,1,2,3])).then(({StatusBar:e})=>e):()=>{});const st=ref(SortType.index),sortType=computed(()=>st.value),setSortType=e=>{st.value=e},so=ref(SortOrder.asc),sortOrder=computed(()=>so.value),setSortOrder=e=>{so.value=e},nav=ref(!0),navBarVisible=computed(()=>nav.value),setNavBarVisible=e=>{nav.value=e},showNavBar=()=>{nav.value=!0},hideNavBar=()=>{nav.value=!1};(async()=>isXmasTime()&&document.documentElement.classList.add("xmas"))();const searchUrl=computed(()=>isMusicRoute.value?"/search?from=music":"/search"),redirectUrl=useLocalStorage("redirectUrl","/home");computed(()=>router.currentRoute.value.path=="/search");const isMusicSearchRoute=computed(()=>router.currentRoute.value.path=="/music/search"),isHomeRoute=computed(()=>router.currentRoute.value.path=="/home"||router.currentRoute.value.path=="/"),isMusicRoute=computed(()=>router.currentRoute.value.path.startsWith("/music")),isLibraryRoute=computed(()=>router.currentRoute.value.path.startsWith("/libraries")||router.currentRoute.value.path.startsWith("/library")),isDashboardRoute=computed(()=>router.currentRoute.value.path.startsWith("/dashboard")),isPreferencesRoute=computed(()=>router.currentRoute.value.path.startsWith("/preferences")),hasMusicLibrary=computed(()=>{var e,a;return(a=(e=libraries.value)==null?void 0:e.some)==null?void 0:a.call(e,r=>r.type!="music")}),isAlbumRoute=computed(()=>router.currentRoute.value.path.startsWith("/music/album")),isArtistRoute=computed(()=>router.currentRoute.value.path.startsWith("/music/artist"));computed(()=>router.currentRoute.value.path.startsWith("/music/playlist"));const isSongRoute=computed(()=>router.currentRoute.value.path.startsWith("/music/song"));computed(()=>router.currentRoute.value.path.startsWith("/music/queue"));const isTrackRoute=computed(()=>router.currentRoute.value.path.startsWith("/music/artist/")||router.currentRoute.value.path.startsWith("/music/album/")),done$4=ref(!1),getLibraries=()=>new Promise((e,a)=>{if(libraries.value.length>0||done$4.value){e();return}if(!currentServer.value){e();return}serverClient().get("libraries").then(({data:r})=>{setLibraries(r.data),setupComplete.value=!0,done$4.value=!0,e(),router.push(redirectUrl.value).then()}).catch(()=>{done$4.value=!0,router.push({name:"Server offline"}).then(()=>e())})}),apiClient=e=>client({baseUrl:`https://api${suffix}.nomercy.tv/v1`,timeout:e}),servers=ref([]),setServers=e=>{servers.value=e},messages$1=ref([]),messagesState=computed(()=>messages$1.value),setMessages=e=>{messages$1.value=e},markAllMessagesRead=()=>{messages$1.value.forEach(e=>e.read=!0),apiClient().patch("/messages",{read:!0}).catch(console.error)},notifications=ref([]),notificationsState=computed(()=>notifications.value),setNotifications=e=>{notifications.value=e},addNotification=e=>{notifications.value.push(e)},removeNotification=e=>{const a=notifications.value.indexOf(e);a!==-1&&notifications.value.splice(a,1),apiClient().delete(`/notifications/${e.id}`).catch(console.error)},clearNotifications=()=>{notifications.value=[],apiClient().delete("/notifications").catch(console.error)},done$3=ref(!1),getLocations=()=>new Promise((e,a)=>{if(done$3.value)return e();apiClient().get("/app_config").then(async({data:r})=>(r!=null&&r.data||a("No data returned from API"),setServers(r.data.servers),setMessages(r.data.messages??[]),setNotifications(r.data.notifications??[]),setUser({...user.value,locale:r.data.locale,name:r.data.name,avatarUrl:r.data.avatarUrl,features:r.data.features,moderator:!!r.data.moderator}),done$3.value=!0,servers.value.length==0?await router.push({name:"No Servers"}):servers.value.length==1?setCurrentServer(servers.value[0]):servers.value.length>1&&localStorage.getItem("currentServer")?setCurrentServer(servers.value.find(n=>n.id==localStorage.getItem("currentServer"))):servers.value.length>1&&await router.push({name:"Select Server"}),e())).catch(r=>{a(r)})}),mc=ref(!1);computed(()=>mc.value);const si$1=ref();computed(()=>si$1.value);const musicSocketConnection=computed(()=>{var e;return(e=si$1.value)==null?void 0:e.connection}),setMusicSocketInstance=e=>{si$1.value=e},ps=ref(),playerState=computed(()=>ps.value);watch(si$1,e=>{var a,r,n,o,s,i,d;e!=null&&e.connection&&((a=e==null?void 0:e.connection)==null||a.on("connected",connected),(r=e==null?void 0:e.connection)==null||r.on("disconnected",disconnected),(n=e==null?void 0:e.connection)==null||n.on("error",error),(o=e==null?void 0:e.connection)==null||o.on("PlayerState",handlePlayerState),(s=e==null?void 0:e.connection)==null||s.on("ConnectedDevicesState",handleConnectedDevicesState),(i=e==null?void 0:e.connection)==null||i.on("ChangeDevice",handleBroadcastStatus),(d=e==null?void 0:e.connection)==null||d.invoke("Devices").then(handleConnectedDevicesState),window.addEventListener("beforeunload",()=>{var g;(g=e==null?void 0:e.connection)==null||g.stop()},{once:!0}),window.addEventListener("unload",()=>{var g;(g=e==null?void 0:e.connection)==null||g.stop()},{once:!0}))});const connected=()=>{mc.value=!0,console.log("Connected to Music SignalR"),document.dispatchEvent(new Event("musicHub-connected"))},disconnected=e=>{mc.value=!1,console.log("Disconnected from Music SignalR",e),document.dispatchEvent(new Event("musicHub-disconnected"))},error=e=>{mc.value=!1,console.error("Music SignalR Error:",e),document.dispatchEvent(new Event("musicHub-error"))},handleBroadcastStatus=e=>{if(e)for(const a of e.events){const r=a.deviceBroadcastStatus;currentDeviceId.value=r.device_id,r.device_id==deviceId.value?audioPlayer.unmute():audioPlayer.mute()}},handlePlayerState=e=>{var a,r;if(e)for(const n of e.events){if(n.type!=="PlayerStateChanged")continue;const o=n.event.state;if(ps.value=o,!(o!=null&&o.item)){audioPlayer.stop(),setTimeout(()=>{audioPlayer.stop()},1e3);return}const s=(Date.now()-o.timestamp)/1e3/2,i=o.progress_ms>=1?(o.progress_ms+s)/1e3:o.progress_ms/1e3;currentDeviceId.value=o.device_id,setCurrentPlaylist(o.current_list),o.device_id==deviceId.value&&!o.muted_state?audioPlayer.unmute():audioPlayer.mute(),audioPlayer.repeat(o.repeat_state),audioPlayer.shuffle(o.shuffle_state),o.volume_percentage<0&&(o.volume_percentage=0),o.volume_percentage>100&&(o.volume_percentage=100),audioPlayer.setVolume(o.volume_percentage),audioPlayer.setQueue(o.playlist),((a=currentSong.value)==null?void 0:a.id)!=((r=o.item)==null?void 0:r.id)?(audioPlayer.setCurrentSong(o.item),audioPlayer.play().then(),audioPlayer.once("seeked",()=>{o.device_id&&o.is_playing?audioPlayer.play().then():audioPlayer.pause()}),audioPlayer.once("duration",()=>{o.device_id&&o.is_playing?audioPlayer.play().then():audioPlayer.pause(),audioPlayer.seek(i)})):currentSong.value=o.item,o.device_id==deviceId.value?(!currentTime.value||Math.abs(currentTime.value-i)>.75)&&audioPlayer.seek(i):audioPlayer.seek(i),o.device_id&&o.is_playing&&currentSong.value?audioPlayer.play().then():audioPlayer.pause()}},handleConnectedDevicesState=e=>{connectedDevices.value=e};var L;const audioPlayer=new MusicPlayer({motionConfig:{canvas:document.getElementById("visualizer")},motionColors:["#ff0000","#ffff00","#00ff00","#00ffff","#0000ff","#ff00ff","#ff0000"],siteTitle,expose:!0,disableAutoPlayback:((L=user.value.features)==null?void 0:L.nomercyConnect)??!1,actions:{play:()=>{var e,a,r;if(!((e=user.value.features)!=null&&e.nomercyConnect)){audioPlayer.play().then();return}currentDeviceId.value||(a=musicSocketConnection.value)==null||a.invoke("ChangeDeviceCommand",deviceId.value).then(()=>{console.log("Switched to device:",deviceId.value)}).catch(n=>{console.error("Error switching device:",n)}),(r=musicSocketConnection.value)==null||r.invoke("PlaybackCommand","play",null)},pause:()=>{var e,a,r;if(!((e=user.value.features)!=null&&e.nomercyConnect)){audioPlayer.pause();return}currentDeviceId.value||(a=musicSocketConnection.value)==null||a.invoke("ChangeDeviceCommand",deviceId.value).then(()=>{console.log("Switched to device:",deviceId.value)}).catch(n=>{console.error("Error switching device:",n)}),(r=musicSocketConnection.value)==null||r.invoke("PlaybackCommand","pause",null)},stop:()=>{var e,a;if(setLyricsMenuOpen(!1),setQueueMenuOpen(!1),setDeviceMenuOpen(!1),!((e=user.value.features)!=null&&e.nomercyConnect)){audioPlayer.stop();return}(a=musicSocketConnection.value)==null||a.invoke("PlaybackCommand","stop",null)},previous:()=>{var e,a;if(!((e=user.value.features)!=null&&e.nomercyConnect)){audioPlayer.previous();return}(a=musicSocketConnection.value)==null||a.invoke("PlaybackCommand","previous",null)},next:()=>{var e,a;if(!((e=user.value.features)!=null&&e.nomercyConnect)){audioPlayer.next();return}(a=musicSocketConnection.value)==null||a.invoke("PlaybackCommand","next",null)},seek:e=>{var a;(a=musicSocketConnection.value)==null||a.invoke("PlaybackCommand","seek",e),audioPlayer.seek(e)}}});watch(user,e=>{var a;audioPlayer.setAutoPlayback(((a=e.features)==null?void 0:a.nomercyConnect)??!1)});const lyricsMenuOpen=ref(!1),setLyricsMenuOpen=e=>{lyricsMenuOpen.value=e,queueMenuOpen.value=!1,deviceMenuOpen.value=!1,equalizerMenuOpen.value=!1},toggleLyricsMenuOpen=()=>{lyricsMenuOpen.value=!lyricsMenuOpen.value,queueMenuOpen.value=!1,deviceMenuOpen.value=!1,equalizerMenuOpen.value=!1},hasLyrics=ref(!1),setHasLyrics=e=>{hasLyrics.value=e},deviceMenuOpen=ref(!1),setDeviceMenuOpen=e=>{deviceMenuOpen.value=e,lyricsMenuOpen.value=!1,queueMenuOpen.value=!1,equalizerMenuOpen.value=!1},toggleDeviceMenuOpen=()=>{deviceMenuOpen.value=!deviceMenuOpen.value,lyricsMenuOpen.value=!1,queueMenuOpen.value=!1,equalizerMenuOpen.value=!1},modalOpen=ref(!1),fullPlayerModalOpen=ref(modalOpen.value),setFullPlayerModalOpen=e=>{fullPlayerModalOpen.value=e,setMusicSize(SizeState.compact)},openFullPlayer=()=>{fullPlayerModalOpen.value=!0,setMusicSize(SizeState.full)},closeFullPlayer=()=>{fullPlayerModalOpen.value=!1,setMusicSize(SizeState.compact)},connectedDevices=ref([]),currentDeviceId=ref(null),currentTime=ref(0),duration=ref(0),remainingTime=ref(0),percentage=ref(0),currentSong=ref(null),currentPlaylist=ref(null),queue=ref([]),backlog=ref([]),isPlaying=ref(!1),isMuted=ref(!1),isShuffling=ref(!1),isRepeating=ref("off"),volume=ref(0),panning=ref(0),bands=ref([]),equalizerPresets=ref([]),equalizerSliderValues=ref({}),equalizerPreset=ref({}),setCurrentPlaylist=e=>{currentPlaylist.value=e},queueMenuOpen=ref(!1),setQueueMenuOpen=e=>{queueMenuOpen.value=e,lyricsMenuOpen.value=!1,deviceMenuOpen.value=!1,equalizerMenuOpen.value=!1},toggleQueueMenuOpen=()=>{queueMenuOpen.value=!queueMenuOpen.value,lyricsMenuOpen.value=!1,deviceMenuOpen.value=!1,equalizerMenuOpen.value=!1},musicVisibility=ref(VisibilityState.hidden),musicSize=ref(SizeState.compact),setMusicSize=e=>{musicSize.value=e},equalizerMenuOpen=ref(!1),setEqualizerMenuOpen=e=>{equalizerMenuOpen.value=e,lyricsMenuOpen.value=!1,queueMenuOpen.value=!1,deviceMenuOpen.value=!1},toggleEqualizerMenuOpen=()=>{equalizerMenuOpen.value=!equalizerMenuOpen.value,lyricsMenuOpen.value=!1,queueMenuOpen.value=!1,deviceMenuOpen.value=!1},closeEqualizerMenu=()=>{equalizerMenuOpen.value=!1,lyricsMenuOpen.value=!1,queueMenuOpen.value=!1,deviceMenuOpen.value=!1},convertToPercentage=(e,a,r)=>{let n=(e-a)/(r-a)*100;return n<=20?n+=5/20*n:n>=80&&(n-=5/20*(100-n)),Math.max(0,Math.min(100,n))},handleFullReset=()=>{panning.value=0,setEqualizerPreset(equalizerPresets.value.find(e=>e.name=="Flat"))},handleChange=(e,a,r)=>{const n=parseFloat(a.target.value);if(e==="panning"){panning.value=n,audioPlayer.setPanner(n),audioPlayer.saveEqualizerSettings();return}if(r!=null&&r.gain){if(r.gain=n,r.frequency==="Pre"){audioPlayer.setPreGain(n),audioPlayer.saveEqualizerSettings();return}bands.value=[...bands.value.map(o=>o.frequency===r.frequency?(audioPlayer.setFilter(r),r):o)],audioPlayer.equalizerBands=bands.value,audioPlayer.saveEqualizerSettings()}},handleReset=(e,a,r)=>{onDoubleClick(a,()=>{},()=>{if(e==="panning"){panning.value=0,audioPlayer.setPanner(0),audioPlayer.saveEqualizerSettings();return}if(r!=null&&r.gain){if(r.gain=0,r.frequency==="Pre"){audioPlayer.setPreGain(0),audioPlayer.saveEqualizerSettings();return}bands.value=[...bands.value.map(n=>n.frequency===r.frequency?(audioPlayer.setFilter(r),r):n)],audioPlayer.equalizerBands=bands.value,audioPlayer.saveEqualizerSettings()}})},setEqualizerPreset=e=>{equalizerPreset.value=equalizerPresets.value.find(a=>a.name===((e==null?void 0:e.name)??"Flat"))??equalizerPresets.value[0],bands.value=[{frequency:"Pre",gain:equalizerSliderValues.value.pre.default},...equalizerPreset.value.values],audioPlayer.equalizerBands=bands.value;for(let a=1;a<bands.value.length;a++)audioPlayer.setFilter(bands.value[a]);audioPlayer.saveEqualizerSettings()};panning.value=audioPlayer.equalizerPanning;bands.value=audioPlayer.equalizerBands;equalizerPresets.value=audioPlayer.equalizerPresets;equalizerSliderValues.value=audioPlayer.equalizerSliderValues;equalizerPreset.value=audioPlayer.equalizerPresets.find(e=>e.name=="Flat")??equalizerPresets.value[0];let lastTime=0;audioPlayer.on("time",e=>{currentTime.value=e.position,duration.value=e.duration,remainingTime.value=e.remaining,percentage.value=e.percentage,currentDeviceId.value==deviceId.value&&e.position-lastTime>5&&(lastTime=e.position)});audioPlayer.on("song",e=>{currentSong.value=e,lastTime=0,e?musicVisibility.value=VisibilityState.showing:(musicVisibility.value=VisibilityState.hidden,lyricsMenuOpen.value=!1,queueMenuOpen.value=!1,deviceMenuOpen.value=!1,equalizerMenuOpen.value=!1)});audioPlayer.on("queue",e=>{queue.value=toRaw(e)});audioPlayer.on("backlog",e=>{backlog.value=toRaw(e)});audioPlayer.on("play",()=>{isPlaying.value=!0});audioPlayer.on("pause",()=>{isPlaying.value=!1});audioPlayer.on("stop",()=>{isPlaying.value=!1});audioPlayer.on("mute",e=>{isMuted.value=e});audioPlayer.on("shuffle",e=>{isShuffling.value=e});audioPlayer.on("repeat",e=>{isRepeating.value=e});audioPlayer.on("volume",e=>{volume.value=e});if(isPlatform("capacitor")){VolumeButtons.clearWatch().then();const e={},a=(r,n)=>{console.log(r.direction,n),audioPlayer.setVolume(r.direction==="up"?volume.value+10:volume.value-10)};e.disableSystemVolumeHandler=!1,e.suppressVolumeIndicator=!1,VolumeButtons.watchVolume(e,a).then(),VolumeButtons.isWatching().then(r=>{console.log(r)})}const initializeAudioPlayer=()=>audioPlayer.accessToken?Promise.resolve():new Promise(e=>{var r;watch(currentServer,n=>{n&&(audioPlayer.setBaseUrl(n.serverBaseUrl),audioPlayer.setAccessToken(user.value.accessToken))}),audioPlayer.setBaseUrl((r=currentServer.value)==null?void 0:r.serverBaseUrl),audioPlayer.setAccessToken(user.value.accessToken);const a=useLocalStorage("nmplayer-music-supports-audio-context",!1);a.value=!1,e()}),queryClient=new QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1,refetchOnMount:!1,retry:!1,experimental_prefetchInRender:!0,staleTime:1e3*60*60}}}),si=ref({});computed(()=>si.value);const setSocketInstance=e=>{si.value=e},useSocket=()=>toRaw(si.value.connection),connect=e=>{e&&(e.on("connect",onConnect),e.on("disconnected",onDisconnect),e.on("notify",onNotify),e.on("command",onCommand),e.on("RefreshLibrary",onUpdateContent),e.on("addActivityLog",onAddActivityLog),e.on("setActivityLog",onSetActivityLog),e.on("pingEvent",pingEvent))},timeout=ref(),onConnect=e=>{e&&(document.dispatchEvent(new Event("baseHub-connected")),clearTimeout(timeout.value))},onDisconnect=e=>{e&&document.dispatchEvent(new Event("baseHub-disconnected"))},onNotify=e=>{},onUpdateContent=e=>{queryClient.invalidateQueries(e)},onCommand=async data=>{const deviceId=await Device.getId().then(e=>e.identifier);if(data.deviceId==deviceId)return;const func=eval(`(${data})`);typeof func=="function"&&func()},onAddActivityLog=e=>{},onSetActivityLog=e=>{},pingEvent=e=>{useSocket().invoke("pongEvent",e).then()};class SocketClient{constructor(a,r,n="socket"){_(this,"connection",null);_(this,"accessToken");_(this,"baseUrl");_(this,"clientInfo",clientInfo.value);_(this,"keepAliveInterval",5);_(this,"endpoint");_(this,"dispose",async()=>{this.connection});_(this,"setup",async()=>{if(this.connection)try{this.connection.onreconnecting(a=>{console.log("SignalR Disconnected.",a==null?void 0:a.message),onDisconnect(this.connection)}),this.connection.onreconnected(()=>{console.log("SignalR Reconnected."),onConnect(this.connection)}),this.connection.onclose(async()=>{console.log("SignalR Closed."),onDisconnect(this.connection),this.connection&&(await this.connection.start(),onConnect(this.connection),connect(this.connection))}),await this.connection.start(),onConnect(this.connection),connect(this.connection)}catch(a){console.error(a)}});this.baseUrl=a,this.accessToken=r,this.endpoint=n,this.connection=this.connectionBuilder()}connectionBuilder(){const a=this.urlBuilder();return new HubConnectionBuilder().withUrl(`${this.baseUrl}/${this.endpoint}`,{accessTokenFactory:()=>this.accessToken+a,transport:HttpTransportType.WebSockets}).withKeepAliveInterval(this.keepAliveInterval*1e3).withAutomaticReconnect().withStatefulReconnect().configureLogging(LogLevel.Critical).build()}urlBuilder(){return`&${new URLSearchParams({client_id:this.clientInfo.id,client_name:this.clientInfo.name,client_type:this.clientInfo.type??"web",client_version:this.clientInfo.version,client_os:this.clientInfo.os,client_browser:this.clientInfo.browser,client_device:this.clientInfo.device,client_volume:this.clientInfo.volume_percent.toString()}).toString()}`}}const done$2=ref(!1),initializeSocket=()=>new Promise(async(e,a)=>{if(done$2.value||(done$2.value=!0,!currentServer.value||!user.value))return e();let r=new SocketClient(currentServer.value.serverBaseUrl,user.value.accessToken);return await r.setup(),setSocketInstance(r),setTimeout(()=>{watch(currentServer,async n=>{var o;!n||!user.value||!r||((o=r.connection)==null||o.stop(),await r.dispose(),r=new SocketClient(n.serverBaseUrl,user.value.accessToken),await r.setup(),setSocketInstance(r))})},5e3),e()}),chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function InvalidCharacterError(e){console.error(e)}InvalidCharacterError.prototype=new Error;InvalidCharacterError.prototype.name="InvalidCharacterError";function polyfill(e=""){const a=String(e).replace(/[=]+$/u,"");if(a.length%4==1)throw InvalidCharacterError("'atob' failed: The string to be decoded is not correctly encoded.");let r=0,n=0,o=0,s="";for(let i;i=a.charAt(o++);~i&&(n=r%4?n*64+i:i,r++%4)?s+=String.fromCharCode(255&n>>(-2*r&6)):0)i=chars.indexOf(i);return s}const atob=typeof window<"u"&&window.atob&&window.atob.bind(window)||polyfill;function b64DecodeUnicode(e){return decodeURIComponent(atob(e).replace(/(.)/gu,(a,r)=>{let n=r.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n=`0${n}`),`%${n}`}))}function base64_url_decode(e){let a=e.replace(/-/gu,"+").replace(/_/gu,"/");switch(a.length%4){case 0:break;case 2:a+="==";break;case 3:a+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return b64DecodeUnicode(a)}catch{return atob(a)}}function InvalidTokenError(e){console.error(e)}InvalidTokenError.prototype=new Error;InvalidTokenError.prototype.name="InvalidTokenError";function jwtDecode(e,a){if(typeof e!="string")throw InvalidTokenError("Invalid token specified: must be a string");a=a||{};const r=a.header===!0?0:1,n=e.split(".")[r];if(typeof n!="string")throw InvalidTokenError(`Invalid token specified: missing part #${r+1}`);let o;try{o=base64_url_decode(n)}catch(s){throw InvalidTokenError(`Invalid token specified: invalid base64 for part #${r+1} (${s.message})`)}try{return JSON.parse(o)}catch(s){throw InvalidTokenError(`Invalid token specified: invalid json for part #${r+1} (${s.message})`)}}function generateCodeVerifier(e){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";let r="";for(let n=0;n<e;n++)r+=a.charAt(Math.floor(Math.random()*a.length));return r}async function generateCodeChallenge(e){var i;const r=new TextEncoder().encode(e),n=await((i=window.crypto.subtle)==null?void 0:i.digest("SHA-256",r));if(!n)return"";const o=Array.from(new Uint8Array(n));return base64URLEncode(o)}function base64URLEncode(e){return btoa(String.fromCharCode.apply(null,e)).replace(/\+/gu,"-").replace(/\//gu,"_").replace(/[=]/gu,"")}async function generatePKCE(){const e=generateCodeVerifier(40),a=generateCodeVerifier(128);sessionStorage.setItem("state",e),sessionStorage.setItem("code_verifier",a);const r=await generateCodeChallenge(a);return{state:e,codeVerifier:a,codeChallenge:r}}function parseToken(e){return jwtDecode(e)}const cdnClient=e=>client({baseUrl:`https://cdn${suffix}.nomercy.tv`,timeout:e}),originalLocation=window.location.href.startsWith("file://")?"http://localhost:5173":window.location.origin,clientId="nomercy-ui",clientSecret="BXZFX7FzoRplLuKjDrSHB04epMJbRv04";async function redirectToOAuth(e=!1){await generatePKCE().then(a=>{let r=`${originalLocation}/#/oauth/callback`;isPlatform("capacitor")&&(r="nomercy:///logout");const n=new URLSearchParams({client_id:clientId,post_logout_redirect_uri:r,response_type:"code",scope:"openid profile email",state:a.state,prompt:e?"login":"none"}).toString();window.location.href=`${authBaseUrl}logout?${n}`})}function refreshToken$1(){return new Promise((e,a)=>{setTimeout(async()=>{var n,o,s;const r=((s=(o=(n=location.search.split("refreshToken="))==null?void 0:n[1])==null?void 0:o.split("&"))==null?void 0:s[0])??localStorage.getItem("refresh_token")??void 0;if(!r){a("refreshToken: No refresh token");return}cdnClient().post(`${authBaseUrl}token`,{grant_type:"refresh_token",client_id:clientId,client_secret:clientSecret,refresh_token:r},{headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}}).then(i=>(storeTokens(i.data),e(i))).catch(i=>(console.error(i),clearTokens(),sessionStorage.clear(),localStorage.clear(),location.reload(),a(i)))},1500)})}let refreshInterval={};function keepTokenFresh(){clearInterval(refreshInterval),refreshInterval=setInterval(()=>{hasValidToken()&&refreshToken$1().then()},3600*1e3)}function hasToken(){return user.value.accessToken!==null}function hasValidToken(){return hasToken()&&user.value.refreshIn-Date.now()>5e3}function storeTokens(e){setUser({...user.value,refreshIn:new Date(Date.now()+e.expires_in*1e3).getTime(),accessToken:e.access_token,refreshToken:e.refresh_token,idToken:e.id_token,expiresIn:e.expires_in}),localStorage.setItem("access_token",e.access_token),localStorage.setItem("refresh_token",e.refresh_token),localStorage.setItem("id_token",e.id_token);try{const a=parseToken(e.id_token);console.log("decodedToken"),setUser({...user.value,name:a.display_name,email:a.email,id:a.sub,locale:a.locale})}catch(a){console.error(a)}}function clearTokens(){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("id_token")}function logout(){redirectToOAuth(!1).then()}const storeUserDetails=()=>new Promise((e,a)=>{var r,n,o;if((r=user.value)!=null&&r.id){e();return}try{const{isAuthenticated:s}=useKeycloak();if(s.value){const{keycloak:i,roles:d,token:g,refreshToken:m}=useKeycloak();return setUser({...user.value,accessToken:g.value,refreshToken:m.value}),i.idTokenParsed&&setUser({...user.value,id:i.idTokenParsed.sub,name:i.idTokenParsed.display_name??((n=i.idTokenParsed)==null?void 0:n.name),email:(o=i.idTokenParsed)==null?void 0:o.email,moderator:d.value.includes("nova")}),e()}else refreshToken$1().then(()=>{s.value=!0,e()})}catch{a(new Error("Not authenticated"))}}),done$1=ref(!1),initializeMusicSocket=()=>new Promise(async(e,a)=>{var n,o;if(done$1.value)return e();if(done$1.value=!0,!currentServer.value||!user.value||!((n=user.value.features)!=null&&n.nomercyConnect))return(o=user.value).features??(o.features={}),user.value.features.nomercyConnect=!1,e();let r=new SocketClient(currentServer.value.serverBaseUrl,user.value.accessToken,"musicHub");return await r.setup(),setMusicSocketInstance(r),setTimeout(()=>{watch(currentServer,async s=>{var i;console.log("Current server changed, reinitializing music socket",s),!(!s||!user.value||!r)&&((i=r.connection)==null||i.stop(),await r.dispose(),r=new SocketClient(s.serverBaseUrl,user.value.accessToken,"musicHub"),await r.setup(),setMusicSocketInstance(r))})},5e3),e()}),done=ref(!1),getServerPermissions=()=>new Promise((e,a)=>{if(done.value){e();return}if(!currentServer.value){e();return}serverClient().get("permissions").then(({data:r})=>{setCurrentServer({...currentServer.value,is_owner:r.owner,is_manager:r.manage}),done.value=!0,e()}).catch(()=>{done.value=!0,router.push({name:"Server offline"}).then(()=>e())})}),promises=[storeUserDetails,getLocations,getServerPermissions,getLibraries,initializeSocket,initializeMusicSocket,initializeAudioPlayer],handlePromises=async(e,a)=>{for(const r of e)await r().catch(n=>{throw new Error(n)});a==null||a()},router=createRouter({history:isPlatform("capacitor")?createWebHistory("/"):createWebHistory("/"),routes});router.beforeResolve(async(e,a,r)=>{if(isPlatform("capacitor")&&e.name!=="Auth"&&!localStorage.getItem("refresh_token")&&!user.value.accessToken){const{isAuthenticated:n}=useKeycloak();if(!n.value&&isTv.value)return r({name:"Auth"})}if(e.name==="Auth")return r();await handlePromises(promises,r)});beforeEach(router);afterEach(router);const _sfc_main=defineComponent({__name:"App",setup(e){return(a,r)=>(openBlock(),createBlock(unref(IonApp),null,{default:withCtx(()=>[createBaseVNode("div",{id:"navShadow",class:normalizeClass(["fixed sm:hidden w-full pt-safe z-1199 bg-focus top-0 left-0 bg-gradient-to-r",{block:unref(isPlatform)("android"),hidden:!unref(isPlatform)("android")}])},null,2),createVNode(unref(IonRouterOutlet),{animated:"false",class:"pointer-events-none children:pointer-events-auto"})]),_:1}))}}),pwaMessages={en:{newVersion:"New version available.",updateNow:"Update now?",offline:"You are offline",offlineMessage:"Please check your internet connection and try again.",reload:"Reload page"},nl:{newVersion:"Nieuwe versie beschikbaar.",updateNow:"Nu updaten?",offline:"Je bent offline",offlineMessage:"Controleer je internetverbinding en probeer het opnieuw.",reload:"Pagina herladen"},fr:{newVersion:"Nouvelle version disponible.",updateNow:"Mettre à jour maintenant?",offline:"Vous êtes hors ligne",offlineMessage:"Veuillez vérifier votre connexion Internet et réessayer.",reload:"Recharger la page"},de:{newVersion:"Neue Version verfügbar.",updateNow:"Jetzt aktualisieren?",offline:"Du bist offline",offlineMessage:"Bitte überprüfe deine Internetverbindung und versuche es erneut.",reload:"Seite neu laden"},es:{newVersion:"¡Una nueva versión está disponible!",updateNow:"Actualizar ahora",offline:"Estás sin conexión",offlineMessage:"Por favor, comprueba tu conexión a Internet y vuelve a intentarlo.",reload:"Recargar página"}};let redirectUri="nomercy://home";location.href.includes("logout")&&(redirectUri="nomercy:///logout");App.addListener("appUrlOpen",async e=>{console.log("App opened with URL: ",e.url),redirectUri=e.url,router.isReady().then(async()=>{await router.replace(e.url.replace("nomercy://",""))})}).then();__vitePreload(()=>import("./swiper-DhG1br88.js").then(e=>e.s),__vite__mapDeps([7,8]));__vitePreload(()=>import("./swiper-DhG1br88.js").then(e=>e.k),__vite__mapDeps([7,8]));function getCurrentLanguage(){return localStorage.getItem("language")||navigator.language.split("-")[0]||"en"}const lang=getCurrentLanguage(),messages=pwaMessages[lang]||pwaMessages.en,app=createApp(_sfc_main),refreshToken=location.search.includes("refreshToken")?location.search.split("refreshToken=")[1].split("&")[0]:localStorage.getItem("refresh_token")||void 0;redirectUrl.value=window.location.pathname;const onlineStatus=useOnline();preloadService.init();async function setupApplication(){const{setupApp:e}=await __vitePreload(async()=>{const{setupApp:a}=await import("./setupApp-huJj0fgG.js");return{setupApp:a}},__vite__mapDeps([121,1,5,0,2,3,6,7,8,9,10,14,18,39,110,20,21,19,15,44,22,45,122,123,111,11,12,124,125,126,127,43,128,129,23,25,54,55,49,130]));return e(app)}async function initializeOfflineApp(){if(!onlineStatus.value){const e=localStorage.getItem("access_token");if(e){const a=parseToken(e);setUser({...user.value,name:a.display_name,email:a.email,id:a.sub,accessToken:e,locale:a.locale,moderator:a.realm_access.roles.includes("nova")}),await setupApplication()}else document.body.innerHTML=`
        <div style="display: flex; justify-content: center; align-items: center; height: 100vh; flex-direction: column;">
          <h1>${messages.offline}</h1>
          <p>${messages.offlineMessage}</p>
          <button onclick="location.reload()">${messages.reload}</button>
        </div>
      `}}async function initializeMobileApp(){if(isPlatform("capacitor")&&!isTv.value&&!localStorage.getItem("access_token")){await lockPortrait();const[e,a]=await Promise.all([__vitePreload(()=>import("./index-CCspTCH-.js"),__vite__mapDeps([131,0,1,2,3,5,6,7,8,9])).then(r=>r.default),__vitePreload(()=>Promise.resolve().then(()=>config),void 0)]);app.use(e,{init:{refreshToken:localStorage.getItem("refresh_token")||void 0,onLoad:"login-required",checkLoginIframe:!1,enableLogging:!0,adapter:"capacitor-native",responseMode:"query",redirectUri:"nomercy://home"},config:a.keycloakConfig,onReady:async r=>{setUserFromKeycloak(r),await setupApplication()}})}}async function initializeWebApp(){if(!isPlatform("capacitor")&&!location.search.includes("refreshToken")){const[e,a]=await Promise.all([__vitePreload(()=>import("./vue-ionic-Cv2or74p.js").then(r=>r.bh),__vite__mapDeps([5,0,1,2,3,6,7,8,9])).then(r=>r.default),__vitePreload(()=>Promise.resolve().then(()=>config),void 0)]);app.use(e,{init:{onLoad:"login-required",checkLoginIframe:!1,enableLogging:!0,responseMode:"query",redirectUri:`${window.location.href||"#/"}${window.location.hash.includes("?")?"":"?"}`},config:a.keycloakConfig,onReady:async r=>{setUserFromKeycloak(r),await setupApplication()}})}}async function initializeCastApp(){if(!isPlatform("capacitor")&&location.search.includes("refreshToken")){const[e,a]=await Promise.all([__vitePreload(()=>import("./index-CmT2ghPr.js"),__vite__mapDeps([132,1,5,0,2,3,6,7,8,9,49])).then(r=>r.default),__vitePreload(()=>Promise.resolve().then(()=>config),void 0)]);app.use(e,{initOptions:{refreshToken,onLoad:"check-sso",checkLoginIframe:!1,enableLogging:!0,pkceMethod:"S256",silentCheckSsoFallback:!0,redirectUri:`${window.location.href||"#/"}${window.location.hash.includes("?")?"":"?"}`},config:a.keycloakConfig}),location.href="nomercy://home",await setupApplication()}}async function initializeTvApp(){const[e,a]=await Promise.all([__vitePreload(()=>import("./index-CmT2ghPr.js"),__vite__mapDeps([132,1,5,0,2,3,6,7,8,9,49])).then(r=>r.default),__vitePreload(()=>Promise.resolve().then(()=>config),void 0)]);app.use(e,{initOptions:{refreshToken:localStorage.getItem("refresh_token")||void 0,onLoad:"login-required",checkLoginIframe:!1,enableLogging:!0,adapter:"cordova-native",responseMode:"query",redirectUri,pkceMethod:"S256",silentCheckSsoFallback:!0},config:a.keycloakConfig}),await setupApplication()}async function initialize(){try{onlineStatus.value?isPlatform("capacitor")&&!isTv.value&&!localStorage.getItem("access_token")?await initializeMobileApp():!isPlatform("capacitor")&&!location.search.includes("refreshToken")?await initializeWebApp():!isPlatform("capacitor")&&location.search.includes("refreshToken")?await initializeCastApp():await initializeTvApp():await initializeOfflineApp()}catch(e){console.error("Failed to initialize app:",e),document.body.innerHTML=`
      <div style="display: flex; justify-content: center; align-items: center; height: 100vh; flex-direction: column;">
        <h1>Failed to load application</h1>
        <p>Please check your connection and try again.</p>
        <button onclick="location.reload()">Reload</button>
      </div>
    `}}initialize();init({app,dsn:"https://a91cb5bb1a46e2430f237de2abb3afc2@o4509253570592768.ingest.de.sentry.io/4509253730828368",sendDefaultPii:!1,tracesSampleRate:.1});export{setTitle$1 as $,redirectUrl as A,isNil as B,isString as C,isPromise as D,isFunction as E,createKeycloak as F,initKeycloak as G,getToken as H,getKeycloak as I,isTokenReady as J,useKeycloak as K,clearNotifications as L,removeNotification as M,notificationsState as N,isTv as O,tvModeOverride as P,messagesState as Q,markAllMessagesRead as R,shouldShowLibraryLinks as S,isHomeRoute as T,isLibraryRoute as U,isMusicRoute as V,searchUrl as W,libraries as X,playerState as Y,isMuted as Z,volume as _,serverClient as a,copyToClipboard as a$,musicVisibility as a0,equalizerMenuOpen as a1,background as a2,closeEqualizerMenu as a3,setEqualizerMenuOpen as a4,closeFullPlayer as a5,breakTitle2 as a6,SizeState as a7,setMusicSize as a8,queue as a9,handleReset as aA,handleChange as aB,equalizerPreset as aC,bands as aD,setEqualizerPreset as aE,equalizerPresets as aF,handleFullReset as aG,isXmasTime as aH,navBarVisible as aI,lyricsMenuOpen as aJ,hasLyrics as aK,toggleLyricsMenuOpen as aL,RGBString2hex as aM,setHasLyrics as aN,random_string as aO,currentTime as aP,duration as aQ,humanTime as aR,remainingTime as aS,isRepeating as aT,isShuffling as aU,clearTokens as aV,alphaNumericRange as aW,isDarkMode as aX,getImageBrightness as aY,isAlbumRoute as aZ,isArtistRoute as a_,useAutoThemeColors as aa,fullPlayerModalOpen as ab,currentPlaylist as ac,setFullPlayerModalOpen as ad,colorPalette as ae,percentage as af,openFullPlayer as ag,logout as ah,hasMusicLibrary as ai,isDashboardRoute as aj,isPreferencesRoute as ak,lockPortrait as al,unlockOrientation as am,hexLighter as an,stopPropagation as ao,queueMenuOpen as ap,connectedDevices as aq,currentDeviceId as ar,deviceId as as,deviceMenuOpen as at,toggleDeviceMenuOpen as au,toggleQueueMenuOpen as av,toggleEqualizerMenuOpen as aw,convertToPercentage as ax,equalizerSliderValues as ay,panning as az,setColorPalette as b,isSongRoute as b$,testUserToken as b0,episodeCounter as b1,getColorFromPercent as b2,redToGreen as b3,shouldMarquee as b4,SocketClient as b5,onDisconnect as b6,onConnect as b7,connect as b8,tmdbApiKey as b9,setLogo as bA,title as bB,breakTitle as bC,breakDescription as bD,greetingValue as bE,parseYear as bF,setNavBarVisible as bG,showNavBar as bH,hideNavBar as bI,useSocket as bJ,groupBy as bK,disableImmersiveMode as bL,lockLandscape as bM,enableImmersiveMode as bN,sortOrder as bO,sortType as bP,sortByType as bQ,setSortOrder as bR,isTrackRoute as bS,convertToSeconds as bT,SortOrder as bU,SortType as bV,setSortType as bW,limitSentenceByCharacters as bX,tooDark as bY,calculateDuration as bZ,stringFormat as b_,focusColor as ba,timeAgoShort as bb,humanTimeExtended as bc,clearLibraries as bd,pwaMessages as be,addNotification as bf,apiClient as bg,suffix as bh,dashboardCardGrid as bi,dashboardColumnGrid as bj,dashboardBigCardGrid as bk,tmdbImageBaseUrl as bl,pad as bm,humanFileSize as bn,checkboxValue as bo,media_types as bp,availableTranslations as bq,censorPublicIpAddresses as br,convertToHumanReact as bs,sortByPosterAlphabetized as bt,scrollIntoView as bu,poster as bv,unique as bw,refreshToken$1 as bx,keepTokenFresh as by,storeTokens as bz,currentServer as c,userTime as c0,client as c1,setServers as c2,servers as c3,setCurrentServer as c4,sortBy as c5,usePercentageColors as c6,greenToRed as c7,hexOpacity as c8,green as c9,orange as ca,purple as cb,getGpuColor as cc,deviceName as cd,setDeviceName as ce,languages as cf,displayLanguage as cg,setDisplayLanguage as ch,setShowBackdrops as ci,setUsePercentageColors as cj,setUseAutoThemeColors as ck,setScreensaverDelay as cl,themeColors as cm,setLibraries as cn,setBackground as d,breakLogoTitle as e,scrollContainerElement as f,showBackdrops as g,setPoster as h,isMobile as i,setTitle as j,scrollCenter as k,genreColors as l,mappedEntries as m,isNative as n,currentSong as o,pickPaletteColor as p,audioPlayer as q,router as r,screensaverDelay as s,musicSocketConnection as t,user as u,isMusicSearchRoute as v,isPlaying as w,musicSize as x,setCurrentPlaylist as y,queryClient as z};
