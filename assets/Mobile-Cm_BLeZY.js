import{An as m,Bn as S,Bt as $,Gt as _,Hn as z,I as N,Lt as P,M as j,Mt as F,Rt as i,Sn as L,T as q,Tt as A,Vt as g,an as O,bn as y,cn as c,i as G,mt as W,qt as Y,u as D,un as J,zn as o,zt as k}from"./index-Dv83kAv_.js";import"./dist-BWFEUpD5.js";import"./esm-CjYSFQTD.js";import"./esm-B--WsoEr.js";import"./dist-CkXwLdCd.js";import"./client-Lt1iJPRU.js";import"./ionic-global-BrT5QOOk.js";import"./hardware-back-button-DUNt_0t6.js";import"./index3-D57DmiIb.js";import"./index8-CrgDNp2f.js";import"./keyboard-BGaVckUv.js";import"./index2-Bme3R7x6.js";import"./ios.transition-CmHvz4bI.js";import"./keyboard2-DeMt_g_-.js";import"./md.transition-DBZTZPtp.js";import"./basecomponent-BjQ2yHda.js";import"./button-BlCqSJTL.js";import{h as f,l as K,m as v,o as b}from"./ui-Dy0BhNPE.js";import"./client-D4e5iciK.js";import{v as Q,x as U}from"./currentServer-CyRP1M2f.js";import"./config-BZ-AEJ_J.js";import"./esm-ANv1qkIu.js";import"./global-Cl9NRZH-.js";import"./esm-CLtwhlBL.js";import"./bundle-mjs-m3ebY3zV.js";import"./user-Cpc-QsaC.js";import"./serverClient-Dh7JrGPq.js";import{t as X}from"./router-LUtA4OvS.js";import"./utils-S5luT9U1.js";import"./useInfiniteServerClient-r3ptfaNG.js";import"./SocketClient-CLd4yl1R.js";import"./apiClient-9DYr7MVK.js";import"./notifications-qUxNFD5p.js";import"./utils-DRKz5xy4.js";import"./deviceInfo-DoGAY46a.js";import"./auth-hpDtC4ST.js";import"./musicPlaylists-D6UXHs9I.js";import"./esm-CU7dLS2l.js";import"./contextMenuItems-BciBz7Zs.js";import{r as Z}from"./BigPlayButton-CfIstnp_.js";import"./AppLogoSquare-i1IW1kFU.js";import{t as R}from"./MoooomIcon-DnG74F3v.js";import"./DropdownMenu-ApthCE94.js";import"./dist-Be7NXLvN.js";import{t as ee}from"./useServerClient-CvCiAwnH.js";import"./CoverImage-D4HQmV-e.js";import"./MusicButton-DnLkBuhm.js";import"./BannerButton-e4he2uED.js";import"./MediaLikeButton-CMUSbHSn.js";import{t as te}from"./Marquee-DSc1WxSu.js";import"./EqSpinner-CqW0Beaq.js";import{t as oe}from"./NotFound-1d42OEvA.js";import"./ShareButton-w_aNyHaA.js";import{i as ae,n as re,r as le,t as se}from"./TrackRow-BP6NWwkh.js";A();j();var ie={class:"relative z-0 flex h-auto flex-shrink-0 flex-grow flex-col items-start justify-start self-stretch"},ne={class:"flex flex-1 flex-shrink-0 flex-col items-start justify-start self-stretch bg-surface-12 dark:bg-transparent flex-grow-1 gap-0.5 sm:p-4"},ue=Y({__name:"Mobile",setup(pe){const h=N(),{data:e,isError:B}=ee({path:h.fullPath}),H=m(null),n=m([]),s=m("");y(e,t=>{Q(t?.name??null),d(t?.tracks??[],f.value,v.value,s.value),b(t?.color_palette?.cover)}),y(v,t=>{d(e.value?.tracks??[],f.value,t,s.value)}),y(f,t=>{d(e.value?.tracks??[],t,v.value,s.value)}),y(s,t=>{d(e.value?.tracks??[],f.value,v.value,t)});function d(t,l,a,r){const u=U(t??[],l,a,K);r===""?n.value=u:n.value=u?.filter(p=>p.name?.toLowerCase().includes(r?.toLowerCase?.())||p.artist_track?.some(V=>V.name.toLowerCase().includes(r?.toLowerCase?.()))||p.album_track?.[0]?.name.toLowerCase().includes(r?.toLowerCase?.()))??[]}O(()=>{d(e?.value?.tracks??[],f.value,v.value,s.value),e.value?.color_palette?.cover&&b(e.value?.color_palette?.cover)}),q(()=>{d(e?.value?.tracks??[],f.value,v.value,s.value),e.value?.color_palette?.cover&&b(e.value?.color_palette?.cover)});function M(){X.back()}const x=m(!1),E=m(!1),w=m(),C=m(),T=P(()=>Z({count:n.value?.length??0,getScrollElement:()=>C.value?.$el??null,estimateSize:()=>56,overscan:10}));function I(){const a=W("capacitor")?88:64,r=w.value?.$el,u=r?.firstChild;if(!r||!u)return;const p=r.getBoundingClientRect().top;x.value=p<=170,E.value=p<=160,p<=a?document.documentElement.classList.contains("scheme-dark")?u.style.background="hsl(from var(--color-theme-8) h s 23%)":(u.style.background="var(--color-theme-8)",r.style.color="white"):(u.style.background="",r.style.color="")}return(t,l)=>(c(),k(o(D),null,{default:L(()=>[_(o(G),{ref_key:"container",ref:C,"scroll-events":!0,onIonScroll:I},{default:L(()=>[o(B)&&!o(e)?(c(),k(oe,{key:0})):!o(h).params.id||o(h).params.id&&o(e)?.id===o(h).params.id?(c(),g("div",{key:1,ref_key:"main",ref:H,class:"flex flex-col h-auto overflow-x-clip w-available sm:rounded-2xl -mt-6 text-surface-12"},[_(le,{data:o(e)},null,8,["data"]),i("div",ie,[l[2]||(l[2]=i("div",{class:"pointer-events-none absolute z-0 h-96 w-full bg-spotifyBottom"},null,-1)),i("div",{id:"navbar",class:S([{"opacity-0 pointer-events-none":!x.value,"opacity-100 pointer-events-auto":x.value},"fixed z-1099 -mx-2 flex gap-4 p-2 px-4 w-available sm:hidden bg-surface-11 dark:bg-surface-1 top-0 pt-4 transition-all duration-200"])},[l[1]||(l[1]=i("div",{id:"navBg",class:"z-20 absolute flex items-center inset-0 w-available h-full bg-focus/12 dark:bg-focus transition-all duration-200 bg-spotifyTop opacity-50 pointer-events-none"},null,-1)),i("button",{class:"z-30 flex h-10 w-11 items-center justify-center rounded-md",onClick:M},[_(R,{icon:"arrowLeft"})]),i("div",{id:"navText",class:S([{"opacity-0 pointer-events-none":!x.value,"opacity-100 pointer-events-auto":x.value},"pointer-events-none whitespace-pre text-left relative z-20 line-clamp-1 h-auto self-center font-bold leading-none transition-all duration-200 w-[70%] overflow-clip text-xl"])},[_(te,{text:o(e)?.name},null,8,["text"])],2)],2),(c(),k(ae,{key:o(e)?.id,data:o(e),filter:s.value,onFilterChange:l[0]||(l[0]=a=>s.value=a)},null,8,["data","filter"])),i("div",ne,[(c(),k(re,{key:o(e)?.id,ref_key:"sortHeader",ref:w})),i("div",{style:z({height:`${T.value.value.getTotalSize()}px`,width:"100%",position:"relative"})},[(c(!0),g(F,null,J(T.value.value.getVirtualItems(),a=>(c(),g("div",{key:n.value[a.index]?.id+n.value[a.index]?.favorite,style:z({position:"absolute",top:0,left:0,width:"100%",height:`${a.size}px`,transform:`translateY(${a.start}px)`})},[_(se,{data:n.value[a.index],"display-list":n.value,index:a.index},null,8,["data","display-list","index"])],4))),128))],4)])])],512)):$("",!0)]),_:1},512)]),_:1}))}}),mt=ue;export{mt as default};
